{"version":3,"sources":["build/node_modules/browser-pack/_prelude.js","build/vendors/fullcalendar/build/vendors/fullcalendar/fullcalendar.js"],"names":[],"mappings":"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","file":"fullcalendar.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/*!\n * FullCalendar v3.1.0\n * Docs & License: http://fullcalendar.io/\n * (c) 2016 Adam Shaw\n */\n\n(function(factory) {\n\tfactory(jQuery, moment);\n})(function($, moment) {\n\n;;\n\nvar FC = $.fullCalendar = {\n\tversion: \"3.1.0\",\n\tinternalApiVersion: 7\n};\nvar fcViews = FC.views = {};\n\n\n$.fn.fullCalendar = function(options) {\n\tvar args = Array.prototype.slice.call(arguments, 1); // for a possible method call\n\tvar res = this; // what this function will return (this jQuery object by default)\n\n\tthis.each(function(i, _element) { // loop each DOM element involved\n\t\tvar element = $(_element);\n\t\tvar calendar = element.data('fullCalendar'); // get the existing calendar object (if any)\n\t\tvar singleRes; // the returned value of this single method call\n\n\t\t// a method call\n\t\tif (typeof options === 'string') {\n\t\t\tif (calendar && $.isFunction(calendar[options])) {\n\t\t\t\tsingleRes = calendar[options].apply(calendar, args);\n\t\t\t\tif (!i) {\n\t\t\t\t\tres = singleRes; // record the first method call result\n\t\t\t\t}\n\t\t\t\tif (options === 'destroy') { // for the destroy method, must remove Calendar object data\n\t\t\t\t\telement.removeData('fullCalendar');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// a new calendar initialization\n\t\telse if (!calendar) { // don't initialize twice\n\t\t\tcalendar = new Calendar(element, options);\n\t\t\telement.data('fullCalendar', calendar);\n\t\t\tcalendar.render();\n\t\t}\n\t});\n\n\treturn res;\n};\n\n\nvar complexOptions = [ // names of options that are objects whose properties should be combined\n\t'header',\n\t'footer',\n\t'buttonText',\n\t'buttonIcons',\n\t'themeButtonIcons'\n];\n\n\n// Merges an array of option objects into a single object\nfunction mergeOptions(optionObjs) {\n\treturn mergeProps(optionObjs, complexOptions);\n}\n\n;;\n\n// exports\nFC.intersectRanges = intersectRanges;\nFC.applyAll = applyAll;\nFC.debounce = debounce;\nFC.isInt = isInt;\nFC.htmlEscape = htmlEscape;\nFC.cssToStr = cssToStr;\nFC.proxy = proxy;\nFC.capitaliseFirstLetter = capitaliseFirstLetter;\n\n\n/* FullCalendar-specific DOM Utilities\n----------------------------------------------------------------------------------------------------------------------*/\n\n\n// Given the scrollbar widths of some other container, create borders/margins on rowEls in order to match the left\n// and right space that was offset by the scrollbars. A 1-pixel border first, then margin beyond that.\nfunction compensateScroll(rowEls, scrollbarWidths) {\n\tif (scrollbarWidths.left) {\n\t\trowEls.css({\n\t\t\t'border-left-width': 1,\n\t\t\t'margin-left': scrollbarWidths.left - 1\n\t\t});\n\t}\n\tif (scrollbarWidths.right) {\n\t\trowEls.css({\n\t\t\t'border-right-width': 1,\n\t\t\t'margin-right': scrollbarWidths.right - 1\n\t\t});\n\t}\n}\n\n\n// Undoes compensateScroll and restores all borders/margins\nfunction uncompensateScroll(rowEls) {\n\trowEls.css({\n\t\t'margin-left': '',\n\t\t'margin-right': '',\n\t\t'border-left-width': '',\n\t\t'border-right-width': ''\n\t});\n}\n\n\n// Make the mouse cursor express that an event is not allowed in the current area\nfunction disableCursor() {\n\t$('body').addClass('fc-not-allowed');\n}\n\n\n// Returns the mouse cursor to its original look\nfunction enableCursor() {\n\t$('body').removeClass('fc-not-allowed');\n}\n\n\n// Given a total available height to fill, have `els` (essentially child rows) expand to accomodate.\n// By default, all elements that are shorter than the recommended height are expanded uniformly, not considering\n// any other els that are already too tall. if `shouldRedistribute` is on, it considers these tall rows and\n// reduces the available height.\nfunction distributeHeight(els, availableHeight, shouldRedistribute) {\n\n\t// *FLOORING NOTE*: we floor in certain places because zoom can give inaccurate floating-point dimensions,\n\t// and it is better to be shorter than taller, to avoid creating unnecessary scrollbars.\n\n\tvar minOffset1 = Math.floor(availableHeight / els.length); // for non-last element\n\tvar minOffset2 = Math.floor(availableHeight - minOffset1 * (els.length - 1)); // for last element *FLOORING NOTE*\n\tvar flexEls = []; // elements that are allowed to expand. array of DOM nodes\n\tvar flexOffsets = []; // amount of vertical space it takes up\n\tvar flexHeights = []; // actual css height\n\tvar usedHeight = 0;\n\n\tundistributeHeight(els); // give all elements their natural height\n\n\t// find elements that are below the recommended height (expandable).\n\t// important to query for heights in a single first pass (to avoid reflow oscillation).\n\tels.each(function(i, el) {\n\t\tvar minOffset = i === els.length - 1 ? minOffset2 : minOffset1;\n\t\tvar naturalOffset = $(el).outerHeight(true);\n\n\t\tif (naturalOffset < minOffset) {\n\t\t\tflexEls.push(el);\n\t\t\tflexOffsets.push(naturalOffset);\n\t\t\tflexHeights.push($(el).height());\n\t\t}\n\t\telse {\n\t\t\t// this element stretches past recommended height (non-expandable). mark the space as occupied.\n\t\t\tusedHeight += naturalOffset;\n\t\t}\n\t});\n\n\t// readjust the recommended height to only consider the height available to non-maxed-out rows.\n\tif (shouldRedistribute) {\n\t\tavailableHeight -= usedHeight;\n\t\tminOffset1 = Math.floor(availableHeight / flexEls.length);\n\t\tminOffset2 = Math.floor(availableHeight - minOffset1 * (flexEls.length - 1)); // *FLOORING NOTE*\n\t}\n\n\t// assign heights to all expandable elements\n\t$(flexEls).each(function(i, el) {\n\t\tvar minOffset = i === flexEls.length - 1 ? minOffset2 : minOffset1;\n\t\tvar naturalOffset = flexOffsets[i];\n\t\tvar naturalHeight = flexHeights[i];\n\t\tvar newHeight = minOffset - (naturalOffset - naturalHeight); // subtract the margin/padding\n\n\t\tif (naturalOffset < minOffset) { // we check this again because redistribution might have changed things\n\t\t\t$(el).height(newHeight);\n\t\t}\n\t});\n}\n\n\n// Undoes distrubuteHeight, restoring all els to their natural height\nfunction undistributeHeight(els) {\n\tels.height('');\n}\n\n\n// Given `els`, a jQuery set of <td> cells, find the cell with the largest natural width and set the widths of all the\n// cells to be that width.\n// PREREQUISITE: if you want a cell to take up width, it needs to have a single inner element w/ display:inline\nfunction matchCellWidths(els) {\n\tvar maxInnerWidth = 0;\n\n\tels.find('> *').each(function(i, innerEl) {\n\t\tvar innerWidth = $(innerEl).outerWidth();\n\t\tif (innerWidth > maxInnerWidth) {\n\t\t\tmaxInnerWidth = innerWidth;\n\t\t}\n\t});\n\n\tmaxInnerWidth++; // sometimes not accurate of width the text needs to stay on one line. insurance\n\n\tels.width(maxInnerWidth);\n\n\treturn maxInnerWidth;\n}\n\n\n// Given one element that resides inside another,\n// Subtracts the height of the inner element from the outer element.\nfunction subtractInnerElHeight(outerEl, innerEl) {\n\tvar both = outerEl.add(innerEl);\n\tvar diff;\n\n\t// effin' IE8/9/10/11 sometimes returns 0 for dimensions. this weird hack was the only thing that worked\n\tboth.css({\n\t\tposition: 'relative', // cause a reflow, which will force fresh dimension recalculation\n\t\tleft: -1 // ensure reflow in case the el was already relative. negative is less likely to cause new scroll\n\t});\n\tdiff = outerEl.outerHeight() - innerEl.outerHeight(); // grab the dimensions\n\tboth.css({ position: '', left: '' }); // undo hack\n\n\treturn diff;\n}\n\n\n/* Element Geom Utilities\n----------------------------------------------------------------------------------------------------------------------*/\n\nFC.getOuterRect = getOuterRect;\nFC.getClientRect = getClientRect;\nFC.getContentRect = getContentRect;\nFC.getScrollbarWidths = getScrollbarWidths;\n\n\n// borrowed from https://github.com/jquery/jquery-ui/blob/1.11.0/ui/core.js#L51\nfunction getScrollParent(el) {\n\tvar position = el.css('position'),\n\t\tscrollParent = el.parents().filter(function() {\n\t\t\tvar parent = $(this);\n\t\t\treturn (/(auto|scroll)/).test(\n\t\t\t\tparent.css('overflow') + parent.css('overflow-y') + parent.css('overflow-x')\n\t\t\t);\n\t\t}).eq(0);\n\n\treturn position === 'fixed' || !scrollParent.length ? $(el[0].ownerDocument || document) : scrollParent;\n}\n\n\n// Queries the outer bounding area of a jQuery element.\n// Returns a rectangle with absolute coordinates: left, right (exclusive), top, bottom (exclusive).\n// Origin is optional.\nfunction getOuterRect(el, origin) {\n\tvar offset = el.offset();\n\tvar left = offset.left - (origin ? origin.left : 0);\n\tvar top = offset.top - (origin ? origin.top : 0);\n\n\treturn {\n\t\tleft: left,\n\t\tright: left + el.outerWidth(),\n\t\ttop: top,\n\t\tbottom: top + el.outerHeight()\n\t};\n}\n\n\n// Queries the area within the margin/border/scrollbars of a jQuery element. Does not go within the padding.\n// Returns a rectangle with absolute coordinates: left, right (exclusive), top, bottom (exclusive).\n// Origin is optional.\n// NOTE: should use clientLeft/clientTop, but very unreliable cross-browser.\nfunction getClientRect(el, origin) {\n\tvar offset = el.offset();\n\tvar scrollbarWidths = getScrollbarWidths(el);\n\tvar left = offset.left + getCssFloat(el, 'border-left-width') + scrollbarWidths.left - (origin ? origin.left : 0);\n\tvar top = offset.top + getCssFloat(el, 'border-top-width') + scrollbarWidths.top - (origin ? origin.top : 0);\n\n\treturn {\n\t\tleft: left,\n\t\tright: left + el[0].clientWidth, // clientWidth includes padding but NOT scrollbars\n\t\ttop: top,\n\t\tbottom: top + el[0].clientHeight // clientHeight includes padding but NOT scrollbars\n\t};\n}\n\n\n// Queries the area within the margin/border/padding of a jQuery element. Assumed not to have scrollbars.\n// Returns a rectangle with absolute coordinates: left, right (exclusive), top, bottom (exclusive).\n// Origin is optional.\nfunction getContentRect(el, origin) {\n\tvar offset = el.offset(); // just outside of border, margin not included\n\tvar left = offset.left + getCssFloat(el, 'border-left-width') + getCssFloat(el, 'padding-left') -\n\t\t(origin ? origin.left : 0);\n\tvar top = offset.top + getCssFloat(el, 'border-top-width') + getCssFloat(el, 'padding-top') -\n\t\t(origin ? origin.top : 0);\n\n\treturn {\n\t\tleft: left,\n\t\tright: left + el.width(),\n\t\ttop: top,\n\t\tbottom: top + el.height()\n\t};\n}\n\n\n// Returns the computed left/right/top/bottom scrollbar widths for the given jQuery element.\n// NOTE: should use clientLeft/clientTop, but very unreliable cross-browser.\nfunction getScrollbarWidths(el) {\n\tvar leftRightWidth = el.innerWidth() - el[0].clientWidth; // the paddings cancel out, leaving the scrollbars\n\tvar widths = {\n\t\tleft: 0,\n\t\tright: 0,\n\t\ttop: 0,\n\t\tbottom: el.innerHeight() - el[0].clientHeight // the paddings cancel out, leaving the bottom scrollbar\n\t};\n\n\tif (getIsLeftRtlScrollbars() && el.css('direction') == 'rtl') { // is the scrollbar on the left side?\n\t\twidths.left = leftRightWidth;\n\t}\n\telse {\n\t\twidths.right = leftRightWidth;\n\t}\n\n\treturn widths;\n}\n\n\n// Logic for determining if, when the element is right-to-left, the scrollbar appears on the left side\n\nvar _isLeftRtlScrollbars = null;\n\nfunction getIsLeftRtlScrollbars() { // responsible for caching the computation\n\tif (_isLeftRtlScrollbars === null) {\n\t\t_isLeftRtlScrollbars = computeIsLeftRtlScrollbars();\n\t}\n\treturn _isLeftRtlScrollbars;\n}\n\nfunction computeIsLeftRtlScrollbars() { // creates an offscreen test element, then removes it\n\tvar el = $('<div><div/></div>')\n\t\t.css({\n\t\t\tposition: 'absolute',\n\t\t\ttop: -1000,\n\t\t\tleft: 0,\n\t\t\tborder: 0,\n\t\t\tpadding: 0,\n\t\t\toverflow: 'scroll',\n\t\t\tdirection: 'rtl'\n\t\t})\n\t\t.appendTo('body');\n\tvar innerEl = el.children();\n\tvar res = innerEl.offset().left > el.offset().left; // is the inner div shifted to accommodate a left scrollbar?\n\tel.remove();\n\treturn res;\n}\n\n\n// Retrieves a jQuery element's computed CSS value as a floating-point number.\n// If the queried value is non-numeric (ex: IE can return \"medium\" for border width), will just return zero.\nfunction getCssFloat(el, prop) {\n\treturn parseFloat(el.css(prop)) || 0;\n}\n\n\n/* Mouse / Touch Utilities\n----------------------------------------------------------------------------------------------------------------------*/\n\nFC.preventDefault = preventDefault;\n\n\n// Returns a boolean whether this was a left mouse click and no ctrl key (which means right click on Mac)\nfunction isPrimaryMouseButton(ev) {\n\treturn ev.which == 1 && !ev.ctrlKey;\n}\n\n\nfunction getEvX(ev) {\n\tif (ev.pageX !== undefined) {\n\t\treturn ev.pageX;\n\t}\n\tvar touches = ev.originalEvent.touches;\n\tif (touches) {\n\t\treturn touches[0].pageX;\n\t}\n}\n\n\nfunction getEvY(ev) {\n\tif (ev.pageY !== undefined) {\n\t\treturn ev.pageY;\n\t}\n\tvar touches = ev.originalEvent.touches;\n\tif (touches) {\n\t\treturn touches[0].pageY;\n\t}\n}\n\n\nfunction getEvIsTouch(ev) {\n\treturn /^touch/.test(ev.type);\n}\n\n\nfunction preventSelection(el) {\n\tel.addClass('fc-unselectable')\n\t\t.on('selectstart', preventDefault);\n}\n\n\n// Stops a mouse/touch event from doing it's native browser action\nfunction preventDefault(ev) {\n\tev.preventDefault();\n}\n\n\n// attach a handler to get called when ANY scroll action happens on the page.\n// this was impossible to do with normal on/off because 'scroll' doesn't bubble.\n// http://stackoverflow.com/a/32954565/96342\n// returns `true` on success.\nfunction bindAnyScroll(handler) {\n\tif (window.addEventListener) {\n\t\twindow.addEventListener('scroll', handler, true); // useCapture=true\n\t\treturn true;\n\t}\n\treturn false;\n}\n\n\n// undoes bindAnyScroll. must pass in the original function.\n// returns `true` on success.\nfunction unbindAnyScroll(handler) {\n\tif (window.removeEventListener) {\n\t\twindow.removeEventListener('scroll', handler, true); // useCapture=true\n\t\treturn true;\n\t}\n\treturn false;\n}\n\n\n/* General Geometry Utils\n----------------------------------------------------------------------------------------------------------------------*/\n\nFC.intersectRects = intersectRects;\n\n// Returns a new rectangle that is the intersection of the two rectangles. If they don't intersect, returns false\nfunction intersectRects(rect1, rect2) {\n\tvar res = {\n\t\tleft: Math.max(rect1.left, rect2.left),\n\t\tright: Math.min(rect1.right, rect2.right),\n\t\ttop: Math.max(rect1.top, rect2.top),\n\t\tbottom: Math.min(rect1.bottom, rect2.bottom)\n\t};\n\n\tif (res.left < res.right && res.top < res.bottom) {\n\t\treturn res;\n\t}\n\treturn false;\n}\n\n\n// Returns a new point that will have been moved to reside within the given rectangle\nfunction constrainPoint(point, rect) {\n\treturn {\n\t\tleft: Math.min(Math.max(point.left, rect.left), rect.right),\n\t\ttop: Math.min(Math.max(point.top, rect.top), rect.bottom)\n\t};\n}\n\n\n// Returns a point that is the center of the given rectangle\nfunction getRectCenter(rect) {\n\treturn {\n\t\tleft: (rect.left + rect.right) / 2,\n\t\ttop: (rect.top + rect.bottom) / 2\n\t};\n}\n\n\n// Subtracts point2's coordinates from point1's coordinates, returning a delta\nfunction diffPoints(point1, point2) {\n\treturn {\n\t\tleft: point1.left - point2.left,\n\t\ttop: point1.top - point2.top\n\t};\n}\n\n\n/* Object Ordering by Field\n----------------------------------------------------------------------------------------------------------------------*/\n\nFC.parseFieldSpecs = parseFieldSpecs;\nFC.compareByFieldSpecs = compareByFieldSpecs;\nFC.compareByFieldSpec = compareByFieldSpec;\nFC.flexibleCompare = flexibleCompare;\n\n\nfunction parseFieldSpecs(input) {\n\tvar specs = [];\n\tvar tokens = [];\n\tvar i, token;\n\n\tif (typeof input === 'string') {\n\t\ttokens = input.split(/\\s*,\\s*/);\n\t}\n\telse if (typeof input === 'function') {\n\t\ttokens = [ input ];\n\t}\n\telse if ($.isArray(input)) {\n\t\ttokens = input;\n\t}\n\n\tfor (i = 0; i < tokens.length; i++) {\n\t\ttoken = tokens[i];\n\n\t\tif (typeof token === 'string') {\n\t\t\tspecs.push(\n\t\t\t\ttoken.charAt(0) == '-' ?\n\t\t\t\t\t{ field: token.substring(1), order: -1 } :\n\t\t\t\t\t{ field: token, order: 1 }\n\t\t\t);\n\t\t}\n\t\telse if (typeof token === 'function') {\n\t\t\tspecs.push({ func: token });\n\t\t}\n\t}\n\n\treturn specs;\n}\n\n\nfunction compareByFieldSpecs(obj1, obj2, fieldSpecs) {\n\tvar i;\n\tvar cmp;\n\n\tfor (i = 0; i < fieldSpecs.length; i++) {\n\t\tcmp = compareByFieldSpec(obj1, obj2, fieldSpecs[i]);\n\t\tif (cmp) {\n\t\t\treturn cmp;\n\t\t}\n\t}\n\n\treturn 0;\n}\n\n\nfunction compareByFieldSpec(obj1, obj2, fieldSpec) {\n\tif (fieldSpec.func) {\n\t\treturn fieldSpec.func(obj1, obj2);\n\t}\n\treturn flexibleCompare(obj1[fieldSpec.field], obj2[fieldSpec.field]) *\n\t\t(fieldSpec.order || 1);\n}\n\n\nfunction flexibleCompare(a, b) {\n\tif (!a && !b) {\n\t\treturn 0;\n\t}\n\tif (b == null) {\n\t\treturn -1;\n\t}\n\tif (a == null) {\n\t\treturn 1;\n\t}\n\tif ($.type(a) === 'string' || $.type(b) === 'string') {\n\t\treturn String(a).localeCompare(String(b));\n\t}\n\treturn a - b;\n}\n\n\n/* FullCalendar-specific Misc Utilities\n----------------------------------------------------------------------------------------------------------------------*/\n\n\n// Computes the intersection of the two ranges. Will return fresh date clones in a range.\n// Returns undefined if no intersection.\n// Expects all dates to be normalized to the same timezone beforehand.\n// TODO: move to date section?\nfunction intersectRanges(subjectRange, constraintRange) {\n\tvar subjectStart = subjectRange.start;\n\tvar subjectEnd = subjectRange.end;\n\tvar constraintStart = constraintRange.start;\n\tvar constraintEnd = constraintRange.end;\n\tvar segStart, segEnd;\n\tvar isStart, isEnd;\n\n\tif (subjectEnd > constraintStart && subjectStart < constraintEnd) { // in bounds at all?\n\n\t\tif (subjectStart >= constraintStart) {\n\t\t\tsegStart = subjectStart.clone();\n\t\t\tisStart = true;\n\t\t}\n\t\telse {\n\t\t\tsegStart = constraintStart.clone();\n\t\t\tisStart =  false;\n\t\t}\n\n\t\tif (subjectEnd <= constraintEnd) {\n\t\t\tsegEnd = subjectEnd.clone();\n\t\t\tisEnd = true;\n\t\t}\n\t\telse {\n\t\t\tsegEnd = constraintEnd.clone();\n\t\t\tisEnd = false;\n\t\t}\n\n\t\treturn {\n\t\t\tstart: segStart,\n\t\t\tend: segEnd,\n\t\t\tisStart: isStart,\n\t\t\tisEnd: isEnd\n\t\t};\n\t}\n}\n\n\n/* Date Utilities\n----------------------------------------------------------------------------------------------------------------------*/\n\nFC.computeIntervalUnit = computeIntervalUnit;\nFC.divideRangeByDuration = divideRangeByDuration;\nFC.divideDurationByDuration = divideDurationByDuration;\nFC.multiplyDuration = multiplyDuration;\nFC.durationHasTime = durationHasTime;\n\nvar dayIDs = [ 'sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat' ];\nvar intervalUnits = [ 'year', 'month', 'week', 'day', 'hour', 'minute', 'second', 'millisecond' ];\n\n\n// Diffs the two moments into a Duration where full-days are recorded first, then the remaining time.\n// Moments will have their timezones normalized.\nfunction diffDayTime(a, b) {\n\treturn moment.duration({\n\t\tdays: a.clone().stripTime().diff(b.clone().stripTime(), 'days'),\n\t\tms: a.time() - b.time() // time-of-day from day start. disregards timezone\n\t});\n}\n\n\n// Diffs the two moments via their start-of-day (regardless of timezone). Produces whole-day durations.\nfunction diffDay(a, b) {\n\treturn moment.duration({\n\t\tdays: a.clone().stripTime().diff(b.clone().stripTime(), 'days')\n\t});\n}\n\n\n// Diffs two moments, producing a duration, made of a whole-unit-increment of the given unit. Uses rounding.\nfunction diffByUnit(a, b, unit) {\n\treturn moment.duration(\n\t\tMath.round(a.diff(b, unit, true)), // returnFloat=true\n\t\tunit\n\t);\n}\n\n\n// Computes the unit name of the largest whole-unit period of time.\n// For example, 48 hours will be \"days\" whereas 49 hours will be \"hours\".\n// Accepts start/end, a range object, or an original duration object.\nfunction computeIntervalUnit(start, end) {\n\tvar i, unit;\n\tvar val;\n\n\tfor (i = 0; i < intervalUnits.length; i++) {\n\t\tunit = intervalUnits[i];\n\t\tval = computeRangeAs(unit, start, end);\n\n\t\tif (val >= 1 && isInt(val)) {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn unit; // will be \"milliseconds\" if nothing else matches\n}\n\n\n// Computes the number of units (like \"hours\") in the given range.\n// Range can be a {start,end} object, separate start/end args, or a Duration.\n// Results are based on Moment's .as() and .diff() methods, so results can depend on internal handling\n// of month-diffing logic (which tends to vary from version to version).\nfunction computeRangeAs(unit, start, end) {\n\n\tif (end != null) { // given start, end\n\t\treturn end.diff(start, unit, true);\n\t}\n\telse if (moment.isDuration(start)) { // given duration\n\t\treturn start.as(unit);\n\t}\n\telse { // given { start, end } range object\n\t\treturn start.end.diff(start.start, unit, true);\n\t}\n}\n\n\n// Intelligently divides a range (specified by a start/end params) by a duration\nfunction divideRangeByDuration(start, end, dur) {\n\tvar months;\n\n\tif (durationHasTime(dur)) {\n\t\treturn (end - start) / dur;\n\t}\n\tmonths = dur.asMonths();\n\tif (Math.abs(months) >= 1 && isInt(months)) {\n\t\treturn end.diff(start, 'months', true) / months;\n\t}\n\treturn end.diff(start, 'days', true) / dur.asDays();\n}\n\n\n// Intelligently divides one duration by another\nfunction divideDurationByDuration(dur1, dur2) {\n\tvar months1, months2;\n\n\tif (durationHasTime(dur1) || durationHasTime(dur2)) {\n\t\treturn dur1 / dur2;\n\t}\n\tmonths1 = dur1.asMonths();\n\tmonths2 = dur2.asMonths();\n\tif (\n\t\tMath.abs(months1) >= 1 && isInt(months1) &&\n\t\tMath.abs(months2) >= 1 && isInt(months2)\n\t) {\n\t\treturn months1 / months2;\n\t}\n\treturn dur1.asDays() / dur2.asDays();\n}\n\n\n// Intelligently multiplies a duration by a number\nfunction multiplyDuration(dur, n) {\n\tvar months;\n\n\tif (durationHasTime(dur)) {\n\t\treturn moment.duration(dur * n);\n\t}\n\tmonths = dur.asMonths();\n\tif (Math.abs(months) >= 1 && isInt(months)) {\n\t\treturn moment.duration({ months: months * n });\n\t}\n\treturn moment.duration({ days: dur.asDays() * n });\n}\n\n\n// Returns a boolean about whether the given duration has any time parts (hours/minutes/seconds/ms)\nfunction durationHasTime(dur) {\n\treturn Boolean(dur.hours() || dur.minutes() || dur.seconds() || dur.milliseconds());\n}\n\n\nfunction isNativeDate(input) {\n\treturn  Object.prototype.toString.call(input) === '[object Date]' || input instanceof Date;\n}\n\n\n// Returns a boolean about whether the given input is a time string, like \"06:40:00\" or \"06:00\"\nfunction isTimeString(str) {\n\treturn /^\\d+\\:\\d+(?:\\:\\d+\\.?(?:\\d{3})?)?$/.test(str);\n}\n\n\n/* Logging and Debug\n----------------------------------------------------------------------------------------------------------------------*/\n\nFC.log = function() {\n\tvar console = window.console;\n\n\tif (console && console.log) {\n\t\treturn console.log.apply(console, arguments);\n\t}\n};\n\nFC.warn = function() {\n\tvar console = window.console;\n\n\tif (console && console.warn) {\n\t\treturn console.warn.apply(console, arguments);\n\t}\n\telse {\n\t\treturn FC.log.apply(FC, arguments);\n\t}\n};\n\n\n/* General Utilities\n----------------------------------------------------------------------------------------------------------------------*/\n\nvar hasOwnPropMethod = {}.hasOwnProperty;\n\n\n// Merges an array of objects into a single object.\n// The second argument allows for an array of property names who's object values will be merged together.\nfunction mergeProps(propObjs, complexProps) {\n\tvar dest = {};\n\tvar i, name;\n\tvar complexObjs;\n\tvar j, val;\n\tvar props;\n\n\tif (complexProps) {\n\t\tfor (i = 0; i < complexProps.length; i++) {\n\t\t\tname = complexProps[i];\n\t\t\tcomplexObjs = [];\n\n\t\t\t// collect the trailing object values, stopping when a non-object is discovered\n\t\t\tfor (j = propObjs.length - 1; j >= 0; j--) {\n\t\t\t\tval = propObjs[j][name];\n\n\t\t\t\tif (typeof val === 'object') {\n\t\t\t\t\tcomplexObjs.unshift(val);\n\t\t\t\t}\n\t\t\t\telse if (val !== undefined) {\n\t\t\t\t\tdest[name] = val; // if there were no objects, this value will be used\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// if the trailing values were objects, use the merged value\n\t\t\tif (complexObjs.length) {\n\t\t\t\tdest[name] = mergeProps(complexObjs);\n\t\t\t}\n\t\t}\n\t}\n\n\t// copy values into the destination, going from last to first\n\tfor (i = propObjs.length - 1; i >= 0; i--) {\n\t\tprops = propObjs[i];\n\n\t\tfor (name in props) {\n\t\t\tif (!(name in dest)) { // if already assigned by previous props or complex props, don't reassign\n\t\t\t\tdest[name] = props[name];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dest;\n}\n\n\n// Create an object that has the given prototype. Just like Object.create\nfunction createObject(proto) {\n\tvar f = function() {};\n\tf.prototype = proto;\n\treturn new f();\n}\nFC.createObject = createObject;\n\n\nfunction copyOwnProps(src, dest) {\n\tfor (var name in src) {\n\t\tif (hasOwnProp(src, name)) {\n\t\t\tdest[name] = src[name];\n\t\t}\n\t}\n}\n\n\nfunction hasOwnProp(obj, name) {\n\treturn hasOwnPropMethod.call(obj, name);\n}\n\n\n// Is the given value a non-object non-function value?\nfunction isAtomic(val) {\n\treturn /undefined|null|boolean|number|string/.test($.type(val));\n}\n\n\nfunction applyAll(functions, thisObj, args) {\n\tif ($.isFunction(functions)) {\n\t\tfunctions = [ functions ];\n\t}\n\tif (functions) {\n\t\tvar i;\n\t\tvar ret;\n\t\tfor (i=0; i<functions.length; i++) {\n\t\t\tret = functions[i].apply(thisObj, args) || ret;\n\t\t}\n\t\treturn ret;\n\t}\n}\n\n\nfunction firstDefined() {\n\tfor (var i=0; i<arguments.length; i++) {\n\t\tif (arguments[i] !== undefined) {\n\t\t\treturn arguments[i];\n\t\t}\n\t}\n}\n\n\nfunction htmlEscape(s) {\n\treturn (s + '').replace(/&/g, '&amp;')\n\t\t.replace(/</g, '&lt;')\n\t\t.replace(/>/g, '&gt;')\n\t\t.replace(/'/g, '&#039;')\n\t\t.replace(/\"/g, '&quot;')\n\t\t.replace(/\\n/g, '<br />');\n}\n\n\nfunction stripHtmlEntities(text) {\n\treturn text.replace(/&.*?;/g, '');\n}\n\n\n// Given a hash of CSS properties, returns a string of CSS.\n// Uses property names as-is (no camel-case conversion). Will not make statements for null/undefined values.\nfunction cssToStr(cssProps) {\n\tvar statements = [];\n\n\t$.each(cssProps, function(name, val) {\n\t\tif (val != null) {\n\t\t\tstatements.push(name + ':' + val);\n\t\t}\n\t});\n\n\treturn statements.join(';');\n}\n\n\n// Given an object hash of HTML attribute names to values,\n// generates a string that can be injected between < > in HTML\nfunction attrsToStr(attrs) {\n\tvar parts = [];\n\n\t$.each(attrs, function(name, val) {\n\t\tif (val != null) {\n\t\t\tparts.push(name + '=\"' + htmlEscape(val) + '\"');\n\t\t}\n\t});\n\n\treturn parts.join(' ');\n}\n\n\nfunction capitaliseFirstLetter(str) {\n\treturn str.charAt(0).toUpperCase() + str.slice(1);\n}\n\n\nfunction compareNumbers(a, b) { // for .sort()\n\treturn a - b;\n}\n\n\nfunction isInt(n) {\n\treturn n % 1 === 0;\n}\n\n\n// Returns a method bound to the given object context.\n// Just like one of the jQuery.proxy signatures, but without the undesired behavior of treating the same method with\n// different contexts as identical when binding/unbinding events.\nfunction proxy(obj, methodName) {\n\tvar method = obj[methodName];\n\n\treturn function() {\n\t\treturn method.apply(obj, arguments);\n\t};\n}\n\n\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\n// https://github.com/jashkenas/underscore/blob/1.6.0/underscore.js#L714\nfunction debounce(func, wait, immediate) {\n\tvar timeout, args, context, timestamp, result;\n\n\tvar later = function() {\n\t\tvar last = +new Date() - timestamp;\n\t\tif (last < wait) {\n\t\t\ttimeout = setTimeout(later, wait - last);\n\t\t}\n\t\telse {\n\t\t\ttimeout = null;\n\t\t\tif (!immediate) {\n\t\t\t\tresult = func.apply(context, args);\n\t\t\t\tcontext = args = null;\n\t\t\t}\n\t\t}\n\t};\n\n\treturn function() {\n\t\tcontext = this;\n\t\targs = arguments;\n\t\ttimestamp = +new Date();\n\t\tvar callNow = immediate && !timeout;\n\t\tif (!timeout) {\n\t\t\ttimeout = setTimeout(later, wait);\n\t\t}\n\t\tif (callNow) {\n\t\t\tresult = func.apply(context, args);\n\t\t\tcontext = args = null;\n\t\t}\n\t\treturn result;\n\t};\n}\n\n;;\n\n/*\nGENERAL NOTE on moments throughout the *entire rest* of the codebase:\nAll moments are assumed to be ambiguously-zoned unless otherwise noted,\nwith the NOTABLE EXCEOPTION of start/end dates that live on *Event Objects*.\nAmbiguously-TIMED moments are assumed to be ambiguously-zoned by nature.\n*/\n\nvar ambigDateOfMonthRegex = /^\\s*\\d{4}-\\d\\d$/;\nvar ambigTimeOrZoneRegex =\n\t/^\\s*\\d{4}-(?:(\\d\\d-\\d\\d)|(W\\d\\d$)|(W\\d\\d-\\d)|(\\d\\d\\d))((T| )(\\d\\d(:\\d\\d(:\\d\\d(\\.\\d+)?)?)?)?)?$/;\nvar newMomentProto = moment.fn; // where we will attach our new methods\nvar oldMomentProto = $.extend({}, newMomentProto); // copy of original moment methods\n\n// tell momentjs to transfer these properties upon clone\nvar momentProperties = moment.momentProperties;\nmomentProperties.push('_fullCalendar');\nmomentProperties.push('_ambigTime');\nmomentProperties.push('_ambigZone');\n\n\n// Creating\n// -------------------------------------------------------------------------------------------------\n\n// Creates a new moment, similar to the vanilla moment(...) constructor, but with\n// extra features (ambiguous time, enhanced formatting). When given an existing moment,\n// it will function as a clone (and retain the zone of the moment). Anything else will\n// result in a moment in the local zone.\nFC.moment = function() {\n\treturn makeMoment(arguments);\n};\n\n// Sames as FC.moment, but forces the resulting moment to be in the UTC timezone.\nFC.moment.utc = function() {\n\tvar mom = makeMoment(arguments, true);\n\n\t// Force it into UTC because makeMoment doesn't guarantee it\n\t// (if given a pre-existing moment for example)\n\tif (mom.hasTime()) { // don't give ambiguously-timed moments a UTC zone\n\t\tmom.utc();\n\t}\n\n\treturn mom;\n};\n\n// Same as FC.moment, but when given an ISO8601 string, the timezone offset is preserved.\n// ISO8601 strings with no timezone offset will become ambiguously zoned.\nFC.moment.parseZone = function() {\n\treturn makeMoment(arguments, true, true);\n};\n\n// Builds an enhanced moment from args. When given an existing moment, it clones. When given a\n// native Date, or called with no arguments (the current time), the resulting moment will be local.\n// Anything else needs to be \"parsed\" (a string or an array), and will be affected by:\n//    parseAsUTC - if there is no zone information, should we parse the input in UTC?\n//    parseZone - if there is zone information, should we force the zone of the moment?\nfunction makeMoment(args, parseAsUTC, parseZone) {\n\tvar input = args[0];\n\tvar isSingleString = args.length == 1 && typeof input === 'string';\n\tvar isAmbigTime;\n\tvar isAmbigZone;\n\tvar ambigMatch;\n\tvar mom;\n\n\tif (moment.isMoment(input) || isNativeDate(input) || input === undefined) {\n\t\tmom = moment.apply(null, args);\n\t}\n\telse { // \"parsing\" is required\n\t\tisAmbigTime = false;\n\t\tisAmbigZone = false;\n\n\t\tif (isSingleString) {\n\t\t\tif (ambigDateOfMonthRegex.test(input)) {\n\t\t\t\t// accept strings like '2014-05', but convert to the first of the month\n\t\t\t\tinput += '-01';\n\t\t\t\targs = [ input ]; // for when we pass it on to moment's constructor\n\t\t\t\tisAmbigTime = true;\n\t\t\t\tisAmbigZone = true;\n\t\t\t}\n\t\t\telse if ((ambigMatch = ambigTimeOrZoneRegex.exec(input))) {\n\t\t\t\tisAmbigTime = !ambigMatch[5]; // no time part?\n\t\t\t\tisAmbigZone = true;\n\t\t\t}\n\t\t}\n\t\telse if ($.isArray(input)) {\n\t\t\t// arrays have no timezone information, so assume ambiguous zone\n\t\t\tisAmbigZone = true;\n\t\t}\n\t\t// otherwise, probably a string with a format\n\n\t\tif (parseAsUTC || isAmbigTime) {\n\t\t\tmom = moment.utc.apply(moment, args);\n\t\t}\n\t\telse {\n\t\t\tmom = moment.apply(null, args);\n\t\t}\n\n\t\tif (isAmbigTime) {\n\t\t\tmom._ambigTime = true;\n\t\t\tmom._ambigZone = true; // ambiguous time always means ambiguous zone\n\t\t}\n\t\telse if (parseZone) { // let's record the inputted zone somehow\n\t\t\tif (isAmbigZone) {\n\t\t\t\tmom._ambigZone = true;\n\t\t\t}\n\t\t\telse if (isSingleString) {\n\t\t\t\tmom.utcOffset(input); // if not a valid zone, will assign UTC\n\t\t\t}\n\t\t}\n\t}\n\n\tmom._fullCalendar = true; // flag for extended functionality\n\n\treturn mom;\n}\n\n\n// Week Number\n// -------------------------------------------------------------------------------------------------\n\n\n// Returns the week number, considering the locale's custom week number calcuation\n// `weeks` is an alias for `week`\nnewMomentProto.week = newMomentProto.weeks = function(input) {\n\tvar weekCalc = this._locale._fullCalendar_weekCalc;\n\n\tif (input == null && typeof weekCalc === 'function') { // custom function only works for getter\n\t\treturn weekCalc(this);\n\t}\n\telse if (weekCalc === 'ISO') {\n\t\treturn oldMomentProto.isoWeek.apply(this, arguments); // ISO getter/setter\n\t}\n\n\treturn oldMomentProto.week.apply(this, arguments); // local getter/setter\n};\n\n\n// Time-of-day\n// -------------------------------------------------------------------------------------------------\n\n// GETTER\n// Returns a Duration with the hours/minutes/seconds/ms values of the moment.\n// If the moment has an ambiguous time, a duration of 00:00 will be returned.\n//\n// SETTER\n// You can supply a Duration, a Moment, or a Duration-like argument.\n// When setting the time, and the moment has an ambiguous time, it then becomes unambiguous.\nnewMomentProto.time = function(time) {\n\n\t// Fallback to the original method (if there is one) if this moment wasn't created via FullCalendar.\n\t// `time` is a generic enough method name where this precaution is necessary to avoid collisions w/ other plugins.\n\tif (!this._fullCalendar) {\n\t\treturn oldMomentProto.time.apply(this, arguments);\n\t}\n\n\tif (time == null) { // getter\n\t\treturn moment.duration({\n\t\t\thours: this.hours(),\n\t\t\tminutes: this.minutes(),\n\t\t\tseconds: this.seconds(),\n\t\t\tmilliseconds: this.milliseconds()\n\t\t});\n\t}\n\telse { // setter\n\n\t\tthis._ambigTime = false; // mark that the moment now has a time\n\n\t\tif (!moment.isDuration(time) && !moment.isMoment(time)) {\n\t\t\ttime = moment.duration(time);\n\t\t}\n\n\t\t// The day value should cause overflow (so 24 hours becomes 00:00:00 of next day).\n\t\t// Only for Duration times, not Moment times.\n\t\tvar dayHours = 0;\n\t\tif (moment.isDuration(time)) {\n\t\t\tdayHours = Math.floor(time.asDays()) * 24;\n\t\t}\n\n\t\t// We need to set the individual fields.\n\t\t// Can't use startOf('day') then add duration. In case of DST at start of day.\n\t\treturn this.hours(dayHours + time.hours())\n\t\t\t.minutes(time.minutes())\n\t\t\t.seconds(time.seconds())\n\t\t\t.milliseconds(time.milliseconds());\n\t}\n};\n\n// Converts the moment to UTC, stripping out its time-of-day and timezone offset,\n// but preserving its YMD. A moment with a stripped time will display no time\n// nor timezone offset when .format() is called.\nnewMomentProto.stripTime = function() {\n\n\tif (!this._ambigTime) {\n\n\t\tthis.utc(true); // keepLocalTime=true (for keeping *date* value)\n\n\t\t// set time to zero\n\t\tthis.set({\n\t\t\thours: 0,\n\t\t\tminutes: 0,\n\t\t\tseconds: 0,\n\t\t\tms: 0\n\t\t});\n\n\t\t// Mark the time as ambiguous. This needs to happen after the .utc() call, which might call .utcOffset(),\n\t\t// which clears all ambig flags.\n\t\tthis._ambigTime = true;\n\t\tthis._ambigZone = true; // if ambiguous time, also ambiguous timezone offset\n\t}\n\n\treturn this; // for chaining\n};\n\n// Returns if the moment has a non-ambiguous time (boolean)\nnewMomentProto.hasTime = function() {\n\treturn !this._ambigTime;\n};\n\n\n// Timezone\n// -------------------------------------------------------------------------------------------------\n\n// Converts the moment to UTC, stripping out its timezone offset, but preserving its\n// YMD and time-of-day. A moment with a stripped timezone offset will display no\n// timezone offset when .format() is called.\nnewMomentProto.stripZone = function() {\n\tvar wasAmbigTime;\n\n\tif (!this._ambigZone) {\n\n\t\twasAmbigTime = this._ambigTime;\n\n\t\tthis.utc(true); // keepLocalTime=true (for keeping date and time values)\n\n\t\t// the above call to .utc()/.utcOffset() unfortunately might clear the ambig flags, so restore\n\t\tthis._ambigTime = wasAmbigTime || false;\n\n\t\t// Mark the zone as ambiguous. This needs to happen after the .utc() call, which might call .utcOffset(),\n\t\t// which clears the ambig flags.\n\t\tthis._ambigZone = true;\n\t}\n\n\treturn this; // for chaining\n};\n\n// Returns of the moment has a non-ambiguous timezone offset (boolean)\nnewMomentProto.hasZone = function() {\n\treturn !this._ambigZone;\n};\n\n\n// implicitly marks a zone\nnewMomentProto.local = function(keepLocalTime) {\n\n\t// for when converting from ambiguously-zoned to local,\n\t// keep the time values when converting from UTC -> local\n\toldMomentProto.local.call(this, this._ambigZone || keepLocalTime);\n\n\t// ensure non-ambiguous\n\t// this probably already happened via local() -> utcOffset(), but don't rely on Moment's internals\n\tthis._ambigTime = false;\n\tthis._ambigZone = false;\n\n\treturn this; // for chaining\n};\n\n\n// implicitly marks a zone\nnewMomentProto.utc = function(keepLocalTime) {\n\n\toldMomentProto.utc.call(this, keepLocalTime);\n\n\t// ensure non-ambiguous\n\t// this probably already happened via utc() -> utcOffset(), but don't rely on Moment's internals\n\tthis._ambigTime = false;\n\tthis._ambigZone = false;\n\n\treturn this;\n};\n\n\n// implicitly marks a zone (will probably get called upon .utc() and .local())\nnewMomentProto.utcOffset = function(tzo) {\n\n\tif (tzo != null) { // setter\n\t\t// these assignments needs to happen before the original zone method is called.\n\t\t// I forget why, something to do with a browser crash.\n\t\tthis._ambigTime = false;\n\t\tthis._ambigZone = false;\n\t}\n\n\treturn oldMomentProto.utcOffset.apply(this, arguments);\n};\n\n\n// Formatting\n// -------------------------------------------------------------------------------------------------\n\nnewMomentProto.format = function() {\n\tif (this._fullCalendar && arguments[0]) { // an enhanced moment? and a format string provided?\n\t\treturn formatDate(this, arguments[0]); // our extended formatting\n\t}\n\tif (this._ambigTime) {\n\t\treturn oldMomentFormat(this, 'YYYY-MM-DD');\n\t}\n\tif (this._ambigZone) {\n\t\treturn oldMomentFormat(this, 'YYYY-MM-DD[T]HH:mm:ss');\n\t}\n\treturn oldMomentProto.format.apply(this, arguments);\n};\n\nnewMomentProto.toISOString = function() {\n\tif (this._ambigTime) {\n\t\treturn oldMomentFormat(this, 'YYYY-MM-DD');\n\t}\n\tif (this._ambigZone) {\n\t\treturn oldMomentFormat(this, 'YYYY-MM-DD[T]HH:mm:ss');\n\t}\n\treturn oldMomentProto.toISOString.apply(this, arguments);\n};\n\n;;\n\n// Single Date Formatting\n// -------------------------------------------------------------------------------------------------\n\n\n// call this if you want Moment's original format method to be used\nfunction oldMomentFormat(mom, formatStr) {\n\treturn oldMomentProto.format.call(mom, formatStr); // oldMomentProto defined in moment-ext.js\n}\n\n\n// Formats `date` with a Moment formatting string, but allow our non-zero areas and\n// additional token.\nfunction formatDate(date, formatStr) {\n\treturn formatDateWithChunks(date, getFormatStringChunks(formatStr));\n}\n\n\nfunction formatDateWithChunks(date, chunks) {\n\tvar s = '';\n\tvar i;\n\n\tfor (i=0; i<chunks.length; i++) {\n\t\ts += formatDateWithChunk(date, chunks[i]);\n\t}\n\n\treturn s;\n}\n\n\n// addition formatting tokens we want recognized\nvar tokenOverrides = {\n\tt: function(date) { // \"a\" or \"p\"\n\t\treturn oldMomentFormat(date, 'a').charAt(0);\n\t},\n\tT: function(date) { // \"A\" or \"P\"\n\t\treturn oldMomentFormat(date, 'A').charAt(0);\n\t}\n};\n\n\nfunction formatDateWithChunk(date, chunk) {\n\tvar token;\n\tvar maybeStr;\n\n\tif (typeof chunk === 'string') { // a literal string\n\t\treturn chunk;\n\t}\n\telse if ((token = chunk.token)) { // a token, like \"YYYY\"\n\t\tif (tokenOverrides[token]) {\n\t\t\treturn tokenOverrides[token](date); // use our custom token\n\t\t}\n\t\treturn oldMomentFormat(date, token);\n\t}\n\telse if (chunk.maybe) { // a grouping of other chunks that must be non-zero\n\t\tmaybeStr = formatDateWithChunks(date, chunk.maybe);\n\t\tif (maybeStr.match(/[1-9]/)) {\n\t\t\treturn maybeStr;\n\t\t}\n\t}\n\n\treturn '';\n}\n\n\n// Date Range Formatting\n// -------------------------------------------------------------------------------------------------\n// TODO: make it work with timezone offset\n\n// Using a formatting string meant for a single date, generate a range string, like\n// \"Sep 2 - 9 2013\", that intelligently inserts a separator where the dates differ.\n// If the dates are the same as far as the format string is concerned, just return a single\n// rendering of one date, without any separator.\nfunction formatRange(date1, date2, formatStr, separator, isRTL) {\n\tvar localeData;\n\n\tdate1 = FC.moment.parseZone(date1);\n\tdate2 = FC.moment.parseZone(date2);\n\n\tlocaleData = date1.localeData();\n\n\t// Expand localized format strings, like \"LL\" -> \"MMMM D YYYY\"\n\tformatStr = localeData.longDateFormat(formatStr) || formatStr;\n\t// BTW, this is not important for `formatDate` because it is impossible to put custom tokens\n\t// or non-zero areas in Moment's localized format strings.\n\n\tseparator = separator || ' - ';\n\n\treturn formatRangeWithChunks(\n\t\tdate1,\n\t\tdate2,\n\t\tgetFormatStringChunks(formatStr),\n\t\tseparator,\n\t\tisRTL\n\t);\n}\nFC.formatRange = formatRange; // expose\n\n\nfunction formatRangeWithChunks(date1, date2, chunks, separator, isRTL) {\n\tvar unzonedDate1 = date1.clone().stripZone(); // for formatSimilarChunk\n\tvar unzonedDate2 = date2.clone().stripZone(); // \"\n\tvar chunkStr; // the rendering of the chunk\n\tvar leftI;\n\tvar leftStr = '';\n\tvar rightI;\n\tvar rightStr = '';\n\tvar middleI;\n\tvar middleStr1 = '';\n\tvar middleStr2 = '';\n\tvar middleStr = '';\n\n\t// Start at the leftmost side of the formatting string and continue until you hit a token\n\t// that is not the same between dates.\n\tfor (leftI=0; leftI<chunks.length; leftI++) {\n\t\tchunkStr = formatSimilarChunk(date1, date2, unzonedDate1, unzonedDate2, chunks[leftI]);\n\t\tif (chunkStr === false) {\n\t\t\tbreak;\n\t\t}\n\t\tleftStr += chunkStr;\n\t}\n\n\t// Similarly, start at the rightmost side of the formatting string and move left\n\tfor (rightI=chunks.length-1; rightI>leftI; rightI--) {\n\t\tchunkStr = formatSimilarChunk(date1, date2, unzonedDate1, unzonedDate2,  chunks[rightI]);\n\t\tif (chunkStr === false) {\n\t\t\tbreak;\n\t\t}\n\t\trightStr = chunkStr + rightStr;\n\t}\n\n\t// The area in the middle is different for both of the dates.\n\t// Collect them distinctly so we can jam them together later.\n\tfor (middleI=leftI; middleI<=rightI; middleI++) {\n\t\tmiddleStr1 += formatDateWithChunk(date1, chunks[middleI]);\n\t\tmiddleStr2 += formatDateWithChunk(date2, chunks[middleI]);\n\t}\n\n\tif (middleStr1 || middleStr2) {\n\t\tif (isRTL) {\n\t\t\tmiddleStr = middleStr2 + separator + middleStr1;\n\t\t}\n\t\telse {\n\t\t\tmiddleStr = middleStr1 + separator + middleStr2;\n\t\t}\n\t}\n\n\treturn leftStr + middleStr + rightStr;\n}\n\n\nvar similarUnitMap = {\n\tY: 'year',\n\tM: 'month',\n\tD: 'day', // day of month\n\td: 'day', // day of week\n\t// prevents a separator between anything time-related...\n\tA: 'second', // AM/PM\n\ta: 'second', // am/pm\n\tT: 'second', // A/P\n\tt: 'second', // a/p\n\tH: 'second', // hour (24)\n\th: 'second', // hour (12)\n\tm: 'second', // minute\n\ts: 'second' // second\n};\n// TODO: week maybe?\n\n\n// Given a formatting chunk, and given that both dates are similar in the regard the\n// formatting chunk is concerned, format date1 against `chunk`. Otherwise, return `false`.\nfunction formatSimilarChunk(date1, date2, unzonedDate1, unzonedDate2, chunk) {\n\tvar token;\n\tvar unit;\n\n\tif (typeof chunk === 'string') { // a literal string\n\t\treturn chunk;\n\t}\n\telse if ((token = chunk.token)) {\n\t\tunit = similarUnitMap[token.charAt(0)];\n\n\t\t// are the dates the same for this unit of measurement?\n\t\t// use the unzoned dates for this calculation because unreliable when near DST (bug #2396)\n\t\tif (unit && unzonedDate1.isSame(unzonedDate2, unit)) {\n\t\t\treturn oldMomentFormat(date1, token); // would be the same if we used `date2`\n\t\t\t// BTW, don't support custom tokens\n\t\t}\n\t}\n\n\treturn false; // the chunk is NOT the same for the two dates\n\t// BTW, don't support splitting on non-zero areas\n}\n\n\n// Chunking Utils\n// -------------------------------------------------------------------------------------------------\n\n\nvar formatStringChunkCache = {};\n\n\nfunction getFormatStringChunks(formatStr) {\n\tif (formatStr in formatStringChunkCache) {\n\t\treturn formatStringChunkCache[formatStr];\n\t}\n\treturn (formatStringChunkCache[formatStr] = chunkFormatString(formatStr));\n}\n\n\n// Break the formatting string into an array of chunks\nfunction chunkFormatString(formatStr) {\n\tvar chunks = [];\n\tvar chunker = /\\[([^\\]]*)\\]|\\(([^\\)]*)\\)|(LTS|LT|(\\w)\\4*o?)|([^\\w\\[\\(]+)/g; // TODO: more descrimination\n\tvar match;\n\n\twhile ((match = chunker.exec(formatStr))) {\n\t\tif (match[1]) { // a literal string inside [ ... ]\n\t\t\tchunks.push(match[1]);\n\t\t}\n\t\telse if (match[2]) { // non-zero formatting inside ( ... )\n\t\t\tchunks.push({ maybe: chunkFormatString(match[2]) });\n\t\t}\n\t\telse if (match[3]) { // a formatting token\n\t\t\tchunks.push({ token: match[3] });\n\t\t}\n\t\telse if (match[5]) { // an unenclosed literal string\n\t\t\tchunks.push(match[5]);\n\t\t}\n\t}\n\n\treturn chunks;\n}\n\n\n// Misc Utils\n// -------------------------------------------------------------------------------------------------\n\n\n// granularity only goes up until day\n// TODO: unify with similarUnitMap\nvar tokenGranularities = {\n\tY: { value: 1, unit: 'year' },\n\tM: { value: 2, unit: 'month' },\n\tW: { value: 3, unit: 'week' },\n\tw: { value: 3, unit: 'week' },\n\tD: { value: 4, unit: 'day' }, // day of month\n\td: { value: 4, unit: 'day' } // day of week\n};\n\n// returns a unit string, either 'year', 'month', 'day', or null\n// for the most granular formatting token in the string.\nFC.queryMostGranularFormatUnit = function(formatStr) {\n\tvar chunks = getFormatStringChunks(formatStr);\n\tvar i, chunk;\n\tvar candidate;\n\tvar best;\n\n\tfor (i = 0; i < chunks.length; i++) {\n\t\tchunk = chunks[i];\n\t\tif (chunk.token) {\n\t\t\tcandidate = tokenGranularities[chunk.token.charAt(0)];\n\t\t\tif (candidate) {\n\t\t\t\tif (!best || candidate.value > best.value) {\n\t\t\t\t\tbest = candidate;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (best) {\n\t\treturn best.unit;\n\t}\n\n\treturn null;\n};\n\n;;\n\nFC.Class = Class; // export\n\n// Class that all other classes will inherit from\nfunction Class() { }\n\n\n// Called on a class to create a subclass.\n// Last argument contains instance methods. Any argument before the last are considered mixins.\nClass.extend = function() {\n\tvar len = arguments.length;\n\tvar i;\n\tvar members;\n\n\tfor (i = 0; i < len; i++) {\n\t\tmembers = arguments[i];\n\t\tif (i < len - 1) { // not the last argument?\n\t\t\tmixIntoClass(this, members);\n\t\t}\n\t}\n\n\treturn extendClass(this, members || {}); // members will be undefined if no arguments\n};\n\n\n// Adds new member variables/methods to the class's prototype.\n// Can be called with another class, or a plain object hash containing new members.\nClass.mixin = function(members) {\n\tmixIntoClass(this, members);\n};\n\n\nfunction extendClass(superClass, members) {\n\tvar subClass;\n\n\t// ensure a constructor for the subclass, forwarding all arguments to the super-constructor if it doesn't exist\n\tif (hasOwnProp(members, 'constructor')) {\n\t\tsubClass = members.constructor;\n\t}\n\tif (typeof subClass !== 'function') {\n\t\tsubClass = members.constructor = function() {\n\t\t\tsuperClass.apply(this, arguments);\n\t\t};\n\t}\n\n\t// build the base prototype for the subclass, which is an new object chained to the superclass's prototype\n\tsubClass.prototype = createObject(superClass.prototype);\n\n\t// copy each member variable/method onto the the subclass's prototype\n\tcopyOwnProps(members, subClass.prototype);\n\n\t// copy over all class variables/methods to the subclass, such as `extend` and `mixin`\n\tcopyOwnProps(superClass, subClass);\n\n\treturn subClass;\n}\n\n\nfunction mixIntoClass(theClass, members) {\n\tcopyOwnProps(members, theClass.prototype);\n}\n;;\n\n/*\nWrap jQuery's Deferred Promise object to be slightly more Promise/A+ compliant.\nWith the added non-standard feature of synchronously executing handlers on resolved promises,\nwhich doesn't always happen otherwise (esp with nested .then handlers!?),\nso, this makes things a lot easier, esp because jQuery 3 changed the synchronicity for Deferred objects.\n\nTODO: write tests and more comments\n*/\n\nfunction Promise(executor) {\n\tvar deferred = $.Deferred();\n\tvar promise = deferred.promise();\n\n\tif (typeof executor === 'function') {\n\t\texecutor(\n\t\t\tfunction(value) { // resolve\n\t\t\t\tif (Promise.immediate) {\n\t\t\t\t\tpromise._value = value;\n\t\t\t\t}\n\t\t\t\tdeferred.resolve(value);\n\t\t\t},\n\t\t\tfunction() { // reject\n\t\t\t\tdeferred.reject();\n\t\t\t}\n\t\t);\n\t}\n\n\tif (Promise.immediate) {\n\t\tvar origThen = promise.then;\n\n\t\tpromise.then = function(onFulfilled, onRejected) {\n\t\t\tvar state = promise.state();\n\n\t\t\tif (state === 'resolved') {\n\t\t\t\tif (typeof onFulfilled === 'function') {\n\t\t\t\t\treturn Promise.resolve(onFulfilled(promise._value));\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (state === 'rejected') {\n\t\t\t\tif (typeof onRejected === 'function') {\n\t\t\t\t\tonRejected();\n\t\t\t\t\treturn promise; // already rejected\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn origThen.call(promise, onFulfilled, onRejected);\n\t\t};\n\t}\n\n\treturn promise; // instanceof Promise will break :( TODO: make Promise a real class\n}\n\nFC.Promise = Promise;\n\nPromise.immediate = true;\n\n\nPromise.resolve = function(value) {\n\tif (value && typeof value.resolve === 'function') {\n\t\treturn value.promise();\n\t}\n\tif (value && typeof value.then === 'function') {\n\t\treturn value;\n\t}\n\telse {\n\t\tvar deferred = $.Deferred().resolve(value);\n\t\tvar promise = deferred.promise();\n\n\t\tif (Promise.immediate) {\n\t\t\tvar origThen = promise.then;\n\n\t\t\tpromise._value = value;\n\n\t\t\tpromise.then = function(onFulfilled, onRejected) {\n\t\t\t\tif (typeof onFulfilled === 'function') {\n\t\t\t\t\treturn Promise.resolve(onFulfilled(value));\n\t\t\t\t}\n\t\t\t\treturn origThen.call(promise, onFulfilled, onRejected);\n\t\t\t};\n\t\t}\n\n\t\treturn promise;\n\t}\n};\n\n\nPromise.reject = function() {\n\treturn $.Deferred().reject().promise();\n};\n\n\nPromise.all = function(inputs) {\n\tvar hasAllValues = false;\n\tvar values;\n\tvar i, input;\n\n\tif (Promise.immediate) {\n\t\thasAllValues = true;\n\t\tvalues = [];\n\n\t\tfor (i = 0; i < inputs.length; i++) {\n\t\t\tinput = inputs[i];\n\n\t\t\tif (input && typeof input.state === 'function' && input.state() === 'resolved' && ('_value' in input)) {\n\t\t\t\tvalues.push(input._value);\n\t\t\t}\n\t\t\telse if (input && typeof input.then === 'function') {\n\t\t\t\thasAllValues = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvalues.push(input);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (hasAllValues) {\n\t\treturn Promise.resolve(values);\n\t}\n\telse {\n\t\treturn $.when.apply($.when, inputs).then(function() {\n\t\t\treturn $.when($.makeArray(arguments));\n\t\t});\n\t}\n};\n\n;;\n\n// TODO: write tests and clean up code\n\nfunction TaskQueue(debounceWait) {\n\tvar q = []; // array of runFuncs\n\n\tfunction addTask(taskFunc) {\n\t\treturn new Promise(function(resolve) {\n\n\t\t\t// should run this function when it's taskFunc's turn to run.\n\t\t\t// responsible for popping itself off the queue.\n\t\t\tvar runFunc = function() {\n\t\t\t\tPromise.resolve(taskFunc()) // result might be async, coerce to promise\n\t\t\t\t\t.then(resolve) // resolve TaskQueue::push's promise, for the caller. will receive result of taskFunc.\n\t\t\t\t\t.then(function() {\n\t\t\t\t\t\tq.shift(); // pop itself off\n\n\t\t\t\t\t\t// run the next task, if any\n\t\t\t\t\t\tif (q.length) {\n\t\t\t\t\t\t\tq[0]();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t};\n\n\t\t\t// always put the task at the end of the queue, BEFORE running the task\n\t\t\tq.push(runFunc);\n\n\t\t\t// if it's the only task in the queue, run immediately\n\t\t\tif (q.length === 1) {\n\t\t\t\trunFunc();\n\t\t\t}\n\t\t});\n\t}\n\n\tthis.add = // potentially debounce, for the public method\n\t\ttypeof debounceWait === 'number' ?\n\t\t\tdebounce(addTask, debounceWait) :\n\t\t\taddTask; // if not a number (null/undefined/false), no debounce at all\n\n\tthis.addQuickly = addTask; // guaranteed no debounce\n}\n\nFC.TaskQueue = TaskQueue;\n\n/*\nq = new TaskQueue();\n\nfunction work(i) {\n\treturn q.push(function() {\n\t\ttrigger();\n\t\tconsole.log('work' + i);\n\t});\n}\n\nvar cnt = 0;\n\nfunction trigger() {\n\tif (cnt < 5) {\n\t\tcnt++;\n\t\twork(cnt);\n\t}\n}\n\nwork(9);\n*/\n\n;;\n\nvar EmitterMixin = FC.EmitterMixin = {\n\n\t// jQuery-ification via $(this) allows a non-DOM object to have\n\t// the same event handling capabilities (including namespaces).\n\n\n\ton: function(types, handler) {\n\t\t$(this).on(types, this._prepareIntercept(handler));\n\t\treturn this; // for chaining\n\t},\n\n\n\tone: function(types, handler) {\n\t\t$(this).one(types, this._prepareIntercept(handler));\n\t\treturn this; // for chaining\n\t},\n\n\n\t_prepareIntercept: function(handler) {\n\t\t// handlers are always called with an \"event\" object as their first param.\n\t\t// sneak the `this` context and arguments into the extra parameter object\n\t\t// and forward them on to the original handler.\n\t\tvar intercept = function(ev, extra) {\n\t\t\treturn handler.apply(\n\t\t\t\textra.context || this,\n\t\t\t\textra.args || []\n\t\t\t);\n\t\t};\n\n\t\t// mimick jQuery's internal \"proxy\" system (risky, I know)\n\t\t// causing all functions with the same .guid to appear to be the same.\n\t\t// https://github.com/jquery/jquery/blob/2.2.4/src/core.js#L448\n\t\t// this is needed for calling .off with the original non-intercept handler.\n\t\tif (!handler.guid) {\n\t\t\thandler.guid = $.guid++;\n\t\t}\n\t\tintercept.guid = handler.guid;\n\n\t\treturn intercept;\n\t},\n\n\n\toff: function(types, handler) {\n\t\t$(this).off(types, handler);\n\n\t\treturn this; // for chaining\n\t},\n\n\n\ttrigger: function(types) {\n\t\tvar args = Array.prototype.slice.call(arguments, 1); // arguments after the first\n\n\t\t// pass in \"extra\" info to the intercept\n\t\t$(this).triggerHandler(types, { args: args });\n\n\t\treturn this; // for chaining\n\t},\n\n\n\ttriggerWith: function(types, context, args) {\n\n\t\t// `triggerHandler` is less reliant on the DOM compared to `trigger`.\n\t\t// pass in \"extra\" info to the intercept.\n\t\t$(this).triggerHandler(types, { context: context, args: args });\n\n\t\treturn this; // for chaining\n\t}\n\n};\n\n;;\n\n/*\nUtility methods for easily listening to events on another object,\nand more importantly, easily unlistening from them.\n*/\nvar ListenerMixin = FC.ListenerMixin = (function() {\n\tvar guid = 0;\n\tvar ListenerMixin = {\n\n\t\tlistenerId: null,\n\n\t\t/*\n\t\tGiven an `other` object that has on/off methods, bind the given `callback` to an event by the given name.\n\t\tThe `callback` will be called with the `this` context of the object that .listenTo is being called on.\n\t\tCan be called:\n\t\t\t.listenTo(other, eventName, callback)\n\t\tOR\n\t\t\t.listenTo(other, {\n\t\t\t\teventName1: callback1,\n\t\t\t\teventName2: callback2\n\t\t\t})\n\t\t*/\n\t\tlistenTo: function(other, arg, callback) {\n\t\t\tif (typeof arg === 'object') { // given dictionary of callbacks\n\t\t\t\tfor (var eventName in arg) {\n\t\t\t\t\tif (arg.hasOwnProperty(eventName)) {\n\t\t\t\t\t\tthis.listenTo(other, eventName, arg[eventName]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (typeof arg === 'string') {\n\t\t\t\tother.on(\n\t\t\t\t\targ + '.' + this.getListenerNamespace(), // use event namespacing to identify this object\n\t\t\t\t\t$.proxy(callback, this) // always use `this` context\n\t\t\t\t\t\t// the usually-undesired jQuery guid behavior doesn't matter,\n\t\t\t\t\t\t// because we always unbind via namespace\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\n\t\t/*\n\t\tCauses the current object to stop listening to events on the `other` object.\n\t\t`eventName` is optional. If omitted, will stop listening to ALL events on `other`.\n\t\t*/\n\t\tstopListeningTo: function(other, eventName) {\n\t\t\tother.off((eventName || '') + '.' + this.getListenerNamespace());\n\t\t},\n\n\t\t/*\n\t\tReturns a string, unique to this object, to be used for event namespacing\n\t\t*/\n\t\tgetListenerNamespace: function() {\n\t\t\tif (this.listenerId == null) {\n\t\t\t\tthis.listenerId = guid++;\n\t\t\t}\n\t\t\treturn '_listener' + this.listenerId;\n\t\t}\n\n\t};\n\treturn ListenerMixin;\n})();\n;;\n\n// simple class for toggle a `isIgnoringMouse` flag on delay\n// initMouseIgnoring must first be called, with a millisecond delay setting.\nvar MouseIgnorerMixin = {\n\n\tisIgnoringMouse: false, // bool\n\tdelayUnignoreMouse: null, // method\n\n\n\tinitMouseIgnoring: function(delay) {\n\t\tthis.delayUnignoreMouse = debounce(proxy(this, 'unignoreMouse'), delay || 1000);\n\t},\n\n\n\t// temporarily ignore mouse actions on segments\n\ttempIgnoreMouse: function() {\n\t\tthis.isIgnoringMouse = true;\n\t\tthis.delayUnignoreMouse();\n\t},\n\n\n\t// delayUnignoreMouse eventually calls this\n\tunignoreMouse: function() {\n\t\tthis.isIgnoringMouse = false;\n\t}\n\n};\n\n;;\n\n/* A rectangular panel that is absolutely positioned over other content\n------------------------------------------------------------------------------------------------------------------------\nOptions:\n\t- className (string)\n\t- content (HTML string or jQuery element set)\n\t- parentEl\n\t- top\n\t- left\n\t- right (the x coord of where the right edge should be. not a \"CSS\" right)\n\t- autoHide (boolean)\n\t- show (callback)\n\t- hide (callback)\n*/\n\nvar Popover = Class.extend(ListenerMixin, {\n\n\tisHidden: true,\n\toptions: null,\n\tel: null, // the container element for the popover. generated by this object\n\tmargin: 10, // the space required between the popover and the edges of the scroll container\n\n\n\tconstructor: function(options) {\n\t\tthis.options = options || {};\n\t},\n\n\n\t// Shows the popover on the specified position. Renders it if not already\n\tshow: function() {\n\t\tif (this.isHidden) {\n\t\t\tif (!this.el) {\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t\tthis.el.show();\n\t\t\tthis.position();\n\t\t\tthis.isHidden = false;\n\t\t\tthis.trigger('show');\n\t\t}\n\t},\n\n\n\t// Hides the popover, through CSS, but does not remove it from the DOM\n\thide: function() {\n\t\tif (!this.isHidden) {\n\t\t\tthis.el.hide();\n\t\t\tthis.isHidden = true;\n\t\t\tthis.trigger('hide');\n\t\t}\n\t},\n\n\n\t// Creates `this.el` and renders content inside of it\n\trender: function() {\n\t\tvar _this = this;\n\t\tvar options = this.options;\n\n\t\tthis.el = $('<div class=\"fc-popover\"/>')\n\t\t\t.addClass(options.className || '')\n\t\t\t.css({\n\t\t\t\t// position initially to the top left to avoid creating scrollbars\n\t\t\t\ttop: 0,\n\t\t\t\tleft: 0\n\t\t\t})\n\t\t\t.append(options.content)\n\t\t\t.appendTo(options.parentEl);\n\n\t\t// when a click happens on anything inside with a 'fc-close' className, hide the popover\n\t\tthis.el.on('click', '.fc-close', function() {\n\t\t\t_this.hide();\n\t\t});\n\n\t\tif (options.autoHide) {\n\t\t\tthis.listenTo($(document), 'mousedown', this.documentMousedown);\n\t\t}\n\t},\n\n\n\t// Triggered when the user clicks *anywhere* in the document, for the autoHide feature\n\tdocumentMousedown: function(ev) {\n\t\t// only hide the popover if the click happened outside the popover\n\t\tif (this.el && !$(ev.target).closest(this.el).length) {\n\t\t\tthis.hide();\n\t\t}\n\t},\n\n\n\t// Hides and unregisters any handlers\n\tremoveElement: function() {\n\t\tthis.hide();\n\n\t\tif (this.el) {\n\t\t\tthis.el.remove();\n\t\t\tthis.el = null;\n\t\t}\n\n\t\tthis.stopListeningTo($(document), 'mousedown');\n\t},\n\n\n\t// Positions the popover optimally, using the top/left/right options\n\tposition: function() {\n\t\tvar options = this.options;\n\t\tvar origin = this.el.offsetParent().offset();\n\t\tvar width = this.el.outerWidth();\n\t\tvar height = this.el.outerHeight();\n\t\tvar windowEl = $(window);\n\t\tvar viewportEl = getScrollParent(this.el);\n\t\tvar viewportTop;\n\t\tvar viewportLeft;\n\t\tvar viewportOffset;\n\t\tvar top; // the \"position\" (not \"offset\") values for the popover\n\t\tvar left; //\n\n\t\t// compute top and left\n\t\ttop = options.top || 0;\n\t\tif (options.left !== undefined) {\n\t\t\tleft = options.left;\n\t\t}\n\t\telse if (options.right !== undefined) {\n\t\t\tleft = options.right - width; // derive the left value from the right value\n\t\t}\n\t\telse {\n\t\t\tleft = 0;\n\t\t}\n\n\t\tif (viewportEl.is(window) || viewportEl.is(document)) { // normalize getScrollParent's result\n\t\t\tviewportEl = windowEl;\n\t\t\tviewportTop = 0; // the window is always at the top left\n\t\t\tviewportLeft = 0; // (and .offset() won't work if called here)\n\t\t}\n\t\telse {\n\t\t\tviewportOffset = viewportEl.offset();\n\t\t\tviewportTop = viewportOffset.top;\n\t\t\tviewportLeft = viewportOffset.left;\n\t\t}\n\n\t\t// if the window is scrolled, it causes the visible area to be further down\n\t\tviewportTop += windowEl.scrollTop();\n\t\tviewportLeft += windowEl.scrollLeft();\n\n\t\t// constrain to the view port. if constrained by two edges, give precedence to top/left\n\t\tif (options.viewportConstrain !== false) {\n\t\t\ttop = Math.min(top, viewportTop + viewportEl.outerHeight() - height - this.margin);\n\t\t\ttop = Math.max(top, viewportTop + this.margin);\n\t\t\tleft = Math.min(left, viewportLeft + viewportEl.outerWidth() - width - this.margin);\n\t\t\tleft = Math.max(left, viewportLeft + this.margin);\n\t\t}\n\n\t\tthis.el.css({\n\t\t\ttop: top - origin.top,\n\t\t\tleft: left - origin.left\n\t\t});\n\t},\n\n\n\t// Triggers a callback. Calls a function in the option hash of the same name.\n\t// Arguments beyond the first `name` are forwarded on.\n\t// TODO: better code reuse for this. Repeat code\n\ttrigger: function(name) {\n\t\tif (this.options[name]) {\n\t\t\tthis.options[name].apply(this, Array.prototype.slice.call(arguments, 1));\n\t\t}\n\t}\n\n});\n\n;;\n\n/*\nA cache for the left/right/top/bottom/width/height values for one or more elements.\nWorks with both offset (from topleft document) and position (from offsetParent).\n\noptions:\n- els\n- isHorizontal\n- isVertical\n*/\nvar CoordCache = FC.CoordCache = Class.extend({\n\n\tels: null, // jQuery set (assumed to be siblings)\n\tforcedOffsetParentEl: null, // options can override the natural offsetParent\n\torigin: null, // {left,top} position of offsetParent of els\n\tboundingRect: null, // constrain cordinates to this rectangle. {left,right,top,bottom} or null\n\tisHorizontal: false, // whether to query for left/right/width\n\tisVertical: false, // whether to query for top/bottom/height\n\n\t// arrays of coordinates (offsets from topleft of document)\n\tlefts: null,\n\trights: null,\n\ttops: null,\n\tbottoms: null,\n\n\n\tconstructor: function(options) {\n\t\tthis.els = $(options.els);\n\t\tthis.isHorizontal = options.isHorizontal;\n\t\tthis.isVertical = options.isVertical;\n\t\tthis.forcedOffsetParentEl = options.offsetParent ? $(options.offsetParent) : null;\n\t},\n\n\n\t// Queries the els for coordinates and stores them.\n\t// Call this method before using and of the get* methods below.\n\tbuild: function() {\n\t\tvar offsetParentEl = this.forcedOffsetParentEl;\n\t\tif (!offsetParentEl && this.els.length > 0) {\n\t\t\toffsetParentEl = this.els.eq(0).offsetParent();\n\t\t}\n\n\t\tthis.origin = offsetParentEl ?\n\t\t\toffsetParentEl.offset() :\n\t\t\tnull;\n\n\t\tthis.boundingRect = this.queryBoundingRect();\n\n\t\tif (this.isHorizontal) {\n\t\t\tthis.buildElHorizontals();\n\t\t}\n\t\tif (this.isVertical) {\n\t\t\tthis.buildElVerticals();\n\t\t}\n\t},\n\n\n\t// Destroys all internal data about coordinates, freeing memory\n\tclear: function() {\n\t\tthis.origin = null;\n\t\tthis.boundingRect = null;\n\t\tthis.lefts = null;\n\t\tthis.rights = null;\n\t\tthis.tops = null;\n\t\tthis.bottoms = null;\n\t},\n\n\n\t// When called, if coord caches aren't built, builds them\n\tensureBuilt: function() {\n\t\tif (!this.origin) {\n\t\t\tthis.build();\n\t\t}\n\t},\n\n\n\t// Populates the left/right internal coordinate arrays\n\tbuildElHorizontals: function() {\n\t\tvar lefts = [];\n\t\tvar rights = [];\n\n\t\tthis.els.each(function(i, node) {\n\t\t\tvar el = $(node);\n\t\t\tvar left = el.offset().left;\n\t\t\tvar width = el.outerWidth();\n\n\t\t\tlefts.push(left);\n\t\t\trights.push(left + width);\n\t\t});\n\n\t\tthis.lefts = lefts;\n\t\tthis.rights = rights;\n\t},\n\n\n\t// Populates the top/bottom internal coordinate arrays\n\tbuildElVerticals: function() {\n\t\tvar tops = [];\n\t\tvar bottoms = [];\n\n\t\tthis.els.each(function(i, node) {\n\t\t\tvar el = $(node);\n\t\t\tvar top = el.offset().top;\n\t\t\tvar height = el.outerHeight();\n\n\t\t\ttops.push(top);\n\t\t\tbottoms.push(top + height);\n\t\t});\n\n\t\tthis.tops = tops;\n\t\tthis.bottoms = bottoms;\n\t},\n\n\n\t// Given a left offset (from document left), returns the index of the el that it horizontally intersects.\n\t// If no intersection is made, returns undefined.\n\tgetHorizontalIndex: function(leftOffset) {\n\t\tthis.ensureBuilt();\n\n\t\tvar lefts = this.lefts;\n\t\tvar rights = this.rights;\n\t\tvar len = lefts.length;\n\t\tvar i;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (leftOffset >= lefts[i] && leftOffset < rights[i]) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Given a top offset (from document top), returns the index of the el that it vertically intersects.\n\t// If no intersection is made, returns undefined.\n\tgetVerticalIndex: function(topOffset) {\n\t\tthis.ensureBuilt();\n\n\t\tvar tops = this.tops;\n\t\tvar bottoms = this.bottoms;\n\t\tvar len = tops.length;\n\t\tvar i;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (topOffset >= tops[i] && topOffset < bottoms[i]) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Gets the left offset (from document left) of the element at the given index\n\tgetLeftOffset: function(leftIndex) {\n\t\tthis.ensureBuilt();\n\t\treturn this.lefts[leftIndex];\n\t},\n\n\n\t// Gets the left position (from offsetParent left) of the element at the given index\n\tgetLeftPosition: function(leftIndex) {\n\t\tthis.ensureBuilt();\n\t\treturn this.lefts[leftIndex] - this.origin.left;\n\t},\n\n\n\t// Gets the right offset (from document left) of the element at the given index.\n\t// This value is NOT relative to the document's right edge, like the CSS concept of \"right\" would be.\n\tgetRightOffset: function(leftIndex) {\n\t\tthis.ensureBuilt();\n\t\treturn this.rights[leftIndex];\n\t},\n\n\n\t// Gets the right position (from offsetParent left) of the element at the given index.\n\t// This value is NOT relative to the offsetParent's right edge, like the CSS concept of \"right\" would be.\n\tgetRightPosition: function(leftIndex) {\n\t\tthis.ensureBuilt();\n\t\treturn this.rights[leftIndex] - this.origin.left;\n\t},\n\n\n\t// Gets the width of the element at the given index\n\tgetWidth: function(leftIndex) {\n\t\tthis.ensureBuilt();\n\t\treturn this.rights[leftIndex] - this.lefts[leftIndex];\n\t},\n\n\n\t// Gets the top offset (from document top) of the element at the given index\n\tgetTopOffset: function(topIndex) {\n\t\tthis.ensureBuilt();\n\t\treturn this.tops[topIndex];\n\t},\n\n\n\t// Gets the top position (from offsetParent top) of the element at the given position\n\tgetTopPosition: function(topIndex) {\n\t\tthis.ensureBuilt();\n\t\treturn this.tops[topIndex] - this.origin.top;\n\t},\n\n\t// Gets the bottom offset (from the document top) of the element at the given index.\n\t// This value is NOT relative to the offsetParent's bottom edge, like the CSS concept of \"bottom\" would be.\n\tgetBottomOffset: function(topIndex) {\n\t\tthis.ensureBuilt();\n\t\treturn this.bottoms[topIndex];\n\t},\n\n\n\t// Gets the bottom position (from the offsetParent top) of the element at the given index.\n\t// This value is NOT relative to the offsetParent's bottom edge, like the CSS concept of \"bottom\" would be.\n\tgetBottomPosition: function(topIndex) {\n\t\tthis.ensureBuilt();\n\t\treturn this.bottoms[topIndex] - this.origin.top;\n\t},\n\n\n\t// Gets the height of the element at the given index\n\tgetHeight: function(topIndex) {\n\t\tthis.ensureBuilt();\n\t\treturn this.bottoms[topIndex] - this.tops[topIndex];\n\t},\n\n\n\t// Bounding Rect\n\t// TODO: decouple this from CoordCache\n\n\t// Compute and return what the elements' bounding rectangle is, from the user's perspective.\n\t// Right now, only returns a rectangle if constrained by an overflow:scroll element.\n\t// Returns null if there are no elements\n\tqueryBoundingRect: function() {\n\t\tvar scrollParentEl;\n\n\t\tif (this.els.length > 0) {\n\t\t\tscrollParentEl = getScrollParent(this.els.eq(0));\n\n\t\t\tif (!scrollParentEl.is(document)) {\n\t\t\t\treturn getClientRect(scrollParentEl);\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\n\tisPointInBounds: function(leftOffset, topOffset) {\n\t\treturn this.isLeftInBounds(leftOffset) && this.isTopInBounds(topOffset);\n\t},\n\n\tisLeftInBounds: function(leftOffset) {\n\t\treturn !this.boundingRect || (leftOffset >= this.boundingRect.left && leftOffset < this.boundingRect.right);\n\t},\n\n\tisTopInBounds: function(topOffset) {\n\t\treturn !this.boundingRect || (topOffset >= this.boundingRect.top && topOffset < this.boundingRect.bottom);\n\t}\n\n});\n\n;;\n\n/* Tracks a drag's mouse movement, firing various handlers\n----------------------------------------------------------------------------------------------------------------------*/\n// TODO: use Emitter\n\nvar DragListener = FC.DragListener = Class.extend(ListenerMixin, MouseIgnorerMixin, {\n\n\toptions: null,\n\tsubjectEl: null,\n\n\t// coordinates of the initial mousedown\n\toriginX: null,\n\toriginY: null,\n\n\t// the wrapping element that scrolls, or MIGHT scroll if there's overflow.\n\t// TODO: do this for wrappers that have overflow:hidden as well.\n\tscrollEl: null,\n\n\tisInteracting: false,\n\tisDistanceSurpassed: false,\n\tisDelayEnded: false,\n\tisDragging: false,\n\tisTouch: false,\n\n\tdelay: null,\n\tdelayTimeoutId: null,\n\tminDistance: null,\n\n\thandleTouchScrollProxy: null, // calls handleTouchScroll, always bound to `this`\n\n\n\tconstructor: function(options) {\n\t\tthis.options = options || {};\n\t\tthis.handleTouchScrollProxy = proxy(this, 'handleTouchScroll');\n\t\tthis.initMouseIgnoring(500);\n\t},\n\n\n\t// Interaction (high-level)\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tstartInteraction: function(ev, extraOptions) {\n\t\tvar isTouch = getEvIsTouch(ev);\n\n\t\tif (ev.type === 'mousedown') {\n\t\t\tif (this.isIgnoringMouse) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse if (!isPrimaryMouseButton(ev)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tev.preventDefault(); // prevents native selection in most browsers\n\t\t\t}\n\t\t}\n\n\t\tif (!this.isInteracting) {\n\n\t\t\t// process options\n\t\t\textraOptions = extraOptions || {};\n\t\t\tthis.delay = firstDefined(extraOptions.delay, this.options.delay, 0);\n\t\t\tthis.minDistance = firstDefined(extraOptions.distance, this.options.distance, 0);\n\t\t\tthis.subjectEl = this.options.subjectEl;\n\n\t\t\tthis.isInteracting = true;\n\t\t\tthis.isTouch = isTouch;\n\t\t\tthis.isDelayEnded = false;\n\t\t\tthis.isDistanceSurpassed = false;\n\n\t\t\tthis.originX = getEvX(ev);\n\t\t\tthis.originY = getEvY(ev);\n\t\t\tthis.scrollEl = getScrollParent($(ev.target));\n\n\t\t\tthis.bindHandlers();\n\t\t\tthis.initAutoScroll();\n\t\t\tthis.handleInteractionStart(ev);\n\t\t\tthis.startDelay(ev);\n\n\t\t\tif (!this.minDistance) {\n\t\t\t\tthis.handleDistanceSurpassed(ev);\n\t\t\t}\n\t\t}\n\t},\n\n\n\thandleInteractionStart: function(ev) {\n\t\tthis.trigger('interactionStart', ev);\n\t},\n\n\n\tendInteraction: function(ev, isCancelled) {\n\t\tif (this.isInteracting) {\n\t\t\tthis.endDrag(ev);\n\n\t\t\tif (this.delayTimeoutId) {\n\t\t\t\tclearTimeout(this.delayTimeoutId);\n\t\t\t\tthis.delayTimeoutId = null;\n\t\t\t}\n\n\t\t\tthis.destroyAutoScroll();\n\t\t\tthis.unbindHandlers();\n\n\t\t\tthis.isInteracting = false;\n\t\t\tthis.handleInteractionEnd(ev, isCancelled);\n\n\t\t\t// a touchstart+touchend on the same element will result in the following addition simulated events:\n\t\t\t// mouseover + mouseout + click\n\t\t\t// let's ignore these bogus events\n\t\t\tif (this.isTouch) {\n\t\t\t\tthis.tempIgnoreMouse();\n\t\t\t}\n\t\t}\n\t},\n\n\n\thandleInteractionEnd: function(ev, isCancelled) {\n\t\tthis.trigger('interactionEnd', ev, isCancelled || false);\n\t},\n\n\n\t// Binding To DOM\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tbindHandlers: function() {\n\t\tvar _this = this;\n\t\tvar touchStartIgnores = 1;\n\n\t\tif (this.isTouch) {\n\t\t\tthis.listenTo($(document), {\n\t\t\t\ttouchmove: this.handleTouchMove,\n\t\t\t\ttouchend: this.endInteraction,\n\t\t\t\ttouchcancel: this.endInteraction,\n\n\t\t\t\t// Sometimes touchend doesn't fire\n\t\t\t\t// (can't figure out why. touchcancel doesn't fire either. has to do with scrolling?)\n\t\t\t\t// If another touchstart happens, we know it's bogus, so cancel the drag.\n\t\t\t\t// touchend will continue to be broken until user does a shorttap/scroll, but this is best we can do.\n\t\t\t\ttouchstart: function(ev) {\n\t\t\t\t\tif (touchStartIgnores) { // bindHandlers is called from within a touchstart,\n\t\t\t\t\t\ttouchStartIgnores--; // and we don't want this to fire immediately, so ignore.\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t_this.endInteraction(ev, true); // isCancelled=true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// listen to ALL scroll actions on the page\n\t\t\tif (\n\t\t\t\t!bindAnyScroll(this.handleTouchScrollProxy) && // hopefully this works and short-circuits the rest\n\t\t\t\tthis.scrollEl // otherwise, attach a single handler to this\n\t\t\t) {\n\t\t\t\tthis.listenTo(this.scrollEl, 'scroll', this.handleTouchScroll);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthis.listenTo($(document), {\n\t\t\t\tmousemove: this.handleMouseMove,\n\t\t\t\tmouseup: this.endInteraction\n\t\t\t});\n\t\t}\n\n\t\tthis.listenTo($(document), {\n\t\t\tselectstart: preventDefault, // don't allow selection while dragging\n\t\t\tcontextmenu: preventDefault // long taps would open menu on Chrome dev tools\n\t\t});\n\t},\n\n\n\tunbindHandlers: function() {\n\t\tthis.stopListeningTo($(document));\n\n\t\t// unbind scroll listening\n\t\tunbindAnyScroll(this.handleTouchScrollProxy);\n\t\tif (this.scrollEl) {\n\t\t\tthis.stopListeningTo(this.scrollEl, 'scroll');\n\t\t}\n\t},\n\n\n\t// Drag (high-level)\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\t// extraOptions ignored if drag already started\n\tstartDrag: function(ev, extraOptions) {\n\t\tthis.startInteraction(ev, extraOptions); // ensure interaction began\n\n\t\tif (!this.isDragging) {\n\t\t\tthis.isDragging = true;\n\t\t\tthis.handleDragStart(ev);\n\t\t}\n\t},\n\n\n\thandleDragStart: function(ev) {\n\t\tthis.trigger('dragStart', ev);\n\t},\n\n\n\thandleMove: function(ev) {\n\t\tvar dx = getEvX(ev) - this.originX;\n\t\tvar dy = getEvY(ev) - this.originY;\n\t\tvar minDistance = this.minDistance;\n\t\tvar distanceSq; // current distance from the origin, squared\n\n\t\tif (!this.isDistanceSurpassed) {\n\t\t\tdistanceSq = dx * dx + dy * dy;\n\t\t\tif (distanceSq >= minDistance * minDistance) { // use pythagorean theorem\n\t\t\t\tthis.handleDistanceSurpassed(ev);\n\t\t\t}\n\t\t}\n\n\t\tif (this.isDragging) {\n\t\t\tthis.handleDrag(dx, dy, ev);\n\t\t}\n\t},\n\n\n\t// Called while the mouse is being moved and when we know a legitimate drag is taking place\n\thandleDrag: function(dx, dy, ev) {\n\t\tthis.trigger('drag', dx, dy, ev);\n\t\tthis.updateAutoScroll(ev); // will possibly cause scrolling\n\t},\n\n\n\tendDrag: function(ev) {\n\t\tif (this.isDragging) {\n\t\t\tthis.isDragging = false;\n\t\t\tthis.handleDragEnd(ev);\n\t\t}\n\t},\n\n\n\thandleDragEnd: function(ev) {\n\t\tthis.trigger('dragEnd', ev);\n\t},\n\n\n\t// Delay\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tstartDelay: function(initialEv) {\n\t\tvar _this = this;\n\n\t\tif (this.delay) {\n\t\t\tthis.delayTimeoutId = setTimeout(function() {\n\t\t\t\t_this.handleDelayEnd(initialEv);\n\t\t\t}, this.delay);\n\t\t}\n\t\telse {\n\t\t\tthis.handleDelayEnd(initialEv);\n\t\t}\n\t},\n\n\n\thandleDelayEnd: function(initialEv) {\n\t\tthis.isDelayEnded = true;\n\n\t\tif (this.isDistanceSurpassed) {\n\t\t\tthis.startDrag(initialEv);\n\t\t}\n\t},\n\n\n\t// Distance\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\thandleDistanceSurpassed: function(ev) {\n\t\tthis.isDistanceSurpassed = true;\n\n\t\tif (this.isDelayEnded) {\n\t\t\tthis.startDrag(ev);\n\t\t}\n\t},\n\n\n\t// Mouse / Touch\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\thandleTouchMove: function(ev) {\n\t\t// prevent inertia and touchmove-scrolling while dragging\n\t\tif (this.isDragging) {\n\t\t\tev.preventDefault();\n\t\t}\n\n\t\tthis.handleMove(ev);\n\t},\n\n\n\thandleMouseMove: function(ev) {\n\t\tthis.handleMove(ev);\n\t},\n\n\n\t// Scrolling (unrelated to auto-scroll)\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\thandleTouchScroll: function(ev) {\n\t\t// if the drag is being initiated by touch, but a scroll happens before\n\t\t// the drag-initiating delay is over, cancel the drag\n\t\tif (!this.isDragging) {\n\t\t\tthis.endInteraction(ev, true); // isCancelled=true\n\t\t}\n\t},\n\n\n\t// Utils\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\t// Triggers a callback. Calls a function in the option hash of the same name.\n\t// Arguments beyond the first `name` are forwarded on.\n\ttrigger: function(name) {\n\t\tif (this.options[name]) {\n\t\t\tthis.options[name].apply(this, Array.prototype.slice.call(arguments, 1));\n\t\t}\n\t\t// makes _methods callable by event name. TODO: kill this\n\t\tif (this['_' + name]) {\n\t\t\tthis['_' + name].apply(this, Array.prototype.slice.call(arguments, 1));\n\t\t}\n\t}\n\n\n});\n\n;;\n/*\nthis.scrollEl is set in DragListener\n*/\nDragListener.mixin({\n\n\tisAutoScroll: false,\n\n\tscrollBounds: null, // { top, bottom, left, right }\n\tscrollTopVel: null, // pixels per second\n\tscrollLeftVel: null, // pixels per second\n\tscrollIntervalId: null, // ID of setTimeout for scrolling animation loop\n\n\t// defaults\n\tscrollSensitivity: 30, // pixels from edge for scrolling to start\n\tscrollSpeed: 200, // pixels per second, at maximum speed\n\tscrollIntervalMs: 50, // millisecond wait between scroll increment\n\n\n\tinitAutoScroll: function() {\n\t\tvar scrollEl = this.scrollEl;\n\n\t\tthis.isAutoScroll =\n\t\t\tthis.options.scroll &&\n\t\t\tscrollEl &&\n\t\t\t!scrollEl.is(window) &&\n\t\t\t!scrollEl.is(document);\n\n\t\tif (this.isAutoScroll) {\n\t\t\t// debounce makes sure rapid calls don't happen\n\t\t\tthis.listenTo(scrollEl, 'scroll', debounce(this.handleDebouncedScroll, 100));\n\t\t}\n\t},\n\n\n\tdestroyAutoScroll: function() {\n\t\tthis.endAutoScroll(); // kill any animation loop\n\n\t\t// remove the scroll handler if there is a scrollEl\n\t\tif (this.isAutoScroll) {\n\t\t\tthis.stopListeningTo(this.scrollEl, 'scroll'); // will probably get removed by unbindHandlers too :(\n\t\t}\n\t},\n\n\n\t// Computes and stores the bounding rectangle of scrollEl\n\tcomputeScrollBounds: function() {\n\t\tif (this.isAutoScroll) {\n\t\t\tthis.scrollBounds = getOuterRect(this.scrollEl);\n\t\t\t// TODO: use getClientRect in future. but prevents auto scrolling when on top of scrollbars\n\t\t}\n\t},\n\n\n\t// Called when the dragging is in progress and scrolling should be updated\n\tupdateAutoScroll: function(ev) {\n\t\tvar sensitivity = this.scrollSensitivity;\n\t\tvar bounds = this.scrollBounds;\n\t\tvar topCloseness, bottomCloseness;\n\t\tvar leftCloseness, rightCloseness;\n\t\tvar topVel = 0;\n\t\tvar leftVel = 0;\n\n\t\tif (bounds) { // only scroll if scrollEl exists\n\n\t\t\t// compute closeness to edges. valid range is from 0.0 - 1.0\n\t\t\ttopCloseness = (sensitivity - (getEvY(ev) - bounds.top)) / sensitivity;\n\t\t\tbottomCloseness = (sensitivity - (bounds.bottom - getEvY(ev))) / sensitivity;\n\t\t\tleftCloseness = (sensitivity - (getEvX(ev) - bounds.left)) / sensitivity;\n\t\t\trightCloseness = (sensitivity - (bounds.right - getEvX(ev))) / sensitivity;\n\n\t\t\t// translate vertical closeness into velocity.\n\t\t\t// mouse must be completely in bounds for velocity to happen.\n\t\t\tif (topCloseness >= 0 && topCloseness <= 1) {\n\t\t\t\ttopVel = topCloseness * this.scrollSpeed * -1; // negative. for scrolling up\n\t\t\t}\n\t\t\telse if (bottomCloseness >= 0 && bottomCloseness <= 1) {\n\t\t\t\ttopVel = bottomCloseness * this.scrollSpeed;\n\t\t\t}\n\n\t\t\t// translate horizontal closeness into velocity\n\t\t\tif (leftCloseness >= 0 && leftCloseness <= 1) {\n\t\t\t\tleftVel = leftCloseness * this.scrollSpeed * -1; // negative. for scrolling left\n\t\t\t}\n\t\t\telse if (rightCloseness >= 0 && rightCloseness <= 1) {\n\t\t\t\tleftVel = rightCloseness * this.scrollSpeed;\n\t\t\t}\n\t\t}\n\n\t\tthis.setScrollVel(topVel, leftVel);\n\t},\n\n\n\t// Sets the speed-of-scrolling for the scrollEl\n\tsetScrollVel: function(topVel, leftVel) {\n\n\t\tthis.scrollTopVel = topVel;\n\t\tthis.scrollLeftVel = leftVel;\n\n\t\tthis.constrainScrollVel(); // massages into realistic values\n\n\t\t// if there is non-zero velocity, and an animation loop hasn't already started, then START\n\t\tif ((this.scrollTopVel || this.scrollLeftVel) && !this.scrollIntervalId) {\n\t\t\tthis.scrollIntervalId = setInterval(\n\t\t\t\tproxy(this, 'scrollIntervalFunc'), // scope to `this`\n\t\t\t\tthis.scrollIntervalMs\n\t\t\t);\n\t\t}\n\t},\n\n\n\t// Forces scrollTopVel and scrollLeftVel to be zero if scrolling has already gone all the way\n\tconstrainScrollVel: function() {\n\t\tvar el = this.scrollEl;\n\n\t\tif (this.scrollTopVel < 0) { // scrolling up?\n\t\t\tif (el.scrollTop() <= 0) { // already scrolled all the way up?\n\t\t\t\tthis.scrollTopVel = 0;\n\t\t\t}\n\t\t}\n\t\telse if (this.scrollTopVel > 0) { // scrolling down?\n\t\t\tif (el.scrollTop() + el[0].clientHeight >= el[0].scrollHeight) { // already scrolled all the way down?\n\t\t\t\tthis.scrollTopVel = 0;\n\t\t\t}\n\t\t}\n\n\t\tif (this.scrollLeftVel < 0) { // scrolling left?\n\t\t\tif (el.scrollLeft() <= 0) { // already scrolled all the left?\n\t\t\t\tthis.scrollLeftVel = 0;\n\t\t\t}\n\t\t}\n\t\telse if (this.scrollLeftVel > 0) { // scrolling right?\n\t\t\tif (el.scrollLeft() + el[0].clientWidth >= el[0].scrollWidth) { // already scrolled all the way right?\n\t\t\t\tthis.scrollLeftVel = 0;\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// This function gets called during every iteration of the scrolling animation loop\n\tscrollIntervalFunc: function() {\n\t\tvar el = this.scrollEl;\n\t\tvar frac = this.scrollIntervalMs / 1000; // considering animation frequency, what the vel should be mult'd by\n\n\t\t// change the value of scrollEl's scroll\n\t\tif (this.scrollTopVel) {\n\t\t\tel.scrollTop(el.scrollTop() + this.scrollTopVel * frac);\n\t\t}\n\t\tif (this.scrollLeftVel) {\n\t\t\tel.scrollLeft(el.scrollLeft() + this.scrollLeftVel * frac);\n\t\t}\n\n\t\tthis.constrainScrollVel(); // since the scroll values changed, recompute the velocities\n\n\t\t// if scrolled all the way, which causes the vels to be zero, stop the animation loop\n\t\tif (!this.scrollTopVel && !this.scrollLeftVel) {\n\t\t\tthis.endAutoScroll();\n\t\t}\n\t},\n\n\n\t// Kills any existing scrolling animation loop\n\tendAutoScroll: function() {\n\t\tif (this.scrollIntervalId) {\n\t\t\tclearInterval(this.scrollIntervalId);\n\t\t\tthis.scrollIntervalId = null;\n\n\t\t\tthis.handleScrollEnd();\n\t\t}\n\t},\n\n\n\t// Get called when the scrollEl is scrolled (NOTE: this is delayed via debounce)\n\thandleDebouncedScroll: function() {\n\t\t// recompute all coordinates, but *only* if this is *not* part of our scrolling animation\n\t\tif (!this.scrollIntervalId) {\n\t\t\tthis.handleScrollEnd();\n\t\t}\n\t},\n\n\n\t// Called when scrolling has stopped, whether through auto scroll, or the user scrolling\n\thandleScrollEnd: function() {\n\t}\n\n});\n;;\n\n/* Tracks mouse movements over a component and raises events about which hit the mouse is over.\n------------------------------------------------------------------------------------------------------------------------\noptions:\n- subjectEl\n- subjectCenter\n*/\n\nvar HitDragListener = DragListener.extend({\n\n\tcomponent: null, // converts coordinates to hits\n\t\t// methods: prepareHits, releaseHits, queryHit\n\n\torigHit: null, // the hit the mouse was over when listening started\n\thit: null, // the hit the mouse is over\n\tcoordAdjust: null, // delta that will be added to the mouse coordinates when computing collisions\n\n\n\tconstructor: function(component, options) {\n\t\tDragListener.call(this, options); // call the super-constructor\n\n\t\tthis.component = component;\n\t},\n\n\n\t// Called when drag listening starts (but a real drag has not necessarily began).\n\t// ev might be undefined if dragging was started manually.\n\thandleInteractionStart: function(ev) {\n\t\tvar subjectEl = this.subjectEl;\n\t\tvar subjectRect;\n\t\tvar origPoint;\n\t\tvar point;\n\n\t\tthis.computeCoords();\n\n\t\tif (ev) {\n\t\t\torigPoint = { left: getEvX(ev), top: getEvY(ev) };\n\t\t\tpoint = origPoint;\n\n\t\t\t// constrain the point to bounds of the element being dragged\n\t\t\tif (subjectEl) {\n\t\t\t\tsubjectRect = getOuterRect(subjectEl); // used for centering as well\n\t\t\t\tpoint = constrainPoint(point, subjectRect);\n\t\t\t}\n\n\t\t\tthis.origHit = this.queryHit(point.left, point.top);\n\n\t\t\t// treat the center of the subject as the collision point?\n\t\t\tif (subjectEl && this.options.subjectCenter) {\n\n\t\t\t\t// only consider the area the subject overlaps the hit. best for large subjects.\n\t\t\t\t// TODO: skip this if hit didn't supply left/right/top/bottom\n\t\t\t\tif (this.origHit) {\n\t\t\t\t\tsubjectRect = intersectRects(this.origHit, subjectRect) ||\n\t\t\t\t\t\tsubjectRect; // in case there is no intersection\n\t\t\t\t}\n\n\t\t\t\tpoint = getRectCenter(subjectRect);\n\t\t\t}\n\n\t\t\tthis.coordAdjust = diffPoints(point, origPoint); // point - origPoint\n\t\t}\n\t\telse {\n\t\t\tthis.origHit = null;\n\t\t\tthis.coordAdjust = null;\n\t\t}\n\n\t\t// call the super-method. do it after origHit has been computed\n\t\tDragListener.prototype.handleInteractionStart.apply(this, arguments);\n\t},\n\n\n\t// Recomputes the drag-critical positions of elements\n\tcomputeCoords: function() {\n\t\tthis.component.prepareHits();\n\t\tthis.computeScrollBounds(); // why is this here??????\n\t},\n\n\n\t// Called when the actual drag has started\n\thandleDragStart: function(ev) {\n\t\tvar hit;\n\n\t\tDragListener.prototype.handleDragStart.apply(this, arguments); // call the super-method\n\n\t\t// might be different from this.origHit if the min-distance is large\n\t\thit = this.queryHit(getEvX(ev), getEvY(ev));\n\n\t\t// report the initial hit the mouse is over\n\t\t// especially important if no min-distance and drag starts immediately\n\t\tif (hit) {\n\t\t\tthis.handleHitOver(hit);\n\t\t}\n\t},\n\n\n\t// Called when the drag moves\n\thandleDrag: function(dx, dy, ev) {\n\t\tvar hit;\n\n\t\tDragListener.prototype.handleDrag.apply(this, arguments); // call the super-method\n\n\t\thit = this.queryHit(getEvX(ev), getEvY(ev));\n\n\t\tif (!isHitsEqual(hit, this.hit)) { // a different hit than before?\n\t\t\tif (this.hit) {\n\t\t\t\tthis.handleHitOut();\n\t\t\t}\n\t\t\tif (hit) {\n\t\t\t\tthis.handleHitOver(hit);\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Called when dragging has been stopped\n\thandleDragEnd: function() {\n\t\tthis.handleHitDone();\n\t\tDragListener.prototype.handleDragEnd.apply(this, arguments); // call the super-method\n\t},\n\n\n\t// Called when a the mouse has just moved over a new hit\n\thandleHitOver: function(hit) {\n\t\tvar isOrig = isHitsEqual(hit, this.origHit);\n\n\t\tthis.hit = hit;\n\n\t\tthis.trigger('hitOver', this.hit, isOrig, this.origHit);\n\t},\n\n\n\t// Called when the mouse has just moved out of a hit\n\thandleHitOut: function() {\n\t\tif (this.hit) {\n\t\t\tthis.trigger('hitOut', this.hit);\n\t\t\tthis.handleHitDone();\n\t\t\tthis.hit = null;\n\t\t}\n\t},\n\n\n\t// Called after a hitOut. Also called before a dragStop\n\thandleHitDone: function() {\n\t\tif (this.hit) {\n\t\t\tthis.trigger('hitDone', this.hit);\n\t\t}\n\t},\n\n\n\t// Called when the interaction ends, whether there was a real drag or not\n\thandleInteractionEnd: function() {\n\t\tDragListener.prototype.handleInteractionEnd.apply(this, arguments); // call the super-method\n\n\t\tthis.origHit = null;\n\t\tthis.hit = null;\n\n\t\tthis.component.releaseHits();\n\t},\n\n\n\t// Called when scrolling has stopped, whether through auto scroll, or the user scrolling\n\thandleScrollEnd: function() {\n\t\tDragListener.prototype.handleScrollEnd.apply(this, arguments); // call the super-method\n\n\t\tthis.computeCoords(); // hits' absolute positions will be in new places. recompute\n\t},\n\n\n\t// Gets the hit underneath the coordinates for the given mouse event\n\tqueryHit: function(left, top) {\n\n\t\tif (this.coordAdjust) {\n\t\t\tleft += this.coordAdjust.left;\n\t\t\ttop += this.coordAdjust.top;\n\t\t}\n\n\t\treturn this.component.queryHit(left, top);\n\t}\n\n});\n\n\n// Returns `true` if the hits are identically equal. `false` otherwise. Must be from the same component.\n// Two null values will be considered equal, as two \"out of the component\" states are the same.\nfunction isHitsEqual(hit0, hit1) {\n\n\tif (!hit0 && !hit1) {\n\t\treturn true;\n\t}\n\n\tif (hit0 && hit1) {\n\t\treturn hit0.component === hit1.component &&\n\t\t\tisHitPropsWithin(hit0, hit1) &&\n\t\t\tisHitPropsWithin(hit1, hit0); // ensures all props are identical\n\t}\n\n\treturn false;\n}\n\n\n// Returns true if all of subHit's non-standard properties are within superHit\nfunction isHitPropsWithin(subHit, superHit) {\n\tfor (var propName in subHit) {\n\t\tif (!/^(component|left|right|top|bottom)$/.test(propName)) {\n\t\t\tif (subHit[propName] !== superHit[propName]) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\treturn true;\n}\n\n;;\n\n/* Creates a clone of an element and lets it track the mouse as it moves\n----------------------------------------------------------------------------------------------------------------------*/\n\nvar MouseFollower = Class.extend(ListenerMixin, {\n\n\toptions: null,\n\n\tsourceEl: null, // the element that will be cloned and made to look like it is dragging\n\tel: null, // the clone of `sourceEl` that will track the mouse\n\tparentEl: null, // the element that `el` (the clone) will be attached to\n\n\t// the initial position of el, relative to the offset parent. made to match the initial offset of sourceEl\n\ttop0: null,\n\tleft0: null,\n\n\t// the absolute coordinates of the initiating touch/mouse action\n\ty0: null,\n\tx0: null,\n\n\t// the number of pixels the mouse has moved from its initial position\n\ttopDelta: null,\n\tleftDelta: null,\n\n\tisFollowing: false,\n\tisHidden: false,\n\tisAnimating: false, // doing the revert animation?\n\n\tconstructor: function(sourceEl, options) {\n\t\tthis.options = options = options || {};\n\t\tthis.sourceEl = sourceEl;\n\t\tthis.parentEl = options.parentEl ? $(options.parentEl) : sourceEl.parent(); // default to sourceEl's parent\n\t},\n\n\n\t// Causes the element to start following the mouse\n\tstart: function(ev) {\n\t\tif (!this.isFollowing) {\n\t\t\tthis.isFollowing = true;\n\n\t\t\tthis.y0 = getEvY(ev);\n\t\t\tthis.x0 = getEvX(ev);\n\t\t\tthis.topDelta = 0;\n\t\t\tthis.leftDelta = 0;\n\n\t\t\tif (!this.isHidden) {\n\t\t\t\tthis.updatePosition();\n\t\t\t}\n\n\t\t\tif (getEvIsTouch(ev)) {\n\t\t\t\tthis.listenTo($(document), 'touchmove', this.handleMove);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.listenTo($(document), 'mousemove', this.handleMove);\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Causes the element to stop following the mouse. If shouldRevert is true, will animate back to original position.\n\t// `callback` gets invoked when the animation is complete. If no animation, it is invoked immediately.\n\tstop: function(shouldRevert, callback) {\n\t\tvar _this = this;\n\t\tvar revertDuration = this.options.revertDuration;\n\n\t\tfunction complete() { // might be called by .animate(), which might change `this` context\n\t\t\t_this.isAnimating = false;\n\t\t\t_this.removeElement();\n\n\t\t\t_this.top0 = _this.left0 = null; // reset state for future updatePosition calls\n\n\t\t\tif (callback) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\n\t\tif (this.isFollowing && !this.isAnimating) { // disallow more than one stop animation at a time\n\t\t\tthis.isFollowing = false;\n\n\t\t\tthis.stopListeningTo($(document));\n\n\t\t\tif (shouldRevert && revertDuration && !this.isHidden) { // do a revert animation?\n\t\t\t\tthis.isAnimating = true;\n\t\t\t\tthis.el.animate({\n\t\t\t\t\ttop: this.top0,\n\t\t\t\t\tleft: this.left0\n\t\t\t\t}, {\n\t\t\t\t\tduration: revertDuration,\n\t\t\t\t\tcomplete: complete\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcomplete();\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Gets the tracking element. Create it if necessary\n\tgetEl: function() {\n\t\tvar el = this.el;\n\n\t\tif (!el) {\n\t\t\tel = this.el = this.sourceEl.clone()\n\t\t\t\t.addClass(this.options.additionalClass || '')\n\t\t\t\t.css({\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\tvisibility: '', // in case original element was hidden (commonly through hideEvents())\n\t\t\t\t\tdisplay: this.isHidden ? 'none' : '', // for when initially hidden\n\t\t\t\t\tmargin: 0,\n\t\t\t\t\tright: 'auto', // erase and set width instead\n\t\t\t\t\tbottom: 'auto', // erase and set height instead\n\t\t\t\t\twidth: this.sourceEl.width(), // explicit height in case there was a 'right' value\n\t\t\t\t\theight: this.sourceEl.height(), // explicit width in case there was a 'bottom' value\n\t\t\t\t\topacity: this.options.opacity || '',\n\t\t\t\t\tzIndex: this.options.zIndex\n\t\t\t\t});\n\n\t\t\t// we don't want long taps or any mouse interaction causing selection/menus.\n\t\t\t// would use preventSelection(), but that prevents selectstart, causing problems.\n\t\t\tel.addClass('fc-unselectable');\n\n\t\t\tel.appendTo(this.parentEl);\n\t\t}\n\n\t\treturn el;\n\t},\n\n\n\t// Removes the tracking element if it has already been created\n\tremoveElement: function() {\n\t\tif (this.el) {\n\t\t\tthis.el.remove();\n\t\t\tthis.el = null;\n\t\t}\n\t},\n\n\n\t// Update the CSS position of the tracking element\n\tupdatePosition: function() {\n\t\tvar sourceOffset;\n\t\tvar origin;\n\n\t\tthis.getEl(); // ensure this.el\n\n\t\t// make sure origin info was computed\n\t\tif (this.top0 === null) {\n\t\t\tsourceOffset = this.sourceEl.offset();\n\t\t\torigin = this.el.offsetParent().offset();\n\t\t\tthis.top0 = sourceOffset.top - origin.top;\n\t\t\tthis.left0 = sourceOffset.left - origin.left;\n\t\t}\n\n\t\tthis.el.css({\n\t\t\ttop: this.top0 + this.topDelta,\n\t\t\tleft: this.left0 + this.leftDelta\n\t\t});\n\t},\n\n\n\t// Gets called when the user moves the mouse\n\thandleMove: function(ev) {\n\t\tthis.topDelta = getEvY(ev) - this.y0;\n\t\tthis.leftDelta = getEvX(ev) - this.x0;\n\n\t\tif (!this.isHidden) {\n\t\t\tthis.updatePosition();\n\t\t}\n\t},\n\n\n\t// Temporarily makes the tracking element invisible. Can be called before following starts\n\thide: function() {\n\t\tif (!this.isHidden) {\n\t\t\tthis.isHidden = true;\n\t\t\tif (this.el) {\n\t\t\t\tthis.el.hide();\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Show the tracking element after it has been temporarily hidden\n\tshow: function() {\n\t\tif (this.isHidden) {\n\t\t\tthis.isHidden = false;\n\t\t\tthis.updatePosition();\n\t\t\tthis.getEl().show();\n\t\t}\n\t}\n\n});\n\n;;\n\n/* An abstract class comprised of a \"grid\" of areas that each represent a specific datetime\n----------------------------------------------------------------------------------------------------------------------*/\n\nvar Grid = FC.Grid = Class.extend(ListenerMixin, MouseIgnorerMixin, {\n\n\t// self-config, overridable by subclasses\n\thasDayInteractions: true, // can user click/select ranges of time?\n\n\tview: null, // a View object\n\tisRTL: null, // shortcut to the view's isRTL option\n\n\tstart: null,\n\tend: null,\n\n\tel: null, // the containing element\n\telsByFill: null, // a hash of jQuery element sets used for rendering each fill. Keyed by fill name.\n\n\t// derived from options\n\teventTimeFormat: null,\n\tdisplayEventTime: null,\n\tdisplayEventEnd: null,\n\n\tminResizeDuration: null, // TODO: hack. set by subclasses. minumum event resize duration\n\n\t// if defined, holds the unit identified (ex: \"year\" or \"month\") that determines the level of granularity\n\t// of the date areas. if not defined, assumes to be day and time granularity.\n\t// TODO: port isTimeScale into same system?\n\tlargeUnit: null,\n\n\tdayDragListener: null,\n\tsegDragListener: null,\n\tsegResizeListener: null,\n\texternalDragListener: null,\n\n\n\tconstructor: function(view) {\n\t\tthis.view = view;\n\t\tthis.isRTL = view.opt('isRTL');\n\t\tthis.elsByFill = {};\n\n\t\tthis.dayDragListener = this.buildDayDragListener();\n\t\tthis.initMouseIgnoring();\n\t},\n\n\n\t/* Options\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Generates the format string used for event time text, if not explicitly defined by 'timeFormat'\n\tcomputeEventTimeFormat: function() {\n\t\treturn this.view.opt('smallTimeFormat');\n\t},\n\n\n\t// Determines whether events should have their end times displayed, if not explicitly defined by 'displayEventTime'.\n\t// Only applies to non-all-day events.\n\tcomputeDisplayEventTime: function() {\n\t\treturn true;\n\t},\n\n\n\t// Determines whether events should have their end times displayed, if not explicitly defined by 'displayEventEnd'\n\tcomputeDisplayEventEnd: function() {\n\t\treturn true;\n\t},\n\n\n\t/* Dates\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Tells the grid about what period of time to display.\n\t// Any date-related internal data should be generated.\n\tsetRange: function(range) {\n\t\tthis.start = range.start.clone();\n\t\tthis.end = range.end.clone();\n\n\t\tthis.rangeUpdated();\n\t\tthis.processRangeOptions();\n\t},\n\n\n\t// Called when internal variables that rely on the range should be updated\n\trangeUpdated: function() {\n\t},\n\n\n\t// Updates values that rely on options and also relate to range\n\tprocessRangeOptions: function() {\n\t\tvar view = this.view;\n\t\tvar displayEventTime;\n\t\tvar displayEventEnd;\n\n\t\tthis.eventTimeFormat =\n\t\t\tview.opt('eventTimeFormat') ||\n\t\t\tview.opt('timeFormat') || // deprecated\n\t\t\tthis.computeEventTimeFormat();\n\n\t\tdisplayEventTime = view.opt('displayEventTime');\n\t\tif (displayEventTime == null) {\n\t\t\tdisplayEventTime = this.computeDisplayEventTime(); // might be based off of range\n\t\t}\n\n\t\tdisplayEventEnd = view.opt('displayEventEnd');\n\t\tif (displayEventEnd == null) {\n\t\t\tdisplayEventEnd = this.computeDisplayEventEnd(); // might be based off of range\n\t\t}\n\n\t\tthis.displayEventTime = displayEventTime;\n\t\tthis.displayEventEnd = displayEventEnd;\n\t},\n\n\n\t// Converts a span (has unzoned start/end and any other grid-specific location information)\n\t// into an array of segments (pieces of events whose format is decided by the grid).\n\tspanToSegs: function(span) {\n\t\t// subclasses must implement\n\t},\n\n\n\t// Diffs the two dates, returning a duration, based on granularity of the grid\n\t// TODO: port isTimeScale into this system?\n\tdiffDates: function(a, b) {\n\t\tif (this.largeUnit) {\n\t\t\treturn diffByUnit(a, b, this.largeUnit);\n\t\t}\n\t\telse {\n\t\t\treturn diffDayTime(a, b);\n\t\t}\n\t},\n\n\n\t/* Hit Area\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Called before one or more queryHit calls might happen. Should prepare any cached coordinates for queryHit\n\tprepareHits: function() {\n\t},\n\n\n\t// Called when queryHit calls have subsided. Good place to clear any coordinate caches.\n\treleaseHits: function() {\n\t},\n\n\n\t// Given coordinates from the topleft of the document, return data about the date-related area underneath.\n\t// Can return an object with arbitrary properties (although top/right/left/bottom are encouraged).\n\t// Must have a `grid` property, a reference to this current grid. TODO: avoid this\n\t// The returned object will be processed by getHitSpan and getHitEl.\n\tqueryHit: function(leftOffset, topOffset) {\n\t},\n\n\n\t// Given position-level information about a date-related area within the grid,\n\t// should return an object with at least a start/end date. Can provide other information as well.\n\tgetHitSpan: function(hit) {\n\t},\n\n\n\t// Given position-level information about a date-related area within the grid,\n\t// should return a jQuery element that best represents it. passed to dayClick callback.\n\tgetHitEl: function(hit) {\n\t},\n\n\n\t/* Rendering\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Sets the container element that the grid should render inside of.\n\t// Does other DOM-related initializations.\n\tsetElement: function(el) {\n\t\tthis.el = el;\n\n\t\tif (this.hasDayInteractions) {\n\t\t\tpreventSelection(el);\n\n\t\t\tthis.bindDayHandler('touchstart', this.dayTouchStart);\n\t\t\tthis.bindDayHandler('mousedown', this.dayMousedown);\n\t\t}\n\n\t\t// attach event-element-related handlers. in Grid.events\n\t\t// same garbage collection note as above.\n\t\tthis.bindSegHandlers();\n\n\t\tthis.bindGlobalHandlers();\n\t},\n\n\n\tbindDayHandler: function(name, handler) {\n\t\tvar _this = this;\n\n\t\t// attach a handler to the grid's root element.\n\t\t// jQuery will take care of unregistering them when removeElement gets called.\n\t\tthis.el.on(name, function(ev) {\n\t\t\tif (\n\t\t\t\t!$(ev.target).is(\n\t\t\t\t\t_this.segSelector + ',' + // directly on an event element\n\t\t\t\t\t_this.segSelector + ' *,' + // within an event element\n\t\t\t\t\t'.fc-more,' + // a \"more..\" link\n\t\t\t\t\t'a[data-goto]' // a clickable nav link\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\treturn handler.call(_this, ev);\n\t\t\t}\n\t\t});\n\t},\n\n\n\t// Removes the grid's container element from the DOM. Undoes any other DOM-related attachments.\n\t// DOES NOT remove any content beforehand (doesn't clear events or call unrenderDates), unlike View\n\tremoveElement: function() {\n\t\tthis.unbindGlobalHandlers();\n\t\tthis.clearDragListeners();\n\n\t\tthis.el.remove();\n\n\t\t// NOTE: we don't null-out this.el for the same reasons we don't do it within View::removeElement\n\t},\n\n\n\t// Renders the basic structure of grid view before any content is rendered\n\trenderSkeleton: function() {\n\t\t// subclasses should implement\n\t},\n\n\n\t// Renders the grid's date-related content (like areas that represent days/times).\n\t// Assumes setRange has already been called and the skeleton has already been rendered.\n\trenderDates: function() {\n\t\t// subclasses should implement\n\t},\n\n\n\t// Unrenders the grid's date-related content\n\tunrenderDates: function() {\n\t\t// subclasses should implement\n\t},\n\n\n\t/* Handlers\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Binds DOM handlers to elements that reside outside the grid, such as the document\n\tbindGlobalHandlers: function() {\n\t\tthis.listenTo($(document), {\n\t\t\tdragstart: this.externalDragStart, // jqui\n\t\t\tsortstart: this.externalDragStart // jqui\n\t\t});\n\t},\n\n\n\t// Unbinds DOM handlers from elements that reside outside the grid\n\tunbindGlobalHandlers: function() {\n\t\tthis.stopListeningTo($(document));\n\t},\n\n\n\t// Process a mousedown on an element that represents a day. For day clicking and selecting.\n\tdayMousedown: function(ev) {\n\t\tif (!this.isIgnoringMouse) {\n\t\t\tthis.dayDragListener.startInteraction(ev, {\n\t\t\t\t//distance: 5, // needs more work if we want dayClick to fire correctly\n\t\t\t});\n\t\t}\n\t},\n\n\n\tdayTouchStart: function(ev) {\n\t\tvar view = this.view;\n\t\tvar selectLongPressDelay = view.opt('selectLongPressDelay');\n\n\t\t// HACK to prevent a user's clickaway for unselecting a range or an event\n\t\t// from causing a dayClick.\n\t\tif (view.isSelected || view.selectedEvent) {\n\t\t\tthis.tempIgnoreMouse();\n\t\t}\n\n\t\tif (selectLongPressDelay == null) {\n\t\t\tselectLongPressDelay = view.opt('longPressDelay'); // fallback\n\t\t}\n\n\t\tthis.dayDragListener.startInteraction(ev, {\n\t\t\tdelay: selectLongPressDelay\n\t\t});\n\t},\n\n\n\t// Creates a listener that tracks the user's drag across day elements.\n\t// For day clicking and selecting.\n\tbuildDayDragListener: function() {\n\t\tvar _this = this;\n\t\tvar view = this.view;\n\t\tvar isSelectable = view.opt('selectable');\n\t\tvar dayClickHit; // null if invalid dayClick\n\t\tvar selectionSpan; // null if invalid selection\n\n\t\t// this listener tracks a mousedown on a day element, and a subsequent drag.\n\t\t// if the drag ends on the same day, it is a 'dayClick'.\n\t\t// if 'selectable' is enabled, this listener also detects selections.\n\t\tvar dragListener = new HitDragListener(this, {\n\t\t\tscroll: view.opt('dragScroll'),\n\t\t\tinteractionStart: function() {\n\t\t\t\tdayClickHit = dragListener.origHit; // for dayClick, where no dragging happens\n\t\t\t\tselectionSpan = null;\n\t\t\t},\n\t\t\tdragStart: function() {\n\t\t\t\tview.unselect(); // since we could be rendering a new selection, we want to clear any old one\n\t\t\t},\n\t\t\thitOver: function(hit, isOrig, origHit) {\n\t\t\t\tif (origHit) { // click needs to have started on a hit\n\n\t\t\t\t\t// if user dragged to another cell at any point, it can no longer be a dayClick\n\t\t\t\t\tif (!isOrig) {\n\t\t\t\t\t\tdayClickHit = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (isSelectable) {\n\t\t\t\t\t\tselectionSpan = _this.computeSelection(\n\t\t\t\t\t\t\t_this.getHitSpan(origHit),\n\t\t\t\t\t\t\t_this.getHitSpan(hit)\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (selectionSpan) {\n\t\t\t\t\t\t\t_this.renderSelection(selectionSpan);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (selectionSpan === false) {\n\t\t\t\t\t\t\tdisableCursor();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\thitOut: function() { // called before mouse moves to a different hit OR moved out of all hits\n\t\t\t\tdayClickHit = null;\n\t\t\t\tselectionSpan = null;\n\t\t\t\t_this.unrenderSelection();\n\t\t\t},\n\t\t\thitDone: function() { // called after a hitOut OR before a dragEnd\n\t\t\t\tenableCursor();\n\t\t\t},\n\t\t\tinteractionEnd: function(ev, isCancelled) {\n\t\t\t\tif (!isCancelled) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tdayClickHit &&\n\t\t\t\t\t\t!_this.isIgnoringMouse // see hack in dayTouchStart\n\t\t\t\t\t) {\n\t\t\t\t\t\tview.triggerDayClick(\n\t\t\t\t\t\t\t_this.getHitSpan(dayClickHit),\n\t\t\t\t\t\t\t_this.getHitEl(dayClickHit),\n\t\t\t\t\t\t\tev\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tif (selectionSpan) {\n\t\t\t\t\t\t// the selection will already have been rendered. just report it\n\t\t\t\t\t\tview.reportSelection(selectionSpan, ev);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn dragListener;\n\t},\n\n\n\t// Kills all in-progress dragging.\n\t// Useful for when public API methods that result in re-rendering are invoked during a drag.\n\t// Also useful for when touch devices misbehave and don't fire their touchend.\n\tclearDragListeners: function() {\n\t\tthis.dayDragListener.endInteraction();\n\n\t\tif (this.segDragListener) {\n\t\t\tthis.segDragListener.endInteraction(); // will clear this.segDragListener\n\t\t}\n\t\tif (this.segResizeListener) {\n\t\t\tthis.segResizeListener.endInteraction(); // will clear this.segResizeListener\n\t\t}\n\t\tif (this.externalDragListener) {\n\t\t\tthis.externalDragListener.endInteraction(); // will clear this.externalDragListener\n\t\t}\n\t},\n\n\n\t/* Event Helper\n\t------------------------------------------------------------------------------------------------------------------*/\n\t// TODO: should probably move this to Grid.events, like we did event dragging / resizing\n\n\n\t// Renders a mock event at the given event location, which contains zoned start/end properties.\n\t// Returns all mock event elements.\n\trenderEventLocationHelper: function(eventLocation, sourceSeg) {\n\t\tvar fakeEvent = this.fabricateHelperEvent(eventLocation, sourceSeg);\n\n\t\treturn this.renderHelper(fakeEvent, sourceSeg); // do the actual rendering\n\t},\n\n\n\t// Builds a fake event given zoned event date properties and a segment is should be inspired from.\n\t// The range's end can be null, in which case the mock event that is rendered will have a null end time.\n\t// `sourceSeg` is the internal segment object involved in the drag. If null, something external is dragging.\n\tfabricateHelperEvent: function(eventLocation, sourceSeg) {\n\t\tvar fakeEvent = sourceSeg ? createObject(sourceSeg.event) : {}; // mask the original event object if possible\n\n\t\tfakeEvent.start = eventLocation.start.clone();\n\t\tfakeEvent.end = eventLocation.end ? eventLocation.end.clone() : null;\n\t\tfakeEvent.allDay = null; // force it to be freshly computed by normalizeEventDates\n\t\tthis.view.calendar.normalizeEventDates(fakeEvent);\n\n\t\t// this extra className will be useful for differentiating real events from mock events in CSS\n\t\tfakeEvent.className = (fakeEvent.className || []).concat('fc-helper');\n\n\t\t// if something external is being dragged in, don't render a resizer\n\t\tif (!sourceSeg) {\n\t\t\tfakeEvent.editable = false;\n\t\t}\n\n\t\treturn fakeEvent;\n\t},\n\n\n\t// Renders a mock event. Given zoned event date properties.\n\t// Must return all mock event elements.\n\trenderHelper: function(eventLocation, sourceSeg) {\n\t\t// subclasses must implement\n\t},\n\n\n\t// Unrenders a mock event\n\tunrenderHelper: function() {\n\t\t// subclasses must implement\n\t},\n\n\n\t/* Selection\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders a visual indication of a selection. Will highlight by default but can be overridden by subclasses.\n\t// Given a span (unzoned start/end and other misc data)\n\trenderSelection: function(span) {\n\t\tthis.renderHighlight(span);\n\t},\n\n\n\t// Unrenders any visual indications of a selection. Will unrender a highlight by default.\n\tunrenderSelection: function() {\n\t\tthis.unrenderHighlight();\n\t},\n\n\n\t// Given the first and last date-spans of a selection, returns another date-span object.\n\t// Subclasses can override and provide additional data in the span object. Will be passed to renderSelection().\n\t// Will return false if the selection is invalid and this should be indicated to the user.\n\t// Will return null/undefined if a selection invalid but no error should be reported.\n\tcomputeSelection: function(span0, span1) {\n\t\tvar span = this.computeSelectionSpan(span0, span1);\n\n\t\tif (span && !this.view.calendar.isSelectionSpanAllowed(span)) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn span;\n\t},\n\n\n\t// Given two spans, must return the combination of the two.\n\t// TODO: do this separation of concerns (combining VS validation) for event dnd/resize too.\n\tcomputeSelectionSpan: function(span0, span1) {\n\t\tvar dates = [ span0.start, span0.end, span1.start, span1.end ];\n\n\t\tdates.sort(compareNumbers); // sorts chronologically. works with Moments\n\n\t\treturn { start: dates[0].clone(), end: dates[3].clone() };\n\t},\n\n\n\t/* Highlight\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders an emphasis on the given date range. Given a span (unzoned start/end and other misc data)\n\trenderHighlight: function(span) {\n\t\tthis.renderFill('highlight', this.spanToSegs(span));\n\t},\n\n\n\t// Unrenders the emphasis on a date range\n\tunrenderHighlight: function() {\n\t\tthis.unrenderFill('highlight');\n\t},\n\n\n\t// Generates an array of classNames for rendering the highlight. Used by the fill system.\n\thighlightSegClasses: function() {\n\t\treturn [ 'fc-highlight' ];\n\t},\n\n\n\t/* Business Hours\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\trenderBusinessHours: function() {\n\t},\n\n\n\tunrenderBusinessHours: function() {\n\t},\n\n\n\t/* Now Indicator\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\tgetNowIndicatorUnit: function() {\n\t},\n\n\n\trenderNowIndicator: function(date) {\n\t},\n\n\n\tunrenderNowIndicator: function() {\n\t},\n\n\n\t/* Fill System (highlight, background events, business hours)\n\t--------------------------------------------------------------------------------------------------------------------\n\tTODO: remove this system. like we did in TimeGrid\n\t*/\n\n\n\t// Renders a set of rectangles over the given segments of time.\n\t// MUST RETURN a subset of segs, the segs that were actually rendered.\n\t// Responsible for populating this.elsByFill. TODO: better API for expressing this requirement\n\trenderFill: function(type, segs) {\n\t\t// subclasses must implement\n\t},\n\n\n\t// Unrenders a specific type of fill that is currently rendered on the grid\n\tunrenderFill: function(type) {\n\t\tvar el = this.elsByFill[type];\n\n\t\tif (el) {\n\t\t\tel.remove();\n\t\t\tdelete this.elsByFill[type];\n\t\t}\n\t},\n\n\n\t// Renders and assigns an `el` property for each fill segment. Generic enough to work with different types.\n\t// Only returns segments that successfully rendered.\n\t// To be harnessed by renderFill (implemented by subclasses).\n\t// Analagous to renderFgSegEls.\n\trenderFillSegEls: function(type, segs) {\n\t\tvar _this = this;\n\t\tvar segElMethod = this[type + 'SegEl'];\n\t\tvar html = '';\n\t\tvar renderedSegs = [];\n\t\tvar i;\n\n\t\tif (segs.length) {\n\n\t\t\t// build a large concatenation of segment HTML\n\t\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\t\thtml += this.fillSegHtml(type, segs[i]);\n\t\t\t}\n\n\t\t\t// Grab individual elements from the combined HTML string. Use each as the default rendering.\n\t\t\t// Then, compute the 'el' for each segment.\n\t\t\t$(html).each(function(i, node) {\n\t\t\t\tvar seg = segs[i];\n\t\t\t\tvar el = $(node);\n\n\t\t\t\t// allow custom filter methods per-type\n\t\t\t\tif (segElMethod) {\n\t\t\t\t\tel = segElMethod.call(_this, seg, el);\n\t\t\t\t}\n\n\t\t\t\tif (el) { // custom filters did not cancel the render\n\t\t\t\t\tel = $(el); // allow custom filter to return raw DOM node\n\n\t\t\t\t\t// correct element type? (would be bad if a non-TD were inserted into a table for example)\n\t\t\t\t\tif (el.is(_this.fillSegTag)) {\n\t\t\t\t\t\tseg.el = el;\n\t\t\t\t\t\trenderedSegs.push(seg);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn renderedSegs;\n\t},\n\n\n\tfillSegTag: 'div', // subclasses can override\n\n\n\t// Builds the HTML needed for one fill segment. Generic enough to work with different types.\n\tfillSegHtml: function(type, seg) {\n\n\t\t// custom hooks per-type\n\t\tvar classesMethod = this[type + 'SegClasses'];\n\t\tvar cssMethod = this[type + 'SegCss'];\n\n\t\tvar classes = classesMethod ? classesMethod.call(this, seg) : [];\n\t\tvar css = cssToStr(cssMethod ? cssMethod.call(this, seg) : {});\n\n\t\treturn '<' + this.fillSegTag +\n\t\t\t(classes.length ? ' class=\"' + classes.join(' ') + '\"' : '') +\n\t\t\t(css ? ' style=\"' + css + '\"' : '') +\n\t\t\t' />';\n\t},\n\n\n\n\t/* Generic rendering utilities for subclasses\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Computes HTML classNames for a single-day element\n\tgetDayClasses: function(date, noThemeHighlight) {\n\t\tvar view = this.view;\n\t\tvar today = view.calendar.getNow();\n\t\tvar classes = [ 'fc-' + dayIDs[date.day()] ];\n\n\t\tif (\n\t\t\tview.intervalDuration.as('months') == 1 &&\n\t\t\tdate.month() != view.intervalStart.month()\n\t\t) {\n\t\t\tclasses.push('fc-other-month');\n\t\t}\n\n\t\tif (date.isSame(today, 'day')) {\n\t\t\tclasses.push('fc-today');\n\n\t\t\tif (noThemeHighlight !== true) {\n\t\t\t\tclasses.push(view.highlightStateClass);\n\t\t\t}\n\t\t}\n\t\telse if (date < today) {\n\t\t\tclasses.push('fc-past');\n\t\t}\n\t\telse {\n\t\t\tclasses.push('fc-future');\n\t\t}\n\n\t\treturn classes;\n\t}\n\n});\n\n;;\n\n/* Event-rendering and event-interaction methods for the abstract Grid class\n----------------------------------------------------------------------------------------------------------------------*/\n\nGrid.mixin({\n\n\t// self-config, overridable by subclasses\n\tsegSelector: '.fc-event-container > *', // what constitutes an event element?\n\n\tmousedOverSeg: null, // the segment object the user's mouse is over. null if over nothing\n\tisDraggingSeg: false, // is a segment being dragged? boolean\n\tisResizingSeg: false, // is a segment being resized? boolean\n\tisDraggingExternal: false, // jqui-dragging an external element? boolean\n\tsegs: null, // the *event* segments currently rendered in the grid. TODO: rename to `eventSegs`\n\n\n\t// Renders the given events onto the grid\n\trenderEvents: function(events) {\n\t\tvar bgEvents = [];\n\t\tvar fgEvents = [];\n\t\tvar i;\n\n\t\tfor (i = 0; i < events.length; i++) {\n\t\t\t(isBgEvent(events[i]) ? bgEvents : fgEvents).push(events[i]);\n\t\t}\n\n\t\tthis.segs = [].concat( // record all segs\n\t\t\tthis.renderBgEvents(bgEvents),\n\t\t\tthis.renderFgEvents(fgEvents)\n\t\t);\n\t},\n\n\n\trenderBgEvents: function(events) {\n\t\tvar segs = this.eventsToSegs(events);\n\n\t\t// renderBgSegs might return a subset of segs, segs that were actually rendered\n\t\treturn this.renderBgSegs(segs) || segs;\n\t},\n\n\n\trenderFgEvents: function(events) {\n\t\tvar segs = this.eventsToSegs(events);\n\n\t\t// renderFgSegs might return a subset of segs, segs that were actually rendered\n\t\treturn this.renderFgSegs(segs) || segs;\n\t},\n\n\n\t// Unrenders all events currently rendered on the grid\n\tunrenderEvents: function() {\n\t\tthis.handleSegMouseout(); // trigger an eventMouseout if user's mouse is over an event\n\t\tthis.clearDragListeners();\n\n\t\tthis.unrenderFgSegs();\n\t\tthis.unrenderBgSegs();\n\n\t\tthis.segs = null;\n\t},\n\n\n\t// Retrieves all rendered segment objects currently rendered on the grid\n\tgetEventSegs: function() {\n\t\treturn this.segs || [];\n\t},\n\n\n\t/* Foreground Segment Rendering\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders foreground event segments onto the grid. May return a subset of segs that were rendered.\n\trenderFgSegs: function(segs) {\n\t\t// subclasses must implement\n\t},\n\n\n\t// Unrenders all currently rendered foreground segments\n\tunrenderFgSegs: function() {\n\t\t// subclasses must implement\n\t},\n\n\n\t// Renders and assigns an `el` property for each foreground event segment.\n\t// Only returns segments that successfully rendered.\n\t// A utility that subclasses may use.\n\trenderFgSegEls: function(segs, disableResizing) {\n\t\tvar view = this.view;\n\t\tvar html = '';\n\t\tvar renderedSegs = [];\n\t\tvar i;\n\n\t\tif (segs.length) { // don't build an empty html string\n\n\t\t\t// build a large concatenation of event segment HTML\n\t\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\t\thtml += this.fgSegHtml(segs[i], disableResizing);\n\t\t\t}\n\n\t\t\t// Grab individual elements from the combined HTML string. Use each as the default rendering.\n\t\t\t// Then, compute the 'el' for each segment. An el might be null if the eventRender callback returned false.\n\t\t\t$(html).each(function(i, node) {\n\t\t\t\tvar seg = segs[i];\n\t\t\t\tvar el = view.resolveEventEl(seg.event, $(node));\n\n\t\t\t\tif (el) {\n\t\t\t\t\tel.data('fc-seg', seg); // used by handlers\n\t\t\t\t\tseg.el = el;\n\t\t\t\t\trenderedSegs.push(seg);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn renderedSegs;\n\t},\n\n\n\t// Generates the HTML for the default rendering of a foreground event segment. Used by renderFgSegEls()\n\tfgSegHtml: function(seg, disableResizing) {\n\t\t// subclasses should implement\n\t},\n\n\n\t/* Background Segment Rendering\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders the given background event segments onto the grid.\n\t// Returns a subset of the segs that were actually rendered.\n\trenderBgSegs: function(segs) {\n\t\treturn this.renderFill('bgEvent', segs);\n\t},\n\n\n\t// Unrenders all the currently rendered background event segments\n\tunrenderBgSegs: function() {\n\t\tthis.unrenderFill('bgEvent');\n\t},\n\n\n\t// Renders a background event element, given the default rendering. Called by the fill system.\n\tbgEventSegEl: function(seg, el) {\n\t\treturn this.view.resolveEventEl(seg.event, el); // will filter through eventRender\n\t},\n\n\n\t// Generates an array of classNames to be used for the default rendering of a background event.\n\t// Called by fillSegHtml.\n\tbgEventSegClasses: function(seg) {\n\t\tvar event = seg.event;\n\t\tvar source = event.source || {};\n\n\t\treturn [ 'fc-bgevent' ].concat(\n\t\t\tevent.className,\n\t\t\tsource.className || []\n\t\t);\n\t},\n\n\n\t// Generates a semicolon-separated CSS string to be used for the default rendering of a background event.\n\t// Called by fillSegHtml.\n\tbgEventSegCss: function(seg) {\n\t\treturn {\n\t\t\t'background-color': this.getSegSkinCss(seg)['background-color']\n\t\t};\n\t},\n\n\n\t// Generates an array of classNames to be used for the rendering business hours overlay. Called by the fill system.\n\t// Called by fillSegHtml.\n\tbusinessHoursSegClasses: function(seg) {\n\t\treturn [ 'fc-nonbusiness', 'fc-bgevent' ];\n\t},\n\n\n\t/* Business Hours\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Compute business hour segs for the grid's current date range.\n\t// Caller must ask if whole-day business hours are needed.\n\t// If no `businessHours` configuration value is specified, assumes the calendar default.\n\tbuildBusinessHourSegs: function(wholeDay, businessHours) {\n\t\treturn this.eventsToSegs(\n\t\t\tthis.buildBusinessHourEvents(wholeDay, businessHours)\n\t\t);\n\t},\n\n\n\t// Compute business hour *events* for the grid's current date range.\n\t// Caller must ask if whole-day business hours are needed.\n\t// If no `businessHours` configuration value is specified, assumes the calendar default.\n\tbuildBusinessHourEvents: function(wholeDay, businessHours) {\n\t\tvar calendar = this.view.calendar;\n\t\tvar events;\n\n\t\tif (businessHours == null) {\n\t\t\t// fallback\n\t\t\t// access from calendawr. don't access from view. doesn't update with dynamic options.\n\t\t\tbusinessHours = calendar.options.businessHours;\n\t\t}\n\n\t\tevents = calendar.computeBusinessHourEvents(wholeDay, businessHours);\n\n\t\t// HACK. Eventually refactor business hours \"events\" system.\n\t\t// If no events are given, but businessHours is activated, this means the entire visible range should be\n\t\t// marked as *not* business-hours, via inverse-background rendering.\n\t\tif (!events.length && businessHours) {\n\t\t\tevents = [\n\t\t\t\t$.extend({}, BUSINESS_HOUR_EVENT_DEFAULTS, {\n\t\t\t\t\tstart: this.view.end, // guaranteed out-of-range\n\t\t\t\t\tend: this.view.end,   // \"\n\t\t\t\t\tdow: null\n\t\t\t\t})\n\t\t\t];\n\t\t}\n\n\t\treturn events;\n\t},\n\n\n\t/* Handlers\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Attaches event-element-related handlers for *all* rendered event segments of the view.\n\tbindSegHandlers: function() {\n\t\tthis.bindSegHandlersToEl(this.el);\n\t},\n\n\n\t// Attaches event-element-related handlers to an arbitrary container element. leverages bubbling.\n\tbindSegHandlersToEl: function(el) {\n\t\tthis.bindSegHandlerToEl(el, 'touchstart', this.handleSegTouchStart);\n\t\tthis.bindSegHandlerToEl(el, 'touchend', this.handleSegTouchEnd);\n\t\tthis.bindSegHandlerToEl(el, 'mouseenter', this.handleSegMouseover);\n\t\tthis.bindSegHandlerToEl(el, 'mouseleave', this.handleSegMouseout);\n\t\tthis.bindSegHandlerToEl(el, 'mousedown', this.handleSegMousedown);\n\t\tthis.bindSegHandlerToEl(el, 'click', this.handleSegClick);\n\t},\n\n\n\t// Executes a handler for any a user-interaction on a segment.\n\t// Handler gets called with (seg, ev), and with the `this` context of the Grid\n\tbindSegHandlerToEl: function(el, name, handler) {\n\t\tvar _this = this;\n\n\t\tel.on(name, this.segSelector, function(ev) {\n\t\t\tvar seg = $(this).data('fc-seg'); // grab segment data. put there by View::renderEvents\n\n\t\t\t// only call the handlers if there is not a drag/resize in progress\n\t\t\tif (seg && !_this.isDraggingSeg && !_this.isResizingSeg) {\n\t\t\t\treturn handler.call(_this, seg, ev); // context will be the Grid\n\t\t\t}\n\t\t});\n\t},\n\n\n\thandleSegClick: function(seg, ev) {\n\t\tvar res = this.view.publiclyTrigger('eventClick', seg.el[0], seg.event, ev); // can return `false` to cancel\n\t\tif (res === false) {\n\t\t\tev.preventDefault();\n\t\t}\n\t},\n\n\n\t// Updates internal state and triggers handlers for when an event element is moused over\n\thandleSegMouseover: function(seg, ev) {\n\t\tif (\n\t\t\t!this.isIgnoringMouse &&\n\t\t\t!this.mousedOverSeg\n\t\t) {\n\t\t\tthis.mousedOverSeg = seg;\n\t\t\tif (this.view.isEventResizable(seg.event)) {\n\t\t\t\tseg.el.addClass('fc-allow-mouse-resize');\n\t\t\t}\n\t\t\tthis.view.publiclyTrigger('eventMouseover', seg.el[0], seg.event, ev);\n\t\t}\n\t},\n\n\n\t// Updates internal state and triggers handlers for when an event element is moused out.\n\t// Can be given no arguments, in which case it will mouseout the segment that was previously moused over.\n\thandleSegMouseout: function(seg, ev) {\n\t\tev = ev || {}; // if given no args, make a mock mouse event\n\n\t\tif (this.mousedOverSeg) {\n\t\t\tseg = seg || this.mousedOverSeg; // if given no args, use the currently moused-over segment\n\t\t\tthis.mousedOverSeg = null;\n\t\t\tif (this.view.isEventResizable(seg.event)) {\n\t\t\t\tseg.el.removeClass('fc-allow-mouse-resize');\n\t\t\t}\n\t\t\tthis.view.publiclyTrigger('eventMouseout', seg.el[0], seg.event, ev);\n\t\t}\n\t},\n\n\n\thandleSegMousedown: function(seg, ev) {\n\t\tvar isResizing = this.startSegResize(seg, ev, { distance: 5 });\n\n\t\tif (!isResizing && this.view.isEventDraggable(seg.event)) {\n\t\t\tthis.buildSegDragListener(seg)\n\t\t\t\t.startInteraction(ev, {\n\t\t\t\t\tdistance: 5\n\t\t\t\t});\n\t\t}\n\t},\n\n\n\thandleSegTouchStart: function(seg, ev) {\n\t\tvar view = this.view;\n\t\tvar event = seg.event;\n\t\tvar isSelected = view.isEventSelected(event);\n\t\tvar isDraggable = view.isEventDraggable(event);\n\t\tvar isResizable = view.isEventResizable(event);\n\t\tvar isResizing = false;\n\t\tvar dragListener;\n\t\tvar eventLongPressDelay;\n\n\t\tif (isSelected && isResizable) {\n\t\t\t// only allow resizing of the event is selected\n\t\t\tisResizing = this.startSegResize(seg, ev);\n\t\t}\n\n\t\tif (!isResizing && (isDraggable || isResizable)) { // allowed to be selected?\n\n\t\t\teventLongPressDelay = view.opt('eventLongPressDelay');\n\t\t\tif (eventLongPressDelay == null) {\n\t\t\t\teventLongPressDelay = view.opt('longPressDelay'); // fallback\n\t\t\t}\n\n\t\t\tdragListener = isDraggable ?\n\t\t\t\tthis.buildSegDragListener(seg) :\n\t\t\t\tthis.buildSegSelectListener(seg); // seg isn't draggable, but still needs to be selected\n\n\t\t\tdragListener.startInteraction(ev, { // won't start if already started\n\t\t\t\tdelay: isSelected ? 0 : eventLongPressDelay // do delay if not already selected\n\t\t\t});\n\t\t}\n\n\t\t// a long tap simulates a mouseover. ignore this bogus mouseover.\n\t\tthis.tempIgnoreMouse();\n\t},\n\n\n\thandleSegTouchEnd: function(seg, ev) {\n\t\t// touchstart+touchend = click, which simulates a mouseover.\n\t\t// ignore this bogus mouseover.\n\t\tthis.tempIgnoreMouse();\n\t},\n\n\n\t// returns boolean whether resizing actually started or not.\n\t// assumes the seg allows resizing.\n\t// `dragOptions` are optional.\n\tstartSegResize: function(seg, ev, dragOptions) {\n\t\tif ($(ev.target).is('.fc-resizer')) {\n\t\t\tthis.buildSegResizeListener(seg, $(ev.target).is('.fc-start-resizer'))\n\t\t\t\t.startInteraction(ev, dragOptions);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\n\n\n\t/* Event Dragging\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Builds a listener that will track user-dragging on an event segment.\n\t// Generic enough to work with any type of Grid.\n\t// Has side effect of setting/unsetting `segDragListener`\n\tbuildSegDragListener: function(seg) {\n\t\tvar _this = this;\n\t\tvar view = this.view;\n\t\tvar calendar = view.calendar;\n\t\tvar el = seg.el;\n\t\tvar event = seg.event;\n\t\tvar isDragging;\n\t\tvar mouseFollower; // A clone of the original element that will move with the mouse\n\t\tvar dropLocation; // zoned event date properties\n\n\t\tif (this.segDragListener) {\n\t\t\treturn this.segDragListener;\n\t\t}\n\n\t\t// Tracks mouse movement over the *view's* coordinate map. Allows dragging and dropping between subcomponents\n\t\t// of the view.\n\t\tvar dragListener = this.segDragListener = new HitDragListener(view, {\n\t\t\tscroll: view.opt('dragScroll'),\n\t\t\tsubjectEl: el,\n\t\t\tsubjectCenter: true,\n\t\t\tinteractionStart: function(ev) {\n\t\t\t\tseg.component = _this; // for renderDrag\n\t\t\t\tisDragging = false;\n\t\t\t\tmouseFollower = new MouseFollower(seg.el, {\n\t\t\t\t\tadditionalClass: 'fc-dragging',\n\t\t\t\t\tparentEl: view.el,\n\t\t\t\t\topacity: dragListener.isTouch ? null : view.opt('dragOpacity'),\n\t\t\t\t\trevertDuration: view.opt('dragRevertDuration'),\n\t\t\t\t\tzIndex: 2 // one above the .fc-view\n\t\t\t\t});\n\t\t\t\tmouseFollower.hide(); // don't show until we know this is a real drag\n\t\t\t\tmouseFollower.start(ev);\n\t\t\t},\n\t\t\tdragStart: function(ev) {\n\t\t\t\tif (dragListener.isTouch && !view.isEventSelected(event)) {\n\t\t\t\t\t// if not previously selected, will fire after a delay. then, select the event\n\t\t\t\t\tview.selectEvent(event);\n\t\t\t\t}\n\t\t\t\tisDragging = true;\n\t\t\t\t_this.handleSegMouseout(seg, ev); // ensure a mouseout on the manipulated event has been reported\n\t\t\t\t_this.segDragStart(seg, ev);\n\t\t\t\tview.hideEvent(event); // hide all event segments. our mouseFollower will take over\n\t\t\t},\n\t\t\thitOver: function(hit, isOrig, origHit) {\n\t\t\t\tvar dragHelperEls;\n\n\t\t\t\t// starting hit could be forced (DayGrid.limit)\n\t\t\t\tif (seg.hit) {\n\t\t\t\t\torigHit = seg.hit;\n\t\t\t\t}\n\n\t\t\t\t// since we are querying the parent view, might not belong to this grid\n\t\t\t\tdropLocation = _this.computeEventDrop(\n\t\t\t\t\torigHit.component.getHitSpan(origHit),\n\t\t\t\t\thit.component.getHitSpan(hit),\n\t\t\t\t\tevent\n\t\t\t\t);\n\n\t\t\t\tif (dropLocation && !calendar.isEventSpanAllowed(_this.eventToSpan(dropLocation), event)) {\n\t\t\t\t\tdisableCursor();\n\t\t\t\t\tdropLocation = null;\n\t\t\t\t}\n\n\t\t\t\t// if a valid drop location, have the subclass render a visual indication\n\t\t\t\tif (dropLocation && (dragHelperEls = view.renderDrag(dropLocation, seg))) {\n\n\t\t\t\t\tdragHelperEls.addClass('fc-dragging');\n\t\t\t\t\tif (!dragListener.isTouch) {\n\t\t\t\t\t\t_this.applyDragOpacity(dragHelperEls);\n\t\t\t\t\t}\n\n\t\t\t\t\tmouseFollower.hide(); // if the subclass is already using a mock event \"helper\", hide our own\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tmouseFollower.show(); // otherwise, have the helper follow the mouse (no snapping)\n\t\t\t\t}\n\n\t\t\t\tif (isOrig) {\n\t\t\t\t\tdropLocation = null; // needs to have moved hits to be a valid drop\n\t\t\t\t}\n\t\t\t},\n\t\t\thitOut: function() { // called before mouse moves to a different hit OR moved out of all hits\n\t\t\t\tview.unrenderDrag(); // unrender whatever was done in renderDrag\n\t\t\t\tmouseFollower.show(); // show in case we are moving out of all hits\n\t\t\t\tdropLocation = null;\n\t\t\t},\n\t\t\thitDone: function() { // Called after a hitOut OR before a dragEnd\n\t\t\t\tenableCursor();\n\t\t\t},\n\t\t\tinteractionEnd: function(ev) {\n\t\t\t\tdelete seg.component; // prevent side effects\n\n\t\t\t\t// do revert animation if hasn't changed. calls a callback when finished (whether animation or not)\n\t\t\t\tmouseFollower.stop(!dropLocation, function() {\n\t\t\t\t\tif (isDragging) {\n\t\t\t\t\t\tview.unrenderDrag();\n\t\t\t\t\t\t_this.segDragStop(seg, ev);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (dropLocation) {\n\t\t\t\t\t\t// no need to re-show original, will rerender all anyways. esp important if eventRenderWait\n\t\t\t\t\t\tview.reportEventDrop(event, dropLocation, _this.largeUnit, el, ev);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tview.showEvent(event);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t_this.segDragListener = null;\n\t\t\t}\n\t\t});\n\n\t\treturn dragListener;\n\t},\n\n\n\t// seg isn't draggable, but let's use a generic DragListener\n\t// simply for the delay, so it can be selected.\n\t// Has side effect of setting/unsetting `segDragListener`\n\tbuildSegSelectListener: function(seg) {\n\t\tvar _this = this;\n\t\tvar view = this.view;\n\t\tvar event = seg.event;\n\n\t\tif (this.segDragListener) {\n\t\t\treturn this.segDragListener;\n\t\t}\n\n\t\tvar dragListener = this.segDragListener = new DragListener({\n\t\t\tdragStart: function(ev) {\n\t\t\t\tif (dragListener.isTouch && !view.isEventSelected(event)) {\n\t\t\t\t\t// if not previously selected, will fire after a delay. then, select the event\n\t\t\t\t\tview.selectEvent(event);\n\t\t\t\t}\n\t\t\t},\n\t\t\tinteractionEnd: function(ev) {\n\t\t\t\t_this.segDragListener = null;\n\t\t\t}\n\t\t});\n\n\t\treturn dragListener;\n\t},\n\n\n\t// Called before event segment dragging starts\n\tsegDragStart: function(seg, ev) {\n\t\tthis.isDraggingSeg = true;\n\t\tthis.view.publiclyTrigger('eventDragStart', seg.el[0], seg.event, ev, {}); // last argument is jqui dummy\n\t},\n\n\n\t// Called after event segment dragging stops\n\tsegDragStop: function(seg, ev) {\n\t\tthis.isDraggingSeg = false;\n\t\tthis.view.publiclyTrigger('eventDragStop', seg.el[0], seg.event, ev, {}); // last argument is jqui dummy\n\t},\n\n\n\t// Given the spans an event drag began, and the span event was dropped, calculates the new zoned start/end/allDay\n\t// values for the event. Subclasses may override and set additional properties to be used by renderDrag.\n\t// A falsy returned value indicates an invalid drop.\n\t// DOES NOT consider overlap/constraint.\n\tcomputeEventDrop: function(startSpan, endSpan, event) {\n\t\tvar calendar = this.view.calendar;\n\t\tvar dragStart = startSpan.start;\n\t\tvar dragEnd = endSpan.start;\n\t\tvar delta;\n\t\tvar dropLocation; // zoned event date properties\n\n\t\tif (dragStart.hasTime() === dragEnd.hasTime()) {\n\t\t\tdelta = this.diffDates(dragEnd, dragStart);\n\n\t\t\t// if an all-day event was in a timed area and it was dragged to a different time,\n\t\t\t// guarantee an end and adjust start/end to have times\n\t\t\tif (event.allDay && durationHasTime(delta)) {\n\t\t\t\tdropLocation = {\n\t\t\t\t\tstart: event.start.clone(),\n\t\t\t\t\tend: calendar.getEventEnd(event), // will be an ambig day\n\t\t\t\t\tallDay: false // for normalizeEventTimes\n\t\t\t\t};\n\t\t\t\tcalendar.normalizeEventTimes(dropLocation);\n\t\t\t}\n\t\t\t// othewise, work off existing values\n\t\t\telse {\n\t\t\t\tdropLocation = pluckEventDateProps(event);\n\t\t\t}\n\n\t\t\tdropLocation.start.add(delta);\n\t\t\tif (dropLocation.end) {\n\t\t\t\tdropLocation.end.add(delta);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// if switching from day <-> timed, start should be reset to the dropped date, and the end cleared\n\t\t\tdropLocation = {\n\t\t\t\tstart: dragEnd.clone(),\n\t\t\t\tend: null, // end should be cleared\n\t\t\t\tallDay: !dragEnd.hasTime()\n\t\t\t};\n\t\t}\n\n\t\treturn dropLocation;\n\t},\n\n\n\t// Utility for apply dragOpacity to a jQuery set\n\tapplyDragOpacity: function(els) {\n\t\tvar opacity = this.view.opt('dragOpacity');\n\n\t\tif (opacity != null) {\n\t\t\tels.css('opacity', opacity);\n\t\t}\n\t},\n\n\n\t/* External Element Dragging\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Called when a jQuery UI drag is initiated anywhere in the DOM\n\texternalDragStart: function(ev, ui) {\n\t\tvar view = this.view;\n\t\tvar el;\n\t\tvar accept;\n\n\t\tif (view.opt('droppable')) { // only listen if this setting is on\n\t\t\tel = $((ui ? ui.item : null) || ev.target);\n\n\t\t\t// Test that the dragged element passes the dropAccept selector or filter function.\n\t\t\t// FYI, the default is \"*\" (matches all)\n\t\t\taccept = view.opt('dropAccept');\n\t\t\tif ($.isFunction(accept) ? accept.call(el[0], el) : el.is(accept)) {\n\t\t\t\tif (!this.isDraggingExternal) { // prevent double-listening if fired twice\n\t\t\t\t\tthis.listenToExternalDrag(el, ev, ui);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Called when a jQuery UI drag starts and it needs to be monitored for dropping\n\tlistenToExternalDrag: function(el, ev, ui) {\n\t\tvar _this = this;\n\t\tvar calendar = this.view.calendar;\n\t\tvar meta = getDraggedElMeta(el); // extra data about event drop, including possible event to create\n\t\tvar dropLocation; // a null value signals an unsuccessful drag\n\n\t\t// listener that tracks mouse movement over date-associated pixel regions\n\t\tvar dragListener = _this.externalDragListener = new HitDragListener(this, {\n\t\t\tinteractionStart: function() {\n\t\t\t\t_this.isDraggingExternal = true;\n\t\t\t},\n\t\t\thitOver: function(hit) {\n\t\t\t\tdropLocation = _this.computeExternalDrop(\n\t\t\t\t\thit.component.getHitSpan(hit), // since we are querying the parent view, might not belong to this grid\n\t\t\t\t\tmeta\n\t\t\t\t);\n\n\t\t\t\tif ( // invalid hit?\n\t\t\t\t\tdropLocation &&\n\t\t\t\t\t!calendar.isExternalSpanAllowed(_this.eventToSpan(dropLocation), dropLocation, meta.eventProps)\n\t\t\t\t) {\n\t\t\t\t\tdisableCursor();\n\t\t\t\t\tdropLocation = null;\n\t\t\t\t}\n\n\t\t\t\tif (dropLocation) {\n\t\t\t\t\t_this.renderDrag(dropLocation); // called without a seg parameter\n\t\t\t\t}\n\t\t\t},\n\t\t\thitOut: function() {\n\t\t\t\tdropLocation = null; // signal unsuccessful\n\t\t\t},\n\t\t\thitDone: function() { // Called after a hitOut OR before a dragEnd\n\t\t\t\tenableCursor();\n\t\t\t\t_this.unrenderDrag();\n\t\t\t},\n\t\t\tinteractionEnd: function(ev) {\n\t\t\t\tif (dropLocation) { // element was dropped on a valid hit\n\t\t\t\t\t_this.view.reportExternalDrop(meta, dropLocation, el, ev, ui);\n\t\t\t\t}\n\t\t\t\t_this.isDraggingExternal = false;\n\t\t\t\t_this.externalDragListener = null;\n\t\t\t}\n\t\t});\n\n\t\tdragListener.startDrag(ev); // start listening immediately\n\t},\n\n\n\t// Given a hit to be dropped upon, and misc data associated with the jqui drag (guaranteed to be a plain object),\n\t// returns the zoned start/end dates for the event that would result from the hypothetical drop. end might be null.\n\t// Returning a null value signals an invalid drop hit.\n\t// DOES NOT consider overlap/constraint.\n\tcomputeExternalDrop: function(span, meta) {\n\t\tvar calendar = this.view.calendar;\n\t\tvar dropLocation = {\n\t\t\tstart: calendar.applyTimezone(span.start), // simulate a zoned event start date\n\t\t\tend: null\n\t\t};\n\n\t\t// if dropped on an all-day span, and element's metadata specified a time, set it\n\t\tif (meta.startTime && !dropLocation.start.hasTime()) {\n\t\t\tdropLocation.start.time(meta.startTime);\n\t\t}\n\n\t\tif (meta.duration) {\n\t\t\tdropLocation.end = dropLocation.start.clone().add(meta.duration);\n\t\t}\n\n\t\treturn dropLocation;\n\t},\n\n\n\n\t/* Drag Rendering (for both events and an external elements)\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders a visual indication of an event or external element being dragged.\n\t// `dropLocation` contains hypothetical start/end/allDay values the event would have if dropped. end can be null.\n\t// `seg` is the internal segment object that is being dragged. If dragging an external element, `seg` is null.\n\t// A truthy returned value indicates this method has rendered a helper element.\n\t// Must return elements used for any mock events.\n\trenderDrag: function(dropLocation, seg) {\n\t\t// subclasses must implement\n\t},\n\n\n\t// Unrenders a visual indication of an event or external element being dragged\n\tunrenderDrag: function() {\n\t\t// subclasses must implement\n\t},\n\n\n\t/* Resizing\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Creates a listener that tracks the user as they resize an event segment.\n\t// Generic enough to work with any type of Grid.\n\tbuildSegResizeListener: function(seg, isStart) {\n\t\tvar _this = this;\n\t\tvar view = this.view;\n\t\tvar calendar = view.calendar;\n\t\tvar el = seg.el;\n\t\tvar event = seg.event;\n\t\tvar eventEnd = calendar.getEventEnd(event);\n\t\tvar isDragging;\n\t\tvar resizeLocation; // zoned event date properties. falsy if invalid resize\n\n\t\t// Tracks mouse movement over the *grid's* coordinate map\n\t\tvar dragListener = this.segResizeListener = new HitDragListener(this, {\n\t\t\tscroll: view.opt('dragScroll'),\n\t\t\tsubjectEl: el,\n\t\t\tinteractionStart: function() {\n\t\t\t\tisDragging = false;\n\t\t\t},\n\t\t\tdragStart: function(ev) {\n\t\t\t\tisDragging = true;\n\t\t\t\t_this.handleSegMouseout(seg, ev); // ensure a mouseout on the manipulated event has been reported\n\t\t\t\t_this.segResizeStart(seg, ev);\n\t\t\t},\n\t\t\thitOver: function(hit, isOrig, origHit) {\n\t\t\t\tvar origHitSpan = _this.getHitSpan(origHit);\n\t\t\t\tvar hitSpan = _this.getHitSpan(hit);\n\n\t\t\t\tresizeLocation = isStart ?\n\t\t\t\t\t_this.computeEventStartResize(origHitSpan, hitSpan, event) :\n\t\t\t\t\t_this.computeEventEndResize(origHitSpan, hitSpan, event);\n\n\t\t\t\tif (resizeLocation) {\n\t\t\t\t\tif (!calendar.isEventSpanAllowed(_this.eventToSpan(resizeLocation), event)) {\n\t\t\t\t\t\tdisableCursor();\n\t\t\t\t\t\tresizeLocation = null;\n\t\t\t\t\t}\n\t\t\t\t\t// no change? (FYI, event dates might have zones)\n\t\t\t\t\telse if (\n\t\t\t\t\t\tresizeLocation.start.isSame(event.start.clone().stripZone()) &&\n\t\t\t\t\t\tresizeLocation.end.isSame(eventEnd.clone().stripZone())\n\t\t\t\t\t) {\n\t\t\t\t\t\tresizeLocation = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (resizeLocation) {\n\t\t\t\t\tview.hideEvent(event);\n\t\t\t\t\t_this.renderEventResize(resizeLocation, seg);\n\t\t\t\t}\n\t\t\t},\n\t\t\thitOut: function() { // called before mouse moves to a different hit OR moved out of all hits\n\t\t\t\tresizeLocation = null;\n\t\t\t\tview.showEvent(event); // for when out-of-bounds. show original\n\t\t\t},\n\t\t\thitDone: function() { // resets the rendering to show the original event\n\t\t\t\t_this.unrenderEventResize();\n\t\t\t\tenableCursor();\n\t\t\t},\n\t\t\tinteractionEnd: function(ev) {\n\t\t\t\tif (isDragging) {\n\t\t\t\t\t_this.segResizeStop(seg, ev);\n\t\t\t\t}\n\n\t\t\t\tif (resizeLocation) { // valid date to resize to?\n\t\t\t\t\t// no need to re-show original, will rerender all anyways. esp important if eventRenderWait\n\t\t\t\t\tview.reportEventResize(event, resizeLocation, _this.largeUnit, el, ev);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tview.showEvent(event);\n\t\t\t\t}\n\t\t\t\t_this.segResizeListener = null;\n\t\t\t}\n\t\t});\n\n\t\treturn dragListener;\n\t},\n\n\n\t// Called before event segment resizing starts\n\tsegResizeStart: function(seg, ev) {\n\t\tthis.isResizingSeg = true;\n\t\tthis.view.publiclyTrigger('eventResizeStart', seg.el[0], seg.event, ev, {}); // last argument is jqui dummy\n\t},\n\n\n\t// Called after event segment resizing stops\n\tsegResizeStop: function(seg, ev) {\n\t\tthis.isResizingSeg = false;\n\t\tthis.view.publiclyTrigger('eventResizeStop', seg.el[0], seg.event, ev, {}); // last argument is jqui dummy\n\t},\n\n\n\t// Returns new date-information for an event segment being resized from its start\n\tcomputeEventStartResize: function(startSpan, endSpan, event) {\n\t\treturn this.computeEventResize('start', startSpan, endSpan, event);\n\t},\n\n\n\t// Returns new date-information for an event segment being resized from its end\n\tcomputeEventEndResize: function(startSpan, endSpan, event) {\n\t\treturn this.computeEventResize('end', startSpan, endSpan, event);\n\t},\n\n\n\t// Returns new zoned date information for an event segment being resized from its start OR end\n\t// `type` is either 'start' or 'end'.\n\t// DOES NOT consider overlap/constraint.\n\tcomputeEventResize: function(type, startSpan, endSpan, event) {\n\t\tvar calendar = this.view.calendar;\n\t\tvar delta = this.diffDates(endSpan[type], startSpan[type]);\n\t\tvar resizeLocation; // zoned event date properties\n\t\tvar defaultDuration;\n\n\t\t// build original values to work from, guaranteeing a start and end\n\t\tresizeLocation = {\n\t\t\tstart: event.start.clone(),\n\t\t\tend: calendar.getEventEnd(event),\n\t\t\tallDay: event.allDay\n\t\t};\n\n\t\t// if an all-day event was in a timed area and was resized to a time, adjust start/end to have times\n\t\tif (resizeLocation.allDay && durationHasTime(delta)) {\n\t\t\tresizeLocation.allDay = false;\n\t\t\tcalendar.normalizeEventTimes(resizeLocation);\n\t\t}\n\n\t\tresizeLocation[type].add(delta); // apply delta to start or end\n\n\t\t// if the event was compressed too small, find a new reasonable duration for it\n\t\tif (!resizeLocation.start.isBefore(resizeLocation.end)) {\n\n\t\t\tdefaultDuration =\n\t\t\t\tthis.minResizeDuration || // TODO: hack\n\t\t\t\t(event.allDay ?\n\t\t\t\t\tcalendar.defaultAllDayEventDuration :\n\t\t\t\t\tcalendar.defaultTimedEventDuration);\n\n\t\t\tif (type == 'start') { // resizing the start?\n\t\t\t\tresizeLocation.start = resizeLocation.end.clone().subtract(defaultDuration);\n\t\t\t}\n\t\t\telse { // resizing the end?\n\t\t\t\tresizeLocation.end = resizeLocation.start.clone().add(defaultDuration);\n\t\t\t}\n\t\t}\n\n\t\treturn resizeLocation;\n\t},\n\n\n\t// Renders a visual indication of an event being resized.\n\t// `range` has the updated dates of the event. `seg` is the original segment object involved in the drag.\n\t// Must return elements used for any mock events.\n\trenderEventResize: function(range, seg) {\n\t\t// subclasses must implement\n\t},\n\n\n\t// Unrenders a visual indication of an event being resized.\n\tunrenderEventResize: function() {\n\t\t// subclasses must implement\n\t},\n\n\n\t/* Rendering Utils\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Compute the text that should be displayed on an event's element.\n\t// `range` can be the Event object itself, or something range-like, with at least a `start`.\n\t// If event times are disabled, or the event has no time, will return a blank string.\n\t// If not specified, formatStr will default to the eventTimeFormat setting,\n\t// and displayEnd will default to the displayEventEnd setting.\n\tgetEventTimeText: function(range, formatStr, displayEnd) {\n\n\t\tif (formatStr == null) {\n\t\t\tformatStr = this.eventTimeFormat;\n\t\t}\n\n\t\tif (displayEnd == null) {\n\t\t\tdisplayEnd = this.displayEventEnd;\n\t\t}\n\n\t\tif (this.displayEventTime && range.start.hasTime()) {\n\t\t\tif (displayEnd && range.end) {\n\t\t\t\treturn this.view.formatRange(range, formatStr);\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn range.start.format(formatStr);\n\t\t\t}\n\t\t}\n\n\t\treturn '';\n\t},\n\n\n\t// Generic utility for generating the HTML classNames for an event segment's element\n\tgetSegClasses: function(seg, isDraggable, isResizable) {\n\t\tvar view = this.view;\n\t\tvar classes = [\n\t\t\t'fc-event',\n\t\t\tseg.isStart ? 'fc-start' : 'fc-not-start',\n\t\t\tseg.isEnd ? 'fc-end' : 'fc-not-end'\n\t\t].concat(this.getSegCustomClasses(seg));\n\n\t\tif (isDraggable) {\n\t\t\tclasses.push('fc-draggable');\n\t\t}\n\t\tif (isResizable) {\n\t\t\tclasses.push('fc-resizable');\n\t\t}\n\n\t\t// event is currently selected? attach a className.\n\t\tif (view.isEventSelected(seg.event)) {\n\t\t\tclasses.push('fc-selected');\n\t\t}\n\n\t\treturn classes;\n\t},\n\n\n\t// List of classes that were defined by the caller of the API in some way\n\tgetSegCustomClasses: function(seg) {\n\t\tvar event = seg.event;\n\n\t\treturn [].concat(\n\t\t\tevent.className, // guaranteed to be an array\n\t\t\tevent.source ? event.source.className : []\n\t\t);\n\t},\n\n\n\t// Utility for generating event skin-related CSS properties\n\tgetSegSkinCss: function(seg) {\n\t\treturn {\n\t\t\t'background-color': this.getSegBackgroundColor(seg),\n\t\t\t'border-color': this.getSegBorderColor(seg),\n\t\t\tcolor: this.getSegTextColor(seg)\n\t\t};\n\t},\n\n\n\t// Queries for caller-specified color, then falls back to default\n\tgetSegBackgroundColor: function(seg) {\n\t\treturn seg.event.backgroundColor ||\n\t\t\tseg.event.color ||\n\t\t\tthis.getSegDefaultBackgroundColor(seg);\n\t},\n\n\n\tgetSegDefaultBackgroundColor: function(seg) {\n\t\tvar source = seg.event.source || {};\n\n\t\treturn source.backgroundColor ||\n\t\t\tsource.color ||\n\t\t\tthis.view.opt('eventBackgroundColor') ||\n\t\t\tthis.view.opt('eventColor');\n\t},\n\n\n\t// Queries for caller-specified color, then falls back to default\n\tgetSegBorderColor: function(seg) {\n\t\treturn seg.event.borderColor ||\n\t\t\tseg.event.color ||\n\t\t\tthis.getSegDefaultBorderColor(seg);\n\t},\n\n\n\tgetSegDefaultBorderColor: function(seg) {\n\t\tvar source = seg.event.source || {};\n\n\t\treturn source.borderColor ||\n\t\t\tsource.color ||\n\t\t\tthis.view.opt('eventBorderColor') ||\n\t\t\tthis.view.opt('eventColor');\n\t},\n\n\n\t// Queries for caller-specified color, then falls back to default\n\tgetSegTextColor: function(seg) {\n\t\treturn seg.event.textColor ||\n\t\t\tthis.getSegDefaultTextColor(seg);\n\t},\n\n\n\tgetSegDefaultTextColor: function(seg) {\n\t\tvar source = seg.event.source || {};\n\n\t\treturn source.textColor ||\n\t\t\tthis.view.opt('eventTextColor');\n\t},\n\n\n\t/* Converting events -> eventRange -> eventSpan -> eventSegs\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Generates an array of segments for the given single event\n\t// Can accept an event \"location\" as well (which only has start/end and no allDay)\n\teventToSegs: function(event) {\n\t\treturn this.eventsToSegs([ event ]);\n\t},\n\n\n\teventToSpan: function(event) {\n\t\treturn this.eventToSpans(event)[0];\n\t},\n\n\n\t// Generates spans (always unzoned) for the given event.\n\t// Does not do any inverting for inverse-background events.\n\t// Can accept an event \"location\" as well (which only has start/end and no allDay)\n\teventToSpans: function(event) {\n\t\tvar range = this.eventToRange(event);\n\t\treturn this.eventRangeToSpans(range, event);\n\t},\n\n\n\n\t// Converts an array of event objects into an array of event segment objects.\n\t// A custom `segSliceFunc` may be given for arbitrarily slicing up events.\n\t// Doesn't guarantee an order for the resulting array.\n\teventsToSegs: function(allEvents, segSliceFunc) {\n\t\tvar _this = this;\n\t\tvar eventsById = groupEventsById(allEvents);\n\t\tvar segs = [];\n\n\t\t$.each(eventsById, function(id, events) {\n\t\t\tvar ranges = [];\n\t\t\tvar i;\n\n\t\t\tfor (i = 0; i < events.length; i++) {\n\t\t\t\tranges.push(_this.eventToRange(events[i]));\n\t\t\t}\n\n\t\t\t// inverse-background events (utilize only the first event in calculations)\n\t\t\tif (isInverseBgEvent(events[0])) {\n\t\t\t\tranges = _this.invertRanges(ranges);\n\n\t\t\t\tfor (i = 0; i < ranges.length; i++) {\n\t\t\t\t\tsegs.push.apply(segs, // append to\n\t\t\t\t\t\t_this.eventRangeToSegs(ranges[i], events[0], segSliceFunc));\n\t\t\t\t}\n\t\t\t}\n\t\t\t// normal event ranges\n\t\t\telse {\n\t\t\t\tfor (i = 0; i < ranges.length; i++) {\n\t\t\t\t\tsegs.push.apply(segs, // append to\n\t\t\t\t\t\t_this.eventRangeToSegs(ranges[i], events[i], segSliceFunc));\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn segs;\n\t},\n\n\n\t// Generates the unzoned start/end dates an event appears to occupy\n\t// Can accept an event \"location\" as well (which only has start/end and no allDay)\n\teventToRange: function(event) {\n\t\tvar calendar = this.view.calendar;\n\t\tvar start = event.start.clone().stripZone();\n\t\tvar end = (\n\t\t\t\tevent.end ?\n\t\t\t\t\tevent.end.clone() :\n\t\t\t\t\t// derive the end from the start and allDay. compute allDay if necessary\n\t\t\t\t\tcalendar.getDefaultEventEnd(\n\t\t\t\t\t\tevent.allDay != null ?\n\t\t\t\t\t\t\tevent.allDay :\n\t\t\t\t\t\t\t!event.start.hasTime(),\n\t\t\t\t\t\tevent.start\n\t\t\t\t\t)\n\t\t\t).stripZone();\n\n\t\t// hack: dynamic locale change forgets to upate stored event localed\n\t\tcalendar.localizeMoment(start);\n\t\tcalendar.localizeMoment(end);\n\n\t\treturn { start: start, end: end };\n\t},\n\n\n\t// Given an event's range (unzoned start/end), and the event itself,\n\t// slice into segments (using the segSliceFunc function if specified)\n\teventRangeToSegs: function(range, event, segSliceFunc) {\n\t\tvar spans = this.eventRangeToSpans(range, event);\n\t\tvar segs = [];\n\t\tvar i;\n\n\t\tfor (i = 0; i < spans.length; i++) {\n\t\t\tsegs.push.apply(segs, // append to\n\t\t\t\tthis.eventSpanToSegs(spans[i], event, segSliceFunc));\n\t\t}\n\n\t\treturn segs;\n\t},\n\n\n\t// Given an event's unzoned date range, return an array of \"span\" objects.\n\t// Subclasses can override.\n\teventRangeToSpans: function(range, event) {\n\t\treturn [ $.extend({}, range) ]; // copy into a single-item array\n\t},\n\n\n\t// Given an event's span (unzoned start/end and other misc data), and the event itself,\n\t// slices into segments and attaches event-derived properties to them.\n\teventSpanToSegs: function(span, event, segSliceFunc) {\n\t\tvar segs = segSliceFunc ? segSliceFunc(span) : this.spanToSegs(span);\n\t\tvar i, seg;\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tseg = segs[i];\n\t\t\tseg.event = event;\n\t\t\tseg.eventStartMS = +span.start; // TODO: not the best name after making spans unzoned\n\t\t\tseg.eventDurationMS = span.end - span.start;\n\t\t}\n\n\t\treturn segs;\n\t},\n\n\n\t// Produces a new array of range objects that will cover all the time NOT covered by the given ranges.\n\t// SIDE EFFECT: will mutate the given array and will use its date references.\n\tinvertRanges: function(ranges) {\n\t\tvar view = this.view;\n\t\tvar viewStart = view.start.clone(); // need a copy\n\t\tvar viewEnd = view.end.clone(); // need a copy\n\t\tvar inverseRanges = [];\n\t\tvar start = viewStart; // the end of the previous range. the start of the new range\n\t\tvar i, range;\n\n\t\t// ranges need to be in order. required for our date-walking algorithm\n\t\tranges.sort(compareRanges);\n\n\t\tfor (i = 0; i < ranges.length; i++) {\n\t\t\trange = ranges[i];\n\n\t\t\t// add the span of time before the event (if there is any)\n\t\t\tif (range.start > start) { // compare millisecond time (skip any ambig logic)\n\t\t\t\tinverseRanges.push({\n\t\t\t\t\tstart: start,\n\t\t\t\t\tend: range.start\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tstart = range.end;\n\t\t}\n\n\t\t// add the span of time after the last event (if there is any)\n\t\tif (start < viewEnd) { // compare millisecond time (skip any ambig logic)\n\t\t\tinverseRanges.push({\n\t\t\t\tstart: start,\n\t\t\t\tend: viewEnd\n\t\t\t});\n\t\t}\n\n\t\treturn inverseRanges;\n\t},\n\n\n\tsortEventSegs: function(segs) {\n\t\tsegs.sort(proxy(this, 'compareEventSegs'));\n\t},\n\n\n\t// A cmp function for determining which segments should take visual priority\n\tcompareEventSegs: function(seg1, seg2) {\n\t\treturn seg1.eventStartMS - seg2.eventStartMS || // earlier events go first\n\t\t\tseg2.eventDurationMS - seg1.eventDurationMS || // tie? longer events go first\n\t\t\tseg2.event.allDay - seg1.event.allDay || // tie? put all-day events first (booleans cast to 0/1)\n\t\t\tcompareByFieldSpecs(seg1.event, seg2.event, this.view.eventOrderSpecs);\n\t}\n\n});\n\n\n/* Utilities\n----------------------------------------------------------------------------------------------------------------------*/\n\n\nfunction pluckEventDateProps(event) {\n\treturn {\n\t\tstart: event.start.clone(),\n\t\tend: event.end ? event.end.clone() : null,\n\t\tallDay: event.allDay // keep it the same\n\t};\n}\nFC.pluckEventDateProps = pluckEventDateProps;\n\n\nfunction isBgEvent(event) { // returns true if background OR inverse-background\n\tvar rendering = getEventRendering(event);\n\treturn rendering === 'background' || rendering === 'inverse-background';\n}\nFC.isBgEvent = isBgEvent; // export\n\n\nfunction isInverseBgEvent(event) {\n\treturn getEventRendering(event) === 'inverse-background';\n}\n\n\nfunction getEventRendering(event) {\n\treturn firstDefined((event.source || {}).rendering, event.rendering);\n}\n\n\nfunction groupEventsById(events) {\n\tvar eventsById = {};\n\tvar i, event;\n\n\tfor (i = 0; i < events.length; i++) {\n\t\tevent = events[i];\n\t\t(eventsById[event._id] || (eventsById[event._id] = [])).push(event);\n\t}\n\n\treturn eventsById;\n}\n\n\n// A cmp function for determining which non-inverted \"ranges\" (see above) happen earlier\nfunction compareRanges(range1, range2) {\n\treturn range1.start - range2.start; // earlier ranges go first\n}\n\n\n/* External-Dragging-Element Data\n----------------------------------------------------------------------------------------------------------------------*/\n\n// Require all HTML5 data-* attributes used by FullCalendar to have this prefix.\n// A value of '' will query attributes like data-event. A value of 'fc' will query attributes like data-fc-event.\nFC.dataAttrPrefix = '';\n\n// Given a jQuery element that might represent a dragged FullCalendar event, returns an intermediate data structure\n// to be used for Event Object creation.\n// A defined `.eventProps`, even when empty, indicates that an event should be created.\nfunction getDraggedElMeta(el) {\n\tvar prefix = FC.dataAttrPrefix;\n\tvar eventProps; // properties for creating the event, not related to date/time\n\tvar startTime; // a Duration\n\tvar duration;\n\tvar stick;\n\n\tif (prefix) { prefix += '-'; }\n\teventProps = el.data(prefix + 'event') || null;\n\n\tif (eventProps) {\n\t\tif (typeof eventProps === 'object') {\n\t\t\teventProps = $.extend({}, eventProps); // make a copy\n\t\t}\n\t\telse { // something like 1 or true. still signal event creation\n\t\t\teventProps = {};\n\t\t}\n\n\t\t// pluck special-cased date/time properties\n\t\tstartTime = eventProps.start;\n\t\tif (startTime == null) { startTime = eventProps.time; } // accept 'time' as well\n\t\tduration = eventProps.duration;\n\t\tstick = eventProps.stick;\n\t\tdelete eventProps.start;\n\t\tdelete eventProps.time;\n\t\tdelete eventProps.duration;\n\t\tdelete eventProps.stick;\n\t}\n\n\t// fallback to standalone attribute values for each of the date/time properties\n\tif (startTime == null) { startTime = el.data(prefix + 'start'); }\n\tif (startTime == null) { startTime = el.data(prefix + 'time'); } // accept 'time' as well\n\tif (duration == null) { duration = el.data(prefix + 'duration'); }\n\tif (stick == null) { stick = el.data(prefix + 'stick'); }\n\n\t// massage into correct data types\n\tstartTime = startTime != null ? moment.duration(startTime) : null;\n\tduration = duration != null ? moment.duration(duration) : null;\n\tstick = Boolean(stick);\n\n\treturn { eventProps: eventProps, startTime: startTime, duration: duration, stick: stick };\n}\n\n\n;;\n\n/*\nA set of rendering and date-related methods for a visual component comprised of one or more rows of day columns.\nPrerequisite: the object being mixed into needs to be a *Grid*\n*/\nvar DayTableMixin = FC.DayTableMixin = {\n\n\tbreakOnWeeks: false, // should create a new row for each week?\n\tdayDates: null, // whole-day dates for each column. left to right\n\tdayIndices: null, // for each day from start, the offset\n\tdaysPerRow: null,\n\trowCnt: null,\n\tcolCnt: null,\n\tcolHeadFormat: null,\n\n\n\t// Populates internal variables used for date calculation and rendering\n\tupdateDayTable: function() {\n\t\tvar view = this.view;\n\t\tvar date = this.start.clone();\n\t\tvar dayIndex = -1;\n\t\tvar dayIndices = [];\n\t\tvar dayDates = [];\n\t\tvar daysPerRow;\n\t\tvar firstDay;\n\t\tvar rowCnt;\n\n\t\twhile (date.isBefore(this.end)) { // loop each day from start to end\n\t\t\tif (view.isHiddenDay(date)) {\n\t\t\t\tdayIndices.push(dayIndex + 0.5); // mark that it's between indices\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdayIndex++;\n\t\t\t\tdayIndices.push(dayIndex);\n\t\t\t\tdayDates.push(date.clone());\n\t\t\t}\n\t\t\tdate.add(1, 'days');\n\t\t}\n\n\t\tif (this.breakOnWeeks) {\n\t\t\t// count columns until the day-of-week repeats\n\t\t\tfirstDay = dayDates[0].day();\n\t\t\tfor (daysPerRow = 1; daysPerRow < dayDates.length; daysPerRow++) {\n\t\t\t\tif (dayDates[daysPerRow].day() == firstDay) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\trowCnt = Math.ceil(dayDates.length / daysPerRow);\n\t\t}\n\t\telse {\n\t\t\trowCnt = 1;\n\t\t\tdaysPerRow = dayDates.length;\n\t\t}\n\n\t\tthis.dayDates = dayDates;\n\t\tthis.dayIndices = dayIndices;\n\t\tthis.daysPerRow = daysPerRow;\n\t\tthis.rowCnt = rowCnt;\n\n\t\tthis.updateDayTableCols();\n\t},\n\n\n\t// Computes and assigned the colCnt property and updates any options that may be computed from it\n\tupdateDayTableCols: function() {\n\t\tthis.colCnt = this.computeColCnt();\n\t\tthis.colHeadFormat = this.view.opt('columnFormat') || this.computeColHeadFormat();\n\t},\n\n\n\t// Determines how many columns there should be in the table\n\tcomputeColCnt: function() {\n\t\treturn this.daysPerRow;\n\t},\n\n\n\t// Computes the ambiguously-timed moment for the given cell\n\tgetCellDate: function(row, col) {\n\t\treturn this.dayDates[\n\t\t\t\tthis.getCellDayIndex(row, col)\n\t\t\t].clone();\n\t},\n\n\n\t// Computes the ambiguously-timed date range for the given cell\n\tgetCellRange: function(row, col) {\n\t\tvar start = this.getCellDate(row, col);\n\t\tvar end = start.clone().add(1, 'days');\n\n\t\treturn { start: start, end: end };\n\t},\n\n\n\t// Returns the number of day cells, chronologically, from the first of the grid (0-based)\n\tgetCellDayIndex: function(row, col) {\n\t\treturn row * this.daysPerRow + this.getColDayIndex(col);\n\t},\n\n\n\t// Returns the numner of day cells, chronologically, from the first cell in *any given row*\n\tgetColDayIndex: function(col) {\n\t\tif (this.isRTL) {\n\t\t\treturn this.colCnt - 1 - col;\n\t\t}\n\t\telse {\n\t\t\treturn col;\n\t\t}\n\t},\n\n\n\t// Given a date, returns its chronolocial cell-index from the first cell of the grid.\n\t// If the date lies between cells (because of hiddenDays), returns a floating-point value between offsets.\n\t// If before the first offset, returns a negative number.\n\t// If after the last offset, returns an offset past the last cell offset.\n\t// Only works for *start* dates of cells. Will not work for exclusive end dates for cells.\n\tgetDateDayIndex: function(date) {\n\t\tvar dayIndices = this.dayIndices;\n\t\tvar dayOffset = date.diff(this.start, 'days');\n\n\t\tif (dayOffset < 0) {\n\t\t\treturn dayIndices[0] - 1;\n\t\t}\n\t\telse if (dayOffset >= dayIndices.length) {\n\t\t\treturn dayIndices[dayIndices.length - 1] + 1;\n\t\t}\n\t\telse {\n\t\t\treturn dayIndices[dayOffset];\n\t\t}\n\t},\n\n\n\t/* Options\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Computes a default column header formatting string if `colFormat` is not explicitly defined\n\tcomputeColHeadFormat: function() {\n\t\t// if more than one week row, or if there are a lot of columns with not much space,\n\t\t// put just the day numbers will be in each cell\n\t\tif (this.rowCnt > 1 || this.colCnt > 10) {\n\t\t\treturn 'ddd'; // \"Sat\"\n\t\t}\n\t\t// multiple days, so full single date string WON'T be in title text\n\t\telse if (this.colCnt > 1) {\n\t\t\treturn this.view.opt('dayOfMonthFormat'); // \"Sat 12/10\"\n\t\t}\n\t\t// single day, so full single date string will probably be in title text\n\t\telse {\n\t\t\treturn 'dddd'; // \"Saturday\"\n\t\t}\n\t},\n\n\n\t/* Slicing\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Slices up a date range into a segment for every week-row it intersects with\n\tsliceRangeByRow: function(range) {\n\t\tvar daysPerRow = this.daysPerRow;\n\t\tvar normalRange = this.view.computeDayRange(range); // make whole-day range, considering nextDayThreshold\n\t\tvar rangeFirst = this.getDateDayIndex(normalRange.start); // inclusive first index\n\t\tvar rangeLast = this.getDateDayIndex(normalRange.end.clone().subtract(1, 'days')); // inclusive last index\n\t\tvar segs = [];\n\t\tvar row;\n\t\tvar rowFirst, rowLast; // inclusive day-index range for current row\n\t\tvar segFirst, segLast; // inclusive day-index range for segment\n\n\t\tfor (row = 0; row < this.rowCnt; row++) {\n\t\t\trowFirst = row * daysPerRow;\n\t\t\trowLast = rowFirst + daysPerRow - 1;\n\n\t\t\t// intersect segment's offset range with the row's\n\t\t\tsegFirst = Math.max(rangeFirst, rowFirst);\n\t\t\tsegLast = Math.min(rangeLast, rowLast);\n\n\t\t\t// deal with in-between indices\n\t\t\tsegFirst = Math.ceil(segFirst); // in-between starts round to next cell\n\t\t\tsegLast = Math.floor(segLast); // in-between ends round to prev cell\n\n\t\t\tif (segFirst <= segLast) { // was there any intersection with the current row?\n\t\t\t\tsegs.push({\n\t\t\t\t\trow: row,\n\n\t\t\t\t\t// normalize to start of row\n\t\t\t\t\tfirstRowDayIndex: segFirst - rowFirst,\n\t\t\t\t\tlastRowDayIndex: segLast - rowFirst,\n\n\t\t\t\t\t// must be matching integers to be the segment's start/end\n\t\t\t\t\tisStart: segFirst === rangeFirst,\n\t\t\t\t\tisEnd: segLast === rangeLast\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn segs;\n\t},\n\n\n\t// Slices up a date range into a segment for every day-cell it intersects with.\n\t// TODO: make more DRY with sliceRangeByRow somehow.\n\tsliceRangeByDay: function(range) {\n\t\tvar daysPerRow = this.daysPerRow;\n\t\tvar normalRange = this.view.computeDayRange(range); // make whole-day range, considering nextDayThreshold\n\t\tvar rangeFirst = this.getDateDayIndex(normalRange.start); // inclusive first index\n\t\tvar rangeLast = this.getDateDayIndex(normalRange.end.clone().subtract(1, 'days')); // inclusive last index\n\t\tvar segs = [];\n\t\tvar row;\n\t\tvar rowFirst, rowLast; // inclusive day-index range for current row\n\t\tvar i;\n\t\tvar segFirst, segLast; // inclusive day-index range for segment\n\n\t\tfor (row = 0; row < this.rowCnt; row++) {\n\t\t\trowFirst = row * daysPerRow;\n\t\t\trowLast = rowFirst + daysPerRow - 1;\n\n\t\t\tfor (i = rowFirst; i <= rowLast; i++) {\n\n\t\t\t\t// intersect segment's offset range with the row's\n\t\t\t\tsegFirst = Math.max(rangeFirst, i);\n\t\t\t\tsegLast = Math.min(rangeLast, i);\n\n\t\t\t\t// deal with in-between indices\n\t\t\t\tsegFirst = Math.ceil(segFirst); // in-between starts round to next cell\n\t\t\t\tsegLast = Math.floor(segLast); // in-between ends round to prev cell\n\n\t\t\t\tif (segFirst <= segLast) { // was there any intersection with the current row?\n\t\t\t\t\tsegs.push({\n\t\t\t\t\t\trow: row,\n\n\t\t\t\t\t\t// normalize to start of row\n\t\t\t\t\t\tfirstRowDayIndex: segFirst - rowFirst,\n\t\t\t\t\t\tlastRowDayIndex: segLast - rowFirst,\n\n\t\t\t\t\t\t// must be matching integers to be the segment's start/end\n\t\t\t\t\t\tisStart: segFirst === rangeFirst,\n\t\t\t\t\t\tisEnd: segLast === rangeLast\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn segs;\n\t},\n\n\n\t/* Header Rendering\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\trenderHeadHtml: function() {\n\t\tvar view = this.view;\n\n\t\treturn '' +\n\t\t\t'<div class=\"fc-row ' + view.widgetHeaderClass + '\">' +\n\t\t\t\t'<table>' +\n\t\t\t\t\t'<thead>' +\n\t\t\t\t\t\tthis.renderHeadTrHtml() +\n\t\t\t\t\t'</thead>' +\n\t\t\t\t'</table>' +\n\t\t\t'</div>';\n\t},\n\n\n\trenderHeadIntroHtml: function() {\n\t\treturn this.renderIntroHtml(); // fall back to generic\n\t},\n\n\n\trenderHeadTrHtml: function() {\n\t\treturn '' +\n\t\t\t'<tr>' +\n\t\t\t\t(this.isRTL ? '' : this.renderHeadIntroHtml()) +\n\t\t\t\tthis.renderHeadDateCellsHtml() +\n\t\t\t\t(this.isRTL ? this.renderHeadIntroHtml() : '') +\n\t\t\t'</tr>';\n\t},\n\n\n\trenderHeadDateCellsHtml: function() {\n\t\tvar htmls = [];\n\t\tvar col, date;\n\n\t\tfor (col = 0; col < this.colCnt; col++) {\n\t\t\tdate = this.getCellDate(0, col);\n\t\t\thtmls.push(this.renderHeadDateCellHtml(date));\n\t\t}\n\n\t\treturn htmls.join('');\n\t},\n\n\n\t// TODO: when internalApiVersion, accept an object for HTML attributes\n\t// (colspan should be no different)\n\trenderHeadDateCellHtml: function(date, colspan, otherAttrs) {\n\t\tvar view = this.view;\n\t\tvar classNames = [\n\t\t\t'fc-day-header',\n\t\t\tview.widgetHeaderClass\n\t\t];\n\n\t\t// if only one row of days, the classNames on the header can represent the specific days beneath\n\t\tif (this.rowCnt === 1) {\n\t\t\tclassNames = classNames.concat(\n\t\t\t\t// includes the day-of-week class\n\t\t\t\t// noThemeHighlight=true (don't highlight the header)\n\t\t\t\tthis.getDayClasses(date, true)\n\t\t\t);\n\t\t}\n\t\telse {\n\t\t\tclassNames.push('fc-' + dayIDs[date.day()]); // only add the day-of-week class\n\t\t}\n\n\t\treturn '' +\n            '<th class=\"' + classNames.join(' ') + '\"' +\n\t\t\t\t(this.rowCnt === 1 ?\n\t\t\t\t\t' data-date=\"' + date.format('YYYY-MM-DD') + '\"' :\n\t\t\t\t\t'') +\n\t\t\t\t(colspan > 1 ?\n\t\t\t\t\t' colspan=\"' + colspan + '\"' :\n\t\t\t\t\t'') +\n\t\t\t\t(otherAttrs ?\n\t\t\t\t\t' ' + otherAttrs :\n\t\t\t\t\t'') +\n\t\t\t\t'>' +\n\t\t\t\t// don't make a link if the heading could represent multiple days, or if there's only one day (forceOff)\n\t\t\t\tview.buildGotoAnchorHtml(\n\t\t\t\t\t{ date: date, forceOff: this.rowCnt > 1 || this.colCnt === 1 },\n\t\t\t\t\thtmlEscape(date.format(this.colHeadFormat)) // inner HTML\n\t\t\t\t) +\n\t\t\t'</th>';\n\t},\n\n\n\t/* Background Rendering\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\trenderBgTrHtml: function(row) {\n\t\treturn '' +\n\t\t\t'<tr>' +\n\t\t\t\t(this.isRTL ? '' : this.renderBgIntroHtml(row)) +\n\t\t\t\tthis.renderBgCellsHtml(row) +\n\t\t\t\t(this.isRTL ? this.renderBgIntroHtml(row) : '') +\n\t\t\t'</tr>';\n\t},\n\n\n\trenderBgIntroHtml: function(row) {\n\t\treturn this.renderIntroHtml(); // fall back to generic\n\t},\n\n\n\trenderBgCellsHtml: function(row) {\n\t\tvar htmls = [];\n\t\tvar col, date;\n\n\t\tfor (col = 0; col < this.colCnt; col++) {\n\t\t\tdate = this.getCellDate(row, col);\n\t\t\thtmls.push(this.renderBgCellHtml(date));\n\t\t}\n\n\t\treturn htmls.join('');\n\t},\n\n\n\trenderBgCellHtml: function(date, otherAttrs) {\n\t\tvar view = this.view;\n\t\tvar classes = this.getDayClasses(date);\n\n\t\tclasses.unshift('fc-day', view.widgetContentClass);\n\n\t\treturn '<td class=\"' + classes.join(' ') + '\"' +\n\t\t\t' data-date=\"' + date.format('YYYY-MM-DD') + '\"' + // if date has a time, won't format it\n\t\t\t(otherAttrs ?\n\t\t\t\t' ' + otherAttrs :\n\t\t\t\t'') +\n\t\t\t'></td>';\n\t},\n\n\n\t/* Generic\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Generates the default HTML intro for any row. User classes should override\n\trenderIntroHtml: function() {\n\t},\n\n\n\t// TODO: a generic method for dealing with <tr>, RTL, intro\n\t// when increment internalApiVersion\n\t// wrapTr (scheduler)\n\n\n\t/* Utils\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Applies the generic \"intro\" and \"outro\" HTML to the given cells.\n\t// Intro means the leftmost cell when the calendar is LTR and the rightmost cell when RTL. Vice-versa for outro.\n\tbookendCells: function(trEl) {\n\t\tvar introHtml = this.renderIntroHtml();\n\n\t\tif (introHtml) {\n\t\t\tif (this.isRTL) {\n\t\t\t\ttrEl.append(introHtml);\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttrEl.prepend(introHtml);\n\t\t\t}\n\t\t}\n\t}\n\n};\n\n;;\n\n/* A component that renders a grid of whole-days that runs horizontally. There can be multiple rows, one per week.\n----------------------------------------------------------------------------------------------------------------------*/\n\nvar DayGrid = FC.DayGrid = Grid.extend(DayTableMixin, {\n\n\tnumbersVisible: false, // should render a row for day/week numbers? set by outside view. TODO: make internal\n\tbottomCoordPadding: 0, // hack for extending the hit area for the last row of the coordinate grid\n\n\trowEls: null, // set of fake row elements\n\tcellEls: null, // set of whole-day elements comprising the row's background\n\thelperEls: null, // set of cell skeleton elements for rendering the mock event \"helper\"\n\n\trowCoordCache: null,\n\tcolCoordCache: null,\n\n\n\t// Renders the rows and columns into the component's `this.el`, which should already be assigned.\n\t// isRigid determins whether the individual rows should ignore the contents and be a constant height.\n\t// Relies on the view's colCnt and rowCnt. In the future, this component should probably be self-sufficient.\n\trenderDates: function(isRigid) {\n\t\tvar view = this.view;\n\t\tvar rowCnt = this.rowCnt;\n\t\tvar colCnt = this.colCnt;\n\t\tvar html = '';\n\t\tvar row;\n\t\tvar col;\n\n\t\tfor (row = 0; row < rowCnt; row++) {\n\t\t\thtml += this.renderDayRowHtml(row, isRigid);\n\t\t}\n\t\tthis.el.html(html);\n\n\t\tthis.rowEls = this.el.find('.fc-row');\n\t\tthis.cellEls = this.el.find('.fc-day');\n\n\t\tthis.rowCoordCache = new CoordCache({\n\t\t\tels: this.rowEls,\n\t\t\tisVertical: true\n\t\t});\n\t\tthis.colCoordCache = new CoordCache({\n\t\t\tels: this.cellEls.slice(0, this.colCnt), // only the first row\n\t\t\tisHorizontal: true\n\t\t});\n\n\t\t// trigger dayRender with each cell's element\n\t\tfor (row = 0; row < rowCnt; row++) {\n\t\t\tfor (col = 0; col < colCnt; col++) {\n\t\t\t\tview.publiclyTrigger(\n\t\t\t\t\t'dayRender',\n\t\t\t\t\tnull,\n\t\t\t\t\tthis.getCellDate(row, col),\n\t\t\t\t\tthis.getCellEl(row, col)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t},\n\n\n\tunrenderDates: function() {\n\t\tthis.removeSegPopover();\n\t},\n\n\n\trenderBusinessHours: function() {\n\t\tvar segs = this.buildBusinessHourSegs(true); // wholeDay=true\n\t\tthis.renderFill('businessHours', segs, 'bgevent');\n\t},\n\n\n\tunrenderBusinessHours: function() {\n\t\tthis.unrenderFill('businessHours');\n\t},\n\n\n\t// Generates the HTML for a single row, which is a div that wraps a table.\n\t// `row` is the row number.\n\trenderDayRowHtml: function(row, isRigid) {\n\t\tvar view = this.view;\n\t\tvar classes = [ 'fc-row', 'fc-week', view.widgetContentClass ];\n\n\t\tif (isRigid) {\n\t\t\tclasses.push('fc-rigid');\n\t\t}\n\n\t\treturn '' +\n\t\t\t'<div class=\"' + classes.join(' ') + '\">' +\n\t\t\t\t'<div class=\"fc-bg\">' +\n\t\t\t\t\t'<table>' +\n\t\t\t\t\t\tthis.renderBgTrHtml(row) +\n\t\t\t\t\t'</table>' +\n\t\t\t\t'</div>' +\n\t\t\t\t'<div class=\"fc-content-skeleton\">' +\n\t\t\t\t\t'<table>' +\n\t\t\t\t\t\t(this.numbersVisible ?\n\t\t\t\t\t\t\t'<thead>' +\n\t\t\t\t\t\t\t\tthis.renderNumberTrHtml(row) +\n\t\t\t\t\t\t\t'</thead>' :\n\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t) +\n\t\t\t\t\t'</table>' +\n\t\t\t\t'</div>' +\n\t\t\t'</div>';\n\t},\n\n\n\t/* Grid Number Rendering\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\trenderNumberTrHtml: function(row) {\n\t\treturn '' +\n\t\t\t'<tr>' +\n\t\t\t\t(this.isRTL ? '' : this.renderNumberIntroHtml(row)) +\n\t\t\t\tthis.renderNumberCellsHtml(row) +\n\t\t\t\t(this.isRTL ? this.renderNumberIntroHtml(row) : '') +\n\t\t\t'</tr>';\n\t},\n\n\n\trenderNumberIntroHtml: function(row) {\n\t\treturn this.renderIntroHtml();\n\t},\n\n\n\trenderNumberCellsHtml: function(row) {\n\t\tvar htmls = [];\n\t\tvar col, date;\n\n\t\tfor (col = 0; col < this.colCnt; col++) {\n\t\t\tdate = this.getCellDate(row, col);\n\t\t\thtmls.push(this.renderNumberCellHtml(date));\n\t\t}\n\n\t\treturn htmls.join('');\n\t},\n\n\n\t// Generates the HTML for the <td>s of the \"number\" row in the DayGrid's content skeleton.\n\t// The number row will only exist if either day numbers or week numbers are turned on.\n\trenderNumberCellHtml: function(date) {\n\t\tvar html = '';\n\t\tvar classes;\n\t\tvar weekCalcFirstDoW;\n\n\t\tif (!this.view.dayNumbersVisible && !this.view.cellWeekNumbersVisible) {\n\t\t\t// no numbers in day cell (week number must be along the side)\n\t\t\treturn '<td/>'; //  will create an empty space above events :(\n\t\t}\n\n\t\tclasses = this.getDayClasses(date);\n\t\tclasses.unshift('fc-day-top');\n\n\t\tif (this.view.cellWeekNumbersVisible) {\n\t\t\t// To determine the day of week number change under ISO, we cannot\n\t\t\t// rely on moment.js methods such as firstDayOfWeek() or weekday(),\n\t\t\t// because they rely on the locale's dow (possibly overridden by\n\t\t\t// our firstDay option), which may not be Monday. We cannot change\n\t\t\t// dow, because that would affect the calendar start day as well.\n\t\t\tif (date._locale._fullCalendar_weekCalc === 'ISO') {\n\t\t\t\tweekCalcFirstDoW = 1;  // Monday by ISO 8601 definition\n\t\t\t}\n\t\t\telse {\n\t\t\t\tweekCalcFirstDoW = date._locale.firstDayOfWeek();\n\t\t\t}\n\t\t}\n\n\t\thtml += '<td class=\"' + classes.join(' ') + '\" data-date=\"' + date.format() + '\">';\n\n\t\tif (this.view.cellWeekNumbersVisible && (date.day() == weekCalcFirstDoW)) {\n\t\t\thtml += this.view.buildGotoAnchorHtml(\n\t\t\t\t{ date: date, type: 'week' },\n\t\t\t\t{ 'class': 'fc-week-number' },\n\t\t\t\tdate.format('w') // inner HTML\n\t\t\t);\n\t\t}\n\n\t\tif (this.view.dayNumbersVisible) {\n\t\t\thtml += this.view.buildGotoAnchorHtml(\n\t\t\t\tdate,\n\t\t\t\t{ 'class': 'fc-day-number' },\n\t\t\t\tdate.date() // inner HTML\n\t\t\t);\n\t\t}\n\n\t\thtml += '</td>';\n\n\t\treturn html;\n\t},\n\n\n\t/* Options\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Computes a default event time formatting string if `timeFormat` is not explicitly defined\n\tcomputeEventTimeFormat: function() {\n\t\treturn this.view.opt('extraSmallTimeFormat'); // like \"6p\" or \"6:30p\"\n\t},\n\n\n\t// Computes a default `displayEventEnd` value if one is not expliclty defined\n\tcomputeDisplayEventEnd: function() {\n\t\treturn this.colCnt == 1; // we'll likely have space if there's only one day\n\t},\n\n\n\t/* Dates\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\trangeUpdated: function() {\n\t\tthis.updateDayTable();\n\t},\n\n\n\t// Slices up the given span (unzoned start/end with other misc data) into an array of segments\n\tspanToSegs: function(span) {\n\t\tvar segs = this.sliceRangeByRow(span);\n\t\tvar i, seg;\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tseg = segs[i];\n\t\t\tif (this.isRTL) {\n\t\t\t\tseg.leftCol = this.daysPerRow - 1 - seg.lastRowDayIndex;\n\t\t\t\tseg.rightCol = this.daysPerRow - 1 - seg.firstRowDayIndex;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tseg.leftCol = seg.firstRowDayIndex;\n\t\t\t\tseg.rightCol = seg.lastRowDayIndex;\n\t\t\t}\n\t\t}\n\n\t\treturn segs;\n\t},\n\n\n\t/* Hit System\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\tprepareHits: function() {\n\t\tthis.colCoordCache.build();\n\t\tthis.rowCoordCache.build();\n\t\tthis.rowCoordCache.bottoms[this.rowCnt - 1] += this.bottomCoordPadding; // hack\n\t},\n\n\n\treleaseHits: function() {\n\t\tthis.colCoordCache.clear();\n\t\tthis.rowCoordCache.clear();\n\t},\n\n\n\tqueryHit: function(leftOffset, topOffset) {\n\t\tif (this.colCoordCache.isLeftInBounds(leftOffset) && this.rowCoordCache.isTopInBounds(topOffset)) {\n\t\t\tvar col = this.colCoordCache.getHorizontalIndex(leftOffset);\n\t\t\tvar row = this.rowCoordCache.getVerticalIndex(topOffset);\n\n\t\t\tif (row != null && col != null) {\n\t\t\t\treturn this.getCellHit(row, col);\n\t\t\t}\n\t\t}\n\t},\n\n\n\tgetHitSpan: function(hit) {\n\t\treturn this.getCellRange(hit.row, hit.col);\n\t},\n\n\n\tgetHitEl: function(hit) {\n\t\treturn this.getCellEl(hit.row, hit.col);\n\t},\n\n\n\t/* Cell System\n\t------------------------------------------------------------------------------------------------------------------*/\n\t// FYI: the first column is the leftmost column, regardless of date\n\n\n\tgetCellHit: function(row, col) {\n\t\treturn {\n\t\t\trow: row,\n\t\t\tcol: col,\n\t\t\tcomponent: this, // needed unfortunately :(\n\t\t\tleft: this.colCoordCache.getLeftOffset(col),\n\t\t\tright: this.colCoordCache.getRightOffset(col),\n\t\t\ttop: this.rowCoordCache.getTopOffset(row),\n\t\t\tbottom: this.rowCoordCache.getBottomOffset(row)\n\t\t};\n\t},\n\n\n\tgetCellEl: function(row, col) {\n\t\treturn this.cellEls.eq(row * this.colCnt + col);\n\t},\n\n\n\t/* Event Drag Visualization\n\t------------------------------------------------------------------------------------------------------------------*/\n\t// TODO: move to DayGrid.event, similar to what we did with Grid's drag methods\n\n\n\t// Renders a visual indication of an event or external element being dragged.\n\t// `eventLocation` has zoned start and end (optional)\n\trenderDrag: function(eventLocation, seg) {\n\n\t\t// always render a highlight underneath\n\t\tthis.renderHighlight(this.eventToSpan(eventLocation));\n\n\t\t// if a segment from the same calendar but another component is being dragged, render a helper event\n\t\tif (seg && seg.component !== this) {\n\t\t\treturn this.renderEventLocationHelper(eventLocation, seg); // returns mock event elements\n\t\t}\n\t},\n\n\n\t// Unrenders any visual indication of a hovering event\n\tunrenderDrag: function() {\n\t\tthis.unrenderHighlight();\n\t\tthis.unrenderHelper();\n\t},\n\n\n\t/* Event Resize Visualization\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders a visual indication of an event being resized\n\trenderEventResize: function(eventLocation, seg) {\n\t\tthis.renderHighlight(this.eventToSpan(eventLocation));\n\t\treturn this.renderEventLocationHelper(eventLocation, seg); // returns mock event elements\n\t},\n\n\n\t// Unrenders a visual indication of an event being resized\n\tunrenderEventResize: function() {\n\t\tthis.unrenderHighlight();\n\t\tthis.unrenderHelper();\n\t},\n\n\n\t/* Event Helper\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders a mock \"helper\" event. `sourceSeg` is the associated internal segment object. It can be null.\n\trenderHelper: function(event, sourceSeg) {\n\t\tvar helperNodes = [];\n\t\tvar segs = this.eventToSegs(event);\n\t\tvar rowStructs;\n\n\t\tsegs = this.renderFgSegEls(segs); // assigns each seg's el and returns a subset of segs that were rendered\n\t\trowStructs = this.renderSegRows(segs);\n\n\t\t// inject each new event skeleton into each associated row\n\t\tthis.rowEls.each(function(row, rowNode) {\n\t\t\tvar rowEl = $(rowNode); // the .fc-row\n\t\t\tvar skeletonEl = $('<div class=\"fc-helper-skeleton\"><table/></div>'); // will be absolutely positioned\n\t\t\tvar skeletonTop;\n\n\t\t\t// If there is an original segment, match the top position. Otherwise, put it at the row's top level\n\t\t\tif (sourceSeg && sourceSeg.row === row) {\n\t\t\t\tskeletonTop = sourceSeg.el.position().top;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tskeletonTop = rowEl.find('.fc-content-skeleton tbody').position().top;\n\t\t\t}\n\n\t\t\tskeletonEl.css('top', skeletonTop)\n\t\t\t\t.find('table')\n\t\t\t\t\t.append(rowStructs[row].tbodyEl);\n\n\t\t\trowEl.append(skeletonEl);\n\t\t\thelperNodes.push(skeletonEl[0]);\n\t\t});\n\n\t\treturn ( // must return the elements rendered\n\t\t\tthis.helperEls = $(helperNodes) // array -> jQuery set\n\t\t);\n\t},\n\n\n\t// Unrenders any visual indication of a mock helper event\n\tunrenderHelper: function() {\n\t\tif (this.helperEls) {\n\t\t\tthis.helperEls.remove();\n\t\t\tthis.helperEls = null;\n\t\t}\n\t},\n\n\n\t/* Fill System (highlight, background events, business hours)\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\tfillSegTag: 'td', // override the default tag name\n\n\n\t// Renders a set of rectangles over the given segments of days.\n\t// Only returns segments that successfully rendered.\n\trenderFill: function(type, segs, className) {\n\t\tvar nodes = [];\n\t\tvar i, seg;\n\t\tvar skeletonEl;\n\n\t\tsegs = this.renderFillSegEls(type, segs); // assignes `.el` to each seg. returns successfully rendered segs\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tseg = segs[i];\n\t\t\tskeletonEl = this.renderFillRow(type, seg, className);\n\t\t\tthis.rowEls.eq(seg.row).append(skeletonEl);\n\t\t\tnodes.push(skeletonEl[0]);\n\t\t}\n\n\t\tthis.elsByFill[type] = $(nodes);\n\n\t\treturn segs;\n\t},\n\n\n\t// Generates the HTML needed for one row of a fill. Requires the seg's el to be rendered.\n\trenderFillRow: function(type, seg, className) {\n\t\tvar colCnt = this.colCnt;\n\t\tvar startCol = seg.leftCol;\n\t\tvar endCol = seg.rightCol + 1;\n\t\tvar skeletonEl;\n\t\tvar trEl;\n\n\t\tclassName = className || type.toLowerCase();\n\n\t\tskeletonEl = $(\n\t\t\t'<div class=\"fc-' + className + '-skeleton\">' +\n\t\t\t\t'<table><tr/></table>' +\n\t\t\t'</div>'\n\t\t);\n\t\ttrEl = skeletonEl.find('tr');\n\n\t\tif (startCol > 0) {\n\t\t\ttrEl.append('<td colspan=\"' + startCol + '\"/>');\n\t\t}\n\n\t\ttrEl.append(\n\t\t\tseg.el.attr('colspan', endCol - startCol)\n\t\t);\n\n\t\tif (endCol < colCnt) {\n\t\t\ttrEl.append('<td colspan=\"' + (colCnt - endCol) + '\"/>');\n\t\t}\n\n\t\tthis.bookendCells(trEl);\n\n\t\treturn skeletonEl;\n\t}\n\n});\n\n;;\n\n/* Event-rendering methods for the DayGrid class\n----------------------------------------------------------------------------------------------------------------------*/\n\nDayGrid.mixin({\n\n\trowStructs: null, // an array of objects, each holding information about a row's foreground event-rendering\n\n\n\t// Unrenders all events currently rendered on the grid\n\tunrenderEvents: function() {\n\t\tthis.removeSegPopover(); // removes the \"more..\" events popover\n\t\tGrid.prototype.unrenderEvents.apply(this, arguments); // calls the super-method\n\t},\n\n\n\t// Retrieves all rendered segment objects currently rendered on the grid\n\tgetEventSegs: function() {\n\t\treturn Grid.prototype.getEventSegs.call(this) // get the segments from the super-method\n\t\t\t.concat(this.popoverSegs || []); // append the segments from the \"more...\" popover\n\t},\n\n\n\t// Renders the given background event segments onto the grid\n\trenderBgSegs: function(segs) {\n\n\t\t// don't render timed background events\n\t\tvar allDaySegs = $.grep(segs, function(seg) {\n\t\t\treturn seg.event.allDay;\n\t\t});\n\n\t\treturn Grid.prototype.renderBgSegs.call(this, allDaySegs); // call the super-method\n\t},\n\n\n\t// Renders the given foreground event segments onto the grid\n\trenderFgSegs: function(segs) {\n\t\tvar rowStructs;\n\n\t\t// render an `.el` on each seg\n\t\t// returns a subset of the segs. segs that were actually rendered\n\t\tsegs = this.renderFgSegEls(segs);\n\n\t\trowStructs = this.rowStructs = this.renderSegRows(segs);\n\n\t\t// append to each row's content skeleton\n\t\tthis.rowEls.each(function(i, rowNode) {\n\t\t\t$(rowNode).find('.fc-content-skeleton > table').append(\n\t\t\t\trowStructs[i].tbodyEl\n\t\t\t);\n\t\t});\n\n\t\treturn segs; // return only the segs that were actually rendered\n\t},\n\n\n\t// Unrenders all currently rendered foreground event segments\n\tunrenderFgSegs: function() {\n\t\tvar rowStructs = this.rowStructs || [];\n\t\tvar rowStruct;\n\n\t\twhile ((rowStruct = rowStructs.pop())) {\n\t\t\trowStruct.tbodyEl.remove();\n\t\t}\n\n\t\tthis.rowStructs = null;\n\t},\n\n\n\t// Uses the given events array to generate <tbody> elements that should be appended to each row's content skeleton.\n\t// Returns an array of rowStruct objects (see the bottom of `renderSegRow`).\n\t// PRECONDITION: each segment shoud already have a rendered and assigned `.el`\n\trenderSegRows: function(segs) {\n\t\tvar rowStructs = [];\n\t\tvar segRows;\n\t\tvar row;\n\n\t\tsegRows = this.groupSegRows(segs); // group into nested arrays\n\n\t\t// iterate each row of segment groupings\n\t\tfor (row = 0; row < segRows.length; row++) {\n\t\t\trowStructs.push(\n\t\t\t\tthis.renderSegRow(row, segRows[row])\n\t\t\t);\n\t\t}\n\n\t\treturn rowStructs;\n\t},\n\n\n\t// Builds the HTML to be used for the default element for an individual segment\n\tfgSegHtml: function(seg, disableResizing) {\n\t\tvar view = this.view;\n\t\tvar event = seg.event;\n\t\tvar isDraggable = view.isEventDraggable(event);\n\t\tvar isResizableFromStart = !disableResizing && event.allDay &&\n\t\t\tseg.isStart && view.isEventResizableFromStart(event);\n\t\tvar isResizableFromEnd = !disableResizing && event.allDay &&\n\t\t\tseg.isEnd && view.isEventResizableFromEnd(event);\n\t\tvar classes = this.getSegClasses(seg, isDraggable, isResizableFromStart || isResizableFromEnd);\n\t\tvar skinCss = cssToStr(this.getSegSkinCss(seg));\n\t\tvar timeHtml = '';\n\t\tvar timeText;\n\t\tvar titleHtml;\n\n\t\tclasses.unshift('fc-day-grid-event', 'fc-h-event');\n\n\t\t// Only display a timed events time if it is the starting segment\n\t\tif (seg.isStart) {\n\t\t\ttimeText = this.getEventTimeText(event);\n\t\t\tif (timeText) {\n\t\t\t\ttimeHtml = '<span class=\"fc-time\">' + htmlEscape(timeText) + '</span>';\n\t\t\t}\n\t\t}\n\n\t\ttitleHtml =\n\t\t\t'<span class=\"fc-title\">' +\n\t\t\t\t(htmlEscape(event.title || '') || '&nbsp;') + // we always want one line of height\n\t\t\t'</span>';\n\n\t\treturn '<a class=\"' + classes.join(' ') + '\"' +\n\t\t\t\t(event.url ?\n\t\t\t\t\t' href=\"' + htmlEscape(event.url) + '\"' :\n\t\t\t\t\t''\n\t\t\t\t\t) +\n\t\t\t\t(skinCss ?\n\t\t\t\t\t' style=\"' + skinCss + '\"' :\n\t\t\t\t\t''\n\t\t\t\t\t) +\n\t\t\t'>' +\n\t\t\t\t'<div class=\"fc-content\">' +\n\t\t\t\t\t(this.isRTL ?\n\t\t\t\t\t\ttitleHtml + ' ' + timeHtml : // put a natural space in between\n\t\t\t\t\t\ttimeHtml + ' ' + titleHtml   //\n\t\t\t\t\t\t) +\n\t\t\t\t'</div>' +\n\t\t\t\t(isResizableFromStart ?\n\t\t\t\t\t'<div class=\"fc-resizer fc-start-resizer\" />' :\n\t\t\t\t\t''\n\t\t\t\t\t) +\n\t\t\t\t(isResizableFromEnd ?\n\t\t\t\t\t'<div class=\"fc-resizer fc-end-resizer\" />' :\n\t\t\t\t\t''\n\t\t\t\t\t) +\n\t\t\t'</a>';\n\t},\n\n\n\t// Given a row # and an array of segments all in the same row, render a <tbody> element, a skeleton that contains\n\t// the segments. Returns object with a bunch of internal data about how the render was calculated.\n\t// NOTE: modifies rowSegs\n\trenderSegRow: function(row, rowSegs) {\n\t\tvar colCnt = this.colCnt;\n\t\tvar segLevels = this.buildSegLevels(rowSegs); // group into sub-arrays of levels\n\t\tvar levelCnt = Math.max(1, segLevels.length); // ensure at least one level\n\t\tvar tbody = $('<tbody/>');\n\t\tvar segMatrix = []; // lookup for which segments are rendered into which level+col cells\n\t\tvar cellMatrix = []; // lookup for all <td> elements of the level+col matrix\n\t\tvar loneCellMatrix = []; // lookup for <td> elements that only take up a single column\n\t\tvar i, levelSegs;\n\t\tvar col;\n\t\tvar tr;\n\t\tvar j, seg;\n\t\tvar td;\n\n\t\t// populates empty cells from the current column (`col`) to `endCol`\n\t\tfunction emptyCellsUntil(endCol) {\n\t\t\twhile (col < endCol) {\n\t\t\t\t// try to grab a cell from the level above and extend its rowspan. otherwise, create a fresh cell\n\t\t\t\ttd = (loneCellMatrix[i - 1] || [])[col];\n\t\t\t\tif (td) {\n\t\t\t\t\ttd.attr(\n\t\t\t\t\t\t'rowspan',\n\t\t\t\t\t\tparseInt(td.attr('rowspan') || 1, 10) + 1\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ttd = $('<td/>');\n\t\t\t\t\ttr.append(td);\n\t\t\t\t}\n\t\t\t\tcellMatrix[i][col] = td;\n\t\t\t\tloneCellMatrix[i][col] = td;\n\t\t\t\tcol++;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < levelCnt; i++) { // iterate through all levels\n\t\t\tlevelSegs = segLevels[i];\n\t\t\tcol = 0;\n\t\t\ttr = $('<tr/>');\n\n\t\t\tsegMatrix.push([]);\n\t\t\tcellMatrix.push([]);\n\t\t\tloneCellMatrix.push([]);\n\n\t\t\t// levelCnt might be 1 even though there are no actual levels. protect against this.\n\t\t\t// this single empty row is useful for styling.\n\t\t\tif (levelSegs) {\n\t\t\t\tfor (j = 0; j < levelSegs.length; j++) { // iterate through segments in level\n\t\t\t\t\tseg = levelSegs[j];\n\n\t\t\t\t\temptyCellsUntil(seg.leftCol);\n\n\t\t\t\t\t// create a container that occupies or more columns. append the event element.\n\t\t\t\t\ttd = $('<td class=\"fc-event-container\"/>').append(seg.el);\n\t\t\t\t\tif (seg.leftCol != seg.rightCol) {\n\t\t\t\t\t\ttd.attr('colspan', seg.rightCol - seg.leftCol + 1);\n\t\t\t\t\t}\n\t\t\t\t\telse { // a single-column segment\n\t\t\t\t\t\tloneCellMatrix[i][col] = td;\n\t\t\t\t\t}\n\n\t\t\t\t\twhile (col <= seg.rightCol) {\n\t\t\t\t\t\tcellMatrix[i][col] = td;\n\t\t\t\t\t\tsegMatrix[i][col] = seg;\n\t\t\t\t\t\tcol++;\n\t\t\t\t\t}\n\n\t\t\t\t\ttr.append(td);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\temptyCellsUntil(colCnt); // finish off the row\n\t\t\tthis.bookendCells(tr);\n\t\t\ttbody.append(tr);\n\t\t}\n\n\t\treturn { // a \"rowStruct\"\n\t\t\trow: row, // the row number\n\t\t\ttbodyEl: tbody,\n\t\t\tcellMatrix: cellMatrix,\n\t\t\tsegMatrix: segMatrix,\n\t\t\tsegLevels: segLevels,\n\t\t\tsegs: rowSegs\n\t\t};\n\t},\n\n\n\t// Stacks a flat array of segments, which are all assumed to be in the same row, into subarrays of vertical levels.\n\t// NOTE: modifies segs\n\tbuildSegLevels: function(segs) {\n\t\tvar levels = [];\n\t\tvar i, seg;\n\t\tvar j;\n\n\t\t// Give preference to elements with certain criteria, so they have\n\t\t// a chance to be closer to the top.\n\t\tthis.sortEventSegs(segs);\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tseg = segs[i];\n\n\t\t\t// loop through levels, starting with the topmost, until the segment doesn't collide with other segments\n\t\t\tfor (j = 0; j < levels.length; j++) {\n\t\t\t\tif (!isDaySegCollision(seg, levels[j])) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// `j` now holds the desired subrow index\n\t\t\tseg.level = j;\n\n\t\t\t// create new level array if needed and append segment\n\t\t\t(levels[j] || (levels[j] = [])).push(seg);\n\t\t}\n\n\t\t// order segments left-to-right. very important if calendar is RTL\n\t\tfor (j = 0; j < levels.length; j++) {\n\t\t\tlevels[j].sort(compareDaySegCols);\n\t\t}\n\n\t\treturn levels;\n\t},\n\n\n\t// Given a flat array of segments, return an array of sub-arrays, grouped by each segment's row\n\tgroupSegRows: function(segs) {\n\t\tvar segRows = [];\n\t\tvar i;\n\n\t\tfor (i = 0; i < this.rowCnt; i++) {\n\t\t\tsegRows.push([]);\n\t\t}\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tsegRows[segs[i].row].push(segs[i]);\n\t\t}\n\n\t\treturn segRows;\n\t}\n\n});\n\n\n// Computes whether two segments' columns collide. They are assumed to be in the same row.\nfunction isDaySegCollision(seg, otherSegs) {\n\tvar i, otherSeg;\n\n\tfor (i = 0; i < otherSegs.length; i++) {\n\t\totherSeg = otherSegs[i];\n\n\t\tif (\n\t\t\totherSeg.leftCol <= seg.rightCol &&\n\t\t\totherSeg.rightCol >= seg.leftCol\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n}\n\n\n// A cmp function for determining the leftmost event\nfunction compareDaySegCols(a, b) {\n\treturn a.leftCol - b.leftCol;\n}\n\n;;\n\n/* Methods relate to limiting the number events for a given day on a DayGrid\n----------------------------------------------------------------------------------------------------------------------*/\n// NOTE: all the segs being passed around in here are foreground segs\n\nDayGrid.mixin({\n\n\tsegPopover: null, // the Popover that holds events that can't fit in a cell. null when not visible\n\tpopoverSegs: null, // an array of segment objects that the segPopover holds. null when not visible\n\n\n\tremoveSegPopover: function() {\n\t\tif (this.segPopover) {\n\t\t\tthis.segPopover.hide(); // in handler, will call segPopover's removeElement\n\t\t}\n\t},\n\n\n\t// Limits the number of \"levels\" (vertically stacking layers of events) for each row of the grid.\n\t// `levelLimit` can be false (don't limit), a number, or true (should be computed).\n\tlimitRows: function(levelLimit) {\n\t\tvar rowStructs = this.rowStructs || [];\n\t\tvar row; // row #\n\t\tvar rowLevelLimit;\n\n\t\tfor (row = 0; row < rowStructs.length; row++) {\n\t\t\tthis.unlimitRow(row);\n\n\t\t\tif (!levelLimit) {\n\t\t\t\trowLevelLimit = false;\n\t\t\t}\n\t\t\telse if (typeof levelLimit === 'number') {\n\t\t\t\trowLevelLimit = levelLimit;\n\t\t\t}\n\t\t\telse {\n\t\t\t\trowLevelLimit = this.computeRowLevelLimit(row);\n\t\t\t}\n\n\t\t\tif (rowLevelLimit !== false) {\n\t\t\t\tthis.limitRow(row, rowLevelLimit);\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Computes the number of levels a row will accomodate without going outside its bounds.\n\t// Assumes the row is \"rigid\" (maintains a constant height regardless of what is inside).\n\t// `row` is the row number.\n\tcomputeRowLevelLimit: function(row) {\n\t\tvar rowEl = this.rowEls.eq(row); // the containing \"fake\" row div\n\t\tvar rowHeight = rowEl.height(); // TODO: cache somehow?\n\t\tvar trEls = this.rowStructs[row].tbodyEl.children();\n\t\tvar i, trEl;\n\t\tvar trHeight;\n\n\t\tfunction iterInnerHeights(i, childNode) {\n\t\t\ttrHeight = Math.max(trHeight, $(childNode).outerHeight());\n\t\t}\n\n\t\t// Reveal one level <tr> at a time and stop when we find one out of bounds\n\t\tfor (i = 0; i < trEls.length; i++) {\n\t\t\ttrEl = trEls.eq(i).removeClass('fc-limited'); // reset to original state (reveal)\n\n\t\t\t// with rowspans>1 and IE8, trEl.outerHeight() would return the height of the largest cell,\n\t\t\t// so instead, find the tallest inner content element.\n\t\t\ttrHeight = 0;\n\t\t\ttrEl.find('> td > :first-child').each(iterInnerHeights);\n\n\t\t\tif (trEl.position().top + trHeight > rowHeight) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\n\t\treturn false; // should not limit at all\n\t},\n\n\n\t// Limits the given grid row to the maximum number of levels and injects \"more\" links if necessary.\n\t// `row` is the row number.\n\t// `levelLimit` is a number for the maximum (inclusive) number of levels allowed.\n\tlimitRow: function(row, levelLimit) {\n\t\tvar _this = this;\n\t\tvar rowStruct = this.rowStructs[row];\n\t\tvar moreNodes = []; // array of \"more\" <a> links and <td> DOM nodes\n\t\tvar col = 0; // col #, left-to-right (not chronologically)\n\t\tvar levelSegs; // array of segment objects in the last allowable level, ordered left-to-right\n\t\tvar cellMatrix; // a matrix (by level, then column) of all <td> jQuery elements in the row\n\t\tvar limitedNodes; // array of temporarily hidden level <tr> and segment <td> DOM nodes\n\t\tvar i, seg;\n\t\tvar segsBelow; // array of segment objects below `seg` in the current `col`\n\t\tvar totalSegsBelow; // total number of segments below `seg` in any of the columns `seg` occupies\n\t\tvar colSegsBelow; // array of segment arrays, below seg, one for each column (offset from segs's first column)\n\t\tvar td, rowspan;\n\t\tvar segMoreNodes; // array of \"more\" <td> cells that will stand-in for the current seg's cell\n\t\tvar j;\n\t\tvar moreTd, moreWrap, moreLink;\n\n\t\t// Iterates through empty level cells and places \"more\" links inside if need be\n\t\tfunction emptyCellsUntil(endCol) { // goes from current `col` to `endCol`\n\t\t\twhile (col < endCol) {\n\t\t\t\tsegsBelow = _this.getCellSegs(row, col, levelLimit);\n\t\t\t\tif (segsBelow.length) {\n\t\t\t\t\ttd = cellMatrix[levelLimit - 1][col];\n\t\t\t\t\tmoreLink = _this.renderMoreLink(row, col, segsBelow);\n\t\t\t\t\tmoreWrap = $('<div/>').append(moreLink);\n\t\t\t\t\ttd.append(moreWrap);\n\t\t\t\t\tmoreNodes.push(moreWrap[0]);\n\t\t\t\t}\n\t\t\t\tcol++;\n\t\t\t}\n\t\t}\n\n\t\tif (levelLimit && levelLimit < rowStruct.segLevels.length) { // is it actually over the limit?\n\t\t\tlevelSegs = rowStruct.segLevels[levelLimit - 1];\n\t\t\tcellMatrix = rowStruct.cellMatrix;\n\n\t\t\tlimitedNodes = rowStruct.tbodyEl.children().slice(levelLimit) // get level <tr> elements past the limit\n\t\t\t\t.addClass('fc-limited').get(); // hide elements and get a simple DOM-nodes array\n\n\t\t\t// iterate though segments in the last allowable level\n\t\t\tfor (i = 0; i < levelSegs.length; i++) {\n\t\t\t\tseg = levelSegs[i];\n\t\t\t\temptyCellsUntil(seg.leftCol); // process empty cells before the segment\n\n\t\t\t\t// determine *all* segments below `seg` that occupy the same columns\n\t\t\t\tcolSegsBelow = [];\n\t\t\t\ttotalSegsBelow = 0;\n\t\t\t\twhile (col <= seg.rightCol) {\n\t\t\t\t\tsegsBelow = this.getCellSegs(row, col, levelLimit);\n\t\t\t\t\tcolSegsBelow.push(segsBelow);\n\t\t\t\t\ttotalSegsBelow += segsBelow.length;\n\t\t\t\t\tcol++;\n\t\t\t\t}\n\n\t\t\t\tif (totalSegsBelow) { // do we need to replace this segment with one or many \"more\" links?\n\t\t\t\t\ttd = cellMatrix[levelLimit - 1][seg.leftCol]; // the segment's parent cell\n\t\t\t\t\trowspan = td.attr('rowspan') || 1;\n\t\t\t\t\tsegMoreNodes = [];\n\n\t\t\t\t\t// make a replacement <td> for each column the segment occupies. will be one for each colspan\n\t\t\t\t\tfor (j = 0; j < colSegsBelow.length; j++) {\n\t\t\t\t\t\tmoreTd = $('<td class=\"fc-more-cell\"/>').attr('rowspan', rowspan);\n\t\t\t\t\t\tsegsBelow = colSegsBelow[j];\n\t\t\t\t\t\tmoreLink = this.renderMoreLink(\n\t\t\t\t\t\t\trow,\n\t\t\t\t\t\t\tseg.leftCol + j,\n\t\t\t\t\t\t\t[ seg ].concat(segsBelow) // count seg as hidden too\n\t\t\t\t\t\t);\n\t\t\t\t\t\tmoreWrap = $('<div/>').append(moreLink);\n\t\t\t\t\t\tmoreTd.append(moreWrap);\n\t\t\t\t\t\tsegMoreNodes.push(moreTd[0]);\n\t\t\t\t\t\tmoreNodes.push(moreTd[0]);\n\t\t\t\t\t}\n\n\t\t\t\t\ttd.addClass('fc-limited').after($(segMoreNodes)); // hide original <td> and inject replacements\n\t\t\t\t\tlimitedNodes.push(td[0]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\temptyCellsUntil(this.colCnt); // finish off the level\n\t\t\trowStruct.moreEls = $(moreNodes); // for easy undoing later\n\t\t\trowStruct.limitedEls = $(limitedNodes); // for easy undoing later\n\t\t}\n\t},\n\n\n\t// Reveals all levels and removes all \"more\"-related elements for a grid's row.\n\t// `row` is a row number.\n\tunlimitRow: function(row) {\n\t\tvar rowStruct = this.rowStructs[row];\n\n\t\tif (rowStruct.moreEls) {\n\t\t\trowStruct.moreEls.remove();\n\t\t\trowStruct.moreEls = null;\n\t\t}\n\n\t\tif (rowStruct.limitedEls) {\n\t\t\trowStruct.limitedEls.removeClass('fc-limited');\n\t\t\trowStruct.limitedEls = null;\n\t\t}\n\t},\n\n\n\t// Renders an <a> element that represents hidden event element for a cell.\n\t// Responsible for attaching click handler as well.\n\trenderMoreLink: function(row, col, hiddenSegs) {\n\t\tvar _this = this;\n\t\tvar view = this.view;\n\n\t\treturn $('<a class=\"fc-more\"/>')\n\t\t\t.text(\n\t\t\t\tthis.getMoreLinkText(hiddenSegs.length)\n\t\t\t)\n\t\t\t.on('click', function(ev) {\n\t\t\t\tvar clickOption = view.opt('eventLimitClick');\n\t\t\t\tvar date = _this.getCellDate(row, col);\n\t\t\t\tvar moreEl = $(this);\n\t\t\t\tvar dayEl = _this.getCellEl(row, col);\n\t\t\t\tvar allSegs = _this.getCellSegs(row, col);\n\n\t\t\t\t// rescope the segments to be within the cell's date\n\t\t\t\tvar reslicedAllSegs = _this.resliceDaySegs(allSegs, date);\n\t\t\t\tvar reslicedHiddenSegs = _this.resliceDaySegs(hiddenSegs, date);\n\n\t\t\t\tif (typeof clickOption === 'function') {\n\t\t\t\t\t// the returned value can be an atomic option\n\t\t\t\t\tclickOption = view.publiclyTrigger('eventLimitClick', null, {\n\t\t\t\t\t\tdate: date,\n\t\t\t\t\t\tdayEl: dayEl,\n\t\t\t\t\t\tmoreEl: moreEl,\n\t\t\t\t\t\tsegs: reslicedAllSegs,\n\t\t\t\t\t\thiddenSegs: reslicedHiddenSegs\n\t\t\t\t\t}, ev);\n\t\t\t\t}\n\n\t\t\t\tif (clickOption === 'popover') {\n\t\t\t\t\t_this.showSegPopover(row, col, moreEl, reslicedAllSegs);\n\t\t\t\t}\n\t\t\t\telse if (typeof clickOption === 'string') { // a view name\n\t\t\t\t\tview.calendar.zoomTo(date, clickOption);\n\t\t\t\t}\n\t\t\t});\n\t},\n\n\n\t// Reveals the popover that displays all events within a cell\n\tshowSegPopover: function(row, col, moreLink, segs) {\n\t\tvar _this = this;\n\t\tvar view = this.view;\n\t\tvar moreWrap = moreLink.parent(); // the <div> wrapper around the <a>\n\t\tvar topEl; // the element we want to match the top coordinate of\n\t\tvar options;\n\n\t\tif (this.rowCnt == 1) {\n\t\t\ttopEl = view.el; // will cause the popover to cover any sort of header\n\t\t}\n\t\telse {\n\t\t\ttopEl = this.rowEls.eq(row); // will align with top of row\n\t\t}\n\n\t\toptions = {\n\t\t\tclassName: 'fc-more-popover',\n\t\t\tcontent: this.renderSegPopoverContent(row, col, segs),\n\t\t\tparentEl: this.view.el, // attach to root of view. guarantees outside of scrollbars.\n\t\t\ttop: topEl.offset().top,\n\t\t\tautoHide: true, // when the user clicks elsewhere, hide the popover\n\t\t\tviewportConstrain: view.opt('popoverViewportConstrain'),\n\t\t\thide: function() {\n\t\t\t\t// kill everything when the popover is hidden\n\t\t\t\t// notify events to be removed\n\t\t\t\tif (_this.popoverSegs) {\n\t\t\t\t\tvar seg;\n\t\t\t\t\tfor (var i = 0; i < _this.popoverSegs.length; ++i) {\n\t\t\t\t\t\tseg = _this.popoverSegs[i];\n\t\t\t\t\t\tview.publiclyTrigger('eventDestroy', seg.event, seg.event, seg.el);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t_this.segPopover.removeElement();\n\t\t\t\t_this.segPopover = null;\n\t\t\t\t_this.popoverSegs = null;\n\t\t\t}\n\t\t};\n\n\t\t// Determine horizontal coordinate.\n\t\t// We use the moreWrap instead of the <td> to avoid border confusion.\n\t\tif (this.isRTL) {\n\t\t\toptions.right = moreWrap.offset().left + moreWrap.outerWidth() + 1; // +1 to be over cell border\n\t\t}\n\t\telse {\n\t\t\toptions.left = moreWrap.offset().left - 1; // -1 to be over cell border\n\t\t}\n\n\t\tthis.segPopover = new Popover(options);\n\t\tthis.segPopover.show();\n\n\t\t// the popover doesn't live within the grid's container element, and thus won't get the event\n\t\t// delegated-handlers for free. attach event-related handlers to the popover.\n\t\tthis.bindSegHandlersToEl(this.segPopover.el);\n\t},\n\n\n\t// Builds the inner DOM contents of the segment popover\n\trenderSegPopoverContent: function(row, col, segs) {\n\t\tvar view = this.view;\n\t\tvar isTheme = view.opt('theme');\n\t\tvar title = this.getCellDate(row, col).format(view.opt('dayPopoverFormat'));\n\t\tvar content = $(\n\t\t\t'<div class=\"fc-header ' + view.widgetHeaderClass + '\">' +\n\t\t\t\t'<span class=\"fc-close ' +\n\t\t\t\t\t(isTheme ? 'ui-icon ui-icon-closethick' : 'fc-icon fc-icon-x') +\n\t\t\t\t'\"></span>' +\n\t\t\t\t'<span class=\"fc-title\">' +\n\t\t\t\t\thtmlEscape(title) +\n\t\t\t\t'</span>' +\n\t\t\t\t'<div class=\"fc-clear\"/>' +\n\t\t\t'</div>' +\n\t\t\t'<div class=\"fc-body ' + view.widgetContentClass + '\">' +\n\t\t\t\t'<div class=\"fc-event-container\"></div>' +\n\t\t\t'</div>'\n\t\t);\n\t\tvar segContainer = content.find('.fc-event-container');\n\t\tvar i;\n\n\t\t// render each seg's `el` and only return the visible segs\n\t\tsegs = this.renderFgSegEls(segs, true); // disableResizing=true\n\t\tthis.popoverSegs = segs;\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\n\t\t\t// because segments in the popover are not part of a grid coordinate system, provide a hint to any\n\t\t\t// grids that want to do drag-n-drop about which cell it came from\n\t\t\tthis.prepareHits();\n\t\t\tsegs[i].hit = this.getCellHit(row, col);\n\t\t\tthis.releaseHits();\n\n\t\t\tsegContainer.append(segs[i].el);\n\t\t}\n\n\t\treturn content;\n\t},\n\n\n\t// Given the events within an array of segment objects, reslice them to be in a single day\n\tresliceDaySegs: function(segs, dayDate) {\n\n\t\t// build an array of the original events\n\t\tvar events = $.map(segs, function(seg) {\n\t\t\treturn seg.event;\n\t\t});\n\n\t\tvar dayStart = dayDate.clone();\n\t\tvar dayEnd = dayStart.clone().add(1, 'days');\n\t\tvar dayRange = { start: dayStart, end: dayEnd };\n\n\t\t// slice the events with a custom slicing function\n\t\tsegs = this.eventsToSegs(\n\t\t\tevents,\n\t\t\tfunction(range) {\n\t\t\t\tvar seg = intersectRanges(range, dayRange); // undefind if no intersection\n\t\t\t\treturn seg ? [ seg ] : []; // must return an array of segments\n\t\t\t}\n\t\t);\n\n\t\t// force an order because eventsToSegs doesn't guarantee one\n\t\tthis.sortEventSegs(segs);\n\n\t\treturn segs;\n\t},\n\n\n\t// Generates the text that should be inside a \"more\" link, given the number of events it represents\n\tgetMoreLinkText: function(num) {\n\t\tvar opt = this.view.opt('eventLimitText');\n\n\t\tif (typeof opt === 'function') {\n\t\t\treturn opt(num);\n\t\t}\n\t\telse {\n\t\t\treturn '+' + num + ' ' + opt;\n\t\t}\n\t},\n\n\n\t// Returns segments within a given cell.\n\t// If `startLevel` is specified, returns only events including and below that level. Otherwise returns all segs.\n\tgetCellSegs: function(row, col, startLevel) {\n\t\tvar segMatrix = this.rowStructs[row].segMatrix;\n\t\tvar level = startLevel || 0;\n\t\tvar segs = [];\n\t\tvar seg;\n\n\t\twhile (level < segMatrix.length) {\n\t\t\tseg = segMatrix[level][col];\n\t\t\tif (seg) {\n\t\t\t\tsegs.push(seg);\n\t\t\t}\n\t\t\tlevel++;\n\t\t}\n\n\t\treturn segs;\n\t}\n\n});\n\n;;\n\n/* A component that renders one or more columns of vertical time slots\n----------------------------------------------------------------------------------------------------------------------*/\n// We mixin DayTable, even though there is only a single row of days\n\nvar TimeGrid = FC.TimeGrid = Grid.extend(DayTableMixin, {\n\n\tslotDuration: null, // duration of a \"slot\", a distinct time segment on given day, visualized by lines\n\tsnapDuration: null, // granularity of time for dragging and selecting\n\tsnapsPerSlot: null,\n\tminTime: null, // Duration object that denotes the first visible time of any given day\n\tmaxTime: null, // Duration object that denotes the exclusive visible end time of any given day\n\tlabelFormat: null, // formatting string for times running along vertical axis\n\tlabelInterval: null, // duration of how often a label should be displayed for a slot\n\n\tcolEls: null, // cells elements in the day-row background\n\tslatContainerEl: null, // div that wraps all the slat rows\n\tslatEls: null, // elements running horizontally across all columns\n\tnowIndicatorEls: null,\n\n\tcolCoordCache: null,\n\tslatCoordCache: null,\n\n\n\tconstructor: function() {\n\t\tGrid.apply(this, arguments); // call the super-constructor\n\n\t\tthis.processOptions();\n\t},\n\n\n\t// Renders the time grid into `this.el`, which should already be assigned.\n\t// Relies on the view's colCnt. In the future, this component should probably be self-sufficient.\n\trenderDates: function() {\n\t\tthis.el.html(this.renderHtml());\n\t\tthis.colEls = this.el.find('.fc-day');\n\t\tthis.slatContainerEl = this.el.find('.fc-slats');\n\t\tthis.slatEls = this.slatContainerEl.find('tr');\n\n\t\tthis.colCoordCache = new CoordCache({\n\t\t\tels: this.colEls,\n\t\t\tisHorizontal: true\n\t\t});\n\t\tthis.slatCoordCache = new CoordCache({\n\t\t\tels: this.slatEls,\n\t\t\tisVertical: true\n\t\t});\n\n\t\tthis.renderContentSkeleton();\n\t},\n\n\n\t// Renders the basic HTML skeleton for the grid\n\trenderHtml: function() {\n\t\treturn '' +\n\t\t\t'<div class=\"fc-bg\">' +\n\t\t\t\t'<table>' +\n\t\t\t\t\tthis.renderBgTrHtml(0) + // row=0\n\t\t\t\t'</table>' +\n\t\t\t'</div>' +\n\t\t\t'<div class=\"fc-slats\">' +\n\t\t\t\t'<table>' +\n\t\t\t\t\tthis.renderSlatRowHtml() +\n\t\t\t\t'</table>' +\n\t\t\t'</div>';\n\t},\n\n\n\t// Generates the HTML for the horizontal \"slats\" that run width-wise. Has a time axis on a side. Depends on RTL.\n\trenderSlatRowHtml: function() {\n\t\tvar view = this.view;\n\t\tvar isRTL = this.isRTL;\n\t\tvar html = '';\n\t\tvar slotTime = moment.duration(+this.minTime); // wish there was .clone() for durations\n\t\tvar slotDate; // will be on the view's first day, but we only care about its time\n\t\tvar isLabeled;\n\t\tvar axisHtml;\n\n\t\t// Calculate the time for each slot\n\t\twhile (slotTime < this.maxTime) {\n\t\t\tslotDate = this.start.clone().time(slotTime);\n\t\t\tisLabeled = isInt(divideDurationByDuration(slotTime, this.labelInterval));\n\n\t\t\taxisHtml =\n\t\t\t\t'<td class=\"fc-axis fc-time ' + view.widgetContentClass + '\" ' + view.axisStyleAttr() + '>' +\n\t\t\t\t\t(isLabeled ?\n\t\t\t\t\t\t'<span>' + // for matchCellWidths\n\t\t\t\t\t\t\thtmlEscape(slotDate.format(this.labelFormat)) +\n\t\t\t\t\t\t'</span>' :\n\t\t\t\t\t\t''\n\t\t\t\t\t\t) +\n\t\t\t\t'</td>';\n\n\t\t\thtml +=\n\t\t\t\t'<tr data-time=\"' + slotDate.format('HH:mm:ss') + '\"' +\n\t\t\t\t\t(isLabeled ? '' : ' class=\"fc-minor\"') +\n\t\t\t\t\t'>' +\n\t\t\t\t\t(!isRTL ? axisHtml : '') +\n\t\t\t\t\t'<td class=\"' + view.widgetContentClass + '\"/>' +\n\t\t\t\t\t(isRTL ? axisHtml : '') +\n\t\t\t\t\"</tr>\";\n\n\t\t\tslotTime.add(this.slotDuration);\n\t\t}\n\n\t\treturn html;\n\t},\n\n\n\t/* Options\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Parses various options into properties of this object\n\tprocessOptions: function() {\n\t\tvar view = this.view;\n\t\tvar slotDuration = view.opt('slotDuration');\n\t\tvar snapDuration = view.opt('snapDuration');\n\t\tvar input;\n\n\t\tslotDuration = moment.duration(slotDuration);\n\t\tsnapDuration = snapDuration ? moment.duration(snapDuration) : slotDuration;\n\n\t\tthis.slotDuration = slotDuration;\n\t\tthis.snapDuration = snapDuration;\n\t\tthis.snapsPerSlot = slotDuration / snapDuration; // TODO: ensure an integer multiple?\n\n\t\tthis.minResizeDuration = snapDuration; // hack\n\n\t\tthis.minTime = moment.duration(view.opt('minTime'));\n\t\tthis.maxTime = moment.duration(view.opt('maxTime'));\n\n\t\t// might be an array value (for TimelineView).\n\t\t// if so, getting the most granular entry (the last one probably).\n\t\tinput = view.opt('slotLabelFormat');\n\t\tif ($.isArray(input)) {\n\t\t\tinput = input[input.length - 1];\n\t\t}\n\n\t\tthis.labelFormat =\n\t\t\tinput ||\n\t\t\tview.opt('smallTimeFormat'); // the computed default\n\n\t\tinput = view.opt('slotLabelInterval');\n\t\tthis.labelInterval = input ?\n\t\t\tmoment.duration(input) :\n\t\t\tthis.computeLabelInterval(slotDuration);\n\t},\n\n\n\t// Computes an automatic value for slotLabelInterval\n\tcomputeLabelInterval: function(slotDuration) {\n\t\tvar i;\n\t\tvar labelInterval;\n\t\tvar slotsPerLabel;\n\n\t\t// find the smallest stock label interval that results in more than one slots-per-label\n\t\tfor (i = AGENDA_STOCK_SUB_DURATIONS.length - 1; i >= 0; i--) {\n\t\t\tlabelInterval = moment.duration(AGENDA_STOCK_SUB_DURATIONS[i]);\n\t\t\tslotsPerLabel = divideDurationByDuration(labelInterval, slotDuration);\n\t\t\tif (isInt(slotsPerLabel) && slotsPerLabel > 1) {\n\t\t\t\treturn labelInterval;\n\t\t\t}\n\t\t}\n\n\t\treturn moment.duration(slotDuration); // fall back. clone\n\t},\n\n\n\t// Computes a default event time formatting string if `timeFormat` is not explicitly defined\n\tcomputeEventTimeFormat: function() {\n\t\treturn this.view.opt('noMeridiemTimeFormat'); // like \"6:30\" (no AM/PM)\n\t},\n\n\n\t// Computes a default `displayEventEnd` value if one is not expliclty defined\n\tcomputeDisplayEventEnd: function() {\n\t\treturn true;\n\t},\n\n\n\t/* Hit System\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\tprepareHits: function() {\n\t\tthis.colCoordCache.build();\n\t\tthis.slatCoordCache.build();\n\t},\n\n\n\treleaseHits: function() {\n\t\tthis.colCoordCache.clear();\n\t\t// NOTE: don't clear slatCoordCache because we rely on it for computeTimeTop\n\t},\n\n\n\tqueryHit: function(leftOffset, topOffset) {\n\t\tvar snapsPerSlot = this.snapsPerSlot;\n\t\tvar colCoordCache = this.colCoordCache;\n\t\tvar slatCoordCache = this.slatCoordCache;\n\n\t\tif (colCoordCache.isLeftInBounds(leftOffset) && slatCoordCache.isTopInBounds(topOffset)) {\n\t\t\tvar colIndex = colCoordCache.getHorizontalIndex(leftOffset);\n\t\t\tvar slatIndex = slatCoordCache.getVerticalIndex(topOffset);\n\n\t\t\tif (colIndex != null && slatIndex != null) {\n\t\t\t\tvar slatTop = slatCoordCache.getTopOffset(slatIndex);\n\t\t\t\tvar slatHeight = slatCoordCache.getHeight(slatIndex);\n\t\t\t\tvar partial = (topOffset - slatTop) / slatHeight; // floating point number between 0 and 1\n\t\t\t\tvar localSnapIndex = Math.floor(partial * snapsPerSlot); // the snap # relative to start of slat\n\t\t\t\tvar snapIndex = slatIndex * snapsPerSlot + localSnapIndex;\n\t\t\t\tvar snapTop = slatTop + (localSnapIndex / snapsPerSlot) * slatHeight;\n\t\t\t\tvar snapBottom = slatTop + ((localSnapIndex + 1) / snapsPerSlot) * slatHeight;\n\n\t\t\t\treturn {\n\t\t\t\t\tcol: colIndex,\n\t\t\t\t\tsnap: snapIndex,\n\t\t\t\t\tcomponent: this, // needed unfortunately :(\n\t\t\t\t\tleft: colCoordCache.getLeftOffset(colIndex),\n\t\t\t\t\tright: colCoordCache.getRightOffset(colIndex),\n\t\t\t\t\ttop: snapTop,\n\t\t\t\t\tbottom: snapBottom\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t},\n\n\n\tgetHitSpan: function(hit) {\n\t\tvar start = this.getCellDate(0, hit.col); // row=0\n\t\tvar time = this.computeSnapTime(hit.snap); // pass in the snap-index\n\t\tvar end;\n\n\t\tstart.time(time);\n\t\tend = start.clone().add(this.snapDuration);\n\n\t\treturn { start: start, end: end };\n\t},\n\n\n\tgetHitEl: function(hit) {\n\t\treturn this.colEls.eq(hit.col);\n\t},\n\n\n\t/* Dates\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\trangeUpdated: function() {\n\t\tthis.updateDayTable();\n\t},\n\n\n\t// Given a row number of the grid, representing a \"snap\", returns a time (Duration) from its start-of-day\n\tcomputeSnapTime: function(snapIndex) {\n\t\treturn moment.duration(this.minTime + this.snapDuration * snapIndex);\n\t},\n\n\n\t// Slices up the given span (unzoned start/end with other misc data) into an array of segments\n\tspanToSegs: function(span) {\n\t\tvar segs = this.sliceRangeByTimes(span);\n\t\tvar i;\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tif (this.isRTL) {\n\t\t\t\tsegs[i].col = this.daysPerRow - 1 - segs[i].dayIndex;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tsegs[i].col = segs[i].dayIndex;\n\t\t\t}\n\t\t}\n\n\t\treturn segs;\n\t},\n\n\n\tsliceRangeByTimes: function(range) {\n\t\tvar segs = [];\n\t\tvar seg;\n\t\tvar dayIndex;\n\t\tvar dayDate;\n\t\tvar dayRange;\n\n\t\tfor (dayIndex = 0; dayIndex < this.daysPerRow; dayIndex++) {\n\t\t\tdayDate = this.dayDates[dayIndex].clone(); // TODO: better API for this?\n\t\t\tdayRange = {\n\t\t\t\tstart: dayDate.clone().time(this.minTime),\n\t\t\t\tend: dayDate.clone().time(this.maxTime)\n\t\t\t};\n\t\t\tseg = intersectRanges(range, dayRange); // both will be ambig timezone\n\t\t\tif (seg) {\n\t\t\t\tseg.dayIndex = dayIndex;\n\t\t\t\tsegs.push(seg);\n\t\t\t}\n\t\t}\n\n\t\treturn segs;\n\t},\n\n\n\t/* Coordinates\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\tupdateSize: function(isResize) { // NOT a standard Grid method\n\t\tthis.slatCoordCache.build();\n\n\t\tif (isResize) {\n\t\t\tthis.updateSegVerticals(\n\t\t\t\t[].concat(this.fgSegs || [], this.bgSegs || [], this.businessSegs || [])\n\t\t\t);\n\t\t}\n\t},\n\n\n\tgetTotalSlatHeight: function() {\n\t\treturn this.slatContainerEl.outerHeight();\n\t},\n\n\n\t// Computes the top coordinate, relative to the bounds of the grid, of the given date.\n\t// A `startOfDayDate` must be given for avoiding ambiguity over how to treat midnight.\n\tcomputeDateTop: function(date, startOfDayDate) {\n\t\treturn this.computeTimeTop(\n\t\t\tmoment.duration(\n\t\t\t\tdate - startOfDayDate.clone().stripTime()\n\t\t\t)\n\t\t);\n\t},\n\n\n\t// Computes the top coordinate, relative to the bounds of the grid, of the given time (a Duration).\n\tcomputeTimeTop: function(time) {\n\t\tvar len = this.slatEls.length;\n\t\tvar slatCoverage = (time - this.minTime) / this.slotDuration; // floating-point value of # of slots covered\n\t\tvar slatIndex;\n\t\tvar slatRemainder;\n\n\t\t// compute a floating-point number for how many slats should be progressed through.\n\t\t// from 0 to number of slats (inclusive)\n\t\t// constrained because minTime/maxTime might be customized.\n\t\tslatCoverage = Math.max(0, slatCoverage);\n\t\tslatCoverage = Math.min(len, slatCoverage);\n\n\t\t// an integer index of the furthest whole slat\n\t\t// from 0 to number slats (*exclusive*, so len-1)\n\t\tslatIndex = Math.floor(slatCoverage);\n\t\tslatIndex = Math.min(slatIndex, len - 1);\n\n\t\t// how much further through the slatIndex slat (from 0.0-1.0) must be covered in addition.\n\t\t// could be 1.0 if slatCoverage is covering *all* the slots\n\t\tslatRemainder = slatCoverage - slatIndex;\n\n\t\treturn this.slatCoordCache.getTopPosition(slatIndex) +\n\t\t\tthis.slatCoordCache.getHeight(slatIndex) * slatRemainder;\n\t},\n\n\n\n\t/* Event Drag Visualization\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders a visual indication of an event being dragged over the specified date(s).\n\t// A returned value of `true` signals that a mock \"helper\" event has been rendered.\n\trenderDrag: function(eventLocation, seg) {\n\n\t\tif (seg) { // if there is event information for this drag, render a helper event\n\n\t\t\t// returns mock event elements\n\t\t\t// signal that a helper has been rendered\n\t\t\treturn this.renderEventLocationHelper(eventLocation, seg);\n\t\t}\n\t\telse {\n\t\t\t// otherwise, just render a highlight\n\t\t\tthis.renderHighlight(this.eventToSpan(eventLocation));\n\t\t}\n\t},\n\n\n\t// Unrenders any visual indication of an event being dragged\n\tunrenderDrag: function() {\n\t\tthis.unrenderHelper();\n\t\tthis.unrenderHighlight();\n\t},\n\n\n\t/* Event Resize Visualization\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders a visual indication of an event being resized\n\trenderEventResize: function(eventLocation, seg) {\n\t\treturn this.renderEventLocationHelper(eventLocation, seg); // returns mock event elements\n\t},\n\n\n\t// Unrenders any visual indication of an event being resized\n\tunrenderEventResize: function() {\n\t\tthis.unrenderHelper();\n\t},\n\n\n\t/* Event Helper\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders a mock \"helper\" event. `sourceSeg` is the original segment object and might be null (an external drag)\n\trenderHelper: function(event, sourceSeg) {\n\t\treturn this.renderHelperSegs(this.eventToSegs(event), sourceSeg); // returns mock event elements\n\t},\n\n\n\t// Unrenders any mock helper event\n\tunrenderHelper: function() {\n\t\tthis.unrenderHelperSegs();\n\t},\n\n\n\t/* Business Hours\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\trenderBusinessHours: function() {\n\t\tthis.renderBusinessSegs(\n\t\t\tthis.buildBusinessHourSegs()\n\t\t);\n\t},\n\n\n\tunrenderBusinessHours: function() {\n\t\tthis.unrenderBusinessSegs();\n\t},\n\n\n\t/* Now Indicator\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\tgetNowIndicatorUnit: function() {\n\t\treturn 'minute'; // will refresh on the minute\n\t},\n\n\n\trenderNowIndicator: function(date) {\n\t\t// seg system might be overkill, but it handles scenario where line needs to be rendered\n\t\t//  more than once because of columns with the same date (resources columns for example)\n\t\tvar segs = this.spanToSegs({ start: date, end: date });\n\t\tvar top = this.computeDateTop(date, date);\n\t\tvar nodes = [];\n\t\tvar i;\n\n\t\t// render lines within the columns\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tnodes.push($('<div class=\"fc-now-indicator fc-now-indicator-line\"></div>')\n\t\t\t\t.css('top', top)\n\t\t\t\t.appendTo(this.colContainerEls.eq(segs[i].col))[0]);\n\t\t}\n\n\t\t// render an arrow over the axis\n\t\tif (segs.length > 0) { // is the current time in view?\n\t\t\tnodes.push($('<div class=\"fc-now-indicator fc-now-indicator-arrow\"></div>')\n\t\t\t\t.css('top', top)\n\t\t\t\t.appendTo(this.el.find('.fc-content-skeleton'))[0]);\n\t\t}\n\n\t\tthis.nowIndicatorEls = $(nodes);\n\t},\n\n\n\tunrenderNowIndicator: function() {\n\t\tif (this.nowIndicatorEls) {\n\t\t\tthis.nowIndicatorEls.remove();\n\t\t\tthis.nowIndicatorEls = null;\n\t\t}\n\t},\n\n\n\t/* Selection\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders a visual indication of a selection. Overrides the default, which was to simply render a highlight.\n\trenderSelection: function(span) {\n\t\tif (this.view.opt('selectHelper')) { // this setting signals that a mock helper event should be rendered\n\n\t\t\t// normally acceps an eventLocation, span has a start/end, which is good enough\n\t\t\tthis.renderEventLocationHelper(span);\n\t\t}\n\t\telse {\n\t\t\tthis.renderHighlight(span);\n\t\t}\n\t},\n\n\n\t// Unrenders any visual indication of a selection\n\tunrenderSelection: function() {\n\t\tthis.unrenderHelper();\n\t\tthis.unrenderHighlight();\n\t},\n\n\n\t/* Highlight\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\trenderHighlight: function(span) {\n\t\tthis.renderHighlightSegs(this.spanToSegs(span));\n\t},\n\n\n\tunrenderHighlight: function() {\n\t\tthis.unrenderHighlightSegs();\n\t}\n\n});\n\n;;\n\n/* Methods for rendering SEGMENTS, pieces of content that live on the view\n ( this file is no longer just for events )\n----------------------------------------------------------------------------------------------------------------------*/\n\nTimeGrid.mixin({\n\n\tcolContainerEls: null, // containers for each column\n\n\t// inner-containers for each column where different types of segs live\n\tfgContainerEls: null,\n\tbgContainerEls: null,\n\thelperContainerEls: null,\n\thighlightContainerEls: null,\n\tbusinessContainerEls: null,\n\n\t// arrays of different types of displayed segments\n\tfgSegs: null,\n\tbgSegs: null,\n\thelperSegs: null,\n\thighlightSegs: null,\n\tbusinessSegs: null,\n\n\n\t// Renders the DOM that the view's content will live in\n\trenderContentSkeleton: function() {\n\t\tvar cellHtml = '';\n\t\tvar i;\n\t\tvar skeletonEl;\n\n\t\tfor (i = 0; i < this.colCnt; i++) {\n\t\t\tcellHtml +=\n\t\t\t\t'<td>' +\n\t\t\t\t\t'<div class=\"fc-content-col\">' +\n\t\t\t\t\t\t'<div class=\"fc-event-container fc-helper-container\"></div>' +\n\t\t\t\t\t\t'<div class=\"fc-event-container\"></div>' +\n\t\t\t\t\t\t'<div class=\"fc-highlight-container\"></div>' +\n\t\t\t\t\t\t'<div class=\"fc-bgevent-container\"></div>' +\n\t\t\t\t\t\t'<div class=\"fc-business-container\"></div>' +\n\t\t\t\t\t'</div>' +\n\t\t\t\t'</td>';\n\t\t}\n\n\t\tskeletonEl = $(\n\t\t\t'<div class=\"fc-content-skeleton\">' +\n\t\t\t\t'<table>' +\n\t\t\t\t\t'<tr>' + cellHtml + '</tr>' +\n\t\t\t\t'</table>' +\n\t\t\t'</div>'\n\t\t);\n\n\t\tthis.colContainerEls = skeletonEl.find('.fc-content-col');\n\t\tthis.helperContainerEls = skeletonEl.find('.fc-helper-container');\n\t\tthis.fgContainerEls = skeletonEl.find('.fc-event-container:not(.fc-helper-container)');\n\t\tthis.bgContainerEls = skeletonEl.find('.fc-bgevent-container');\n\t\tthis.highlightContainerEls = skeletonEl.find('.fc-highlight-container');\n\t\tthis.businessContainerEls = skeletonEl.find('.fc-business-container');\n\n\t\tthis.bookendCells(skeletonEl.find('tr')); // TODO: do this on string level\n\t\tthis.el.append(skeletonEl);\n\t},\n\n\n\t/* Foreground Events\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\trenderFgSegs: function(segs) {\n\t\tsegs = this.renderFgSegsIntoContainers(segs, this.fgContainerEls);\n\t\tthis.fgSegs = segs;\n\t\treturn segs; // needed for Grid::renderEvents\n\t},\n\n\n\tunrenderFgSegs: function() {\n\t\tthis.unrenderNamedSegs('fgSegs');\n\t},\n\n\n\t/* Foreground Helper Events\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\trenderHelperSegs: function(segs, sourceSeg) {\n\t\tvar helperEls = [];\n\t\tvar i, seg;\n\t\tvar sourceEl;\n\n\t\tsegs = this.renderFgSegsIntoContainers(segs, this.helperContainerEls);\n\n\t\t// Try to make the segment that is in the same row as sourceSeg look the same\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tseg = segs[i];\n\t\t\tif (sourceSeg && sourceSeg.col === seg.col) {\n\t\t\t\tsourceEl = sourceSeg.el;\n\t\t\t\tseg.el.css({\n\t\t\t\t\tleft: sourceEl.css('left'),\n\t\t\t\t\tright: sourceEl.css('right'),\n\t\t\t\t\t'margin-left': sourceEl.css('margin-left'),\n\t\t\t\t\t'margin-right': sourceEl.css('margin-right')\n\t\t\t\t});\n\t\t\t}\n\t\t\thelperEls.push(seg.el[0]);\n\t\t}\n\n\t\tthis.helperSegs = segs;\n\n\t\treturn $(helperEls); // must return rendered helpers\n\t},\n\n\n\tunrenderHelperSegs: function() {\n\t\tthis.unrenderNamedSegs('helperSegs');\n\t},\n\n\n\t/* Background Events\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\trenderBgSegs: function(segs) {\n\t\tsegs = this.renderFillSegEls('bgEvent', segs); // TODO: old fill system\n\t\tthis.updateSegVerticals(segs);\n\t\tthis.attachSegsByCol(this.groupSegsByCol(segs), this.bgContainerEls);\n\t\tthis.bgSegs = segs;\n\t\treturn segs; // needed for Grid::renderEvents\n\t},\n\n\n\tunrenderBgSegs: function() {\n\t\tthis.unrenderNamedSegs('bgSegs');\n\t},\n\n\n\t/* Highlight\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\trenderHighlightSegs: function(segs) {\n\t\tsegs = this.renderFillSegEls('highlight', segs); // TODO: old fill system\n\t\tthis.updateSegVerticals(segs);\n\t\tthis.attachSegsByCol(this.groupSegsByCol(segs), this.highlightContainerEls);\n\t\tthis.highlightSegs = segs;\n\t},\n\n\n\tunrenderHighlightSegs: function() {\n\t\tthis.unrenderNamedSegs('highlightSegs');\n\t},\n\n\n\t/* Business Hours\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\trenderBusinessSegs: function(segs) {\n\t\tsegs = this.renderFillSegEls('businessHours', segs); // TODO: old fill system\n\t\tthis.updateSegVerticals(segs);\n\t\tthis.attachSegsByCol(this.groupSegsByCol(segs), this.businessContainerEls);\n\t\tthis.businessSegs = segs;\n\t},\n\n\n\tunrenderBusinessSegs: function() {\n\t\tthis.unrenderNamedSegs('businessSegs');\n\t},\n\n\n\t/* Seg Rendering Utils\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Given a flat array of segments, return an array of sub-arrays, grouped by each segment's col\n\tgroupSegsByCol: function(segs) {\n\t\tvar segsByCol = [];\n\t\tvar i;\n\n\t\tfor (i = 0; i < this.colCnt; i++) {\n\t\t\tsegsByCol.push([]);\n\t\t}\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tsegsByCol[segs[i].col].push(segs[i]);\n\t\t}\n\n\t\treturn segsByCol;\n\t},\n\n\n\t// Given segments grouped by column, insert the segments' elements into a parallel array of container\n\t// elements, each living within a column.\n\tattachSegsByCol: function(segsByCol, containerEls) {\n\t\tvar col;\n\t\tvar segs;\n\t\tvar i;\n\n\t\tfor (col = 0; col < this.colCnt; col++) { // iterate each column grouping\n\t\t\tsegs = segsByCol[col];\n\n\t\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\t\tcontainerEls.eq(col).append(segs[i].el);\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Given the name of a property of `this` object, assumed to be an array of segments,\n\t// loops through each segment and removes from DOM. Will null-out the property afterwards.\n\tunrenderNamedSegs: function(propName) {\n\t\tvar segs = this[propName];\n\t\tvar i;\n\n\t\tif (segs) {\n\t\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\t\tsegs[i].el.remove();\n\t\t\t}\n\t\t\tthis[propName] = null;\n\t\t}\n\t},\n\n\n\n\t/* Foreground Event Rendering Utils\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Given an array of foreground segments, render a DOM element for each, computes position,\n\t// and attaches to the column inner-container elements.\n\trenderFgSegsIntoContainers: function(segs, containerEls) {\n\t\tvar segsByCol;\n\t\tvar col;\n\n\t\tsegs = this.renderFgSegEls(segs); // will call fgSegHtml\n\t\tsegsByCol = this.groupSegsByCol(segs);\n\n\t\tfor (col = 0; col < this.colCnt; col++) {\n\t\t\tthis.updateFgSegCoords(segsByCol[col]);\n\t\t}\n\n\t\tthis.attachSegsByCol(segsByCol, containerEls);\n\n\t\treturn segs;\n\t},\n\n\n\t// Renders the HTML for a single event segment's default rendering\n\tfgSegHtml: function(seg, disableResizing) {\n\t\tvar view = this.view;\n\t\tvar event = seg.event;\n\t\tvar isDraggable = view.isEventDraggable(event);\n\t\tvar isResizableFromStart = !disableResizing && seg.isStart && view.isEventResizableFromStart(event);\n\t\tvar isResizableFromEnd = !disableResizing && seg.isEnd && view.isEventResizableFromEnd(event);\n\t\tvar classes = this.getSegClasses(seg, isDraggable, isResizableFromStart || isResizableFromEnd);\n\t\tvar skinCss = cssToStr(this.getSegSkinCss(seg));\n\t\tvar timeText;\n\t\tvar fullTimeText; // more verbose time text. for the print stylesheet\n\t\tvar startTimeText; // just the start time text\n\n\t\tclasses.unshift('fc-time-grid-event', 'fc-v-event');\n\n\t\tif (view.isMultiDayEvent(event)) { // if the event appears to span more than one day...\n\t\t\t// Don't display time text on segments that run entirely through a day.\n\t\t\t// That would appear as midnight-midnight and would look dumb.\n\t\t\t// Otherwise, display the time text for the *segment's* times (like 6pm-midnight or midnight-10am)\n\t\t\tif (seg.isStart || seg.isEnd) {\n\t\t\t\ttimeText = this.getEventTimeText(seg);\n\t\t\t\tfullTimeText = this.getEventTimeText(seg, 'LT');\n\t\t\t\tstartTimeText = this.getEventTimeText(seg, null, false); // displayEnd=false\n\t\t\t}\n\t\t} else {\n\t\t\t// Display the normal time text for the *event's* times\n\t\t\ttimeText = this.getEventTimeText(event);\n\t\t\tfullTimeText = this.getEventTimeText(event, 'LT');\n\t\t\tstartTimeText = this.getEventTimeText(event, null, false); // displayEnd=false\n\t\t}\n\n\t\treturn '<a class=\"' + classes.join(' ') + '\"' +\n\t\t\t(event.url ?\n\t\t\t\t' href=\"' + htmlEscape(event.url) + '\"' :\n\t\t\t\t''\n\t\t\t\t) +\n\t\t\t(skinCss ?\n\t\t\t\t' style=\"' + skinCss + '\"' :\n\t\t\t\t''\n\t\t\t\t) +\n\t\t\t'>' +\n\t\t\t\t'<div class=\"fc-content\">' +\n\t\t\t\t\t(timeText ?\n\t\t\t\t\t\t'<div class=\"fc-time\"' +\n\t\t\t\t\t\t' data-start=\"' + htmlEscape(startTimeText) + '\"' +\n\t\t\t\t\t\t' data-full=\"' + htmlEscape(fullTimeText) + '\"' +\n\t\t\t\t\t\t'>' +\n\t\t\t\t\t\t\t'<span>' + htmlEscape(timeText) + '</span>' +\n\t\t\t\t\t\t'</div>' :\n\t\t\t\t\t\t''\n\t\t\t\t\t\t) +\n\t\t\t\t\t(event.title ?\n\t\t\t\t\t\t'<div class=\"fc-title\">' +\n\t\t\t\t\t\t\thtmlEscape(event.title) +\n\t\t\t\t\t\t'</div>' :\n\t\t\t\t\t\t''\n\t\t\t\t\t\t) +\n\t\t\t\t'</div>' +\n\t\t\t\t'<div class=\"fc-bg\"/>' +\n\t\t\t\t/* TODO: write CSS for this\n\t\t\t\t(isResizableFromStart ?\n\t\t\t\t\t'<div class=\"fc-resizer fc-start-resizer\" />' :\n\t\t\t\t\t''\n\t\t\t\t\t) +\n\t\t\t\t*/\n\t\t\t\t(isResizableFromEnd ?\n\t\t\t\t\t'<div class=\"fc-resizer fc-end-resizer\" />' :\n\t\t\t\t\t''\n\t\t\t\t\t) +\n\t\t\t'</a>';\n\t},\n\n\n\t/* Seg Position Utils\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Refreshes the CSS top/bottom coordinates for each segment element.\n\t// Works when called after initial render, after a window resize/zoom for example.\n\tupdateSegVerticals: function(segs) {\n\t\tthis.computeSegVerticals(segs);\n\t\tthis.assignSegVerticals(segs);\n\t},\n\n\n\t// For each segment in an array, computes and assigns its top and bottom properties\n\tcomputeSegVerticals: function(segs) {\n\t\tvar i, seg;\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tseg = segs[i];\n\t\t\tseg.top = this.computeDateTop(seg.start, seg.start);\n\t\t\tseg.bottom = this.computeDateTop(seg.end, seg.start);\n\t\t}\n\t},\n\n\n\t// Given segments that already have their top/bottom properties computed, applies those values to\n\t// the segments' elements.\n\tassignSegVerticals: function(segs) {\n\t\tvar i, seg;\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tseg = segs[i];\n\t\t\tseg.el.css(this.generateSegVerticalCss(seg));\n\t\t}\n\t},\n\n\n\t// Generates an object with CSS properties for the top/bottom coordinates of a segment element\n\tgenerateSegVerticalCss: function(seg) {\n\t\treturn {\n\t\t\ttop: seg.top,\n\t\t\tbottom: -seg.bottom // flipped because needs to be space beyond bottom edge of event container\n\t\t};\n\t},\n\n\n\t/* Foreground Event Positioning Utils\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Given segments that are assumed to all live in the *same column*,\n\t// compute their verical/horizontal coordinates and assign to their elements.\n\tupdateFgSegCoords: function(segs) {\n\t\tthis.computeSegVerticals(segs); // horizontals relies on this\n\t\tthis.computeFgSegHorizontals(segs); // compute horizontal coordinates, z-index's, and reorder the array\n\t\tthis.assignSegVerticals(segs);\n\t\tthis.assignFgSegHorizontals(segs);\n\t},\n\n\n\t// Given an array of segments that are all in the same column, sets the backwardCoord and forwardCoord on each.\n\t// NOTE: Also reorders the given array by date!\n\tcomputeFgSegHorizontals: function(segs) {\n\t\tvar levels;\n\t\tvar level0;\n\t\tvar i;\n\n\t\tthis.sortEventSegs(segs); // order by certain criteria\n\t\tlevels = buildSlotSegLevels(segs);\n\t\tcomputeForwardSlotSegs(levels);\n\n\t\tif ((level0 = levels[0])) {\n\n\t\t\tfor (i = 0; i < level0.length; i++) {\n\t\t\t\tcomputeSlotSegPressures(level0[i]);\n\t\t\t}\n\n\t\t\tfor (i = 0; i < level0.length; i++) {\n\t\t\t\tthis.computeFgSegForwardBack(level0[i], 0, 0);\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Calculate seg.forwardCoord and seg.backwardCoord for the segment, where both values range\n\t// from 0 to 1. If the calendar is left-to-right, the seg.backwardCoord maps to \"left\" and\n\t// seg.forwardCoord maps to \"right\" (via percentage). Vice-versa if the calendar is right-to-left.\n\t//\n\t// The segment might be part of a \"series\", which means consecutive segments with the same pressure\n\t// who's width is unknown until an edge has been hit. `seriesBackwardPressure` is the number of\n\t// segments behind this one in the current series, and `seriesBackwardCoord` is the starting\n\t// coordinate of the first segment in the series.\n\tcomputeFgSegForwardBack: function(seg, seriesBackwardPressure, seriesBackwardCoord) {\n\t\tvar forwardSegs = seg.forwardSegs;\n\t\tvar i;\n\n\t\tif (seg.forwardCoord === undefined) { // not already computed\n\n\t\t\tif (!forwardSegs.length) {\n\n\t\t\t\t// if there are no forward segments, this segment should butt up against the edge\n\t\t\t\tseg.forwardCoord = 1;\n\t\t\t}\n\t\t\telse {\n\n\t\t\t\t// sort highest pressure first\n\t\t\t\tthis.sortForwardSegs(forwardSegs);\n\n\t\t\t\t// this segment's forwardCoord will be calculated from the backwardCoord of the\n\t\t\t\t// highest-pressure forward segment.\n\t\t\t\tthis.computeFgSegForwardBack(forwardSegs[0], seriesBackwardPressure + 1, seriesBackwardCoord);\n\t\t\t\tseg.forwardCoord = forwardSegs[0].backwardCoord;\n\t\t\t}\n\n\t\t\t// calculate the backwardCoord from the forwardCoord. consider the series\n\t\t\tseg.backwardCoord = seg.forwardCoord -\n\t\t\t\t(seg.forwardCoord - seriesBackwardCoord) / // available width for series\n\t\t\t\t(seriesBackwardPressure + 1); // # of segments in the series\n\n\t\t\t// use this segment's coordinates to computed the coordinates of the less-pressurized\n\t\t\t// forward segments\n\t\t\tfor (i=0; i<forwardSegs.length; i++) {\n\t\t\t\tthis.computeFgSegForwardBack(forwardSegs[i], 0, seg.forwardCoord);\n\t\t\t}\n\t\t}\n\t},\n\n\n\tsortForwardSegs: function(forwardSegs) {\n\t\tforwardSegs.sort(proxy(this, 'compareForwardSegs'));\n\t},\n\n\n\t// A cmp function for determining which forward segment to rely on more when computing coordinates.\n\tcompareForwardSegs: function(seg1, seg2) {\n\t\t// put higher-pressure first\n\t\treturn seg2.forwardPressure - seg1.forwardPressure ||\n\t\t\t// put segments that are closer to initial edge first (and favor ones with no coords yet)\n\t\t\t(seg1.backwardCoord || 0) - (seg2.backwardCoord || 0) ||\n\t\t\t// do normal sorting...\n\t\t\tthis.compareEventSegs(seg1, seg2);\n\t},\n\n\n\t// Given foreground event segments that have already had their position coordinates computed,\n\t// assigns position-related CSS values to their elements.\n\tassignFgSegHorizontals: function(segs) {\n\t\tvar i, seg;\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tseg = segs[i];\n\t\t\tseg.el.css(this.generateFgSegHorizontalCss(seg));\n\n\t\t\t// if the height is short, add a className for alternate styling\n\t\t\tif (seg.bottom - seg.top < 30) {\n\t\t\t\tseg.el.addClass('fc-short');\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Generates an object with CSS properties/values that should be applied to an event segment element.\n\t// Contains important positioning-related properties that should be applied to any event element, customized or not.\n\tgenerateFgSegHorizontalCss: function(seg) {\n\t\tvar shouldOverlap = this.view.opt('slotEventOverlap');\n\t\tvar backwardCoord = seg.backwardCoord; // the left side if LTR. the right side if RTL. floating-point\n\t\tvar forwardCoord = seg.forwardCoord; // the right side if LTR. the left side if RTL. floating-point\n\t\tvar props = this.generateSegVerticalCss(seg); // get top/bottom first\n\t\tvar left; // amount of space from left edge, a fraction of the total width\n\t\tvar right; // amount of space from right edge, a fraction of the total width\n\n\t\tif (shouldOverlap) {\n\t\t\t// double the width, but don't go beyond the maximum forward coordinate (1.0)\n\t\t\tforwardCoord = Math.min(1, backwardCoord + (forwardCoord - backwardCoord) * 2);\n\t\t}\n\n\t\tif (this.isRTL) {\n\t\t\tleft = 1 - forwardCoord;\n\t\t\tright = backwardCoord;\n\t\t}\n\t\telse {\n\t\t\tleft = backwardCoord;\n\t\t\tright = 1 - forwardCoord;\n\t\t}\n\n\t\tprops.zIndex = seg.level + 1; // convert from 0-base to 1-based\n\t\tprops.left = left * 100 + '%';\n\t\tprops.right = right * 100 + '%';\n\n\t\tif (shouldOverlap && seg.forwardPressure) {\n\t\t\t// add padding to the edge so that forward stacked events don't cover the resizer's icon\n\t\t\tprops[this.isRTL ? 'marginLeft' : 'marginRight'] = 10 * 2; // 10 is a guesstimate of the icon's width\n\t\t}\n\n\t\treturn props;\n\t}\n\n});\n\n\n// Builds an array of segments \"levels\". The first level will be the leftmost tier of segments if the calendar is\n// left-to-right, or the rightmost if the calendar is right-to-left. Assumes the segments are already ordered by date.\nfunction buildSlotSegLevels(segs) {\n\tvar levels = [];\n\tvar i, seg;\n\tvar j;\n\n\tfor (i=0; i<segs.length; i++) {\n\t\tseg = segs[i];\n\n\t\t// go through all the levels and stop on the first level where there are no collisions\n\t\tfor (j=0; j<levels.length; j++) {\n\t\t\tif (!computeSlotSegCollisions(seg, levels[j]).length) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tseg.level = j;\n\n\t\t(levels[j] || (levels[j] = [])).push(seg);\n\t}\n\n\treturn levels;\n}\n\n\n// For every segment, figure out the other segments that are in subsequent\n// levels that also occupy the same vertical space. Accumulate in seg.forwardSegs\nfunction computeForwardSlotSegs(levels) {\n\tvar i, level;\n\tvar j, seg;\n\tvar k;\n\n\tfor (i=0; i<levels.length; i++) {\n\t\tlevel = levels[i];\n\n\t\tfor (j=0; j<level.length; j++) {\n\t\t\tseg = level[j];\n\n\t\t\tseg.forwardSegs = [];\n\t\t\tfor (k=i+1; k<levels.length; k++) {\n\t\t\t\tcomputeSlotSegCollisions(seg, levels[k], seg.forwardSegs);\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n// Figure out which path forward (via seg.forwardSegs) results in the longest path until\n// the furthest edge is reached. The number of segments in this path will be seg.forwardPressure\nfunction computeSlotSegPressures(seg) {\n\tvar forwardSegs = seg.forwardSegs;\n\tvar forwardPressure = 0;\n\tvar i, forwardSeg;\n\n\tif (seg.forwardPressure === undefined) { // not already computed\n\n\t\tfor (i=0; i<forwardSegs.length; i++) {\n\t\t\tforwardSeg = forwardSegs[i];\n\n\t\t\t// figure out the child's maximum forward path\n\t\t\tcomputeSlotSegPressures(forwardSeg);\n\n\t\t\t// either use the existing maximum, or use the child's forward pressure\n\t\t\t// plus one (for the forwardSeg itself)\n\t\t\tforwardPressure = Math.max(\n\t\t\t\tforwardPressure,\n\t\t\t\t1 + forwardSeg.forwardPressure\n\t\t\t);\n\t\t}\n\n\t\tseg.forwardPressure = forwardPressure;\n\t}\n}\n\n\n// Find all the segments in `otherSegs` that vertically collide with `seg`.\n// Append into an optionally-supplied `results` array and return.\nfunction computeSlotSegCollisions(seg, otherSegs, results) {\n\tresults = results || [];\n\n\tfor (var i=0; i<otherSegs.length; i++) {\n\t\tif (isSlotSegCollision(seg, otherSegs[i])) {\n\t\t\tresults.push(otherSegs[i]);\n\t\t}\n\t}\n\n\treturn results;\n}\n\n\n// Do these segments occupy the same vertical space?\nfunction isSlotSegCollision(seg1, seg2) {\n\treturn seg1.bottom > seg2.top && seg1.top < seg2.bottom;\n}\n\n;;\n\n/* An abstract class from which other views inherit from\n----------------------------------------------------------------------------------------------------------------------*/\n\nvar View = FC.View = Class.extend(EmitterMixin, ListenerMixin, {\n\n\ttype: null, // subclass' view name (string)\n\tname: null, // deprecated. use `type` instead\n\ttitle: null, // the text that will be displayed in the header's title\n\n\tcalendar: null, // owner Calendar object\n\toptions: null, // hash containing all options. already merged with view-specific-options\n\tel: null, // the view's containing element. set by Calendar\n\n\tisDateSet: false,\n\tisDateRendered: false,\n\tdateRenderQueue: null,\n\n\tisEventsBound: false,\n\tisEventsSet: false,\n\tisEventsRendered: false,\n\teventRenderQueue: null,\n\n\t// range the view is actually displaying (moments)\n\tstart: null,\n\tend: null, // exclusive\n\n\t// range the view is formally responsible for (moments)\n\t// may be different from start/end. for example, a month view might have 1st-31st, excluding padded dates\n\tintervalStart: null,\n\tintervalEnd: null, // exclusive\n\tintervalDuration: null,\n\tintervalUnit: null, // name of largest unit being displayed, like \"month\" or \"week\"\n\n\tisRTL: false,\n\tisSelected: false, // boolean whether a range of time is user-selected or not\n\tselectedEvent: null,\n\n\teventOrderSpecs: null, // criteria for ordering events when they have same date/time\n\n\t// classNames styled by jqui themes\n\twidgetHeaderClass: null,\n\twidgetContentClass: null,\n\thighlightStateClass: null,\n\n\t// for date utils, computed from options\n\tnextDayThreshold: null,\n\tisHiddenDayHash: null,\n\n\t// now indicator\n\tisNowIndicatorRendered: null,\n\tinitialNowDate: null, // result first getNow call\n\tinitialNowQueriedMs: null, // ms time the getNow was called\n\tnowIndicatorTimeoutID: null, // for refresh timing of now indicator\n\tnowIndicatorIntervalID: null, // \"\n\n\n\tconstructor: function(calendar, type, options, intervalDuration) {\n\n\t\tthis.calendar = calendar;\n\t\tthis.type = this.name = type; // .name is deprecated\n\t\tthis.options = options;\n\t\tthis.intervalDuration = intervalDuration || moment.duration(1, 'day');\n\n\t\tthis.nextDayThreshold = moment.duration(this.opt('nextDayThreshold'));\n\t\tthis.initThemingProps();\n\t\tthis.initHiddenDays();\n\t\tthis.isRTL = this.opt('isRTL');\n\n\t\tthis.eventOrderSpecs = parseFieldSpecs(this.opt('eventOrder'));\n\n\t\tthis.dateRenderQueue = new TaskQueue();\n\t\tthis.eventRenderQueue = new TaskQueue(this.opt('eventRenderWait'));\n\n\t\tthis.initialize();\n\t},\n\n\n\t// A good place for subclasses to initialize member variables\n\tinitialize: function() {\n\t\t// subclasses can implement\n\t},\n\n\n\t// Retrieves an option with the given name\n\topt: function(name) {\n\t\treturn this.options[name];\n\t},\n\n\n\t// Triggers handlers that are view-related. Modifies args before passing to calendar.\n\tpubliclyTrigger: function(name, thisObj) { // arguments beyond thisObj are passed along\n\t\tvar calendar = this.calendar;\n\n\t\treturn calendar.publiclyTrigger.apply(\n\t\t\tcalendar,\n\t\t\t[name, thisObj || this].concat(\n\t\t\t\tArray.prototype.slice.call(arguments, 2), // arguments beyond thisObj\n\t\t\t\t[ this ] // always make the last argument a reference to the view. TODO: deprecate\n\t\t\t)\n\t\t);\n\t},\n\n\n\t// Returns a proxy of the given promise that will be rejected if the given event fires\n\t// before the promise resolves.\n\trejectOn: function(eventName, promise) {\n\t\tvar _this = this;\n\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\t_this.one(eventName, reject);\n\n\t\t\tfunction cleanup() {\n\t\t\t\t_this.off(eventName, reject);\n\t\t\t}\n\n\t\t\tpromise.then(function(res) { // success\n\t\t\t\tcleanup();\n\t\t\t\tresolve(res);\n\t\t\t}, function() { // failure\n\t\t\t\tcleanup();\n\t\t\t\treject();\n\t\t\t});\n\t\t});\n\t},\n\n\n\t/* Date Computation\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Updates all internal dates for displaying the given unzoned range.\n\tsetRange: function(range) {\n\t\t$.extend(this, range); // assigns every property to this object's member variables\n\t\tthis.updateTitle();\n\t},\n\n\n\t// Given a single current unzoned date, produce information about what range to display.\n\t// Subclasses can override. Must return all properties.\n\tcomputeRange: function(date) {\n\t\tvar intervalUnit = computeIntervalUnit(this.intervalDuration);\n\t\tvar intervalStart = date.clone().startOf(intervalUnit);\n\t\tvar intervalEnd = intervalStart.clone().add(this.intervalDuration);\n\t\tvar start, end;\n\n\t\t// normalize the range's time-ambiguity\n\t\tif (/year|month|week|day/.test(intervalUnit)) { // whole-days?\n\t\t\tintervalStart.stripTime();\n\t\t\tintervalEnd.stripTime();\n\t\t}\n\t\telse { // needs to have a time?\n\t\t\tif (!intervalStart.hasTime()) {\n\t\t\t\tintervalStart = this.calendar.time(0); // give 00:00 time\n\t\t\t}\n\t\t\tif (!intervalEnd.hasTime()) {\n\t\t\t\tintervalEnd = this.calendar.time(0); // give 00:00 time\n\t\t\t}\n\t\t}\n\n\t\tstart = intervalStart.clone();\n\t\tstart = this.skipHiddenDays(start);\n\t\tend = intervalEnd.clone();\n\t\tend = this.skipHiddenDays(end, -1, true); // exclusively move backwards\n\n\t\treturn {\n\t\t\tintervalUnit: intervalUnit,\n\t\t\tintervalStart: intervalStart,\n\t\t\tintervalEnd: intervalEnd,\n\t\t\tstart: start,\n\t\t\tend: end\n\t\t};\n\t},\n\n\n\t// Computes the new date when the user hits the prev button, given the current date\n\tcomputePrevDate: function(date) {\n\t\treturn this.massageCurrentDate(\n\t\t\tdate.clone().startOf(this.intervalUnit).subtract(this.intervalDuration), -1\n\t\t);\n\t},\n\n\n\t// Computes the new date when the user hits the next button, given the current date\n\tcomputeNextDate: function(date) {\n\t\treturn this.massageCurrentDate(\n\t\t\tdate.clone().startOf(this.intervalUnit).add(this.intervalDuration)\n\t\t);\n\t},\n\n\n\t// Given an arbitrarily calculated current date of the calendar, returns a date that is ensured to be completely\n\t// visible. `direction` is optional and indicates which direction the current date was being\n\t// incremented or decremented (1 or -1).\n\tmassageCurrentDate: function(date, direction) {\n\t\tif (this.intervalDuration.as('days') <= 1) { // if the view displays a single day or smaller\n\t\t\tif (this.isHiddenDay(date)) {\n\t\t\t\tdate = this.skipHiddenDays(date, direction);\n\t\t\t\tdate.startOf('day');\n\t\t\t}\n\t\t}\n\n\t\treturn date;\n\t},\n\n\n\t/* Title and Date Formatting\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Sets the view's title property to the most updated computed value\n\tupdateTitle: function() {\n\t\tthis.title = this.computeTitle();\n\t\tthis.calendar.setToolbarsTitle(this.title);\n\t},\n\n\n\t// Computes what the title at the top of the calendar should be for this view\n\tcomputeTitle: function() {\n\t\treturn this.formatRange(\n\t\t\t{\n\t\t\t\t// in case intervalStart/End has a time, make sure timezone is correct\n\t\t\t\tstart: this.calendar.applyTimezone(this.intervalStart),\n\t\t\t\tend: this.calendar.applyTimezone(this.intervalEnd)\n\t\t\t},\n\t\t\tthis.opt('titleFormat') || this.computeTitleFormat(),\n\t\t\tthis.opt('titleRangeSeparator')\n\t\t);\n\t},\n\n\n\t// Generates the format string that should be used to generate the title for the current date range.\n\t// Attempts to compute the most appropriate format if not explicitly specified with `titleFormat`.\n\tcomputeTitleFormat: function() {\n\t\tif (this.intervalUnit == 'year') {\n\t\t\treturn 'YYYY';\n\t\t}\n\t\telse if (this.intervalUnit == 'month') {\n\t\t\treturn this.opt('monthYearFormat'); // like \"September 2014\"\n\t\t}\n\t\telse if (this.intervalDuration.as('days') > 1) {\n\t\t\treturn 'll'; // multi-day range. shorter, like \"Sep 9 - 10 2014\"\n\t\t}\n\t\telse {\n\t\t\treturn 'LL'; // one day. longer, like \"September 9 2014\"\n\t\t}\n\t},\n\n\n\t// Utility for formatting a range. Accepts a range object, formatting string, and optional separator.\n\t// Displays all-day ranges naturally, with an inclusive end. Takes the current isRTL into account.\n\t// The timezones of the dates within `range` will be respected.\n\tformatRange: function(range, formatStr, separator) {\n\t\tvar end = range.end;\n\n\t\tif (!end.hasTime()) { // all-day?\n\t\t\tend = end.clone().subtract(1); // convert to inclusive. last ms of previous day\n\t\t}\n\n\t\treturn formatRange(range.start, end, formatStr, separator, this.opt('isRTL'));\n\t},\n\n\n\tgetAllDayHtml: function() {\n\t\treturn this.opt('allDayHtml') || htmlEscape(this.opt('allDayText'));\n\t},\n\n\n\t/* Navigation\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Generates HTML for an anchor to another view into the calendar.\n\t// Will either generate an <a> tag or a non-clickable <span> tag, depending on enabled settings.\n\t// `gotoOptions` can either be a moment input, or an object with the form:\n\t// { date, type, forceOff }\n\t// `type` is a view-type like \"day\" or \"week\". default value is \"day\".\n\t// `attrs` and `innerHtml` are use to generate the rest of the HTML tag.\n\tbuildGotoAnchorHtml: function(gotoOptions, attrs, innerHtml) {\n\t\tvar date, type, forceOff;\n\t\tvar finalOptions;\n\n\t\tif ($.isPlainObject(gotoOptions)) {\n\t\t\tdate = gotoOptions.date;\n\t\t\ttype = gotoOptions.type;\n\t\t\tforceOff = gotoOptions.forceOff;\n\t\t}\n\t\telse {\n\t\t\tdate = gotoOptions; // a single moment input\n\t\t}\n\t\tdate = FC.moment(date); // if a string, parse it\n\n\t\tfinalOptions = { // for serialization into the link\n\t\t\tdate: date.format('YYYY-MM-DD'),\n\t\t\ttype: type || 'day'\n\t\t};\n\n\t\tif (typeof attrs === 'string') {\n\t\t\tinnerHtml = attrs;\n\t\t\tattrs = null;\n\t\t}\n\n\t\tattrs = attrs ? ' ' + attrsToStr(attrs) : ''; // will have a leading space\n\t\tinnerHtml = innerHtml || '';\n\n\t\tif (!forceOff && this.opt('navLinks')) {\n\t\t\treturn '<a' + attrs +\n\t\t\t\t' data-goto=\"' + htmlEscape(JSON.stringify(finalOptions)) + '\">' +\n\t\t\t\tinnerHtml +\n\t\t\t\t'</a>';\n\t\t}\n\t\telse {\n\t\t\treturn '<span' + attrs + '>' +\n\t\t\t\tinnerHtml +\n\t\t\t\t'</span>';\n\t\t}\n\t},\n\n\n\t// Rendering Non-date-related Content\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\t// Sets the container element that the view should render inside of, does global DOM-related initializations,\n\t// and renders all the non-date-related content inside.\n\tsetElement: function(el) {\n\t\tthis.el = el;\n\t\tthis.bindGlobalHandlers();\n\t\tthis.renderSkeleton();\n\t},\n\n\n\t// Removes the view's container element from the DOM, clearing any content beforehand.\n\t// Undoes any other DOM-related attachments.\n\tremoveElement: function() {\n\t\tthis.unsetDate();\n\t\tthis.unrenderSkeleton();\n\n\t\tthis.unbindGlobalHandlers();\n\n\t\tthis.el.remove();\n\t\t// NOTE: don't null-out this.el in case the View was destroyed within an API callback.\n\t\t// We don't null-out the View's other jQuery element references upon destroy,\n\t\t//  so we shouldn't kill this.el either.\n\t},\n\n\n\t// Renders the basic structure of the view before any content is rendered\n\trenderSkeleton: function() {\n\t\t// subclasses should implement\n\t},\n\n\n\t// Unrenders the basic structure of the view\n\tunrenderSkeleton: function() {\n\t\t// subclasses should implement\n\t},\n\n\n\t// Date Setting/Unsetting\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tsetDate: function(date) {\n\t\tvar isReset = this.isDateSet;\n\n\t\tthis.isDateSet = true;\n\t\tthis.handleDate(date, isReset);\n\t\tthis.trigger(isReset ? 'dateReset' : 'dateSet', date);\n\t},\n\n\n\tunsetDate: function() {\n\t\tif (this.isDateSet) {\n\t\t\tthis.isDateSet = false;\n\t\t\tthis.handleDateUnset();\n\t\t\tthis.trigger('dateUnset');\n\t\t}\n\t},\n\n\n\t// Date Handling\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\thandleDate: function(date, isReset) {\n\t\tvar _this = this;\n\n\t\tthis.unbindEvents(); // will do nothing if not already bound\n\t\tthis.requestDateRender(date).then(function() {\n\t\t\t// wish we could start earlier, but setRange/computeRange needs to execute first\n\t\t\t_this.bindEvents(); // will request events\n\t\t});\n\t},\n\n\n\thandleDateUnset: function() {\n\t\tthis.unbindEvents();\n\t\tthis.requestDateUnrender();\n\t},\n\n\n\t// Date Render Queuing\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\t// if date not specified, uses current\n\trequestDateRender: function(date) {\n\t\tvar _this = this;\n\n\t\treturn this.dateRenderQueue.add(function() {\n\t\t\treturn _this.executeDateRender(date);\n\t\t});\n\t},\n\n\n\trequestDateUnrender: function() {\n\t\tvar _this = this;\n\n\t\treturn this.dateRenderQueue.add(function() {\n\t\t\treturn _this.executeDateUnrender();\n\t\t});\n\t},\n\n\n\t// Date High-level Rendering\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\t// if date not specified, uses current\n\texecuteDateRender: function(date) {\n\t\tvar _this = this;\n\n\t\t// if rendering a new date, reset scroll to initial state (scrollTime)\n\t\tif (date) {\n\t\t\tthis.captureInitialScroll();\n\t\t}\n\t\telse {\n\t\t\tthis.captureScroll(); // a rerender of the current date\n\t\t}\n\n\t\tthis.freezeHeight();\n\n\t\treturn this.executeDateUnrender().then(function() {\n\n\t\t\tif (date) {\n\t\t\t\t_this.setRange(_this.computeRange(date));\n\t\t\t}\n\n\t\t\tif (_this.render) {\n\t\t\t\t_this.render(); // TODO: deprecate\n\t\t\t}\n\n\t\t\t_this.renderDates();\n\t\t\t_this.updateSize();\n\t\t\t_this.renderBusinessHours(); // might need coordinates, so should go after updateSize()\n\t\t\t_this.startNowIndicator();\n\n\t\t\t_this.thawHeight();\n\t\t\t_this.releaseScroll();\n\n\t\t\t_this.isDateRendered = true;\n\t\t\t_this.onDateRender();\n\t\t\t_this.trigger('dateRender');\n\t\t});\n\t},\n\n\n\texecuteDateUnrender: function() {\n\t\tvar _this = this;\n\n\t\tif (_this.isDateRendered) {\n\t\t\treturn this.requestEventsUnrender().then(function() {\n\n\t\t\t\t_this.unselect();\n\t\t\t\t_this.stopNowIndicator();\n\t\t\t\t_this.triggerUnrender();\n\t\t\t\t_this.unrenderBusinessHours();\n\t\t\t\t_this.unrenderDates();\n\n\t\t\t\tif (_this.destroy) {\n\t\t\t\t\t_this.destroy(); // TODO: deprecate\n\t\t\t\t}\n\n\t\t\t\t_this.isDateRendered = false;\n\t\t\t\t_this.trigger('dateUnrender');\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\treturn Promise.resolve();\n\t\t}\n\t},\n\n\n\t// Date Rendering Triggers\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tonDateRender: function() {\n\t\tthis.triggerRender();\n\t},\n\n\n\t// Date Low-level Rendering\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\t// date-cell content only\n\trenderDates: function() {\n\t\t// subclasses should implement\n\t},\n\n\n\t// date-cell content only\n\tunrenderDates: function() {\n\t\t// subclasses should override\n\t},\n\n\n\t// Misc view rendering utils\n\t// -------------------------\n\n\n\t// Signals that the view's content has been rendered\n\ttriggerRender: function() {\n\t\tthis.publiclyTrigger('viewRender', this, this, this.el);\n\t},\n\n\n\t// Signals that the view's content is about to be unrendered\n\ttriggerUnrender: function() {\n\t\tthis.publiclyTrigger('viewDestroy', this, this, this.el);\n\t},\n\n\n\t// Binds DOM handlers to elements that reside outside the view container, such as the document\n\tbindGlobalHandlers: function() {\n\t\tthis.listenTo($(document), 'mousedown', this.handleDocumentMousedown);\n\t\tthis.listenTo($(document), 'touchstart', this.processUnselect);\n\t},\n\n\n\t// Unbinds DOM handlers from elements that reside outside the view container\n\tunbindGlobalHandlers: function() {\n\t\tthis.stopListeningTo($(document));\n\t},\n\n\n\t// Initializes internal variables related to theming\n\tinitThemingProps: function() {\n\t\tvar tm = this.opt('theme') ? 'ui' : 'fc';\n\n\t\tthis.widgetHeaderClass = tm + '-widget-header';\n\t\tthis.widgetContentClass = tm + '-widget-content';\n\t\tthis.highlightStateClass = tm + '-state-highlight';\n\t},\n\n\n\t/* Business Hours\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders business-hours onto the view. Assumes updateSize has already been called.\n\trenderBusinessHours: function() {\n\t\t// subclasses should implement\n\t},\n\n\n\t// Unrenders previously-rendered business-hours\n\tunrenderBusinessHours: function() {\n\t\t// subclasses should implement\n\t},\n\n\n\t/* Now Indicator\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Immediately render the current time indicator and begins re-rendering it at an interval,\n\t// which is defined by this.getNowIndicatorUnit().\n\t// TODO: somehow do this for the current whole day's background too\n\tstartNowIndicator: function() {\n\t\tvar _this = this;\n\t\tvar unit;\n\t\tvar update;\n\t\tvar delay; // ms wait value\n\n\t\tif (this.opt('nowIndicator')) {\n\t\t\tunit = this.getNowIndicatorUnit();\n\t\t\tif (unit) {\n\t\t\t\tupdate = proxy(this, 'updateNowIndicator'); // bind to `this`\n\n\t\t\t\tthis.initialNowDate = this.calendar.getNow();\n\t\t\t\tthis.initialNowQueriedMs = +new Date();\n\t\t\t\tthis.renderNowIndicator(this.initialNowDate);\n\t\t\t\tthis.isNowIndicatorRendered = true;\n\n\t\t\t\t// wait until the beginning of the next interval\n\t\t\t\tdelay = this.initialNowDate.clone().startOf(unit).add(1, unit) - this.initialNowDate;\n\t\t\t\tthis.nowIndicatorTimeoutID = setTimeout(function() {\n\t\t\t\t\t_this.nowIndicatorTimeoutID = null;\n\t\t\t\t\tupdate();\n\t\t\t\t\tdelay = +moment.duration(1, unit);\n\t\t\t\t\tdelay = Math.max(100, delay); // prevent too frequent\n\t\t\t\t\t_this.nowIndicatorIntervalID = setInterval(update, delay); // update every interval\n\t\t\t\t}, delay);\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// rerenders the now indicator, computing the new current time from the amount of time that has passed\n\t// since the initial getNow call.\n\tupdateNowIndicator: function() {\n\t\tif (this.isNowIndicatorRendered) {\n\t\t\tthis.unrenderNowIndicator();\n\t\t\tthis.renderNowIndicator(\n\t\t\t\tthis.initialNowDate.clone().add(new Date() - this.initialNowQueriedMs) // add ms\n\t\t\t);\n\t\t}\n\t},\n\n\n\t// Immediately unrenders the view's current time indicator and stops any re-rendering timers.\n\t// Won't cause side effects if indicator isn't rendered.\n\tstopNowIndicator: function() {\n\t\tif (this.isNowIndicatorRendered) {\n\n\t\t\tif (this.nowIndicatorTimeoutID) {\n\t\t\t\tclearTimeout(this.nowIndicatorTimeoutID);\n\t\t\t\tthis.nowIndicatorTimeoutID = null;\n\t\t\t}\n\t\t\tif (this.nowIndicatorIntervalID) {\n\t\t\t\tclearTimeout(this.nowIndicatorIntervalID);\n\t\t\t\tthis.nowIndicatorIntervalID = null;\n\t\t\t}\n\n\t\t\tthis.unrenderNowIndicator();\n\t\t\tthis.isNowIndicatorRendered = false;\n\t\t}\n\t},\n\n\n\t// Returns a string unit, like 'second' or 'minute' that defined how often the current time indicator\n\t// should be refreshed. If something falsy is returned, no time indicator is rendered at all.\n\tgetNowIndicatorUnit: function() {\n\t\t// subclasses should implement\n\t},\n\n\n\t// Renders a current time indicator at the given datetime\n\trenderNowIndicator: function(date) {\n\t\t// subclasses should implement\n\t},\n\n\n\t// Undoes the rendering actions from renderNowIndicator\n\tunrenderNowIndicator: function() {\n\t\t// subclasses should implement\n\t},\n\n\n\t/* Dimensions\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Refreshes anything dependant upon sizing of the container element of the grid\n\tupdateSize: function(isResize) {\n\n\t\tif (isResize) {\n\t\t\tthis.captureScroll();\n\t\t}\n\n\t\tthis.updateHeight(isResize);\n\t\tthis.updateWidth(isResize);\n\t\tthis.updateNowIndicator();\n\n\t\tif (isResize) {\n\t\t\tthis.releaseScroll();\n\t\t}\n\t},\n\n\n\t// Refreshes the horizontal dimensions of the calendar\n\tupdateWidth: function(isResize) {\n\t\t// subclasses should implement\n\t},\n\n\n\t// Refreshes the vertical dimensions of the calendar\n\tupdateHeight: function(isResize) {\n\t\tvar calendar = this.calendar; // we poll the calendar for height information\n\n\t\tthis.setHeight(\n\t\t\tcalendar.getSuggestedViewHeight(),\n\t\t\tcalendar.isHeightAuto()\n\t\t);\n\t},\n\n\n\t// Updates the vertical dimensions of the calendar to the specified height.\n\t// if `isAuto` is set to true, height becomes merely a suggestion and the view should use its \"natural\" height.\n\tsetHeight: function(height, isAuto) {\n\t\t// subclasses should implement\n\t},\n\n\n\t/* Scroller\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\tcapturedScroll: null,\n\tcapturedScrollDepth: 0,\n\n\n\tcaptureScroll: function() {\n\t\tif (!(this.capturedScrollDepth++)) {\n\t\t\tthis.capturedScroll = this.isDateRendered ? this.queryScroll() : {}; // require a render first\n\t\t\treturn true; // root?\n\t\t}\n\t\treturn false;\n\t},\n\n\n\tcaptureInitialScroll: function(forcedScroll) {\n\t\tif (this.captureScroll()) { // root?\n\t\t\tthis.capturedScroll.isInitial = true;\n\n\t\t\tif (forcedScroll) {\n\t\t\t\t$.extend(this.capturedScroll, forcedScroll);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.capturedScroll.isComputed = true;\n\t\t\t}\n\t\t}\n\t},\n\n\n\treleaseScroll: function() {\n\t\tvar scroll = this.capturedScroll;\n\t\tvar isRoot = this.discardScroll();\n\n\t\tif (scroll.isComputed) {\n\t\t\tif (isRoot) {\n\t\t\t\t// only compute initial scroll if it will actually be used (is the root capture)\n\t\t\t\t$.extend(scroll, this.computeInitialScroll());\n\t\t\t}\n\t\t\telse {\n\t\t\t\tscroll = null; // scroll couldn't be computed. don't apply it to the DOM\n\t\t\t}\n\t\t}\n\n\t\tif (scroll) {\n\t\t\t// we act immediately on a releaseScroll operation, as opposed to captureScroll.\n\t\t\t// if capture/release wraps a render operation that screws up the scroll,\n\t\t\t// we still want to restore it a good state after, regardless of depth.\n\n\t\t\tif (scroll.isInitial) {\n\t\t\t\tthis.hardSetScroll(scroll); // outsmart how browsers set scroll on initial DOM\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.setScroll(scroll);\n\t\t\t}\n\t\t}\n\t},\n\n\n\tdiscardScroll: function() {\n\t\tif (!(--this.capturedScrollDepth)) {\n\t\t\tthis.capturedScroll = null;\n\t\t\treturn true; // root?\n\t\t}\n\t\treturn false;\n\t},\n\n\n\tcomputeInitialScroll: function() {\n\t\treturn {};\n\t},\n\n\n\tqueryScroll: function() {\n\t\treturn {};\n\t},\n\n\n\thardSetScroll: function(scroll) {\n\t\tvar _this = this;\n\t\tvar exec = function() { _this.setScroll(scroll); };\n\t\texec();\n\t\tsetTimeout(exec, 0); // to surely clear the browser's initial scroll for the DOM\n\t},\n\n\n\tsetScroll: function(scroll) {\n\t},\n\n\n\t/* Height Freezing\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\tfreezeHeight: function() {\n\t\tthis.calendar.freezeContentHeight();\n\t},\n\n\n\tthawHeight: function() {\n\t\tthis.calendar.thawContentHeight();\n\t},\n\n\n\t// Event Binding/Unbinding\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tbindEvents: function() {\n\t\tvar _this = this;\n\n\t\tif (!this.isEventsBound) {\n\t\t\tthis.isEventsBound = true;\n\t\t\tthis.rejectOn('eventsUnbind', this.requestEvents()).then(function(events) { // TODO: test rejection\n\t\t\t\t_this.listenTo(_this.calendar, 'eventsReset', _this.setEvents);\n\t\t\t\t_this.setEvents(events);\n\t\t\t});\n\t\t}\n\t},\n\n\n\tunbindEvents: function() {\n\t\tif (this.isEventsBound) {\n\t\t\tthis.isEventsBound = false;\n\t\t\tthis.stopListeningTo(this.calendar, 'eventsReset');\n\t\t\tthis.unsetEvents();\n\t\t\tthis.trigger('eventsUnbind');\n\t\t}\n\t},\n\n\n\t// Event Setting/Unsetting\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tsetEvents: function(events) {\n\t\tvar isReset = this.isEventSet;\n\n\t\tthis.isEventsSet = true;\n\t\tthis.handleEvents(events, isReset);\n\t\tthis.trigger(isReset ? 'eventsReset' : 'eventsSet', events);\n\t},\n\n\n\tunsetEvents: function() {\n\t\tif (this.isEventsSet) {\n\t\t\tthis.isEventsSet = false;\n\t\t\tthis.handleEventsUnset();\n\t\t\tthis.trigger('eventsUnset');\n\t\t}\n\t},\n\n\n\twhenEventsSet: function() {\n\t\tvar _this = this;\n\n\t\tif (this.isEventsSet) {\n\t\t\treturn Promise.resolve(this.getCurrentEvents());\n\t\t}\n\t\telse {\n\t\t\treturn new Promise(function(resolve) {\n\t\t\t\t_this.one('eventsSet', resolve);\n\t\t\t});\n\t\t}\n\t},\n\n\n\t// Event Handling\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\thandleEvents: function(events, isReset) {\n\t\tthis.requestEventsRender(events);\n\t},\n\n\n\thandleEventsUnset: function() {\n\t\tthis.requestEventsUnrender();\n\t},\n\n\n\t// Event Render Queuing\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\t// assumes any previous event renders have been cleared already\n\trequestEventsRender: function(events) {\n\t\tvar _this = this;\n\n\t\treturn this.eventRenderQueue.add(function() { // might not return a promise if debounced!? bad\n\t\t\treturn _this.executeEventsRender(events);\n\t\t});\n\t},\n\n\n\trequestEventsUnrender: function() {\n\t\tvar _this = this;\n\n\t\tif (this.isEventsRendered) {\n\t\t\treturn this.eventRenderQueue.addQuickly(function() {\n\t\t\t\treturn _this.executeEventsUnrender();\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\treturn Promise.resolve();\n\t\t}\n\t},\n\n\n\trequestCurrentEventsRender: function() {\n\t\tif (this.isEventsSet) {\n\t\t\tthis.requestEventsRender(this.getCurrentEvents());\n\t\t}\n\t\telse {\n\t\t\treturn Promise.reject();\n\t\t}\n\t},\n\n\n\t// Event High-level Rendering\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\texecuteEventsRender: function(events) {\n\t\tvar _this = this;\n\n\t\tthis.captureScroll();\n\t\tthis.freezeHeight();\n\n\t\treturn this.executeEventsUnrender().then(function() {\n\t\t\t_this.renderEvents(events);\n\n\t\t\t_this.thawHeight();\n\t\t\t_this.releaseScroll();\n\n\t\t\t_this.isEventsRendered = true;\n\t\t\t_this.onEventsRender();\n\t\t\t_this.trigger('eventsRender');\n\t\t});\n\t},\n\n\n\texecuteEventsUnrender: function() {\n\t\tif (this.isEventsRendered) {\n\t\t\tthis.onBeforeEventsUnrender();\n\n\t\t\tthis.captureScroll();\n\t\t\tthis.freezeHeight();\n\n\t\t\tif (this.destroyEvents) {\n\t\t\t\tthis.destroyEvents(); // TODO: deprecate\n\t\t\t}\n\n\t\t\tthis.unrenderEvents();\n\n\t\t\tthis.thawHeight();\n\t\t\tthis.releaseScroll();\n\n\t\t\tthis.isEventsRendered = false;\n\t\t\tthis.trigger('eventsUnrender');\n\t\t}\n\n\t\treturn Promise.resolve(); // always synchronous\n\t},\n\n\n\t// Event Rendering Triggers\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\t// Signals that all events have been rendered\n\tonEventsRender: function() {\n\t\tthis.renderedEventSegEach(function(seg) {\n\t\t\tthis.publiclyTrigger('eventAfterRender', seg.event, seg.event, seg.el);\n\t\t});\n\t\tthis.publiclyTrigger('eventAfterAllRender');\n\t},\n\n\n\t// Signals that all event elements are about to be removed\n\tonBeforeEventsUnrender: function() {\n\t\tthis.renderedEventSegEach(function(seg) {\n\t\t\tthis.publiclyTrigger('eventDestroy', seg.event, seg.event, seg.el);\n\t\t});\n\t},\n\n\n\t// Event Low-level Rendering\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\t// Renders the events onto the view.\n\trenderEvents: function(events) {\n\t\t// subclasses should implement\n\t},\n\n\n\t// Removes event elements from the view.\n\tunrenderEvents: function() {\n\t\t// subclasses should implement\n\t},\n\n\n\t// Event Data Access\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\trequestEvents: function() {\n\t\treturn this.calendar.requestEvents(this.start, this.end);\n\t},\n\n\n\tgetCurrentEvents: function() {\n\t\treturn this.calendar.getPrunedEventCache();\n\t},\n\n\n\t// Event Rendering Utils\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\t// Given an event and the default element used for rendering, returns the element that should actually be used.\n\t// Basically runs events and elements through the eventRender hook.\n\tresolveEventEl: function(event, el) {\n\t\tvar custom = this.publiclyTrigger('eventRender', event, event, el);\n\n\t\tif (custom === false) { // means don't render at all\n\t\t\tel = null;\n\t\t}\n\t\telse if (custom && custom !== true) {\n\t\t\tel = $(custom);\n\t\t}\n\n\t\treturn el;\n\t},\n\n\n\t// Hides all rendered event segments linked to the given event\n\tshowEvent: function(event) {\n\t\tthis.renderedEventSegEach(function(seg) {\n\t\t\tseg.el.css('visibility', '');\n\t\t}, event);\n\t},\n\n\n\t// Shows all rendered event segments linked to the given event\n\thideEvent: function(event) {\n\t\tthis.renderedEventSegEach(function(seg) {\n\t\t\tseg.el.css('visibility', 'hidden');\n\t\t}, event);\n\t},\n\n\n\t// Iterates through event segments that have been rendered (have an el). Goes through all by default.\n\t// If the optional `event` argument is specified, only iterates through segments linked to that event.\n\t// The `this` value of the callback function will be the view.\n\trenderedEventSegEach: function(func, event) {\n\t\tvar segs = this.getEventSegs();\n\t\tvar i;\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tif (!event || segs[i].event._id === event._id) {\n\t\t\t\tif (segs[i].el) {\n\t\t\t\t\tfunc.call(this, segs[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Retrieves all the rendered segment objects for the view\n\tgetEventSegs: function() {\n\t\t// subclasses must implement\n\t\treturn [];\n\t},\n\n\n\t/* Event Drag-n-Drop\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Computes if the given event is allowed to be dragged by the user\n\tisEventDraggable: function(event) {\n\t\treturn this.isEventStartEditable(event);\n\t},\n\n\n\tisEventStartEditable: function(event) {\n\t\treturn firstDefined(\n\t\t\tevent.startEditable,\n\t\t\t(event.source || {}).startEditable,\n\t\t\tthis.opt('eventStartEditable'),\n\t\t\tthis.isEventGenerallyEditable(event)\n\t\t);\n\t},\n\n\n\tisEventGenerallyEditable: function(event) {\n\t\treturn firstDefined(\n\t\t\tevent.editable,\n\t\t\t(event.source || {}).editable,\n\t\t\tthis.opt('editable')\n\t\t);\n\t},\n\n\n\t// Must be called when an event in the view is dropped onto new location.\n\t// `dropLocation` is an object that contains the new zoned start/end/allDay values for the event.\n\treportEventDrop: function(event, dropLocation, largeUnit, el, ev) {\n\t\tvar calendar = this.calendar;\n\t\tvar mutateResult = calendar.mutateEvent(event, dropLocation, largeUnit);\n\t\tvar undoFunc = function() {\n\t\t\tmutateResult.undo();\n\t\t\tcalendar.reportEventChange();\n\t\t};\n\n\t\tthis.triggerEventDrop(event, mutateResult.dateDelta, undoFunc, el, ev);\n\t\tcalendar.reportEventChange(); // will rerender events\n\t},\n\n\n\t// Triggers event-drop handlers that have subscribed via the API\n\ttriggerEventDrop: function(event, dateDelta, undoFunc, el, ev) {\n\t\tthis.publiclyTrigger('eventDrop', el[0], event, dateDelta, undoFunc, ev, {}); // {} = jqui dummy\n\t},\n\n\n\t/* External Element Drag-n-Drop\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Must be called when an external element, via jQuery UI, has been dropped onto the calendar.\n\t// `meta` is the parsed data that has been embedded into the dragging event.\n\t// `dropLocation` is an object that contains the new zoned start/end/allDay values for the event.\n\treportExternalDrop: function(meta, dropLocation, el, ev, ui) {\n\t\tvar eventProps = meta.eventProps;\n\t\tvar eventInput;\n\t\tvar event;\n\n\t\t// Try to build an event object and render it. TODO: decouple the two\n\t\tif (eventProps) {\n\t\t\teventInput = $.extend({}, eventProps, dropLocation);\n\t\t\tevent = this.calendar.renderEvent(eventInput, meta.stick)[0]; // renderEvent returns an array\n\t\t}\n\n\t\tthis.triggerExternalDrop(event, dropLocation, el, ev, ui);\n\t},\n\n\n\t// Triggers external-drop handlers that have subscribed via the API\n\ttriggerExternalDrop: function(event, dropLocation, el, ev, ui) {\n\n\t\t// trigger 'drop' regardless of whether element represents an event\n\t\tthis.publiclyTrigger('drop', el[0], dropLocation.start, ev, ui);\n\n\t\tif (event) {\n\t\t\tthis.publiclyTrigger('eventReceive', null, event); // signal an external event landed\n\t\t}\n\t},\n\n\n\t/* Drag-n-Drop Rendering (for both events and external elements)\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders a visual indication of a event or external-element drag over the given drop zone.\n\t// If an external-element, seg will be `null`.\n\t// Must return elements used for any mock events.\n\trenderDrag: function(dropLocation, seg) {\n\t\t// subclasses must implement\n\t},\n\n\n\t// Unrenders a visual indication of an event or external-element being dragged.\n\tunrenderDrag: function() {\n\t\t// subclasses must implement\n\t},\n\n\n\t/* Event Resizing\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Computes if the given event is allowed to be resized from its starting edge\n\tisEventResizableFromStart: function(event) {\n\t\treturn this.opt('eventResizableFromStart') && this.isEventResizable(event);\n\t},\n\n\n\t// Computes if the given event is allowed to be resized from its ending edge\n\tisEventResizableFromEnd: function(event) {\n\t\treturn this.isEventResizable(event);\n\t},\n\n\n\t// Computes if the given event is allowed to be resized by the user at all\n\tisEventResizable: function(event) {\n\t\tvar source = event.source || {};\n\n\t\treturn firstDefined(\n\t\t\tevent.durationEditable,\n\t\t\tsource.durationEditable,\n\t\t\tthis.opt('eventDurationEditable'),\n\t\t\tevent.editable,\n\t\t\tsource.editable,\n\t\t\tthis.opt('editable')\n\t\t);\n\t},\n\n\n\t// Must be called when an event in the view has been resized to a new length\n\treportEventResize: function(event, resizeLocation, largeUnit, el, ev) {\n\t\tvar calendar = this.calendar;\n\t\tvar mutateResult = calendar.mutateEvent(event, resizeLocation, largeUnit);\n\t\tvar undoFunc = function() {\n\t\t\tmutateResult.undo();\n\t\t\tcalendar.reportEventChange();\n\t\t};\n\n\t\tthis.triggerEventResize(event, mutateResult.durationDelta, undoFunc, el, ev);\n\t\tcalendar.reportEventChange(); // will rerender events\n\t},\n\n\n\t// Triggers event-resize handlers that have subscribed via the API\n\ttriggerEventResize: function(event, durationDelta, undoFunc, el, ev) {\n\t\tthis.publiclyTrigger('eventResize', el[0], event, durationDelta, undoFunc, ev, {}); // {} = jqui dummy\n\t},\n\n\n\t/* Selection (time range)\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Selects a date span on the view. `start` and `end` are both Moments.\n\t// `ev` is the native mouse event that begin the interaction.\n\tselect: function(span, ev) {\n\t\tthis.unselect(ev);\n\t\tthis.renderSelection(span);\n\t\tthis.reportSelection(span, ev);\n\t},\n\n\n\t// Renders a visual indication of the selection\n\trenderSelection: function(span) {\n\t\t// subclasses should implement\n\t},\n\n\n\t// Called when a new selection is made. Updates internal state and triggers handlers.\n\treportSelection: function(span, ev) {\n\t\tthis.isSelected = true;\n\t\tthis.triggerSelect(span, ev);\n\t},\n\n\n\t// Triggers handlers to 'select'\n\ttriggerSelect: function(span, ev) {\n\t\tthis.publiclyTrigger(\n\t\t\t'select',\n\t\t\tnull,\n\t\t\tthis.calendar.applyTimezone(span.start), // convert to calendar's tz for external API\n\t\t\tthis.calendar.applyTimezone(span.end), // \"\n\t\t\tev\n\t\t);\n\t},\n\n\n\t// Undoes a selection. updates in the internal state and triggers handlers.\n\t// `ev` is the native mouse event that began the interaction.\n\tunselect: function(ev) {\n\t\tif (this.isSelected) {\n\t\t\tthis.isSelected = false;\n\t\t\tif (this.destroySelection) {\n\t\t\t\tthis.destroySelection(); // TODO: deprecate\n\t\t\t}\n\t\t\tthis.unrenderSelection();\n\t\t\tthis.publiclyTrigger('unselect', null, ev);\n\t\t}\n\t},\n\n\n\t// Unrenders a visual indication of selection\n\tunrenderSelection: function() {\n\t\t// subclasses should implement\n\t},\n\n\n\t/* Event Selection\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\tselectEvent: function(event) {\n\t\tif (!this.selectedEvent || this.selectedEvent !== event) {\n\t\t\tthis.unselectEvent();\n\t\t\tthis.renderedEventSegEach(function(seg) {\n\t\t\t\tseg.el.addClass('fc-selected');\n\t\t\t}, event);\n\t\t\tthis.selectedEvent = event;\n\t\t}\n\t},\n\n\n\tunselectEvent: function() {\n\t\tif (this.selectedEvent) {\n\t\t\tthis.renderedEventSegEach(function(seg) {\n\t\t\t\tseg.el.removeClass('fc-selected');\n\t\t\t}, this.selectedEvent);\n\t\t\tthis.selectedEvent = null;\n\t\t}\n\t},\n\n\n\tisEventSelected: function(event) {\n\t\t// event references might change on refetchEvents(), while selectedEvent doesn't,\n\t\t// so compare IDs\n\t\treturn this.selectedEvent && this.selectedEvent._id === event._id;\n\t},\n\n\n\t/* Mouse / Touch Unselecting (time range & event unselection)\n\t------------------------------------------------------------------------------------------------------------------*/\n\t// TODO: move consistently to down/start or up/end?\n\t// TODO: don't kill previous selection if touch scrolling\n\n\n\thandleDocumentMousedown: function(ev) {\n\t\tif (isPrimaryMouseButton(ev)) {\n\t\t\tthis.processUnselect(ev);\n\t\t}\n\t},\n\n\n\tprocessUnselect: function(ev) {\n\t\tthis.processRangeUnselect(ev);\n\t\tthis.processEventUnselect(ev);\n\t},\n\n\n\tprocessRangeUnselect: function(ev) {\n\t\tvar ignore;\n\n\t\t// is there a time-range selection?\n\t\tif (this.isSelected && this.opt('unselectAuto')) {\n\t\t\t// only unselect if the clicked element is not identical to or inside of an 'unselectCancel' element\n\t\t\tignore = this.opt('unselectCancel');\n\t\t\tif (!ignore || !$(ev.target).closest(ignore).length) {\n\t\t\t\tthis.unselect(ev);\n\t\t\t}\n\t\t}\n\t},\n\n\n\tprocessEventUnselect: function(ev) {\n\t\tif (this.selectedEvent) {\n\t\t\tif (!$(ev.target).closest('.fc-selected').length) {\n\t\t\t\tthis.unselectEvent();\n\t\t\t}\n\t\t}\n\t},\n\n\n\t/* Day Click\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Triggers handlers to 'dayClick'\n\t// Span has start/end of the clicked area. Only the start is useful.\n\ttriggerDayClick: function(span, dayEl, ev) {\n\t\tthis.publiclyTrigger(\n\t\t\t'dayClick',\n\t\t\tdayEl,\n\t\t\tthis.calendar.applyTimezone(span.start), // convert to calendar's timezone for external API\n\t\t\tev\n\t\t);\n\t},\n\n\n\t/* Date Utils\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Initializes internal variables related to calculating hidden days-of-week\n\tinitHiddenDays: function() {\n\t\tvar hiddenDays = this.opt('hiddenDays') || []; // array of day-of-week indices that are hidden\n\t\tvar isHiddenDayHash = []; // is the day-of-week hidden? (hash with day-of-week-index -> bool)\n\t\tvar dayCnt = 0;\n\t\tvar i;\n\n\t\tif (this.opt('weekends') === false) {\n\t\t\thiddenDays.push(0, 6); // 0=sunday, 6=saturday\n\t\t}\n\n\t\tfor (i = 0; i < 7; i++) {\n\t\t\tif (\n\t\t\t\t!(isHiddenDayHash[i] = $.inArray(i, hiddenDays) !== -1)\n\t\t\t) {\n\t\t\t\tdayCnt++;\n\t\t\t}\n\t\t}\n\n\t\tif (!dayCnt) {\n\t\t\tthrow 'invalid hiddenDays'; // all days were hidden? bad.\n\t\t}\n\n\t\tthis.isHiddenDayHash = isHiddenDayHash;\n\t},\n\n\n\t// Is the current day hidden?\n\t// `day` is a day-of-week index (0-6), or a Moment\n\tisHiddenDay: function(day) {\n\t\tif (moment.isMoment(day)) {\n\t\t\tday = day.day();\n\t\t}\n\t\treturn this.isHiddenDayHash[day];\n\t},\n\n\n\t// Incrementing the current day until it is no longer a hidden day, returning a copy.\n\t// If the initial value of `date` is not a hidden day, don't do anything.\n\t// Pass `isExclusive` as `true` if you are dealing with an end date.\n\t// `inc` defaults to `1` (increment one day forward each time)\n\tskipHiddenDays: function(date, inc, isExclusive) {\n\t\tvar out = date.clone();\n\t\tinc = inc || 1;\n\t\twhile (\n\t\t\tthis.isHiddenDayHash[(out.day() + (isExclusive ? inc : 0) + 7) % 7]\n\t\t) {\n\t\t\tout.add(inc, 'days');\n\t\t}\n\t\treturn out;\n\t},\n\n\n\t// Returns the date range of the full days the given range visually appears to occupy.\n\t// Returns a new range object.\n\tcomputeDayRange: function(range) {\n\t\tvar startDay = range.start.clone().stripTime(); // the beginning of the day the range starts\n\t\tvar end = range.end;\n\t\tvar endDay = null;\n\t\tvar endTimeMS;\n\n\t\tif (end) {\n\t\t\tendDay = end.clone().stripTime(); // the beginning of the day the range exclusively ends\n\t\t\tendTimeMS = +end.time(); // # of milliseconds into `endDay`\n\n\t\t\t// If the end time is actually inclusively part of the next day and is equal to or\n\t\t\t// beyond the next day threshold, adjust the end to be the exclusive end of `endDay`.\n\t\t\t// Otherwise, leaving it as inclusive will cause it to exclude `endDay`.\n\t\t\tif (endTimeMS && endTimeMS >= this.nextDayThreshold) {\n\t\t\t\tendDay.add(1, 'days');\n\t\t\t}\n\t\t}\n\n\t\t// If no end was specified, or if it is within `startDay` but not past nextDayThreshold,\n\t\t// assign the default duration of one day.\n\t\tif (!end || endDay <= startDay) {\n\t\t\tendDay = startDay.clone().add(1, 'days');\n\t\t}\n\n\t\treturn { start: startDay, end: endDay };\n\t},\n\n\n\t// Does the given event visually appear to occupy more than one day?\n\tisMultiDayEvent: function(event) {\n\t\tvar range = this.computeDayRange(event); // event is range-ish\n\n\t\treturn range.end.diff(range.start, 'days') > 1;\n\t}\n\n});\n\n;;\n\n/*\nEmbodies a div that has potential scrollbars\n*/\nvar Scroller = FC.Scroller = Class.extend({\n\n\tel: null, // the guaranteed outer element\n\tscrollEl: null, // the element with the scrollbars\n\toverflowX: null,\n\toverflowY: null,\n\n\n\tconstructor: function(options) {\n\t\toptions = options || {};\n\t\tthis.overflowX = options.overflowX || options.overflow || 'auto';\n\t\tthis.overflowY = options.overflowY || options.overflow || 'auto';\n\t},\n\n\n\trender: function() {\n\t\tthis.el = this.renderEl();\n\t\tthis.applyOverflow();\n\t},\n\n\n\trenderEl: function() {\n\t\treturn (this.scrollEl = $('<div class=\"fc-scroller\"></div>'));\n\t},\n\n\n\t// sets to natural height, unlocks overflow\n\tclear: function() {\n\t\tthis.setHeight('auto');\n\t\tthis.applyOverflow();\n\t},\n\n\n\tdestroy: function() {\n\t\tthis.el.remove();\n\t},\n\n\n\t// Overflow\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tapplyOverflow: function() {\n\t\tthis.scrollEl.css({\n\t\t\t'overflow-x': this.overflowX,\n\t\t\t'overflow-y': this.overflowY\n\t\t});\n\t},\n\n\n\t// Causes any 'auto' overflow values to resolves to 'scroll' or 'hidden'.\n\t// Useful for preserving scrollbar widths regardless of future resizes.\n\t// Can pass in scrollbarWidths for optimization.\n\tlockOverflow: function(scrollbarWidths) {\n\t\tvar overflowX = this.overflowX;\n\t\tvar overflowY = this.overflowY;\n\n\t\tscrollbarWidths = scrollbarWidths || this.getScrollbarWidths();\n\n\t\tif (overflowX === 'auto') {\n\t\t\toverflowX = (\n\t\t\t\t\tscrollbarWidths.top || scrollbarWidths.bottom || // horizontal scrollbars?\n\t\t\t\t\t// OR scrolling pane with massless scrollbars?\n\t\t\t\t\tthis.scrollEl[0].scrollWidth - 1 > this.scrollEl[0].clientWidth\n\t\t\t\t\t\t// subtract 1 because of IE off-by-one issue\n\t\t\t\t) ? 'scroll' : 'hidden';\n\t\t}\n\n\t\tif (overflowY === 'auto') {\n\t\t\toverflowY = (\n\t\t\t\t\tscrollbarWidths.left || scrollbarWidths.right || // vertical scrollbars?\n\t\t\t\t\t// OR scrolling pane with massless scrollbars?\n\t\t\t\t\tthis.scrollEl[0].scrollHeight - 1 > this.scrollEl[0].clientHeight\n\t\t\t\t\t\t// subtract 1 because of IE off-by-one issue\n\t\t\t\t) ? 'scroll' : 'hidden';\n\t\t}\n\n\t\tthis.scrollEl.css({ 'overflow-x': overflowX, 'overflow-y': overflowY });\n\t},\n\n\n\t// Getters / Setters\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tsetHeight: function(height) {\n\t\tthis.scrollEl.height(height);\n\t},\n\n\n\tgetScrollTop: function() {\n\t\treturn this.scrollEl.scrollTop();\n\t},\n\n\n\tsetScrollTop: function(top) {\n\t\tthis.scrollEl.scrollTop(top);\n\t},\n\n\n\tgetClientWidth: function() {\n\t\treturn this.scrollEl[0].clientWidth;\n\t},\n\n\n\tgetClientHeight: function() {\n\t\treturn this.scrollEl[0].clientHeight;\n\t},\n\n\n\tgetScrollbarWidths: function() {\n\t\treturn getScrollbarWidths(this.scrollEl);\n\t}\n\n});\n\n;;\nfunction Iterator(items) {\n    this.items = items || [];\n}\n\n\n/* Calls a method on every item passing the arguments through */\nIterator.prototype.proxyCall = function(methodName) {\n    var args = Array.prototype.slice.call(arguments, 1);\n    var results = [];\n\n    this.items.forEach(function(item) {\n        results.push(item[methodName].apply(item, args));\n    });\n\n    return results;\n};\n\n;;\n\n/* Toolbar with buttons and title\n----------------------------------------------------------------------------------------------------------------------*/\n\nfunction Toolbar(calendar, toolbarOptions) {\n\tvar t = this;\n\n\t// exports\n\tt.setToolbarOptions = setToolbarOptions;\n\tt.render = render;\n\tt.removeElement = removeElement;\n\tt.updateTitle = updateTitle;\n\tt.activateButton = activateButton;\n\tt.deactivateButton = deactivateButton;\n\tt.disableButton = disableButton;\n\tt.enableButton = enableButton;\n\tt.getViewsWithButtons = getViewsWithButtons;\n\tt.el = null; // mirrors local `el`\n\n\t// locals\n\tvar el;\n\tvar viewsWithButtons = [];\n\tvar tm;\n\n\t// method to update toolbar-specific options, not calendar-wide options\n\tfunction setToolbarOptions(newToolbarOptions) {\n\t\ttoolbarOptions = newToolbarOptions;\n\t}\n\n\t// can be called repeatedly and will rerender\n\tfunction render() {\n\t\tvar sections = toolbarOptions.layout;\n\n\t\ttm = calendar.options.theme ? 'ui' : 'fc';\n\n\t\tif (sections) {\n\t\t\tif (!el) {\n\t\t\t\tel = this.el = $(\"<div class='fc-toolbar \"+ toolbarOptions.extraClasses + \"'/>\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\tel.empty();\n\t\t\t}\n\t\t\tel.append(renderSection('left'))\n\t\t\t\t.append(renderSection('right'))\n\t\t\t\t.append(renderSection('center'))\n\t\t\t\t.append('<div class=\"fc-clear\"/>');\n\t\t}\n\t\telse {\n\t\t\tremoveElement();\n\t\t}\n\t}\n\n\n\tfunction removeElement() {\n\t\tif (el) {\n\t\t\tel.remove();\n\t\t\tel = t.el = null;\n\t\t}\n\t}\n\n\n\tfunction renderSection(position) {\n\t\tvar sectionEl = $('<div class=\"fc-' + position + '\"/>');\n\t\tvar buttonStr = toolbarOptions.layout[position];\n\n\t\tif (buttonStr) {\n\t\t\t$.each(buttonStr.split(' '), function(i) {\n\t\t\t\tvar groupChildren = $();\n\t\t\t\tvar isOnlyButtons = true;\n\t\t\t\tvar groupEl;\n\n\t\t\t\t$.each(this.split(','), function(j, buttonName) {\n\t\t\t\t\tvar customButtonProps;\n\t\t\t\t\tvar viewSpec;\n\t\t\t\t\tvar buttonClick;\n\t\t\t\t\tvar overrideText; // text explicitly set by calendar's constructor options. overcomes icons\n\t\t\t\t\tvar defaultText;\n\t\t\t\t\tvar themeIcon;\n\t\t\t\t\tvar normalIcon;\n\t\t\t\t\tvar innerHtml;\n\t\t\t\t\tvar classes;\n\t\t\t\t\tvar button; // the element\n\n\t\t\t\t\tif (buttonName == 'title') {\n\t\t\t\t\t\tgroupChildren = groupChildren.add($('<h2>&nbsp;</h2>')); // we always want it to take up height\n\t\t\t\t\t\tisOnlyButtons = false;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif ((customButtonProps = (calendar.options.customButtons || {})[buttonName])) {\n\t\t\t\t\t\t\tbuttonClick = function(ev) {\n\t\t\t\t\t\t\t\tif (customButtonProps.click) {\n\t\t\t\t\t\t\t\t\tcustomButtonProps.click.call(button[0], ev);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\toverrideText = ''; // icons will override text\n\t\t\t\t\t\t\tdefaultText = customButtonProps.text;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if ((viewSpec = calendar.getViewSpec(buttonName))) {\n\t\t\t\t\t\t\tbuttonClick = function() {\n\t\t\t\t\t\t\t\tcalendar.changeView(buttonName);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tviewsWithButtons.push(buttonName);\n\t\t\t\t\t\t\toverrideText = viewSpec.buttonTextOverride;\n\t\t\t\t\t\t\tdefaultText = viewSpec.buttonTextDefault;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (calendar[buttonName]) { // a calendar method\n\t\t\t\t\t\t\tbuttonClick = function() {\n\t\t\t\t\t\t\t\tcalendar[buttonName]();\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\toverrideText = (calendar.overrides.buttonText || {})[buttonName];\n\t\t\t\t\t\t\tdefaultText = calendar.options.buttonText[buttonName]; // everything else is considered default\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (buttonClick) {\n\n\t\t\t\t\t\t\tthemeIcon =\n\t\t\t\t\t\t\t\tcustomButtonProps ?\n\t\t\t\t\t\t\t\t\tcustomButtonProps.themeIcon :\n\t\t\t\t\t\t\t\t\tcalendar.options.themeButtonIcons[buttonName];\n\n\t\t\t\t\t\t\tnormalIcon =\n\t\t\t\t\t\t\t\tcustomButtonProps ?\n\t\t\t\t\t\t\t\t\tcustomButtonProps.icon :\n\t\t\t\t\t\t\t\t\tcalendar.options.buttonIcons[buttonName];\n\n\t\t\t\t\t\t\tif (overrideText) {\n\t\t\t\t\t\t\t\tinnerHtml = htmlEscape(overrideText);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (themeIcon && calendar.options.theme) {\n\t\t\t\t\t\t\t\tinnerHtml = \"<span class='ui-icon ui-icon-\" + themeIcon + \"'></span>\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (normalIcon && !calendar.options.theme) {\n\t\t\t\t\t\t\t\tinnerHtml = \"<span class='fc-icon fc-icon-\" + normalIcon + \"'></span>\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tinnerHtml = htmlEscape(defaultText);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tclasses = [\n\t\t\t\t\t\t\t\t'fc-' + buttonName + '-button',\n\t\t\t\t\t\t\t\ttm + '-button',\n\t\t\t\t\t\t\t\ttm + '-state-default'\n\t\t\t\t\t\t\t];\n\n\t\t\t\t\t\t\tbutton = $( // type=\"button\" so that it doesn't submit a form\n\t\t\t\t\t\t\t\t'<button type=\"button\" class=\"' + classes.join(' ') + '\">' +\n\t\t\t\t\t\t\t\t\tinnerHtml +\n\t\t\t\t\t\t\t\t'</button>'\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.click(function(ev) {\n\t\t\t\t\t\t\t\t\t// don't process clicks for disabled buttons\n\t\t\t\t\t\t\t\t\tif (!button.hasClass(tm + '-state-disabled')) {\n\n\t\t\t\t\t\t\t\t\t\tbuttonClick(ev);\n\n\t\t\t\t\t\t\t\t\t\t// after the click action, if the button becomes the \"active\" tab, or disabled,\n\t\t\t\t\t\t\t\t\t\t// it should never have a hover class, so remove it now.\n\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\tbutton.hasClass(tm + '-state-active') ||\n\t\t\t\t\t\t\t\t\t\t\tbutton.hasClass(tm + '-state-disabled')\n\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\tbutton.removeClass(tm + '-state-hover');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.mousedown(function() {\n\t\t\t\t\t\t\t\t\t// the *down* effect (mouse pressed in).\n\t\t\t\t\t\t\t\t\t// only on buttons that are not the \"active\" tab, or disabled\n\t\t\t\t\t\t\t\t\tbutton\n\t\t\t\t\t\t\t\t\t\t.not('.' + tm + '-state-active')\n\t\t\t\t\t\t\t\t\t\t.not('.' + tm + '-state-disabled')\n\t\t\t\t\t\t\t\t\t\t.addClass(tm + '-state-down');\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.mouseup(function() {\n\t\t\t\t\t\t\t\t\t// undo the *down* effect\n\t\t\t\t\t\t\t\t\tbutton.removeClass(tm + '-state-down');\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.hover(\n\t\t\t\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\t\t\t\t// the *hover* effect.\n\t\t\t\t\t\t\t\t\t\t// only on buttons that are not the \"active\" tab, or disabled\n\t\t\t\t\t\t\t\t\t\tbutton\n\t\t\t\t\t\t\t\t\t\t\t.not('.' + tm + '-state-active')\n\t\t\t\t\t\t\t\t\t\t\t.not('.' + tm + '-state-disabled')\n\t\t\t\t\t\t\t\t\t\t\t.addClass(tm + '-state-hover');\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\t\t\t\t// undo the *hover* effect\n\t\t\t\t\t\t\t\t\t\tbutton\n\t\t\t\t\t\t\t\t\t\t\t.removeClass(tm + '-state-hover')\n\t\t\t\t\t\t\t\t\t\t\t.removeClass(tm + '-state-down'); // if mouseleave happens before mouseup\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tgroupChildren = groupChildren.add(button);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (isOnlyButtons) {\n\t\t\t\t\tgroupChildren\n\t\t\t\t\t\t.first().addClass(tm + '-corner-left').end()\n\t\t\t\t\t\t.last().addClass(tm + '-corner-right').end();\n\t\t\t\t}\n\n\t\t\t\tif (groupChildren.length > 1) {\n\t\t\t\t\tgroupEl = $('<div/>');\n\t\t\t\t\tif (isOnlyButtons) {\n\t\t\t\t\t\tgroupEl.addClass('fc-button-group');\n\t\t\t\t\t}\n\t\t\t\t\tgroupEl.append(groupChildren);\n\t\t\t\t\tsectionEl.append(groupEl);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tsectionEl.append(groupChildren); // 1 or 0 children\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn sectionEl;\n\t}\n\n\n\tfunction updateTitle(text) {\n\t\tif (el) {\n\t\t\tel.find('h2').text(text);\n\t\t}\n\t}\n\n\n\tfunction activateButton(buttonName) {\n\t\tif (el) {\n\t\t\tel.find('.fc-' + buttonName + '-button')\n\t\t\t\t.addClass(tm + '-state-active');\n\t\t}\n\t}\n\n\n\tfunction deactivateButton(buttonName) {\n\t\tif (el) {\n\t\t\tel.find('.fc-' + buttonName + '-button')\n\t\t\t\t.removeClass(tm + '-state-active');\n\t\t}\n\t}\n\n\n\tfunction disableButton(buttonName) {\n\t\tif (el) {\n\t\t\tel.find('.fc-' + buttonName + '-button')\n\t\t\t\t.prop('disabled', true)\n\t\t\t\t.addClass(tm + '-state-disabled');\n\t\t}\n\t}\n\n\n\tfunction enableButton(buttonName) {\n\t\tif (el) {\n\t\t\tel.find('.fc-' + buttonName + '-button')\n\t\t\t\t.prop('disabled', false)\n\t\t\t\t.removeClass(tm + '-state-disabled');\n\t\t}\n\t}\n\n\n\tfunction getViewsWithButtons() {\n\t\treturn viewsWithButtons;\n\t}\n\n}\n\n;;\n\nvar Calendar = FC.Calendar = Class.extend({\n\n\tdirDefaults: null, // option defaults related to LTR or RTL\n\tlocaleDefaults: null, // option defaults related to current locale\n\toverrides: null, // option overrides given to the fullCalendar constructor\n\tdynamicOverrides: null, // options set with dynamic setter method. higher precedence than view overrides.\n\toptions: null, // all defaults combined with overrides\n\tviewSpecCache: null, // cache of view definitions\n\tview: null, // current View object\n\theader: null,\n\tfooter: null,\n\tloadingLevel: 0, // number of simultaneous loading tasks\n\n\n\t// a lot of this class' OOP logic is scoped within this constructor function,\n\t// but in the future, write individual methods on the prototype.\n\tconstructor: Calendar_constructor,\n\n\n\t// Subclasses can override this for initialization logic after the constructor has been called\n\tinitialize: function() {\n\t},\n\n\n\t// Computes the flattened options hash for the calendar and assigns to `this.options`.\n\t// Assumes this.overrides and this.dynamicOverrides have already been initialized.\n\tpopulateOptionsHash: function() {\n\t\tvar locale, localeDefaults;\n\t\tvar isRTL, dirDefaults;\n\n\t\tlocale = firstDefined( // explicit locale option given?\n\t\t\tthis.dynamicOverrides.locale,\n\t\t\tthis.overrides.locale\n\t\t);\n\t\tlocaleDefaults = localeOptionHash[locale];\n\t\tif (!localeDefaults) { // explicit locale option not given or invalid?\n\t\t\tlocale = Calendar.defaults.locale;\n\t\t\tlocaleDefaults = localeOptionHash[locale] || {};\n\t\t}\n\n\t\tisRTL = firstDefined( // based on options computed so far, is direction RTL?\n\t\t\tthis.dynamicOverrides.isRTL,\n\t\t\tthis.overrides.isRTL,\n\t\t\tlocaleDefaults.isRTL,\n\t\t\tCalendar.defaults.isRTL\n\t\t);\n\t\tdirDefaults = isRTL ? Calendar.rtlDefaults : {};\n\n\t\tthis.dirDefaults = dirDefaults;\n\t\tthis.localeDefaults = localeDefaults;\n\t\tthis.options = mergeOptions([ // merge defaults and overrides. lowest to highest precedence\n\t\t\tCalendar.defaults, // global defaults\n\t\t\tdirDefaults,\n\t\t\tlocaleDefaults,\n\t\t\tthis.overrides,\n\t\t\tthis.dynamicOverrides\n\t\t]);\n\t\tpopulateInstanceComputableOptions(this.options); // fill in gaps with computed options\n\t},\n\n\n\t// Gets information about how to create a view. Will use a cache.\n\tgetViewSpec: function(viewType) {\n\t\tvar cache = this.viewSpecCache;\n\n\t\treturn cache[viewType] || (cache[viewType] = this.buildViewSpec(viewType));\n\t},\n\n\n\t// Given a duration singular unit, like \"week\" or \"day\", finds a matching view spec.\n\t// Preference is given to views that have corresponding buttons.\n\tgetUnitViewSpec: function(unit) {\n\t\tvar viewTypes;\n\t\tvar i;\n\t\tvar spec;\n\n\t\tif ($.inArray(unit, intervalUnits) != -1) {\n\n\t\t\t// put views that have buttons first. there will be duplicates, but oh well\n\t\t\tviewTypes = this.header.getViewsWithButtons(); // TODO: include footer as well?\n\t\t\t$.each(FC.views, function(viewType) { // all views\n\t\t\t\tviewTypes.push(viewType);\n\t\t\t});\n\n\t\t\tfor (i = 0; i < viewTypes.length; i++) {\n\t\t\t\tspec = this.getViewSpec(viewTypes[i]);\n\t\t\t\tif (spec) {\n\t\t\t\t\tif (spec.singleUnit == unit) {\n\t\t\t\t\t\treturn spec;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Builds an object with information on how to create a given view\n\tbuildViewSpec: function(requestedViewType) {\n\t\tvar viewOverrides = this.overrides.views || {};\n\t\tvar specChain = []; // for the view. lowest to highest priority\n\t\tvar defaultsChain = []; // for the view. lowest to highest priority\n\t\tvar overridesChain = []; // for the view. lowest to highest priority\n\t\tvar viewType = requestedViewType;\n\t\tvar spec; // for the view\n\t\tvar overrides; // for the view\n\t\tvar duration;\n\t\tvar unit;\n\n\t\t// iterate from the specific view definition to a more general one until we hit an actual View class\n\t\twhile (viewType) {\n\t\t\tspec = fcViews[viewType];\n\t\t\toverrides = viewOverrides[viewType];\n\t\t\tviewType = null; // clear. might repopulate for another iteration\n\n\t\t\tif (typeof spec === 'function') { // TODO: deprecate\n\t\t\t\tspec = { 'class': spec };\n\t\t\t}\n\n\t\t\tif (spec) {\n\t\t\t\tspecChain.unshift(spec);\n\t\t\t\tdefaultsChain.unshift(spec.defaults || {});\n\t\t\t\tduration = duration || spec.duration;\n\t\t\t\tviewType = viewType || spec.type;\n\t\t\t}\n\n\t\t\tif (overrides) {\n\t\t\t\toverridesChain.unshift(overrides); // view-specific option hashes have options at zero-level\n\t\t\t\tduration = duration || overrides.duration;\n\t\t\t\tviewType = viewType || overrides.type;\n\t\t\t}\n\t\t}\n\n\t\tspec = mergeProps(specChain);\n\t\tspec.type = requestedViewType;\n\t\tif (!spec['class']) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (duration) {\n\t\t\tduration = moment.duration(duration);\n\t\t\tif (duration.valueOf()) { // valid?\n\t\t\t\tspec.duration = duration;\n\t\t\t\tunit = computeIntervalUnit(duration);\n\n\t\t\t\t// view is a single-unit duration, like \"week\" or \"day\"\n\t\t\t\t// incorporate options for this. lowest priority\n\t\t\t\tif (duration.as(unit) === 1) {\n\t\t\t\t\tspec.singleUnit = unit;\n\t\t\t\t\toverridesChain.unshift(viewOverrides[unit] || {});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tspec.defaults = mergeOptions(defaultsChain);\n\t\tspec.overrides = mergeOptions(overridesChain);\n\n\t\tthis.buildViewSpecOptions(spec);\n\t\tthis.buildViewSpecButtonText(spec, requestedViewType);\n\n\t\treturn spec;\n\t},\n\n\n\t// Builds and assigns a view spec's options object from its already-assigned defaults and overrides\n\tbuildViewSpecOptions: function(spec) {\n\t\tspec.options = mergeOptions([ // lowest to highest priority\n\t\t\tCalendar.defaults, // global defaults\n\t\t\tspec.defaults, // view's defaults (from ViewSubclass.defaults)\n\t\t\tthis.dirDefaults,\n\t\t\tthis.localeDefaults, // locale and dir take precedence over view's defaults!\n\t\t\tthis.overrides, // calendar's overrides (options given to constructor)\n\t\t\tspec.overrides, // view's overrides (view-specific options)\n\t\t\tthis.dynamicOverrides // dynamically set via setter. highest precedence\n\t\t]);\n\t\tpopulateInstanceComputableOptions(spec.options);\n\t},\n\n\n\t// Computes and assigns a view spec's buttonText-related options\n\tbuildViewSpecButtonText: function(spec, requestedViewType) {\n\n\t\t// given an options object with a possible `buttonText` hash, lookup the buttonText for the\n\t\t// requested view, falling back to a generic unit entry like \"week\" or \"day\"\n\t\tfunction queryButtonText(options) {\n\t\t\tvar buttonText = options.buttonText || {};\n\t\t\treturn buttonText[requestedViewType] ||\n\t\t\t\t// view can decide to look up a certain key\n\t\t\t\t(spec.buttonTextKey ? buttonText[spec.buttonTextKey] : null) ||\n\t\t\t\t// a key like \"month\"\n\t\t\t\t(spec.singleUnit ? buttonText[spec.singleUnit] : null);\n\t\t}\n\n\t\t// highest to lowest priority\n\t\tspec.buttonTextOverride =\n\t\t\tqueryButtonText(this.dynamicOverrides) ||\n\t\t\tqueryButtonText(this.overrides) || // constructor-specified buttonText lookup hash takes precedence\n\t\t\tspec.overrides.buttonText; // `buttonText` for view-specific options is a string\n\n\t\t// highest to lowest priority. mirrors buildViewSpecOptions\n\t\tspec.buttonTextDefault =\n\t\t\tqueryButtonText(this.localeDefaults) ||\n\t\t\tqueryButtonText(this.dirDefaults) ||\n\t\t\tspec.defaults.buttonText || // a single string. from ViewSubclass.defaults\n\t\t\tqueryButtonText(Calendar.defaults) ||\n\t\t\t(spec.duration ? this.humanizeDuration(spec.duration) : null) || // like \"3 days\"\n\t\t\trequestedViewType; // fall back to given view name\n\t},\n\n\n\t// Given a view name for a custom view or a standard view, creates a ready-to-go View object\n\tinstantiateView: function(viewType) {\n\t\tvar spec = this.getViewSpec(viewType);\n\n\t\treturn new spec['class'](this, viewType, spec.options, spec.duration);\n\t},\n\n\n\t// Returns a boolean about whether the view is okay to instantiate at some point\n\tisValidViewType: function(viewType) {\n\t\treturn Boolean(this.getViewSpec(viewType));\n\t},\n\n\n\t// Should be called when any type of async data fetching begins\n\tpushLoading: function() {\n\t\tif (!(this.loadingLevel++)) {\n\t\t\tthis.publiclyTrigger('loading', null, true, this.view);\n\t\t}\n\t},\n\n\n\t// Should be called when any type of async data fetching completes\n\tpopLoading: function() {\n\t\tif (!(--this.loadingLevel)) {\n\t\t\tthis.publiclyTrigger('loading', null, false, this.view);\n\t\t}\n\t},\n\n\n\t// Given arguments to the select method in the API, returns a span (unzoned start/end and other info)\n\tbuildSelectSpan: function(zonedStartInput, zonedEndInput) {\n\t\tvar start = this.moment(zonedStartInput).stripZone();\n\t\tvar end;\n\n\t\tif (zonedEndInput) {\n\t\t\tend = this.moment(zonedEndInput).stripZone();\n\t\t}\n\t\telse if (start.hasTime()) {\n\t\t\tend = start.clone().add(this.defaultTimedEventDuration);\n\t\t}\n\t\telse {\n\t\t\tend = start.clone().add(this.defaultAllDayEventDuration);\n\t\t}\n\n\t\treturn { start: start, end: end };\n\t}\n\n});\n\n\nCalendar.mixin(EmitterMixin);\n\n\nfunction Calendar_constructor(element, overrides) {\n\tvar t = this;\n\n\n\t// Exports\n\t// -----------------------------------------------------------------------------------\n\n\tt.render = render;\n\tt.destroy = destroy;\n\tt.rerenderEvents = rerenderEvents;\n\tt.changeView = renderView; // `renderView` will switch to another view\n\tt.select = select;\n\tt.unselect = unselect;\n\tt.prev = prev;\n\tt.next = next;\n\tt.prevYear = prevYear;\n\tt.nextYear = nextYear;\n\tt.today = today;\n\tt.gotoDate = gotoDate;\n\tt.incrementDate = incrementDate;\n\tt.zoomTo = zoomTo;\n\tt.getDate = getDate;\n\tt.getCalendar = getCalendar;\n\tt.getView = getView;\n\tt.option = option; // getter/setter method\n\tt.publiclyTrigger = publiclyTrigger;\n\n\n\t// Options\n\t// -----------------------------------------------------------------------------------\n\n\tt.dynamicOverrides = {};\n\tt.viewSpecCache = {};\n\tt.optionHandlers = {}; // for Calendar.options.js\n\tt.overrides = $.extend({}, overrides); // make a copy\n\n\tt.populateOptionsHash(); // sets this.options\n\n\n\n\t// Locale-data Internals\n\t// -----------------------------------------------------------------------------------\n\t// Apply overrides to the current locale's data\n\n\tvar localeData;\n\n\t// Called immediately, and when any of the options change.\n\t// Happens before any internal objects rebuild or rerender, because this is very core.\n\tt.bindOptions([\n\t\t'locale', 'monthNames', 'monthNamesShort', 'dayNames', 'dayNamesShort', 'firstDay', 'weekNumberCalculation'\n\t], function(locale, monthNames, monthNamesShort, dayNames, dayNamesShort, firstDay, weekNumberCalculation) {\n\n\t\t// normalize\n\t\tif (weekNumberCalculation === 'iso') {\n\t\t\tweekNumberCalculation = 'ISO'; // normalize\n\t\t}\n\n\t\tlocaleData = createObject( // make a cheap copy\n\t\t\tgetMomentLocaleData(locale) // will fall back to en\n\t\t);\n\n\t\tif (monthNames) {\n\t\t\tlocaleData._months = monthNames;\n\t\t}\n\t\tif (monthNamesShort) {\n\t\t\tlocaleData._monthsShort = monthNamesShort;\n\t\t}\n\t\tif (dayNames) {\n\t\t\tlocaleData._weekdays = dayNames;\n\t\t}\n\t\tif (dayNamesShort) {\n\t\t\tlocaleData._weekdaysShort = dayNamesShort;\n\t\t}\n\n\t\tif (firstDay == null && weekNumberCalculation === 'ISO') {\n\t\t\tfirstDay = 1;\n\t\t}\n\t\tif (firstDay != null) {\n\t\t\tvar _week = createObject(localeData._week); // _week: { dow: # }\n\t\t\t_week.dow = firstDay;\n\t\t\tlocaleData._week = _week;\n\t\t}\n\n\t\tif ( // whitelist certain kinds of input\n\t\t\tweekNumberCalculation === 'ISO' ||\n\t\t\tweekNumberCalculation === 'local' ||\n\t\t\ttypeof weekNumberCalculation === 'function'\n\t\t) {\n\t\t\tlocaleData._fullCalendar_weekCalc = weekNumberCalculation; // moment-ext will know what to do with it\n\t\t}\n\n\t\t// If the internal current date object already exists, move to new locale.\n\t\t// We do NOT need to do this technique for event dates, because this happens when converting to \"segments\".\n\t\tif (date) {\n\t\t\tlocalizeMoment(date); // sets to localeData\n\t\t}\n\t});\n\n\n\t// Calendar-specific Date Utilities\n\t// -----------------------------------------------------------------------------------\n\n\n\tt.defaultAllDayEventDuration = moment.duration(t.options.defaultAllDayEventDuration);\n\tt.defaultTimedEventDuration = moment.duration(t.options.defaultTimedEventDuration);\n\n\n\t// Builds a moment using the settings of the current calendar: timezone and locale.\n\t// Accepts anything the vanilla moment() constructor accepts.\n\tt.moment = function() {\n\t\tvar mom;\n\n\t\tif (t.options.timezone === 'local') {\n\t\t\tmom = FC.moment.apply(null, arguments);\n\n\t\t\t// Force the moment to be local, because FC.moment doesn't guarantee it.\n\t\t\tif (mom.hasTime()) { // don't give ambiguously-timed moments a local zone\n\t\t\t\tmom.local();\n\t\t\t}\n\t\t}\n\t\telse if (t.options.timezone === 'UTC') {\n\t\t\tmom = FC.moment.utc.apply(null, arguments); // process as UTC\n\t\t}\n\t\telse {\n\t\t\tmom = FC.moment.parseZone.apply(null, arguments); // let the input decide the zone\n\t\t}\n\n\t\tlocalizeMoment(mom);\n\n\t\treturn mom;\n\t};\n\n\n\t// Updates the given moment's locale settings to the current calendar locale settings.\n\tfunction localizeMoment(mom) {\n\t\tmom._locale = localeData;\n\t}\n\tt.localizeMoment = localizeMoment;\n\n\n\t// Returns a boolean about whether or not the calendar knows how to calculate\n\t// the timezone offset of arbitrary dates in the current timezone.\n\tt.getIsAmbigTimezone = function() {\n\t\treturn t.options.timezone !== 'local' && t.options.timezone !== 'UTC';\n\t};\n\n\n\t// Returns a copy of the given date in the current timezone. Has no effect on dates without times.\n\tt.applyTimezone = function(date) {\n\t\tif (!date.hasTime()) {\n\t\t\treturn date.clone();\n\t\t}\n\n\t\tvar zonedDate = t.moment(date.toArray());\n\t\tvar timeAdjust = date.time() - zonedDate.time();\n\t\tvar adjustedZonedDate;\n\n\t\t// Safari sometimes has problems with this coersion when near DST. Adjust if necessary. (bug #2396)\n\t\tif (timeAdjust) { // is the time result different than expected?\n\t\t\tadjustedZonedDate = zonedDate.clone().add(timeAdjust); // add milliseconds\n\t\t\tif (date.time() - adjustedZonedDate.time() === 0) { // does it match perfectly now?\n\t\t\t\tzonedDate = adjustedZonedDate;\n\t\t\t}\n\t\t}\n\n\t\treturn zonedDate;\n\t};\n\n\n\t// Returns a moment for the current date, as defined by the client's computer or from the `now` option.\n\t// Will return an moment with an ambiguous timezone.\n\tt.getNow = function() {\n\t\tvar now = t.options.now;\n\t\tif (typeof now === 'function') {\n\t\t\tnow = now();\n\t\t}\n\t\treturn t.moment(now).stripZone();\n\t};\n\n\n\t// Get an event's normalized end date. If not present, calculate it from the defaults.\n\tt.getEventEnd = function(event) {\n\t\tif (event.end) {\n\t\t\treturn event.end.clone();\n\t\t}\n\t\telse {\n\t\t\treturn t.getDefaultEventEnd(event.allDay, event.start);\n\t\t}\n\t};\n\n\n\t// Given an event's allDay status and start date, return what its fallback end date should be.\n\t// TODO: rename to computeDefaultEventEnd\n\tt.getDefaultEventEnd = function(allDay, zonedStart) {\n\t\tvar end = zonedStart.clone();\n\n\t\tif (allDay) {\n\t\t\tend.stripTime().add(t.defaultAllDayEventDuration);\n\t\t}\n\t\telse {\n\t\t\tend.add(t.defaultTimedEventDuration);\n\t\t}\n\n\t\tif (t.getIsAmbigTimezone()) {\n\t\t\tend.stripZone(); // we don't know what the tzo should be\n\t\t}\n\n\t\treturn end;\n\t};\n\n\n\t// Produces a human-readable string for the given duration.\n\t// Side-effect: changes the locale of the given duration.\n\tt.humanizeDuration = function(duration) {\n\t\treturn duration.locale(t.options.locale).humanize();\n\t};\n\n\n\n\t// Imports\n\t// -----------------------------------------------------------------------------------\n\n\n\tEventManager.call(t);\n\n\n\n\t// Locals\n\t// -----------------------------------------------------------------------------------\n\n\n\tvar _element = element[0];\n\tvar toolbarsManager;\n\tvar header;\n\tvar footer;\n\tvar content;\n\tvar tm; // for making theme classes\n\tvar currentView; // NOTE: keep this in sync with this.view\n\tvar viewsByType = {}; // holds all instantiated view instances, current or not\n\tvar suggestedViewHeight;\n\tvar windowResizeProxy; // wraps the windowResize function\n\tvar ignoreWindowResize = 0;\n\tvar date; // unzoned\n\n\n\n\t// Main Rendering\n\t// -----------------------------------------------------------------------------------\n\n\n\t// compute the initial ambig-timezone date\n\tif (t.options.defaultDate != null) {\n\t\tdate = t.moment(t.options.defaultDate).stripZone();\n\t}\n\telse {\n\t\tdate = t.getNow(); // getNow already returns unzoned\n\t}\n\n\n\tfunction render() {\n\t\tif (!content) {\n\t\t\tinitialRender();\n\t\t}\n\t\telse if (elementVisible()) {\n\t\t\t// mainly for the public API\n\t\t\tcalcSize();\n\t\t\trenderView();\n\t\t}\n\t}\n\n\n\tfunction initialRender() {\n\t\telement.addClass('fc');\n\n\t\t// event delegation for nav links\n\t\telement.on('click.fc', 'a[data-goto]', function(ev) {\n\t\t\tvar anchorEl = $(this);\n\t\t\tvar gotoOptions = anchorEl.data('goto'); // will automatically parse JSON\n\t\t\tvar date = t.moment(gotoOptions.date);\n\t\t\tvar viewType = gotoOptions.type;\n\n\t\t\t// property like \"navLinkDayClick\". might be a string or a function\n\t\t\tvar customAction = currentView.opt('navLink' + capitaliseFirstLetter(viewType) + 'Click');\n\n\t\t\tif (typeof customAction === 'function') {\n\t\t\t\tcustomAction(date, ev);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (typeof customAction === 'string') {\n\t\t\t\t\tviewType = customAction;\n\t\t\t\t}\n\t\t\t\tzoomTo(date, viewType);\n\t\t\t}\n\t\t});\n\n\t\t// called immediately, and upon option change\n\t\tt.bindOption('theme', function(theme) {\n\t\t\ttm = theme ? 'ui' : 'fc'; // affects a larger scope\n\t\t\telement.toggleClass('ui-widget', theme);\n\t\t\telement.toggleClass('fc-unthemed', !theme);\n\t\t});\n\n\t\t// called immediately, and upon option change.\n\t\t// HACK: locale often affects isRTL, so we explicitly listen to that too.\n\t\tt.bindOptions([ 'isRTL', 'locale' ], function(isRTL) {\n\t\t\telement.toggleClass('fc-ltr', !isRTL);\n\t\t\telement.toggleClass('fc-rtl', isRTL);\n\t\t});\n\n\t\tcontent = $(\"<div class='fc-view-container'/>\").prependTo(element);\n\n\t\tvar toolbars = buildToolbars();\n\t\ttoolbarsManager = new Iterator(toolbars);\n\n\t\theader = t.header = toolbars[0];\n\t\tfooter = t.footer = toolbars[1];\n\n\t\trenderHeader();\n\t\trenderFooter();\n\t\trenderView(t.options.defaultView);\n\n\t\tif (t.options.handleWindowResize) {\n\t\t\twindowResizeProxy = debounce(windowResize, t.options.windowResizeDelay); // prevents rapid calls\n\t\t\t$(window).resize(windowResizeProxy);\n\t\t}\n\t}\n\n\n\tfunction destroy() {\n\n\t\tif (currentView) {\n\t\t\tcurrentView.removeElement();\n\n\t\t\t// NOTE: don't null-out currentView/t.view in case API methods are called after destroy.\n\t\t\t// It is still the \"current\" view, just not rendered.\n\t\t}\n\n\t\ttoolbarsManager.proxyCall('removeElement');\n\t\tcontent.remove();\n\t\telement.removeClass('fc fc-ltr fc-rtl fc-unthemed ui-widget');\n\n\t\telement.off('.fc'); // unbind nav link handlers\n\n\t\tif (windowResizeProxy) {\n\t\t\t$(window).unbind('resize', windowResizeProxy);\n\t\t}\n\t}\n\n\n\tfunction elementVisible() {\n\t\treturn element.is(':visible');\n\t}\n\n\n\n\t// View Rendering\n\t// -----------------------------------------------------------------------------------\n\n\n\t// Renders a view because of a date change, view-type change, or for the first time.\n\t// If not given a viewType, keep the current view but render different dates.\n\t// Accepts an optional scroll state to restore to.\n\tfunction renderView(viewType, forcedScroll) {\n\t\tignoreWindowResize++;\n\n\t\tvar needsClearView = currentView && viewType && currentView.type !== viewType;\n\n\t\t// if viewType is changing, remove the old view's rendering\n\t\tif (needsClearView) {\n\t\t\tfreezeContentHeight(); // prevent a scroll jump when view element is removed\n\t\t\tclearView();\n\t\t}\n\n\t\t// if viewType changed, or the view was never created, create a fresh view\n\t\tif (!currentView && viewType) {\n\t\t\tcurrentView = t.view =\n\t\t\t\tviewsByType[viewType] ||\n\t\t\t\t(viewsByType[viewType] = t.instantiateView(viewType));\n\n\t\t\tcurrentView.setElement(\n\t\t\t\t$(\"<div class='fc-view fc-\" + viewType + \"-view' />\").appendTo(content)\n\t\t\t);\n\t\t\ttoolbarsManager.proxyCall('activateButton', viewType);\n\t\t}\n\n\t\tif (currentView) {\n\n\t\t\t// in case the view should render a period of time that is completely hidden\n\t\t\tdate = currentView.massageCurrentDate(date);\n\n\t\t\t// render or rerender the view\n\t\t\tif (\n\t\t\t\t!currentView.isDateSet ||\n\t\t\t\t!( // NOT within interval range signals an implicit date window change\n\t\t\t\t\tdate >= currentView.intervalStart &&\n\t\t\t\t\tdate < currentView.intervalEnd\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tif (elementVisible()) {\n\n\t\t\t\t\tif (forcedScroll) {\n\t\t\t\t\t\tcurrentView.captureInitialScroll(forcedScroll);\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrentView.setDate(date, forcedScroll);\n\n\t\t\t\t\tif (forcedScroll) {\n\t\t\t\t\t\tcurrentView.releaseScroll();\n\t\t\t\t\t}\n\n\t\t\t\t\t// need to do this after View::render, so dates are calculated\n\t\t\t\t\t// NOTE: view updates title text proactively\n\t\t\t\t\tupdateToolbarsTodayButton();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (needsClearView) {\n\t\t\tthawContentHeight();\n\t\t}\n\n\t\tignoreWindowResize--;\n\t}\n\n\n\t// Unrenders the current view and reflects this change in the Header.\n\t// Unregsiters the `currentView`, but does not remove from viewByType hash.\n\tfunction clearView() {\n\t\ttoolbarsManager.proxyCall('deactivateButton', currentView.type);\n\t\tcurrentView.removeElement();\n\t\tcurrentView = t.view = null;\n\t}\n\n\n\t// Destroys the view, including the view object. Then, re-instantiates it and renders it.\n\t// Maintains the same scroll state.\n\t// TODO: maintain any other user-manipulated state.\n\tfunction reinitView() {\n\t\tignoreWindowResize++;\n\t\tfreezeContentHeight();\n\n\t\tvar viewType = currentView.type;\n\t\tvar scrollState = currentView.queryScroll();\n\t\tclearView();\n\t\tcalcSize();\n\t\trenderView(viewType, scrollState);\n\n\t\tthawContentHeight();\n\t\tignoreWindowResize--;\n\t}\n\n\n\n\t// Resizing\n\t// -----------------------------------------------------------------------------------\n\n\n\tt.getSuggestedViewHeight = function() {\n\t\tif (suggestedViewHeight === undefined) {\n\t\t\tcalcSize();\n\t\t}\n\t\treturn suggestedViewHeight;\n\t};\n\n\n\tt.isHeightAuto = function() {\n\t\treturn t.options.contentHeight === 'auto' || t.options.height === 'auto';\n\t};\n\n\n\tfunction updateSize(shouldRecalc) {\n\t\tif (elementVisible()) {\n\n\t\t\tif (shouldRecalc) {\n\t\t\t\t_calcSize();\n\t\t\t}\n\n\t\t\tignoreWindowResize++;\n\t\t\tcurrentView.updateSize(true); // isResize=true. will poll getSuggestedViewHeight() and isHeightAuto()\n\t\t\tignoreWindowResize--;\n\n\t\t\treturn true; // signal success\n\t\t}\n\t}\n\n\n\tfunction calcSize() {\n\t\tif (elementVisible()) {\n\t\t\t_calcSize();\n\t\t}\n\t}\n\n\n\tfunction _calcSize() { // assumes elementVisible\n\t\tvar contentHeightInput = t.options.contentHeight;\n\t\tvar heightInput = t.options.height;\n\n\t\tif (typeof contentHeightInput === 'number') { // exists and not 'auto'\n\t\t\tsuggestedViewHeight = contentHeightInput;\n\t\t}\n\t\telse if (typeof contentHeightInput === 'function') { // exists and is a function\n\t\t\tsuggestedViewHeight = contentHeightInput();\n\t\t}\n\t\telse if (typeof heightInput === 'number') { // exists and not 'auto'\n\t\t\tsuggestedViewHeight = heightInput - queryToolbarsHeight();\n\t\t}\n\t\telse if (typeof heightInput === 'function') { // exists and is a function\n\t\t\tsuggestedViewHeight = heightInput() - queryToolbarsHeight();\n\t\t}\n\t\telse if (heightInput === 'parent') { // set to height of parent element\n\t\t\tsuggestedViewHeight = element.parent().height() - queryToolbarsHeight();\n\t\t}\n\t\telse {\n\t\t\tsuggestedViewHeight = Math.round(content.width() / Math.max(t.options.aspectRatio, .5));\n\t\t}\n\t}\n\n\n\tfunction queryToolbarsHeight() {\n\t\treturn toolbarsManager.items.reduce(function(accumulator, toolbar) {\n\t\t\tvar toolbarHeight = toolbar.el ? toolbar.el.outerHeight(true) : 0; // includes margin\n\t\t\treturn accumulator + toolbarHeight;\n\t\t}, 0);\n\t}\n\n\n\tfunction windowResize(ev) {\n\t\tif (\n\t\t\t!ignoreWindowResize &&\n\t\t\tev.target === window && // so we don't process jqui \"resize\" events that have bubbled up\n\t\t\tcurrentView.start // view has already been rendered\n\t\t) {\n\t\t\tif (updateSize(true)) {\n\t\t\t\tcurrentView.publiclyTrigger('windowResize', _element);\n\t\t\t}\n\t\t}\n\t}\n\n\n\n\t/* Event Rendering\n\t-----------------------------------------------------------------------------*/\n\n\n\tfunction rerenderEvents() { // API method. destroys old events if previously rendered.\n\t\tif (elementVisible()) {\n\t\t\tt.reportEventChange(); // will re-trasmit events to the view, causing a rerender\n\t\t}\n\t}\n\n\n\n\t/* Toolbars\n\t-----------------------------------------------------------------------------*/\n\n\n\tfunction buildToolbars() {\n\t\treturn [\n\t\t\tnew Toolbar(t, computeHeaderOptions()),\n\t\t\tnew Toolbar(t, computeFooterOptions())\n\t\t];\n\t}\n\n\n\tfunction computeHeaderOptions() {\n\t\treturn {\n\t\t\textraClasses: 'fc-header-toolbar',\n\t\t\tlayout: t.options.header\n\t\t};\n\t}\n\n\n\tfunction computeFooterOptions() {\n\t\treturn {\n\t\t\textraClasses: 'fc-footer-toolbar',\n\t\t\tlayout: t.options.footer\n\t\t};\n\t}\n\n\n\t// can be called repeatedly and Header will rerender\n\tfunction renderHeader() {\n\t\theader.setToolbarOptions(computeHeaderOptions());\n\t\theader.render();\n\t\tif (header.el) {\n\t\t\telement.prepend(header.el);\n\t\t}\n\t}\n\n\n\t// can be called repeatedly and Footer will rerender\n\tfunction renderFooter() {\n\t\tfooter.setToolbarOptions(computeFooterOptions());\n\t\tfooter.render();\n\t\tif (footer.el) {\n\t\t\telement.append(footer.el);\n\t\t}\n\t}\n\n\n\tt.setToolbarsTitle = function(title) {\n\t\ttoolbarsManager.proxyCall('updateTitle', title);\n\t};\n\n\n\tfunction updateToolbarsTodayButton() {\n\t\tvar now = t.getNow();\n\t\tif (now >= currentView.intervalStart && now < currentView.intervalEnd) {\n\t\t\ttoolbarsManager.proxyCall('disableButton', 'today');\n\t\t}\n\t\telse {\n\t\t\ttoolbarsManager.proxyCall('enableButton', 'today');\n\t\t}\n\t}\n\n\n\n\t/* Selection\n\t-----------------------------------------------------------------------------*/\n\n\n\t// this public method receives start/end dates in any format, with any timezone\n\tfunction select(zonedStartInput, zonedEndInput) {\n\t\tcurrentView.select(\n\t\t\tt.buildSelectSpan.apply(t, arguments)\n\t\t);\n\t}\n\n\n\tfunction unselect() { // safe to be called before renderView\n\t\tif (currentView) {\n\t\t\tcurrentView.unselect();\n\t\t}\n\t}\n\n\n\n\t/* Date\n\t-----------------------------------------------------------------------------*/\n\n\n\tfunction prev() {\n\t\tdate = currentView.computePrevDate(date);\n\t\trenderView();\n\t}\n\n\n\tfunction next() {\n\t\tdate = currentView.computeNextDate(date);\n\t\trenderView();\n\t}\n\n\n\tfunction prevYear() {\n\t\tdate.add(-1, 'years');\n\t\trenderView();\n\t}\n\n\n\tfunction nextYear() {\n\t\tdate.add(1, 'years');\n\t\trenderView();\n\t}\n\n\n\tfunction today() {\n\t\tdate = t.getNow();\n\t\trenderView();\n\t}\n\n\n\tfunction gotoDate(zonedDateInput) {\n\t\tdate = t.moment(zonedDateInput).stripZone();\n\t\trenderView();\n\t}\n\n\n\tfunction incrementDate(delta) {\n\t\tdate.add(moment.duration(delta));\n\t\trenderView();\n\t}\n\n\n\t// Forces navigation to a view for the given date.\n\t// `viewType` can be a specific view name or a generic one like \"week\" or \"day\".\n\tfunction zoomTo(newDate, viewType) {\n\t\tvar spec;\n\n\t\tviewType = viewType || 'day'; // day is default zoom\n\t\tspec = t.getViewSpec(viewType) || t.getUnitViewSpec(viewType);\n\n\t\tdate = newDate.clone();\n\t\trenderView(spec ? spec.type : null);\n\t}\n\n\n\t// for external API\n\tfunction getDate() {\n\t\treturn t.applyTimezone(date); // infuse the calendar's timezone\n\t}\n\n\n\n\t/* Height \"Freezing\"\n\t-----------------------------------------------------------------------------*/\n\n\n\tt.freezeContentHeight = freezeContentHeight;\n\tt.thawContentHeight = thawContentHeight;\n\n\tvar freezeContentHeightDepth = 0;\n\n\n\tfunction freezeContentHeight() {\n\t\tif (!(freezeContentHeightDepth++)) {\n\t\t\tcontent.css({\n\t\t\t\twidth: '100%',\n\t\t\t\theight: content.height(),\n\t\t\t\toverflow: 'hidden'\n\t\t\t});\n\t\t}\n\t}\n\n\n\tfunction thawContentHeight() {\n\t\tif (!(--freezeContentHeightDepth)) {\n\t\t\tcontent.css({\n\t\t\t\twidth: '',\n\t\t\t\theight: '',\n\t\t\t\toverflow: ''\n\t\t\t});\n\t\t}\n\t}\n\n\n\n\t/* Misc\n\t-----------------------------------------------------------------------------*/\n\n\n\tfunction getCalendar() {\n\t\treturn t;\n\t}\n\n\n\tfunction getView() {\n\t\treturn currentView;\n\t}\n\n\n\tfunction option(name, value) {\n\t\tvar newOptionHash;\n\n\t\tif (typeof name === 'string') {\n\t\t\tif (value === undefined) { // getter\n\t\t\t\treturn t.options[name];\n\t\t\t}\n\t\t\telse { // setter for individual option\n\t\t\t\tnewOptionHash = {};\n\t\t\t\tnewOptionHash[name] = value;\n\t\t\t\tsetOptions(newOptionHash);\n\t\t\t}\n\t\t}\n\t\telse if (typeof name === 'object') { // compound setter with object input\n\t\t\tsetOptions(name);\n\t\t}\n\t}\n\n\n\tfunction setOptions(newOptionHash) {\n\t\tvar optionCnt = 0;\n\t\tvar optionName;\n\n\t\tfor (optionName in newOptionHash) {\n\t\t\tt.dynamicOverrides[optionName] = newOptionHash[optionName];\n\t\t}\n\n\t\tt.viewSpecCache = {}; // the dynamic override invalidates the options in this cache, so just clear it\n\t\tt.populateOptionsHash(); // this.options needs to be recomputed after the dynamic override\n\n\t\t// trigger handlers after this.options has been updated\n\t\tfor (optionName in newOptionHash) {\n\t\t\tt.triggerOptionHandlers(optionName); // recall bindOption/bindOptions\n\t\t\toptionCnt++;\n\t\t}\n\n\t\t// special-case handling of single option change.\n\t\t// if only one option change, `optionName` will be its name.\n\t\tif (optionCnt === 1) {\n\t\t\tif (optionName === 'height' || optionName === 'contentHeight' || optionName === 'aspectRatio') {\n\t\t\t\tupdateSize(true); // true = allow recalculation of height\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse if (optionName === 'defaultDate') {\n\t\t\t\treturn; // can't change date this way. use gotoDate instead\n\t\t\t}\n\t\t\telse if (optionName === 'businessHours') {\n\t\t\t\tif (currentView) {\n\t\t\t\t\tcurrentView.unrenderBusinessHours();\n\t\t\t\t\tcurrentView.renderBusinessHours();\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse if (optionName === 'timezone') {\n\t\t\t\tt.rezoneArrayEventSources();\n\t\t\t\tt.refetchEvents();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// catch-all. rerender the header and footer and rebuild/rerender the current view\n\t\trenderHeader();\n\t\trenderFooter();\n\t\tviewsByType = {}; // even non-current views will be affected by this option change. do before rerender\n\t\treinitView();\n\t}\n\n\n\tfunction publiclyTrigger(name, thisObj) {\n\t\tvar args = Array.prototype.slice.call(arguments, 2);\n\n\t\tthisObj = thisObj || _element;\n\t\tthis.triggerWith(name, thisObj, args); // Emitter's method\n\n\t\tif (t.options[name]) {\n\t\t\treturn t.options[name].apply(thisObj, args);\n\t\t}\n\t}\n\n\tt.initialize();\n}\n\n;;\n/*\nOptions binding/triggering system.\n*/\nCalendar.mixin({\n\n\t// A map of option names to arrays of handler objects. Initialized to {} in Calendar.\n\t// Format for a handler object:\n\t// {\n\t//   func // callback function to be called upon change\n\t//   names // option names whose values should be given to func\n\t// }\n\toptionHandlers: null,\n\n\t// Calls handlerFunc immediately, and when the given option has changed.\n\t// handlerFunc will be given the option value.\n\tbindOption: function(optionName, handlerFunc) {\n\t\tthis.bindOptions([ optionName ], handlerFunc);\n\t},\n\n\t// Calls handlerFunc immediately, and when any of the given options change.\n\t// handlerFunc will be given each option value as ordered function arguments.\n\tbindOptions: function(optionNames, handlerFunc) {\n\t\tvar handlerObj = { func: handlerFunc, names: optionNames };\n\t\tvar i;\n\n\t\tfor (i = 0; i < optionNames.length; i++) {\n\t\t\tthis.registerOptionHandlerObj(optionNames[i], handlerObj);\n\t\t}\n\n\t\tthis.triggerOptionHandlerObj(handlerObj);\n\t},\n\n\t// Puts the given handler object into the internal hash\n\tregisterOptionHandlerObj: function(optionName, handlerObj) {\n\t\t(this.optionHandlers[optionName] || (this.optionHandlers[optionName] = []))\n\t\t\t.push(handlerObj);\n\t},\n\n\t// Reports that the given option has changed, and calls all appropriate handlers.\n\ttriggerOptionHandlers: function(optionName) {\n\t\tvar handlerObjs = this.optionHandlers[optionName] || [];\n\t\tvar i;\n\n\t\tfor (i = 0; i < handlerObjs.length; i++) {\n\t\t\tthis.triggerOptionHandlerObj(handlerObjs[i]);\n\t\t}\n\t},\n\n\t// Calls the callback for a specific handler object, passing in the appropriate arguments.\n\ttriggerOptionHandlerObj: function(handlerObj) {\n\t\tvar optionNames = handlerObj.names;\n\t\tvar optionValues = [];\n\t\tvar i;\n\n\t\tfor (i = 0; i < optionNames.length; i++) {\n\t\t\toptionValues.push(this.options[optionNames[i]]);\n\t\t}\n\n\t\thandlerObj.func.apply(this, optionValues); // maintain the Calendar's `this` context\n\t}\n\n});\n\n;;\n\nCalendar.defaults = {\n\n\ttitleRangeSeparator: ' \\u2013 ', // en dash\n\tmonthYearFormat: 'MMMM YYYY', // required for en. other locales rely on datepicker computable option\n\n\tdefaultTimedEventDuration: '02:00:00',\n\tdefaultAllDayEventDuration: { days: 1 },\n\tforceEventDuration: false,\n\tnextDayThreshold: '09:00:00', // 9am\n\n\t// display\n\tdefaultView: 'month',\n\taspectRatio: 1.35,\n\theader: {\n\t\tleft: 'title',\n\t\tcenter: '',\n\t\tright: 'today prev,next'\n\t},\n\tweekends: true,\n\tweekNumbers: false,\n\n\tweekNumberTitle: 'W',\n\tweekNumberCalculation: 'local',\n\n\t//editable: false,\n\n\t//nowIndicator: false,\n\n\tscrollTime: '06:00:00',\n\n\t// event ajax\n\tlazyFetching: true,\n\tstartParam: 'start',\n\tendParam: 'end',\n\ttimezoneParam: 'timezone',\n\n\ttimezone: false,\n\n\t//allDayDefault: undefined,\n\n\t// locale\n\tisRTL: false,\n\tbuttonText: {\n\t\tprev: \"prev\",\n\t\tnext: \"next\",\n\t\tprevYear: \"prev year\",\n\t\tnextYear: \"next year\",\n\t\tyear: 'year', // TODO: locale files need to specify this\n\t\ttoday: 'today',\n\t\tmonth: 'month',\n\t\tweek: 'week',\n\t\tday: 'day'\n\t},\n\n\tbuttonIcons: {\n\t\tprev: 'left-single-arrow',\n\t\tnext: 'right-single-arrow',\n\t\tprevYear: 'left-double-arrow',\n\t\tnextYear: 'right-double-arrow'\n\t},\n\n\tallDayText: 'all-day',\n\n\t// jquery-ui theming\n\ttheme: false,\n\tthemeButtonIcons: {\n\t\tprev: 'circle-triangle-w',\n\t\tnext: 'circle-triangle-e',\n\t\tprevYear: 'seek-prev',\n\t\tnextYear: 'seek-next'\n\t},\n\n\t//eventResizableFromStart: false,\n\tdragOpacity: .75,\n\tdragRevertDuration: 500,\n\tdragScroll: true,\n\n\t//selectable: false,\n\tunselectAuto: true,\n\n\tdropAccept: '*',\n\n\teventOrder: 'title',\n\t//eventRenderWait: null,\n\n\teventLimit: false,\n\teventLimitText: 'more',\n\teventLimitClick: 'popover',\n\tdayPopoverFormat: 'LL',\n\n\thandleWindowResize: true,\n\twindowResizeDelay: 100, // milliseconds before an updateSize happens\n\n\tlongPressDelay: 1000\n\n};\n\n\nCalendar.englishDefaults = { // used by locale.js\n\tdayPopoverFormat: 'dddd, MMMM D'\n};\n\n\nCalendar.rtlDefaults = { // right-to-left defaults\n\theader: { // TODO: smarter solution (first/center/last ?)\n\t\tleft: 'next,prev today',\n\t\tcenter: '',\n\t\tright: 'title'\n\t},\n\tbuttonIcons: {\n\t\tprev: 'right-single-arrow',\n\t\tnext: 'left-single-arrow',\n\t\tprevYear: 'right-double-arrow',\n\t\tnextYear: 'left-double-arrow'\n\t},\n\tthemeButtonIcons: {\n\t\tprev: 'circle-triangle-e',\n\t\tnext: 'circle-triangle-w',\n\t\tnextYear: 'seek-prev',\n\t\tprevYear: 'seek-next'\n\t}\n};\n\n;;\n\nvar localeOptionHash = FC.locales = {}; // initialize and expose\n\n\n// TODO: document the structure and ordering of a FullCalendar locale file\n\n\n// Initialize jQuery UI datepicker translations while using some of the translations\n// Will set this as the default locales for datepicker.\nFC.datepickerLocale = function(localeCode, dpLocaleCode, dpOptions) {\n\n\t// get the FullCalendar internal option hash for this locale. create if necessary\n\tvar fcOptions = localeOptionHash[localeCode] || (localeOptionHash[localeCode] = {});\n\n\t// transfer some simple options from datepicker to fc\n\tfcOptions.isRTL = dpOptions.isRTL;\n\tfcOptions.weekNumberTitle = dpOptions.weekHeader;\n\n\t// compute some more complex options from datepicker\n\t$.each(dpComputableOptions, function(name, func) {\n\t\tfcOptions[name] = func(dpOptions);\n\t});\n\n\t// is jQuery UI Datepicker is on the page?\n\tif ($.datepicker) {\n\n\t\t// Register the locale data.\n\t\t// FullCalendar and MomentJS use locale codes like \"pt-br\" but Datepicker\n\t\t// does it like \"pt-BR\" or if it doesn't have the locale, maybe just \"pt\".\n\t\t// Make an alias so the locale can be referenced either way.\n\t\t$.datepicker.regional[dpLocaleCode] =\n\t\t\t$.datepicker.regional[localeCode] = // alias\n\t\t\t\tdpOptions;\n\n\t\t// Alias 'en' to the default locale data. Do this every time.\n\t\t$.datepicker.regional.en = $.datepicker.regional[''];\n\n\t\t// Set as Datepicker's global defaults.\n\t\t$.datepicker.setDefaults(dpOptions);\n\t}\n};\n\n\n// Sets FullCalendar-specific translations. Will set the locales as the global default.\nFC.locale = function(localeCode, newFcOptions) {\n\tvar fcOptions;\n\tvar momOptions;\n\n\t// get the FullCalendar internal option hash for this locale. create if necessary\n\tfcOptions = localeOptionHash[localeCode] || (localeOptionHash[localeCode] = {});\n\n\t// provided new options for this locales? merge them in\n\tif (newFcOptions) {\n\t\tfcOptions = localeOptionHash[localeCode] = mergeOptions([ fcOptions, newFcOptions ]);\n\t}\n\n\t// compute locale options that weren't defined.\n\t// always do this. newFcOptions can be undefined when initializing from i18n file,\n\t// so no way to tell if this is an initialization or a default-setting.\n\tmomOptions = getMomentLocaleData(localeCode); // will fall back to en\n\t$.each(momComputableOptions, function(name, func) {\n\t\tif (fcOptions[name] == null) {\n\t\t\tfcOptions[name] = func(momOptions, fcOptions);\n\t\t}\n\t});\n\n\t// set it as the default locale for FullCalendar\n\tCalendar.defaults.locale = localeCode;\n};\n\n\n// NOTE: can't guarantee any of these computations will run because not every locale has datepicker\n// configs, so make sure there are English fallbacks for these in the defaults file.\nvar dpComputableOptions = {\n\n\tbuttonText: function(dpOptions) {\n\t\treturn {\n\t\t\t// the translations sometimes wrongly contain HTML entities\n\t\t\tprev: stripHtmlEntities(dpOptions.prevText),\n\t\t\tnext: stripHtmlEntities(dpOptions.nextText),\n\t\t\ttoday: stripHtmlEntities(dpOptions.currentText)\n\t\t};\n\t},\n\n\t// Produces format strings like \"MMMM YYYY\" -> \"September 2014\"\n\tmonthYearFormat: function(dpOptions) {\n\t\treturn dpOptions.showMonthAfterYear ?\n\t\t\t'YYYY[' + dpOptions.yearSuffix + '] MMMM' :\n\t\t\t'MMMM YYYY[' + dpOptions.yearSuffix + ']';\n\t}\n\n};\n\nvar momComputableOptions = {\n\n\t// Produces format strings like \"ddd M/D\" -> \"Fri 9/15\"\n\tdayOfMonthFormat: function(momOptions, fcOptions) {\n\t\tvar format = momOptions.longDateFormat('l'); // for the format like \"M/D/YYYY\"\n\n\t\t// strip the year off the edge, as well as other misc non-whitespace chars\n\t\tformat = format.replace(/^Y+[^\\w\\s]*|[^\\w\\s]*Y+$/g, '');\n\n\t\tif (fcOptions.isRTL) {\n\t\t\tformat += ' ddd'; // for RTL, add day-of-week to end\n\t\t}\n\t\telse {\n\t\t\tformat = 'ddd ' + format; // for LTR, add day-of-week to beginning\n\t\t}\n\t\treturn format;\n\t},\n\n\t// Produces format strings like \"h:mma\" -> \"6:00pm\"\n\tmediumTimeFormat: function(momOptions) { // can't be called `timeFormat` because collides with option\n\t\treturn momOptions.longDateFormat('LT')\n\t\t\t.replace(/\\s*a$/i, 'a'); // convert AM/PM/am/pm to lowercase. remove any spaces beforehand\n\t},\n\n\t// Produces format strings like \"h(:mm)a\" -> \"6pm\" / \"6:30pm\"\n\tsmallTimeFormat: function(momOptions) {\n\t\treturn momOptions.longDateFormat('LT')\n\t\t\t.replace(':mm', '(:mm)')\n\t\t\t.replace(/(\\Wmm)$/, '($1)') // like above, but for foreign locales\n\t\t\t.replace(/\\s*a$/i, 'a'); // convert AM/PM/am/pm to lowercase. remove any spaces beforehand\n\t},\n\n\t// Produces format strings like \"h(:mm)t\" -> \"6p\" / \"6:30p\"\n\textraSmallTimeFormat: function(momOptions) {\n\t\treturn momOptions.longDateFormat('LT')\n\t\t\t.replace(':mm', '(:mm)')\n\t\t\t.replace(/(\\Wmm)$/, '($1)') // like above, but for foreign locales\n\t\t\t.replace(/\\s*a$/i, 't'); // convert to AM/PM/am/pm to lowercase one-letter. remove any spaces beforehand\n\t},\n\n\t// Produces format strings like \"ha\" / \"H\" -> \"6pm\" / \"18\"\n\thourFormat: function(momOptions) {\n\t\treturn momOptions.longDateFormat('LT')\n\t\t\t.replace(':mm', '')\n\t\t\t.replace(/(\\Wmm)$/, '') // like above, but for foreign locales\n\t\t\t.replace(/\\s*a$/i, 'a'); // convert AM/PM/am/pm to lowercase. remove any spaces beforehand\n\t},\n\n\t// Produces format strings like \"h:mm\" -> \"6:30\" (with no AM/PM)\n\tnoMeridiemTimeFormat: function(momOptions) {\n\t\treturn momOptions.longDateFormat('LT')\n\t\t\t.replace(/\\s*a$/i, ''); // remove trailing AM/PM\n\t}\n\n};\n\n\n// options that should be computed off live calendar options (considers override options)\n// TODO: best place for this? related to locale?\n// TODO: flipping text based on isRTL is a bad idea because the CSS `direction` might want to handle it\nvar instanceComputableOptions = {\n\n\t// Produces format strings for results like \"Mo 16\"\n\tsmallDayDateFormat: function(options) {\n\t\treturn options.isRTL ?\n\t\t\t'D dd' :\n\t\t\t'dd D';\n\t},\n\n\t// Produces format strings for results like \"Wk 5\"\n\tweekFormat: function(options) {\n\t\treturn options.isRTL ?\n\t\t\t'w[ ' + options.weekNumberTitle + ']' :\n\t\t\t'[' + options.weekNumberTitle + ' ]w';\n\t},\n\n\t// Produces format strings for results like \"Wk5\"\n\tsmallWeekFormat: function(options) {\n\t\treturn options.isRTL ?\n\t\t\t'w[' + options.weekNumberTitle + ']' :\n\t\t\t'[' + options.weekNumberTitle + ']w';\n\t}\n\n};\n\nfunction populateInstanceComputableOptions(options) {\n\t$.each(instanceComputableOptions, function(name, func) {\n\t\tif (options[name] == null) {\n\t\t\toptions[name] = func(options);\n\t\t}\n\t});\n}\n\n\n// Returns moment's internal locale data. If doesn't exist, returns English.\nfunction getMomentLocaleData(localeCode) {\n\treturn moment.localeData(localeCode) || moment.localeData('en');\n}\n\n\n// Initialize English by forcing computation of moment-derived options.\n// Also, sets it as the default.\nFC.locale('en', Calendar.englishDefaults);\n\n;;\n\nFC.sourceNormalizers = [];\nFC.sourceFetchers = [];\n\nvar ajaxDefaults = {\n\tdataType: 'json',\n\tcache: false\n};\n\nvar eventGUID = 1;\n\n\nfunction EventManager() { // assumed to be a calendar\n\tvar t = this;\n\n\n\t// exports\n\tt.requestEvents = requestEvents;\n\tt.reportEventChange = reportEventChange;\n\tt.isFetchNeeded = isFetchNeeded;\n\tt.fetchEvents = fetchEvents;\n\tt.fetchEventSources = fetchEventSources;\n\tt.refetchEvents = refetchEvents;\n\tt.refetchEventSources = refetchEventSources;\n\tt.getEventSources = getEventSources;\n\tt.getEventSourceById = getEventSourceById;\n\tt.addEventSource = addEventSource;\n\tt.removeEventSource = removeEventSource;\n\tt.removeEventSources = removeEventSources;\n\tt.updateEvent = updateEvent;\n\tt.updateEvents = updateEvents;\n\tt.renderEvent = renderEvent;\n\tt.renderEvents = renderEvents;\n\tt.removeEvents = removeEvents;\n\tt.clientEvents = clientEvents;\n\tt.mutateEvent = mutateEvent;\n\tt.normalizeEventDates = normalizeEventDates;\n\tt.normalizeEventTimes = normalizeEventTimes;\n\n\n\t// locals\n\tvar stickySource = { events: [] };\n\tvar sources = [ stickySource ];\n\tvar rangeStart, rangeEnd;\n\tvar pendingSourceCnt = 0; // outstanding fetch requests, max one per source\n\tvar cache = []; // holds events that have already been expanded\n\tvar prunedCache; // like cache, but only events that intersect with rangeStart/rangeEnd\n\n\n\t$.each(\n\t\t(t.options.events ? [ t.options.events ] : []).concat(t.options.eventSources || []),\n\t\tfunction(i, sourceInput) {\n\t\t\tvar source = buildEventSource(sourceInput);\n\t\t\tif (source) {\n\t\t\t\tsources.push(source);\n\t\t\t}\n\t\t}\n\t);\n\n\n\n\tfunction requestEvents(start, end) {\n\t\tif (!t.options.lazyFetching || isFetchNeeded(start, end)) {\n\t\t\treturn fetchEvents(start, end);\n\t\t}\n\t\telse {\n\t\t\treturn Promise.resolve(prunedCache);\n\t\t}\n\t}\n\n\n\tfunction reportEventChange() {\n\t\tprunedCache = filterEventsWithinRange(cache);\n\t\tt.trigger('eventsReset', prunedCache);\n\t}\n\n\n\tfunction filterEventsWithinRange(events) {\n\t\tvar filteredEvents = [];\n\t\tvar i, event;\n\n\t\tfor (i = 0; i < events.length; i++) {\n\t\t\tevent = events[i];\n\n\t\t\tif (\n\t\t\t\tevent.start.clone().stripZone() < rangeEnd &&\n\t\t\t\tt.getEventEnd(event).stripZone() > rangeStart\n\t\t\t) {\n\t\t\t\tfilteredEvents.push(event);\n\t\t\t}\n\t\t}\n\n\t\treturn filteredEvents;\n\t}\n\n\n\tt.getEventCache = function() {\n\t\treturn cache;\n\t};\n\n\n\tt.getPrunedEventCache = function() {\n\t\treturn prunedCache;\n\t};\n\n\n\n\t/* Fetching\n\t-----------------------------------------------------------------------------*/\n\n\n\t// start and end are assumed to be unzoned\n\tfunction isFetchNeeded(start, end) {\n\t\treturn !rangeStart || // nothing has been fetched yet?\n\t\t\tstart < rangeStart || end > rangeEnd; // is part of the new range outside of the old range?\n\t}\n\n\n\tfunction fetchEvents(start, end) {\n\t\trangeStart = start;\n\t\trangeEnd = end;\n\t\treturn refetchEvents();\n\t}\n\n\n\t// poorly named. fetches all sources with current `rangeStart` and `rangeEnd`.\n\tfunction refetchEvents() {\n\t\treturn fetchEventSources(sources, 'reset');\n\t}\n\n\n\t// poorly named. fetches a subset of event sources.\n\tfunction refetchEventSources(matchInputs) {\n\t\treturn fetchEventSources(getEventSourcesByMatchArray(matchInputs));\n\t}\n\n\n\t// expects an array of event source objects (the originals, not copies)\n\t// `specialFetchType` is an optimization parameter that affects purging of the event cache.\n\tfunction fetchEventSources(specificSources, specialFetchType) {\n\t\tvar i, source;\n\n\t\tif (specialFetchType === 'reset') {\n\t\t\tcache = [];\n\t\t}\n\t\telse if (specialFetchType !== 'add') {\n\t\t\tcache = excludeEventsBySources(cache, specificSources);\n\t\t}\n\n\t\tfor (i = 0; i < specificSources.length; i++) {\n\t\t\tsource = specificSources[i];\n\n\t\t\t// already-pending sources have already been accounted for in pendingSourceCnt\n\t\t\tif (source._status !== 'pending') {\n\t\t\t\tpendingSourceCnt++;\n\t\t\t}\n\n\t\t\tsource._fetchId = (source._fetchId || 0) + 1;\n\t\t\tsource._status = 'pending';\n\t\t}\n\n\t\tfor (i = 0; i < specificSources.length; i++) {\n\t\t\tsource = specificSources[i];\n\t\t\ttryFetchEventSource(source, source._fetchId);\n\t\t}\n\n\t\tif (pendingSourceCnt) {\n\t\t\treturn new Promise(function(resolve) {\n\t\t\t\tt.one('eventsReceived', resolve); // will send prunedCache\n\t\t\t});\n\t\t}\n\t\telse { // executed all synchronously, or no sources at all\n\t\t\treturn Promise.resolve(prunedCache);\n\t\t}\n\t}\n\n\n\t// fetches an event source and processes its result ONLY if it is still the current fetch.\n\t// caller is responsible for incrementing pendingSourceCnt first.\n\tfunction tryFetchEventSource(source, fetchId) {\n\t\t_fetchEventSource(source, function(eventInputs) {\n\t\t\tvar isArraySource = $.isArray(source.events);\n\t\t\tvar i, eventInput;\n\t\t\tvar abstractEvent;\n\n\t\t\tif (\n\t\t\t\t// is this the source's most recent fetch?\n\t\t\t\t// if not, rely on an upcoming fetch of this source to decrement pendingSourceCnt\n\t\t\t\tfetchId === source._fetchId &&\n\t\t\t\t// event source no longer valid?\n\t\t\t\tsource._status !== 'rejected'\n\t\t\t) {\n\t\t\t\tsource._status = 'resolved';\n\n\t\t\t\tif (eventInputs) {\n\t\t\t\t\tfor (i = 0; i < eventInputs.length; i++) {\n\t\t\t\t\t\teventInput = eventInputs[i];\n\n\t\t\t\t\t\tif (isArraySource) { // array sources have already been convert to Event Objects\n\t\t\t\t\t\t\tabstractEvent = eventInput;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tabstractEvent = buildEventFromInput(eventInput, source);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (abstractEvent) { // not false (an invalid event)\n\t\t\t\t\t\t\tcache.push.apply( // append\n\t\t\t\t\t\t\t\tcache,\n\t\t\t\t\t\t\t\texpandEvent(abstractEvent) // add individual expanded events to the cache\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tdecrementPendingSourceCnt();\n\t\t\t}\n\t\t});\n\t}\n\n\n\tfunction rejectEventSource(source) {\n\t\tvar wasPending = source._status === 'pending';\n\n\t\tsource._status = 'rejected';\n\n\t\tif (wasPending) {\n\t\t\tdecrementPendingSourceCnt();\n\t\t}\n\t}\n\n\n\tfunction decrementPendingSourceCnt() {\n\t\tpendingSourceCnt--;\n\t\tif (!pendingSourceCnt) {\n\t\t\treportEventChange(cache); // updates prunedCache\n\t\t\tt.trigger('eventsReceived', prunedCache);\n\t\t}\n\t}\n\n\n\tfunction _fetchEventSource(source, callback) {\n\t\tvar i;\n\t\tvar fetchers = FC.sourceFetchers;\n\t\tvar res;\n\n\t\tfor (i=0; i<fetchers.length; i++) {\n\t\t\tres = fetchers[i].call(\n\t\t\t\tt, // this, the Calendar object\n\t\t\t\tsource,\n\t\t\t\trangeStart.clone(),\n\t\t\t\trangeEnd.clone(),\n\t\t\t\tt.options.timezone,\n\t\t\t\tcallback\n\t\t\t);\n\n\t\t\tif (res === true) {\n\t\t\t\t// the fetcher is in charge. made its own async request\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse if (typeof res == 'object') {\n\t\t\t\t// the fetcher returned a new source. process it\n\t\t\t\t_fetchEventSource(res, callback);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tvar events = source.events;\n\t\tif (events) {\n\t\t\tif ($.isFunction(events)) {\n\t\t\t\tt.pushLoading();\n\t\t\t\tevents.call(\n\t\t\t\t\tt, // this, the Calendar object\n\t\t\t\t\trangeStart.clone(),\n\t\t\t\t\trangeEnd.clone(),\n\t\t\t\t\tt.options.timezone,\n\t\t\t\t\tfunction(events) {\n\t\t\t\t\t\tcallback(events);\n\t\t\t\t\t\tt.popLoading();\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t\telse if ($.isArray(events)) {\n\t\t\t\tcallback(events);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}else{\n\t\t\tvar url = source.url;\n\t\t\tif (url) {\n\t\t\t\tvar success = source.success;\n\t\t\t\tvar error = source.error;\n\t\t\t\tvar complete = source.complete;\n\n\t\t\t\t// retrieve any outbound GET/POST $.ajax data from the options\n\t\t\t\tvar customData;\n\t\t\t\tif ($.isFunction(source.data)) {\n\t\t\t\t\t// supplied as a function that returns a key/value object\n\t\t\t\t\tcustomData = source.data();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// supplied as a straight key/value object\n\t\t\t\t\tcustomData = source.data;\n\t\t\t\t}\n\n\t\t\t\t// use a copy of the custom data so we can modify the parameters\n\t\t\t\t// and not affect the passed-in object.\n\t\t\t\tvar data = $.extend({}, customData || {});\n\n\t\t\t\tvar startParam = firstDefined(source.startParam, t.options.startParam);\n\t\t\t\tvar endParam = firstDefined(source.endParam, t.options.endParam);\n\t\t\t\tvar timezoneParam = firstDefined(source.timezoneParam, t.options.timezoneParam);\n\n\t\t\t\tif (startParam) {\n\t\t\t\t\tdata[startParam] = rangeStart.format();\n\t\t\t\t}\n\t\t\t\tif (endParam) {\n\t\t\t\t\tdata[endParam] = rangeEnd.format();\n\t\t\t\t}\n\t\t\t\tif (t.options.timezone && t.options.timezone != 'local') {\n\t\t\t\t\tdata[timezoneParam] = t.options.timezone;\n\t\t\t\t}\n\n\t\t\t\tt.pushLoading();\n\t\t\t\t$.ajax($.extend({}, ajaxDefaults, source, {\n\t\t\t\t\tdata: data,\n\t\t\t\t\tsuccess: function(events) {\n\t\t\t\t\t\tevents = events || [];\n\t\t\t\t\t\tvar res = applyAll(success, this, arguments);\n\t\t\t\t\t\tif ($.isArray(res)) {\n\t\t\t\t\t\t\tevents = res;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcallback(events);\n\t\t\t\t\t},\n\t\t\t\t\terror: function() {\n\t\t\t\t\t\tapplyAll(error, this, arguments);\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: function() {\n\t\t\t\t\t\tapplyAll(complete, this, arguments);\n\t\t\t\t\t\tt.popLoading();\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t}else{\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t}\n\n\n\n\t/* Sources\n\t-----------------------------------------------------------------------------*/\n\n\n\tfunction addEventSource(sourceInput) {\n\t\tvar source = buildEventSource(sourceInput);\n\t\tif (source) {\n\t\t\tsources.push(source);\n\t\t\tfetchEventSources([ source ], 'add'); // will eventually call reportEventChange\n\t\t}\n\t}\n\n\n\tfunction buildEventSource(sourceInput) { // will return undefined if invalid source\n\t\tvar normalizers = FC.sourceNormalizers;\n\t\tvar source;\n\t\tvar i;\n\n\t\tif ($.isFunction(sourceInput) || $.isArray(sourceInput)) {\n\t\t\tsource = { events: sourceInput };\n\t\t}\n\t\telse if (typeof sourceInput === 'string') {\n\t\t\tsource = { url: sourceInput };\n\t\t}\n\t\telse if (typeof sourceInput === 'object') {\n\t\t\tsource = $.extend({}, sourceInput); // shallow copy\n\t\t}\n\n\t\tif (source) {\n\n\t\t\t// TODO: repeat code, same code for event classNames\n\t\t\tif (source.className) {\n\t\t\t\tif (typeof source.className === 'string') {\n\t\t\t\t\tsource.className = source.className.split(/\\s+/);\n\t\t\t\t}\n\t\t\t\t// otherwise, assumed to be an array\n\t\t\t}\n\t\t\telse {\n\t\t\t\tsource.className = [];\n\t\t\t}\n\n\t\t\t// for array sources, we convert to standard Event Objects up front\n\t\t\tif ($.isArray(source.events)) {\n\t\t\t\tsource.origArray = source.events; // for removeEventSource\n\t\t\t\tsource.events = $.map(source.events, function(eventInput) {\n\t\t\t\t\treturn buildEventFromInput(eventInput, source);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfor (i=0; i<normalizers.length; i++) {\n\t\t\t\tnormalizers[i].call(t, source);\n\t\t\t}\n\n\t\t\treturn source;\n\t\t}\n\t}\n\n\n\tfunction removeEventSource(matchInput) {\n\t\tremoveSpecificEventSources(\n\t\t\tgetEventSourcesByMatch(matchInput)\n\t\t);\n\t}\n\n\n\t// if called with no arguments, removes all.\n\tfunction removeEventSources(matchInputs) {\n\t\tif (matchInputs == null) {\n\t\t\tremoveSpecificEventSources(sources, true); // isAll=true\n\t\t}\n\t\telse {\n\t\t\tremoveSpecificEventSources(\n\t\t\t\tgetEventSourcesByMatchArray(matchInputs)\n\t\t\t);\n\t\t}\n\t}\n\n\n\tfunction removeSpecificEventSources(targetSources, isAll) {\n\t\tvar i;\n\n\t\t// cancel pending requests\n\t\tfor (i = 0; i < targetSources.length; i++) {\n\t\t\trejectEventSource(targetSources[i]);\n\t\t}\n\n\t\tif (isAll) { // an optimization\n\t\t\tsources = [];\n\t\t\tcache = [];\n\t\t}\n\t\telse {\n\t\t\t// remove from persisted source list\n\t\t\tsources = $.grep(sources, function(source) {\n\t\t\t\tfor (i = 0; i < targetSources.length; i++) {\n\t\t\t\t\tif (source === targetSources[i]) {\n\t\t\t\t\t\treturn false; // exclude\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true; // include\n\t\t\t});\n\n\t\t\tcache = excludeEventsBySources(cache, targetSources);\n\t\t}\n\n\t\treportEventChange();\n\t}\n\n\n\tfunction getEventSources() {\n\t\treturn sources.slice(1); // returns a shallow copy of sources with stickySource removed\n\t}\n\n\n\tfunction getEventSourceById(id) {\n\t\treturn $.grep(sources, function(source) {\n\t\t\treturn source.id && source.id === id;\n\t\t})[0];\n\t}\n\n\n\t// like getEventSourcesByMatch, but accepts multple match criteria (like multiple IDs)\n\tfunction getEventSourcesByMatchArray(matchInputs) {\n\n\t\t// coerce into an array\n\t\tif (!matchInputs) {\n\t\t\tmatchInputs = [];\n\t\t}\n\t\telse if (!$.isArray(matchInputs)) {\n\t\t\tmatchInputs = [ matchInputs ];\n\t\t}\n\n\t\tvar matchingSources = [];\n\t\tvar i;\n\n\t\t// resolve raw inputs to real event source objects\n\t\tfor (i = 0; i < matchInputs.length; i++) {\n\t\t\tmatchingSources.push.apply( // append\n\t\t\t\tmatchingSources,\n\t\t\t\tgetEventSourcesByMatch(matchInputs[i])\n\t\t\t);\n\t\t}\n\n\t\treturn matchingSources;\n\t}\n\n\n\t// matchInput can either by a real event source object, an ID, or the function/URL for the source.\n\t// returns an array of matching source objects.\n\tfunction getEventSourcesByMatch(matchInput) {\n\t\tvar i, source;\n\n\t\t// given an proper event source object\n\t\tfor (i = 0; i < sources.length; i++) {\n\t\t\tsource = sources[i];\n\t\t\tif (source === matchInput) {\n\t\t\t\treturn [ source ];\n\t\t\t}\n\t\t}\n\n\t\t// an ID match\n\t\tsource = getEventSourceById(matchInput);\n\t\tif (source) {\n\t\t\treturn [ source ];\n\t\t}\n\n\t\treturn $.grep(sources, function(source) {\n\t\t\treturn isSourcesEquivalent(matchInput, source);\n\t\t});\n\t}\n\n\n\tfunction isSourcesEquivalent(source1, source2) {\n\t\treturn source1 && source2 && getSourcePrimitive(source1) == getSourcePrimitive(source2);\n\t}\n\n\n\tfunction getSourcePrimitive(source) {\n\t\treturn (\n\t\t\t(typeof source === 'object') ? // a normalized event source?\n\t\t\t\t(source.origArray || source.googleCalendarId || source.url || source.events) : // get the primitive\n\t\t\t\tnull\n\t\t) ||\n\t\tsource; // the given argument *is* the primitive\n\t}\n\n\n\t// util\n\t// returns a filtered array without events that are part of any of the given sources\n\tfunction excludeEventsBySources(specificEvents, specificSources) {\n\t\treturn $.grep(specificEvents, function(event) {\n\t\t\tfor (var i = 0; i < specificSources.length; i++) {\n\t\t\t\tif (event.source === specificSources[i]) {\n\t\t\t\t\treturn false; // exclude\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true; // keep\n\t\t});\n\t}\n\n\n\n\t/* Manipulation\n\t-----------------------------------------------------------------------------*/\n\n\n\t// Only ever called from the externally-facing API\n\tfunction updateEvent(event) {\n\t\tupdateEvents([ event ]);\n\t}\n\n\n\t// Only ever called from the externally-facing API\n\tfunction updateEvents(events) {\n\t\tvar i, event;\n\n\t\tfor (i = 0; i < events.length; i++) {\n\t\t\tevent = events[i];\n\n\t\t\t// massage start/end values, even if date string values\n\t\t\tevent.start = t.moment(event.start);\n\t\t\tif (event.end) {\n\t\t\t\tevent.end = t.moment(event.end);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tevent.end = null;\n\t\t\t}\n\n\t\t\tmutateEvent(event, getMiscEventProps(event)); // will handle start/end/allDay normalization\n\t\t}\n\n\t\treportEventChange(); // reports event modifications (so we can redraw)\n\t}\n\n\n\t// Returns a hash of misc event properties that should be copied over to related events.\n\tfunction getMiscEventProps(event) {\n\t\tvar props = {};\n\n\t\t$.each(event, function(name, val) {\n\t\t\tif (isMiscEventPropName(name)) {\n\t\t\t\tif (val !== undefined && isAtomic(val)) { // a defined non-object\n\t\t\t\t\tprops[name] = val;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn props;\n\t}\n\n\t// non-date-related, non-id-related, non-secret\n\tfunction isMiscEventPropName(name) {\n\t\treturn !/^_|^(id|allDay|start|end)$/.test(name);\n\t}\n\n\n\t// returns the expanded events that were created\n\tfunction renderEvent(eventInput, stick) {\n\t\treturn renderEvents([ eventInput ], stick);\n\t}\n\n\n\t// returns the expanded events that were created\n\tfunction renderEvents(eventInputs, stick) {\n\t\tvar renderedEvents = [];\n\t\tvar renderableEvents;\n\t\tvar abstractEvent;\n\t\tvar i, j, event;\n\n\t\tfor (i = 0; i < eventInputs.length; i++) {\n\t\t\tabstractEvent = buildEventFromInput(eventInputs[i]);\n\n\t\t\tif (abstractEvent) { // not false (a valid input)\n\t\t\t\trenderableEvents = expandEvent(abstractEvent);\n\n\t\t\t\tfor (j = 0; j < renderableEvents.length; j++) {\n\t\t\t\t\tevent = renderableEvents[j];\n\n\t\t\t\t\tif (!event.source) {\n\t\t\t\t\t\tif (stick) {\n\t\t\t\t\t\t\tstickySource.events.push(event);\n\t\t\t\t\t\t\tevent.source = stickySource;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcache.push(event);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\trenderedEvents = renderedEvents.concat(renderableEvents);\n\t\t\t}\n\t\t}\n\n\t\tif (renderedEvents.length) { // any new events rendered?\n\t\t\treportEventChange();\n\t\t}\n\n\t\treturn renderedEvents;\n\t}\n\n\n\tfunction removeEvents(filter) {\n\t\tvar eventID;\n\t\tvar i;\n\n\t\tif (filter == null) { // null or undefined. remove all events\n\t\t\tfilter = function() { return true; }; // will always match\n\t\t}\n\t\telse if (!$.isFunction(filter)) { // an event ID\n\t\t\teventID = filter + '';\n\t\t\tfilter = function(event) {\n\t\t\t\treturn event._id == eventID;\n\t\t\t};\n\t\t}\n\n\t\t// Purge event(s) from our local cache\n\t\tcache = $.grep(cache, filter, true); // inverse=true\n\n\t\t// Remove events from array sources.\n\t\t// This works because they have been converted to official Event Objects up front.\n\t\t// (and as a result, event._id has been calculated).\n\t\tfor (i=0; i<sources.length; i++) {\n\t\t\tif ($.isArray(sources[i].events)) {\n\t\t\t\tsources[i].events = $.grep(sources[i].events, filter, true);\n\t\t\t}\n\t\t}\n\n\t\treportEventChange();\n\t}\n\n\n\tfunction clientEvents(filter) {\n\t\tif ($.isFunction(filter)) {\n\t\t\treturn $.grep(cache, filter);\n\t\t}\n\t\telse if (filter != null) { // not null, not undefined. an event ID\n\t\t\tfilter += '';\n\t\t\treturn $.grep(cache, function(e) {\n\t\t\t\treturn e._id == filter;\n\t\t\t});\n\t\t}\n\t\treturn cache; // else, return all\n\t}\n\n\n\t// Makes sure all array event sources have their internal event objects\n\t// converted over to the Calendar's current timezone.\n\tt.rezoneArrayEventSources = function() {\n\t\tvar i;\n\t\tvar events;\n\t\tvar j;\n\n\t\tfor (i = 0; i < sources.length; i++) {\n\t\t\tevents = sources[i].events;\n\t\t\tif ($.isArray(events)) {\n\n\t\t\t\tfor (j = 0; j < events.length; j++) {\n\t\t\t\t\trezoneEventDates(events[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction rezoneEventDates(event) {\n\t\tevent.start = t.moment(event.start);\n\t\tif (event.end) {\n\t\t\tevent.end = t.moment(event.end);\n\t\t}\n\t\tbackupEventDates(event);\n\t}\n\n\n\t/* Event Normalization\n\t-----------------------------------------------------------------------------*/\n\n\n\t// Given a raw object with key/value properties, returns an \"abstract\" Event object.\n\t// An \"abstract\" event is an event that, if recurring, will not have been expanded yet.\n\t// Will return `false` when input is invalid.\n\t// `source` is optional\n\tfunction buildEventFromInput(input, source) {\n\t\tvar out = {};\n\t\tvar start, end;\n\t\tvar allDay;\n\n\t\tif (t.options.eventDataTransform) {\n\t\t\tinput = t.options.eventDataTransform(input);\n\t\t}\n\t\tif (source && source.eventDataTransform) {\n\t\t\tinput = source.eventDataTransform(input);\n\t\t}\n\n\t\t// Copy all properties over to the resulting object.\n\t\t// The special-case properties will be copied over afterwards.\n\t\t$.extend(out, input);\n\n\t\tif (source) {\n\t\t\tout.source = source;\n\t\t}\n\n\t\tout._id = input._id || (input.id === undefined ? '_fc' + eventGUID++ : input.id + '');\n\n\t\tif (input.className) {\n\t\t\tif (typeof input.className == 'string') {\n\t\t\t\tout.className = input.className.split(/\\s+/);\n\t\t\t}\n\t\t\telse { // assumed to be an array\n\t\t\t\tout.className = input.className;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tout.className = [];\n\t\t}\n\n\t\tstart = input.start || input.date; // \"date\" is an alias for \"start\"\n\t\tend = input.end;\n\n\t\t// parse as a time (Duration) if applicable\n\t\tif (isTimeString(start)) {\n\t\t\tstart = moment.duration(start);\n\t\t}\n\t\tif (isTimeString(end)) {\n\t\t\tend = moment.duration(end);\n\t\t}\n\n\t\tif (input.dow || moment.isDuration(start) || moment.isDuration(end)) {\n\n\t\t\t// the event is \"abstract\" (recurring) so don't calculate exact start/end dates just yet\n\t\t\tout.start = start ? moment.duration(start) : null; // will be a Duration or null\n\t\t\tout.end = end ? moment.duration(end) : null; // will be a Duration or null\n\t\t\tout._recurring = true; // our internal marker\n\t\t}\n\t\telse {\n\n\t\t\tif (start) {\n\t\t\t\tstart = t.moment(start);\n\t\t\t\tif (!start.isValid()) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (end) {\n\t\t\t\tend = t.moment(end);\n\t\t\t\tif (!end.isValid()) {\n\t\t\t\t\tend = null; // let defaults take over\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tallDay = input.allDay;\n\t\t\tif (allDay === undefined) { // still undefined? fallback to default\n\t\t\t\tallDay = firstDefined(\n\t\t\t\t\tsource ? source.allDayDefault : undefined,\n\t\t\t\t\tt.options.allDayDefault\n\t\t\t\t);\n\t\t\t\t// still undefined? normalizeEventDates will calculate it\n\t\t\t}\n\n\t\t\tassignDatesToEvent(start, end, allDay, out);\n\t\t}\n\n\t\tt.normalizeEvent(out); // hook for external use. a prototype method\n\n\t\treturn out;\n\t}\n\tt.buildEventFromInput = buildEventFromInput;\n\n\n\t// Normalizes and assigns the given dates to the given partially-formed event object.\n\t// NOTE: mutates the given start/end moments. does not make a copy.\n\tfunction assignDatesToEvent(start, end, allDay, event) {\n\t\tevent.start = start;\n\t\tevent.end = end;\n\t\tevent.allDay = allDay;\n\t\tnormalizeEventDates(event);\n\t\tbackupEventDates(event);\n\t}\n\n\n\t// Ensures proper values for allDay/start/end. Accepts an Event object, or a plain object with event-ish properties.\n\t// NOTE: Will modify the given object.\n\tfunction normalizeEventDates(eventProps) {\n\n\t\tnormalizeEventTimes(eventProps);\n\n\t\tif (eventProps.end && !eventProps.end.isAfter(eventProps.start)) {\n\t\t\teventProps.end = null;\n\t\t}\n\n\t\tif (!eventProps.end) {\n\t\t\tif (t.options.forceEventDuration) {\n\t\t\t\teventProps.end = t.getDefaultEventEnd(eventProps.allDay, eventProps.start);\n\t\t\t}\n\t\t\telse {\n\t\t\t\teventProps.end = null;\n\t\t\t}\n\t\t}\n\t}\n\n\n\t// Ensures the allDay property exists and the timeliness of the start/end dates are consistent\n\tfunction normalizeEventTimes(eventProps) {\n\t\tif (eventProps.allDay == null) {\n\t\t\teventProps.allDay = !(eventProps.start.hasTime() || (eventProps.end && eventProps.end.hasTime()));\n\t\t}\n\n\t\tif (eventProps.allDay) {\n\t\t\teventProps.start.stripTime();\n\t\t\tif (eventProps.end) {\n\t\t\t\t// TODO: consider nextDayThreshold here? If so, will require a lot of testing and adjustment\n\t\t\t\teventProps.end.stripTime();\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif (!eventProps.start.hasTime()) {\n\t\t\t\teventProps.start = t.applyTimezone(eventProps.start.time(0)); // will assign a 00:00 time\n\t\t\t}\n\t\t\tif (eventProps.end && !eventProps.end.hasTime()) {\n\t\t\t\teventProps.end = t.applyTimezone(eventProps.end.time(0)); // will assign a 00:00 time\n\t\t\t}\n\t\t}\n\t}\n\n\n\t// If the given event is a recurring event, break it down into an array of individual instances.\n\t// If not a recurring event, return an array with the single original event.\n\t// If given a falsy input (probably because of a failed buildEventFromInput call), returns an empty array.\n\t// HACK: can override the recurring window by providing custom rangeStart/rangeEnd (for businessHours).\n\tfunction expandEvent(abstractEvent, _rangeStart, _rangeEnd) {\n\t\tvar events = [];\n\t\tvar dowHash;\n\t\tvar dow;\n\t\tvar i;\n\t\tvar date;\n\t\tvar startTime, endTime;\n\t\tvar start, end;\n\t\tvar event;\n\n\t\t_rangeStart = _rangeStart || rangeStart;\n\t\t_rangeEnd = _rangeEnd || rangeEnd;\n\n\t\tif (abstractEvent) {\n\t\t\tif (abstractEvent._recurring) {\n\n\t\t\t\t// make a boolean hash as to whether the event occurs on each day-of-week\n\t\t\t\tif ((dow = abstractEvent.dow)) {\n\t\t\t\t\tdowHash = {};\n\t\t\t\t\tfor (i = 0; i < dow.length; i++) {\n\t\t\t\t\t\tdowHash[dow[i]] = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// iterate through every day in the current range\n\t\t\t\tdate = _rangeStart.clone().stripTime(); // holds the date of the current day\n\t\t\t\twhile (date.isBefore(_rangeEnd)) {\n\n\t\t\t\t\tif (!dowHash || dowHash[date.day()]) { // if everyday, or this particular day-of-week\n\n\t\t\t\t\t\tstartTime = abstractEvent.start; // the stored start and end properties are times (Durations)\n\t\t\t\t\t\tendTime = abstractEvent.end; // \"\n\t\t\t\t\t\tstart = date.clone();\n\t\t\t\t\t\tend = null;\n\n\t\t\t\t\t\tif (startTime) {\n\t\t\t\t\t\t\tstart = start.time(startTime);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (endTime) {\n\t\t\t\t\t\t\tend = date.clone().time(endTime);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tevent = $.extend({}, abstractEvent); // make a copy of the original\n\t\t\t\t\t\tassignDatesToEvent(\n\t\t\t\t\t\t\tstart, end,\n\t\t\t\t\t\t\t!startTime && !endTime, // allDay?\n\t\t\t\t\t\t\tevent\n\t\t\t\t\t\t);\n\t\t\t\t\t\tevents.push(event);\n\t\t\t\t\t}\n\n\t\t\t\t\tdate.add(1, 'days');\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tevents.push(abstractEvent); // return the original event. will be a one-item array\n\t\t\t}\n\t\t}\n\n\t\treturn events;\n\t}\n\tt.expandEvent = expandEvent;\n\n\n\n\t/* Event Modification Math\n\t-----------------------------------------------------------------------------------------*/\n\n\n\t// Modifies an event and all related events by applying the given properties.\n\t// Special date-diffing logic is used for manipulation of dates.\n\t// If `props` does not contain start/end dates, the updated values are assumed to be the event's current start/end.\n\t// All date comparisons are done against the event's pristine _start and _end dates.\n\t// Returns an object with delta information and a function to undo all operations.\n\t// For making computations in a granularity greater than day/time, specify largeUnit.\n\t// NOTE: The given `newProps` might be mutated for normalization purposes.\n\tfunction mutateEvent(event, newProps, largeUnit) {\n\t\tvar miscProps = {};\n\t\tvar oldProps;\n\t\tvar clearEnd;\n\t\tvar startDelta;\n\t\tvar endDelta;\n\t\tvar durationDelta;\n\t\tvar undoFunc;\n\n\t\t// diffs the dates in the appropriate way, returning a duration\n\t\tfunction diffDates(date1, date0) { // date1 - date0\n\t\t\tif (largeUnit) {\n\t\t\t\treturn diffByUnit(date1, date0, largeUnit);\n\t\t\t}\n\t\t\telse if (newProps.allDay) {\n\t\t\t\treturn diffDay(date1, date0);\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn diffDayTime(date1, date0);\n\t\t\t}\n\t\t}\n\n\t\tnewProps = newProps || {};\n\n\t\t// normalize new date-related properties\n\t\tif (!newProps.start) {\n\t\t\tnewProps.start = event.start.clone();\n\t\t}\n\t\tif (newProps.end === undefined) {\n\t\t\tnewProps.end = event.end ? event.end.clone() : null;\n\t\t}\n\t\tif (newProps.allDay == null) { // is null or undefined?\n\t\t\tnewProps.allDay = event.allDay;\n\t\t}\n\t\tnormalizeEventDates(newProps);\n\n\t\t// create normalized versions of the original props to compare against\n\t\t// need a real end value, for diffing\n\t\toldProps = {\n\t\t\tstart: event._start.clone(),\n\t\t\tend: event._end ? event._end.clone() : t.getDefaultEventEnd(event._allDay, event._start),\n\t\t\tallDay: newProps.allDay // normalize the dates in the same regard as the new properties\n\t\t};\n\t\tnormalizeEventDates(oldProps);\n\n\t\t// need to clear the end date if explicitly changed to null\n\t\tclearEnd = event._end !== null && newProps.end === null;\n\n\t\t// compute the delta for moving the start date\n\t\tstartDelta = diffDates(newProps.start, oldProps.start);\n\n\t\t// compute the delta for moving the end date\n\t\tif (newProps.end) {\n\t\t\tendDelta = diffDates(newProps.end, oldProps.end);\n\t\t\tdurationDelta = endDelta.subtract(startDelta);\n\t\t}\n\t\telse {\n\t\t\tdurationDelta = null;\n\t\t}\n\n\t\t// gather all non-date-related properties\n\t\t$.each(newProps, function(name, val) {\n\t\t\tif (isMiscEventPropName(name)) {\n\t\t\t\tif (val !== undefined) {\n\t\t\t\t\tmiscProps[name] = val;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// apply the operations to the event and all related events\n\t\tundoFunc = mutateEvents(\n\t\t\tclientEvents(event._id), // get events with this ID\n\t\t\tclearEnd,\n\t\t\tnewProps.allDay,\n\t\t\tstartDelta,\n\t\t\tdurationDelta,\n\t\t\tmiscProps\n\t\t);\n\n\t\treturn {\n\t\t\tdateDelta: startDelta,\n\t\t\tdurationDelta: durationDelta,\n\t\t\tundo: undoFunc\n\t\t};\n\t}\n\n\n\t// Modifies an array of events in the following ways (operations are in order):\n\t// - clear the event's `end`\n\t// - convert the event to allDay\n\t// - add `dateDelta` to the start and end\n\t// - add `durationDelta` to the event's duration\n\t// - assign `miscProps` to the event\n\t//\n\t// Returns a function that can be called to undo all the operations.\n\t//\n\t// TODO: don't use so many closures. possible memory issues when lots of events with same ID.\n\t//\n\tfunction mutateEvents(events, clearEnd, allDay, dateDelta, durationDelta, miscProps) {\n\t\tvar isAmbigTimezone = t.getIsAmbigTimezone();\n\t\tvar undoFunctions = [];\n\n\t\t// normalize zero-length deltas to be null\n\t\tif (dateDelta && !dateDelta.valueOf()) { dateDelta = null; }\n\t\tif (durationDelta && !durationDelta.valueOf()) { durationDelta = null; }\n\n\t\t$.each(events, function(i, event) {\n\t\t\tvar oldProps;\n\t\t\tvar newProps;\n\n\t\t\t// build an object holding all the old values, both date-related and misc.\n\t\t\t// for the undo function.\n\t\t\toldProps = {\n\t\t\t\tstart: event.start.clone(),\n\t\t\t\tend: event.end ? event.end.clone() : null,\n\t\t\t\tallDay: event.allDay\n\t\t\t};\n\t\t\t$.each(miscProps, function(name) {\n\t\t\t\toldProps[name] = event[name];\n\t\t\t});\n\n\t\t\t// new date-related properties. work off the original date snapshot.\n\t\t\t// ok to use references because they will be thrown away when backupEventDates is called.\n\t\t\tnewProps = {\n\t\t\t\tstart: event._start,\n\t\t\t\tend: event._end,\n\t\t\t\tallDay: allDay // normalize the dates in the same regard as the new properties\n\t\t\t};\n\t\t\tnormalizeEventDates(newProps); // massages start/end/allDay\n\n\t\t\t// strip or ensure the end date\n\t\t\tif (clearEnd) {\n\t\t\t\tnewProps.end = null;\n\t\t\t}\n\t\t\telse if (durationDelta && !newProps.end) { // the duration translation requires an end date\n\t\t\t\tnewProps.end = t.getDefaultEventEnd(newProps.allDay, newProps.start);\n\t\t\t}\n\n\t\t\tif (dateDelta) {\n\t\t\t\tnewProps.start.add(dateDelta);\n\t\t\t\tif (newProps.end) {\n\t\t\t\t\tnewProps.end.add(dateDelta);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (durationDelta) {\n\t\t\t\tnewProps.end.add(durationDelta); // end already ensured above\n\t\t\t}\n\n\t\t\t// if the dates have changed, and we know it is impossible to recompute the\n\t\t\t// timezone offsets, strip the zone.\n\t\t\tif (\n\t\t\t\tisAmbigTimezone &&\n\t\t\t\t!newProps.allDay &&\n\t\t\t\t(dateDelta || durationDelta)\n\t\t\t) {\n\t\t\t\tnewProps.start.stripZone();\n\t\t\t\tif (newProps.end) {\n\t\t\t\t\tnewProps.end.stripZone();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$.extend(event, miscProps, newProps); // copy over misc props, then date-related props\n\t\t\tbackupEventDates(event); // regenerate internal _start/_end/_allDay\n\n\t\t\tundoFunctions.push(function() {\n\t\t\t\t$.extend(event, oldProps);\n\t\t\t\tbackupEventDates(event); // regenerate internal _start/_end/_allDay\n\t\t\t});\n\t\t});\n\n\t\treturn function() {\n\t\t\tfor (var i = 0; i < undoFunctions.length; i++) {\n\t\t\t\tundoFunctions[i]();\n\t\t\t}\n\t\t};\n\t}\n\n}\n\n\n// hook for external libs to manipulate event properties upon creation.\n// should manipulate the event in-place.\nCalendar.prototype.normalizeEvent = function(event) {\n};\n\n\n// Does the given span (start, end, and other location information)\n// fully contain the other?\nCalendar.prototype.spanContainsSpan = function(outerSpan, innerSpan) {\n\tvar eventStart = outerSpan.start.clone().stripZone();\n\tvar eventEnd = this.getEventEnd(outerSpan).stripZone();\n\n\treturn innerSpan.start >= eventStart && innerSpan.end <= eventEnd;\n};\n\n\n// Returns a list of events that the given event should be compared against when being considered for a move to\n// the specified span. Attached to the Calendar's prototype because EventManager is a mixin for a Calendar.\nCalendar.prototype.getPeerEvents = function(span, event) {\n\tvar cache = this.getEventCache();\n\tvar peerEvents = [];\n\tvar i, otherEvent;\n\n\tfor (i = 0; i < cache.length; i++) {\n\t\totherEvent = cache[i];\n\t\tif (\n\t\t\t!event ||\n\t\t\tevent._id !== otherEvent._id // don't compare the event to itself or other related [repeating] events\n\t\t) {\n\t\t\tpeerEvents.push(otherEvent);\n\t\t}\n\t}\n\n\treturn peerEvents;\n};\n\n\n// updates the \"backup\" properties, which are preserved in order to compute diffs later on.\nfunction backupEventDates(event) {\n\tevent._allDay = event.allDay;\n\tevent._start = event.start.clone();\n\tevent._end = event.end ? event.end.clone() : null;\n}\n\n\n/* Overlapping / Constraining\n-----------------------------------------------------------------------------------------*/\n\n\n// Determines if the given event can be relocated to the given span (unzoned start/end with other misc data)\nCalendar.prototype.isEventSpanAllowed = function(span, event) {\n\tvar source = event.source || {};\n\n\tvar constraint = firstDefined(\n\t\tevent.constraint,\n\t\tsource.constraint,\n\t\tthis.options.eventConstraint\n\t);\n\n\tvar overlap = firstDefined(\n\t\tevent.overlap,\n\t\tsource.overlap,\n\t\tthis.options.eventOverlap\n\t);\n\n\treturn this.isSpanAllowed(span, constraint, overlap, event) &&\n\t\t(!this.options.eventAllow || this.options.eventAllow(span, event) !== false);\n};\n\n\n// Determines if an external event can be relocated to the given span (unzoned start/end with other misc data)\nCalendar.prototype.isExternalSpanAllowed = function(eventSpan, eventLocation, eventProps) {\n\tvar eventInput;\n\tvar event;\n\n\t// note: very similar logic is in View's reportExternalDrop\n\tif (eventProps) {\n\t\teventInput = $.extend({}, eventProps, eventLocation);\n\t\tevent = this.expandEvent(\n\t\t\tthis.buildEventFromInput(eventInput)\n\t\t)[0];\n\t}\n\n\tif (event) {\n\t\treturn this.isEventSpanAllowed(eventSpan, event);\n\t}\n\telse { // treat it as a selection\n\n\t\treturn this.isSelectionSpanAllowed(eventSpan);\n\t}\n};\n\n\n// Determines the given span (unzoned start/end with other misc data) can be selected.\nCalendar.prototype.isSelectionSpanAllowed = function(span) {\n\treturn this.isSpanAllowed(span, this.options.selectConstraint, this.options.selectOverlap) &&\n\t\t(!this.options.selectAllow || this.options.selectAllow(span) !== false);\n};\n\n\n// Returns true if the given span (caused by an event drop/resize or a selection) is allowed to exist\n// according to the constraint/overlap settings.\n// `event` is not required if checking a selection.\nCalendar.prototype.isSpanAllowed = function(span, constraint, overlap, event) {\n\tvar constraintEvents;\n\tvar anyContainment;\n\tvar peerEvents;\n\tvar i, peerEvent;\n\tvar peerOverlap;\n\n\t// the range must be fully contained by at least one of produced constraint events\n\tif (constraint != null) {\n\n\t\t// not treated as an event! intermediate data structure\n\t\t// TODO: use ranges in the future\n\t\tconstraintEvents = this.constraintToEvents(constraint);\n\t\tif (constraintEvents) { // not invalid\n\n\t\t\tanyContainment = false;\n\t\t\tfor (i = 0; i < constraintEvents.length; i++) {\n\t\t\t\tif (this.spanContainsSpan(constraintEvents[i], span)) {\n\t\t\t\t\tanyContainment = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!anyContainment) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\n\tpeerEvents = this.getPeerEvents(span, event);\n\n\tfor (i = 0; i < peerEvents.length; i++)  {\n\t\tpeerEvent = peerEvents[i];\n\n\t\t// there needs to be an actual intersection before disallowing anything\n\t\tif (this.eventIntersectsRange(peerEvent, span)) {\n\n\t\t\t// evaluate overlap for the given range and short-circuit if necessary\n\t\t\tif (overlap === false) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t// if the event's overlap is a test function, pass the peer event in question as the first param\n\t\t\telse if (typeof overlap === 'function' && !overlap(peerEvent, event)) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// if we are computing if the given range is allowable for an event, consider the other event's\n\t\t\t// EventObject-specific or Source-specific `overlap` property\n\t\t\tif (event) {\n\t\t\t\tpeerOverlap = firstDefined(\n\t\t\t\t\tpeerEvent.overlap,\n\t\t\t\t\t(peerEvent.source || {}).overlap\n\t\t\t\t\t// we already considered the global `eventOverlap`\n\t\t\t\t);\n\t\t\t\tif (peerOverlap === false) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t// if the peer event's overlap is a test function, pass the subject event as the first param\n\t\t\t\tif (typeof peerOverlap === 'function' && !peerOverlap(event, peerEvent)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn true;\n};\n\n\n// Given an event input from the API, produces an array of event objects. Possible event inputs:\n// 'businessHours'\n// An event ID (number or string)\n// An object with specific start/end dates or a recurring event (like what businessHours accepts)\nCalendar.prototype.constraintToEvents = function(constraintInput) {\n\n\tif (constraintInput === 'businessHours') {\n\t\treturn this.getCurrentBusinessHourEvents();\n\t}\n\n\tif (typeof constraintInput === 'object') {\n\t\tif (constraintInput.start != null) { // needs to be event-like input\n\t\t\treturn this.expandEvent(this.buildEventFromInput(constraintInput));\n\t\t}\n\t\telse {\n\t\t\treturn null; // invalid\n\t\t}\n\t}\n\n\treturn this.clientEvents(constraintInput); // probably an ID\n};\n\n\n// Does the event's date range intersect with the given range?\n// start/end already assumed to have stripped zones :(\nCalendar.prototype.eventIntersectsRange = function(event, range) {\n\tvar eventStart = event.start.clone().stripZone();\n\tvar eventEnd = this.getEventEnd(event).stripZone();\n\n\treturn range.start < eventEnd && range.end > eventStart;\n};\n\n\n/* Business Hours\n-----------------------------------------------------------------------------------------*/\n\nvar BUSINESS_HOUR_EVENT_DEFAULTS = {\n\tid: '_fcBusinessHours', // will relate events from different calls to expandEvent\n\tstart: '09:00',\n\tend: '17:00',\n\tdow: [ 1, 2, 3, 4, 5 ], // monday - friday\n\trendering: 'inverse-background'\n\t// classNames are defined in businessHoursSegClasses\n};\n\n// Return events objects for business hours within the current view.\n// Abuse of our event system :(\nCalendar.prototype.getCurrentBusinessHourEvents = function(wholeDay) {\n\treturn this.computeBusinessHourEvents(wholeDay, this.options.businessHours);\n};\n\n// Given a raw input value from options, return events objects for business hours within the current view.\nCalendar.prototype.computeBusinessHourEvents = function(wholeDay, input) {\n\tif (input === true) {\n\t\treturn this.expandBusinessHourEvents(wholeDay, [ {} ]);\n\t}\n\telse if ($.isPlainObject(input)) {\n\t\treturn this.expandBusinessHourEvents(wholeDay, [ input ]);\n\t}\n\telse if ($.isArray(input)) {\n\t\treturn this.expandBusinessHourEvents(wholeDay, input, true);\n\t}\n\telse {\n\t\treturn [];\n\t}\n};\n\n// inputs expected to be an array of objects.\n// if ignoreNoDow is true, will ignore entries that don't specify a day-of-week (dow) key.\nCalendar.prototype.expandBusinessHourEvents = function(wholeDay, inputs, ignoreNoDow) {\n\tvar view = this.getView();\n\tvar events = [];\n\tvar i, input;\n\n\tfor (i = 0; i < inputs.length; i++) {\n\t\tinput = inputs[i];\n\n\t\tif (ignoreNoDow && !input.dow) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t// give defaults. will make a copy\n\t\tinput = $.extend({}, BUSINESS_HOUR_EVENT_DEFAULTS, input);\n\n\t\t// if a whole-day series is requested, clear the start/end times\n\t\tif (wholeDay) {\n\t\t\tinput.start = null;\n\t\t\tinput.end = null;\n\t\t}\n\n\t\tevents.push.apply(events, // append\n\t\t\tthis.expandEvent(\n\t\t\t\tthis.buildEventFromInput(input),\n\t\t\t\tview.start,\n\t\t\t\tview.end\n\t\t\t)\n\t\t);\n\t}\n\n\treturn events;\n};\n\n;;\n\n/* An abstract class for the \"basic\" views, as well as month view. Renders one or more rows of day cells.\n----------------------------------------------------------------------------------------------------------------------*/\n// It is a manager for a DayGrid subcomponent, which does most of the heavy lifting.\n// It is responsible for managing width/height.\n\nvar BasicView = FC.BasicView = View.extend({\n\n\tscroller: null,\n\n\tdayGridClass: DayGrid, // class the dayGrid will be instantiated from (overridable by subclasses)\n\tdayGrid: null, // the main subcomponent that does most of the heavy lifting\n\n\tdayNumbersVisible: false, // display day numbers on each day cell?\n\tcolWeekNumbersVisible: false, // display week numbers along the side?\n\tcellWeekNumbersVisible: false, // display week numbers in day cell?\n\n\tweekNumberWidth: null, // width of all the week-number cells running down the side\n\n\theadContainerEl: null, // div that hold's the dayGrid's rendered date header\n\theadRowEl: null, // the fake row element of the day-of-week header\n\n\n\tinitialize: function() {\n\t\tthis.dayGrid = this.instantiateDayGrid();\n\n\t\tthis.scroller = new Scroller({\n\t\t\toverflowX: 'hidden',\n\t\t\toverflowY: 'auto'\n\t\t});\n\t},\n\n\n\t// Generates the DayGrid object this view needs. Draws from this.dayGridClass\n\tinstantiateDayGrid: function() {\n\t\t// generate a subclass on the fly with BasicView-specific behavior\n\t\t// TODO: cache this subclass\n\t\tvar subclass = this.dayGridClass.extend(basicDayGridMethods);\n\n\t\treturn new subclass(this);\n\t},\n\n\n\t// Sets the display range and computes all necessary dates\n\tsetRange: function(range) {\n\t\tView.prototype.setRange.call(this, range); // call the super-method\n\n\t\tthis.dayGrid.breakOnWeeks = /year|month|week/.test(this.intervalUnit); // do before setRange\n\t\tthis.dayGrid.setRange(range);\n\t},\n\n\n\t// Compute the value to feed into setRange. Overrides superclass.\n\tcomputeRange: function(date) {\n\t\tvar range = View.prototype.computeRange.call(this, date); // get value from the super-method\n\n\t\t// year and month views should be aligned with weeks. this is already done for week\n\t\tif (/year|month/.test(range.intervalUnit)) {\n\t\t\trange.start.startOf('week');\n\t\t\trange.start = this.skipHiddenDays(range.start);\n\n\t\t\t// make end-of-week if not already\n\t\t\tif (range.end.weekday()) {\n\t\t\t\trange.end.add(1, 'week').startOf('week');\n\t\t\t\trange.end = this.skipHiddenDays(range.end, -1, true); // exclusively move backwards\n\t\t\t}\n\t\t}\n\n\t\treturn range;\n\t},\n\n\n\t// Renders the view into `this.el`, which should already be assigned\n\trenderDates: function() {\n\n\t\tthis.dayNumbersVisible = this.dayGrid.rowCnt > 1; // TODO: make grid responsible\n\t\tif (this.opt('weekNumbers')) {\n\t\t\tif (this.opt('weekNumbersWithinDays')) {\n\t\t\t\tthis.cellWeekNumbersVisible = true;\n\t\t\t\tthis.colWeekNumbersVisible = false;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.cellWeekNumbersVisible = false;\n\t\t\t\tthis.colWeekNumbersVisible = true;\n\t\t\t};\n\t\t}\n\t\tthis.dayGrid.numbersVisible = this.dayNumbersVisible ||\n\t\t\tthis.cellWeekNumbersVisible || this.colWeekNumbersVisible;\n\n\t\tthis.el.addClass('fc-basic-view').html(this.renderSkeletonHtml());\n\t\tthis.renderHead();\n\n\t\tthis.scroller.render();\n\t\tvar dayGridContainerEl = this.scroller.el.addClass('fc-day-grid-container');\n\t\tvar dayGridEl = $('<div class=\"fc-day-grid\" />').appendTo(dayGridContainerEl);\n\t\tthis.el.find('.fc-body > tr > td').append(dayGridContainerEl);\n\n\t\tthis.dayGrid.setElement(dayGridEl);\n\t\tthis.dayGrid.renderDates(this.hasRigidRows());\n\t},\n\n\n\t// render the day-of-week headers\n\trenderHead: function() {\n\t\tthis.headContainerEl =\n\t\t\tthis.el.find('.fc-head-container')\n\t\t\t\t.html(this.dayGrid.renderHeadHtml());\n\t\tthis.headRowEl = this.headContainerEl.find('.fc-row');\n\t},\n\n\n\t// Unrenders the content of the view. Since we haven't separated skeleton rendering from date rendering,\n\t// always completely kill the dayGrid's rendering.\n\tunrenderDates: function() {\n\t\tthis.dayGrid.unrenderDates();\n\t\tthis.dayGrid.removeElement();\n\t\tthis.scroller.destroy();\n\t},\n\n\n\trenderBusinessHours: function() {\n\t\tthis.dayGrid.renderBusinessHours();\n\t},\n\n\n\tunrenderBusinessHours: function() {\n\t\tthis.dayGrid.unrenderBusinessHours();\n\t},\n\n\n\t// Builds the HTML skeleton for the view.\n\t// The day-grid component will render inside of a container defined by this HTML.\n\trenderSkeletonHtml: function() {\n\t\treturn '' +\n\t\t\t'<table>' +\n\t\t\t\t'<thead class=\"fc-head\">' +\n\t\t\t\t\t'<tr>' +\n\t\t\t\t\t\t'<td class=\"fc-head-container ' + this.widgetHeaderClass + '\"></td>' +\n\t\t\t\t\t'</tr>' +\n\t\t\t\t'</thead>' +\n\t\t\t\t'<tbody class=\"fc-body\">' +\n\t\t\t\t\t'<tr>' +\n\t\t\t\t\t\t'<td class=\"' + this.widgetContentClass + '\"></td>' +\n\t\t\t\t\t'</tr>' +\n\t\t\t\t'</tbody>' +\n\t\t\t'</table>';\n\t},\n\n\n\t// Generates an HTML attribute string for setting the width of the week number column, if it is known\n\tweekNumberStyleAttr: function() {\n\t\tif (this.weekNumberWidth !== null) {\n\t\t\treturn 'style=\"width:' + this.weekNumberWidth + 'px\"';\n\t\t}\n\t\treturn '';\n\t},\n\n\n\t// Determines whether each row should have a constant height\n\thasRigidRows: function() {\n\t\tvar eventLimit = this.opt('eventLimit');\n\t\treturn eventLimit && typeof eventLimit !== 'number';\n\t},\n\n\n\t/* Dimensions\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Refreshes the horizontal dimensions of the view\n\tupdateWidth: function() {\n\t\tif (this.colWeekNumbersVisible) {\n\t\t\t// Make sure all week number cells running down the side have the same width.\n\t\t\t// Record the width for cells created later.\n\t\t\tthis.weekNumberWidth = matchCellWidths(\n\t\t\t\tthis.el.find('.fc-week-number')\n\t\t\t);\n\t\t}\n\t},\n\n\n\t// Adjusts the vertical dimensions of the view to the specified values\n\tsetHeight: function(totalHeight, isAuto) {\n\t\tvar eventLimit = this.opt('eventLimit');\n\t\tvar scrollerHeight;\n\t\tvar scrollbarWidths;\n\n\t\t// reset all heights to be natural\n\t\tthis.scroller.clear();\n\t\tuncompensateScroll(this.headRowEl);\n\n\t\tthis.dayGrid.removeSegPopover(); // kill the \"more\" popover if displayed\n\n\t\t// is the event limit a constant level number?\n\t\tif (eventLimit && typeof eventLimit === 'number') {\n\t\t\tthis.dayGrid.limitRows(eventLimit); // limit the levels first so the height can redistribute after\n\t\t}\n\n\t\t// distribute the height to the rows\n\t\t// (totalHeight is a \"recommended\" value if isAuto)\n\t\tscrollerHeight = this.computeScrollerHeight(totalHeight);\n\t\tthis.setGridHeight(scrollerHeight, isAuto);\n\n\t\t// is the event limit dynamically calculated?\n\t\tif (eventLimit && typeof eventLimit !== 'number') {\n\t\t\tthis.dayGrid.limitRows(eventLimit); // limit the levels after the grid's row heights have been set\n\t\t}\n\n\t\tif (!isAuto) { // should we force dimensions of the scroll container?\n\n\t\t\tthis.scroller.setHeight(scrollerHeight);\n\t\t\tscrollbarWidths = this.scroller.getScrollbarWidths();\n\n\t\t\tif (scrollbarWidths.left || scrollbarWidths.right) { // using scrollbars?\n\n\t\t\t\tcompensateScroll(this.headRowEl, scrollbarWidths);\n\n\t\t\t\t// doing the scrollbar compensation might have created text overflow which created more height. redo\n\t\t\t\tscrollerHeight = this.computeScrollerHeight(totalHeight);\n\t\t\t\tthis.scroller.setHeight(scrollerHeight);\n\t\t\t}\n\n\t\t\t// guarantees the same scrollbar widths\n\t\t\tthis.scroller.lockOverflow(scrollbarWidths);\n\t\t}\n\t},\n\n\n\t// given a desired total height of the view, returns what the height of the scroller should be\n\tcomputeScrollerHeight: function(totalHeight) {\n\t\treturn totalHeight -\n\t\t\tsubtractInnerElHeight(this.el, this.scroller.el); // everything that's NOT the scroller\n\t},\n\n\n\t// Sets the height of just the DayGrid component in this view\n\tsetGridHeight: function(height, isAuto) {\n\t\tif (isAuto) {\n\t\t\tundistributeHeight(this.dayGrid.rowEls); // let the rows be their natural height with no expanding\n\t\t}\n\t\telse {\n\t\t\tdistributeHeight(this.dayGrid.rowEls, height, true); // true = compensate for height-hogging rows\n\t\t}\n\t},\n\n\n\t/* Scroll\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\tcomputeInitialScroll: function() {\n\t\treturn { top: 0 };\n\t},\n\n\n\tqueryScroll: function() {\n\t\treturn { top: this.scroller.getScrollTop() };\n\t},\n\n\n\tsetScroll: function(scroll) {\n\t\tthis.scroller.setScrollTop(scroll.top);\n\t},\n\n\n\t/* Hit Areas\n\t------------------------------------------------------------------------------------------------------------------*/\n\t// forward all hit-related method calls to dayGrid\n\n\n\tprepareHits: function() {\n\t\tthis.dayGrid.prepareHits();\n\t},\n\n\n\treleaseHits: function() {\n\t\tthis.dayGrid.releaseHits();\n\t},\n\n\n\tqueryHit: function(left, top) {\n\t\treturn this.dayGrid.queryHit(left, top);\n\t},\n\n\n\tgetHitSpan: function(hit) {\n\t\treturn this.dayGrid.getHitSpan(hit);\n\t},\n\n\n\tgetHitEl: function(hit) {\n\t\treturn this.dayGrid.getHitEl(hit);\n\t},\n\n\n\t/* Events\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders the given events onto the view and populates the segments array\n\trenderEvents: function(events) {\n\t\tthis.dayGrid.renderEvents(events);\n\n\t\tthis.updateHeight(); // must compensate for events that overflow the row\n\t},\n\n\n\t// Retrieves all segment objects that are rendered in the view\n\tgetEventSegs: function() {\n\t\treturn this.dayGrid.getEventSegs();\n\t},\n\n\n\t// Unrenders all event elements and clears internal segment data\n\tunrenderEvents: function() {\n\t\tthis.dayGrid.unrenderEvents();\n\n\t\t// we DON'T need to call updateHeight() because\n\t\t// a renderEvents() call always happens after this, which will eventually call updateHeight()\n\t},\n\n\n\t/* Dragging (for both events and external elements)\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// A returned value of `true` signals that a mock \"helper\" event has been rendered.\n\trenderDrag: function(dropLocation, seg) {\n\t\treturn this.dayGrid.renderDrag(dropLocation, seg);\n\t},\n\n\n\tunrenderDrag: function() {\n\t\tthis.dayGrid.unrenderDrag();\n\t},\n\n\n\t/* Selection\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders a visual indication of a selection\n\trenderSelection: function(span) {\n\t\tthis.dayGrid.renderSelection(span);\n\t},\n\n\n\t// Unrenders a visual indications of a selection\n\tunrenderSelection: function() {\n\t\tthis.dayGrid.unrenderSelection();\n\t}\n\n});\n\n\n// Methods that will customize the rendering behavior of the BasicView's dayGrid\nvar basicDayGridMethods = {\n\n\n\t// Generates the HTML that will go before the day-of week header cells\n\trenderHeadIntroHtml: function() {\n\t\tvar view = this.view;\n\n\t\tif (view.colWeekNumbersVisible) {\n\t\t\treturn '' +\n\t\t\t\t'<th class=\"fc-week-number ' + view.widgetHeaderClass + '\" ' + view.weekNumberStyleAttr() + '>' +\n\t\t\t\t\t'<span>' + // needed for matchCellWidths\n\t\t\t\t\t\thtmlEscape(view.opt('weekNumberTitle')) +\n\t\t\t\t\t'</span>' +\n\t\t\t\t'</th>';\n\t\t}\n\n\t\treturn '';\n\t},\n\n\n\t// Generates the HTML that will go before content-skeleton cells that display the day/week numbers\n\trenderNumberIntroHtml: function(row) {\n\t\tvar view = this.view;\n\t\tvar weekStart = this.getCellDate(row, 0);\n\n\t\tif (view.colWeekNumbersVisible) {\n\t\t\treturn '' +\n\t\t\t\t'<td class=\"fc-week-number\" ' + view.weekNumberStyleAttr() + '>' +\n\t\t\t\t\tview.buildGotoAnchorHtml( // aside from link, important for matchCellWidths\n\t\t\t\t\t\t{ date: weekStart, type: 'week', forceOff: this.colCnt === 1 },\n\t\t\t\t\t\tweekStart.format('w') // inner HTML\n\t\t\t\t\t) +\n\t\t\t\t'</td>';\n\t\t}\n\n\t\treturn '';\n\t},\n\n\n\t// Generates the HTML that goes before the day bg cells for each day-row\n\trenderBgIntroHtml: function() {\n\t\tvar view = this.view;\n\n\t\tif (view.colWeekNumbersVisible) {\n\t\t\treturn '<td class=\"fc-week-number ' + view.widgetContentClass + '\" ' +\n\t\t\t\tview.weekNumberStyleAttr() + '></td>';\n\t\t}\n\n\t\treturn '';\n\t},\n\n\n\t// Generates the HTML that goes before every other type of row generated by DayGrid.\n\t// Affects helper-skeleton and highlight-skeleton rows.\n\trenderIntroHtml: function() {\n\t\tvar view = this.view;\n\n\t\tif (view.colWeekNumbersVisible) {\n\t\t\treturn '<td class=\"fc-week-number\" ' + view.weekNumberStyleAttr() + '></td>';\n\t\t}\n\n\t\treturn '';\n\t}\n\n};\n\n;;\n\n/* A month view with day cells running in rows (one-per-week) and columns\n----------------------------------------------------------------------------------------------------------------------*/\n\nvar MonthView = FC.MonthView = BasicView.extend({\n\n\t// Produces information about what range to display\n\tcomputeRange: function(date) {\n\t\tvar range = BasicView.prototype.computeRange.call(this, date); // get value from super-method\n\t\tvar rowCnt;\n\n\t\t// ensure 6 weeks\n\t\tif (this.isFixedWeeks()) {\n\t\t\trowCnt = Math.ceil(range.end.diff(range.start, 'weeks', true)); // could be partial weeks due to hiddenDays\n\t\t\trange.end.add(6 - rowCnt, 'weeks');\n\t\t}\n\n\t\treturn range;\n\t},\n\n\n\t// Overrides the default BasicView behavior to have special multi-week auto-height logic\n\tsetGridHeight: function(height, isAuto) {\n\n\t\t// if auto, make the height of each row the height that it would be if there were 6 weeks\n\t\tif (isAuto) {\n\t\t\theight *= this.rowCnt / 6;\n\t\t}\n\n\t\tdistributeHeight(this.dayGrid.rowEls, height, !isAuto); // if auto, don't compensate for height-hogging rows\n\t},\n\n\n\tisFixedWeeks: function() {\n\t\treturn this.opt('fixedWeekCount');\n\t}\n\n});\n\n;;\n\nfcViews.basic = {\n\t'class': BasicView\n};\n\nfcViews.basicDay = {\n\ttype: 'basic',\n\tduration: { days: 1 }\n};\n\nfcViews.basicWeek = {\n\ttype: 'basic',\n\tduration: { weeks: 1 }\n};\n\nfcViews.month = {\n\t'class': MonthView,\n\tduration: { months: 1 }, // important for prev/next\n\tdefaults: {\n\t\tfixedWeekCount: true\n\t}\n};\n;;\n\n/* An abstract class for all agenda-related views. Displays one more columns with time slots running vertically.\n----------------------------------------------------------------------------------------------------------------------*/\n// Is a manager for the TimeGrid subcomponent and possibly the DayGrid subcomponent (if allDaySlot is on).\n// Responsible for managing width/height.\n\nvar AgendaView = FC.AgendaView = View.extend({\n\n\tscroller: null,\n\n\ttimeGridClass: TimeGrid, // class used to instantiate the timeGrid. subclasses can override\n\ttimeGrid: null, // the main time-grid subcomponent of this view\n\n\tdayGridClass: DayGrid, // class used to instantiate the dayGrid. subclasses can override\n\tdayGrid: null, // the \"all-day\" subcomponent. if all-day is turned off, this will be null\n\n\taxisWidth: null, // the width of the time axis running down the side\n\n\theadContainerEl: null, // div that hold's the timeGrid's rendered date header\n\tnoScrollRowEls: null, // set of fake row elements that must compensate when scroller has scrollbars\n\n\t// when the time-grid isn't tall enough to occupy the given height, we render an <hr> underneath\n\tbottomRuleEl: null,\n\n\n\tinitialize: function() {\n\t\tthis.timeGrid = this.instantiateTimeGrid();\n\n\t\tif (this.opt('allDaySlot')) { // should we display the \"all-day\" area?\n\t\t\tthis.dayGrid = this.instantiateDayGrid(); // the all-day subcomponent of this view\n\t\t}\n\n\t\tthis.scroller = new Scroller({\n\t\t\toverflowX: 'hidden',\n\t\t\toverflowY: 'auto'\n\t\t});\n\t},\n\n\n\t// Instantiates the TimeGrid object this view needs. Draws from this.timeGridClass\n\tinstantiateTimeGrid: function() {\n\t\tvar subclass = this.timeGridClass.extend(agendaTimeGridMethods);\n\n\t\treturn new subclass(this);\n\t},\n\n\n\t// Instantiates the DayGrid object this view might need. Draws from this.dayGridClass\n\tinstantiateDayGrid: function() {\n\t\tvar subclass = this.dayGridClass.extend(agendaDayGridMethods);\n\n\t\treturn new subclass(this);\n\t},\n\n\n\t/* Rendering\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Sets the display range and computes all necessary dates\n\tsetRange: function(range) {\n\t\tView.prototype.setRange.call(this, range); // call the super-method\n\n\t\tthis.timeGrid.setRange(range);\n\t\tif (this.dayGrid) {\n\t\t\tthis.dayGrid.setRange(range);\n\t\t}\n\t},\n\n\n\t// Renders the view into `this.el`, which has already been assigned\n\trenderDates: function() {\n\n\t\tthis.el.addClass('fc-agenda-view').html(this.renderSkeletonHtml());\n\t\tthis.renderHead();\n\n\t\tthis.scroller.render();\n\t\tvar timeGridWrapEl = this.scroller.el.addClass('fc-time-grid-container');\n\t\tvar timeGridEl = $('<div class=\"fc-time-grid\" />').appendTo(timeGridWrapEl);\n\t\tthis.el.find('.fc-body > tr > td').append(timeGridWrapEl);\n\n\t\tthis.timeGrid.setElement(timeGridEl);\n\t\tthis.timeGrid.renderDates();\n\n\t\t// the <hr> that sometimes displays under the time-grid\n\t\tthis.bottomRuleEl = $('<hr class=\"fc-divider ' + this.widgetHeaderClass + '\"/>')\n\t\t\t.appendTo(this.timeGrid.el); // inject it into the time-grid\n\n\t\tif (this.dayGrid) {\n\t\t\tthis.dayGrid.setElement(this.el.find('.fc-day-grid'));\n\t\t\tthis.dayGrid.renderDates();\n\n\t\t\t// have the day-grid extend it's coordinate area over the <hr> dividing the two grids\n\t\t\tthis.dayGrid.bottomCoordPadding = this.dayGrid.el.next('hr').outerHeight();\n\t\t}\n\n\t\tthis.noScrollRowEls = this.el.find('.fc-row:not(.fc-scroller *)'); // fake rows not within the scroller\n\t},\n\n\n\t// render the day-of-week headers\n\trenderHead: function() {\n\t\tthis.headContainerEl =\n\t\t\tthis.el.find('.fc-head-container')\n\t\t\t\t.html(this.timeGrid.renderHeadHtml());\n\t},\n\n\n\t// Unrenders the content of the view. Since we haven't separated skeleton rendering from date rendering,\n\t// always completely kill each grid's rendering.\n\tunrenderDates: function() {\n\t\tthis.timeGrid.unrenderDates();\n\t\tthis.timeGrid.removeElement();\n\n\t\tif (this.dayGrid) {\n\t\t\tthis.dayGrid.unrenderDates();\n\t\t\tthis.dayGrid.removeElement();\n\t\t}\n\n\t\tthis.scroller.destroy();\n\t},\n\n\n\t// Builds the HTML skeleton for the view.\n\t// The day-grid and time-grid components will render inside containers defined by this HTML.\n\trenderSkeletonHtml: function() {\n\t\treturn '' +\n\t\t\t'<table>' +\n\t\t\t\t'<thead class=\"fc-head\">' +\n\t\t\t\t\t'<tr>' +\n\t\t\t\t\t\t'<td class=\"fc-head-container ' + this.widgetHeaderClass + '\"></td>' +\n\t\t\t\t\t'</tr>' +\n\t\t\t\t'</thead>' +\n\t\t\t\t'<tbody class=\"fc-body\">' +\n\t\t\t\t\t'<tr>' +\n\t\t\t\t\t\t'<td class=\"' + this.widgetContentClass + '\">' +\n\t\t\t\t\t\t\t(this.dayGrid ?\n\t\t\t\t\t\t\t\t'<div class=\"fc-day-grid\"/>' +\n\t\t\t\t\t\t\t\t'<hr class=\"fc-divider ' + this.widgetHeaderClass + '\"/>' :\n\t\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t\t) +\n\t\t\t\t\t\t'</td>' +\n\t\t\t\t\t'</tr>' +\n\t\t\t\t'</tbody>' +\n\t\t\t'</table>';\n\t},\n\n\n\t// Generates an HTML attribute string for setting the width of the axis, if it is known\n\taxisStyleAttr: function() {\n\t\tif (this.axisWidth !== null) {\n\t\t\t return 'style=\"width:' + this.axisWidth + 'px\"';\n\t\t}\n\t\treturn '';\n\t},\n\n\n\t/* Business Hours\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\trenderBusinessHours: function() {\n\t\tthis.timeGrid.renderBusinessHours();\n\n\t\tif (this.dayGrid) {\n\t\t\tthis.dayGrid.renderBusinessHours();\n\t\t}\n\t},\n\n\n\tunrenderBusinessHours: function() {\n\t\tthis.timeGrid.unrenderBusinessHours();\n\n\t\tif (this.dayGrid) {\n\t\t\tthis.dayGrid.unrenderBusinessHours();\n\t\t}\n\t},\n\n\n\t/* Now Indicator\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\tgetNowIndicatorUnit: function() {\n\t\treturn this.timeGrid.getNowIndicatorUnit();\n\t},\n\n\n\trenderNowIndicator: function(date) {\n\t\tthis.timeGrid.renderNowIndicator(date);\n\t},\n\n\n\tunrenderNowIndicator: function() {\n\t\tthis.timeGrid.unrenderNowIndicator();\n\t},\n\n\n\t/* Dimensions\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\tupdateSize: function(isResize) {\n\t\tthis.timeGrid.updateSize(isResize);\n\n\t\tView.prototype.updateSize.call(this, isResize); // call the super-method\n\t},\n\n\n\t// Refreshes the horizontal dimensions of the view\n\tupdateWidth: function() {\n\t\t// make all axis cells line up, and record the width so newly created axis cells will have it\n\t\tthis.axisWidth = matchCellWidths(this.el.find('.fc-axis'));\n\t},\n\n\n\t// Adjusts the vertical dimensions of the view to the specified values\n\tsetHeight: function(totalHeight, isAuto) {\n\t\tvar eventLimit;\n\t\tvar scrollerHeight;\n\t\tvar scrollbarWidths;\n\n\t\t// reset all dimensions back to the original state\n\t\tthis.bottomRuleEl.hide(); // .show() will be called later if this <hr> is necessary\n\t\tthis.scroller.clear(); // sets height to 'auto' and clears overflow\n\t\tuncompensateScroll(this.noScrollRowEls);\n\n\t\t// limit number of events in the all-day area\n\t\tif (this.dayGrid) {\n\t\t\tthis.dayGrid.removeSegPopover(); // kill the \"more\" popover if displayed\n\n\t\t\teventLimit = this.opt('eventLimit');\n\t\t\tif (eventLimit && typeof eventLimit !== 'number') {\n\t\t\t\teventLimit = AGENDA_ALL_DAY_EVENT_LIMIT; // make sure \"auto\" goes to a real number\n\t\t\t}\n\t\t\tif (eventLimit) {\n\t\t\t\tthis.dayGrid.limitRows(eventLimit);\n\t\t\t}\n\t\t}\n\n\t\tif (!isAuto) { // should we force dimensions of the scroll container?\n\n\t\t\tscrollerHeight = this.computeScrollerHeight(totalHeight);\n\t\t\tthis.scroller.setHeight(scrollerHeight);\n\t\t\tscrollbarWidths = this.scroller.getScrollbarWidths();\n\n\t\t\tif (scrollbarWidths.left || scrollbarWidths.right) { // using scrollbars?\n\n\t\t\t\t// make the all-day and header rows lines up\n\t\t\t\tcompensateScroll(this.noScrollRowEls, scrollbarWidths);\n\n\t\t\t\t// the scrollbar compensation might have changed text flow, which might affect height, so recalculate\n\t\t\t\t// and reapply the desired height to the scroller.\n\t\t\t\tscrollerHeight = this.computeScrollerHeight(totalHeight);\n\t\t\t\tthis.scroller.setHeight(scrollerHeight);\n\t\t\t}\n\n\t\t\t// guarantees the same scrollbar widths\n\t\t\tthis.scroller.lockOverflow(scrollbarWidths);\n\n\t\t\t// if there's any space below the slats, show the horizontal rule.\n\t\t\t// this won't cause any new overflow, because lockOverflow already called.\n\t\t\tif (this.timeGrid.getTotalSlatHeight() < scrollerHeight) {\n\t\t\t\tthis.bottomRuleEl.show();\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// given a desired total height of the view, returns what the height of the scroller should be\n\tcomputeScrollerHeight: function(totalHeight) {\n\t\treturn totalHeight -\n\t\t\tsubtractInnerElHeight(this.el, this.scroller.el); // everything that's NOT the scroller\n\t},\n\n\n\t/* Scroll\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Computes the initial pre-configured scroll state prior to allowing the user to change it\n\tcomputeInitialScroll: function() {\n\t\tvar scrollTime = moment.duration(this.opt('scrollTime'));\n\t\tvar top = this.timeGrid.computeTimeTop(scrollTime);\n\n\t\t// zoom can give weird floating-point values. rather scroll a little bit further\n\t\ttop = Math.ceil(top);\n\n\t\tif (top) {\n\t\t\ttop++; // to overcome top border that slots beyond the first have. looks better\n\t\t}\n\n\t\treturn { top: top };\n\t},\n\n\n\tqueryScroll: function() {\n\t\treturn { top: this.scroller.getScrollTop() };\n\t},\n\n\n\tsetScroll: function(scroll) {\n\t\tthis.scroller.setScrollTop(scroll.top);\n\t},\n\n\n\t/* Hit Areas\n\t------------------------------------------------------------------------------------------------------------------*/\n\t// forward all hit-related method calls to the grids (dayGrid might not be defined)\n\n\n\tprepareHits: function() {\n\t\tthis.timeGrid.prepareHits();\n\t\tif (this.dayGrid) {\n\t\t\tthis.dayGrid.prepareHits();\n\t\t}\n\t},\n\n\n\treleaseHits: function() {\n\t\tthis.timeGrid.releaseHits();\n\t\tif (this.dayGrid) {\n\t\t\tthis.dayGrid.releaseHits();\n\t\t}\n\t},\n\n\n\tqueryHit: function(left, top) {\n\t\tvar hit = this.timeGrid.queryHit(left, top);\n\n\t\tif (!hit && this.dayGrid) {\n\t\t\thit = this.dayGrid.queryHit(left, top);\n\t\t}\n\n\t\treturn hit;\n\t},\n\n\n\tgetHitSpan: function(hit) {\n\t\t// TODO: hit.component is set as a hack to identify where the hit came from\n\t\treturn hit.component.getHitSpan(hit);\n\t},\n\n\n\tgetHitEl: function(hit) {\n\t\t// TODO: hit.component is set as a hack to identify where the hit came from\n\t\treturn hit.component.getHitEl(hit);\n\t},\n\n\n\t/* Events\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders events onto the view and populates the View's segment array\n\trenderEvents: function(events) {\n\t\tvar dayEvents = [];\n\t\tvar timedEvents = [];\n\t\tvar daySegs = [];\n\t\tvar timedSegs;\n\t\tvar i;\n\n\t\t// separate the events into all-day and timed\n\t\tfor (i = 0; i < events.length; i++) {\n\t\t\tif (events[i].allDay) {\n\t\t\t\tdayEvents.push(events[i]);\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttimedEvents.push(events[i]);\n\t\t\t}\n\t\t}\n\n\t\t// render the events in the subcomponents\n\t\ttimedSegs = this.timeGrid.renderEvents(timedEvents);\n\t\tif (this.dayGrid) {\n\t\t\tdaySegs = this.dayGrid.renderEvents(dayEvents);\n\t\t}\n\n\t\t// the all-day area is flexible and might have a lot of events, so shift the height\n\t\tthis.updateHeight();\n\t},\n\n\n\t// Retrieves all segment objects that are rendered in the view\n\tgetEventSegs: function() {\n\t\treturn this.timeGrid.getEventSegs().concat(\n\t\t\tthis.dayGrid ? this.dayGrid.getEventSegs() : []\n\t\t);\n\t},\n\n\n\t// Unrenders all event elements and clears internal segment data\n\tunrenderEvents: function() {\n\n\t\t// unrender the events in the subcomponents\n\t\tthis.timeGrid.unrenderEvents();\n\t\tif (this.dayGrid) {\n\t\t\tthis.dayGrid.unrenderEvents();\n\t\t}\n\n\t\t// we DON'T need to call updateHeight() because\n\t\t// a renderEvents() call always happens after this, which will eventually call updateHeight()\n\t},\n\n\n\t/* Dragging (for events and external elements)\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// A returned value of `true` signals that a mock \"helper\" event has been rendered.\n\trenderDrag: function(dropLocation, seg) {\n\t\tif (dropLocation.start.hasTime()) {\n\t\t\treturn this.timeGrid.renderDrag(dropLocation, seg);\n\t\t}\n\t\telse if (this.dayGrid) {\n\t\t\treturn this.dayGrid.renderDrag(dropLocation, seg);\n\t\t}\n\t},\n\n\n\tunrenderDrag: function() {\n\t\tthis.timeGrid.unrenderDrag();\n\t\tif (this.dayGrid) {\n\t\t\tthis.dayGrid.unrenderDrag();\n\t\t}\n\t},\n\n\n\t/* Selection\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders a visual indication of a selection\n\trenderSelection: function(span) {\n\t\tif (span.start.hasTime() || span.end.hasTime()) {\n\t\t\tthis.timeGrid.renderSelection(span);\n\t\t}\n\t\telse if (this.dayGrid) {\n\t\t\tthis.dayGrid.renderSelection(span);\n\t\t}\n\t},\n\n\n\t// Unrenders a visual indications of a selection\n\tunrenderSelection: function() {\n\t\tthis.timeGrid.unrenderSelection();\n\t\tif (this.dayGrid) {\n\t\t\tthis.dayGrid.unrenderSelection();\n\t\t}\n\t}\n\n});\n\n\n// Methods that will customize the rendering behavior of the AgendaView's timeGrid\n// TODO: move into TimeGrid\nvar agendaTimeGridMethods = {\n\n\n\t// Generates the HTML that will go before the day-of week header cells\n\trenderHeadIntroHtml: function() {\n\t\tvar view = this.view;\n\t\tvar weekText;\n\n\t\tif (view.opt('weekNumbers')) {\n\t\t\tweekText = this.start.format(view.opt('smallWeekFormat'));\n\n\t\t\treturn '' +\n\t\t\t\t'<th class=\"fc-axis fc-week-number ' + view.widgetHeaderClass + '\" ' + view.axisStyleAttr() + '>' +\n\t\t\t\t\tview.buildGotoAnchorHtml( // aside from link, important for matchCellWidths\n\t\t\t\t\t\t{ date: this.start, type: 'week', forceOff: this.colCnt > 1 },\n\t\t\t\t\t\thtmlEscape(weekText) // inner HTML\n\t\t\t\t\t) +\n\t\t\t\t'</th>';\n\t\t}\n\t\telse {\n\t\t\treturn '<th class=\"fc-axis ' + view.widgetHeaderClass + '\" ' + view.axisStyleAttr() + '></th>';\n\t\t}\n\t},\n\n\n\t// Generates the HTML that goes before the bg of the TimeGrid slot area. Long vertical column.\n\trenderBgIntroHtml: function() {\n\t\tvar view = this.view;\n\n\t\treturn '<td class=\"fc-axis ' + view.widgetContentClass + '\" ' + view.axisStyleAttr() + '></td>';\n\t},\n\n\n\t// Generates the HTML that goes before all other types of cells.\n\t// Affects content-skeleton, helper-skeleton, highlight-skeleton for both the time-grid and day-grid.\n\trenderIntroHtml: function() {\n\t\tvar view = this.view;\n\n\t\treturn '<td class=\"fc-axis\" ' + view.axisStyleAttr() + '></td>';\n\t}\n\n};\n\n\n// Methods that will customize the rendering behavior of the AgendaView's dayGrid\nvar agendaDayGridMethods = {\n\n\n\t// Generates the HTML that goes before the all-day cells\n\trenderBgIntroHtml: function() {\n\t\tvar view = this.view;\n\n\t\treturn '' +\n\t\t\t'<td class=\"fc-axis ' + view.widgetContentClass + '\" ' + view.axisStyleAttr() + '>' +\n\t\t\t\t'<span>' + // needed for matchCellWidths\n\t\t\t\t\tview.getAllDayHtml() +\n\t\t\t\t'</span>' +\n\t\t\t'</td>';\n\t},\n\n\n\t// Generates the HTML that goes before all other types of cells.\n\t// Affects content-skeleton, helper-skeleton, highlight-skeleton for both the time-grid and day-grid.\n\trenderIntroHtml: function() {\n\t\tvar view = this.view;\n\n\t\treturn '<td class=\"fc-axis\" ' + view.axisStyleAttr() + '></td>';\n\t}\n\n};\n\n;;\n\nvar AGENDA_ALL_DAY_EVENT_LIMIT = 5;\n\n// potential nice values for the slot-duration and interval-duration\n// from largest to smallest\nvar AGENDA_STOCK_SUB_DURATIONS = [\n\t{ hours: 1 },\n\t{ minutes: 30 },\n\t{ minutes: 15 },\n\t{ seconds: 30 },\n\t{ seconds: 15 }\n];\n\nfcViews.agenda = {\n\t'class': AgendaView,\n\tdefaults: {\n\t\tallDaySlot: true,\n\t\tslotDuration: '00:30:00',\n\t\tminTime: '00:00:00',\n\t\tmaxTime: '24:00:00',\n\t\tslotEventOverlap: true // a bad name. confused with overlap/constraint system\n\t}\n};\n\nfcViews.agendaDay = {\n\ttype: 'agenda',\n\tduration: { days: 1 }\n};\n\nfcViews.agendaWeek = {\n\ttype: 'agenda',\n\tduration: { weeks: 1 }\n};\n;;\n\n/*\nResponsible for the scroller, and forwarding event-related actions into the \"grid\"\n*/\nvar ListView = View.extend({\n\n\tgrid: null,\n\tscroller: null,\n\n\tinitialize: function() {\n\t\tthis.grid = new ListViewGrid(this);\n\t\tthis.scroller = new Scroller({\n\t\t\toverflowX: 'hidden',\n\t\t\toverflowY: 'auto'\n\t\t});\n\t},\n\n\tsetRange: function(range) {\n\t\tView.prototype.setRange.call(this, range); // super\n\n\t\tthis.grid.setRange(range); // needs to process range-related options\n\t},\n\n\trenderSkeleton: function() {\n\t\tthis.el.addClass(\n\t\t\t'fc-list-view ' +\n\t\t\tthis.widgetContentClass\n\t\t);\n\n\t\tthis.scroller.render();\n\t\tthis.scroller.el.appendTo(this.el);\n\n\t\tthis.grid.setElement(this.scroller.scrollEl);\n\t},\n\n\tunrenderSkeleton: function() {\n\t\tthis.scroller.destroy(); // will remove the Grid too\n\t},\n\n\tsetHeight: function(totalHeight, isAuto) {\n\t\tthis.scroller.setHeight(this.computeScrollerHeight(totalHeight));\n\t},\n\n\tcomputeScrollerHeight: function(totalHeight) {\n\t\treturn totalHeight -\n\t\t\tsubtractInnerElHeight(this.el, this.scroller.el); // everything that's NOT the scroller\n\t},\n\n\trenderEvents: function(events) {\n\t\tthis.grid.renderEvents(events);\n\t},\n\n\tunrenderEvents: function() {\n\t\tthis.grid.unrenderEvents();\n\t},\n\n\tisEventResizable: function(event) {\n\t\treturn false;\n\t},\n\n\tisEventDraggable: function(event) {\n\t\treturn false;\n\t}\n\n});\n\n/*\nResponsible for event rendering and user-interaction.\nIts \"el\" is the inner-content of the above view's scroller.\n*/\nvar ListViewGrid = Grid.extend({\n\n\tsegSelector: '.fc-list-item', // which elements accept event actions\n\thasDayInteractions: false, // no day selection or day clicking\n\n\t// slices by day\n\tspanToSegs: function(span) {\n\t\tvar view = this.view;\n\t\tvar dayStart = view.start.clone().time(0); // timed, so segs get times!\n\t\tvar dayIndex = 0;\n\t\tvar seg;\n\t\tvar segs = [];\n\n\t\twhile (dayStart < view.end) {\n\n\t\t\tseg = intersectRanges(span, {\n\t\t\t\tstart: dayStart,\n\t\t\t\tend: dayStart.clone().add(1, 'day')\n\t\t\t});\n\n\t\t\tif (seg) {\n\t\t\t\tseg.dayIndex = dayIndex;\n\t\t\t\tsegs.push(seg);\n\t\t\t}\n\n\t\t\tdayStart.add(1, 'day');\n\t\t\tdayIndex++;\n\n\t\t\t// detect when span won't go fully into the next day,\n\t\t\t// and mutate the latest seg to the be the end.\n\t\t\tif (\n\t\t\t\tseg && !seg.isEnd && span.end.hasTime() &&\n\t\t\t\tspan.end < dayStart.clone().add(this.view.nextDayThreshold)\n\t\t\t) {\n\t\t\t\tseg.end = span.end.clone();\n\t\t\t\tseg.isEnd = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn segs;\n\t},\n\n\t// like \"4:00am\"\n\tcomputeEventTimeFormat: function() {\n\t\treturn this.view.opt('mediumTimeFormat');\n\t},\n\n\t// for events with a url, the whole <tr> should be clickable,\n\t// but it's impossible to wrap with an <a> tag. simulate this.\n\thandleSegClick: function(seg, ev) {\n\t\tvar url;\n\n\t\tGrid.prototype.handleSegClick.apply(this, arguments); // super. might prevent the default action\n\n\t\t// not clicking on or within an <a> with an href\n\t\tif (!$(ev.target).closest('a[href]').length) {\n\t\t\turl = seg.event.url;\n\t\t\tif (url && !ev.isDefaultPrevented()) { // jsEvent not cancelled in handler\n\t\t\t\twindow.location.href = url; // simulate link click\n\t\t\t}\n\t\t}\n\t},\n\n\t// returns list of foreground segs that were actually rendered\n\trenderFgSegs: function(segs) {\n\t\tsegs = this.renderFgSegEls(segs); // might filter away hidden events\n\n\t\tif (!segs.length) {\n\t\t\tthis.renderEmptyMessage();\n\t\t}\n\t\telse {\n\t\t\tthis.renderSegList(segs);\n\t\t}\n\n\t\treturn segs;\n\t},\n\n\trenderEmptyMessage: function() {\n\t\tthis.el.html(\n\t\t\t'<div class=\"fc-list-empty-wrap2\">' + // TODO: try less wraps\n\t\t\t'<div class=\"fc-list-empty-wrap1\">' +\n\t\t\t'<div class=\"fc-list-empty\">' +\n\t\t\t\thtmlEscape(this.view.opt('noEventsMessage')) +\n\t\t\t'</div>' +\n\t\t\t'</div>' +\n\t\t\t'</div>'\n\t\t);\n\t},\n\n\t// render the event segments in the view\n\trenderSegList: function(allSegs) {\n\t\tvar segsByDay = this.groupSegsByDay(allSegs); // sparse array\n\t\tvar dayIndex;\n\t\tvar daySegs;\n\t\tvar i;\n\t\tvar tableEl = $('<table class=\"fc-list-table\"><tbody/></table>');\n\t\tvar tbodyEl = tableEl.find('tbody');\n\n\t\tfor (dayIndex = 0; dayIndex < segsByDay.length; dayIndex++) {\n\t\t\tdaySegs = segsByDay[dayIndex];\n\t\t\tif (daySegs) { // sparse array, so might be undefined\n\n\t\t\t\t// append a day header\n\t\t\t\ttbodyEl.append(this.dayHeaderHtml(\n\t\t\t\t\tthis.view.start.clone().add(dayIndex, 'days')\n\t\t\t\t));\n\n\t\t\t\tthis.sortEventSegs(daySegs);\n\n\t\t\t\tfor (i = 0; i < daySegs.length; i++) {\n\t\t\t\t\ttbodyEl.append(daySegs[i].el); // append event row\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.el.empty().append(tableEl);\n\t},\n\n\t// Returns a sparse array of arrays, segs grouped by their dayIndex\n\tgroupSegsByDay: function(segs) {\n\t\tvar segsByDay = []; // sparse array\n\t\tvar i, seg;\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tseg = segs[i];\n\t\t\t(segsByDay[seg.dayIndex] || (segsByDay[seg.dayIndex] = []))\n\t\t\t\t.push(seg);\n\t\t}\n\n\t\treturn segsByDay;\n\t},\n\n\t// generates the HTML for the day headers that live amongst the event rows\n\tdayHeaderHtml: function(dayDate) {\n\t\tvar view = this.view;\n\t\tvar mainFormat = view.opt('listDayFormat');\n\t\tvar altFormat = view.opt('listDayAltFormat');\n\n\t\treturn '<tr class=\"fc-list-heading\" data-date=\"' + dayDate.format('YYYY-MM-DD') + '\">' +\n\t\t\t'<td class=\"' + view.widgetHeaderClass + '\" colspan=\"3\">' +\n\t\t\t\t(mainFormat ?\n\t\t\t\t\tview.buildGotoAnchorHtml(\n\t\t\t\t\t\tdayDate,\n\t\t\t\t\t\t{ 'class': 'fc-list-heading-main' },\n\t\t\t\t\t\thtmlEscape(dayDate.format(mainFormat)) // inner HTML\n\t\t\t\t\t) :\n\t\t\t\t\t'') +\n\t\t\t\t(altFormat ?\n\t\t\t\t\tview.buildGotoAnchorHtml(\n\t\t\t\t\t\tdayDate,\n\t\t\t\t\t\t{ 'class': 'fc-list-heading-alt' },\n\t\t\t\t\t\thtmlEscape(dayDate.format(altFormat)) // inner HTML\n\t\t\t\t\t) :\n\t\t\t\t\t'') +\n\t\t\t'</td>' +\n\t\t'</tr>';\n\t},\n\n\t// generates the HTML for a single event row\n\tfgSegHtml: function(seg) {\n\t\tvar view = this.view;\n\t\tvar classes = [ 'fc-list-item' ].concat(this.getSegCustomClasses(seg));\n\t\tvar bgColor = this.getSegBackgroundColor(seg);\n\t\tvar event = seg.event;\n\t\tvar url = event.url;\n\t\tvar timeHtml;\n\n\t\tif (event.allDay) {\n\t\t\ttimeHtml = view.getAllDayHtml();\n\t\t}\n\t\telse if (view.isMultiDayEvent(event)) { // if the event appears to span more than one day\n\t\t\tif (seg.isStart || seg.isEnd) { // outer segment that probably lasts part of the day\n\t\t\t\ttimeHtml = htmlEscape(this.getEventTimeText(seg));\n\t\t\t}\n\t\t\telse { // inner segment that lasts the whole day\n\t\t\t\ttimeHtml = view.getAllDayHtml();\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// Display the normal time text for the *event's* times\n\t\t\ttimeHtml = htmlEscape(this.getEventTimeText(event));\n\t\t}\n\n\t\tif (url) {\n\t\t\tclasses.push('fc-has-url');\n\t\t}\n\n\t\treturn '<tr class=\"' + classes.join(' ') + '\">' +\n\t\t\t(this.displayEventTime ?\n\t\t\t\t'<td class=\"fc-list-item-time ' + view.widgetContentClass + '\">' +\n\t\t\t\t\t(timeHtml || '') +\n\t\t\t\t'</td>' :\n\t\t\t\t'') +\n\t\t\t'<td class=\"fc-list-item-marker ' + view.widgetContentClass + '\">' +\n\t\t\t\t'<span class=\"fc-event-dot\"' +\n\t\t\t\t(bgColor ?\n\t\t\t\t\t' style=\"background-color:' + bgColor + '\"' :\n\t\t\t\t\t'') +\n\t\t\t\t'></span>' +\n\t\t\t'</td>' +\n\t\t\t'<td class=\"fc-list-item-title ' + view.widgetContentClass + '\">' +\n\t\t\t\t'<a' + (url ? ' href=\"' + htmlEscape(url) + '\"' : '') + '>' +\n\t\t\t\t\thtmlEscape(seg.event.title || '') +\n\t\t\t\t'</a>' +\n\t\t\t'</td>' +\n\t\t'</tr>';\n\t}\n\n});\n\n;;\n\nfcViews.list = {\n\t'class': ListView,\n\tbuttonTextKey: 'list', // what to lookup in locale files\n\tdefaults: {\n\t\tbuttonText: 'list', // text to display for English\n\t\tlistDayFormat: 'LL', // like \"January 1, 2016\"\n\t\tnoEventsMessage: 'No events to display'\n\t}\n};\n\nfcViews.listDay = {\n\ttype: 'list',\n\tduration: { days: 1 },\n\tdefaults: {\n\t\tlistDayFormat: 'dddd' // day-of-week is all we need. full date is probably in header\n\t}\n};\n\nfcViews.listWeek = {\n\ttype: 'list',\n\tduration: { weeks: 1 },\n\tdefaults: {\n\t\tlistDayFormat: 'dddd', // day-of-week is more important\n\t\tlistDayAltFormat: 'LL'\n\t}\n};\n\nfcViews.listMonth = {\n\ttype: 'list',\n\tduration: { month: 1 },\n\tdefaults: {\n\t\tlistDayAltFormat: 'dddd' // day-of-week is nice-to-have\n\t}\n};\n\nfcViews.listYear = {\n\ttype: 'list',\n\tduration: { year: 1 },\n\tdefaults: {\n\t\tlistDayAltFormat: 'dddd' // day-of-week is nice-to-have\n\t}\n};\n\n;;\n\nreturn FC; // export for Node/CommonJS\n});\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJidWlsZC92ZW5kb3JzL2Z1bGxjYWxlbmRhci9mdWxsY2FsZW5kYXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7O0FDQUE7Ozs7OztBQU1BLENBQUMsVUFBUyxPQUFULEVBQWtCO0FBQ2xCLFNBQVEsTUFBUixFQUFnQixNQUFoQjtBQUNBLENBRkQsRUFFRyxVQUFTLENBQVQsRUFBWSxNQUFaLEVBQW9COztBQUV2QixFQUFDOztBQUVELEtBQUksS0FBSyxFQUFFLFlBQUYsR0FBaUI7QUFDekIsV0FBUyxPQURnQjtBQUV6QixzQkFBb0I7QUFGSyxFQUExQjtBQUlBLEtBQUksVUFBVSxHQUFHLEtBQUgsR0FBVyxFQUF6Qjs7QUFHQSxHQUFFLEVBQUYsQ0FBSyxZQUFMLEdBQW9CLFVBQVMsT0FBVCxFQUFrQjtBQUNyQyxNQUFJLE9BQU8sTUFBTSxTQUFOLENBQWdCLEtBQWhCLENBQXNCLElBQXRCLENBQTJCLFNBQTNCLEVBQXNDLENBQXRDLENBQVgsQ0FEcUMsQ0FDZ0I7QUFDckQsTUFBSSxNQUFNLElBQVYsQ0FGcUMsQ0FFckI7O0FBRWhCLE9BQUssSUFBTCxDQUFVLFVBQVMsQ0FBVCxFQUFZLFFBQVosRUFBc0I7QUFBRTtBQUNqQyxPQUFJLFVBQVUsRUFBRSxRQUFGLENBQWQ7QUFDQSxPQUFJLFdBQVcsUUFBUSxJQUFSLENBQWEsY0FBYixDQUFmLENBRitCLENBRWM7QUFDN0MsT0FBSSxTQUFKLENBSCtCLENBR2hCOztBQUVmO0FBQ0EsT0FBSSxPQUFPLE9BQVAsS0FBbUIsUUFBdkIsRUFBaUM7QUFDaEMsUUFBSSxZQUFZLEVBQUUsVUFBRixDQUFhLFNBQVMsT0FBVCxDQUFiLENBQWhCLEVBQWlEO0FBQ2hELGlCQUFZLFNBQVMsT0FBVCxFQUFrQixLQUFsQixDQUF3QixRQUF4QixFQUFrQyxJQUFsQyxDQUFaO0FBQ0EsU0FBSSxDQUFDLENBQUwsRUFBUTtB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VSxFQUFFLE9BQU8sQ0FBVCxFQUZRO0FBR2xCLFlBQVU7QUFDVCxrQkFBZSxNQUROLEVBQ2M7QUFDdkIscUJBQWtCO0FBRlQ7QUFIUSxFQUFuQjs7QUFTQSxTQUFRLFNBQVIsR0FBb0I7QUFDbkIsUUFBTSxNQURhO0FBRW5CLFlBQVUsRUFBRSxPQUFPLENBQVQsRUFGUztBQUduQixZQUFVO0FBQ1QscUJBQWtCLE1BRFQsQ0FDZ0I7QUFEaEI7QUFIUyxFQUFwQjs7QUFRQSxTQUFRLFFBQVIsR0FBbUI7QUFDbEIsUUFBTSxNQURZO0FBRWxCLFlBQVUsRUFBRSxNQUFNLENBQVIsRUFGUTtBQUdsQixZQUFVO0FBQ1QscUJBQWtCLE1BRFQsQ0FDZ0I7QUFEaEI7QUFIUSxFQUFuQjs7QUFRQSxFQUFDOztBQUVELFFBQU8sRUFBUCxDQTUyYnVCLENBNDJiWjtBQUNWLENBLzJiRCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvKiFcbiAqIEZ1bGxDYWxlbmRhciB2My4xLjBcbiAqIERvY3MgJiBMaWNlbnNlOiBodHRwOi8vZnVsbGNhbGVuZGFyLmlvL1xuICogKGMpIDIwMTYgQWRhbSBTaGF3XG4gKi9cblxuKGZ1bmN0aW9uKGZhY3RvcnkpIHtcblx0ZmFjdG9yeShqUXVlcnksIG1vbWVudCk7XG59KShmdW5jdGlvbigkLCBtb21lbnQpIHtcblxuOztcblxudmFyIEZDID0gJC5mdWxsQ2FsZW5kYXIgPSB7XG5cdHZlcnNpb246IFwiMy4xLjBcIixcblx0aW50ZXJuYWxBcGlWZXJzaW9uOiA3XG59O1xudmFyIGZjVmlld3MgPSBGQy52aWV3cyA9IHt9O1xuXG5cbiQuZm4uZnVsbENhbGVuZGFyID0gZnVuY3Rpb24ob3B0aW9ucykge1xuXHR2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7IC8vIGZvciBhIHBvc3NpYmxlIG1ldGhvZCBjYWxsXG5cdHZhciByZXMgPSB0aGlzOyAvLyB3aGF0IHRoaXMgZnVuY3Rpb24gd2lsbCByZXR1cm4gKHRoaXMgalF1ZXJ5IG9iamVjdCBieSBkZWZhdWx0KVxuXG5cdHRoaXMuZWFjaChmdW5jdGlvbihpLCBfZWxlbWVudCkgeyAvLyBsb29wIGVhY2ggRE9NIGVsZW1lbnQgaW52b2x2ZWRcblx0XHR2YXIgZWxlbWVudCA9ICQoX2VsZW1lbnQpO1xuXHRcdHZhciBjYWxlbmRhciA9IGVsZW1lbnQuZGF0YSgnZnVsbENhbGVuZGFyJyk7IC8vIGdldCB0aGUgZXhpc3RpbmcgY2FsZW5kYXIgb2JqZWN0IChpZiBhbnkpXG5cdFx0dmFyIHNpbmdsZVJlczsgLy8gdGhlIHJldHVybmVkIHZhbHVlIG9mIHRoaXMgc2luZ2xlIG1ldGhvZCBjYWxsXG5cblx0XHQvLyBhIG1ldGhvZCBjYWxsXG5cdFx0aWYgKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJykge1xuXHRcdFx0aWYgKGNhbGVuZGFyICYmICQuaXNGdW5jdGlvbihjYWxlbmRhcltvcHRpb25zXSkpIHtcblx0XHRcdFx0c2luZ2xlUmVzID0gY2FsZW5kYXJbb3B0aW9uc10uYXBwbHkoY2FsZW5kYXIsIGFyZ3MpO1xuXHRcdFx0XHRpZiAoIWkpIHtcblx0XHRcdFx0XHRyZXMgPSBzaW5nbGVSZXM7IC8vIHJlY29yZCB0aGUgZmlyc3QgbWV0aG9kIGNhbGwgcmVzdWx0XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKG9wdGlvbnMgPT09ICdkZXN0cm95JykgeyAvLyBmb3IgdGhlIGRlc3Ryb3kgbWV0aG9kLCBtdXN0IHJlbW92ZSBDYWxlbmRhciBvYmplY3QgZGF0YVxuXHRcdFx0XHRcdGVsZW1lbnQucmVtb3ZlRGF0YSgnZnVsbENhbGVuZGFyJyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0Ly8gYSBuZXcgY2FsZW5kYXIgaW5pdGlhbGl6YXRpb25cblx0XHRlbHNlIGlmICghY2FsZW5kYXIpIHsgLy8gZG9uJ3QgaW5pdGlhbGl6ZSB0d2ljZVxuXHRcdFx0Y2FsZW5kYXIgPSBuZXcgQ2FsZW5kYXIoZWxlbWVudCwgb3B0aW9ucyk7XG5cdFx0XHRlbGVtZW50LmRhdGEoJ2Z1bGxDYWxlbmRhcicsIGNhbGVuZGFyKTtcblx0XHRcdGNhbGVuZGFyLnJlbmRlcigpO1xuXHRcdH1cblx0fSk7XG5cblx0cmV0dXJuIHJlcztcbn07XG5cblxudmFyIGNvbXBsZXhPcHRpb25zID0gWyAvLyBuYW1lcyBvZiBvcHRpb25zIHRoYXQgYXJlIG9iamVjdHMgd2hvc2UgcHJvcGVydGllcyBzaG91bGQgYmUgY29tYmluZWRcblx0J2hlYWRlcicsXG5cdCdmb290ZXInLFxuXHQnYnV0dG9uVGV4dCcsXG5cdCdidXR0b25JY29ucycsXG5cdCd0aGVtZUJ1dHRvbkljb25zJ1xuXTtcblxuXG4vLyBNZXJnZXMgYW4gYXJyYXkgb2Ygb3B0aW9uIG9iamVjdHMgaW50byBhIHNpbmdsZSBvYmplY3RcbmZ1bmN0aW9uIG1lcmdlT3B0aW9ucyhvcHRpb25PYmpzKSB7XG5cdHJldHVybiBtZXJnZVByb3BzKG9wdGlvbk9ianMsIGNvbXBsZXhPcHRpb25zKTtcbn1cblxuOztcblxuLy8gZXhwb3J0c1xuRkMuaW50ZXJzZWN0UmFuZ2VzID0gaW50ZXJzZWN0UmFuZ2VzO1xuRkMuYXBwbHlBbGwgPSBhcHBseUFsbDtcbkZDLmRlYm91bmNlID0gZGVib3VuY2U7XG5GQy5pc0ludCA9IGlzSW50O1xuRkMuaHRtbEVzY2FwZSA9IGh0bWxFc2NhcGU7XG5GQy5jc3NUb1N0ciA9IGNzc1RvU3RyO1xuRkMucHJveHkgPSBwcm94eTtcbkZDLmNhcGl0YWxpc2VGaXJzdExldHRlciA9IGNhcGl0YWxpc2VGaXJzdExldHRlcjtcblxuXG4vKiBGdWxsQ2FsZW5kYXItc3BlY2lmaWMgRE9NIFV0aWxpdGllc1xuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuLy8gR2l2ZW4gdGhlIHNjcm9sbGJhciB3aWR0aHMgb2Ygc29tZSBvdGhlciBjb250YWluZXIsIGNyZWF0ZSBib3JkZXJzL21hcmdpbnMgb24gcm93RWxzIGluIG9yZGVyIHRvIG1hdGNoIHRoZSBsZWZ0XG4vLyBhbmQgcmlnaHQgc3BhY2UgdGhhdCB3YXMgb2Zmc2V0IGJ5IHRoZSBzY3JvbGxiYXJzLiBBIDEtcGl4ZWwgYm9yZGVyIGZpcnN0LCB0aGVuIG1hcmdpbiBiZXlvbmQgdGhhdC5cbmZ1bmN0aW9uIGNvbXBlbnNhdGVTY3JvbGwocm93RWxzLCBzY3JvbGxiYXJXaWR0aHMpIHtcblx0aWYgKHNjcm9sbGJhcldpZHRocy5sZWZ0KSB7XG5cdFx0cm93RWxzLmNzcyh7XG5cdFx0XHQnYm9yZGVyLWxlZnQtd2lkdGgnOiAxLFxuXHRcdFx0J21hcmdpbi1sZWZ0Jzogc2Nyb2xsYmFyV2lkdGhzLmxlZnQgLSAxXG5cdFx0fSk7XG5cdH1cblx0aWYgKHNjcm9sbGJhcldpZHRocy5yaWdodCkge1xuXHRcdHJvd0Vscy5jc3Moe1xuXHRcdFx0J2JvcmRlci1yaWdodC13aWR0aCc6IDEsXG5cdFx0XHQnbWFyZ2luLXJpZ2h0Jzogc2Nyb2xsYmFyV2lkdGhzLnJpZ2h0IC0gMVxuXHRcdH0pO1xuXHR9XG59XG5cblxuLy8gVW5kb2VzIGNvbXBlbnNhdGVTY3JvbGwgYW5kIHJlc3RvcmVzIGFsbCBib3JkZXJzL21hcmdpbnNcbmZ1bmN0aW9uIHVuY29tcGVuc2F0ZVNjcm9sbChyb3dFbHMpIHtcblx0cm93RWxzLmNzcyh7XG5cdFx0J21hcmdpbi1sZWZ0JzogJycsXG5cdFx0J21hcmdpbi1yaWdodCc6ICcnLFxuXHRcdCdib3JkZXItbGVmdC13aWR0aCc6ICcnLFxuXHRcdCdib3JkZXItcmlnaHQtd2lkdGgnOiAnJ1xuXHR9KTtcbn1cblxuXG4vLyBNYWtlIHRoZSBtb3VzZSBjdXJzb3IgZXhwcmVzcyB0aGF0IGFuIGV2ZW50IGlzIG5vdCBhbGxvd2VkIGluIHRoZSBjdXJyZW50IGFyZWFcbmZ1bmN0aW9uIGRpc2FibGVDdXJzb3IoKSB7XG5cdCQoJ2JvZHknKS5hZGRDbGFzcygnZmMtbm90LWFsbG93ZWQnKTtcbn1cblxuXG4vLyBSZXR1cm5zIHRoZSBtb3VzZSBjdXJzb3IgdG8gaXRzIG9yaWdpbmFsIGxvb2tcbmZ1bmN0aW9uIGVuYWJsZUN1cnNvcigpIHtcblx0JCgnYm9keScpLnJlbW92ZUNsYXNzKCdmYy1ub3QtYWxsb3dlZCcpO1xufVxuXG5cbi8vIEdpdmVuIGEgdG90YWwgYXZhaWxhYmxlIGhlaWdodCB0byBmaWxsLCBoYXZlIGBlbHNgIChlc3NlbnRpYWxseSBjaGlsZCByb3dzKSBleHBhbmQgdG8gYWNjb21vZGF0ZS5cbi8vIEJ5IGRlZmF1bHQsIGFsbCBlbGVtZW50cyB0aGF0IGFyZSBzaG9ydGVyIHRoYW4gdGhlIHJlY29tbWVuZGVkIGhlaWdodCBhcmUgZXhwYW5kZWQgdW5pZm9ybWx5LCBub3QgY29uc2lkZXJpbmdcbi8vIGFueSBvdGhlciBlbHMgdGhhdCBhcmUgYWxyZWFkeSB0b28gdGFsbC4gaWYgYHNob3VsZFJlZGlzdHJpYnV0ZWAgaXMgb24sIGl0IGNvbnNpZGVycyB0aGVzZSB0YWxsIHJvd3MgYW5kXG4vLyByZWR1Y2VzIHRoZSBhdmFpbGFibGUgaGVpZ2h0LlxuZnVuY3Rpb24gZGlzdHJpYnV0ZUhlaWdodChlbHMsIGF2YWlsYWJsZUhlaWdodCwgc2hvdWxkUmVkaXN0cmlidXRlKSB7XG5cblx0Ly8gKkZMT09SSU5HIE5PVEUqOiB3ZSBmbG9vciBpbiBjZXJ0YWluIHBsYWNlcyBiZWNhdXNlIHpvb20gY2FuIGdpdmUgaW5hY2N1cmF0ZSBmbG9hdGluZy1wb2ludCBkaW1lbnNpb25zLFxuXHQvLyBhbmQgaXQgaXMgYmV0dGVyIHRvIGJlIHNob3J0ZXIgdGhhbiB0YWxsZXIsIHRvIGF2b2lkIGNyZWF0aW5nIHVubmVjZXNzYXJ5IHNjcm9sbGJhcnMuXG5cblx0dmFyIG1pbk9mZnNldDEgPSBNYXRoLmZsb29yKGF2YWlsYWJsZUhlaWdodCAvIGVscy5sZW5ndGgpOyAvLyBmb3Igbm9uLWxhc3QgZWxlbWVudFxuXHR2YXIgbWluT2Zmc2V0MiA9IE1hdGguZmxvb3IoYXZhaWxhYmxlSGVpZ2h0IC0gbWluT2Zmc2V0MSAqIChlbHMubGVuZ3RoIC0gMSkpOyAvLyBmb3IgbGFzdCBlbGVtZW50ICpGTE9PUklORyBOT1RFKlxuXHR2YXIgZmxleEVscyA9IFtdOyAvLyBlbGVtZW50cyB0aGF0IGFyZSBhbGxvd2VkIHRvIGV4cGFuZC4gYXJyYXkgb2YgRE9NIG5vZGVzXG5cdHZhciBmbGV4T2Zmc2V0cyA9IFtdOyAvLyBhbW91bnQgb2YgdmVydGljYWwgc3BhY2UgaXQgdGFrZXMgdXBcblx0dmFyIGZsZXhIZWlnaHRzID0gW107IC8vIGFjdHVhbCBjc3MgaGVpZ2h0XG5cdHZhciB1c2VkSGVpZ2h0ID0gMDtcblxuXHR1bmRpc3RyaWJ1dGVIZWlnaHQoZWxzKTsgLy8gZ2l2ZSBhbGwgZWxlbWVudHMgdGhlaXIgbmF0dXJhbCBoZWlnaHRcblxuXHQvLyBmaW5kIGVsZW1lbnRzIHRoYXQgYXJlIGJlbG93IHRoZSByZWNvbW1lbmRlZCBoZWlnaHQgKGV4cGFuZGFibGUpLlxuXHQvLyBpbXBvcnRhbnQgdG8gcXVlcnkgZm9yIGhlaWdodHMgaW4gYSBzaW5nbGUgZmlyc3QgcGFzcyAodG8gYXZvaWQgcmVmbG93IG9zY2lsbGF0aW9uKS5cblx0ZWxzLmVhY2goZnVuY3Rpb24oaSwgZWwpIHtcblx0XHR2YXIgbWluT2Zmc2V0ID0gaSA9PT0gZWxzLmxlbmd0aCAtIDEgPyBtaW5PZmZzZXQyIDogbWluT2Zmc2V0MTtcblx0XHR2YXIgbmF0dXJhbE9mZnNldCA9ICQoZWwpLm91dGVySGVpZ2h0KHRydWUpO1xuXG5cdFx0aWYgKG5hdHVyYWxPZmZzZXQgPCBtaW5PZmZzZXQpIHtcblx0XHRcdGZsZXhFbHMucHVzaChlbCk7XG5cdFx0XHRmbGV4T2Zmc2V0cy5wdXNoKG5hdHVyYWxPZmZzZXQpO1xuXHRcdFx0ZmxleEhlaWdodHMucHVzaCgkKGVsKS5oZWlnaHQoKSk7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0Ly8gdGhpcyBlbGVtZW50IHN0cmV0Y2hlcyBwYXN0IHJlY29tbWVuZGVkIGhlaWdodCAobm9uLWV4cGFuZGFibGUpLiBtYXJrIHRoZSBzcGFjZSBhcyBvY2N1cGllZC5cblx0XHRcdHVzZWRIZWlnaHQgKz0gbmF0dXJhbE9mZnNldDtcblx0XHR9XG5cdH0pO1xuXG5cdC8vIHJlYWRqdXN0IHRoZSByZWNvbW1lbmRlZCBoZWlnaHQgdG8gb25seSBjb25zaWRlciB0aGUgaGVpZ2h0IGF2YWlsYWJsZSB0byBub24tbWF4ZWQtb3V0IHJvd3MuXG5cdGlmIChzaG91bGRSZWRpc3RyaWJ1dGUpIHtcblx0XHRhdmFpbGFibGVIZWlnaHQgLT0gdXNlZEhlaWdodDtcblx0XHRtaW5PZmZzZXQxID0gTWF0aC5mbG9vcihhdmFpbGFibGVIZWlnaHQgLyBmbGV4RWxzLmxlbmd0aCk7XG5cdFx0bWluT2Zmc2V0MiA9IE1hdGguZmxvb3IoYXZhaWxhYmxlSGVpZ2h0IC0gbWluT2Zmc2V0MSAqIChmbGV4RWxzLmxlbmd0aCAtIDEpKTsgLy8gKkZMT09SSU5HIE5PVEUqXG5cdH1cblxuXHQvLyBhc3NpZ24gaGVpZ2h0cyB0byBhbGwgZXhwYW5kYWJsZSBlbGVtZW50c1xuXHQkKGZsZXhFbHMpLmVhY2goZnVuY3Rpb24oaSwgZWwpIHtcblx0XHR2YXIgbWluT2Zmc2V0ID0gaSA9PT0gZmxleEVscy5sZW5ndGggLSAxID8gbWluT2Zmc2V0MiA6IG1pbk9mZnNldDE7XG5cdFx0dmFyIG5hdHVyYWxPZmZzZXQgPSBmbGV4T2Zmc2V0c1tpXTtcblx0XHR2YXIgbmF0dXJhbEhlaWdodCA9IGZsZXhIZWlnaHRzW2ldO1xuXHRcdHZhciBuZXdIZWlnaHQgPSBtaW5PZmZzZXQgLSAobmF0dXJhbE9mZnNldCAtIG5hdHVyYWxIZWlnaHQpOyAvLyBzdWJ0cmFjdCB0aGUgbWFyZ2luL3BhZGRpbmdcblxuXHRcdGlmIChuYXR1cmFsT2Zmc2V0IDwgbWluT2Zmc2V0KSB7IC8vIHdlIGNoZWNrIHRoaXMgYWdhaW4gYmVjYXVzZSByZWRpc3RyaWJ1dGlvbiBtaWdodCBoYXZlIGNoYW5nZWQgdGhpbmdzXG5cdFx0XHQkKGVsKS5oZWlnaHQobmV3SGVpZ2h0KTtcblx0XHR9XG5cdH0pO1xufVxuXG5cbi8vIFVuZG9lcyBkaXN0cnVidXRlSGVpZ2h0LCByZXN0b3JpbmcgYWxsIGVscyB0byB0aGVpciBuYXR1cmFsIGhlaWdodFxuZnVuY3Rpb24gdW5kaXN0cmlidXRlSGVpZ2h0KGVscykge1xuXHRlbHMuaGVpZ2h0KCcnKTtcbn1cblxuXG4vLyBHaXZlbiBgZWxzYCwgYSBqUXVlcnkgc2V0IG9mIDx0ZD4gY2VsbHMsIGZpbmQgdGhlIGNlbGwgd2l0aCB0aGUgbGFyZ2VzdCBuYXR1cmFsIHdpZHRoIGFuZCBzZXQgdGhlIHdpZHRocyBvZiBhbGwgdGhlXG4vLyBjZWxscyB0byBiZSB0aGF0IHdpZHRoLlxuLy8gUFJFUkVRVUlTSVRFOiBpZiB5b3Ugd2FudCBhIGNlbGwgdG8gdGFrZSB1cCB3aWR0aCwgaXQgbmVlZHMgdG8gaGF2ZSBhIHNpbmdsZSBpbm5lciBlbGVtZW50IHcvIGRpc3BsYXk6aW5saW5lXG5mdW5jdGlvbiBtYXRjaENlbGxXaWR0aHMoZWxzKSB7XG5cdHZhciBtYXhJbm5lcldpZHRoID0gMDtcblxuXHRlbHMuZmluZCgnPiAqJykuZWFjaChmdW5jdGlvbihpLCBpbm5lckVsKSB7XG5cdFx0dmFyIGlubmVyV2lkdGggPSAkKGlubmVyRWwpLm91dGVyV2lkdGgoKTtcblx0XHRpZiAoaW5uZXJXaWR0aCA+IG1heElubmVyV2lkdGgpIHtcblx0XHRcdG1heElubmVyV2lkdGggPSBpbm5lcldpZHRoO1xuXHRcdH1cblx0fSk7XG5cblx0bWF4SW5uZXJXaWR0aCsrOyAvLyBzb21ldGltZXMgbm90IGFjY3VyYXRlIG9mIHdpZHRoIHRoZSB0ZXh0IG5lZWRzIHRvIHN0YXkgb24gb25lIGxpbmUuIGluc3VyYW5jZVxuXG5cdGVscy53aWR0aChtYXhJbm5lcldpZHRoKTtcblxuXHRyZXR1cm4gbWF4SW5uZXJXaWR0aDtcbn1cblxuXG4vLyBHaXZlbiBvbmUgZWxlbWVudCB0aGF0IHJlc2lkZXMgaW5zaWRlIGFub3RoZXIsXG4vLyBTdWJ0cmFjdHMgdGhlIGhlaWdodCBvZiB0aGUgaW5uZXIgZWxlbWVudCBmcm9tIHRoZSBvdXRlciBlbGVtZW50LlxuZnVuY3Rpb24gc3VidHJhY3RJbm5lckVsSGVpZ2h0KG91dGVyRWwsIGlubmVyRWwpIHtcblx0dmFyIGJvdGggPSBvdXRlckVsLmFkZChpbm5lckVsKTtcblx0dmFyIGRpZmY7XG5cblx0Ly8gZWZmaW4nIElFOC85LzEwLzExIHNvbWV0aW1lcyByZXR1cm5zIDAgZm9yIGRpbWVuc2lvbnMuIHRoaXMgd2VpcmQgaGFjayB3YXMgdGhlIG9ubHkgdGhpbmcgdGhhdCB3b3JrZWRcblx0Ym90aC5jc3Moe1xuXHRcdHBvc2l0aW9uOiAncmVsYXRpdmUnLCAvLyBjYXVzZSBhIHJlZmxvdywgd2hpY2ggd2lsbCBmb3JjZSBmcmVzaCBkaW1lbnNpb24gcmVjYWxjdWxhdGlvblxuXHRcdGxlZnQ6IC0xIC8vIGVuc3VyZSByZWZsb3cgaW4gY2FzZSB0aGUgZWwgd2FzIGFscmVhZHkgcmVsYXRpdmUuIG5lZ2F0aXZlIGlzIGxlc3MgbGlrZWx5IHRvIGNhdXNlIG5ldyBzY3JvbGxcblx0fSk7XG5cdGRpZmYgPSBvdXRlckVsLm91dGVySGVpZ2h0KCkgLSBpbm5lckVsLm91dGVySGVpZ2h0KCk7IC8vIGdyYWIgdGhlIGRpbWVuc2lvbnNcblx0Ym90aC5jc3MoeyBwb3NpdGlvbjogJycsIGxlZnQ6ICcnIH0pOyAvLyB1bmRvIGhhY2tcblxuXHRyZXR1cm4gZGlmZjtcbn1cblxuXG4vKiBFbGVtZW50IEdlb20gVXRpbGl0aWVzXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuRkMuZ2V0T3V0ZXJSZWN0ID0gZ2V0T3V0ZXJSZWN0O1xuRkMuZ2V0Q2xpZW50UmVjdCA9IGdldENsaWVudFJlY3Q7XG5GQy5nZXRDb250ZW50UmVjdCA9IGdldENvbnRlbnRSZWN0O1xuRkMuZ2V0U2Nyb2xsYmFyV2lkdGhzID0gZ2V0U2Nyb2xsYmFyV2lkdGhzO1xuXG5cbi8vIGJvcnJvd2VkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnktdWkvYmxvYi8xLjExLjAvdWkvY29yZS5qcyNMNTFcbmZ1bmN0aW9uIGdldFNjcm9sbFBhcmVudChlbCkge1xuXHR2YXIgcG9zaXRpb24gPSBlbC5jc3MoJ3Bvc2l0aW9uJyksXG5cdFx0c2Nyb2xsUGFyZW50ID0gZWwucGFyZW50cygpLmZpbHRlcihmdW5jdGlvbigpIHtcblx0XHRcdHZhciBwYXJlbnQgPSAkKHRoaXMpO1xuXHRcdFx0cmV0dXJuICgvKGF1dG98c2Nyb2xsKS8pLnRlc3QoXG5cdFx0XHRcdHBhcmVudC5jc3MoJ292ZXJmbG93JykgKyBwYXJlbnQuY3NzKCdvdmVyZmxvdy15JykgKyBwYXJlbnQuY3NzKCdvdmVyZmxvdy14Jylcblx0XHRcdCk7XG5cdFx0fSkuZXEoMCk7XG5cblx0cmV0dXJuIHBvc2l0aW9uID09PSAnZml4ZWQnIHx8ICFzY3JvbGxQYXJlbnQubGVuZ3RoID8gJChlbFswXS5vd25lckRvY3VtZW50IHx8IGRvY3VtZW50KSA6IHNjcm9sbFBhcmVudDtcbn1cblxuXG4vLyBRdWVyaWVzIHRoZSBvdXRlciBib3VuZGluZyBhcmVhIG9mIGEgalF1ZXJ5IGVsZW1lbnQuXG4vLyBSZXR1cm5zIGEgcmVjdGFuZ2xlIHdpdGggYWJzb2x1dGUgY29vcmRpbmF0ZXM6IGxlZnQsIHJpZ2h0IChleGNsdXNpdmUpLCB0b3AsIGJvdHRvbSAoZXhjbHVzaXZlKS5cbi8vIE9yaWdpbiBpcyBvcHRpb25hbC5cbmZ1bmN0aW9uIGdldE91dGVyUmVjdChlbCwgb3JpZ2luKSB7XG5cdHZhciBvZmZzZXQgPSBlbC5vZmZzZXQoKTtcblx0dmFyIGxlZnQgPSBvZmZzZXQubGVmdCAtIChvcmlnaW4gPyBvcmlnaW4ubGVmdCA6IDApO1xuXHR2YXIgdG9wID0gb2Zmc2V0LnRvcCAtIChvcmlnaW4gPyBvcmlnaW4udG9wIDogMCk7XG5cblx0cmV0dXJuIHtcblx0XHRsZWZ0OiBsZWZ0LFxuXHRcdHJpZ2h0OiBsZWZ0ICsgZWwub3V0ZXJXaWR0aCgpLFxuXHRcdHRvcDogdG9wLFxuXHRcdGJvdHRvbTogdG9wICsgZWwub3V0ZXJIZWlnaHQoKVxuXHR9O1xufVxuXG5cbi8vIFF1ZXJpZXMgdGhlIGFyZWEgd2l0aGluIHRoZSBtYXJnaW4vYm9yZGVyL3Njcm9sbGJhcnMgb2YgYSBqUXVlcnkgZWxlbWVudC4gRG9lcyBub3QgZ28gd2l0aGluIHRoZSBwYWRkaW5nLlxuLy8gUmV0dXJucyBhIHJlY3RhbmdsZSB3aXRoIGFic29sdXRlIGNvb3JkaW5hdGVzOiBsZWZ0LCByaWdodCAoZXhjbHVzaXZlKSwgdG9wLCBib3R0b20gKGV4Y2x1c2l2ZSkuXG4vLyBPcmlnaW4gaXMgb3B0aW9uYWwuXG4vLyBOT1RFOiBzaG91bGQgdXNlIGNsaWVudExlZnQvY2xpZW50VG9wLCBidXQgdmVyeSB1bnJlbGlhYmxlIGNyb3NzLWJyb3dzZXIuXG5mdW5jdGlvbiBnZXRDbGllbnRSZWN0KGVsLCBvcmlnaW4pIHtcblx0dmFyIG9mZnNldCA9IGVsLm9mZnNldCgpO1xuXHR2YXIgc2Nyb2xsYmFyV2lkdGhzID0gZ2V0U2Nyb2xsYmFyV2lkdGhzKGVsKTtcblx0dmFyIGxlZnQgPSBvZmZzZXQubGVmdCArIGdldENzc0Zsb2F0KGVsLCAnYm9yZGVyLWxlZnQtd2lkdGgnKSArIHNjcm9sbGJhcldpZHRocy5sZWZ0IC0gKG9yaWdpbiA/IG9yaWdpbi5sZWZ0IDogMCk7XG5cdHZhciB0b3AgPSBvZmZzZXQudG9wICsgZ2V0Q3NzRmxvYXQoZWwsICdib3JkZXItdG9wLXdpZHRoJykgKyBzY3JvbGxiYXJXaWR0aHMudG9wIC0gKG9yaWdpbiA/IG9yaWdpbi50b3AgOiAwKTtcblxuXHRyZXR1cm4ge1xuXHRcdGxlZnQ6IGxlZnQsXG5cdFx0cmlnaHQ6IGxlZnQgKyBlbFswXS5jbGllbnRXaWR0aCwgLy8gY2xpZW50V2lkdGggaW5jbHVkZXMgcGFkZGluZyBidXQgTk9UIHNjcm9sbGJhcnNcblx0XHR0b3A6IHRvcCxcblx0XHRib3R0b206IHRvcCArIGVsWzBdLmNsaWVudEhlaWdodCAvLyBjbGllbnRIZWlnaHQgaW5jbHVkZXMgcGFkZGluZyBidXQgTk9UIHNjcm9sbGJhcnNcblx0fTtcbn1cblxuXG4vLyBRdWVyaWVzIHRoZSBhcmVhIHdpdGhpbiB0aGUgbWFyZ2luL2JvcmRlci9wYWRkaW5nIG9mIGEgalF1ZXJ5IGVsZW1lbnQuIEFzc3VtZWQgbm90IHRvIGhhdmUgc2Nyb2xsYmFycy5cbi8vIFJldHVybnMgYSByZWN0YW5nbGUgd2l0aCBhYnNvbHV0ZSBjb29yZGluYXRlczogbGVmdCwgcmlnaHQgKGV4Y2x1c2l2ZSksIHRvcCwgYm90dG9tIChleGNsdXNpdmUpLlxuLy8gT3JpZ2luIGlzIG9wdGlvbmFsLlxuZnVuY3Rpb24gZ2V0Q29udGVudFJlY3QoZWwsIG9yaWdpbikge1xuXHR2YXIgb2Zmc2V0ID0gZWwub2Zmc2V0KCk7IC8vIGp1c3Qgb3V0c2lkZSBvZiBib3JkZXIsIG1hcmdpbiBub3QgaW5jbHVkZWRcblx0dmFyIGxlZnQgPSBvZmZzZXQubGVmdCArIGdldENzc0Zsb2F0KGVsLCAnYm9yZGVyLWxlZnQtd2lkdGgnKSArIGdldENzc0Zsb2F0KGVsLCAncGFkZGluZy1sZWZ0JykgLVxuXHRcdChvcmlnaW4gPyBvcmlnaW4ubGVmdCA6IDApO1xuXHR2YXIgdG9wID0gb2Zmc2V0LnRvcCArIGdldENzc0Zsb2F0KGVsLCAnYm9yZGVyLXRvcC13aWR0aCcpICsgZ2V0Q3NzRmxvYXQoZWwsICdwYWRkaW5nLXRvcCcpIC1cblx0XHQob3JpZ2luID8gb3JpZ2luLnRvcCA6IDApO1xuXG5cdHJldHVybiB7XG5cdFx0bGVmdDogbGVmdCxcblx0XHRyaWdodDogbGVmdCArIGVsLndpZHRoKCksXG5cdFx0dG9wOiB0b3AsXG5cdFx0Ym90dG9tOiB0b3AgKyBlbC5oZWlnaHQoKVxuXHR9O1xufVxuXG5cbi8vIFJldHVybnMgdGhlIGNvbXB1dGVkIGxlZnQvcmlnaHQvdG9wL2JvdHRvbSBzY3JvbGxiYXIgd2lkdGhzIGZvciB0aGUgZ2l2ZW4galF1ZXJ5IGVsZW1lbnQuXG4vLyBOT1RFOiBzaG91bGQgdXNlIGNsaWVudExlZnQvY2xpZW50VG9wLCBidXQgdmVyeSB1bnJlbGlhYmxlIGNyb3NzLWJyb3dzZXIuXG5mdW5jdGlvbiBnZXRTY3JvbGxiYXJXaWR0aHMoZWwpIHtcblx0dmFyIGxlZnRSaWdodFdpZHRoID0gZWwuaW5uZXJXaWR0aCgpIC0gZWxbMF0uY2xpZW50V2lkdGg7IC8vIHRoZSBwYWRkaW5ncyBjYW5jZWwgb3V0LCBsZWF2aW5nIHRoZSBzY3JvbGxiYXJzXG5cdHZhciB3aWR0aHMgPSB7XG5cdFx0bGVmdDogMCxcblx0XHRyaWdodDogMCxcblx0XHR0b3A6IDAsXG5cdFx0Ym90dG9tOiBlbC5pbm5lckhlaWdodCgpIC0gZWxbMF0uY2xpZW50SGVpZ2h0IC8vIHRoZSBwYWRkaW5ncyBjYW5jZWwgb3V0LCBsZWF2aW5nIHRoZSBib3R0b20gc2Nyb2xsYmFyXG5cdH07XG5cblx0aWYgKGdldElzTGVmdFJ0bFNjcm9sbGJhcnMoKSAmJiBlbC5jc3MoJ2RpcmVjdGlvbicpID09ICdydGwnKSB7IC8vIGlzIHRoZSBzY3JvbGxiYXIgb24gdGhlIGxlZnQgc2lkZT9cblx0XHR3aWR0aHMubGVmdCA9IGxlZnRSaWdodFdpZHRoO1xuXHR9XG5cdGVsc2Uge1xuXHRcdHdpZHRocy5yaWdodCA9IGxlZnRSaWdodFdpZHRoO1xuXHR9XG5cblx0cmV0dXJuIHdpZHRocztcbn1cblxuXG4vLyBMb2dpYyBmb3IgZGV0ZXJtaW5pbmcgaWYsIHdoZW4gdGhlIGVsZW1lbnQgaXMgcmlnaHQtdG8tbGVmdCwgdGhlIHNjcm9sbGJhciBhcHBlYXJzIG9uIHRoZSBsZWZ0IHNpZGVcblxudmFyIF9pc0xlZnRSdGxTY3JvbGxiYXJzID0gbnVsbDtcblxuZnVuY3Rpb24gZ2V0SXNMZWZ0UnRsU2Nyb2xsYmFycygpIHsgLy8gcmVzcG9uc2libGUgZm9yIGNhY2hpbmcgdGhlIGNvbXB1dGF0aW9uXG5cdGlmIChfaXNMZWZ0UnRsU2Nyb2xsYmFycyA9PT0gbnVsbCkge1xuXHRcdF9pc0xlZnRSdGxTY3JvbGxiYXJzID0gY29tcHV0ZUlzTGVmdFJ0bFNjcm9sbGJhcnMoKTtcblx0fVxuXHRyZXR1cm4gX2lzTGVmdFJ0bFNjcm9sbGJhcnM7XG59XG5cbmZ1bmN0aW9uIGNvbXB1dGVJc0xlZnRSdGxTY3JvbGxiYXJzKCkgeyAvLyBjcmVhdGVzIGFuIG9mZnNjcmVlbiB0ZXN0IGVsZW1lbnQsIHRoZW4gcmVtb3ZlcyBpdFxuXHR2YXIgZWwgPSAkKCc8ZGl2PjxkaXYvPjwvZGl2PicpXG5cdFx0LmNzcyh7XG5cdFx0XHRwb3NpdGlvbjogJ2Fic29sdXRlJyxcblx0XHRcdHRvcDogLTEwMDAsXG5cdFx0XHRsZWZ0OiAwLFxuXHRcdFx0Ym9yZGVyOiAwLFxuXHRcdFx0cGFkZGluZzogMCxcblx0XHRcdG92ZXJmbG93OiAnc2Nyb2xsJyxcblx0XHRcdGRpcmVjdGlvbjogJ3J0bCdcblx0XHR9KVxuXHRcdC5hcHBlbmRUbygnYm9keScpO1xuXHR2YXIgaW5uZXJFbCA9IGVsLmNoaWxkcmVuKCk7XG5cdHZhciByZXMgPSBpbm5lckVsLm9mZnNldCgpLmxlZnQgPiBlbC5vZmZzZXQoKS5sZWZ0OyAvLyBpcyB0aGUgaW5uZXIgZGl2IHNoaWZ0ZWQgdG8gYWNjb21tb2RhdGUgYSBsZWZ0IHNjcm9sbGJhcj9cblx0ZWwucmVtb3ZlKCk7XG5cdHJldHVybiByZXM7XG59XG5cblxuLy8gUmV0cmlldmVzIGEgalF1ZXJ5IGVsZW1lbnQncyBjb21wdXRlZCBDU1MgdmFsdWUgYXMgYSBmbG9hdGluZy1wb2ludCBudW1iZXIuXG4vLyBJZiB0aGUgcXVlcmllZCB2YWx1ZSBpcyBub24tbnVtZXJpYyAoZXg6IElFIGNhbiByZXR1cm4gXCJtZWRpdW1cIiBmb3IgYm9yZGVyIHdpZHRoKSwgd2lsbCBqdXN0IHJldHVybiB6ZXJvLlxuZnVuY3Rpb24gZ2V0Q3NzRmxvYXQoZWwsIHByb3ApIHtcblx0cmV0dXJuIHBhcnNlRmxvYXQoZWwuY3NzKHByb3ApKSB8fCAwO1xufVxuXG5cbi8qIE1vdXNlIC8gVG91Y2ggVXRpbGl0aWVzXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuRkMucHJldmVudERlZmF1bHQgPSBwcmV2ZW50RGVmYXVsdDtcblxuXG4vLyBSZXR1cm5zIGEgYm9vbGVhbiB3aGV0aGVyIHRoaXMgd2FzIGEgbGVmdCBtb3VzZSBjbGljayBhbmQgbm8gY3RybCBrZXkgKHdoaWNoIG1lYW5zIHJpZ2h0IGNsaWNrIG9uIE1hYylcbmZ1bmN0aW9uIGlzUHJpbWFyeU1vdXNlQnV0dG9uKGV2KSB7XG5cdHJldHVybiBldi53aGljaCA9PSAxICYmICFldi5jdHJsS2V5O1xufVxuXG5cbmZ1bmN0aW9uIGdldEV2WChldikge1xuXHRpZiAoZXYucGFnZVggIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBldi5wYWdlWDtcblx0fVxuXHR2YXIgdG91Y2hlcyA9IGV2Lm9yaWdpbmFsRXZlbnQudG91Y2hlcztcblx0aWYgKHRvdWNoZXMpIHtcblx0XHRyZXR1cm4gdG91Y2hlc1swXS5wYWdlWDtcblx0fVxufVxuXG5cbmZ1bmN0aW9uIGdldEV2WShldikge1xuXHRpZiAoZXYucGFnZVkgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBldi5wYWdlWTtcblx0fVxuXHR2YXIgdG91Y2hlcyA9IGV2Lm9yaWdpbmFsRXZlbnQudG91Y2hlcztcblx0aWYgKHRvdWNoZXMpIHtcblx0XHRyZXR1cm4gdG91Y2hlc1swXS5wYWdlWTtcblx0fVxufVxuXG5cbmZ1bmN0aW9uIGdldEV2SXNUb3VjaChldikge1xuXHRyZXR1cm4gL150b3VjaC8udGVzdChldi50eXBlKTtcbn1cblxuXG5mdW5jdGlvbiBwcmV2ZW50U2VsZWN0aW9uKGVsKSB7XG5cdGVsLmFkZENsYXNzKCdmYy11bnNlbGVjdGFibGUnKVxuXHRcdC5vbignc2VsZWN0c3RhcnQnLCBwcmV2ZW50RGVmYXVsdCk7XG59XG5cblxuLy8gU3RvcHMgYSBtb3VzZS90b3VjaCBldmVudCBmcm9tIGRvaW5nIGl0J3MgbmF0aXZlIGJyb3dzZXIgYWN0aW9uXG5mdW5jdGlvbiBwcmV2ZW50RGVmYXVsdChldikge1xuXHRldi5wcmV2ZW50RGVmYXVsdCgpO1xufVxuXG5cbi8vIGF0dGFjaCBhIGhhbmRsZXIgdG8gZ2V0IGNhbGxlZCB3aGVuIEFOWSBzY3JvbGwgYWN0aW9uIGhhcHBlbnMgb24gdGhlIHBhZ2UuXG4vLyB0aGlzIHdhcyBpbXBvc3NpYmxlIHRvIGRvIHdpdGggbm9ybWFsIG9uL29mZiBiZWNhdXNlICdzY3JvbGwnIGRvZXNuJ3QgYnViYmxlLlxuLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzI5NTQ1NjUvOTYzNDJcbi8vIHJldHVybnMgYHRydWVgIG9uIHN1Y2Nlc3MuXG5mdW5jdGlvbiBiaW5kQW55U2Nyb2xsKGhhbmRsZXIpIHtcblx0aWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGhhbmRsZXIsIHRydWUpOyAvLyB1c2VDYXB0dXJlPXRydWVcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXHRyZXR1cm4gZmFsc2U7XG59XG5cblxuLy8gdW5kb2VzIGJpbmRBbnlTY3JvbGwuIG11c3QgcGFzcyBpbiB0aGUgb3JpZ2luYWwgZnVuY3Rpb24uXG4vLyByZXR1cm5zIGB0cnVlYCBvbiBzdWNjZXNzLlxuZnVuY3Rpb24gdW5iaW5kQW55U2Nyb2xsKGhhbmRsZXIpIHtcblx0aWYgKHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKSB7XG5cdFx0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGhhbmRsZXIsIHRydWUpOyAvLyB1c2VDYXB0dXJlPXRydWVcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXHRyZXR1cm4gZmFsc2U7XG59XG5cblxuLyogR2VuZXJhbCBHZW9tZXRyeSBVdGlsc1xuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbkZDLmludGVyc2VjdFJlY3RzID0gaW50ZXJzZWN0UmVjdHM7XG5cbi8vIFJldHVybnMgYSBuZXcgcmVjdGFuZ2xlIHRoYXQgaXMgdGhlIGludGVyc2VjdGlvbiBvZiB0aGUgdHdvIHJlY3RhbmdsZXMuIElmIHRoZXkgZG9uJ3QgaW50ZXJzZWN0LCByZXR1cm5zIGZhbHNlXG5mdW5jdGlvbiBpbnRlcnNlY3RSZWN0cyhyZWN0MSwgcmVjdDIpIHtcblx0dmFyIHJlcyA9IHtcblx0XHRsZWZ0OiBNYXRoLm1heChyZWN0MS5sZWZ0LCByZWN0Mi5sZWZ0KSxcblx0XHRyaWdodDogTWF0aC5taW4ocmVjdDEucmlnaHQsIHJlY3QyLnJpZ2h0KSxcblx0XHR0b3A6IE1hdGgubWF4KHJlY3QxLnRvcCwgcmVjdDIudG9wKSxcblx0XHRib3R0b206IE1hdGgubWluKHJlY3QxLmJvdHRvbSwgcmVjdDIuYm90dG9tKVxuXHR9O1xuXG5cdGlmIChyZXMubGVmdCA8IHJlcy5yaWdodCAmJiByZXMudG9wIDwgcmVzLmJvdHRvbSkge1xuXHRcdHJldHVybiByZXM7XG5cdH1cblx0cmV0dXJuIGZhbHNlO1xufVxuXG5cbi8vIFJldHVybnMgYSBuZXcgcG9pbnQgdGhhdCB3aWxsIGhhdmUgYmVlbiBtb3ZlZCB0byByZXNpZGUgd2l0aGluIHRoZSBnaXZlbiByZWN0YW5nbGVcbmZ1bmN0aW9uIGNvbnN0cmFpblBvaW50KHBvaW50LCByZWN0KSB7XG5cdHJldHVybiB7XG5cdFx0bGVmdDogTWF0aC5taW4oTWF0aC5tYXgocG9pbnQubGVmdCwgcmVjdC5sZWZ0KSwgcmVjdC5yaWdodCksXG5cdFx0dG9wOiBNYXRoLm1pbihNYXRoLm1heChwb2ludC50b3AsIHJlY3QudG9wKSwgcmVjdC5ib3R0b20pXG5cdH07XG59XG5cblxuLy8gUmV0dXJucyBhIHBvaW50IHRoYXQgaXMgdGhlIGNlbnRlciBvZiB0aGUgZ2l2ZW4gcmVjdGFuZ2xlXG5mdW5jdGlvbiBnZXRSZWN0Q2VudGVyKHJlY3QpIHtcblx0cmV0dXJuIHtcblx0XHRsZWZ0OiAocmVjdC5sZWZ0ICsgcmVjdC5yaWdodCkgLyAyLFxuXHRcdHRvcDogKHJlY3QudG9wICsgcmVjdC5ib3R0b20pIC8gMlxuXHR9O1xufVxuXG5cbi8vIFN1YnRyYWN0cyBwb2ludDIncyBjb29yZGluYXRlcyBmcm9tIHBvaW50MSdzIGNvb3JkaW5hdGVzLCByZXR1cm5pbmcgYSBkZWx0YVxuZnVuY3Rpb24gZGlmZlBvaW50cyhwb2ludDEsIHBvaW50Mikge1xuXHRyZXR1cm4ge1xuXHRcdGxlZnQ6IHBvaW50MS5sZWZ0IC0gcG9pbnQyLmxlZnQsXG5cdFx0dG9wOiBwb2ludDEudG9wIC0gcG9pbnQyLnRvcFxuXHR9O1xufVxuXG5cbi8qIE9iamVjdCBPcmRlcmluZyBieSBGaWVsZFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbkZDLnBhcnNlRmllbGRTcGVjcyA9IHBhcnNlRmllbGRTcGVjcztcbkZDLmNvbXBhcmVCeUZpZWxkU3BlY3MgPSBjb21wYXJlQnlGaWVsZFNwZWNzO1xuRkMuY29tcGFyZUJ5RmllbGRTcGVjID0gY29tcGFyZUJ5RmllbGRTcGVjO1xuRkMuZmxleGlibGVDb21wYXJlID0gZmxleGlibGVDb21wYXJlO1xuXG5cbmZ1bmN0aW9uIHBhcnNlRmllbGRTcGVjcyhpbnB1dCkge1xuXHR2YXIgc3BlY3MgPSBbXTtcblx0dmFyIHRva2VucyA9IFtdO1xuXHR2YXIgaSwgdG9rZW47XG5cblx0aWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycpIHtcblx0XHR0b2tlbnMgPSBpbnB1dC5zcGxpdCgvXFxzKixcXHMqLyk7XG5cdH1cblx0ZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0dG9rZW5zID0gWyBpbnB1dCBdO1xuXHR9XG5cdGVsc2UgaWYgKCQuaXNBcnJheShpbnB1dCkpIHtcblx0XHR0b2tlbnMgPSBpbnB1dDtcblx0fVxuXG5cdGZvciAoaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcblx0XHR0b2tlbiA9IHRva2Vuc1tpXTtcblxuXHRcdGlmICh0eXBlb2YgdG9rZW4gPT09ICdzdHJpbmcnKSB7XG5cdFx0XHRzcGVjcy5wdXNoKFxuXHRcdFx0XHR0b2tlbi5jaGFyQXQoMCkgPT0gJy0nID9cblx0XHRcdFx0XHR7IGZpZWxkOiB0b2tlbi5zdWJzdHJpbmcoMSksIG9yZGVyOiAtMSB9IDpcblx0XHRcdFx0XHR7IGZpZWxkOiB0b2tlbiwgb3JkZXI6IDEgfVxuXHRcdFx0KTtcblx0XHR9XG5cdFx0ZWxzZSBpZiAodHlwZW9mIHRva2VuID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRzcGVjcy5wdXNoKHsgZnVuYzogdG9rZW4gfSk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHNwZWNzO1xufVxuXG5cbmZ1bmN0aW9uIGNvbXBhcmVCeUZpZWxkU3BlY3Mob2JqMSwgb2JqMiwgZmllbGRTcGVjcykge1xuXHR2YXIgaTtcblx0dmFyIGNtcDtcblxuXHRmb3IgKGkgPSAwOyBpIDwgZmllbGRTcGVjcy5sZW5ndGg7IGkrKykge1xuXHRcdGNtcCA9IGNvbXBhcmVCeUZpZWxkU3BlYyhvYmoxLCBvYmoyLCBmaWVsZFNwZWNzW2ldKTtcblx0XHRpZiAoY21wKSB7XG5cdFx0XHRyZXR1cm4gY21wO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiAwO1xufVxuXG5cbmZ1bmN0aW9uIGNvbXBhcmVCeUZpZWxkU3BlYyhvYmoxLCBvYmoyLCBmaWVsZFNwZWMpIHtcblx0aWYgKGZpZWxkU3BlYy5mdW5jKSB7XG5cdFx0cmV0dXJuIGZpZWxkU3BlYy5mdW5jKG9iajEsIG9iajIpO1xuXHR9XG5cdHJldHVybiBmbGV4aWJsZUNvbXBhcmUob2JqMVtmaWVsZFNwZWMuZmllbGRdLCBvYmoyW2ZpZWxkU3BlYy5maWVsZF0pICpcblx0XHQoZmllbGRTcGVjLm9yZGVyIHx8IDEpO1xufVxuXG5cbmZ1bmN0aW9uIGZsZXhpYmxlQ29tcGFyZShhLCBiKSB7XG5cdGlmICghYSAmJiAhYikge1xuXHRcdHJldHVybiAwO1xuXHR9XG5cdGlmIChiID09IG51bGwpIHtcblx0XHRyZXR1cm4gLTE7XG5cdH1cblx0aWYgKGEgPT0gbnVsbCkge1xuXHRcdHJldHVybiAxO1xuXHR9XG5cdGlmICgkLnR5cGUoYSkgPT09ICdzdHJpbmcnIHx8ICQudHlwZShiKSA9PT0gJ3N0cmluZycpIHtcblx0XHRyZXR1cm4gU3RyaW5nKGEpLmxvY2FsZUNvbXBhcmUoU3RyaW5nKGIpKTtcblx0fVxuXHRyZXR1cm4gYSAtIGI7XG59XG5cblxuLyogRnVsbENhbGVuZGFyLXNwZWNpZmljIE1pc2MgVXRpbGl0aWVzXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG4vLyBDb21wdXRlcyB0aGUgaW50ZXJzZWN0aW9uIG9mIHRoZSB0d28gcmFuZ2VzLiBXaWxsIHJldHVybiBmcmVzaCBkYXRlIGNsb25lcyBpbiBhIHJhbmdlLlxuLy8gUmV0dXJucyB1bmRlZmluZWQgaWYgbm8gaW50ZXJzZWN0aW9uLlxuLy8gRXhwZWN0cyBhbGwgZGF0ZXMgdG8gYmUgbm9ybWFsaXplZCB0byB0aGUgc2FtZSB0aW1lem9uZSBiZWZvcmVoYW5kLlxuLy8gVE9ETzogbW92ZSB0byBkYXRlIHNlY3Rpb24/XG5mdW5jdGlvbiBpbnRlcnNlY3RSYW5nZXMoc3ViamVjdFJhbmdlLCBjb25zdHJhaW50UmFuZ2UpIHtcblx0dmFyIHN1YmplY3RTdGFydCA9IHN1YmplY3RSYW5nZS5zdGFydDtcblx0dmFyIHN1YmplY3RFbmQgPSBzdWJqZWN0UmFuZ2UuZW5kO1xuXHR2YXIgY29uc3RyYWludFN0YXJ0ID0gY29uc3RyYWludFJhbmdlLnN0YXJ0O1xuXHR2YXIgY29uc3RyYWludEVuZCA9IGNvbnN0cmFpbnRSYW5nZS5lbmQ7XG5cdHZhciBzZWdTdGFydCwgc2VnRW5kO1xuXHR2YXIgaXNTdGFydCwgaXNFbmQ7XG5cblx0aWYgKHN1YmplY3RFbmQgPiBjb25zdHJhaW50U3RhcnQgJiYgc3ViamVjdFN0YXJ0IDwgY29uc3RyYWludEVuZCkgeyAvLyBpbiBib3VuZHMgYXQgYWxsP1xuXG5cdFx0aWYgKHN1YmplY3RTdGFydCA+PSBjb25zdHJhaW50U3RhcnQpIHtcblx0XHRcdHNlZ1N0YXJ0ID0gc3ViamVjdFN0YXJ0LmNsb25lKCk7XG5cdFx0XHRpc1N0YXJ0ID0gdHJ1ZTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRzZWdTdGFydCA9IGNvbnN0cmFpbnRTdGFydC5jbG9uZSgpO1xuXHRcdFx0aXNTdGFydCA9ICBmYWxzZTtcblx0XHR9XG5cblx0XHRpZiAoc3ViamVjdEVuZCA8PSBjb25zdHJhaW50RW5kKSB7XG5cdFx0XHRzZWdFbmQgPSBzdWJqZWN0RW5kLmNsb25lKCk7XG5cdFx0XHRpc0VuZCA9IHRydWU7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0c2VnRW5kID0gY29uc3RyYWludEVuZC5jbG9uZSgpO1xuXHRcdFx0aXNFbmQgPSBmYWxzZTtcblx0XHR9XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0c3RhcnQ6IHNlZ1N0YXJ0LFxuXHRcdFx0ZW5kOiBzZWdFbmQsXG5cdFx0XHRpc1N0YXJ0OiBpc1N0YXJ0LFxuXHRcdFx0aXNFbmQ6IGlzRW5kXG5cdFx0fTtcblx0fVxufVxuXG5cbi8qIERhdGUgVXRpbGl0aWVzXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuRkMuY29tcHV0ZUludGVydmFsVW5pdCA9IGNvbXB1dGVJbnRlcnZhbFVuaXQ7XG5GQy5kaXZpZGVSYW5nZUJ5RHVyYXRpb24gPSBkaXZpZGVSYW5nZUJ5RHVyYXRpb247XG5GQy5kaXZpZGVEdXJhdGlvbkJ5RHVyYXRpb24gPSBkaXZpZGVEdXJhdGlvbkJ5RHVyYXRpb247XG5GQy5tdWx0aXBseUR1cmF0aW9uID0gbXVsdGlwbHlEdXJhdGlvbjtcbkZDLmR1cmF0aW9uSGFzVGltZSA9IGR1cmF0aW9uSGFzVGltZTtcblxudmFyIGRheUlEcyA9IFsgJ3N1bicsICdtb24nLCAndHVlJywgJ3dlZCcsICd0aHUnLCAnZnJpJywgJ3NhdCcgXTtcbnZhciBpbnRlcnZhbFVuaXRzID0gWyAneWVhcicsICdtb250aCcsICd3ZWVrJywgJ2RheScsICdob3VyJywgJ21pbnV0ZScsICdzZWNvbmQnLCAnbWlsbGlzZWNvbmQnIF07XG5cblxuLy8gRGlmZnMgdGhlIHR3byBtb21lbnRzIGludG8gYSBEdXJhdGlvbiB3aGVyZSBmdWxsLWRheXMgYXJlIHJlY29yZGVkIGZpcnN0LCB0aGVuIHRoZSByZW1haW5pbmcgdGltZS5cbi8vIE1vbWVudHMgd2lsbCBoYXZlIHRoZWlyIHRpbWV6b25lcyBub3JtYWxpemVkLlxuZnVuY3Rpb24gZGlmZkRheVRpbWUoYSwgYikge1xuXHRyZXR1cm4gbW9tZW50LmR1cmF0aW9uKHtcblx0XHRkYXlzOiBhLmNsb25lKCkuc3RyaXBUaW1lKCkuZGlmZihiLmNsb25lKCkuc3RyaXBUaW1lKCksICdkYXlzJyksXG5cdFx0bXM6IGEudGltZSgpIC0gYi50aW1lKCkgLy8gdGltZS1vZi1kYXkgZnJvbSBkYXkgc3RhcnQuIGRpc3JlZ2FyZHMgdGltZXpvbmVcblx0fSk7XG59XG5cblxuLy8gRGlmZnMgdGhlIHR3byBtb21lbnRzIHZpYSB0aGVpciBzdGFydC1vZi1kYXkgKHJlZ2FyZGxlc3Mgb2YgdGltZXpvbmUpLiBQcm9kdWNlcyB3aG9sZS1kYXkgZHVyYXRpb25zLlxuZnVuY3Rpb24gZGlmZkRheShhLCBiKSB7XG5cdHJldHVybiBtb21lbnQuZHVyYXRpb24oe1xuXHRcdGRheXM6IGEuY2xvbmUoKS5zdHJpcFRpbWUoKS5kaWZmKGIuY2xvbmUoKS5zdHJpcFRpbWUoKSwgJ2RheXMnKVxuXHR9KTtcbn1cblxuXG4vLyBEaWZmcyB0d28gbW9tZW50cywgcHJvZHVjaW5nIGEgZHVyYXRpb24sIG1hZGUgb2YgYSB3aG9sZS11bml0LWluY3JlbWVudCBvZiB0aGUgZ2l2ZW4gdW5pdC4gVXNlcyByb3VuZGluZy5cbmZ1bmN0aW9uIGRpZmZCeVVuaXQoYSwgYiwgdW5pdCkge1xuXHRyZXR1cm4gbW9tZW50LmR1cmF0aW9uKFxuXHRcdE1hdGgucm91bmQoYS5kaWZmKGIsIHVuaXQsIHRydWUpKSwgLy8gcmV0dXJuRmxvYXQ9dHJ1ZVxuXHRcdHVuaXRcblx0KTtcbn1cblxuXG4vLyBDb21wdXRlcyB0aGUgdW5pdCBuYW1lIG9mIHRoZSBsYXJnZXN0IHdob2xlLXVuaXQgcGVyaW9kIG9mIHRpbWUuXG4vLyBGb3IgZXhhbXBsZSwgNDggaG91cnMgd2lsbCBiZSBcImRheXNcIiB3aGVyZWFzIDQ5IGhvdXJzIHdpbGwgYmUgXCJob3Vyc1wiLlxuLy8gQWNjZXB0cyBzdGFydC9lbmQsIGEgcmFuZ2Ugb2JqZWN0LCBvciBhbiBvcmlnaW5hbCBkdXJhdGlvbiBvYmplY3QuXG5mdW5jdGlvbiBjb21wdXRlSW50ZXJ2YWxVbml0KHN0YXJ0LCBlbmQpIHtcblx0dmFyIGksIHVuaXQ7XG5cdHZhciB2YWw7XG5cblx0Zm9yIChpID0gMDsgaSA8IGludGVydmFsVW5pdHMubGVuZ3RoOyBpKyspIHtcblx0XHR1bml0ID0gaW50ZXJ2YWxVbml0c1tpXTtcblx0XHR2YWwgPSBjb21wdXRlUmFuZ2VBcyh1bml0LCBzdGFydCwgZW5kKTtcblxuXHRcdGlmICh2YWwgPj0gMSAmJiBpc0ludCh2YWwpKSB7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gdW5pdDsgLy8gd2lsbCBiZSBcIm1pbGxpc2Vjb25kc1wiIGlmIG5vdGhpbmcgZWxzZSBtYXRjaGVzXG59XG5cblxuLy8gQ29tcHV0ZXMgdGhlIG51bWJlciBvZiB1bml0cyAobGlrZSBcImhvdXJzXCIpIGluIHRoZSBnaXZlbiByYW5nZS5cbi8vIFJhbmdlIGNhbiBiZSBhIHtzdGFydCxlbmR9IG9iamVjdCwgc2VwYXJhdGUgc3RhcnQvZW5kIGFyZ3MsIG9yIGEgRHVyYXRpb24uXG4vLyBSZXN1bHRzIGFyZSBiYXNlZCBvbiBNb21lbnQncyAuYXMoKSBhbmQgLmRpZmYoKSBtZXRob2RzLCBzbyByZXN1bHRzIGNhbiBkZXBlbmQgb24gaW50ZXJuYWwgaGFuZGxpbmdcbi8vIG9mIG1vbnRoLWRpZmZpbmcgbG9naWMgKHdoaWNoIHRlbmRzIHRvIHZhcnkgZnJvbSB2ZXJzaW9uIHRvIHZlcnNpb24pLlxuZnVuY3Rpb24gY29tcHV0ZVJhbmdlQXModW5pdCwgc3RhcnQsIGVuZCkge1xuXG5cdGlmIChlbmQgIT0gbnVsbCkgeyAvLyBnaXZlbiBzdGFydCwgZW5kXG5cdFx0cmV0dXJuIGVuZC5kaWZmKHN0YXJ0LCB1bml0LCB0cnVlKTtcblx0fVxuXHRlbHNlIGlmIChtb21lbnQuaXNEdXJhdGlvbihzdGFydCkpIHsgLy8gZ2l2ZW4gZHVyYXRpb25cblx0XHRyZXR1cm4gc3RhcnQuYXModW5pdCk7XG5cdH1cblx0ZWxzZSB7IC8vIGdpdmVuIHsgc3RhcnQsIGVuZCB9IHJhbmdlIG9iamVjdFxuXHRcdHJldHVybiBzdGFydC5lbmQuZGlmZihzdGFydC5zdGFydCwgdW5pdCwgdHJ1ZSk7XG5cdH1cbn1cblxuXG4vLyBJbnRlbGxpZ2VudGx5IGRpdmlkZXMgYSByYW5nZSAoc3BlY2lmaWVkIGJ5IGEgc3RhcnQvZW5kIHBhcmFtcykgYnkgYSBkdXJhdGlvblxuZnVuY3Rpb24gZGl2aWRlUmFuZ2VCeUR1cmF0aW9uKHN0YXJ0LCBlbmQsIGR1cikge1xuXHR2YXIgbW9udGhzO1xuXG5cdGlmIChkdXJhdGlvbkhhc1RpbWUoZHVyKSkge1xuXHRcdHJldHVybiAoZW5kIC0gc3RhcnQpIC8gZHVyO1xuXHR9XG5cdG1vbnRocyA9IGR1ci5hc01vbnRocygpO1xuXHRpZiAoTWF0aC5hYnMobW9udGhzKSA+PSAxICYmIGlzSW50KG1vbnRocykpIHtcblx0XHRyZXR1cm4gZW5kLmRpZmYoc3RhcnQsICdtb250aHMnLCB0cnVlKSAvIG1vbnRocztcblx0fVxuXHRyZXR1cm4gZW5kLmRpZmYoc3RhcnQsICdkYXlzJywgdHJ1ZSkgLyBkdXIuYXNEYXlzKCk7XG59XG5cblxuLy8gSW50ZWxsaWdlbnRseSBkaXZpZGVzIG9uZSBkdXJhdGlvbiBieSBhbm90aGVyXG5mdW5jdGlvbiBkaXZpZGVEdXJhdGlvbkJ5RHVyYXRpb24oZHVyMSwgZHVyMikge1xuXHR2YXIgbW9udGhzMSwgbW9udGhzMjtcblxuXHRpZiAoZHVyYXRpb25IYXNUaW1lKGR1cjEpIHx8IGR1cmF0aW9uSGFzVGltZShkdXIyKSkge1xuXHRcdHJldHVybiBkdXIxIC8gZHVyMjtcblx0fVxuXHRtb250aHMxID0gZHVyMS5hc01vbnRocygpO1xuXHRtb250aHMyID0gZHVyMi5hc01vbnRocygpO1xuXHRpZiAoXG5cdFx0TWF0aC5hYnMobW9udGhzMSkgPj0gMSAmJiBpc0ludChtb250aHMxKSAmJlxuXHRcdE1hdGguYWJzKG1vbnRoczIpID49IDEgJiYgaXNJbnQobW9udGhzMilcblx0KSB7XG5cdFx0cmV0dXJuIG1vbnRoczEgLyBtb250aHMyO1xuXHR9XG5cdHJldHVybiBkdXIxLmFzRGF5cygpIC8gZHVyMi5hc0RheXMoKTtcbn1cblxuXG4vLyBJbnRlbGxpZ2VudGx5IG11bHRpcGxpZXMgYSBkdXJhdGlvbiBieSBhIG51bWJlclxuZnVuY3Rpb24gbXVsdGlwbHlEdXJhdGlvbihkdXIsIG4pIHtcblx0dmFyIG1vbnRocztcblxuXHRpZiAoZHVyYXRpb25IYXNUaW1lKGR1cikpIHtcblx0XHRyZXR1cm4gbW9tZW50LmR1cmF0aW9uKGR1ciAqIG4pO1xuXHR9XG5cdG1vbnRocyA9IGR1ci5hc01vbnRocygpO1xuXHRpZiAoTWF0aC5hYnMobW9udGhzKSA+PSAxICYmIGlzSW50KG1vbnRocykpIHtcblx0XHRyZXR1cm4gbW9tZW50LmR1cmF0aW9uKHsgbW9udGhzOiBtb250aHMgKiBuIH0pO1xuXHR9XG5cdHJldHVybiBtb21lbnQuZHVyYXRpb24oeyBkYXlzOiBkdXIuYXNEYXlzKCkgKiBuIH0pO1xufVxuXG5cbi8vIFJldHVybnMgYSBib29sZWFuIGFib3V0IHdoZXRoZXIgdGhlIGdpdmVuIGR1cmF0aW9uIGhhcyBhbnkgdGltZSBwYXJ0cyAoaG91cnMvbWludXRlcy9zZWNvbmRzL21zKVxuZnVuY3Rpb24gZHVyYXRpb25IYXNUaW1lKGR1cikge1xuXHRyZXR1cm4gQm9vbGVhbihkdXIuaG91cnMoKSB8fCBkdXIubWludXRlcygpIHx8IGR1ci5zZWNvbmRzKCkgfHwgZHVyLm1pbGxpc2Vjb25kcygpKTtcbn1cblxuXG5mdW5jdGlvbiBpc05hdGl2ZURhdGUoaW5wdXQpIHtcblx0cmV0dXJuICBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaW5wdXQpID09PSAnW29iamVjdCBEYXRlXScgfHwgaW5wdXQgaW5zdGFuY2VvZiBEYXRlO1xufVxuXG5cbi8vIFJldHVybnMgYSBib29sZWFuIGFib3V0IHdoZXRoZXIgdGhlIGdpdmVuIGlucHV0IGlzIGEgdGltZSBzdHJpbmcsIGxpa2UgXCIwNjo0MDowMFwiIG9yIFwiMDY6MDBcIlxuZnVuY3Rpb24gaXNUaW1lU3RyaW5nKHN0cikge1xuXHRyZXR1cm4gL15cXGQrXFw6XFxkKyg/OlxcOlxcZCtcXC4/KD86XFxkezN9KT8pPyQvLnRlc3Qoc3RyKTtcbn1cblxuXG4vKiBMb2dnaW5nIGFuZCBEZWJ1Z1xuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbkZDLmxvZyA9IGZ1bmN0aW9uKCkge1xuXHR2YXIgY29uc29sZSA9IHdpbmRvdy5jb25zb2xlO1xuXG5cdGlmIChjb25zb2xlICYmIGNvbnNvbGUubG9nKSB7XG5cdFx0cmV0dXJuIGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG5cdH1cbn07XG5cbkZDLndhcm4gPSBmdW5jdGlvbigpIHtcblx0dmFyIGNvbnNvbGUgPSB3aW5kb3cuY29uc29sZTtcblxuXHRpZiAoY29uc29sZSAmJiBjb25zb2xlLndhcm4pIHtcblx0XHRyZXR1cm4gY29uc29sZS53YXJuLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG5cdH1cblx0ZWxzZSB7XG5cdFx0cmV0dXJuIEZDLmxvZy5hcHBseShGQywgYXJndW1lbnRzKTtcblx0fVxufTtcblxuXG4vKiBHZW5lcmFsIFV0aWxpdGllc1xuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbnZhciBoYXNPd25Qcm9wTWV0aG9kID0ge30uaGFzT3duUHJvcGVydHk7XG5cblxuLy8gTWVyZ2VzIGFuIGFycmF5IG9mIG9iamVjdHMgaW50byBhIHNpbmdsZSBvYmplY3QuXG4vLyBUaGUgc2Vjb25kIGFyZ3VtZW50IGFsbG93cyBmb3IgYW4gYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMgd2hvJ3Mgb2JqZWN0IHZhbHVlcyB3aWxsIGJlIG1lcmdlZCB0b2dldGhlci5cbmZ1bmN0aW9uIG1lcmdlUHJvcHMocHJvcE9ianMsIGNvbXBsZXhQcm9wcykge1xuXHR2YXIgZGVzdCA9IHt9O1xuXHR2YXIgaSwgbmFtZTtcblx0dmFyIGNvbXBsZXhPYmpzO1xuXHR2YXIgaiwgdmFsO1xuXHR2YXIgcHJvcHM7XG5cblx0aWYgKGNvbXBsZXhQcm9wcykge1xuXHRcdGZvciAoaSA9IDA7IGkgPCBjb21wbGV4UHJvcHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdG5hbWUgPSBjb21wbGV4UHJvcHNbaV07XG5cdFx0XHRjb21wbGV4T2JqcyA9IFtdO1xuXG5cdFx0XHQvLyBjb2xsZWN0IHRoZSB0cmFpbGluZyBvYmplY3QgdmFsdWVzLCBzdG9wcGluZyB3aGVuIGEgbm9uLW9iamVjdCBpcyBkaXNjb3ZlcmVkXG5cdFx0XHRmb3IgKGogPSBwcm9wT2Jqcy5sZW5ndGggLSAxOyBqID49IDA7IGotLSkge1xuXHRcdFx0XHR2YWwgPSBwcm9wT2Jqc1tqXVtuYW1lXTtcblxuXHRcdFx0XHRpZiAodHlwZW9mIHZhbCA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0XHRjb21wbGV4T2Jqcy51bnNoaWZ0KHZhbCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSBpZiAodmFsICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRkZXN0W25hbWVdID0gdmFsOyAvLyBpZiB0aGVyZSB3ZXJlIG5vIG9iamVjdHMsIHRoaXMgdmFsdWUgd2lsbCBiZSB1c2VkXG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gaWYgdGhlIHRyYWlsaW5nIHZhbHVlcyB3ZXJlIG9iamVjdHMsIHVzZSB0aGUgbWVyZ2VkIHZhbHVlXG5cdFx0XHRpZiAoY29tcGxleE9ianMubGVuZ3RoKSB7XG5cdFx0XHRcdGRlc3RbbmFtZV0gPSBtZXJnZVByb3BzKGNvbXBsZXhPYmpzKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBjb3B5IHZhbHVlcyBpbnRvIHRoZSBkZXN0aW5hdGlvbiwgZ29pbmcgZnJvbSBsYXN0IHRvIGZpcnN0XG5cdGZvciAoaSA9IHByb3BPYmpzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0cHJvcHMgPSBwcm9wT2Jqc1tpXTtcblxuXHRcdGZvciAobmFtZSBpbiBwcm9wcykge1xuXHRcdFx0aWYgKCEobmFtZSBpbiBkZXN0KSkgeyAvLyBpZiBhbHJlYWR5IGFzc2lnbmVkIGJ5IHByZXZpb3VzIHByb3BzIG9yIGNvbXBsZXggcHJvcHMsIGRvbid0IHJlYXNzaWduXG5cdFx0XHRcdGRlc3RbbmFtZV0gPSBwcm9wc1tuYW1lXTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gZGVzdDtcbn1cblxuXG4vLyBDcmVhdGUgYW4gb2JqZWN0IHRoYXQgaGFzIHRoZSBnaXZlbiBwcm90b3R5cGUuIEp1c3QgbGlrZSBPYmplY3QuY3JlYXRlXG5mdW5jdGlvbiBjcmVhdGVPYmplY3QocHJvdG8pIHtcblx0dmFyIGYgPSBmdW5jdGlvbigpIHt9O1xuXHRmLnByb3RvdHlwZSA9IHByb3RvO1xuXHRyZXR1cm4gbmV3IGYoKTtcbn1cbkZDLmNyZWF0ZU9iamVjdCA9IGNyZWF0ZU9iamVjdDtcblxuXG5mdW5jdGlvbiBjb3B5T3duUHJvcHMoc3JjLCBkZXN0KSB7XG5cdGZvciAodmFyIG5hbWUgaW4gc3JjKSB7XG5cdFx0aWYgKGhhc093blByb3Aoc3JjLCBuYW1lKSkge1xuXHRcdFx0ZGVzdFtuYW1lXSA9IHNyY1tuYW1lXTtcblx0XHR9XG5cdH1cbn1cblxuXG5mdW5jdGlvbiBoYXNPd25Qcm9wKG9iaiwgbmFtZSkge1xuXHRyZXR1cm4gaGFzT3duUHJvcE1ldGhvZC5jYWxsKG9iaiwgbmFtZSk7XG59XG5cblxuLy8gSXMgdGhlIGdpdmVuIHZhbHVlIGEgbm9uLW9iamVjdCBub24tZnVuY3Rpb24gdmFsdWU/XG5mdW5jdGlvbiBpc0F0b21pYyh2YWwpIHtcblx0cmV0dXJuIC91bmRlZmluZWR8bnVsbHxib29sZWFufG51bWJlcnxzdHJpbmcvLnRlc3QoJC50eXBlKHZhbCkpO1xufVxuXG5cbmZ1bmN0aW9uIGFwcGx5QWxsKGZ1bmN0aW9ucywgdGhpc09iaiwgYXJncykge1xuXHRpZiAoJC5pc0Z1bmN0aW9uKGZ1bmN0aW9ucykpIHtcblx0XHRmdW5jdGlvbnMgPSBbIGZ1bmN0aW9ucyBdO1xuXHR9XG5cdGlmIChmdW5jdGlvbnMpIHtcblx0XHR2YXIgaTtcblx0XHR2YXIgcmV0O1xuXHRcdGZvciAoaT0wOyBpPGZ1bmN0aW9ucy5sZW5ndGg7IGkrKykge1xuXHRcdFx0cmV0ID0gZnVuY3Rpb25zW2ldLmFwcGx5KHRoaXNPYmosIGFyZ3MpIHx8IHJldDtcblx0XHR9XG5cdFx0cmV0dXJuIHJldDtcblx0fVxufVxuXG5cbmZ1bmN0aW9uIGZpcnN0RGVmaW5lZCgpIHtcblx0Zm9yICh2YXIgaT0wOyBpPGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdGlmIChhcmd1bWVudHNbaV0gIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0cmV0dXJuIGFyZ3VtZW50c1tpXTtcblx0XHR9XG5cdH1cbn1cblxuXG5mdW5jdGlvbiBodG1sRXNjYXBlKHMpIHtcblx0cmV0dXJuIChzICsgJycpLnJlcGxhY2UoLyYvZywgJyZhbXA7Jylcblx0XHQucmVwbGFjZSgvPC9nLCAnJmx0OycpXG5cdFx0LnJlcGxhY2UoLz4vZywgJyZndDsnKVxuXHRcdC5yZXBsYWNlKC8nL2csICcmIzAzOTsnKVxuXHRcdC5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7Jylcblx0XHQucmVwbGFjZSgvXFxuL2csICc8YnIgLz4nKTtcbn1cblxuXG5mdW5jdGlvbiBzdHJpcEh0bWxFbnRpdGllcyh0ZXh0KSB7XG5cdHJldHVybiB0ZXh0LnJlcGxhY2UoLyYuKj87L2csICcnKTtcbn1cblxuXG4vLyBHaXZlbiBhIGhhc2ggb2YgQ1NTIHByb3BlcnRpZXMsIHJldHVybnMgYSBzdHJpbmcgb2YgQ1NTLlxuLy8gVXNlcyBwcm9wZXJ0eSBuYW1lcyBhcy1pcyAobm8gY2FtZWwtY2FzZSBjb252ZXJzaW9uKS4gV2lsbCBub3QgbWFrZSBzdGF0ZW1lbnRzIGZvciBudWxsL3VuZGVmaW5lZCB2YWx1ZXMuXG5mdW5jdGlvbiBjc3NUb1N0cihjc3NQcm9wcykge1xuXHR2YXIgc3RhdGVtZW50cyA9IFtdO1xuXG5cdCQuZWFjaChjc3NQcm9wcywgZnVuY3Rpb24obmFtZSwgdmFsKSB7XG5cdFx0aWYgKHZhbCAhPSBudWxsKSB7XG5cdFx0XHRzdGF0ZW1lbnRzLnB1c2gobmFtZSArICc6JyArIHZhbCk7XG5cdFx0fVxuXHR9KTtcblxuXHRyZXR1cm4gc3RhdGVtZW50cy5qb2luKCc7Jyk7XG59XG5cblxuLy8gR2l2ZW4gYW4gb2JqZWN0IGhhc2ggb2YgSFRNTCBhdHRyaWJ1dGUgbmFtZXMgdG8gdmFsdWVzLFxuLy8gZ2VuZXJhdGVzIGEgc3RyaW5nIHRoYXQgY2FuIGJlIGluamVjdGVkIGJldHdlZW4gPCA+IGluIEhUTUxcbmZ1bmN0aW9uIGF0dHJzVG9TdHIoYXR0cnMpIHtcblx0dmFyIHBhcnRzID0gW107XG5cblx0JC5lYWNoKGF0dHJzLCBmdW5jdGlvbihuYW1lLCB2YWwpIHtcblx0XHRpZiAodmFsICE9IG51bGwpIHtcblx0XHRcdHBhcnRzLnB1c2gobmFtZSArICc9XCInICsgaHRtbEVzY2FwZSh2YWwpICsgJ1wiJyk7XG5cdFx0fVxuXHR9KTtcblxuXHRyZXR1cm4gcGFydHMuam9pbignICcpO1xufVxuXG5cbmZ1bmN0aW9uIGNhcGl0YWxpc2VGaXJzdExldHRlcihzdHIpIHtcblx0cmV0dXJuIHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zbGljZSgxKTtcbn1cblxuXG5mdW5jdGlvbiBjb21wYXJlTnVtYmVycyhhLCBiKSB7IC8vIGZvciAuc29ydCgpXG5cdHJldHVybiBhIC0gYjtcbn1cblxuXG5mdW5jdGlvbiBpc0ludChuKSB7XG5cdHJldHVybiBuICUgMSA9PT0gMDtcbn1cblxuXG4vLyBSZXR1cm5zIGEgbWV0aG9kIGJvdW5kIHRvIHRoZSBnaXZlbiBvYmplY3QgY29udGV4dC5cbi8vIEp1c3QgbGlrZSBvbmUgb2YgdGhlIGpRdWVyeS5wcm94eSBzaWduYXR1cmVzLCBidXQgd2l0aG91dCB0aGUgdW5kZXNpcmVkIGJlaGF2aW9yIG9mIHRyZWF0aW5nIHRoZSBzYW1lIG1ldGhvZCB3aXRoXG4vLyBkaWZmZXJlbnQgY29udGV4dHMgYXMgaWRlbnRpY2FsIHdoZW4gYmluZGluZy91bmJpbmRpbmcgZXZlbnRzLlxuZnVuY3Rpb24gcHJveHkob2JqLCBtZXRob2ROYW1lKSB7XG5cdHZhciBtZXRob2QgPSBvYmpbbWV0aG9kTmFtZV07XG5cblx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBtZXRob2QuYXBwbHkob2JqLCBhcmd1bWVudHMpO1xuXHR9O1xufVxuXG5cbi8vIFJldHVybnMgYSBmdW5jdGlvbiwgdGhhdCwgYXMgbG9uZyBhcyBpdCBjb250aW51ZXMgdG8gYmUgaW52b2tlZCwgd2lsbCBub3Rcbi8vIGJlIHRyaWdnZXJlZC4gVGhlIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGFmdGVyIGl0IHN0b3BzIGJlaW5nIGNhbGxlZCBmb3Jcbi8vIE4gbWlsbGlzZWNvbmRzLiBJZiBgaW1tZWRpYXRlYCBpcyBwYXNzZWQsIHRyaWdnZXIgdGhlIGZ1bmN0aW9uIG9uIHRoZVxuLy8gbGVhZGluZyBlZGdlLCBpbnN0ZWFkIG9mIHRoZSB0cmFpbGluZy5cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qYXNoa2VuYXMvdW5kZXJzY29yZS9ibG9iLzEuNi4wL3VuZGVyc2NvcmUuanMjTDcxNFxuZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgaW1tZWRpYXRlKSB7XG5cdHZhciB0aW1lb3V0LCBhcmdzLCBjb250ZXh0LCB0aW1lc3RhbXAsIHJlc3VsdDtcblxuXHR2YXIgbGF0ZXIgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgbGFzdCA9ICtuZXcgRGF0ZSgpIC0gdGltZXN0YW1wO1xuXHRcdGlmIChsYXN0IDwgd2FpdCkge1xuXHRcdFx0dGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQgLSBsYXN0KTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHR0aW1lb3V0ID0gbnVsbDtcblx0XHRcdGlmICghaW1tZWRpYXRlKSB7XG5cdFx0XHRcdHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG5cdFx0XHRcdGNvbnRleHQgPSBhcmdzID0gbnVsbDtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXHRcdGNvbnRleHQgPSB0aGlzO1xuXHRcdGFyZ3MgPSBhcmd1bWVudHM7XG5cdFx0dGltZXN0YW1wID0gK25ldyBEYXRlKCk7XG5cdFx0dmFyIGNhbGxOb3cgPSBpbW1lZGlhdGUgJiYgIXRpbWVvdXQ7XG5cdFx0aWYgKCF0aW1lb3V0KSB7XG5cdFx0XHR0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7XG5cdFx0fVxuXHRcdGlmIChjYWxsTm93KSB7XG5cdFx0XHRyZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuXHRcdFx0Y29udGV4dCA9IGFyZ3MgPSBudWxsO1xuXHRcdH1cblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9O1xufVxuXG47O1xuXG4vKlxuR0VORVJBTCBOT1RFIG9uIG1vbWVudHMgdGhyb3VnaG91dCB0aGUgKmVudGlyZSByZXN0KiBvZiB0aGUgY29kZWJhc2U6XG5BbGwgbW9tZW50cyBhcmUgYXNzdW1lZCB0byBiZSBhbWJpZ3VvdXNseS16b25lZCB1bmxlc3Mgb3RoZXJ3aXNlIG5vdGVkLFxud2l0aCB0aGUgTk9UQUJMRSBFWENFT1BUSU9OIG9mIHN0YXJ0L2VuZCBkYXRlcyB0aGF0IGxpdmUgb24gKkV2ZW50IE9iamVjdHMqLlxuQW1iaWd1b3VzbHktVElNRUQgbW9tZW50cyBhcmUgYXNzdW1lZCB0byBiZSBhbWJpZ3VvdXNseS16b25lZCBieSBuYXR1cmUuXG4qL1xuXG52YXIgYW1iaWdEYXRlT2ZNb250aFJlZ2V4ID0gL15cXHMqXFxkezR9LVxcZFxcZCQvO1xudmFyIGFtYmlnVGltZU9yWm9uZVJlZ2V4ID1cblx0L15cXHMqXFxkezR9LSg/OihcXGRcXGQtXFxkXFxkKXwoV1xcZFxcZCQpfChXXFxkXFxkLVxcZCl8KFxcZFxcZFxcZCkpKChUfCApKFxcZFxcZCg6XFxkXFxkKDpcXGRcXGQoXFwuXFxkKyk/KT8pPyk/KT8kLztcbnZhciBuZXdNb21lbnRQcm90byA9IG1vbWVudC5mbjsgLy8gd2hlcmUgd2Ugd2lsbCBhdHRhY2ggb3VyIG5ldyBtZXRob2RzXG52YXIgb2xkTW9tZW50UHJvdG8gPSAkLmV4dGVuZCh7fSwgbmV3TW9tZW50UHJvdG8pOyAvLyBjb3B5IG9mIG9yaWdpbmFsIG1vbWVudCBtZXRob2RzXG5cbi8vIHRlbGwgbW9tZW50anMgdG8gdHJhbnNmZXIgdGhlc2UgcHJvcGVydGllcyB1cG9uIGNsb25lXG52YXIgbW9tZW50UHJvcGVydGllcyA9IG1vbWVudC5tb21lbnRQcm9wZXJ0aWVzO1xubW9tZW50UHJvcGVydGllcy5wdXNoKCdfZnVsbENhbGVuZGFyJyk7XG5tb21lbnRQcm9wZXJ0aWVzLnB1c2goJ19hbWJpZ1RpbWUnKTtcbm1vbWVudFByb3BlcnRpZXMucHVzaCgnX2FtYmlnWm9uZScpO1xuXG5cbi8vIENyZWF0aW5nXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8vIENyZWF0ZXMgYSBuZXcgbW9tZW50LCBzaW1pbGFyIHRvIHRoZSB2YW5pbGxhIG1vbWVudCguLi4pIGNvbnN0cnVjdG9yLCBidXQgd2l0aFxuLy8gZXh0cmEgZmVhdHVyZXMgKGFtYmlndW91cyB0aW1lLCBlbmhhbmNlZCBmb3JtYXR0aW5nKS4gV2hlbiBnaXZlbiBhbiBleGlzdGluZyBtb21lbnQsXG4vLyBpdCB3aWxsIGZ1bmN0aW9uIGFzIGEgY2xvbmUgKGFuZCByZXRhaW4gdGhlIHpvbmUgb2YgdGhlIG1vbWVudCkuIEFueXRoaW5nIGVsc2Ugd2lsbFxuLy8gcmVzdWx0IGluIGEgbW9tZW50IGluIHRoZSBsb2NhbCB6b25lLlxuRkMubW9tZW50ID0gZnVuY3Rpb24oKSB7XG5cdHJldHVybiBtYWtlTW9tZW50KGFyZ3VtZW50cyk7XG59O1xuXG4vLyBTYW1lcyBhcyBGQy5tb21lbnQsIGJ1dCBmb3JjZXMgdGhlIHJlc3VsdGluZyBtb21lbnQgdG8gYmUgaW4gdGhlIFVUQyB0aW1lem9uZS5cbkZDLm1vbWVudC51dGMgPSBmdW5jdGlvbigpIHtcblx0dmFyIG1vbSA9IG1ha2VNb21lbnQoYXJndW1lbnRzLCB0cnVlKTtcblxuXHQvLyBGb3JjZSBpdCBpbnRvIFVUQyBiZWNhdXNlIG1ha2VNb21lbnQgZG9lc24ndCBndWFyYW50ZWUgaXRcblx0Ly8gKGlmIGdpdmVuIGEgcHJlLWV4aXN0aW5nIG1vbWVudCBmb3IgZXhhbXBsZSlcblx0aWYgKG1vbS5oYXNUaW1lKCkpIHsgLy8gZG9uJ3QgZ2l2ZSBhbWJpZ3VvdXNseS10aW1lZCBtb21lbnRzIGEgVVRDIHpvbmVcblx0XHRtb20udXRjKCk7XG5cdH1cblxuXHRyZXR1cm4gbW9tO1xufTtcblxuLy8gU2FtZSBhcyBGQy5tb21lbnQsIGJ1dCB3aGVuIGdpdmVuIGFuIElTTzg2MDEgc3RyaW5nLCB0aGUgdGltZXpvbmUgb2Zmc2V0IGlzIHByZXNlcnZlZC5cbi8vIElTTzg2MDEgc3RyaW5ncyB3aXRoIG5vIHRpbWV6b25lIG9mZnNldCB3aWxsIGJlY29tZSBhbWJpZ3VvdXNseSB6b25lZC5cbkZDLm1vbWVudC5wYXJzZVpvbmUgPSBmdW5jdGlvbigpIHtcblx0cmV0dXJuIG1ha2VNb21lbnQoYXJndW1lbnRzLCB0cnVlLCB0cnVlKTtcbn07XG5cbi8vIEJ1aWxkcyBhbiBlbmhhbmNlZCBtb21lbnQgZnJvbSBhcmdzLiBXaGVuIGdpdmVuIGFuIGV4aXN0aW5nIG1vbWVudCwgaXQgY2xvbmVzLiBXaGVuIGdpdmVuIGFcbi8vIG5hdGl2ZSBEYXRlLCBvciBjYWxsZWQgd2l0aCBubyBhcmd1bWVudHMgKHRoZSBjdXJyZW50IHRpbWUpLCB0aGUgcmVzdWx0aW5nIG1vbWVudCB3aWxsIGJlIGxvY2FsLlxuLy8gQW55dGhpbmcgZWxzZSBuZWVkcyB0byBiZSBcInBhcnNlZFwiIChhIHN0cmluZyBvciBhbiBhcnJheSksIGFuZCB3aWxsIGJlIGFmZmVjdGVkIGJ5OlxuLy8gICAgcGFyc2VBc1VUQyAtIGlmIHRoZXJlIGlzIG5vIHpvbmUgaW5mb3JtYXRpb24sIHNob3VsZCB3ZSBwYXJzZSB0aGUgaW5wdXQgaW4gVVRDP1xuLy8gICAgcGFyc2Vab25lIC0gaWYgdGhlcmUgaXMgem9uZSBpbmZvcm1hdGlvbiwgc2hvdWxkIHdlIGZvcmNlIHRoZSB6b25lIG9mIHRoZSBtb21lbnQ/XG5mdW5jdGlvbiBtYWtlTW9tZW50KGFyZ3MsIHBhcnNlQXNVVEMsIHBhcnNlWm9uZSkge1xuXHR2YXIgaW5wdXQgPSBhcmdzWzBdO1xuXHR2YXIgaXNTaW5nbGVTdHJpbmcgPSBhcmdzLmxlbmd0aCA9PSAxICYmIHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZyc7XG5cdHZhciBpc0FtYmlnVGltZTtcblx0dmFyIGlzQW1iaWdab25lO1xuXHR2YXIgYW1iaWdNYXRjaDtcblx0dmFyIG1vbTtcblxuXHRpZiAobW9tZW50LmlzTW9tZW50KGlucHV0KSB8fCBpc05hdGl2ZURhdGUoaW5wdXQpIHx8IGlucHV0ID09PSB1bmRlZmluZWQpIHtcblx0XHRtb20gPSBtb21lbnQuYXBwbHkobnVsbCwgYXJncyk7XG5cdH1cblx0ZWxzZSB7IC8vIFwicGFyc2luZ1wiIGlzIHJlcXVpcmVkXG5cdFx0aXNBbWJpZ1RpbWUgPSBmYWxzZTtcblx0XHRpc0FtYmlnWm9uZSA9IGZhbHNlO1xuXG5cdFx0aWYgKGlzU2luZ2xlU3RyaW5nKSB7XG5cdFx0XHRpZiAoYW1iaWdEYXRlT2ZNb250aFJlZ2V4LnRlc3QoaW5wdXQpKSB7XG5cdFx0XHRcdC8vIGFjY2VwdCBzdHJpbmdzIGxpa2UgJzIwMTQtMDUnLCBidXQgY29udmVydCB0byB0aGUgZmlyc3Qgb2YgdGhlIG1vbnRoXG5cdFx0XHRcdGlucHV0ICs9ICctMDEnO1xuXHRcdFx0XHRhcmdzID0gWyBpbnB1dCBdOyAvLyBmb3Igd2hlbiB3ZSBwYXNzIGl0IG9uIHRvIG1vbWVudCdzIGNvbnN0cnVjdG9yXG5cdFx0XHRcdGlzQW1iaWdUaW1lID0gdHJ1ZTtcblx0XHRcdFx0aXNBbWJpZ1pvbmUgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAoKGFtYmlnTWF0Y2ggPSBhbWJpZ1RpbWVPclpvbmVSZWdleC5leGVjKGlucHV0KSkpIHtcblx0XHRcdFx0aXNBbWJpZ1RpbWUgPSAhYW1iaWdNYXRjaFs1XTsgLy8gbm8gdGltZSBwYXJ0P1xuXHRcdFx0XHRpc0FtYmlnWm9uZSA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVsc2UgaWYgKCQuaXNBcnJheShpbnB1dCkpIHtcblx0XHRcdC8vIGFycmF5cyBoYXZlIG5vIHRpbWV6b25lIGluZm9ybWF0aW9uLCBzbyBhc3N1bWUgYW1iaWd1b3VzIHpvbmVcblx0XHRcdGlzQW1iaWdab25lID0gdHJ1ZTtcblx0XHR9XG5cdFx0Ly8gb3RoZXJ3aXNlLCBwcm9iYWJseSBhIHN0cmluZyB3aXRoIGEgZm9ybWF0XG5cblx0XHRpZiAocGFyc2VBc1VUQyB8fCBpc0FtYmlnVGltZSkge1xuXHRcdFx0bW9tID0gbW9tZW50LnV0Yy5hcHBseShtb21lbnQsIGFyZ3MpO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdG1vbSA9IG1vbWVudC5hcHBseShudWxsLCBhcmdzKTtcblx0XHR9XG5cblx0XHRpZiAoaXNBbWJpZ1RpbWUpIHtcblx0XHRcdG1vbS5fYW1iaWdUaW1lID0gdHJ1ZTtcblx0XHRcdG1vbS5fYW1iaWdab25lID0gdHJ1ZTsgLy8gYW1iaWd1b3VzIHRpbWUgYWx3YXlzIG1lYW5zIGFtYmlndW91cyB6b25lXG5cdFx0fVxuXHRcdGVsc2UgaWYgKHBhcnNlWm9uZSkgeyAvLyBsZXQncyByZWNvcmQgdGhlIGlucHV0dGVkIHpvbmUgc29tZWhvd1xuXHRcdFx0aWYgKGlzQW1iaWdab25lKSB7XG5cdFx0XHRcdG1vbS5fYW1iaWdab25lID0gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKGlzU2luZ2xlU3RyaW5nKSB7XG5cdFx0XHRcdG1vbS51dGNPZmZzZXQoaW5wdXQpOyAvLyBpZiBub3QgYSB2YWxpZCB6b25lLCB3aWxsIGFzc2lnbiBVVENcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRtb20uX2Z1bGxDYWxlbmRhciA9IHRydWU7IC8vIGZsYWcgZm9yIGV4dGVuZGVkIGZ1bmN0aW9uYWxpdHlcblxuXHRyZXR1cm4gbW9tO1xufVxuXG5cbi8vIFdlZWsgTnVtYmVyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuLy8gUmV0dXJucyB0aGUgd2VlayBudW1iZXIsIGNvbnNpZGVyaW5nIHRoZSBsb2NhbGUncyBjdXN0b20gd2VlayBudW1iZXIgY2FsY3VhdGlvblxuLy8gYHdlZWtzYCBpcyBhbiBhbGlhcyBmb3IgYHdlZWtgXG5uZXdNb21lbnRQcm90by53ZWVrID0gbmV3TW9tZW50UHJvdG8ud2Vla3MgPSBmdW5jdGlvbihpbnB1dCkge1xuXHR2YXIgd2Vla0NhbGMgPSB0aGlzLl9sb2NhbGUuX2Z1bGxDYWxlbmRhcl93ZWVrQ2FsYztcblxuXHRpZiAoaW5wdXQgPT0gbnVsbCAmJiB0eXBlb2Ygd2Vla0NhbGMgPT09ICdmdW5jdGlvbicpIHsgLy8gY3VzdG9tIGZ1bmN0aW9uIG9ubHkgd29ya3MgZm9yIGdldHRlclxuXHRcdHJldHVybiB3ZWVrQ2FsYyh0aGlzKTtcblx0fVxuXHRlbHNlIGlmICh3ZWVrQ2FsYyA9PT0gJ0lTTycpIHtcblx0XHRyZXR1cm4gb2xkTW9tZW50UHJvdG8uaXNvV2Vlay5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyAvLyBJU08gZ2V0dGVyL3NldHRlclxuXHR9XG5cblx0cmV0dXJuIG9sZE1vbWVudFByb3RvLndlZWsuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgLy8gbG9jYWwgZ2V0dGVyL3NldHRlclxufTtcblxuXG4vLyBUaW1lLW9mLWRheVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vLyBHRVRURVJcbi8vIFJldHVybnMgYSBEdXJhdGlvbiB3aXRoIHRoZSBob3Vycy9taW51dGVzL3NlY29uZHMvbXMgdmFsdWVzIG9mIHRoZSBtb21lbnQuXG4vLyBJZiB0aGUgbW9tZW50IGhhcyBhbiBhbWJpZ3VvdXMgdGltZSwgYSBkdXJhdGlvbiBvZiAwMDowMCB3aWxsIGJlIHJldHVybmVkLlxuLy9cbi8vIFNFVFRFUlxuLy8gWW91IGNhbiBzdXBwbHkgYSBEdXJhdGlvbiwgYSBNb21lbnQsIG9yIGEgRHVyYXRpb24tbGlrZSBhcmd1bWVudC5cbi8vIFdoZW4gc2V0dGluZyB0aGUgdGltZSwgYW5kIHRoZSBtb21lbnQgaGFzIGFuIGFtYmlndW91cyB0aW1lLCBpdCB0aGVuIGJlY29tZXMgdW5hbWJpZ3VvdXMuXG5uZXdNb21lbnRQcm90by50aW1lID0gZnVuY3Rpb24odGltZSkge1xuXG5cdC8vIEZhbGxiYWNrIHRvIHRoZSBvcmlnaW5hbCBtZXRob2QgKGlmIHRoZXJlIGlzIG9uZSkgaWYgdGhpcyBtb21lbnQgd2Fzbid0IGNyZWF0ZWQgdmlhIEZ1bGxDYWxlbmRhci5cblx0Ly8gYHRpbWVgIGlzIGEgZ2VuZXJpYyBlbm91Z2ggbWV0aG9kIG5hbWUgd2hlcmUgdGhpcyBwcmVjYXV0aW9uIGlzIG5lY2Vzc2FyeSB0byBhdm9pZCBjb2xsaXNpb25zIHcvIG90aGVyIHBsdWdpbnMuXG5cdGlmICghdGhpcy5fZnVsbENhbGVuZGFyKSB7XG5cdFx0cmV0dXJuIG9sZE1vbWVudFByb3RvLnRpbWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0fVxuXG5cdGlmICh0aW1lID09IG51bGwpIHsgLy8gZ2V0dGVyXG5cdFx0cmV0dXJuIG1vbWVudC5kdXJhdGlvbih7XG5cdFx0XHRob3VyczogdGhpcy5ob3VycygpLFxuXHRcdFx0bWludXRlczogdGhpcy5taW51dGVzKCksXG5cdFx0XHRzZWNvbmRzOiB0aGlzLnNlY29uZHMoKSxcblx0XHRcdG1pbGxpc2Vjb25kczogdGhpcy5taWxsaXNlY29uZHMoKVxuXHRcdH0pO1xuXHR9XG5cdGVsc2UgeyAvLyBzZXR0ZXJcblxuXHRcdHRoaXMuX2FtYmlnVGltZSA9IGZhbHNlOyAvLyBtYXJrIHRoYXQgdGhlIG1vbWVudCBub3cgaGFzIGEgdGltZVxuXG5cdFx0aWYgKCFtb21lbnQuaXNEdXJhdGlvbih0aW1lKSAmJiAhbW9tZW50LmlzTW9tZW50KHRpbWUpKSB7XG5cdFx0XHR0aW1lID0gbW9tZW50LmR1cmF0aW9uKHRpbWUpO1xuXHRcdH1cblxuXHRcdC8vIFRoZSBkYXkgdmFsdWUgc2hvdWxkIGNhdXNlIG92ZXJmbG93IChzbyAyNCBob3VycyBiZWNvbWVzIDAwOjAwOjAwIG9mIG5leHQgZGF5KS5cblx0XHQvLyBPbmx5IGZvciBEdXJhdGlvbiB0aW1lcywgbm90IE1vbWVudCB0aW1lcy5cblx0XHR2YXIgZGF5SG91cnMgPSAwO1xuXHRcdGlmIChtb21lbnQuaXNEdXJhdGlvbih0aW1lKSkge1xuXHRcdFx0ZGF5SG91cnMgPSBNYXRoLmZsb29yKHRpbWUuYXNEYXlzKCkpICogMjQ7XG5cdFx0fVxuXG5cdFx0Ly8gV2UgbmVlZCB0byBzZXQgdGhlIGluZGl2aWR1YWwgZmllbGRzLlxuXHRcdC8vIENhbid0IHVzZSBzdGFydE9mKCdkYXknKSB0aGVuIGFkZCBkdXJhdGlvbi4gSW4gY2FzZSBvZiBEU1QgYXQgc3RhcnQgb2YgZGF5LlxuXHRcdHJldHVybiB0aGlzLmhvdXJzKGRheUhvdXJzICsgdGltZS5ob3VycygpKVxuXHRcdFx0Lm1pbnV0ZXModGltZS5taW51dGVzKCkpXG5cdFx0XHQuc2Vjb25kcyh0aW1lLnNlY29uZHMoKSlcblx0XHRcdC5taWxsaXNlY29uZHModGltZS5taWxsaXNlY29uZHMoKSk7XG5cdH1cbn07XG5cbi8vIENvbnZlcnRzIHRoZSBtb21lbnQgdG8gVVRDLCBzdHJpcHBpbmcgb3V0IGl0cyB0aW1lLW9mLWRheSBhbmQgdGltZXpvbmUgb2Zmc2V0LFxuLy8gYnV0IHByZXNlcnZpbmcgaXRzIFlNRC4gQSBtb21lbnQgd2l0aCBhIHN0cmlwcGVkIHRpbWUgd2lsbCBkaXNwbGF5IG5vIHRpbWVcbi8vIG5vciB0aW1lem9uZSBvZmZzZXQgd2hlbiAuZm9ybWF0KCkgaXMgY2FsbGVkLlxubmV3TW9tZW50UHJvdG8uc3RyaXBUaW1lID0gZnVuY3Rpb24oKSB7XG5cblx0aWYgKCF0aGlzLl9hbWJpZ1RpbWUpIHtcblxuXHRcdHRoaXMudXRjKHRydWUpOyAvLyBrZWVwTG9jYWxUaW1lPXRydWUgKGZvciBrZWVwaW5nICpkYXRlKiB2YWx1ZSlcblxuXHRcdC8vIHNldCB0aW1lIHRvIHplcm9cblx0XHR0aGlzLnNldCh7XG5cdFx0XHRob3VyczogMCxcblx0XHRcdG1pbnV0ZXM6IDAsXG5cdFx0XHRzZWNvbmRzOiAwLFxuXHRcdFx0bXM6IDBcblx0XHR9KTtcblxuXHRcdC8vIE1hcmsgdGhlIHRpbWUgYXMgYW1iaWd1b3VzLiBUaGlzIG5lZWRzIHRvIGhhcHBlbiBhZnRlciB0aGUgLnV0YygpIGNhbGwsIHdoaWNoIG1pZ2h0IGNhbGwgLnV0Y09mZnNldCgpLFxuXHRcdC8vIHdoaWNoIGNsZWFycyBhbGwgYW1iaWcgZmxhZ3MuXG5cdFx0dGhpcy5fYW1iaWdUaW1lID0gdHJ1ZTtcblx0XHR0aGlzLl9hbWJpZ1pvbmUgPSB0cnVlOyAvLyBpZiBhbWJpZ3VvdXMgdGltZSwgYWxzbyBhbWJpZ3VvdXMgdGltZXpvbmUgb2Zmc2V0XG5cdH1cblxuXHRyZXR1cm4gdGhpczsgLy8gZm9yIGNoYWluaW5nXG59O1xuXG4vLyBSZXR1cm5zIGlmIHRoZSBtb21lbnQgaGFzIGEgbm9uLWFtYmlndW91cyB0aW1lIChib29sZWFuKVxubmV3TW9tZW50UHJvdG8uaGFzVGltZSA9IGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gIXRoaXMuX2FtYmlnVGltZTtcbn07XG5cblxuLy8gVGltZXpvbmVcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gQ29udmVydHMgdGhlIG1vbWVudCB0byBVVEMsIHN0cmlwcGluZyBvdXQgaXRzIHRpbWV6b25lIG9mZnNldCwgYnV0IHByZXNlcnZpbmcgaXRzXG4vLyBZTUQgYW5kIHRpbWUtb2YtZGF5LiBBIG1vbWVudCB3aXRoIGEgc3RyaXBwZWQgdGltZXpvbmUgb2Zmc2V0IHdpbGwgZGlzcGxheSBub1xuLy8gdGltZXpvbmUgb2Zmc2V0IHdoZW4gLmZvcm1hdCgpIGlzIGNhbGxlZC5cbm5ld01vbWVudFByb3RvLnN0cmlwWm9uZSA9IGZ1bmN0aW9uKCkge1xuXHR2YXIgd2FzQW1iaWdUaW1lO1xuXG5cdGlmICghdGhpcy5fYW1iaWdab25lKSB7XG5cblx0XHR3YXNBbWJpZ1RpbWUgPSB0aGlzLl9hbWJpZ1RpbWU7XG5cblx0XHR0aGlzLnV0Yyh0cnVlKTsgLy8ga2VlcExvY2FsVGltZT10cnVlIChmb3Iga2VlcGluZyBkYXRlIGFuZCB0aW1lIHZhbHVlcylcblxuXHRcdC8vIHRoZSBhYm92ZSBjYWxsIHRvIC51dGMoKS8udXRjT2Zmc2V0KCkgdW5mb3J0dW5hdGVseSBtaWdodCBjbGVhciB0aGUgYW1iaWcgZmxhZ3MsIHNvIHJlc3RvcmVcblx0XHR0aGlzLl9hbWJpZ1RpbWUgPSB3YXNBbWJpZ1RpbWUgfHwgZmFsc2U7XG5cblx0XHQvLyBNYXJrIHRoZSB6b25lIGFzIGFtYmlndW91cy4gVGhpcyBuZWVkcyB0byBoYXBwZW4gYWZ0ZXIgdGhlIC51dGMoKSBjYWxsLCB3aGljaCBtaWdodCBjYWxsIC51dGNPZmZzZXQoKSxcblx0XHQvLyB3aGljaCBjbGVhcnMgdGhlIGFtYmlnIGZsYWdzLlxuXHRcdHRoaXMuX2FtYmlnWm9uZSA9IHRydWU7XG5cdH1cblxuXHRyZXR1cm4gdGhpczsgLy8gZm9yIGNoYWluaW5nXG59O1xuXG4vLyBSZXR1cm5zIG9mIHRoZSBtb21lbnQgaGFzIGEgbm9uLWFtYmlndW91cyB0aW1lem9uZSBvZmZzZXQgKGJvb2xlYW4pXG5uZXdNb21lbnRQcm90by5oYXNab25lID0gZnVuY3Rpb24oKSB7XG5cdHJldHVybiAhdGhpcy5fYW1iaWdab25lO1xufTtcblxuXG4vLyBpbXBsaWNpdGx5IG1hcmtzIGEgem9uZVxubmV3TW9tZW50UHJvdG8ubG9jYWwgPSBmdW5jdGlvbihrZWVwTG9jYWxUaW1lKSB7XG5cblx0Ly8gZm9yIHdoZW4gY29udmVydGluZyBmcm9tIGFtYmlndW91c2x5LXpvbmVkIHRvIGxvY2FsLFxuXHQvLyBrZWVwIHRoZSB0aW1lIHZhbHVlcyB3aGVuIGNvbnZlcnRpbmcgZnJvbSBVVEMgLT4gbG9jYWxcblx0b2xkTW9tZW50UHJvdG8ubG9jYWwuY2FsbCh0aGlzLCB0aGlzLl9hbWJpZ1pvbmUgfHwga2VlcExvY2FsVGltZSk7XG5cblx0Ly8gZW5zdXJlIG5vbi1hbWJpZ3VvdXNcblx0Ly8gdGhpcyBwcm9iYWJseSBhbHJlYWR5IGhhcHBlbmVkIHZpYSBsb2NhbCgpIC0+IHV0Y09mZnNldCgpLCBidXQgZG9uJ3QgcmVseSBvbiBNb21lbnQncyBpbnRlcm5hbHNcblx0dGhpcy5fYW1iaWdUaW1lID0gZmFsc2U7XG5cdHRoaXMuX2FtYmlnWm9uZSA9IGZhbHNlO1xuXG5cdHJldHVybiB0aGlzOyAvLyBmb3IgY2hhaW5pbmdcbn07XG5cblxuLy8gaW1wbGljaXRseSBtYXJrcyBhIHpvbmVcbm5ld01vbWVudFByb3RvLnV0YyA9IGZ1bmN0aW9uKGtlZXBMb2NhbFRpbWUpIHtcblxuXHRvbGRNb21lbnRQcm90by51dGMuY2FsbCh0aGlzLCBrZWVwTG9jYWxUaW1lKTtcblxuXHQvLyBlbnN1cmUgbm9uLWFtYmlndW91c1xuXHQvLyB0aGlzIHByb2JhYmx5IGFscmVhZHkgaGFwcGVuZWQgdmlhIHV0YygpIC0+IHV0Y09mZnNldCgpLCBidXQgZG9uJ3QgcmVseSBvbiBNb21lbnQncyBpbnRlcm5hbHNcblx0dGhpcy5fYW1iaWdUaW1lID0gZmFsc2U7XG5cdHRoaXMuX2FtYmlnWm9uZSA9IGZhbHNlO1xuXG5cdHJldHVybiB0aGlzO1xufTtcblxuXG4vLyBpbXBsaWNpdGx5IG1hcmtzIGEgem9uZSAod2lsbCBwcm9iYWJseSBnZXQgY2FsbGVkIHVwb24gLnV0YygpIGFuZCAubG9jYWwoKSlcbm5ld01vbWVudFByb3RvLnV0Y09mZnNldCA9IGZ1bmN0aW9uKHR6bykge1xuXG5cdGlmICh0em8gIT0gbnVsbCkgeyAvLyBzZXR0ZXJcblx0XHQvLyB0aGVzZSBhc3NpZ25tZW50cyBuZWVkcyB0byBoYXBwZW4gYmVmb3JlIHRoZSBvcmlnaW5hbCB6b25lIG1ldGhvZCBpcyBjYWxsZWQuXG5cdFx0Ly8gSSBmb3JnZXQgd2h5LCBzb21ldGhpbmcgdG8gZG8gd2l0aCBhIGJyb3dzZXIgY3Jhc2guXG5cdFx0dGhpcy5fYW1iaWdUaW1lID0gZmFsc2U7XG5cdFx0dGhpcy5fYW1iaWdab25lID0gZmFsc2U7XG5cdH1cblxuXHRyZXR1cm4gb2xkTW9tZW50UHJvdG8udXRjT2Zmc2V0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xuXG5cbi8vIEZvcm1hdHRpbmdcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxubmV3TW9tZW50UHJvdG8uZm9ybWF0ID0gZnVuY3Rpb24oKSB7XG5cdGlmICh0aGlzLl9mdWxsQ2FsZW5kYXIgJiYgYXJndW1lbnRzWzBdKSB7IC8vIGFuIGVuaGFuY2VkIG1vbWVudD8gYW5kIGEgZm9ybWF0IHN0cmluZyBwcm92aWRlZD9cblx0XHRyZXR1cm4gZm9ybWF0RGF0ZSh0aGlzLCBhcmd1bWVudHNbMF0pOyAvLyBvdXIgZXh0ZW5kZWQgZm9ybWF0dGluZ1xuXHR9XG5cdGlmICh0aGlzLl9hbWJpZ1RpbWUpIHtcblx0XHRyZXR1cm4gb2xkTW9tZW50Rm9ybWF0KHRoaXMsICdZWVlZLU1NLUREJyk7XG5cdH1cblx0aWYgKHRoaXMuX2FtYmlnWm9uZSkge1xuXHRcdHJldHVybiBvbGRNb21lbnRGb3JtYXQodGhpcywgJ1lZWVktTU0tRERbVF1ISDptbTpzcycpO1xuXHR9XG5cdHJldHVybiBvbGRNb21lbnRQcm90by5mb3JtYXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG5cbm5ld01vbWVudFByb3RvLnRvSVNPU3RyaW5nID0gZnVuY3Rpb24oKSB7XG5cdGlmICh0aGlzLl9hbWJpZ1RpbWUpIHtcblx0XHRyZXR1cm4gb2xkTW9tZW50Rm9ybWF0KHRoaXMsICdZWVlZLU1NLUREJyk7XG5cdH1cblx0aWYgKHRoaXMuX2FtYmlnWm9uZSkge1xuXHRcdHJldHVybiBvbGRNb21lbnRGb3JtYXQodGhpcywgJ1lZWVktTU0tRERbVF1ISDptbTpzcycpO1xuXHR9XG5cdHJldHVybiBvbGRNb21lbnRQcm90by50b0lTT1N0cmluZy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcblxuOztcblxuLy8gU2luZ2xlIERhdGUgRm9ybWF0dGluZ1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cbi8vIGNhbGwgdGhpcyBpZiB5b3Ugd2FudCBNb21lbnQncyBvcmlnaW5hbCBmb3JtYXQgbWV0aG9kIHRvIGJlIHVzZWRcbmZ1bmN0aW9uIG9sZE1vbWVudEZvcm1hdChtb20sIGZvcm1hdFN0cikge1xuXHRyZXR1cm4gb2xkTW9tZW50UHJvdG8uZm9ybWF0LmNhbGwobW9tLCBmb3JtYXRTdHIpOyAvLyBvbGRNb21lbnRQcm90byBkZWZpbmVkIGluIG1vbWVudC1leHQuanNcbn1cblxuXG4vLyBGb3JtYXRzIGBkYXRlYCB3aXRoIGEgTW9tZW50IGZvcm1hdHRpbmcgc3RyaW5nLCBidXQgYWxsb3cgb3VyIG5vbi16ZXJvIGFyZWFzIGFuZFxuLy8gYWRkaXRpb25hbCB0b2tlbi5cbmZ1bmN0aW9uIGZvcm1hdERhdGUoZGF0ZSwgZm9ybWF0U3RyKSB7XG5cdHJldHVybiBmb3JtYXREYXRlV2l0aENodW5rcyhkYXRlLCBnZXRGb3JtYXRTdHJpbmdDaHVua3MoZm9ybWF0U3RyKSk7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0RGF0ZVdpdGhDaHVua3MoZGF0ZSwgY2h1bmtzKSB7XG5cdHZhciBzID0gJyc7XG5cdHZhciBpO1xuXG5cdGZvciAoaT0wOyBpPGNodW5rcy5sZW5ndGg7IGkrKykge1xuXHRcdHMgKz0gZm9ybWF0RGF0ZVdpdGhDaHVuayhkYXRlLCBjaHVua3NbaV0pO1xuXHR9XG5cblx0cmV0dXJuIHM7XG59XG5cblxuLy8gYWRkaXRpb24gZm9ybWF0dGluZyB0b2tlbnMgd2Ugd2FudCByZWNvZ25pemVkXG52YXIgdG9rZW5PdmVycmlkZXMgPSB7XG5cdHQ6IGZ1bmN0aW9uKGRhdGUpIHsgLy8gXCJhXCIgb3IgXCJwXCJcblx0XHRyZXR1cm4gb2xkTW9tZW50Rm9ybWF0KGRhdGUsICdhJykuY2hhckF0KDApO1xuXHR9LFxuXHRUOiBmdW5jdGlvbihkYXRlKSB7IC8vIFwiQVwiIG9yIFwiUFwiXG5cdFx0cmV0dXJuIG9sZE1vbWVudEZvcm1hdChkYXRlLCAnQScpLmNoYXJBdCgwKTtcblx0fVxufTtcblxuXG5mdW5jdGlvbiBmb3JtYXREYXRlV2l0aENodW5rKGRhdGUsIGNodW5rKSB7XG5cdHZhciB0b2tlbjtcblx0dmFyIG1heWJlU3RyO1xuXG5cdGlmICh0eXBlb2YgY2h1bmsgPT09ICdzdHJpbmcnKSB7IC8vIGEgbGl0ZXJhbCBzdHJpbmdcblx0XHRyZXR1cm4gY2h1bms7XG5cdH1cblx0ZWxzZSBpZiAoKHRva2VuID0gY2h1bmsudG9rZW4pKSB7IC8vIGEgdG9rZW4sIGxpa2UgXCJZWVlZXCJcblx0XHRpZiAodG9rZW5PdmVycmlkZXNbdG9rZW5dKSB7XG5cdFx0XHRyZXR1cm4gdG9rZW5PdmVycmlkZXNbdG9rZW5dKGRhdGUpOyAvLyB1c2Ugb3VyIGN1c3RvbSB0b2tlblxuXHRcdH1cblx0XHRyZXR1cm4gb2xkTW9tZW50Rm9ybWF0KGRhdGUsIHRva2VuKTtcblx0fVxuXHRlbHNlIGlmIChjaHVuay5tYXliZSkgeyAvLyBhIGdyb3VwaW5nIG9mIG90aGVyIGNodW5rcyB0aGF0IG11c3QgYmUgbm9uLXplcm9cblx0XHRtYXliZVN0ciA9IGZvcm1hdERhdGVXaXRoQ2h1bmtzKGRhdGUsIGNodW5rLm1heWJlKTtcblx0XHRpZiAobWF5YmVTdHIubWF0Y2goL1sxLTldLykpIHtcblx0XHRcdHJldHVybiBtYXliZVN0cjtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gJyc7XG59XG5cblxuLy8gRGF0ZSBSYW5nZSBGb3JtYXR0aW5nXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBUT0RPOiBtYWtlIGl0IHdvcmsgd2l0aCB0aW1lem9uZSBvZmZzZXRcblxuLy8gVXNpbmcgYSBmb3JtYXR0aW5nIHN0cmluZyBtZWFudCBmb3IgYSBzaW5nbGUgZGF0ZSwgZ2VuZXJhdGUgYSByYW5nZSBzdHJpbmcsIGxpa2Vcbi8vIFwiU2VwIDIgLSA5IDIwMTNcIiwgdGhhdCBpbnRlbGxpZ2VudGx5IGluc2VydHMgYSBzZXBhcmF0b3Igd2hlcmUgdGhlIGRhdGVzIGRpZmZlci5cbi8vIElmIHRoZSBkYXRlcyBhcmUgdGhlIHNhbWUgYXMgZmFyIGFzIHRoZSBmb3JtYXQgc3RyaW5nIGlzIGNvbmNlcm5lZCwganVzdCByZXR1cm4gYSBzaW5nbGVcbi8vIHJlbmRlcmluZyBvZiBvbmUgZGF0ZSwgd2l0aG91dCBhbnkgc2VwYXJhdG9yLlxuZnVuY3Rpb24gZm9ybWF0UmFuZ2UoZGF0ZTEsIGRhdGUyLCBmb3JtYXRTdHIsIHNlcGFyYXRvciwgaXNSVEwpIHtcblx0dmFyIGxvY2FsZURhdGE7XG5cblx0ZGF0ZTEgPSBGQy5tb21lbnQucGFyc2Vab25lKGRhdGUxKTtcblx0ZGF0ZTIgPSBGQy5tb21lbnQucGFyc2Vab25lKGRhdGUyKTtcblxuXHRsb2NhbGVEYXRhID0gZGF0ZTEubG9jYWxlRGF0YSgpO1xuXG5cdC8vIEV4cGFuZCBsb2NhbGl6ZWQgZm9ybWF0IHN0cmluZ3MsIGxpa2UgXCJMTFwiIC0+IFwiTU1NTSBEIFlZWVlcIlxuXHRmb3JtYXRTdHIgPSBsb2NhbGVEYXRhLmxvbmdEYXRlRm9ybWF0KGZvcm1hdFN0cikgfHwgZm9ybWF0U3RyO1xuXHQvLyBCVFcsIHRoaXMgaXMgbm90IGltcG9ydGFudCBmb3IgYGZvcm1hdERhdGVgIGJlY2F1c2UgaXQgaXMgaW1wb3NzaWJsZSB0byBwdXQgY3VzdG9tIHRva2Vuc1xuXHQvLyBvciBub24temVybyBhcmVhcyBpbiBNb21lbnQncyBsb2NhbGl6ZWQgZm9ybWF0IHN0cmluZ3MuXG5cblx0c2VwYXJhdG9yID0gc2VwYXJhdG9yIHx8ICcgLSAnO1xuXG5cdHJldHVybiBmb3JtYXRSYW5nZVdpdGhDaHVua3MoXG5cdFx0ZGF0ZTEsXG5cdFx0ZGF0ZTIsXG5cdFx0Z2V0Rm9ybWF0U3RyaW5nQ2h1bmtzKGZvcm1hdFN0ciksXG5cdFx0c2VwYXJhdG9yLFxuXHRcdGlzUlRMXG5cdCk7XG59XG5GQy5mb3JtYXRSYW5nZSA9IGZvcm1hdFJhbmdlOyAvLyBleHBvc2VcblxuXG5mdW5jdGlvbiBmb3JtYXRSYW5nZVdpdGhDaHVua3MoZGF0ZTEsIGRhdGUyLCBjaHVua3MsIHNlcGFyYXRvciwgaXNSVEwpIHtcblx0dmFyIHVuem9uZWREYXRlMSA9IGRhdGUxLmNsb25lKCkuc3RyaXBab25lKCk7IC8vIGZvciBmb3JtYXRTaW1pbGFyQ2h1bmtcblx0dmFyIHVuem9uZWREYXRlMiA9IGRhdGUyLmNsb25lKCkuc3RyaXBab25lKCk7IC8vIFwiXG5cdHZhciBjaHVua1N0cjsgLy8gdGhlIHJlbmRlcmluZyBvZiB0aGUgY2h1bmtcblx0dmFyIGxlZnRJO1xuXHR2YXIgbGVmdFN0ciA9ICcnO1xuXHR2YXIgcmlnaHRJO1xuXHR2YXIgcmlnaHRTdHIgPSAnJztcblx0dmFyIG1pZGRsZUk7XG5cdHZhciBtaWRkbGVTdHIxID0gJyc7XG5cdHZhciBtaWRkbGVTdHIyID0gJyc7XG5cdHZhciBtaWRkbGVTdHIgPSAnJztcblxuXHQvLyBTdGFydCBhdCB0aGUgbGVmdG1vc3Qgc2lkZSBvZiB0aGUgZm9ybWF0dGluZyBzdHJpbmcgYW5kIGNvbnRpbnVlIHVudGlsIHlvdSBoaXQgYSB0b2tlblxuXHQvLyB0aGF0IGlzIG5vdCB0aGUgc2FtZSBiZXR3ZWVuIGRhdGVzLlxuXHRmb3IgKGxlZnRJPTA7IGxlZnRJPGNodW5rcy5sZW5ndGg7IGxlZnRJKyspIHtcblx0XHRjaHVua1N0ciA9IGZvcm1hdFNpbWlsYXJDaHVuayhkYXRlMSwgZGF0ZTIsIHVuem9uZWREYXRlMSwgdW56b25lZERhdGUyLCBjaHVua3NbbGVmdEldKTtcblx0XHRpZiAoY2h1bmtTdHIgPT09IGZhbHNlKSB7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cdFx0bGVmdFN0ciArPSBjaHVua1N0cjtcblx0fVxuXG5cdC8vIFNpbWlsYXJseSwgc3RhcnQgYXQgdGhlIHJpZ2h0bW9zdCBzaWRlIG9mIHRoZSBmb3JtYXR0aW5nIHN0cmluZyBhbmQgbW92ZSBsZWZ0XG5cdGZvciAocmlnaHRJPWNodW5rcy5sZW5ndGgtMTsgcmlnaHRJPmxlZnRJOyByaWdodEktLSkge1xuXHRcdGNodW5rU3RyID0gZm9ybWF0U2ltaWxhckNodW5rKGRhdGUxLCBkYXRlMiwgdW56b25lZERhdGUxLCB1bnpvbmVkRGF0ZTIsICBjaHVua3NbcmlnaHRJXSk7XG5cdFx0aWYgKGNodW5rU3RyID09PSBmYWxzZSkge1xuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXHRcdHJpZ2h0U3RyID0gY2h1bmtTdHIgKyByaWdodFN0cjtcblx0fVxuXG5cdC8vIFRoZSBhcmVhIGluIHRoZSBtaWRkbGUgaXMgZGlmZmVyZW50IGZvciBib3RoIG9mIHRoZSBkYXRlcy5cblx0Ly8gQ29sbGVjdCB0aGVtIGRpc3RpbmN0bHkgc28gd2UgY2FuIGphbSB0aGVtIHRvZ2V0aGVyIGxhdGVyLlxuXHRmb3IgKG1pZGRsZUk9bGVmdEk7IG1pZGRsZUk8PXJpZ2h0STsgbWlkZGxlSSsrKSB7XG5cdFx0bWlkZGxlU3RyMSArPSBmb3JtYXREYXRlV2l0aENodW5rKGRhdGUxLCBjaHVua3NbbWlkZGxlSV0pO1xuXHRcdG1pZGRsZVN0cjIgKz0gZm9ybWF0RGF0ZVdpdGhDaHVuayhkYXRlMiwgY2h1bmtzW21pZGRsZUldKTtcblx0fVxuXG5cdGlmIChtaWRkbGVTdHIxIHx8IG1pZGRsZVN0cjIpIHtcblx0XHRpZiAoaXNSVEwpIHtcblx0XHRcdG1pZGRsZVN0ciA9IG1pZGRsZVN0cjIgKyBzZXBhcmF0b3IgKyBtaWRkbGVTdHIxO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdG1pZGRsZVN0ciA9IG1pZGRsZVN0cjEgKyBzZXBhcmF0b3IgKyBtaWRkbGVTdHIyO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBsZWZ0U3RyICsgbWlkZGxlU3RyICsgcmlnaHRTdHI7XG59XG5cblxudmFyIHNpbWlsYXJVbml0TWFwID0ge1xuXHRZOiAneWVhcicsXG5cdE06ICdtb250aCcsXG5cdEQ6ICdkYXknLCAvLyBkYXkgb2YgbW9udGhcblx0ZDogJ2RheScsIC8vIGRheSBvZiB3ZWVrXG5cdC8vIHByZXZlbnRzIGEgc2VwYXJhdG9yIGJldHdlZW4gYW55dGhpbmcgdGltZS1yZWxhdGVkLi4uXG5cdEE6ICdzZWNvbmQnLCAvLyBBTS9QTVxuXHRhOiAnc2Vjb25kJywgLy8gYW0vcG1cblx0VDogJ3NlY29uZCcsIC8vIEEvUFxuXHR0OiAnc2Vjb25kJywgLy8gYS9wXG5cdEg6ICdzZWNvbmQnLCAvLyBob3VyICgyNClcblx0aDogJ3NlY29uZCcsIC8vIGhvdXIgKDEyKVxuXHRtOiAnc2Vjb25kJywgLy8gbWludXRlXG5cdHM6ICdzZWNvbmQnIC8vIHNlY29uZFxufTtcbi8vIFRPRE86IHdlZWsgbWF5YmU/XG5cblxuLy8gR2l2ZW4gYSBmb3JtYXR0aW5nIGNodW5rLCBhbmQgZ2l2ZW4gdGhhdCBib3RoIGRhdGVzIGFyZSBzaW1pbGFyIGluIHRoZSByZWdhcmQgdGhlXG4vLyBmb3JtYXR0aW5nIGNodW5rIGlzIGNvbmNlcm5lZCwgZm9ybWF0IGRhdGUxIGFnYWluc3QgYGNodW5rYC4gT3RoZXJ3aXNlLCByZXR1cm4gYGZhbHNlYC5cbmZ1bmN0aW9uIGZvcm1hdFNpbWlsYXJDaHVuayhkYXRlMSwgZGF0ZTIsIHVuem9uZWREYXRlMSwgdW56b25lZERhdGUyLCBjaHVuaykge1xuXHR2YXIgdG9rZW47XG5cdHZhciB1bml0O1xuXG5cdGlmICh0eXBlb2YgY2h1bmsgPT09ICdzdHJpbmcnKSB7IC8vIGEgbGl0ZXJhbCBzdHJpbmdcblx0XHRyZXR1cm4gY2h1bms7XG5cdH1cblx0ZWxzZSBpZiAoKHRva2VuID0gY2h1bmsudG9rZW4pKSB7XG5cdFx0dW5pdCA9IHNpbWlsYXJVbml0TWFwW3Rva2VuLmNoYXJBdCgwKV07XG5cblx0XHQvLyBhcmUgdGhlIGRhdGVzIHRoZSBzYW1lIGZvciB0aGlzIHVuaXQgb2YgbWVhc3VyZW1lbnQ/XG5cdFx0Ly8gdXNlIHRoZSB1bnpvbmVkIGRhdGVzIGZvciB0aGlzIGNhbGN1bGF0aW9uIGJlY2F1c2UgdW5yZWxpYWJsZSB3aGVuIG5lYXIgRFNUIChidWcgIzIzOTYpXG5cdFx0aWYgKHVuaXQgJiYgdW56b25lZERhdGUxLmlzU2FtZSh1bnpvbmVkRGF0ZTIsIHVuaXQpKSB7XG5cdFx0XHRyZXR1cm4gb2xkTW9tZW50Rm9ybWF0KGRhdGUxLCB0b2tlbik7IC8vIHdvdWxkIGJlIHRoZSBzYW1lIGlmIHdlIHVzZWQgYGRhdGUyYFxuXHRcdFx0Ly8gQlRXLCBkb24ndCBzdXBwb3J0IGN1c3RvbSB0b2tlbnNcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gZmFsc2U7IC8vIHRoZSBjaHVuayBpcyBOT1QgdGhlIHNhbWUgZm9yIHRoZSB0d28gZGF0ZXNcblx0Ly8gQlRXLCBkb24ndCBzdXBwb3J0IHNwbGl0dGluZyBvbiBub24temVybyBhcmVhc1xufVxuXG5cbi8vIENodW5raW5nIFV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxudmFyIGZvcm1hdFN0cmluZ0NodW5rQ2FjaGUgPSB7fTtcblxuXG5mdW5jdGlvbiBnZXRGb3JtYXRTdHJpbmdDaHVua3MoZm9ybWF0U3RyKSB7XG5cdGlmIChmb3JtYXRTdHIgaW4gZm9ybWF0U3RyaW5nQ2h1bmtDYWNoZSkge1xuXHRcdHJldHVybiBmb3JtYXRTdHJpbmdDaHVua0NhY2hlW2Zvcm1hdFN0cl07XG5cdH1cblx0cmV0dXJuIChmb3JtYXRTdHJpbmdDaHVua0NhY2hlW2Zvcm1hdFN0cl0gPSBjaHVua0Zvcm1hdFN0cmluZyhmb3JtYXRTdHIpKTtcbn1cblxuXG4vLyBCcmVhayB0aGUgZm9ybWF0dGluZyBzdHJpbmcgaW50byBhbiBhcnJheSBvZiBjaHVua3NcbmZ1bmN0aW9uIGNodW5rRm9ybWF0U3RyaW5nKGZvcm1hdFN0cikge1xuXHR2YXIgY2h1bmtzID0gW107XG5cdHZhciBjaHVua2VyID0gL1xcWyhbXlxcXV0qKVxcXXxcXCgoW15cXCldKilcXCl8KExUU3xMVHwoXFx3KVxcNCpvPyl8KFteXFx3XFxbXFwoXSspL2c7IC8vIFRPRE86IG1vcmUgZGVzY3JpbWluYXRpb25cblx0dmFyIG1hdGNoO1xuXG5cdHdoaWxlICgobWF0Y2ggPSBjaHVua2VyLmV4ZWMoZm9ybWF0U3RyKSkpIHtcblx0XHRpZiAobWF0Y2hbMV0pIHsgLy8gYSBsaXRlcmFsIHN0cmluZyBpbnNpZGUgWyAuLi4gXVxuXHRcdFx0Y2h1bmtzLnB1c2gobWF0Y2hbMV0pO1xuXHRcdH1cblx0XHRlbHNlIGlmIChtYXRjaFsyXSkgeyAvLyBub24temVybyBmb3JtYXR0aW5nIGluc2lkZSAoIC4uLiApXG5cdFx0XHRjaHVua3MucHVzaCh7IG1heWJlOiBjaHVua0Zvcm1hdFN0cmluZyhtYXRjaFsyXSkgfSk7XG5cdFx0fVxuXHRcdGVsc2UgaWYgKG1hdGNoWzNdKSB7IC8vIGEgZm9ybWF0dGluZyB0b2tlblxuXHRcdFx0Y2h1bmtzLnB1c2goeyB0b2tlbjogbWF0Y2hbM10gfSk7XG5cdFx0fVxuXHRcdGVsc2UgaWYgKG1hdGNoWzVdKSB7IC8vIGFuIHVuZW5jbG9zZWQgbGl0ZXJhbCBzdHJpbmdcblx0XHRcdGNodW5rcy5wdXNoKG1hdGNoWzVdKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gY2h1bmtzO1xufVxuXG5cbi8vIE1pc2MgVXRpbHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG4vLyBncmFudWxhcml0eSBvbmx5IGdvZXMgdXAgdW50aWwgZGF5XG4vLyBUT0RPOiB1bmlmeSB3aXRoIHNpbWlsYXJVbml0TWFwXG52YXIgdG9rZW5HcmFudWxhcml0aWVzID0ge1xuXHRZOiB7IHZhbHVlOiAxLCB1bml0OiAneWVhcicgfSxcblx0TTogeyB2YWx1ZTogMiwgdW5pdDogJ21vbnRoJyB9LFxuXHRXOiB7IHZhbHVlOiAzLCB1bml0OiAnd2VlaycgfSxcblx0dzogeyB2YWx1ZTogMywgdW5pdDogJ3dlZWsnIH0sXG5cdEQ6IHsgdmFsdWU6IDQsIHVuaXQ6ICdkYXknIH0sIC8vIGRheSBvZiBtb250aFxuXHRkOiB7IHZhbHVlOiA0LCB1bml0OiAnZGF5JyB9IC8vIGRheSBvZiB3ZWVrXG59O1xuXG4vLyByZXR1cm5zIGEgdW5pdCBzdHJpbmcsIGVpdGhlciAneWVhcicsICdtb250aCcsICdkYXknLCBvciBudWxsXG4vLyBmb3IgdGhlIG1vc3QgZ3JhbnVsYXIgZm9ybWF0dGluZyB0b2tlbiBpbiB0aGUgc3RyaW5nLlxuRkMucXVlcnlNb3N0R3JhbnVsYXJGb3JtYXRVbml0ID0gZnVuY3Rpb24oZm9ybWF0U3RyKSB7XG5cdHZhciBjaHVua3MgPSBnZXRGb3JtYXRTdHJpbmdDaHVua3MoZm9ybWF0U3RyKTtcblx0dmFyIGksIGNodW5rO1xuXHR2YXIgY2FuZGlkYXRlO1xuXHR2YXIgYmVzdDtcblxuXHRmb3IgKGkgPSAwOyBpIDwgY2h1bmtzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y2h1bmsgPSBjaHVua3NbaV07XG5cdFx0aWYgKGNodW5rLnRva2VuKSB7XG5cdFx0XHRjYW5kaWRhdGUgPSB0b2tlbkdyYW51bGFyaXRpZXNbY2h1bmsudG9rZW4uY2hhckF0KDApXTtcblx0XHRcdGlmIChjYW5kaWRhdGUpIHtcblx0XHRcdFx0aWYgKCFiZXN0IHx8IGNhbmRpZGF0ZS52YWx1ZSA+IGJlc3QudmFsdWUpIHtcblx0XHRcdFx0XHRiZXN0ID0gY2FuZGlkYXRlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0aWYgKGJlc3QpIHtcblx0XHRyZXR1cm4gYmVzdC51bml0O1xuXHR9XG5cblx0cmV0dXJuIG51bGw7XG59O1xuXG47O1xuXG5GQy5DbGFzcyA9IENsYXNzOyAvLyBleHBvcnRcblxuLy8gQ2xhc3MgdGhhdCBhbGwgb3RoZXIgY2xhc3NlcyB3aWxsIGluaGVyaXQgZnJvbVxuZnVuY3Rpb24gQ2xhc3MoKSB7IH1cblxuXG4vLyBDYWxsZWQgb24gYSBjbGFzcyB0byBjcmVhdGUgYSBzdWJjbGFzcy5cbi8vIExhc3QgYXJndW1lbnQgY29udGFpbnMgaW5zdGFuY2UgbWV0aG9kcy4gQW55IGFyZ3VtZW50IGJlZm9yZSB0aGUgbGFzdCBhcmUgY29uc2lkZXJlZCBtaXhpbnMuXG5DbGFzcy5leHRlbmQgPSBmdW5jdGlvbigpIHtcblx0dmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG5cdHZhciBpO1xuXHR2YXIgbWVtYmVycztcblxuXHRmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0XHRtZW1iZXJzID0gYXJndW1lbnRzW2ldO1xuXHRcdGlmIChpIDwgbGVuIC0gMSkgeyAvLyBub3QgdGhlIGxhc3QgYXJndW1lbnQ/XG5cdFx0XHRtaXhJbnRvQ2xhc3ModGhpcywgbWVtYmVycyk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGV4dGVuZENsYXNzKHRoaXMsIG1lbWJlcnMgfHwge30pOyAvLyBtZW1iZXJzIHdpbGwgYmUgdW5kZWZpbmVkIGlmIG5vIGFyZ3VtZW50c1xufTtcblxuXG4vLyBBZGRzIG5ldyBtZW1iZXIgdmFyaWFibGVzL21ldGhvZHMgdG8gdGhlIGNsYXNzJ3MgcHJvdG90eXBlLlxuLy8gQ2FuIGJlIGNhbGxlZCB3aXRoIGFub3RoZXIgY2xhc3MsIG9yIGEgcGxhaW4gb2JqZWN0IGhhc2ggY29udGFpbmluZyBuZXcgbWVtYmVycy5cbkNsYXNzLm1peGluID0gZnVuY3Rpb24obWVtYmVycykge1xuXHRtaXhJbnRvQ2xhc3ModGhpcywgbWVtYmVycyk7XG59O1xuXG5cbmZ1bmN0aW9uIGV4dGVuZENsYXNzKHN1cGVyQ2xhc3MsIG1lbWJlcnMpIHtcblx0dmFyIHN1YkNsYXNzO1xuXG5cdC8vIGVuc3VyZSBhIGNvbnN0cnVjdG9yIGZvciB0aGUgc3ViY2xhc3MsIGZvcndhcmRpbmcgYWxsIGFyZ3VtZW50cyB0byB0aGUgc3VwZXItY29uc3RydWN0b3IgaWYgaXQgZG9lc24ndCBleGlzdFxuXHRpZiAoaGFzT3duUHJvcChtZW1iZXJzLCAnY29uc3RydWN0b3InKSkge1xuXHRcdHN1YkNsYXNzID0gbWVtYmVycy5jb25zdHJ1Y3Rvcjtcblx0fVxuXHRpZiAodHlwZW9mIHN1YkNsYXNzICE9PSAnZnVuY3Rpb24nKSB7XG5cdFx0c3ViQ2xhc3MgPSBtZW1iZXJzLmNvbnN0cnVjdG9yID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRzdXBlckNsYXNzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0fTtcblx0fVxuXG5cdC8vIGJ1aWxkIHRoZSBiYXNlIHByb3RvdHlwZSBmb3IgdGhlIHN1YmNsYXNzLCB3aGljaCBpcyBhbiBuZXcgb2JqZWN0IGNoYWluZWQgdG8gdGhlIHN1cGVyY2xhc3MncyBwcm90b3R5cGVcblx0c3ViQ2xhc3MucHJvdG90eXBlID0gY3JlYXRlT2JqZWN0KHN1cGVyQ2xhc3MucHJvdG90eXBlKTtcblxuXHQvLyBjb3B5IGVhY2ggbWVtYmVyIHZhcmlhYmxlL21ldGhvZCBvbnRvIHRoZSB0aGUgc3ViY2xhc3MncyBwcm90b3R5cGVcblx0Y29weU93blByb3BzKG1lbWJlcnMsIHN1YkNsYXNzLnByb3RvdHlwZSk7XG5cblx0Ly8gY29weSBvdmVyIGFsbCBjbGFzcyB2YXJpYWJsZXMvbWV0aG9kcyB0byB0aGUgc3ViY2xhc3MsIHN1Y2ggYXMgYGV4dGVuZGAgYW5kIGBtaXhpbmBcblx0Y29weU93blByb3BzKHN1cGVyQ2xhc3MsIHN1YkNsYXNzKTtcblxuXHRyZXR1cm4gc3ViQ2xhc3M7XG59XG5cblxuZnVuY3Rpb24gbWl4SW50b0NsYXNzKHRoZUNsYXNzLCBtZW1iZXJzKSB7XG5cdGNvcHlPd25Qcm9wcyhtZW1iZXJzLCB0aGVDbGFzcy5wcm90b3R5cGUpO1xufVxuOztcblxuLypcbldyYXAgalF1ZXJ5J3MgRGVmZXJyZWQgUHJvbWlzZSBvYmplY3QgdG8gYmUgc2xpZ2h0bHkgbW9yZSBQcm9taXNlL0ErIGNvbXBsaWFudC5cbldpdGggdGhlIGFkZGVkIG5vbi1zdGFuZGFyZCBmZWF0dXJlIG9mIHN5bmNocm9ub3VzbHkgZXhlY3V0aW5nIGhhbmRsZXJzIG9uIHJlc29sdmVkIHByb21pc2VzLFxud2hpY2ggZG9lc24ndCBhbHdheXMgaGFwcGVuIG90aGVyd2lzZSAoZXNwIHdpdGggbmVzdGVkIC50aGVuIGhhbmRsZXJzIT8pLFxuc28sIHRoaXMgbWFrZXMgdGhpbmdzIGEgbG90IGVhc2llciwgZXNwIGJlY2F1c2UgalF1ZXJ5IDMgY2hhbmdlZCB0aGUgc3luY2hyb25pY2l0eSBmb3IgRGVmZXJyZWQgb2JqZWN0cy5cblxuVE9ETzogd3JpdGUgdGVzdHMgYW5kIG1vcmUgY29tbWVudHNcbiovXG5cbmZ1bmN0aW9uIFByb21pc2UoZXhlY3V0b3IpIHtcblx0dmFyIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuXHR2YXIgcHJvbWlzZSA9IGRlZmVycmVkLnByb21pc2UoKTtcblxuXHRpZiAodHlwZW9mIGV4ZWN1dG9yID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0ZXhlY3V0b3IoXG5cdFx0XHRmdW5jdGlvbih2YWx1ZSkgeyAvLyByZXNvbHZlXG5cdFx0XHRcdGlmIChQcm9taXNlLmltbWVkaWF0ZSkge1xuXHRcdFx0XHRcdHByb21pc2UuX3ZhbHVlID0gdmFsdWU7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZSh2YWx1ZSk7XG5cdFx0XHR9LFxuXHRcdFx0ZnVuY3Rpb24oKSB7IC8vIHJlamVjdFxuXHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoKTtcblx0XHRcdH1cblx0XHQpO1xuXHR9XG5cblx0aWYgKFByb21pc2UuaW1tZWRpYXRlKSB7XG5cdFx0dmFyIG9yaWdUaGVuID0gcHJvbWlzZS50aGVuO1xuXG5cdFx0cHJvbWlzZS50aGVuID0gZnVuY3Rpb24ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcblx0XHRcdHZhciBzdGF0ZSA9IHByb21pc2Uuc3RhdGUoKTtcblxuXHRcdFx0aWYgKHN0YXRlID09PSAncmVzb2x2ZWQnKSB7XG5cdFx0XHRcdGlmICh0eXBlb2Ygb25GdWxmaWxsZWQgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG9uRnVsZmlsbGVkKHByb21pc2UuX3ZhbHVlKSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKHN0YXRlID09PSAncmVqZWN0ZWQnKSB7XG5cdFx0XHRcdGlmICh0eXBlb2Ygb25SZWplY3RlZCA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdG9uUmVqZWN0ZWQoKTtcblx0XHRcdFx0XHRyZXR1cm4gcHJvbWlzZTsgLy8gYWxyZWFkeSByZWplY3RlZFxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBvcmlnVGhlbi5jYWxsKHByb21pc2UsIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKTtcblx0XHR9O1xuXHR9XG5cblx0cmV0dXJuIHByb21pc2U7IC8vIGluc3RhbmNlb2YgUHJvbWlzZSB3aWxsIGJyZWFrIDooIFRPRE86IG1ha2UgUHJvbWlzZSBhIHJlYWwgY2xhc3Ncbn1cblxuRkMuUHJvbWlzZSA9IFByb21pc2U7XG5cblByb21pc2UuaW1tZWRpYXRlID0gdHJ1ZTtcblxuXG5Qcm9taXNlLnJlc29sdmUgPSBmdW5jdGlvbih2YWx1ZSkge1xuXHRpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlLnJlc29sdmUgPT09ICdmdW5jdGlvbicpIHtcblx0XHRyZXR1cm4gdmFsdWUucHJvbWlzZSgpO1xuXHR9XG5cdGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdHJldHVybiB2YWx1ZTtcblx0fVxuXHRlbHNlIHtcblx0XHR2YXIgZGVmZXJyZWQgPSAkLkRlZmVycmVkKCkucmVzb2x2ZSh2YWx1ZSk7XG5cdFx0dmFyIHByb21pc2UgPSBkZWZlcnJlZC5wcm9taXNlKCk7XG5cblx0XHRpZiAoUHJvbWlzZS5pbW1lZGlhdGUpIHtcblx0XHRcdHZhciBvcmlnVGhlbiA9IHByb21pc2UudGhlbjtcblxuXHRcdFx0cHJvbWlzZS5fdmFsdWUgPSB2YWx1ZTtcblxuXHRcdFx0cHJvbWlzZS50aGVuID0gZnVuY3Rpb24ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcblx0XHRcdFx0aWYgKHR5cGVvZiBvbkZ1bGZpbGxlZCA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUob25GdWxmaWxsZWQodmFsdWUpKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gb3JpZ1RoZW4uY2FsbChwcm9taXNlLCBvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCk7XG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdHJldHVybiBwcm9taXNlO1xuXHR9XG59O1xuXG5cblByb21pc2UucmVqZWN0ID0gZnVuY3Rpb24oKSB7XG5cdHJldHVybiAkLkRlZmVycmVkKCkucmVqZWN0KCkucHJvbWlzZSgpO1xufTtcblxuXG5Qcm9taXNlLmFsbCA9IGZ1bmN0aW9uKGlucHV0cykge1xuXHR2YXIgaGFzQWxsVmFsdWVzID0gZmFsc2U7XG5cdHZhciB2YWx1ZXM7XG5cdHZhciBpLCBpbnB1dDtcblxuXHRpZiAoUHJvbWlzZS5pbW1lZGlhdGUpIHtcblx0XHRoYXNBbGxWYWx1ZXMgPSB0cnVlO1xuXHRcdHZhbHVlcyA9IFtdO1xuXG5cdFx0Zm9yIChpID0gMDsgaSA8IGlucHV0cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aW5wdXQgPSBpbnB1dHNbaV07XG5cblx0XHRcdGlmIChpbnB1dCAmJiB0eXBlb2YgaW5wdXQuc3RhdGUgPT09ICdmdW5jdGlvbicgJiYgaW5wdXQuc3RhdGUoKSA9PT0gJ3Jlc29sdmVkJyAmJiAoJ192YWx1ZScgaW4gaW5wdXQpKSB7XG5cdFx0XHRcdHZhbHVlcy5wdXNoKGlucHV0Ll92YWx1ZSk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmIChpbnB1dCAmJiB0eXBlb2YgaW5wdXQudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRoYXNBbGxWYWx1ZXMgPSBmYWxzZTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0dmFsdWVzLnB1c2goaW5wdXQpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGlmIChoYXNBbGxWYWx1ZXMpIHtcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHZhbHVlcyk7XG5cdH1cblx0ZWxzZSB7XG5cdFx0cmV0dXJuICQud2hlbi5hcHBseSgkLndoZW4sIGlucHV0cykudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiAkLndoZW4oJC5tYWtlQXJyYXkoYXJndW1lbnRzKSk7XG5cdFx0fSk7XG5cdH1cbn07XG5cbjs7XG5cbi8vIFRPRE86IHdyaXRlIHRlc3RzIGFuZCBjbGVhbiB1cCBjb2RlXG5cbmZ1bmN0aW9uIFRhc2tRdWV1ZShkZWJvdW5jZVdhaXQpIHtcblx0dmFyIHEgPSBbXTsgLy8gYXJyYXkgb2YgcnVuRnVuY3NcblxuXHRmdW5jdGlvbiBhZGRUYXNrKHRhc2tGdW5jKSB7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpIHtcblxuXHRcdFx0Ly8gc2hvdWxkIHJ1biB0aGlzIGZ1bmN0aW9uIHdoZW4gaXQncyB0YXNrRnVuYydzIHR1cm4gdG8gcnVuLlxuXHRcdFx0Ly8gcmVzcG9uc2libGUgZm9yIHBvcHBpbmcgaXRzZWxmIG9mZiB0aGUgcXVldWUuXG5cdFx0XHR2YXIgcnVuRnVuYyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRQcm9taXNlLnJlc29sdmUodGFza0Z1bmMoKSkgLy8gcmVzdWx0IG1pZ2h0IGJlIGFzeW5jLCBjb2VyY2UgdG8gcHJvbWlzZVxuXHRcdFx0XHRcdC50aGVuKHJlc29sdmUpIC8vIHJlc29sdmUgVGFza1F1ZXVlOjpwdXNoJ3MgcHJvbWlzZSwgZm9yIHRoZSBjYWxsZXIuIHdpbGwgcmVjZWl2ZSByZXN1bHQgb2YgdGFza0Z1bmMuXG5cdFx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRxLnNoaWZ0KCk7IC8vIHBvcCBpdHNlbGYgb2ZmXG5cblx0XHRcdFx0XHRcdC8vIHJ1biB0aGUgbmV4dCB0YXNrLCBpZiBhbnlcblx0XHRcdFx0XHRcdGlmIChxLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHRxWzBdKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9O1xuXG5cdFx0XHQvLyBhbHdheXMgcHV0IHRoZSB0YXNrIGF0IHRoZSBlbmQgb2YgdGhlIHF1ZXVlLCBCRUZPUkUgcnVubmluZyB0aGUgdGFza1xuXHRcdFx0cS5wdXNoKHJ1bkZ1bmMpO1xuXG5cdFx0XHQvLyBpZiBpdCdzIHRoZSBvbmx5IHRhc2sgaW4gdGhlIHF1ZXVlLCBydW4gaW1tZWRpYXRlbHlcblx0XHRcdGlmIChxLmxlbmd0aCA9PT0gMSkge1xuXHRcdFx0XHRydW5GdW5jKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHR0aGlzLmFkZCA9IC8vIHBvdGVudGlhbGx5IGRlYm91bmNlLCBmb3IgdGhlIHB1YmxpYyBtZXRob2Rcblx0XHR0eXBlb2YgZGVib3VuY2VXYWl0ID09PSAnbnVtYmVyJyA/XG5cdFx0XHRkZWJvdW5jZShhZGRUYXNrLCBkZWJvdW5jZVdhaXQpIDpcblx0XHRcdGFkZFRhc2s7IC8vIGlmIG5vdCBhIG51bWJlciAobnVsbC91bmRlZmluZWQvZmFsc2UpLCBubyBkZWJvdW5jZSBhdCBhbGxcblxuXHR0aGlzLmFkZFF1aWNrbHkgPSBhZGRUYXNrOyAvLyBndWFyYW50ZWVkIG5vIGRlYm91bmNlXG59XG5cbkZDLlRhc2tRdWV1ZSA9IFRhc2tRdWV1ZTtcblxuLypcbnEgPSBuZXcgVGFza1F1ZXVlKCk7XG5cbmZ1bmN0aW9uIHdvcmsoaSkge1xuXHRyZXR1cm4gcS5wdXNoKGZ1bmN0aW9uKCkge1xuXHRcdHRyaWdnZXIoKTtcblx0XHRjb25zb2xlLmxvZygnd29yaycgKyBpKTtcblx0fSk7XG59XG5cbnZhciBjbnQgPSAwO1xuXG5mdW5jdGlvbiB0cmlnZ2VyKCkge1xuXHRpZiAoY250IDwgNSkge1xuXHRcdGNudCsrO1xuXHRcdHdvcmsoY250KTtcblx0fVxufVxuXG53b3JrKDkpO1xuKi9cblxuOztcblxudmFyIEVtaXR0ZXJNaXhpbiA9IEZDLkVtaXR0ZXJNaXhpbiA9IHtcblxuXHQvLyBqUXVlcnktaWZpY2F0aW9uIHZpYSAkKHRoaXMpIGFsbG93cyBhIG5vbi1ET00gb2JqZWN0IHRvIGhhdmVcblx0Ly8gdGhlIHNhbWUgZXZlbnQgaGFuZGxpbmcgY2FwYWJpbGl0aWVzIChpbmNsdWRpbmcgbmFtZXNwYWNlcykuXG5cblxuXHRvbjogZnVuY3Rpb24odHlwZXMsIGhhbmRsZXIpIHtcblx0XHQkKHRoaXMpLm9uKHR5cGVzLCB0aGlzLl9wcmVwYXJlSW50ZXJjZXB0KGhhbmRsZXIpKTtcblx0XHRyZXR1cm4gdGhpczsgLy8gZm9yIGNoYWluaW5nXG5cdH0sXG5cblxuXHRvbmU6IGZ1bmN0aW9uKHR5cGVzLCBoYW5kbGVyKSB7XG5cdFx0JCh0aGlzKS5vbmUodHlwZXMsIHRoaXMuX3ByZXBhcmVJbnRlcmNlcHQoaGFuZGxlcikpO1xuXHRcdHJldHVybiB0aGlzOyAvLyBmb3IgY2hhaW5pbmdcblx0fSxcblxuXG5cdF9wcmVwYXJlSW50ZXJjZXB0OiBmdW5jdGlvbihoYW5kbGVyKSB7XG5cdFx0Ly8gaGFuZGxlcnMgYXJlIGFsd2F5cyBjYWxsZWQgd2l0aCBhbiBcImV2ZW50XCIgb2JqZWN0IGFzIHRoZWlyIGZpcnN0IHBhcmFtLlxuXHRcdC8vIHNuZWFrIHRoZSBgdGhpc2AgY29udGV4dCBhbmQgYXJndW1lbnRzIGludG8gdGhlIGV4dHJhIHBhcmFtZXRlciBvYmplY3Rcblx0XHQvLyBhbmQgZm9yd2FyZCB0aGVtIG9uIHRvIHRoZSBvcmlnaW5hbCBoYW5kbGVyLlxuXHRcdHZhciBpbnRlcmNlcHQgPSBmdW5jdGlvbihldiwgZXh0cmEpIHtcblx0XHRcdHJldHVybiBoYW5kbGVyLmFwcGx5KFxuXHRcdFx0XHRleHRyYS5jb250ZXh0IHx8IHRoaXMsXG5cdFx0XHRcdGV4dHJhLmFyZ3MgfHwgW11cblx0XHRcdCk7XG5cdFx0fTtcblxuXHRcdC8vIG1pbWljayBqUXVlcnkncyBpbnRlcm5hbCBcInByb3h5XCIgc3lzdGVtIChyaXNreSwgSSBrbm93KVxuXHRcdC8vIGNhdXNpbmcgYWxsIGZ1bmN0aW9ucyB3aXRoIHRoZSBzYW1lIC5ndWlkIHRvIGFwcGVhciB0byBiZSB0aGUgc2FtZS5cblx0XHQvLyBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS9ibG9iLzIuMi40L3NyYy9jb3JlLmpzI0w0NDhcblx0XHQvLyB0aGlzIGlzIG5lZWRlZCBmb3IgY2FsbGluZyAub2ZmIHdpdGggdGhlIG9yaWdpbmFsIG5vbi1pbnRlcmNlcHQgaGFuZGxlci5cblx0XHRpZiAoIWhhbmRsZXIuZ3VpZCkge1xuXHRcdFx0aGFuZGxlci5ndWlkID0gJC5ndWlkKys7XG5cdFx0fVxuXHRcdGludGVyY2VwdC5ndWlkID0gaGFuZGxlci5ndWlkO1xuXG5cdFx0cmV0dXJuIGludGVyY2VwdDtcblx0fSxcblxuXG5cdG9mZjogZnVuY3Rpb24odHlwZXMsIGhhbmRsZXIpIHtcblx0XHQkKHRoaXMpLm9mZih0eXBlcywgaGFuZGxlcik7XG5cblx0XHRyZXR1cm4gdGhpczsgLy8gZm9yIGNoYWluaW5nXG5cdH0sXG5cblxuXHR0cmlnZ2VyOiBmdW5jdGlvbih0eXBlcykge1xuXHRcdHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsgLy8gYXJndW1lbnRzIGFmdGVyIHRoZSBmaXJzdFxuXG5cdFx0Ly8gcGFzcyBpbiBcImV4dHJhXCIgaW5mbyB0byB0aGUgaW50ZXJjZXB0XG5cdFx0JCh0aGlzKS50cmlnZ2VySGFuZGxlcih0eXBlcywgeyBhcmdzOiBhcmdzIH0pO1xuXG5cdFx0cmV0dXJuIHRoaXM7IC8vIGZvciBjaGFpbmluZ1xuXHR9LFxuXG5cblx0dHJpZ2dlcldpdGg6IGZ1bmN0aW9uKHR5cGVzLCBjb250ZXh0LCBhcmdzKSB7XG5cblx0XHQvLyBgdHJpZ2dlckhhbmRsZXJgIGlzIGxlc3MgcmVsaWFudCBvbiB0aGUgRE9NIGNvbXBhcmVkIHRvIGB0cmlnZ2VyYC5cblx0XHQvLyBwYXNzIGluIFwiZXh0cmFcIiBpbmZvIHRvIHRoZSBpbnRlcmNlcHQuXG5cdFx0JCh0aGlzKS50cmlnZ2VySGFuZGxlcih0eXBlcywgeyBjb250ZXh0OiBjb250ZXh0LCBhcmdzOiBhcmdzIH0pO1xuXG5cdFx0cmV0dXJuIHRoaXM7IC8vIGZvciBjaGFpbmluZ1xuXHR9XG5cbn07XG5cbjs7XG5cbi8qXG5VdGlsaXR5IG1ldGhvZHMgZm9yIGVhc2lseSBsaXN0ZW5pbmcgdG8gZXZlbnRzIG9uIGFub3RoZXIgb2JqZWN0LFxuYW5kIG1vcmUgaW1wb3J0YW50bHksIGVhc2lseSB1bmxpc3RlbmluZyBmcm9tIHRoZW0uXG4qL1xudmFyIExpc3RlbmVyTWl4aW4gPSBGQy5MaXN0ZW5lck1peGluID0gKGZ1bmN0aW9uKCkge1xuXHR2YXIgZ3VpZCA9IDA7XG5cdHZhciBMaXN0ZW5lck1peGluID0ge1xuXG5cdFx0bGlzdGVuZXJJZDogbnVsbCxcblxuXHRcdC8qXG5cdFx0R2l2ZW4gYW4gYG90aGVyYCBvYmplY3QgdGhhdCBoYXMgb24vb2ZmIG1ldGhvZHMsIGJpbmQgdGhlIGdpdmVuIGBjYWxsYmFja2AgdG8gYW4gZXZlbnQgYnkgdGhlIGdpdmVuIG5hbWUuXG5cdFx0VGhlIGBjYWxsYmFja2Agd2lsbCBiZSBjYWxsZWQgd2l0aCB0aGUgYHRoaXNgIGNvbnRleHQgb2YgdGhlIG9iamVjdCB0aGF0IC5saXN0ZW5UbyBpcyBiZWluZyBjYWxsZWQgb24uXG5cdFx0Q2FuIGJlIGNhbGxlZDpcblx0XHRcdC5saXN0ZW5UbyhvdGhlciwgZXZlbnROYW1lLCBjYWxsYmFjaylcblx0XHRPUlxuXHRcdFx0Lmxpc3RlblRvKG90aGVyLCB7XG5cdFx0XHRcdGV2ZW50TmFtZTE6IGNhbGxiYWNrMSxcblx0XHRcdFx0ZXZlbnROYW1lMjogY2FsbGJhY2syXG5cdFx0XHR9KVxuXHRcdCovXG5cdFx0bGlzdGVuVG86IGZ1bmN0aW9uKG90aGVyLCBhcmcsIGNhbGxiYWNrKSB7XG5cdFx0XHRpZiAodHlwZW9mIGFyZyA9PT0gJ29iamVjdCcpIHsgLy8gZ2l2ZW4gZGljdGlvbmFyeSBvZiBjYWxsYmFja3Ncblx0XHRcdFx0Zm9yICh2YXIgZXZlbnROYW1lIGluIGFyZykge1xuXHRcdFx0XHRcdGlmIChhcmcuaGFzT3duUHJvcGVydHkoZXZlbnROYW1lKSkge1xuXHRcdFx0XHRcdFx0dGhpcy5saXN0ZW5UbyhvdGhlciwgZXZlbnROYW1lLCBhcmdbZXZlbnROYW1lXSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmICh0eXBlb2YgYXJnID09PSAnc3RyaW5nJykge1xuXHRcdFx0XHRvdGhlci5vbihcblx0XHRcdFx0XHRhcmcgKyAnLicgKyB0aGlzLmdldExpc3RlbmVyTmFtZXNwYWNlKCksIC8vIHVzZSBldmVudCBuYW1lc3BhY2luZyB0byBpZGVudGlmeSB0aGlzIG9iamVjdFxuXHRcdFx0XHRcdCQucHJveHkoY2FsbGJhY2ssIHRoaXMpIC8vIGFsd2F5cyB1c2UgYHRoaXNgIGNvbnRleHRcblx0XHRcdFx0XHRcdC8vIHRoZSB1c3VhbGx5LXVuZGVzaXJlZCBqUXVlcnkgZ3VpZCBiZWhhdmlvciBkb2Vzbid0IG1hdHRlcixcblx0XHRcdFx0XHRcdC8vIGJlY2F1c2Ugd2UgYWx3YXlzIHVuYmluZCB2aWEgbmFtZXNwYWNlXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdC8qXG5cdFx0Q2F1c2VzIHRoZSBjdXJyZW50IG9iamVjdCB0byBzdG9wIGxpc3RlbmluZyB0byBldmVudHMgb24gdGhlIGBvdGhlcmAgb2JqZWN0LlxuXHRcdGBldmVudE5hbWVgIGlzIG9wdGlvbmFsLiBJZiBvbWl0dGVkLCB3aWxsIHN0b3AgbGlzdGVuaW5nIHRvIEFMTCBldmVudHMgb24gYG90aGVyYC5cblx0XHQqL1xuXHRcdHN0b3BMaXN0ZW5pbmdUbzogZnVuY3Rpb24ob3RoZXIsIGV2ZW50TmFtZSkge1xuXHRcdFx0b3RoZXIub2ZmKChldmVudE5hbWUgfHwgJycpICsgJy4nICsgdGhpcy5nZXRMaXN0ZW5lck5hbWVzcGFjZSgpKTtcblx0XHR9LFxuXG5cdFx0Lypcblx0XHRSZXR1cm5zIGEgc3RyaW5nLCB1bmlxdWUgdG8gdGhpcyBvYmplY3QsIHRvIGJlIHVzZWQgZm9yIGV2ZW50IG5hbWVzcGFjaW5nXG5cdFx0Ki9cblx0XHRnZXRMaXN0ZW5lck5hbWVzcGFjZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAodGhpcy5saXN0ZW5lcklkID09IG51bGwpIHtcblx0XHRcdFx0dGhpcy5saXN0ZW5lcklkID0gZ3VpZCsrO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuICdfbGlzdGVuZXInICsgdGhpcy5saXN0ZW5lcklkO1xuXHRcdH1cblxuXHR9O1xuXHRyZXR1cm4gTGlzdGVuZXJNaXhpbjtcbn0pKCk7XG47O1xuXG4vLyBzaW1wbGUgY2xhc3MgZm9yIHRvZ2dsZSBhIGBpc0lnbm9yaW5nTW91c2VgIGZsYWcgb24gZGVsYXlcbi8vIGluaXRNb3VzZUlnbm9yaW5nIG11c3QgZmlyc3QgYmUgY2FsbGVkLCB3aXRoIGEgbWlsbGlzZWNvbmQgZGVsYXkgc2V0dGluZy5cbnZhciBNb3VzZUlnbm9yZXJNaXhpbiA9IHtcblxuXHRpc0lnbm9yaW5nTW91c2U6IGZhbHNlLCAvLyBib29sXG5cdGRlbGF5VW5pZ25vcmVNb3VzZTogbnVsbCwgLy8gbWV0aG9kXG5cblxuXHRpbml0TW91c2VJZ25vcmluZzogZnVuY3Rpb24oZGVsYXkpIHtcblx0XHR0aGlzLmRlbGF5VW5pZ25vcmVNb3VzZSA9IGRlYm91bmNlKHByb3h5KHRoaXMsICd1bmlnbm9yZU1vdXNlJyksIGRlbGF5IHx8IDEwMDApO1xuXHR9LFxuXG5cblx0Ly8gdGVtcG9yYXJpbHkgaWdub3JlIG1vdXNlIGFjdGlvbnMgb24gc2VnbWVudHNcblx0dGVtcElnbm9yZU1vdXNlOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLmlzSWdub3JpbmdNb3VzZSA9IHRydWU7XG5cdFx0dGhpcy5kZWxheVVuaWdub3JlTW91c2UoKTtcblx0fSxcblxuXG5cdC8vIGRlbGF5VW5pZ25vcmVNb3VzZSBldmVudHVhbGx5IGNhbGxzIHRoaXNcblx0dW5pZ25vcmVNb3VzZTogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5pc0lnbm9yaW5nTW91c2UgPSBmYWxzZTtcblx0fVxuXG59O1xuXG47O1xuXG4vKiBBIHJlY3Rhbmd1bGFyIHBhbmVsIHRoYXQgaXMgYWJzb2x1dGVseSBwb3NpdGlvbmVkIG92ZXIgb3RoZXIgY29udGVudFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5PcHRpb25zOlxuXHQtIGNsYXNzTmFtZSAoc3RyaW5nKVxuXHQtIGNvbnRlbnQgKEhUTUwgc3RyaW5nIG9yIGpRdWVyeSBlbGVtZW50IHNldClcblx0LSBwYXJlbnRFbFxuXHQtIHRvcFxuXHQtIGxlZnRcblx0LSByaWdodCAodGhlIHggY29vcmQgb2Ygd2hlcmUgdGhlIHJpZ2h0IGVkZ2Ugc2hvdWxkIGJlLiBub3QgYSBcIkNTU1wiIHJpZ2h0KVxuXHQtIGF1dG9IaWRlIChib29sZWFuKVxuXHQtIHNob3cgKGNhbGxiYWNrKVxuXHQtIGhpZGUgKGNhbGxiYWNrKVxuKi9cblxudmFyIFBvcG92ZXIgPSBDbGFzcy5leHRlbmQoTGlzdGVuZXJNaXhpbiwge1xuXG5cdGlzSGlkZGVuOiB0cnVlLFxuXHRvcHRpb25zOiBudWxsLFxuXHRlbDogbnVsbCwgLy8gdGhlIGNvbnRhaW5lciBlbGVtZW50IGZvciB0aGUgcG9wb3Zlci4gZ2VuZXJhdGVkIGJ5IHRoaXMgb2JqZWN0XG5cdG1hcmdpbjogMTAsIC8vIHRoZSBzcGFjZSByZXF1aXJlZCBiZXR3ZWVuIHRoZSBwb3BvdmVyIGFuZCB0aGUgZWRnZXMgb2YgdGhlIHNjcm9sbCBjb250YWluZXJcblxuXG5cdGNvbnN0cnVjdG9yOiBmdW5jdGlvbihvcHRpb25zKSB7XG5cdFx0dGhpcy5vcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0fSxcblxuXG5cdC8vIFNob3dzIHRoZSBwb3BvdmVyIG9uIHRoZSBzcGVjaWZpZWQgcG9zaXRpb24uIFJlbmRlcnMgaXQgaWYgbm90IGFscmVhZHlcblx0c2hvdzogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHRoaXMuaXNIaWRkZW4pIHtcblx0XHRcdGlmICghdGhpcy5lbCkge1xuXHRcdFx0XHR0aGlzLnJlbmRlcigpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5lbC5zaG93KCk7XG5cdFx0XHR0aGlzLnBvc2l0aW9uKCk7XG5cdFx0XHR0aGlzLmlzSGlkZGVuID0gZmFsc2U7XG5cdFx0XHR0aGlzLnRyaWdnZXIoJ3Nob3cnKTtcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBIaWRlcyB0aGUgcG9wb3ZlciwgdGhyb3VnaCBDU1MsIGJ1dCBkb2VzIG5vdCByZW1vdmUgaXQgZnJvbSB0aGUgRE9NXG5cdGhpZGU6IGZ1bmN0aW9uKCkge1xuXHRcdGlmICghdGhpcy5pc0hpZGRlbikge1xuXHRcdFx0dGhpcy5lbC5oaWRlKCk7XG5cdFx0XHR0aGlzLmlzSGlkZGVuID0gdHJ1ZTtcblx0XHRcdHRoaXMudHJpZ2dlcignaGlkZScpO1xuXHRcdH1cblx0fSxcblxuXG5cdC8vIENyZWF0ZXMgYHRoaXMuZWxgIGFuZCByZW5kZXJzIGNvbnRlbnQgaW5zaWRlIG9mIGl0XG5cdHJlbmRlcjogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIF90aGlzID0gdGhpcztcblx0XHR2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcblxuXHRcdHRoaXMuZWwgPSAkKCc8ZGl2IGNsYXNzPVwiZmMtcG9wb3ZlclwiLz4nKVxuXHRcdFx0LmFkZENsYXNzKG9wdGlvbnMuY2xhc3NOYW1lIHx8ICcnKVxuXHRcdFx0LmNzcyh7XG5cdFx0XHRcdC8vIHBvc2l0aW9uIGluaXRpYWxseSB0byB0aGUgdG9wIGxlZnQgdG8gYXZvaWQgY3JlYXRpbmcgc2Nyb2xsYmFyc1xuXHRcdFx0XHR0b3A6IDAsXG5cdFx0XHRcdGxlZnQ6IDBcblx0XHRcdH0pXG5cdFx0XHQuYXBwZW5kKG9wdGlvbnMuY29udGVudClcblx0XHRcdC5hcHBlbmRUbyhvcHRpb25zLnBhcmVudEVsKTtcblxuXHRcdC8vIHdoZW4gYSBjbGljayBoYXBwZW5zIG9uIGFueXRoaW5nIGluc2lkZSB3aXRoIGEgJ2ZjLWNsb3NlJyBjbGFzc05hbWUsIGhpZGUgdGhlIHBvcG92ZXJcblx0XHR0aGlzLmVsLm9uKCdjbGljaycsICcuZmMtY2xvc2UnLCBmdW5jdGlvbigpIHtcblx0XHRcdF90aGlzLmhpZGUoKTtcblx0XHR9KTtcblxuXHRcdGlmIChvcHRpb25zLmF1dG9IaWRlKSB7XG5cdFx0XHR0aGlzLmxpc3RlblRvKCQoZG9jdW1lbnQpLCAnbW91c2Vkb3duJywgdGhpcy5kb2N1bWVudE1vdXNlZG93bik7XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gVHJpZ2dlcmVkIHdoZW4gdGhlIHVzZXIgY2xpY2tzICphbnl3aGVyZSogaW4gdGhlIGRvY3VtZW50LCBmb3IgdGhlIGF1dG9IaWRlIGZlYXR1cmVcblx0ZG9jdW1lbnRNb3VzZWRvd246IGZ1bmN0aW9uKGV2KSB7XG5cdFx0Ly8gb25seSBoaWRlIHRoZSBwb3BvdmVyIGlmIHRoZSBjbGljayBoYXBwZW5lZCBvdXRzaWRlIHRoZSBwb3BvdmVyXG5cdFx0aWYgKHRoaXMuZWwgJiYgISQoZXYudGFyZ2V0KS5jbG9zZXN0KHRoaXMuZWwpLmxlbmd0aCkge1xuXHRcdFx0dGhpcy5oaWRlKCk7XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gSGlkZXMgYW5kIHVucmVnaXN0ZXJzIGFueSBoYW5kbGVyc1xuXHRyZW1vdmVFbGVtZW50OiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLmhpZGUoKTtcblxuXHRcdGlmICh0aGlzLmVsKSB7XG5cdFx0XHR0aGlzLmVsLnJlbW92ZSgpO1xuXHRcdFx0dGhpcy5lbCA9IG51bGw7XG5cdFx0fVxuXG5cdFx0dGhpcy5zdG9wTGlzdGVuaW5nVG8oJChkb2N1bWVudCksICdtb3VzZWRvd24nKTtcblx0fSxcblxuXG5cdC8vIFBvc2l0aW9ucyB0aGUgcG9wb3ZlciBvcHRpbWFsbHksIHVzaW5nIHRoZSB0b3AvbGVmdC9yaWdodCBvcHRpb25zXG5cdHBvc2l0aW9uOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcblx0XHR2YXIgb3JpZ2luID0gdGhpcy5lbC5vZmZzZXRQYXJlbnQoKS5vZmZzZXQoKTtcblx0XHR2YXIgd2lkdGggPSB0aGlzLmVsLm91dGVyV2lkdGgoKTtcblx0XHR2YXIgaGVpZ2h0ID0gdGhpcy5lbC5vdXRlckhlaWdodCgpO1xuXHRcdHZhciB3aW5kb3dFbCA9ICQod2luZG93KTtcblx0XHR2YXIgdmlld3BvcnRFbCA9IGdldFNjcm9sbFBhcmVudCh0aGlzLmVsKTtcblx0XHR2YXIgdmlld3BvcnRUb3A7XG5cdFx0dmFyIHZpZXdwb3J0TGVmdDtcblx0XHR2YXIgdmlld3BvcnRPZmZzZXQ7XG5cdFx0dmFyIHRvcDsgLy8gdGhlIFwicG9zaXRpb25cIiAobm90IFwib2Zmc2V0XCIpIHZhbHVlcyBmb3IgdGhlIHBvcG92ZXJcblx0XHR2YXIgbGVmdDsgLy9cblxuXHRcdC8vIGNvbXB1dGUgdG9wIGFuZCBsZWZ0XG5cdFx0dG9wID0gb3B0aW9ucy50b3AgfHwgMDtcblx0XHRpZiAob3B0aW9ucy5sZWZ0ICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdGxlZnQgPSBvcHRpb25zLmxlZnQ7XG5cdFx0fVxuXHRcdGVsc2UgaWYgKG9wdGlvbnMucmlnaHQgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0bGVmdCA9IG9wdGlvbnMucmlnaHQgLSB3aWR0aDsgLy8gZGVyaXZlIHRoZSBsZWZ0IHZhbHVlIGZyb20gdGhlIHJpZ2h0IHZhbHVlXG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0bGVmdCA9IDA7XG5cdFx0fVxuXG5cdFx0aWYgKHZpZXdwb3J0RWwuaXMod2luZG93KSB8fCB2aWV3cG9ydEVsLmlzKGRvY3VtZW50KSkgeyAvLyBub3JtYWxpemUgZ2V0U2Nyb2xsUGFyZW50J3MgcmVzdWx0XG5cdFx0XHR2aWV3cG9ydEVsID0gd2luZG93RWw7XG5cdFx0XHR2aWV3cG9ydFRvcCA9IDA7IC8vIHRoZSB3aW5kb3cgaXMgYWx3YXlzIGF0IHRoZSB0b3AgbGVmdFxuXHRcdFx0dmlld3BvcnRMZWZ0ID0gMDsgLy8gKGFuZCAub2Zmc2V0KCkgd29uJ3Qgd29yayBpZiBjYWxsZWQgaGVyZSlcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHR2aWV3cG9ydE9mZnNldCA9IHZpZXdwb3J0RWwub2Zmc2V0KCk7XG5cdFx0XHR2aWV3cG9ydFRvcCA9IHZpZXdwb3J0T2Zmc2V0LnRvcDtcblx0XHRcdHZpZXdwb3J0TGVmdCA9IHZpZXdwb3J0T2Zmc2V0LmxlZnQ7XG5cdFx0fVxuXG5cdFx0Ly8gaWYgdGhlIHdpbmRvdyBpcyBzY3JvbGxlZCwgaXQgY2F1c2VzIHRoZSB2aXNpYmxlIGFyZWEgdG8gYmUgZnVydGhlciBkb3duXG5cdFx0dmlld3BvcnRUb3AgKz0gd2luZG93RWwuc2Nyb2xsVG9wKCk7XG5cdFx0dmlld3BvcnRMZWZ0ICs9IHdpbmRvd0VsLnNjcm9sbExlZnQoKTtcblxuXHRcdC8vIGNvbnN0cmFpbiB0byB0aGUgdmlldyBwb3J0LiBpZiBjb25zdHJhaW5lZCBieSB0d28gZWRnZXMsIGdpdmUgcHJlY2VkZW5jZSB0byB0b3AvbGVmdFxuXHRcdGlmIChvcHRpb25zLnZpZXdwb3J0Q29uc3RyYWluICE9PSBmYWxzZSkge1xuXHRcdFx0dG9wID0gTWF0aC5taW4odG9wLCB2aWV3cG9ydFRvcCArIHZpZXdwb3J0RWwub3V0ZXJIZWlnaHQoKSAtIGhlaWdodCAtIHRoaXMubWFyZ2luKTtcblx0XHRcdHRvcCA9IE1hdGgubWF4KHRvcCwgdmlld3BvcnRUb3AgKyB0aGlzLm1hcmdpbik7XG5cdFx0XHRsZWZ0ID0gTWF0aC5taW4obGVmdCwgdmlld3BvcnRMZWZ0ICsgdmlld3BvcnRFbC5vdXRlcldpZHRoKCkgLSB3aWR0aCAtIHRoaXMubWFyZ2luKTtcblx0XHRcdGxlZnQgPSBNYXRoLm1heChsZWZ0LCB2aWV3cG9ydExlZnQgKyB0aGlzLm1hcmdpbik7XG5cdFx0fVxuXG5cdFx0dGhpcy5lbC5jc3Moe1xuXHRcdFx0dG9wOiB0b3AgLSBvcmlnaW4udG9wLFxuXHRcdFx0bGVmdDogbGVmdCAtIG9yaWdpbi5sZWZ0XG5cdFx0fSk7XG5cdH0sXG5cblxuXHQvLyBUcmlnZ2VycyBhIGNhbGxiYWNrLiBDYWxscyBhIGZ1bmN0aW9uIGluIHRoZSBvcHRpb24gaGFzaCBvZiB0aGUgc2FtZSBuYW1lLlxuXHQvLyBBcmd1bWVudHMgYmV5b25kIHRoZSBmaXJzdCBgbmFtZWAgYXJlIGZvcndhcmRlZCBvbi5cblx0Ly8gVE9ETzogYmV0dGVyIGNvZGUgcmV1c2UgZm9yIHRoaXMuIFJlcGVhdCBjb2RlXG5cdHRyaWdnZXI6IGZ1bmN0aW9uKG5hbWUpIHtcblx0XHRpZiAodGhpcy5vcHRpb25zW25hbWVdKSB7XG5cdFx0XHR0aGlzLm9wdGlvbnNbbmFtZV0uYXBwbHkodGhpcywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG5cdFx0fVxuXHR9XG5cbn0pO1xuXG47O1xuXG4vKlxuQSBjYWNoZSBmb3IgdGhlIGxlZnQvcmlnaHQvdG9wL2JvdHRvbS93aWR0aC9oZWlnaHQgdmFsdWVzIGZvciBvbmUgb3IgbW9yZSBlbGVtZW50cy5cbldvcmtzIHdpdGggYm90aCBvZmZzZXQgKGZyb20gdG9wbGVmdCBkb2N1bWVudCkgYW5kIHBvc2l0aW9uIChmcm9tIG9mZnNldFBhcmVudCkuXG5cbm9wdGlvbnM6XG4tIGVsc1xuLSBpc0hvcml6b250YWxcbi0gaXNWZXJ0aWNhbFxuKi9cbnZhciBDb29yZENhY2hlID0gRkMuQ29vcmRDYWNoZSA9IENsYXNzLmV4dGVuZCh7XG5cblx0ZWxzOiBudWxsLCAvLyBqUXVlcnkgc2V0IChhc3N1bWVkIHRvIGJlIHNpYmxpbmdzKVxuXHRmb3JjZWRPZmZzZXRQYXJlbnRFbDogbnVsbCwgLy8gb3B0aW9ucyBjYW4gb3ZlcnJpZGUgdGhlIG5hdHVyYWwgb2Zmc2V0UGFyZW50XG5cdG9yaWdpbjogbnVsbCwgLy8ge2xlZnQsdG9wfSBwb3NpdGlvbiBvZiBvZmZzZXRQYXJlbnQgb2YgZWxzXG5cdGJvdW5kaW5nUmVjdDogbnVsbCwgLy8gY29uc3RyYWluIGNvcmRpbmF0ZXMgdG8gdGhpcyByZWN0YW5nbGUuIHtsZWZ0LHJpZ2h0LHRvcCxib3R0b219IG9yIG51bGxcblx0aXNIb3Jpem9udGFsOiBmYWxzZSwgLy8gd2hldGhlciB0byBxdWVyeSBmb3IgbGVmdC9yaWdodC93aWR0aFxuXHRpc1ZlcnRpY2FsOiBmYWxzZSwgLy8gd2hldGhlciB0byBxdWVyeSBmb3IgdG9wL2JvdHRvbS9oZWlnaHRcblxuXHQvLyBhcnJheXMgb2YgY29vcmRpbmF0ZXMgKG9mZnNldHMgZnJvbSB0b3BsZWZ0IG9mIGRvY3VtZW50KVxuXHRsZWZ0czogbnVsbCxcblx0cmlnaHRzOiBudWxsLFxuXHR0b3BzOiBudWxsLFxuXHRib3R0b21zOiBudWxsLFxuXG5cblx0Y29uc3RydWN0b3I6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0XHR0aGlzLmVscyA9ICQob3B0aW9ucy5lbHMpO1xuXHRcdHRoaXMuaXNIb3Jpem9udGFsID0gb3B0aW9ucy5pc0hvcml6b250YWw7XG5cdFx0dGhpcy5pc1ZlcnRpY2FsID0gb3B0aW9ucy5pc1ZlcnRpY2FsO1xuXHRcdHRoaXMuZm9yY2VkT2Zmc2V0UGFyZW50RWwgPSBvcHRpb25zLm9mZnNldFBhcmVudCA/ICQob3B0aW9ucy5vZmZzZXRQYXJlbnQpIDogbnVsbDtcblx0fSxcblxuXG5cdC8vIFF1ZXJpZXMgdGhlIGVscyBmb3IgY29vcmRpbmF0ZXMgYW5kIHN0b3JlcyB0aGVtLlxuXHQvLyBDYWxsIHRoaXMgbWV0aG9kIGJlZm9yZSB1c2luZyBhbmQgb2YgdGhlIGdldCogbWV0aG9kcyBiZWxvdy5cblx0YnVpbGQ6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBvZmZzZXRQYXJlbnRFbCA9IHRoaXMuZm9yY2VkT2Zmc2V0UGFyZW50RWw7XG5cdFx0aWYgKCFvZmZzZXRQYXJlbnRFbCAmJiB0aGlzLmVscy5sZW5ndGggPiAwKSB7XG5cdFx0XHRvZmZzZXRQYXJlbnRFbCA9IHRoaXMuZWxzLmVxKDApLm9mZnNldFBhcmVudCgpO1xuXHRcdH1cblxuXHRcdHRoaXMub3JpZ2luID0gb2Zmc2V0UGFyZW50RWwgP1xuXHRcdFx0b2Zmc2V0UGFyZW50RWwub2Zmc2V0KCkgOlxuXHRcdFx0bnVsbDtcblxuXHRcdHRoaXMuYm91bmRpbmdSZWN0ID0gdGhpcy5xdWVyeUJvdW5kaW5nUmVjdCgpO1xuXG5cdFx0aWYgKHRoaXMuaXNIb3Jpem9udGFsKSB7XG5cdFx0XHR0aGlzLmJ1aWxkRWxIb3Jpem9udGFscygpO1xuXHRcdH1cblx0XHRpZiAodGhpcy5pc1ZlcnRpY2FsKSB7XG5cdFx0XHR0aGlzLmJ1aWxkRWxWZXJ0aWNhbHMoKTtcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBEZXN0cm95cyBhbGwgaW50ZXJuYWwgZGF0YSBhYm91dCBjb29yZGluYXRlcywgZnJlZWluZyBtZW1vcnlcblx0Y2xlYXI6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMub3JpZ2luID0gbnVsbDtcblx0XHR0aGlzLmJvdW5kaW5nUmVjdCA9IG51bGw7XG5cdFx0dGhpcy5sZWZ0cyA9IG51bGw7XG5cdFx0dGhpcy5yaWdodHMgPSBudWxsO1xuXHRcdHRoaXMudG9wcyA9IG51bGw7XG5cdFx0dGhpcy5ib3R0b21zID0gbnVsbDtcblx0fSxcblxuXG5cdC8vIFdoZW4gY2FsbGVkLCBpZiBjb29yZCBjYWNoZXMgYXJlbid0IGJ1aWx0LCBidWlsZHMgdGhlbVxuXHRlbnN1cmVCdWlsdDogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCF0aGlzLm9yaWdpbikge1xuXHRcdFx0dGhpcy5idWlsZCgpO1xuXHRcdH1cblx0fSxcblxuXG5cdC8vIFBvcHVsYXRlcyB0aGUgbGVmdC9yaWdodCBpbnRlcm5hbCBjb29yZGluYXRlIGFycmF5c1xuXHRidWlsZEVsSG9yaXpvbnRhbHM6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBsZWZ0cyA9IFtdO1xuXHRcdHZhciByaWdodHMgPSBbXTtcblxuXHRcdHRoaXMuZWxzLmVhY2goZnVuY3Rpb24oaSwgbm9kZSkge1xuXHRcdFx0dmFyIGVsID0gJChub2RlKTtcblx0XHRcdHZhciBsZWZ0ID0gZWwub2Zmc2V0KCkubGVmdDtcblx0XHRcdHZhciB3aWR0aCA9IGVsLm91dGVyV2lkdGgoKTtcblxuXHRcdFx0bGVmdHMucHVzaChsZWZ0KTtcblx0XHRcdHJpZ2h0cy5wdXNoKGxlZnQgKyB3aWR0aCk7XG5cdFx0fSk7XG5cblx0XHR0aGlzLmxlZnRzID0gbGVmdHM7XG5cdFx0dGhpcy5yaWdodHMgPSByaWdodHM7XG5cdH0sXG5cblxuXHQvLyBQb3B1bGF0ZXMgdGhlIHRvcC9ib3R0b20gaW50ZXJuYWwgY29vcmRpbmF0ZSBhcnJheXNcblx0YnVpbGRFbFZlcnRpY2FsczogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHRvcHMgPSBbXTtcblx0XHR2YXIgYm90dG9tcyA9IFtdO1xuXG5cdFx0dGhpcy5lbHMuZWFjaChmdW5jdGlvbihpLCBub2RlKSB7XG5cdFx0XHR2YXIgZWwgPSAkKG5vZGUpO1xuXHRcdFx0dmFyIHRvcCA9IGVsLm9mZnNldCgpLnRvcDtcblx0XHRcdHZhciBoZWlnaHQgPSBlbC5vdXRlckhlaWdodCgpO1xuXG5cdFx0XHR0b3BzLnB1c2godG9wKTtcblx0XHRcdGJvdHRvbXMucHVzaCh0b3AgKyBoZWlnaHQpO1xuXHRcdH0pO1xuXG5cdFx0dGhpcy50b3BzID0gdG9wcztcblx0XHR0aGlzLmJvdHRvbXMgPSBib3R0b21zO1xuXHR9LFxuXG5cblx0Ly8gR2l2ZW4gYSBsZWZ0IG9mZnNldCAoZnJvbSBkb2N1bWVudCBsZWZ0KSwgcmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGVsIHRoYXQgaXQgaG9yaXpvbnRhbGx5IGludGVyc2VjdHMuXG5cdC8vIElmIG5vIGludGVyc2VjdGlvbiBpcyBtYWRlLCByZXR1cm5zIHVuZGVmaW5lZC5cblx0Z2V0SG9yaXpvbnRhbEluZGV4OiBmdW5jdGlvbihsZWZ0T2Zmc2V0KSB7XG5cdFx0dGhpcy5lbnN1cmVCdWlsdCgpO1xuXG5cdFx0dmFyIGxlZnRzID0gdGhpcy5sZWZ0cztcblx0XHR2YXIgcmlnaHRzID0gdGhpcy5yaWdodHM7XG5cdFx0dmFyIGxlbiA9IGxlZnRzLmxlbmd0aDtcblx0XHR2YXIgaTtcblxuXHRcdGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHRcdFx0aWYgKGxlZnRPZmZzZXQgPj0gbGVmdHNbaV0gJiYgbGVmdE9mZnNldCA8IHJpZ2h0c1tpXSkge1xuXHRcdFx0XHRyZXR1cm4gaTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblxuXHQvLyBHaXZlbiBhIHRvcCBvZmZzZXQgKGZyb20gZG9jdW1lbnQgdG9wKSwgcmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGVsIHRoYXQgaXQgdmVydGljYWxseSBpbnRlcnNlY3RzLlxuXHQvLyBJZiBubyBpbnRlcnNlY3Rpb24gaXMgbWFkZSwgcmV0dXJucyB1bmRlZmluZWQuXG5cdGdldFZlcnRpY2FsSW5kZXg6IGZ1bmN0aW9uKHRvcE9mZnNldCkge1xuXHRcdHRoaXMuZW5zdXJlQnVpbHQoKTtcblxuXHRcdHZhciB0b3BzID0gdGhpcy50b3BzO1xuXHRcdHZhciBib3R0b21zID0gdGhpcy5ib3R0b21zO1xuXHRcdHZhciBsZW4gPSB0b3BzLmxlbmd0aDtcblx0XHR2YXIgaTtcblxuXHRcdGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHRcdFx0aWYgKHRvcE9mZnNldCA+PSB0b3BzW2ldICYmIHRvcE9mZnNldCA8IGJvdHRvbXNbaV0pIHtcblx0XHRcdFx0cmV0dXJuIGk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gR2V0cyB0aGUgbGVmdCBvZmZzZXQgKGZyb20gZG9jdW1lbnQgbGVmdCkgb2YgdGhlIGVsZW1lbnQgYXQgdGhlIGdpdmVuIGluZGV4XG5cdGdldExlZnRPZmZzZXQ6IGZ1bmN0aW9uKGxlZnRJbmRleCkge1xuXHRcdHRoaXMuZW5zdXJlQnVpbHQoKTtcblx0XHRyZXR1cm4gdGhpcy5sZWZ0c1tsZWZ0SW5kZXhdO1xuXHR9LFxuXG5cblx0Ly8gR2V0cyB0aGUgbGVmdCBwb3NpdGlvbiAoZnJvbSBvZmZzZXRQYXJlbnQgbGVmdCkgb2YgdGhlIGVsZW1lbnQgYXQgdGhlIGdpdmVuIGluZGV4XG5cdGdldExlZnRQb3NpdGlvbjogZnVuY3Rpb24obGVmdEluZGV4KSB7XG5cdFx0dGhpcy5lbnN1cmVCdWlsdCgpO1xuXHRcdHJldHVybiB0aGlzLmxlZnRzW2xlZnRJbmRleF0gLSB0aGlzLm9yaWdpbi5sZWZ0O1xuXHR9LFxuXG5cblx0Ly8gR2V0cyB0aGUgcmlnaHQgb2Zmc2V0IChmcm9tIGRvY3VtZW50IGxlZnQpIG9mIHRoZSBlbGVtZW50IGF0IHRoZSBnaXZlbiBpbmRleC5cblx0Ly8gVGhpcyB2YWx1ZSBpcyBOT1QgcmVsYXRpdmUgdG8gdGhlIGRvY3VtZW50J3MgcmlnaHQgZWRnZSwgbGlrZSB0aGUgQ1NTIGNvbmNlcHQgb2YgXCJyaWdodFwiIHdvdWxkIGJlLlxuXHRnZXRSaWdodE9mZnNldDogZnVuY3Rpb24obGVmdEluZGV4KSB7XG5cdFx0dGhpcy5lbnN1cmVCdWlsdCgpO1xuXHRcdHJldHVybiB0aGlzLnJpZ2h0c1tsZWZ0SW5kZXhdO1xuXHR9LFxuXG5cblx0Ly8gR2V0cyB0aGUgcmlnaHQgcG9zaXRpb24gKGZyb20gb2Zmc2V0UGFyZW50IGxlZnQpIG9mIHRoZSBlbGVtZW50IGF0IHRoZSBnaXZlbiBpbmRleC5cblx0Ly8gVGhpcyB2YWx1ZSBpcyBOT1QgcmVsYXRpdmUgdG8gdGhlIG9mZnNldFBhcmVudCdzIHJpZ2h0IGVkZ2UsIGxpa2UgdGhlIENTUyBjb25jZXB0IG9mIFwicmlnaHRcIiB3b3VsZCBiZS5cblx0Z2V0UmlnaHRQb3NpdGlvbjogZnVuY3Rpb24obGVmdEluZGV4KSB7XG5cdFx0dGhpcy5lbnN1cmVCdWlsdCgpO1xuXHRcdHJldHVybiB0aGlzLnJpZ2h0c1tsZWZ0SW5kZXhdIC0gdGhpcy5vcmlnaW4ubGVmdDtcblx0fSxcblxuXG5cdC8vIEdldHMgdGhlIHdpZHRoIG9mIHRoZSBlbGVtZW50IGF0IHRoZSBnaXZlbiBpbmRleFxuXHRnZXRXaWR0aDogZnVuY3Rpb24obGVmdEluZGV4KSB7XG5cdFx0dGhpcy5lbnN1cmVCdWlsdCgpO1xuXHRcdHJldHVybiB0aGlzLnJpZ2h0c1tsZWZ0SW5kZXhdIC0gdGhpcy5sZWZ0c1tsZWZ0SW5kZXhdO1xuXHR9LFxuXG5cblx0Ly8gR2V0cyB0aGUgdG9wIG9mZnNldCAoZnJvbSBkb2N1bWVudCB0b3ApIG9mIHRoZSBlbGVtZW50IGF0IHRoZSBnaXZlbiBpbmRleFxuXHRnZXRUb3BPZmZzZXQ6IGZ1bmN0aW9uKHRvcEluZGV4KSB7XG5cdFx0dGhpcy5lbnN1cmVCdWlsdCgpO1xuXHRcdHJldHVybiB0aGlzLnRvcHNbdG9wSW5kZXhdO1xuXHR9LFxuXG5cblx0Ly8gR2V0cyB0aGUgdG9wIHBvc2l0aW9uIChmcm9tIG9mZnNldFBhcmVudCB0b3ApIG9mIHRoZSBlbGVtZW50IGF0IHRoZSBnaXZlbiBwb3NpdGlvblxuXHRnZXRUb3BQb3NpdGlvbjogZnVuY3Rpb24odG9wSW5kZXgpIHtcblx0XHR0aGlzLmVuc3VyZUJ1aWx0KCk7XG5cdFx0cmV0dXJuIHRoaXMudG9wc1t0b3BJbmRleF0gLSB0aGlzLm9yaWdpbi50b3A7XG5cdH0sXG5cblx0Ly8gR2V0cyB0aGUgYm90dG9tIG9mZnNldCAoZnJvbSB0aGUgZG9jdW1lbnQgdG9wKSBvZiB0aGUgZWxlbWVudCBhdCB0aGUgZ2l2ZW4gaW5kZXguXG5cdC8vIFRoaXMgdmFsdWUgaXMgTk9UIHJlbGF0aXZlIHRvIHRoZSBvZmZzZXRQYXJlbnQncyBib3R0b20gZWRnZSwgbGlrZSB0aGUgQ1NTIGNvbmNlcHQgb2YgXCJib3R0b21cIiB3b3VsZCBiZS5cblx0Z2V0Qm90dG9tT2Zmc2V0OiBmdW5jdGlvbih0b3BJbmRleCkge1xuXHRcdHRoaXMuZW5zdXJlQnVpbHQoKTtcblx0XHRyZXR1cm4gdGhpcy5ib3R0b21zW3RvcEluZGV4XTtcblx0fSxcblxuXG5cdC8vIEdldHMgdGhlIGJvdHRvbSBwb3NpdGlvbiAoZnJvbSB0aGUgb2Zmc2V0UGFyZW50IHRvcCkgb2YgdGhlIGVsZW1lbnQgYXQgdGhlIGdpdmVuIGluZGV4LlxuXHQvLyBUaGlzIHZhbHVlIGlzIE5PVCByZWxhdGl2ZSB0byB0aGUgb2Zmc2V0UGFyZW50J3MgYm90dG9tIGVkZ2UsIGxpa2UgdGhlIENTUyBjb25jZXB0IG9mIFwiYm90dG9tXCIgd291bGQgYmUuXG5cdGdldEJvdHRvbVBvc2l0aW9uOiBmdW5jdGlvbih0b3BJbmRleCkge1xuXHRcdHRoaXMuZW5zdXJlQnVpbHQoKTtcblx0XHRyZXR1cm4gdGhpcy5ib3R0b21zW3RvcEluZGV4XSAtIHRoaXMub3JpZ2luLnRvcDtcblx0fSxcblxuXG5cdC8vIEdldHMgdGhlIGhlaWdodCBvZiB0aGUgZWxlbWVudCBhdCB0aGUgZ2l2ZW4gaW5kZXhcblx0Z2V0SGVpZ2h0OiBmdW5jdGlvbih0b3BJbmRleCkge1xuXHRcdHRoaXMuZW5zdXJlQnVpbHQoKTtcblx0XHRyZXR1cm4gdGhpcy5ib3R0b21zW3RvcEluZGV4XSAtIHRoaXMudG9wc1t0b3BJbmRleF07XG5cdH0sXG5cblxuXHQvLyBCb3VuZGluZyBSZWN0XG5cdC8vIFRPRE86IGRlY291cGxlIHRoaXMgZnJvbSBDb29yZENhY2hlXG5cblx0Ly8gQ29tcHV0ZSBhbmQgcmV0dXJuIHdoYXQgdGhlIGVsZW1lbnRzJyBib3VuZGluZyByZWN0YW5nbGUgaXMsIGZyb20gdGhlIHVzZXIncyBwZXJzcGVjdGl2ZS5cblx0Ly8gUmlnaHQgbm93LCBvbmx5IHJldHVybnMgYSByZWN0YW5nbGUgaWYgY29uc3RyYWluZWQgYnkgYW4gb3ZlcmZsb3c6c2Nyb2xsIGVsZW1lbnQuXG5cdC8vIFJldHVybnMgbnVsbCBpZiB0aGVyZSBhcmUgbm8gZWxlbWVudHNcblx0cXVlcnlCb3VuZGluZ1JlY3Q6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBzY3JvbGxQYXJlbnRFbDtcblxuXHRcdGlmICh0aGlzLmVscy5sZW5ndGggPiAwKSB7XG5cdFx0XHRzY3JvbGxQYXJlbnRFbCA9IGdldFNjcm9sbFBhcmVudCh0aGlzLmVscy5lcSgwKSk7XG5cblx0XHRcdGlmICghc2Nyb2xsUGFyZW50RWwuaXMoZG9jdW1lbnQpKSB7XG5cdFx0XHRcdHJldHVybiBnZXRDbGllbnRSZWN0KHNjcm9sbFBhcmVudEVsKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gbnVsbDtcblx0fSxcblxuXHRpc1BvaW50SW5Cb3VuZHM6IGZ1bmN0aW9uKGxlZnRPZmZzZXQsIHRvcE9mZnNldCkge1xuXHRcdHJldHVybiB0aGlzLmlzTGVmdEluQm91bmRzKGxlZnRPZmZzZXQpICYmIHRoaXMuaXNUb3BJbkJvdW5kcyh0b3BPZmZzZXQpO1xuXHR9LFxuXG5cdGlzTGVmdEluQm91bmRzOiBmdW5jdGlvbihsZWZ0T2Zmc2V0KSB7XG5cdFx0cmV0dXJuICF0aGlzLmJvdW5kaW5nUmVjdCB8fCAobGVmdE9mZnNldCA+PSB0aGlzLmJvdW5kaW5nUmVjdC5sZWZ0ICYmIGxlZnRPZmZzZXQgPCB0aGlzLmJvdW5kaW5nUmVjdC5yaWdodCk7XG5cdH0sXG5cblx0aXNUb3BJbkJvdW5kczogZnVuY3Rpb24odG9wT2Zmc2V0KSB7XG5cdFx0cmV0dXJuICF0aGlzLmJvdW5kaW5nUmVjdCB8fCAodG9wT2Zmc2V0ID49IHRoaXMuYm91bmRpbmdSZWN0LnRvcCAmJiB0b3BPZmZzZXQgPCB0aGlzLmJvdW5kaW5nUmVjdC5ib3R0b20pO1xuXHR9XG5cbn0pO1xuXG47O1xuXG4vKiBUcmFja3MgYSBkcmFnJ3MgbW91c2UgbW92ZW1lbnQsIGZpcmluZyB2YXJpb3VzIGhhbmRsZXJzXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8vIFRPRE86IHVzZSBFbWl0dGVyXG5cbnZhciBEcmFnTGlzdGVuZXIgPSBGQy5EcmFnTGlzdGVuZXIgPSBDbGFzcy5leHRlbmQoTGlzdGVuZXJNaXhpbiwgTW91c2VJZ25vcmVyTWl4aW4sIHtcblxuXHRvcHRpb25zOiBudWxsLFxuXHRzdWJqZWN0RWw6IG51bGwsXG5cblx0Ly8gY29vcmRpbmF0ZXMgb2YgdGhlIGluaXRpYWwgbW91c2Vkb3duXG5cdG9yaWdpblg6IG51bGwsXG5cdG9yaWdpblk6IG51bGwsXG5cblx0Ly8gdGhlIHdyYXBwaW5nIGVsZW1lbnQgdGhhdCBzY3JvbGxzLCBvciBNSUdIVCBzY3JvbGwgaWYgdGhlcmUncyBvdmVyZmxvdy5cblx0Ly8gVE9ETzogZG8gdGhpcyBmb3Igd3JhcHBlcnMgdGhhdCBoYXZlIG92ZXJmbG93OmhpZGRlbiBhcyB3ZWxsLlxuXHRzY3JvbGxFbDogbnVsbCxcblxuXHRpc0ludGVyYWN0aW5nOiBmYWxzZSxcblx0aXNEaXN0YW5jZVN1cnBhc3NlZDogZmFsc2UsXG5cdGlzRGVsYXlFbmRlZDogZmFsc2UsXG5cdGlzRHJhZ2dpbmc6IGZhbHNlLFxuXHRpc1RvdWNoOiBmYWxzZSxcblxuXHRkZWxheTogbnVsbCxcblx0ZGVsYXlUaW1lb3V0SWQ6IG51bGwsXG5cdG1pbkRpc3RhbmNlOiBudWxsLFxuXG5cdGhhbmRsZVRvdWNoU2Nyb2xsUHJveHk6IG51bGwsIC8vIGNhbGxzIGhhbmRsZVRvdWNoU2Nyb2xsLCBhbHdheXMgYm91bmQgdG8gYHRoaXNgXG5cblxuXHRjb25zdHJ1Y3RvcjogZnVuY3Rpb24ob3B0aW9ucykge1xuXHRcdHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdFx0dGhpcy5oYW5kbGVUb3VjaFNjcm9sbFByb3h5ID0gcHJveHkodGhpcywgJ2hhbmRsZVRvdWNoU2Nyb2xsJyk7XG5cdFx0dGhpcy5pbml0TW91c2VJZ25vcmluZyg1MDApO1xuXHR9LFxuXG5cblx0Ly8gSW50ZXJhY3Rpb24gKGhpZ2gtbGV2ZWwpXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuXHRzdGFydEludGVyYWN0aW9uOiBmdW5jdGlvbihldiwgZXh0cmFPcHRpb25zKSB7XG5cdFx0dmFyIGlzVG91Y2ggPSBnZXRFdklzVG91Y2goZXYpO1xuXG5cdFx0aWYgKGV2LnR5cGUgPT09ICdtb3VzZWRvd24nKSB7XG5cdFx0XHRpZiAodGhpcy5pc0lnbm9yaW5nTW91c2UpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAoIWlzUHJpbWFyeU1vdXNlQnV0dG9uKGV2KSkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0ZXYucHJldmVudERlZmF1bHQoKTsgLy8gcHJldmVudHMgbmF0aXZlIHNlbGVjdGlvbiBpbiBtb3N0IGJyb3dzZXJzXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCF0aGlzLmlzSW50ZXJhY3RpbmcpIHtcblxuXHRcdFx0Ly8gcHJvY2VzcyBvcHRpb25zXG5cdFx0XHRleHRyYU9wdGlvbnMgPSBleHRyYU9wdGlvbnMgfHwge307XG5cdFx0XHR0aGlzLmRlbGF5ID0gZmlyc3REZWZpbmVkKGV4dHJhT3B0aW9ucy5kZWxheSwgdGhpcy5vcHRpb25zLmRlbGF5LCAwKTtcblx0XHRcdHRoaXMubWluRGlzdGFuY2UgPSBmaXJzdERlZmluZWQoZXh0cmFPcHRpb25zLmRpc3RhbmNlLCB0aGlzLm9wdGlvbnMuZGlzdGFuY2UsIDApO1xuXHRcdFx0dGhpcy5zdWJqZWN0RWwgPSB0aGlzLm9wdGlvbnMuc3ViamVjdEVsO1xuXG5cdFx0XHR0aGlzLmlzSW50ZXJhY3RpbmcgPSB0cnVlO1xuXHRcdFx0dGhpcy5pc1RvdWNoID0gaXNUb3VjaDtcblx0XHRcdHRoaXMuaXNEZWxheUVuZGVkID0gZmFsc2U7XG5cdFx0XHR0aGlzLmlzRGlzdGFuY2VTdXJwYXNzZWQgPSBmYWxzZTtcblxuXHRcdFx0dGhpcy5vcmlnaW5YID0gZ2V0RXZYKGV2KTtcblx0XHRcdHRoaXMub3JpZ2luWSA9IGdldEV2WShldik7XG5cdFx0XHR0aGlzLnNjcm9sbEVsID0gZ2V0U2Nyb2xsUGFyZW50KCQoZXYudGFyZ2V0KSk7XG5cblx0XHRcdHRoaXMuYmluZEhhbmRsZXJzKCk7XG5cdFx0XHR0aGlzLmluaXRBdXRvU2Nyb2xsKCk7XG5cdFx0XHR0aGlzLmhhbmRsZUludGVyYWN0aW9uU3RhcnQoZXYpO1xuXHRcdFx0dGhpcy5zdGFydERlbGF5KGV2KTtcblxuXHRcdFx0aWYgKCF0aGlzLm1pbkRpc3RhbmNlKSB7XG5cdFx0XHRcdHRoaXMuaGFuZGxlRGlzdGFuY2VTdXJwYXNzZWQoZXYpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXG5cdGhhbmRsZUludGVyYWN0aW9uU3RhcnQ6IGZ1bmN0aW9uKGV2KSB7XG5cdFx0dGhpcy50cmlnZ2VyKCdpbnRlcmFjdGlvblN0YXJ0JywgZXYpO1xuXHR9LFxuXG5cblx0ZW5kSW50ZXJhY3Rpb246IGZ1bmN0aW9uKGV2LCBpc0NhbmNlbGxlZCkge1xuXHRcdGlmICh0aGlzLmlzSW50ZXJhY3RpbmcpIHtcblx0XHRcdHRoaXMuZW5kRHJhZyhldik7XG5cblx0XHRcdGlmICh0aGlzLmRlbGF5VGltZW91dElkKSB7XG5cdFx0XHRcdGNsZWFyVGltZW91dCh0aGlzLmRlbGF5VGltZW91dElkKTtcblx0XHRcdFx0dGhpcy5kZWxheVRpbWVvdXRJZCA9IG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuZGVzdHJveUF1dG9TY3JvbGwoKTtcblx0XHRcdHRoaXMudW5iaW5kSGFuZGxlcnMoKTtcblxuXHRcdFx0dGhpcy5pc0ludGVyYWN0aW5nID0gZmFsc2U7XG5cdFx0XHR0aGlzLmhhbmRsZUludGVyYWN0aW9uRW5kKGV2LCBpc0NhbmNlbGxlZCk7XG5cblx0XHRcdC8vIGEgdG91Y2hzdGFydCt0b3VjaGVuZCBvbiB0aGUgc2FtZSBlbGVtZW50IHdpbGwgcmVzdWx0IGluIHRoZSBmb2xsb3dpbmcgYWRkaXRpb24gc2ltdWxhdGVkIGV2ZW50czpcblx0XHRcdC8vIG1vdXNlb3ZlciArIG1vdXNlb3V0ICsgY2xpY2tcblx0XHRcdC8vIGxldCdzIGlnbm9yZSB0aGVzZSBib2d1cyBldmVudHNcblx0XHRcdGlmICh0aGlzLmlzVG91Y2gpIHtcblx0XHRcdFx0dGhpcy50ZW1wSWdub3JlTW91c2UoKTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblxuXHRoYW5kbGVJbnRlcmFjdGlvbkVuZDogZnVuY3Rpb24oZXYsIGlzQ2FuY2VsbGVkKSB7XG5cdFx0dGhpcy50cmlnZ2VyKCdpbnRlcmFjdGlvbkVuZCcsIGV2LCBpc0NhbmNlbGxlZCB8fCBmYWxzZSk7XG5cdH0sXG5cblxuXHQvLyBCaW5kaW5nIFRvIERPTVxuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cblx0YmluZEhhbmRsZXJzOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXHRcdHZhciB0b3VjaFN0YXJ0SWdub3JlcyA9IDE7XG5cblx0XHRpZiAodGhpcy5pc1RvdWNoKSB7XG5cdFx0XHR0aGlzLmxpc3RlblRvKCQoZG9jdW1lbnQpLCB7XG5cdFx0XHRcdHRvdWNobW92ZTogdGhpcy5oYW5kbGVUb3VjaE1vdmUsXG5cdFx0XHRcdHRvdWNoZW5kOiB0aGlzLmVuZEludGVyYWN0aW9uLFxuXHRcdFx0XHR0b3VjaGNhbmNlbDogdGhpcy5lbmRJbnRlcmFjdGlvbixcblxuXHRcdFx0XHQvLyBTb21ldGltZXMgdG91Y2hlbmQgZG9lc24ndCBmaXJlXG5cdFx0XHRcdC8vIChjYW4ndCBmaWd1cmUgb3V0IHdoeS4gdG91Y2hjYW5jZWwgZG9lc24ndCBmaXJlIGVpdGhlci4gaGFzIHRvIGRvIHdpdGggc2Nyb2xsaW5nPylcblx0XHRcdFx0Ly8gSWYgYW5vdGhlciB0b3VjaHN0YXJ0IGhhcHBlbnMsIHdlIGtub3cgaXQncyBib2d1cywgc28gY2FuY2VsIHRoZSBkcmFnLlxuXHRcdFx0XHQvLyB0b3VjaGVuZCB3aWxsIGNvbnRpbnVlIHRvIGJlIGJyb2tlbiB1bnRpbCB1c2VyIGRvZXMgYSBzaG9ydHRhcC9zY3JvbGwsIGJ1dCB0aGlzIGlzIGJlc3Qgd2UgY2FuIGRvLlxuXHRcdFx0XHR0b3VjaHN0YXJ0OiBmdW5jdGlvbihldikge1xuXHRcdFx0XHRcdGlmICh0b3VjaFN0YXJ0SWdub3JlcykgeyAvLyBiaW5kSGFuZGxlcnMgaXMgY2FsbGVkIGZyb20gd2l0aGluIGEgdG91Y2hzdGFydCxcblx0XHRcdFx0XHRcdHRvdWNoU3RhcnRJZ25vcmVzLS07IC8vIGFuZCB3ZSBkb24ndCB3YW50IHRoaXMgdG8gZmlyZSBpbW1lZGlhdGVseSwgc28gaWdub3JlLlxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdF90aGlzLmVuZEludGVyYWN0aW9uKGV2LCB0cnVlKTsgLy8gaXNDYW5jZWxsZWQ9dHJ1ZVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdC8vIGxpc3RlbiB0byBBTEwgc2Nyb2xsIGFjdGlvbnMgb24gdGhlIHBhZ2Vcblx0XHRcdGlmIChcblx0XHRcdFx0IWJpbmRBbnlTY3JvbGwodGhpcy5oYW5kbGVUb3VjaFNjcm9sbFByb3h5KSAmJiAvLyBob3BlZnVsbHkgdGhpcyB3b3JrcyBhbmQgc2hvcnQtY2lyY3VpdHMgdGhlIHJlc3Rcblx0XHRcdFx0dGhpcy5zY3JvbGxFbCAvLyBvdGhlcndpc2UsIGF0dGFjaCBhIHNpbmdsZSBoYW5kbGVyIHRvIHRoaXNcblx0XHRcdCkge1xuXHRcdFx0XHR0aGlzLmxpc3RlblRvKHRoaXMuc2Nyb2xsRWwsICdzY3JvbGwnLCB0aGlzLmhhbmRsZVRvdWNoU2Nyb2xsKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHR0aGlzLmxpc3RlblRvKCQoZG9jdW1lbnQpLCB7XG5cdFx0XHRcdG1vdXNlbW92ZTogdGhpcy5oYW5kbGVNb3VzZU1vdmUsXG5cdFx0XHRcdG1vdXNldXA6IHRoaXMuZW5kSW50ZXJhY3Rpb25cblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHRoaXMubGlzdGVuVG8oJChkb2N1bWVudCksIHtcblx0XHRcdHNlbGVjdHN0YXJ0OiBwcmV2ZW50RGVmYXVsdCwgLy8gZG9uJ3QgYWxsb3cgc2VsZWN0aW9uIHdoaWxlIGRyYWdnaW5nXG5cdFx0XHRjb250ZXh0bWVudTogcHJldmVudERlZmF1bHQgLy8gbG9uZyB0YXBzIHdvdWxkIG9wZW4gbWVudSBvbiBDaHJvbWUgZGV2IHRvb2xzXG5cdFx0fSk7XG5cdH0sXG5cblxuXHR1bmJpbmRIYW5kbGVyczogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5zdG9wTGlzdGVuaW5nVG8oJChkb2N1bWVudCkpO1xuXG5cdFx0Ly8gdW5iaW5kIHNjcm9sbCBsaXN0ZW5pbmdcblx0XHR1bmJpbmRBbnlTY3JvbGwodGhpcy5oYW5kbGVUb3VjaFNjcm9sbFByb3h5KTtcblx0XHRpZiAodGhpcy5zY3JvbGxFbCkge1xuXHRcdFx0dGhpcy5zdG9wTGlzdGVuaW5nVG8odGhpcy5zY3JvbGxFbCwgJ3Njcm9sbCcpO1xuXHRcdH1cblx0fSxcblxuXG5cdC8vIERyYWcgKGhpZ2gtbGV2ZWwpXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuXHQvLyBleHRyYU9wdGlvbnMgaWdub3JlZCBpZiBkcmFnIGFscmVhZHkgc3RhcnRlZFxuXHRzdGFydERyYWc6IGZ1bmN0aW9uKGV2LCBleHRyYU9wdGlvbnMpIHtcblx0XHR0aGlzLnN0YXJ0SW50ZXJhY3Rpb24oZXYsIGV4dHJhT3B0aW9ucyk7IC8vIGVuc3VyZSBpbnRlcmFjdGlvbiBiZWdhblxuXG5cdFx0aWYgKCF0aGlzLmlzRHJhZ2dpbmcpIHtcblx0XHRcdHRoaXMuaXNEcmFnZ2luZyA9IHRydWU7XG5cdFx0XHR0aGlzLmhhbmRsZURyYWdTdGFydChldik7XG5cdFx0fVxuXHR9LFxuXG5cblx0aGFuZGxlRHJhZ1N0YXJ0OiBmdW5jdGlvbihldikge1xuXHRcdHRoaXMudHJpZ2dlcignZHJhZ1N0YXJ0JywgZXYpO1xuXHR9LFxuXG5cblx0aGFuZGxlTW92ZTogZnVuY3Rpb24oZXYpIHtcblx0XHR2YXIgZHggPSBnZXRFdlgoZXYpIC0gdGhpcy5vcmlnaW5YO1xuXHRcdHZhciBkeSA9IGdldEV2WShldikgLSB0aGlzLm9yaWdpblk7XG5cdFx0dmFyIG1pbkRpc3RhbmNlID0gdGhpcy5taW5EaXN0YW5jZTtcblx0XHR2YXIgZGlzdGFuY2VTcTsgLy8gY3VycmVudCBkaXN0YW5jZSBmcm9tIHRoZSBvcmlnaW4sIHNxdWFyZWRcblxuXHRcdGlmICghdGhpcy5pc0Rpc3RhbmNlU3VycGFzc2VkKSB7XG5cdFx0XHRkaXN0YW5jZVNxID0gZHggKiBkeCArIGR5ICogZHk7XG5cdFx0XHRpZiAoZGlzdGFuY2VTcSA+PSBtaW5EaXN0YW5jZSAqIG1pbkRpc3RhbmNlKSB7IC8vIHVzZSBweXRoYWdvcmVhbiB0aGVvcmVtXG5cdFx0XHRcdHRoaXMuaGFuZGxlRGlzdGFuY2VTdXJwYXNzZWQoZXYpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICh0aGlzLmlzRHJhZ2dpbmcpIHtcblx0XHRcdHRoaXMuaGFuZGxlRHJhZyhkeCwgZHksIGV2KTtcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBDYWxsZWQgd2hpbGUgdGhlIG1vdXNlIGlzIGJlaW5nIG1vdmVkIGFuZCB3aGVuIHdlIGtub3cgYSBsZWdpdGltYXRlIGRyYWcgaXMgdGFraW5nIHBsYWNlXG5cdGhhbmRsZURyYWc6IGZ1bmN0aW9uKGR4LCBkeSwgZXYpIHtcblx0XHR0aGlzLnRyaWdnZXIoJ2RyYWcnLCBkeCwgZHksIGV2KTtcblx0XHR0aGlzLnVwZGF0ZUF1dG9TY3JvbGwoZXYpOyAvLyB3aWxsIHBvc3NpYmx5IGNhdXNlIHNjcm9sbGluZ1xuXHR9LFxuXG5cblx0ZW5kRHJhZzogZnVuY3Rpb24oZXYpIHtcblx0XHRpZiAodGhpcy5pc0RyYWdnaW5nKSB7XG5cdFx0XHR0aGlzLmlzRHJhZ2dpbmcgPSBmYWxzZTtcblx0XHRcdHRoaXMuaGFuZGxlRHJhZ0VuZChldik7XG5cdFx0fVxuXHR9LFxuXG5cblx0aGFuZGxlRHJhZ0VuZDogZnVuY3Rpb24oZXYpIHtcblx0XHR0aGlzLnRyaWdnZXIoJ2RyYWdFbmQnLCBldik7XG5cdH0sXG5cblxuXHQvLyBEZWxheVxuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cblx0c3RhcnREZWxheTogZnVuY3Rpb24oaW5pdGlhbEV2KSB7XG5cdFx0dmFyIF90aGlzID0gdGhpcztcblxuXHRcdGlmICh0aGlzLmRlbGF5KSB7XG5cdFx0XHR0aGlzLmRlbGF5VGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0X3RoaXMuaGFuZGxlRGVsYXlFbmQoaW5pdGlhbEV2KTtcblx0XHRcdH0sIHRoaXMuZGVsYXkpO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdHRoaXMuaGFuZGxlRGVsYXlFbmQoaW5pdGlhbEV2KTtcblx0XHR9XG5cdH0sXG5cblxuXHRoYW5kbGVEZWxheUVuZDogZnVuY3Rpb24oaW5pdGlhbEV2KSB7XG5cdFx0dGhpcy5pc0RlbGF5RW5kZWQgPSB0cnVlO1xuXG5cdFx0aWYgKHRoaXMuaXNEaXN0YW5jZVN1cnBhc3NlZCkge1xuXHRcdFx0dGhpcy5zdGFydERyYWcoaW5pdGlhbEV2KTtcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBEaXN0YW5jZVxuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cblx0aGFuZGxlRGlzdGFuY2VTdXJwYXNzZWQ6IGZ1bmN0aW9uKGV2KSB7XG5cdFx0dGhpcy5pc0Rpc3RhbmNlU3VycGFzc2VkID0gdHJ1ZTtcblxuXHRcdGlmICh0aGlzLmlzRGVsYXlFbmRlZCkge1xuXHRcdFx0dGhpcy5zdGFydERyYWcoZXYpO1xuXHRcdH1cblx0fSxcblxuXG5cdC8vIE1vdXNlIC8gVG91Y2hcblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG5cdGhhbmRsZVRvdWNoTW92ZTogZnVuY3Rpb24oZXYpIHtcblx0XHQvLyBwcmV2ZW50IGluZXJ0aWEgYW5kIHRvdWNobW92ZS1zY3JvbGxpbmcgd2hpbGUgZHJhZ2dpbmdcblx0XHRpZiAodGhpcy5pc0RyYWdnaW5nKSB7XG5cdFx0XHRldi5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH1cblxuXHRcdHRoaXMuaGFuZGxlTW92ZShldik7XG5cdH0sXG5cblxuXHRoYW5kbGVNb3VzZU1vdmU6IGZ1bmN0aW9uKGV2KSB7XG5cdFx0dGhpcy5oYW5kbGVNb3ZlKGV2KTtcblx0fSxcblxuXG5cdC8vIFNjcm9sbGluZyAodW5yZWxhdGVkIHRvIGF1dG8tc2Nyb2xsKVxuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cblx0aGFuZGxlVG91Y2hTY3JvbGw6IGZ1bmN0aW9uKGV2KSB7XG5cdFx0Ly8gaWYgdGhlIGRyYWcgaXMgYmVpbmcgaW5pdGlhdGVkIGJ5IHRvdWNoLCBidXQgYSBzY3JvbGwgaGFwcGVucyBiZWZvcmVcblx0XHQvLyB0aGUgZHJhZy1pbml0aWF0aW5nIGRlbGF5IGlzIG92ZXIsIGNhbmNlbCB0aGUgZHJhZ1xuXHRcdGlmICghdGhpcy5pc0RyYWdnaW5nKSB7XG5cdFx0XHR0aGlzLmVuZEludGVyYWN0aW9uKGV2LCB0cnVlKTsgLy8gaXNDYW5jZWxsZWQ9dHJ1ZVxuXHRcdH1cblx0fSxcblxuXG5cdC8vIFV0aWxzXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuXHQvLyBUcmlnZ2VycyBhIGNhbGxiYWNrLiBDYWxscyBhIGZ1bmN0aW9uIGluIHRoZSBvcHRpb24gaGFzaCBvZiB0aGUgc2FtZSBuYW1lLlxuXHQvLyBBcmd1bWVudHMgYmV5b25kIHRoZSBmaXJzdCBgbmFtZWAgYXJlIGZvcndhcmRlZCBvbi5cblx0dHJpZ2dlcjogZnVuY3Rpb24obmFtZSkge1xuXHRcdGlmICh0aGlzLm9wdGlvbnNbbmFtZV0pIHtcblx0XHRcdHRoaXMub3B0aW9uc1tuYW1lXS5hcHBseSh0aGlzLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcblx0XHR9XG5cdFx0Ly8gbWFrZXMgX21ldGhvZHMgY2FsbGFibGUgYnkgZXZlbnQgbmFtZS4gVE9ETzoga2lsbCB0aGlzXG5cdFx0aWYgKHRoaXNbJ18nICsgbmFtZV0pIHtcblx0XHRcdHRoaXNbJ18nICsgbmFtZV0uYXBwbHkodGhpcywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG5cdFx0fVxuXHR9XG5cblxufSk7XG5cbjs7XG4vKlxudGhpcy5zY3JvbGxFbCBpcyBzZXQgaW4gRHJhZ0xpc3RlbmVyXG4qL1xuRHJhZ0xpc3RlbmVyLm1peGluKHtcblxuXHRpc0F1dG9TY3JvbGw6IGZhbHNlLFxuXG5cdHNjcm9sbEJvdW5kczogbnVsbCwgLy8geyB0b3AsIGJvdHRvbSwgbGVmdCwgcmlnaHQgfVxuXHRzY3JvbGxUb3BWZWw6IG51bGwsIC8vIHBpeGVscyBwZXIgc2Vjb25kXG5cdHNjcm9sbExlZnRWZWw6IG51bGwsIC8vIHBpeGVscyBwZXIgc2Vjb25kXG5cdHNjcm9sbEludGVydmFsSWQ6IG51bGwsIC8vIElEIG9mIHNldFRpbWVvdXQgZm9yIHNjcm9sbGluZyBhbmltYXRpb24gbG9vcFxuXG5cdC8vIGRlZmF1bHRzXG5cdHNjcm9sbFNlbnNpdGl2aXR5OiAzMCwgLy8gcGl4ZWxzIGZyb20gZWRnZSBmb3Igc2Nyb2xsaW5nIHRvIHN0YXJ0XG5cdHNjcm9sbFNwZWVkOiAyMDAsIC8vIHBpeGVscyBwZXIgc2Vjb25kLCBhdCBtYXhpbXVtIHNwZWVkXG5cdHNjcm9sbEludGVydmFsTXM6IDUwLCAvLyBtaWxsaXNlY29uZCB3YWl0IGJldHdlZW4gc2Nyb2xsIGluY3JlbWVudFxuXG5cblx0aW5pdEF1dG9TY3JvbGw6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBzY3JvbGxFbCA9IHRoaXMuc2Nyb2xsRWw7XG5cblx0XHR0aGlzLmlzQXV0b1Njcm9sbCA9XG5cdFx0XHR0aGlzLm9wdGlvbnMuc2Nyb2xsICYmXG5cdFx0XHRzY3JvbGxFbCAmJlxuXHRcdFx0IXNjcm9sbEVsLmlzKHdpbmRvdykgJiZcblx0XHRcdCFzY3JvbGxFbC5pcyhkb2N1bWVudCk7XG5cblx0XHRpZiAodGhpcy5pc0F1dG9TY3JvbGwpIHtcblx0XHRcdC8vIGRlYm91bmNlIG1ha2VzIHN1cmUgcmFwaWQgY2FsbHMgZG9uJ3QgaGFwcGVuXG5cdFx0XHR0aGlzLmxpc3RlblRvKHNjcm9sbEVsLCAnc2Nyb2xsJywgZGVib3VuY2UodGhpcy5oYW5kbGVEZWJvdW5jZWRTY3JvbGwsIDEwMCkpO1xuXHRcdH1cblx0fSxcblxuXG5cdGRlc3Ryb3lBdXRvU2Nyb2xsOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLmVuZEF1dG9TY3JvbGwoKTsgLy8ga2lsbCBhbnkgYW5pbWF0aW9uIGxvb3BcblxuXHRcdC8vIHJlbW92ZSB0aGUgc2Nyb2xsIGhhbmRsZXIgaWYgdGhlcmUgaXMgYSBzY3JvbGxFbFxuXHRcdGlmICh0aGlzLmlzQXV0b1Njcm9sbCkge1xuXHRcdFx0dGhpcy5zdG9wTGlzdGVuaW5nVG8odGhpcy5zY3JvbGxFbCwgJ3Njcm9sbCcpOyAvLyB3aWxsIHByb2JhYmx5IGdldCByZW1vdmVkIGJ5IHVuYmluZEhhbmRsZXJzIHRvbyA6KFxuXHRcdH1cblx0fSxcblxuXG5cdC8vIENvbXB1dGVzIGFuZCBzdG9yZXMgdGhlIGJvdW5kaW5nIHJlY3RhbmdsZSBvZiBzY3JvbGxFbFxuXHRjb21wdXRlU2Nyb2xsQm91bmRzOiBmdW5jdGlvbigpIHtcblx0XHRpZiAodGhpcy5pc0F1dG9TY3JvbGwpIHtcblx0XHRcdHRoaXMuc2Nyb2xsQm91bmRzID0gZ2V0T3V0ZXJSZWN0KHRoaXMuc2Nyb2xsRWwpO1xuXHRcdFx0Ly8gVE9ETzogdXNlIGdldENsaWVudFJlY3QgaW4gZnV0dXJlLiBidXQgcHJldmVudHMgYXV0byBzY3JvbGxpbmcgd2hlbiBvbiB0b3Agb2Ygc2Nyb2xsYmFyc1xuXHRcdH1cblx0fSxcblxuXG5cdC8vIENhbGxlZCB3aGVuIHRoZSBkcmFnZ2luZyBpcyBpbiBwcm9ncmVzcyBhbmQgc2Nyb2xsaW5nIHNob3VsZCBiZSB1cGRhdGVkXG5cdHVwZGF0ZUF1dG9TY3JvbGw6IGZ1bmN0aW9uKGV2KSB7XG5cdFx0dmFyIHNlbnNpdGl2aXR5ID0gdGhpcy5zY3JvbGxTZW5zaXRpdml0eTtcblx0XHR2YXIgYm91bmRzID0gdGhpcy5zY3JvbGxCb3VuZHM7XG5cdFx0dmFyIHRvcENsb3NlbmVzcywgYm90dG9tQ2xvc2VuZXNzO1xuXHRcdHZhciBsZWZ0Q2xvc2VuZXNzLCByaWdodENsb3NlbmVzcztcblx0XHR2YXIgdG9wVmVsID0gMDtcblx0XHR2YXIgbGVmdFZlbCA9IDA7XG5cblx0XHRpZiAoYm91bmRzKSB7IC8vIG9ubHkgc2Nyb2xsIGlmIHNjcm9sbEVsIGV4aXN0c1xuXG5cdFx0XHQvLyBjb21wdXRlIGNsb3NlbmVzcyB0byBlZGdlcy4gdmFsaWQgcmFuZ2UgaXMgZnJvbSAwLjAgLSAxLjBcblx0XHRcdHRvcENsb3NlbmVzcyA9IChzZW5zaXRpdml0eSAtIChnZXRFdlkoZXYpIC0gYm91bmRzLnRvcCkpIC8gc2Vuc2l0aXZpdHk7XG5cdFx0XHRib3R0b21DbG9zZW5lc3MgPSAoc2Vuc2l0aXZpdHkgLSAoYm91bmRzLmJvdHRvbSAtIGdldEV2WShldikpKSAvIHNlbnNpdGl2aXR5O1xuXHRcdFx0bGVmdENsb3NlbmVzcyA9IChzZW5zaXRpdml0eSAtIChnZXRFdlgoZXYpIC0gYm91bmRzLmxlZnQpKSAvIHNlbnNpdGl2aXR5O1xuXHRcdFx0cmlnaHRDbG9zZW5lc3MgPSAoc2Vuc2l0aXZpdHkgLSAoYm91bmRzLnJpZ2h0IC0gZ2V0RXZYKGV2KSkpIC8gc2Vuc2l0aXZpdHk7XG5cblx0XHRcdC8vIHRyYW5zbGF0ZSB2ZXJ0aWNhbCBjbG9zZW5lc3MgaW50byB2ZWxvY2l0eS5cblx0XHRcdC8vIG1vdXNlIG11c3QgYmUgY29tcGxldGVseSBpbiBib3VuZHMgZm9yIHZlbG9jaXR5IHRvIGhhcHBlbi5cblx0XHRcdGlmICh0b3BDbG9zZW5lc3MgPj0gMCAmJiB0b3BDbG9zZW5lc3MgPD0gMSkge1xuXHRcdFx0XHR0b3BWZWwgPSB0b3BDbG9zZW5lc3MgKiB0aGlzLnNjcm9sbFNwZWVkICogLTE7IC8vIG5lZ2F0aXZlLiBmb3Igc2Nyb2xsaW5nIHVwXG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmIChib3R0b21DbG9zZW5lc3MgPj0gMCAmJiBib3R0b21DbG9zZW5lc3MgPD0gMSkge1xuXHRcdFx0XHR0b3BWZWwgPSBib3R0b21DbG9zZW5lc3MgKiB0aGlzLnNjcm9sbFNwZWVkO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyB0cmFuc2xhdGUgaG9yaXpvbnRhbCBjbG9zZW5lc3MgaW50byB2ZWxvY2l0eVxuXHRcdFx0aWYgKGxlZnRDbG9zZW5lc3MgPj0gMCAmJiBsZWZ0Q2xvc2VuZXNzIDw9IDEpIHtcblx0XHRcdFx0bGVmdFZlbCA9IGxlZnRDbG9zZW5lc3MgKiB0aGlzLnNjcm9sbFNwZWVkICogLTE7IC8vIG5lZ2F0aXZlLiBmb3Igc2Nyb2xsaW5nIGxlZnRcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKHJpZ2h0Q2xvc2VuZXNzID49IDAgJiYgcmlnaHRDbG9zZW5lc3MgPD0gMSkge1xuXHRcdFx0XHRsZWZ0VmVsID0gcmlnaHRDbG9zZW5lc3MgKiB0aGlzLnNjcm9sbFNwZWVkO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHRoaXMuc2V0U2Nyb2xsVmVsKHRvcFZlbCwgbGVmdFZlbCk7XG5cdH0sXG5cblxuXHQvLyBTZXRzIHRoZSBzcGVlZC1vZi1zY3JvbGxpbmcgZm9yIHRoZSBzY3JvbGxFbFxuXHRzZXRTY3JvbGxWZWw6IGZ1bmN0aW9uKHRvcFZlbCwgbGVmdFZlbCkge1xuXG5cdFx0dGhpcy5zY3JvbGxUb3BWZWwgPSB0b3BWZWw7XG5cdFx0dGhpcy5zY3JvbGxMZWZ0VmVsID0gbGVmdFZlbDtcblxuXHRcdHRoaXMuY29uc3RyYWluU2Nyb2xsVmVsKCk7IC8vIG1hc3NhZ2VzIGludG8gcmVhbGlzdGljIHZhbHVlc1xuXG5cdFx0Ly8gaWYgdGhlcmUgaXMgbm9uLXplcm8gdmVsb2NpdHksIGFuZCBhbiBhbmltYXRpb24gbG9vcCBoYXNuJ3QgYWxyZWFkeSBzdGFydGVkLCB0aGVuIFNUQVJUXG5cdFx0aWYgKCh0aGlzLnNjcm9sbFRvcFZlbCB8fCB0aGlzLnNjcm9sbExlZnRWZWwpICYmICF0aGlzLnNjcm9sbEludGVydmFsSWQpIHtcblx0XHRcdHRoaXMuc2Nyb2xsSW50ZXJ2YWxJZCA9IHNldEludGVydmFsKFxuXHRcdFx0XHRwcm94eSh0aGlzLCAnc2Nyb2xsSW50ZXJ2YWxGdW5jJyksIC8vIHNjb3BlIHRvIGB0aGlzYFxuXHRcdFx0XHR0aGlzLnNjcm9sbEludGVydmFsTXNcblx0XHRcdCk7XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gRm9yY2VzIHNjcm9sbFRvcFZlbCBhbmQgc2Nyb2xsTGVmdFZlbCB0byBiZSB6ZXJvIGlmIHNjcm9sbGluZyBoYXMgYWxyZWFkeSBnb25lIGFsbCB0aGUgd2F5XG5cdGNvbnN0cmFpblNjcm9sbFZlbDogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGVsID0gdGhpcy5zY3JvbGxFbDtcblxuXHRcdGlmICh0aGlzLnNjcm9sbFRvcFZlbCA8IDApIHsgLy8gc2Nyb2xsaW5nIHVwP1xuXHRcdFx0aWYgKGVsLnNjcm9sbFRvcCgpIDw9IDApIHsgLy8gYWxyZWFkeSBzY3JvbGxlZCBhbGwgdGhlIHdheSB1cD9cblx0XHRcdFx0dGhpcy5zY3JvbGxUb3BWZWwgPSAwO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRlbHNlIGlmICh0aGlzLnNjcm9sbFRvcFZlbCA+IDApIHsgLy8gc2Nyb2xsaW5nIGRvd24/XG5cdFx0XHRpZiAoZWwuc2Nyb2xsVG9wKCkgKyBlbFswXS5jbGllbnRIZWlnaHQgPj0gZWxbMF0uc2Nyb2xsSGVpZ2h0KSB7IC8vIGFscmVhZHkgc2Nyb2xsZWQgYWxsIHRoZSB3YXkgZG93bj9cblx0XHRcdFx0dGhpcy5zY3JvbGxUb3BWZWwgPSAwO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICh0aGlzLnNjcm9sbExlZnRWZWwgPCAwKSB7IC8vIHNjcm9sbGluZyBsZWZ0P1xuXHRcdFx0aWYgKGVsLnNjcm9sbExlZnQoKSA8PSAwKSB7IC8vIGFscmVhZHkgc2Nyb2xsZWQgYWxsIHRoZSBsZWZ0P1xuXHRcdFx0XHR0aGlzLnNjcm9sbExlZnRWZWwgPSAwO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRlbHNlIGlmICh0aGlzLnNjcm9sbExlZnRWZWwgPiAwKSB7IC8vIHNjcm9sbGluZyByaWdodD9cblx0XHRcdGlmIChlbC5zY3JvbGxMZWZ0KCkgKyBlbFswXS5jbGllbnRXaWR0aCA+PSBlbFswXS5zY3JvbGxXaWR0aCkgeyAvLyBhbHJlYWR5IHNjcm9sbGVkIGFsbCB0aGUgd2F5IHJpZ2h0P1xuXHRcdFx0XHR0aGlzLnNjcm9sbExlZnRWZWwgPSAwO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXG5cdC8vIFRoaXMgZnVuY3Rpb24gZ2V0cyBjYWxsZWQgZHVyaW5nIGV2ZXJ5IGl0ZXJhdGlvbiBvZiB0aGUgc2Nyb2xsaW5nIGFuaW1hdGlvbiBsb29wXG5cdHNjcm9sbEludGVydmFsRnVuYzogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGVsID0gdGhpcy5zY3JvbGxFbDtcblx0XHR2YXIgZnJhYyA9IHRoaXMuc2Nyb2xsSW50ZXJ2YWxNcyAvIDEwMDA7IC8vIGNvbnNpZGVyaW5nIGFuaW1hdGlvbiBmcmVxdWVuY3ksIHdoYXQgdGhlIHZlbCBzaG91bGQgYmUgbXVsdCdkIGJ5XG5cblx0XHQvLyBjaGFuZ2UgdGhlIHZhbHVlIG9mIHNjcm9sbEVsJ3Mgc2Nyb2xsXG5cdFx0aWYgKHRoaXMuc2Nyb2xsVG9wVmVsKSB7XG5cdFx0XHRlbC5zY3JvbGxUb3AoZWwuc2Nyb2xsVG9wKCkgKyB0aGlzLnNjcm9sbFRvcFZlbCAqIGZyYWMpO1xuXHRcdH1cblx0XHRpZiAodGhpcy5zY3JvbGxMZWZ0VmVsKSB7XG5cdFx0XHRlbC5zY3JvbGxMZWZ0KGVsLnNjcm9sbExlZnQoKSArIHRoaXMuc2Nyb2xsTGVmdFZlbCAqIGZyYWMpO1xuXHRcdH1cblxuXHRcdHRoaXMuY29uc3RyYWluU2Nyb2xsVmVsKCk7IC8vIHNpbmNlIHRoZSBzY3JvbGwgdmFsdWVzIGNoYW5nZWQsIHJlY29tcHV0ZSB0aGUgdmVsb2NpdGllc1xuXG5cdFx0Ly8gaWYgc2Nyb2xsZWQgYWxsIHRoZSB3YXksIHdoaWNoIGNhdXNlcyB0aGUgdmVscyB0byBiZSB6ZXJvLCBzdG9wIHRoZSBhbmltYXRpb24gbG9vcFxuXHRcdGlmICghdGhpcy5zY3JvbGxUb3BWZWwgJiYgIXRoaXMuc2Nyb2xsTGVmdFZlbCkge1xuXHRcdFx0dGhpcy5lbmRBdXRvU2Nyb2xsKCk7XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gS2lsbHMgYW55IGV4aXN0aW5nIHNjcm9sbGluZyBhbmltYXRpb24gbG9vcFxuXHRlbmRBdXRvU2Nyb2xsOiBmdW5jdGlvbigpIHtcblx0XHRpZiAodGhpcy5zY3JvbGxJbnRlcnZhbElkKSB7XG5cdFx0XHRjbGVhckludGVydmFsKHRoaXMuc2Nyb2xsSW50ZXJ2YWxJZCk7XG5cdFx0XHR0aGlzLnNjcm9sbEludGVydmFsSWQgPSBudWxsO1xuXG5cdFx0XHR0aGlzLmhhbmRsZVNjcm9sbEVuZCgpO1xuXHRcdH1cblx0fSxcblxuXG5cdC8vIEdldCBjYWxsZWQgd2hlbiB0aGUgc2Nyb2xsRWwgaXMgc2Nyb2xsZWQgKE5PVEU6IHRoaXMgaXMgZGVsYXllZCB2aWEgZGVib3VuY2UpXG5cdGhhbmRsZURlYm91bmNlZFNjcm9sbDogZnVuY3Rpb24oKSB7XG5cdFx0Ly8gcmVjb21wdXRlIGFsbCBjb29yZGluYXRlcywgYnV0ICpvbmx5KiBpZiB0aGlzIGlzICpub3QqIHBhcnQgb2Ygb3VyIHNjcm9sbGluZyBhbmltYXRpb25cblx0XHRpZiAoIXRoaXMuc2Nyb2xsSW50ZXJ2YWxJZCkge1xuXHRcdFx0dGhpcy5oYW5kbGVTY3JvbGxFbmQoKTtcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBDYWxsZWQgd2hlbiBzY3JvbGxpbmcgaGFzIHN0b3BwZWQsIHdoZXRoZXIgdGhyb3VnaCBhdXRvIHNjcm9sbCwgb3IgdGhlIHVzZXIgc2Nyb2xsaW5nXG5cdGhhbmRsZVNjcm9sbEVuZDogZnVuY3Rpb24oKSB7XG5cdH1cblxufSk7XG47O1xuXG4vKiBUcmFja3MgbW91c2UgbW92ZW1lbnRzIG92ZXIgYSBjb21wb25lbnQgYW5kIHJhaXNlcyBldmVudHMgYWJvdXQgd2hpY2ggaGl0IHRoZSBtb3VzZSBpcyBvdmVyLlxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5vcHRpb25zOlxuLSBzdWJqZWN0RWxcbi0gc3ViamVjdENlbnRlclxuKi9cblxudmFyIEhpdERyYWdMaXN0ZW5lciA9IERyYWdMaXN0ZW5lci5leHRlbmQoe1xuXG5cdGNvbXBvbmVudDogbnVsbCwgLy8gY29udmVydHMgY29vcmRpbmF0ZXMgdG8gaGl0c1xuXHRcdC8vIG1ldGhvZHM6IHByZXBhcmVIaXRzLCByZWxlYXNlSGl0cywgcXVlcnlIaXRcblxuXHRvcmlnSGl0OiBudWxsLCAvLyB0aGUgaGl0IHRoZSBtb3VzZSB3YXMgb3ZlciB3aGVuIGxpc3RlbmluZyBzdGFydGVkXG5cdGhpdDogbnVsbCwgLy8gdGhlIGhpdCB0aGUgbW91c2UgaXMgb3ZlclxuXHRjb29yZEFkanVzdDogbnVsbCwgLy8gZGVsdGEgdGhhdCB3aWxsIGJlIGFkZGVkIHRvIHRoZSBtb3VzZSBjb29yZGluYXRlcyB3aGVuIGNvbXB1dGluZyBjb2xsaXNpb25zXG5cblxuXHRjb25zdHJ1Y3RvcjogZnVuY3Rpb24oY29tcG9uZW50LCBvcHRpb25zKSB7XG5cdFx0RHJhZ0xpc3RlbmVyLmNhbGwodGhpcywgb3B0aW9ucyk7IC8vIGNhbGwgdGhlIHN1cGVyLWNvbnN0cnVjdG9yXG5cblx0XHR0aGlzLmNvbXBvbmVudCA9IGNvbXBvbmVudDtcblx0fSxcblxuXG5cdC8vIENhbGxlZCB3aGVuIGRyYWcgbGlzdGVuaW5nIHN0YXJ0cyAoYnV0IGEgcmVhbCBkcmFnIGhhcyBub3QgbmVjZXNzYXJpbHkgYmVnYW4pLlxuXHQvLyBldiBtaWdodCBiZSB1bmRlZmluZWQgaWYgZHJhZ2dpbmcgd2FzIHN0YXJ0ZWQgbWFudWFsbHkuXG5cdGhhbmRsZUludGVyYWN0aW9uU3RhcnQ6IGZ1bmN0aW9uKGV2KSB7XG5cdFx0dmFyIHN1YmplY3RFbCA9IHRoaXMuc3ViamVjdEVsO1xuXHRcdHZhciBzdWJqZWN0UmVjdDtcblx0XHR2YXIgb3JpZ1BvaW50O1xuXHRcdHZhciBwb2ludDtcblxuXHRcdHRoaXMuY29tcHV0ZUNvb3JkcygpO1xuXG5cdFx0aWYgKGV2KSB7XG5cdFx0XHRvcmlnUG9pbnQgPSB7IGxlZnQ6IGdldEV2WChldiksIHRvcDogZ2V0RXZZKGV2KSB9O1xuXHRcdFx0cG9pbnQgPSBvcmlnUG9pbnQ7XG5cblx0XHRcdC8vIGNvbnN0cmFpbiB0aGUgcG9pbnQgdG8gYm91bmRzIG9mIHRoZSBlbGVtZW50IGJlaW5nIGRyYWdnZWRcblx0XHRcdGlmIChzdWJqZWN0RWwpIHtcblx0XHRcdFx0c3ViamVjdFJlY3QgPSBnZXRPdXRlclJlY3Qoc3ViamVjdEVsKTsgLy8gdXNlZCBmb3IgY2VudGVyaW5nIGFzIHdlbGxcblx0XHRcdFx0cG9pbnQgPSBjb25zdHJhaW5Qb2ludChwb2ludCwgc3ViamVjdFJlY3QpO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLm9yaWdIaXQgPSB0aGlzLnF1ZXJ5SGl0KHBvaW50LmxlZnQsIHBvaW50LnRvcCk7XG5cblx0XHRcdC8vIHRyZWF0IHRoZSBjZW50ZXIgb2YgdGhlIHN1YmplY3QgYXMgdGhlIGNvbGxpc2lvbiBwb2ludD9cblx0XHRcdGlmIChzdWJqZWN0RWwgJiYgdGhpcy5vcHRpb25zLnN1YmplY3RDZW50ZXIpIHtcblxuXHRcdFx0XHQvLyBvbmx5IGNvbnNpZGVyIHRoZSBhcmVhIHRoZSBzdWJqZWN0IG92ZXJsYXBzIHRoZSBoaXQuIGJlc3QgZm9yIGxhcmdlIHN1YmplY3RzLlxuXHRcdFx0XHQvLyBUT0RPOiBza2lwIHRoaXMgaWYgaGl0IGRpZG4ndCBzdXBwbHkgbGVmdC9yaWdodC90b3AvYm90dG9tXG5cdFx0XHRcdGlmICh0aGlzLm9yaWdIaXQpIHtcblx0XHRcdFx0XHRzdWJqZWN0UmVjdCA9IGludGVyc2VjdFJlY3RzKHRoaXMub3JpZ0hpdCwgc3ViamVjdFJlY3QpIHx8XG5cdFx0XHRcdFx0XHRzdWJqZWN0UmVjdDsgLy8gaW4gY2FzZSB0aGVyZSBpcyBubyBpbnRlcnNlY3Rpb25cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHBvaW50ID0gZ2V0UmVjdENlbnRlcihzdWJqZWN0UmVjdCk7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuY29vcmRBZGp1c3QgPSBkaWZmUG9pbnRzKHBvaW50LCBvcmlnUG9pbnQpOyAvLyBwb2ludCAtIG9yaWdQb2ludFxuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdHRoaXMub3JpZ0hpdCA9IG51bGw7XG5cdFx0XHR0aGlzLmNvb3JkQWRqdXN0ID0gbnVsbDtcblx0XHR9XG5cblx0XHQvLyBjYWxsIHRoZSBzdXBlci1tZXRob2QuIGRvIGl0IGFmdGVyIG9yaWdIaXQgaGFzIGJlZW4gY29tcHV0ZWRcblx0XHREcmFnTGlzdGVuZXIucHJvdG90eXBlLmhhbmRsZUludGVyYWN0aW9uU3RhcnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0fSxcblxuXG5cdC8vIFJlY29tcHV0ZXMgdGhlIGRyYWctY3JpdGljYWwgcG9zaXRpb25zIG9mIGVsZW1lbnRzXG5cdGNvbXB1dGVDb29yZHM6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuY29tcG9uZW50LnByZXBhcmVIaXRzKCk7XG5cdFx0dGhpcy5jb21wdXRlU2Nyb2xsQm91bmRzKCk7IC8vIHdoeSBpcyB0aGlzIGhlcmU/Pz8/Pz9cblx0fSxcblxuXG5cdC8vIENhbGxlZCB3aGVuIHRoZSBhY3R1YWwgZHJhZyBoYXMgc3RhcnRlZFxuXHRoYW5kbGVEcmFnU3RhcnQ6IGZ1bmN0aW9uKGV2KSB7XG5cdFx0dmFyIGhpdDtcblxuXHRcdERyYWdMaXN0ZW5lci5wcm90b3R5cGUuaGFuZGxlRHJhZ1N0YXJ0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IC8vIGNhbGwgdGhlIHN1cGVyLW1ldGhvZFxuXG5cdFx0Ly8gbWlnaHQgYmUgZGlmZmVyZW50IGZyb20gdGhpcy5vcmlnSGl0IGlmIHRoZSBtaW4tZGlzdGFuY2UgaXMgbGFyZ2Vcblx0XHRoaXQgPSB0aGlzLnF1ZXJ5SGl0KGdldEV2WChldiksIGdldEV2WShldikpO1xuXG5cdFx0Ly8gcmVwb3J0IHRoZSBpbml0aWFsIGhpdCB0aGUgbW91c2UgaXMgb3ZlclxuXHRcdC8vIGVzcGVjaWFsbHkgaW1wb3J0YW50IGlmIG5vIG1pbi1kaXN0YW5jZSBhbmQgZHJhZyBzdGFydHMgaW1tZWRpYXRlbHlcblx0XHRpZiAoaGl0KSB7XG5cdFx0XHR0aGlzLmhhbmRsZUhpdE92ZXIoaGl0KTtcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBDYWxsZWQgd2hlbiB0aGUgZHJhZyBtb3Zlc1xuXHRoYW5kbGVEcmFnOiBmdW5jdGlvbihkeCwgZHksIGV2KSB7XG5cdFx0dmFyIGhpdDtcblxuXHRcdERyYWdMaXN0ZW5lci5wcm90b3R5cGUuaGFuZGxlRHJhZy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyAvLyBjYWxsIHRoZSBzdXBlci1tZXRob2RcblxuXHRcdGhpdCA9IHRoaXMucXVlcnlIaXQoZ2V0RXZYKGV2KSwgZ2V0RXZZKGV2KSk7XG5cblx0XHRpZiAoIWlzSGl0c0VxdWFsKGhpdCwgdGhpcy5oaXQpKSB7IC8vIGEgZGlmZmVyZW50IGhpdCB0aGFuIGJlZm9yZT9cblx0XHRcdGlmICh0aGlzLmhpdCkge1xuXHRcdFx0XHR0aGlzLmhhbmRsZUhpdE91dCgpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGhpdCkge1xuXHRcdFx0XHR0aGlzLmhhbmRsZUhpdE92ZXIoaGl0KTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblxuXHQvLyBDYWxsZWQgd2hlbiBkcmFnZ2luZyBoYXMgYmVlbiBzdG9wcGVkXG5cdGhhbmRsZURyYWdFbmQ6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuaGFuZGxlSGl0RG9uZSgpO1xuXHRcdERyYWdMaXN0ZW5lci5wcm90b3R5cGUuaGFuZGxlRHJhZ0VuZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyAvLyBjYWxsIHRoZSBzdXBlci1tZXRob2Rcblx0fSxcblxuXG5cdC8vIENhbGxlZCB3aGVuIGEgdGhlIG1vdXNlIGhhcyBqdXN0IG1vdmVkIG92ZXIgYSBuZXcgaGl0XG5cdGhhbmRsZUhpdE92ZXI6IGZ1bmN0aW9uKGhpdCkge1xuXHRcdHZhciBpc09yaWcgPSBpc0hpdHNFcXVhbChoaXQsIHRoaXMub3JpZ0hpdCk7XG5cblx0XHR0aGlzLmhpdCA9IGhpdDtcblxuXHRcdHRoaXMudHJpZ2dlcignaGl0T3ZlcicsIHRoaXMuaGl0LCBpc09yaWcsIHRoaXMub3JpZ0hpdCk7XG5cdH0sXG5cblxuXHQvLyBDYWxsZWQgd2hlbiB0aGUgbW91c2UgaGFzIGp1c3QgbW92ZWQgb3V0IG9mIGEgaGl0XG5cdGhhbmRsZUhpdE91dDogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHRoaXMuaGl0KSB7XG5cdFx0XHR0aGlzLnRyaWdnZXIoJ2hpdE91dCcsIHRoaXMuaGl0KTtcblx0XHRcdHRoaXMuaGFuZGxlSGl0RG9uZSgpO1xuXHRcdFx0dGhpcy5oaXQgPSBudWxsO1xuXHRcdH1cblx0fSxcblxuXG5cdC8vIENhbGxlZCBhZnRlciBhIGhpdE91dC4gQWxzbyBjYWxsZWQgYmVmb3JlIGEgZHJhZ1N0b3Bcblx0aGFuZGxlSGl0RG9uZTogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHRoaXMuaGl0KSB7XG5cdFx0XHR0aGlzLnRyaWdnZXIoJ2hpdERvbmUnLCB0aGlzLmhpdCk7XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gQ2FsbGVkIHdoZW4gdGhlIGludGVyYWN0aW9uIGVuZHMsIHdoZXRoZXIgdGhlcmUgd2FzIGEgcmVhbCBkcmFnIG9yIG5vdFxuXHRoYW5kbGVJbnRlcmFjdGlvbkVuZDogZnVuY3Rpb24oKSB7XG5cdFx0RHJhZ0xpc3RlbmVyLnByb3RvdHlwZS5oYW5kbGVJbnRlcmFjdGlvbkVuZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyAvLyBjYWxsIHRoZSBzdXBlci1tZXRob2RcblxuXHRcdHRoaXMub3JpZ0hpdCA9IG51bGw7XG5cdFx0dGhpcy5oaXQgPSBudWxsO1xuXG5cdFx0dGhpcy5jb21wb25lbnQucmVsZWFzZUhpdHMoKTtcblx0fSxcblxuXG5cdC8vIENhbGxlZCB3aGVuIHNjcm9sbGluZyBoYXMgc3RvcHBlZCwgd2hldGhlciB0aHJvdWdoIGF1dG8gc2Nyb2xsLCBvciB0aGUgdXNlciBzY3JvbGxpbmdcblx0aGFuZGxlU2Nyb2xsRW5kOiBmdW5jdGlvbigpIHtcblx0XHREcmFnTGlzdGVuZXIucHJvdG90eXBlLmhhbmRsZVNjcm9sbEVuZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyAvLyBjYWxsIHRoZSBzdXBlci1tZXRob2RcblxuXHRcdHRoaXMuY29tcHV0ZUNvb3JkcygpOyAvLyBoaXRzJyBhYnNvbHV0ZSBwb3NpdGlvbnMgd2lsbCBiZSBpbiBuZXcgcGxhY2VzLiByZWNvbXB1dGVcblx0fSxcblxuXG5cdC8vIEdldHMgdGhlIGhpdCB1bmRlcm5lYXRoIHRoZSBjb29yZGluYXRlcyBmb3IgdGhlIGdpdmVuIG1vdXNlIGV2ZW50XG5cdHF1ZXJ5SGl0OiBmdW5jdGlvbihsZWZ0LCB0b3ApIHtcblxuXHRcdGlmICh0aGlzLmNvb3JkQWRqdXN0KSB7XG5cdFx0XHRsZWZ0ICs9IHRoaXMuY29vcmRBZGp1c3QubGVmdDtcblx0XHRcdHRvcCArPSB0aGlzLmNvb3JkQWRqdXN0LnRvcDtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5jb21wb25lbnQucXVlcnlIaXQobGVmdCwgdG9wKTtcblx0fVxuXG59KTtcblxuXG4vLyBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgaGl0cyBhcmUgaWRlbnRpY2FsbHkgZXF1YWwuIGBmYWxzZWAgb3RoZXJ3aXNlLiBNdXN0IGJlIGZyb20gdGhlIHNhbWUgY29tcG9uZW50LlxuLy8gVHdvIG51bGwgdmFsdWVzIHdpbGwgYmUgY29uc2lkZXJlZCBlcXVhbCwgYXMgdHdvIFwib3V0IG9mIHRoZSBjb21wb25lbnRcIiBzdGF0ZXMgYXJlIHRoZSBzYW1lLlxuZnVuY3Rpb24gaXNIaXRzRXF1YWwoaGl0MCwgaGl0MSkge1xuXG5cdGlmICghaGl0MCAmJiAhaGl0MSkge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0aWYgKGhpdDAgJiYgaGl0MSkge1xuXHRcdHJldHVybiBoaXQwLmNvbXBvbmVudCA9PT0gaGl0MS5jb21wb25lbnQgJiZcblx0XHRcdGlzSGl0UHJvcHNXaXRoaW4oaGl0MCwgaGl0MSkgJiZcblx0XHRcdGlzSGl0UHJvcHNXaXRoaW4oaGl0MSwgaGl0MCk7IC8vIGVuc3VyZXMgYWxsIHByb3BzIGFyZSBpZGVudGljYWxcblx0fVxuXG5cdHJldHVybiBmYWxzZTtcbn1cblxuXG4vLyBSZXR1cm5zIHRydWUgaWYgYWxsIG9mIHN1YkhpdCdzIG5vbi1zdGFuZGFyZCBwcm9wZXJ0aWVzIGFyZSB3aXRoaW4gc3VwZXJIaXRcbmZ1bmN0aW9uIGlzSGl0UHJvcHNXaXRoaW4oc3ViSGl0LCBzdXBlckhpdCkge1xuXHRmb3IgKHZhciBwcm9wTmFtZSBpbiBzdWJIaXQpIHtcblx0XHRpZiAoIS9eKGNvbXBvbmVudHxsZWZ0fHJpZ2h0fHRvcHxib3R0b20pJC8udGVzdChwcm9wTmFtZSkpIHtcblx0XHRcdGlmIChzdWJIaXRbcHJvcE5hbWVdICE9PSBzdXBlckhpdFtwcm9wTmFtZV0pIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRyZXR1cm4gdHJ1ZTtcbn1cblxuOztcblxuLyogQ3JlYXRlcyBhIGNsb25lIG9mIGFuIGVsZW1lbnQgYW5kIGxldHMgaXQgdHJhY2sgdGhlIG1vdXNlIGFzIGl0IG1vdmVzXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxudmFyIE1vdXNlRm9sbG93ZXIgPSBDbGFzcy5leHRlbmQoTGlzdGVuZXJNaXhpbiwge1xuXG5cdG9wdGlvbnM6IG51bGwsXG5cblx0c291cmNlRWw6IG51bGwsIC8vIHRoZSBlbGVtZW50IHRoYXQgd2lsbCBiZSBjbG9uZWQgYW5kIG1hZGUgdG8gbG9vayBsaWtlIGl0IGlzIGRyYWdnaW5nXG5cdGVsOiBudWxsLCAvLyB0aGUgY2xvbmUgb2YgYHNvdXJjZUVsYCB0aGF0IHdpbGwgdHJhY2sgdGhlIG1vdXNlXG5cdHBhcmVudEVsOiBudWxsLCAvLyB0aGUgZWxlbWVudCB0aGF0IGBlbGAgKHRoZSBjbG9uZSkgd2lsbCBiZSBhdHRhY2hlZCB0b1xuXG5cdC8vIHRoZSBpbml0aWFsIHBvc2l0aW9uIG9mIGVsLCByZWxhdGl2ZSB0byB0aGUgb2Zmc2V0IHBhcmVudC4gbWFkZSB0byBtYXRjaCB0aGUgaW5pdGlhbCBvZmZzZXQgb2Ygc291cmNlRWxcblx0dG9wMDogbnVsbCxcblx0bGVmdDA6IG51bGwsXG5cblx0Ly8gdGhlIGFic29sdXRlIGNvb3JkaW5hdGVzIG9mIHRoZSBpbml0aWF0aW5nIHRvdWNoL21vdXNlIGFjdGlvblxuXHR5MDogbnVsbCxcblx0eDA6IG51bGwsXG5cblx0Ly8gdGhlIG51bWJlciBvZiBwaXhlbHMgdGhlIG1vdXNlIGhhcyBtb3ZlZCBmcm9tIGl0cyBpbml0aWFsIHBvc2l0aW9uXG5cdHRvcERlbHRhOiBudWxsLFxuXHRsZWZ0RGVsdGE6IG51bGwsXG5cblx0aXNGb2xsb3dpbmc6IGZhbHNlLFxuXHRpc0hpZGRlbjogZmFsc2UsXG5cdGlzQW5pbWF0aW5nOiBmYWxzZSwgLy8gZG9pbmcgdGhlIHJldmVydCBhbmltYXRpb24/XG5cblx0Y29uc3RydWN0b3I6IGZ1bmN0aW9uKHNvdXJjZUVsLCBvcHRpb25zKSB7XG5cdFx0dGhpcy5vcHRpb25zID0gb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdFx0dGhpcy5zb3VyY2VFbCA9IHNvdXJjZUVsO1xuXHRcdHRoaXMucGFyZW50RWwgPSBvcHRpb25zLnBhcmVudEVsID8gJChvcHRpb25zLnBhcmVudEVsKSA6IHNvdXJjZUVsLnBhcmVudCgpOyAvLyBkZWZhdWx0IHRvIHNvdXJjZUVsJ3MgcGFyZW50XG5cdH0sXG5cblxuXHQvLyBDYXVzZXMgdGhlIGVsZW1lbnQgdG8gc3RhcnQgZm9sbG93aW5nIHRoZSBtb3VzZVxuXHRzdGFydDogZnVuY3Rpb24oZXYpIHtcblx0XHRpZiAoIXRoaXMuaXNGb2xsb3dpbmcpIHtcblx0XHRcdHRoaXMuaXNGb2xsb3dpbmcgPSB0cnVlO1xuXG5cdFx0XHR0aGlzLnkwID0gZ2V0RXZZKGV2KTtcblx0XHRcdHRoaXMueDAgPSBnZXRFdlgoZXYpO1xuXHRcdFx0dGhpcy50b3BEZWx0YSA9IDA7XG5cdFx0XHR0aGlzLmxlZnREZWx0YSA9IDA7XG5cblx0XHRcdGlmICghdGhpcy5pc0hpZGRlbikge1xuXHRcdFx0XHR0aGlzLnVwZGF0ZVBvc2l0aW9uKCk7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChnZXRFdklzVG91Y2goZXYpKSB7XG5cdFx0XHRcdHRoaXMubGlzdGVuVG8oJChkb2N1bWVudCksICd0b3VjaG1vdmUnLCB0aGlzLmhhbmRsZU1vdmUpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdHRoaXMubGlzdGVuVG8oJChkb2N1bWVudCksICdtb3VzZW1vdmUnLCB0aGlzLmhhbmRsZU1vdmUpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXG5cdC8vIENhdXNlcyB0aGUgZWxlbWVudCB0byBzdG9wIGZvbGxvd2luZyB0aGUgbW91c2UuIElmIHNob3VsZFJldmVydCBpcyB0cnVlLCB3aWxsIGFuaW1hdGUgYmFjayB0byBvcmlnaW5hbCBwb3NpdGlvbi5cblx0Ly8gYGNhbGxiYWNrYCBnZXRzIGludm9rZWQgd2hlbiB0aGUgYW5pbWF0aW9uIGlzIGNvbXBsZXRlLiBJZiBubyBhbmltYXRpb24sIGl0IGlzIGludm9rZWQgaW1tZWRpYXRlbHkuXG5cdHN0b3A6IGZ1bmN0aW9uKHNob3VsZFJldmVydCwgY2FsbGJhY2spIHtcblx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXHRcdHZhciByZXZlcnREdXJhdGlvbiA9IHRoaXMub3B0aW9ucy5yZXZlcnREdXJhdGlvbjtcblxuXHRcdGZ1bmN0aW9uIGNvbXBsZXRlKCkgeyAvLyBtaWdodCBiZSBjYWxsZWQgYnkgLmFuaW1hdGUoKSwgd2hpY2ggbWlnaHQgY2hhbmdlIGB0aGlzYCBjb250ZXh0XG5cdFx0XHRfdGhpcy5pc0FuaW1hdGluZyA9IGZhbHNlO1xuXHRcdFx0X3RoaXMucmVtb3ZlRWxlbWVudCgpO1xuXG5cdFx0XHRfdGhpcy50b3AwID0gX3RoaXMubGVmdDAgPSBudWxsOyAvLyByZXNldCBzdGF0ZSBmb3IgZnV0dXJlIHVwZGF0ZVBvc2l0aW9uIGNhbGxzXG5cblx0XHRcdGlmIChjYWxsYmFjaykge1xuXHRcdFx0XHRjYWxsYmFjaygpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICh0aGlzLmlzRm9sbG93aW5nICYmICF0aGlzLmlzQW5pbWF0aW5nKSB7IC8vIGRpc2FsbG93IG1vcmUgdGhhbiBvbmUgc3RvcCBhbmltYXRpb24gYXQgYSB0aW1lXG5cdFx0XHR0aGlzLmlzRm9sbG93aW5nID0gZmFsc2U7XG5cblx0XHRcdHRoaXMuc3RvcExpc3RlbmluZ1RvKCQoZG9jdW1lbnQpKTtcblxuXHRcdFx0aWYgKHNob3VsZFJldmVydCAmJiByZXZlcnREdXJhdGlvbiAmJiAhdGhpcy5pc0hpZGRlbikgeyAvLyBkbyBhIHJldmVydCBhbmltYXRpb24/XG5cdFx0XHRcdHRoaXMuaXNBbmltYXRpbmcgPSB0cnVlO1xuXHRcdFx0XHR0aGlzLmVsLmFuaW1hdGUoe1xuXHRcdFx0XHRcdHRvcDogdGhpcy50b3AwLFxuXHRcdFx0XHRcdGxlZnQ6IHRoaXMubGVmdDBcblx0XHRcdFx0fSwge1xuXHRcdFx0XHRcdGR1cmF0aW9uOiByZXZlcnREdXJhdGlvbixcblx0XHRcdFx0XHRjb21wbGV0ZTogY29tcGxldGVcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0Y29tcGxldGUoKTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblxuXHQvLyBHZXRzIHRoZSB0cmFja2luZyBlbGVtZW50LiBDcmVhdGUgaXQgaWYgbmVjZXNzYXJ5XG5cdGdldEVsOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgZWwgPSB0aGlzLmVsO1xuXG5cdFx0aWYgKCFlbCkge1xuXHRcdFx0ZWwgPSB0aGlzLmVsID0gdGhpcy5zb3VyY2VFbC5jbG9uZSgpXG5cdFx0XHRcdC5hZGRDbGFzcyh0aGlzLm9wdGlvbnMuYWRkaXRpb25hbENsYXNzIHx8ICcnKVxuXHRcdFx0XHQuY3NzKHtcblx0XHRcdFx0XHRwb3NpdGlvbjogJ2Fic29sdXRlJyxcblx0XHRcdFx0XHR2aXNpYmlsaXR5OiAnJywgLy8gaW4gY2FzZSBvcmlnaW5hbCBlbGVtZW50IHdhcyBoaWRkZW4gKGNvbW1vbmx5IHRocm91Z2ggaGlkZUV2ZW50cygpKVxuXHRcdFx0XHRcdGRpc3BsYXk6IHRoaXMuaXNIaWRkZW4gPyAnbm9uZScgOiAnJywgLy8gZm9yIHdoZW4gaW5pdGlhbGx5IGhpZGRlblxuXHRcdFx0XHRcdG1hcmdpbjogMCxcblx0XHRcdFx0XHRyaWdodDogJ2F1dG8nLCAvLyBlcmFzZSBhbmQgc2V0IHdpZHRoIGluc3RlYWRcblx0XHRcdFx0XHRib3R0b206ICdhdXRvJywgLy8gZXJhc2UgYW5kIHNldCBoZWlnaHQgaW5zdGVhZFxuXHRcdFx0XHRcdHdpZHRoOiB0aGlzLnNvdXJjZUVsLndpZHRoKCksIC8vIGV4cGxpY2l0IGhlaWdodCBpbiBjYXNlIHRoZXJlIHdhcyBhICdyaWdodCcgdmFsdWVcblx0XHRcdFx0XHRoZWlnaHQ6IHRoaXMuc291cmNlRWwuaGVpZ2h0KCksIC8vIGV4cGxpY2l0IHdpZHRoIGluIGNhc2UgdGhlcmUgd2FzIGEgJ2JvdHRvbScgdmFsdWVcblx0XHRcdFx0XHRvcGFjaXR5OiB0aGlzLm9wdGlvbnMub3BhY2l0eSB8fCAnJyxcblx0XHRcdFx0XHR6SW5kZXg6IHRoaXMub3B0aW9ucy56SW5kZXhcblx0XHRcdFx0fSk7XG5cblx0XHRcdC8vIHdlIGRvbid0IHdhbnQgbG9uZyB0YXBzIG9yIGFueSBtb3VzZSBpbnRlcmFjdGlvbiBjYXVzaW5nIHNlbGVjdGlvbi9tZW51cy5cblx0XHRcdC8vIHdvdWxkIHVzZSBwcmV2ZW50U2VsZWN0aW9uKCksIGJ1dCB0aGF0IHByZXZlbnRzIHNlbGVjdHN0YXJ0LCBjYXVzaW5nIHByb2JsZW1zLlxuXHRcdFx0ZWwuYWRkQ2xhc3MoJ2ZjLXVuc2VsZWN0YWJsZScpO1xuXG5cdFx0XHRlbC5hcHBlbmRUbyh0aGlzLnBhcmVudEVsKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZWw7XG5cdH0sXG5cblxuXHQvLyBSZW1vdmVzIHRoZSB0cmFja2luZyBlbGVtZW50IGlmIGl0IGhhcyBhbHJlYWR5IGJlZW4gY3JlYXRlZFxuXHRyZW1vdmVFbGVtZW50OiBmdW5jdGlvbigpIHtcblx0XHRpZiAodGhpcy5lbCkge1xuXHRcdFx0dGhpcy5lbC5yZW1vdmUoKTtcblx0XHRcdHRoaXMuZWwgPSBudWxsO1xuXHRcdH1cblx0fSxcblxuXG5cdC8vIFVwZGF0ZSB0aGUgQ1NTIHBvc2l0aW9uIG9mIHRoZSB0cmFja2luZyBlbGVtZW50XG5cdHVwZGF0ZVBvc2l0aW9uOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgc291cmNlT2Zmc2V0O1xuXHRcdHZhciBvcmlnaW47XG5cblx0XHR0aGlzLmdldEVsKCk7IC8vIGVuc3VyZSB0aGlzLmVsXG5cblx0XHQvLyBtYWtlIHN1cmUgb3JpZ2luIGluZm8gd2FzIGNvbXB1dGVkXG5cdFx0aWYgKHRoaXMudG9wMCA9PT0gbnVsbCkge1xuXHRcdFx0c291cmNlT2Zmc2V0ID0gdGhpcy5zb3VyY2VFbC5vZmZzZXQoKTtcblx0XHRcdG9yaWdpbiA9IHRoaXMuZWwub2Zmc2V0UGFyZW50KCkub2Zmc2V0KCk7XG5cdFx0XHR0aGlzLnRvcDAgPSBzb3VyY2VPZmZzZXQudG9wIC0gb3JpZ2luLnRvcDtcblx0XHRcdHRoaXMubGVmdDAgPSBzb3VyY2VPZmZzZXQubGVmdCAtIG9yaWdpbi5sZWZ0O1xuXHRcdH1cblxuXHRcdHRoaXMuZWwuY3NzKHtcblx0XHRcdHRvcDogdGhpcy50b3AwICsgdGhpcy50b3BEZWx0YSxcblx0XHRcdGxlZnQ6IHRoaXMubGVmdDAgKyB0aGlzLmxlZnREZWx0YVxuXHRcdH0pO1xuXHR9LFxuXG5cblx0Ly8gR2V0cyBjYWxsZWQgd2hlbiB0aGUgdXNlciBtb3ZlcyB0aGUgbW91c2Vcblx0aGFuZGxlTW92ZTogZnVuY3Rpb24oZXYpIHtcblx0XHR0aGlzLnRvcERlbHRhID0gZ2V0RXZZKGV2KSAtIHRoaXMueTA7XG5cdFx0dGhpcy5sZWZ0RGVsdGEgPSBnZXRFdlgoZXYpIC0gdGhpcy54MDtcblxuXHRcdGlmICghdGhpcy5pc0hpZGRlbikge1xuXHRcdFx0dGhpcy51cGRhdGVQb3NpdGlvbigpO1xuXHRcdH1cblx0fSxcblxuXG5cdC8vIFRlbXBvcmFyaWx5IG1ha2VzIHRoZSB0cmFja2luZyBlbGVtZW50IGludmlzaWJsZS4gQ2FuIGJlIGNhbGxlZCBiZWZvcmUgZm9sbG93aW5nIHN0YXJ0c1xuXHRoaWRlOiBmdW5jdGlvbigpIHtcblx0XHRpZiAoIXRoaXMuaXNIaWRkZW4pIHtcblx0XHRcdHRoaXMuaXNIaWRkZW4gPSB0cnVlO1xuXHRcdFx0aWYgKHRoaXMuZWwpIHtcblx0XHRcdFx0dGhpcy5lbC5oaWRlKCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gU2hvdyB0aGUgdHJhY2tpbmcgZWxlbWVudCBhZnRlciBpdCBoYXMgYmVlbiB0ZW1wb3JhcmlseSBoaWRkZW5cblx0c2hvdzogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHRoaXMuaXNIaWRkZW4pIHtcblx0XHRcdHRoaXMuaXNIaWRkZW4gPSBmYWxzZTtcblx0XHRcdHRoaXMudXBkYXRlUG9zaXRpb24oKTtcblx0XHRcdHRoaXMuZ2V0RWwoKS5zaG93KCk7XG5cdFx0fVxuXHR9XG5cbn0pO1xuXG47O1xuXG4vKiBBbiBhYnN0cmFjdCBjbGFzcyBjb21wcmlzZWQgb2YgYSBcImdyaWRcIiBvZiBhcmVhcyB0aGF0IGVhY2ggcmVwcmVzZW50IGEgc3BlY2lmaWMgZGF0ZXRpbWVcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG52YXIgR3JpZCA9IEZDLkdyaWQgPSBDbGFzcy5leHRlbmQoTGlzdGVuZXJNaXhpbiwgTW91c2VJZ25vcmVyTWl4aW4sIHtcblxuXHQvLyBzZWxmLWNvbmZpZywgb3ZlcnJpZGFibGUgYnkgc3ViY2xhc3Nlc1xuXHRoYXNEYXlJbnRlcmFjdGlvbnM6IHRydWUsIC8vIGNhbiB1c2VyIGNsaWNrL3NlbGVjdCByYW5nZXMgb2YgdGltZT9cblxuXHR2aWV3OiBudWxsLCAvLyBhIFZpZXcgb2JqZWN0XG5cdGlzUlRMOiBudWxsLCAvLyBzaG9ydGN1dCB0byB0aGUgdmlldydzIGlzUlRMIG9wdGlvblxuXG5cdHN0YXJ0OiBudWxsLFxuXHRlbmQ6IG51bGwsXG5cblx0ZWw6IG51bGwsIC8vIHRoZSBjb250YWluaW5nIGVsZW1lbnRcblx0ZWxzQnlGaWxsOiBudWxsLCAvLyBhIGhhc2ggb2YgalF1ZXJ5IGVsZW1lbnQgc2V0cyB1c2VkIGZvciByZW5kZXJpbmcgZWFjaCBmaWxsLiBLZXllZCBieSBmaWxsIG5hbWUuXG5cblx0Ly8gZGVyaXZlZCBmcm9tIG9wdGlvbnNcblx0ZXZlbnRUaW1lRm9ybWF0OiBudWxsLFxuXHRkaXNwbGF5RXZlbnRUaW1lOiBudWxsLFxuXHRkaXNwbGF5RXZlbnRFbmQ6IG51bGwsXG5cblx0bWluUmVzaXplRHVyYXRpb246IG51bGwsIC8vIFRPRE86IGhhY2suIHNldCBieSBzdWJjbGFzc2VzLiBtaW51bXVtIGV2ZW50IHJlc2l6ZSBkdXJhdGlvblxuXG5cdC8vIGlmIGRlZmluZWQsIGhvbGRzIHRoZSB1bml0IGlkZW50aWZpZWQgKGV4OiBcInllYXJcIiBvciBcIm1vbnRoXCIpIHRoYXQgZGV0ZXJtaW5lcyB0aGUgbGV2ZWwgb2YgZ3JhbnVsYXJpdHlcblx0Ly8gb2YgdGhlIGRhdGUgYXJlYXMuIGlmIG5vdCBkZWZpbmVkLCBhc3N1bWVzIHRvIGJlIGRheSBhbmQgdGltZSBncmFudWxhcml0eS5cblx0Ly8gVE9ETzogcG9ydCBpc1RpbWVTY2FsZSBpbnRvIHNhbWUgc3lzdGVtP1xuXHRsYXJnZVVuaXQ6IG51bGwsXG5cblx0ZGF5RHJhZ0xpc3RlbmVyOiBudWxsLFxuXHRzZWdEcmFnTGlzdGVuZXI6IG51bGwsXG5cdHNlZ1Jlc2l6ZUxpc3RlbmVyOiBudWxsLFxuXHRleHRlcm5hbERyYWdMaXN0ZW5lcjogbnVsbCxcblxuXG5cdGNvbnN0cnVjdG9yOiBmdW5jdGlvbih2aWV3KSB7XG5cdFx0dGhpcy52aWV3ID0gdmlldztcblx0XHR0aGlzLmlzUlRMID0gdmlldy5vcHQoJ2lzUlRMJyk7XG5cdFx0dGhpcy5lbHNCeUZpbGwgPSB7fTtcblxuXHRcdHRoaXMuZGF5RHJhZ0xpc3RlbmVyID0gdGhpcy5idWlsZERheURyYWdMaXN0ZW5lcigpO1xuXHRcdHRoaXMuaW5pdE1vdXNlSWdub3JpbmcoKTtcblx0fSxcblxuXG5cdC8qIE9wdGlvbnNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIEdlbmVyYXRlcyB0aGUgZm9ybWF0IHN0cmluZyB1c2VkIGZvciBldmVudCB0aW1lIHRleHQsIGlmIG5vdCBleHBsaWNpdGx5IGRlZmluZWQgYnkgJ3RpbWVGb3JtYXQnXG5cdGNvbXB1dGVFdmVudFRpbWVGb3JtYXQ6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLnZpZXcub3B0KCdzbWFsbFRpbWVGb3JtYXQnKTtcblx0fSxcblxuXG5cdC8vIERldGVybWluZXMgd2hldGhlciBldmVudHMgc2hvdWxkIGhhdmUgdGhlaXIgZW5kIHRpbWVzIGRpc3BsYXllZCwgaWYgbm90IGV4cGxpY2l0bHkgZGVmaW5lZCBieSAnZGlzcGxheUV2ZW50VGltZScuXG5cdC8vIE9ubHkgYXBwbGllcyB0byBub24tYWxsLWRheSBldmVudHMuXG5cdGNvbXB1dGVEaXNwbGF5RXZlbnRUaW1lOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSxcblxuXG5cdC8vIERldGVybWluZXMgd2hldGhlciBldmVudHMgc2hvdWxkIGhhdmUgdGhlaXIgZW5kIHRpbWVzIGRpc3BsYXllZCwgaWYgbm90IGV4cGxpY2l0bHkgZGVmaW5lZCBieSAnZGlzcGxheUV2ZW50RW5kJ1xuXHRjb21wdXRlRGlzcGxheUV2ZW50RW5kOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSxcblxuXG5cdC8qIERhdGVzXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBUZWxscyB0aGUgZ3JpZCBhYm91dCB3aGF0IHBlcmlvZCBvZiB0aW1lIHRvIGRpc3BsYXkuXG5cdC8vIEFueSBkYXRlLXJlbGF0ZWQgaW50ZXJuYWwgZGF0YSBzaG91bGQgYmUgZ2VuZXJhdGVkLlxuXHRzZXRSYW5nZTogZnVuY3Rpb24ocmFuZ2UpIHtcblx0XHR0aGlzLnN0YXJ0ID0gcmFuZ2Uuc3RhcnQuY2xvbmUoKTtcblx0XHR0aGlzLmVuZCA9IHJhbmdlLmVuZC5jbG9uZSgpO1xuXG5cdFx0dGhpcy5yYW5nZVVwZGF0ZWQoKTtcblx0XHR0aGlzLnByb2Nlc3NSYW5nZU9wdGlvbnMoKTtcblx0fSxcblxuXG5cdC8vIENhbGxlZCB3aGVuIGludGVybmFsIHZhcmlhYmxlcyB0aGF0IHJlbHkgb24gdGhlIHJhbmdlIHNob3VsZCBiZSB1cGRhdGVkXG5cdHJhbmdlVXBkYXRlZDogZnVuY3Rpb24oKSB7XG5cdH0sXG5cblxuXHQvLyBVcGRhdGVzIHZhbHVlcyB0aGF0IHJlbHkgb24gb3B0aW9ucyBhbmQgYWxzbyByZWxhdGUgdG8gcmFuZ2Vcblx0cHJvY2Vzc1JhbmdlT3B0aW9uczogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHZpZXcgPSB0aGlzLnZpZXc7XG5cdFx0dmFyIGRpc3BsYXlFdmVudFRpbWU7XG5cdFx0dmFyIGRpc3BsYXlFdmVudEVuZDtcblxuXHRcdHRoaXMuZXZlbnRUaW1lRm9ybWF0ID1cblx0XHRcdHZpZXcub3B0KCdldmVudFRpbWVGb3JtYXQnKSB8fFxuXHRcdFx0dmlldy5vcHQoJ3RpbWVGb3JtYXQnKSB8fCAvLyBkZXByZWNhdGVkXG5cdFx0XHR0aGlzLmNvbXB1dGVFdmVudFRpbWVGb3JtYXQoKTtcblxuXHRcdGRpc3BsYXlFdmVudFRpbWUgPSB2aWV3Lm9wdCgnZGlzcGxheUV2ZW50VGltZScpO1xuXHRcdGlmIChkaXNwbGF5RXZlbnRUaW1lID09IG51bGwpIHtcblx0XHRcdGRpc3BsYXlFdmVudFRpbWUgPSB0aGlzLmNvbXB1dGVEaXNwbGF5RXZlbnRUaW1lKCk7IC8vIG1pZ2h0IGJlIGJhc2VkIG9mZiBvZiByYW5nZVxuXHRcdH1cblxuXHRcdGRpc3BsYXlFdmVudEVuZCA9IHZpZXcub3B0KCdkaXNwbGF5RXZlbnRFbmQnKTtcblx0XHRpZiAoZGlzcGxheUV2ZW50RW5kID09IG51bGwpIHtcblx0XHRcdGRpc3BsYXlFdmVudEVuZCA9IHRoaXMuY29tcHV0ZURpc3BsYXlFdmVudEVuZCgpOyAvLyBtaWdodCBiZSBiYXNlZCBvZmYgb2YgcmFuZ2Vcblx0XHR9XG5cblx0XHR0aGlzLmRpc3BsYXlFdmVudFRpbWUgPSBkaXNwbGF5RXZlbnRUaW1lO1xuXHRcdHRoaXMuZGlzcGxheUV2ZW50RW5kID0gZGlzcGxheUV2ZW50RW5kO1xuXHR9LFxuXG5cblx0Ly8gQ29udmVydHMgYSBzcGFuIChoYXMgdW56b25lZCBzdGFydC9lbmQgYW5kIGFueSBvdGhlciBncmlkLXNwZWNpZmljIGxvY2F0aW9uIGluZm9ybWF0aW9uKVxuXHQvLyBpbnRvIGFuIGFycmF5IG9mIHNlZ21lbnRzIChwaWVjZXMgb2YgZXZlbnRzIHdob3NlIGZvcm1hdCBpcyBkZWNpZGVkIGJ5IHRoZSBncmlkKS5cblx0c3BhblRvU2VnczogZnVuY3Rpb24oc3Bhbikge1xuXHRcdC8vIHN1YmNsYXNzZXMgbXVzdCBpbXBsZW1lbnRcblx0fSxcblxuXG5cdC8vIERpZmZzIHRoZSB0d28gZGF0ZXMsIHJldHVybmluZyBhIGR1cmF0aW9uLCBiYXNlZCBvbiBncmFudWxhcml0eSBvZiB0aGUgZ3JpZFxuXHQvLyBUT0RPOiBwb3J0IGlzVGltZVNjYWxlIGludG8gdGhpcyBzeXN0ZW0/XG5cdGRpZmZEYXRlczogZnVuY3Rpb24oYSwgYikge1xuXHRcdGlmICh0aGlzLmxhcmdlVW5pdCkge1xuXHRcdFx0cmV0dXJuIGRpZmZCeVVuaXQoYSwgYiwgdGhpcy5sYXJnZVVuaXQpO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdHJldHVybiBkaWZmRGF5VGltZShhLCBiKTtcblx0XHR9XG5cdH0sXG5cblxuXHQvKiBIaXQgQXJlYVxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gQ2FsbGVkIGJlZm9yZSBvbmUgb3IgbW9yZSBxdWVyeUhpdCBjYWxscyBtaWdodCBoYXBwZW4uIFNob3VsZCBwcmVwYXJlIGFueSBjYWNoZWQgY29vcmRpbmF0ZXMgZm9yIHF1ZXJ5SGl0XG5cdHByZXBhcmVIaXRzOiBmdW5jdGlvbigpIHtcblx0fSxcblxuXG5cdC8vIENhbGxlZCB3aGVuIHF1ZXJ5SGl0IGNhbGxzIGhhdmUgc3Vic2lkZWQuIEdvb2QgcGxhY2UgdG8gY2xlYXIgYW55IGNvb3JkaW5hdGUgY2FjaGVzLlxuXHRyZWxlYXNlSGl0czogZnVuY3Rpb24oKSB7XG5cdH0sXG5cblxuXHQvLyBHaXZlbiBjb29yZGluYXRlcyBmcm9tIHRoZSB0b3BsZWZ0IG9mIHRoZSBkb2N1bWVudCwgcmV0dXJuIGRhdGEgYWJvdXQgdGhlIGRhdGUtcmVsYXRlZCBhcmVhIHVuZGVybmVhdGguXG5cdC8vIENhbiByZXR1cm4gYW4gb2JqZWN0IHdpdGggYXJiaXRyYXJ5IHByb3BlcnRpZXMgKGFsdGhvdWdoIHRvcC9yaWdodC9sZWZ0L2JvdHRvbSBhcmUgZW5jb3VyYWdlZCkuXG5cdC8vIE11c3QgaGF2ZSBhIGBncmlkYCBwcm9wZXJ0eSwgYSByZWZlcmVuY2UgdG8gdGhpcyBjdXJyZW50IGdyaWQuIFRPRE86IGF2b2lkIHRoaXNcblx0Ly8gVGhlIHJldHVybmVkIG9iamVjdCB3aWxsIGJlIHByb2Nlc3NlZCBieSBnZXRIaXRTcGFuIGFuZCBnZXRIaXRFbC5cblx0cXVlcnlIaXQ6IGZ1bmN0aW9uKGxlZnRPZmZzZXQsIHRvcE9mZnNldCkge1xuXHR9LFxuXG5cblx0Ly8gR2l2ZW4gcG9zaXRpb24tbGV2ZWwgaW5mb3JtYXRpb24gYWJvdXQgYSBkYXRlLXJlbGF0ZWQgYXJlYSB3aXRoaW4gdGhlIGdyaWQsXG5cdC8vIHNob3VsZCByZXR1cm4gYW4gb2JqZWN0IHdpdGggYXQgbGVhc3QgYSBzdGFydC9lbmQgZGF0ZS4gQ2FuIHByb3ZpZGUgb3RoZXIgaW5mb3JtYXRpb24gYXMgd2VsbC5cblx0Z2V0SGl0U3BhbjogZnVuY3Rpb24oaGl0KSB7XG5cdH0sXG5cblxuXHQvLyBHaXZlbiBwb3NpdGlvbi1sZXZlbCBpbmZvcm1hdGlvbiBhYm91dCBhIGRhdGUtcmVsYXRlZCBhcmVhIHdpdGhpbiB0aGUgZ3JpZCxcblx0Ly8gc2hvdWxkIHJldHVybiBhIGpRdWVyeSBlbGVtZW50IHRoYXQgYmVzdCByZXByZXNlbnRzIGl0LiBwYXNzZWQgdG8gZGF5Q2xpY2sgY2FsbGJhY2suXG5cdGdldEhpdEVsOiBmdW5jdGlvbihoaXQpIHtcblx0fSxcblxuXG5cdC8qIFJlbmRlcmluZ1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gU2V0cyB0aGUgY29udGFpbmVyIGVsZW1lbnQgdGhhdCB0aGUgZ3JpZCBzaG91bGQgcmVuZGVyIGluc2lkZSBvZi5cblx0Ly8gRG9lcyBvdGhlciBET00tcmVsYXRlZCBpbml0aWFsaXphdGlvbnMuXG5cdHNldEVsZW1lbnQ6IGZ1bmN0aW9uKGVsKSB7XG5cdFx0dGhpcy5lbCA9IGVsO1xuXG5cdFx0aWYgKHRoaXMuaGFzRGF5SW50ZXJhY3Rpb25zKSB7XG5cdFx0XHRwcmV2ZW50U2VsZWN0aW9uKGVsKTtcblxuXHRcdFx0dGhpcy5iaW5kRGF5SGFuZGxlcigndG91Y2hzdGFydCcsIHRoaXMuZGF5VG91Y2hTdGFydCk7XG5cdFx0XHR0aGlzLmJpbmREYXlIYW5kbGVyKCdtb3VzZWRvd24nLCB0aGlzLmRheU1vdXNlZG93bik7XG5cdFx0fVxuXG5cdFx0Ly8gYXR0YWNoIGV2ZW50LWVsZW1lbnQtcmVsYXRlZCBoYW5kbGVycy4gaW4gR3JpZC5ldmVudHNcblx0XHQvLyBzYW1lIGdhcmJhZ2UgY29sbGVjdGlvbiBub3RlIGFzIGFib3ZlLlxuXHRcdHRoaXMuYmluZFNlZ0hhbmRsZXJzKCk7XG5cblx0XHR0aGlzLmJpbmRHbG9iYWxIYW5kbGVycygpO1xuXHR9LFxuXG5cblx0YmluZERheUhhbmRsZXI6IGZ1bmN0aW9uKG5hbWUsIGhhbmRsZXIpIHtcblx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdFx0Ly8gYXR0YWNoIGEgaGFuZGxlciB0byB0aGUgZ3JpZCdzIHJvb3QgZWxlbWVudC5cblx0XHQvLyBqUXVlcnkgd2lsbCB0YWtlIGNhcmUgb2YgdW5yZWdpc3RlcmluZyB0aGVtIHdoZW4gcmVtb3ZlRWxlbWVudCBnZXRzIGNhbGxlZC5cblx0XHR0aGlzLmVsLm9uKG5hbWUsIGZ1bmN0aW9uKGV2KSB7XG5cdFx0XHRpZiAoXG5cdFx0XHRcdCEkKGV2LnRhcmdldCkuaXMoXG5cdFx0XHRcdFx0X3RoaXMuc2VnU2VsZWN0b3IgKyAnLCcgKyAvLyBkaXJlY3RseSBvbiBhbiBldmVudCBlbGVtZW50XG5cdFx0XHRcdFx0X3RoaXMuc2VnU2VsZWN0b3IgKyAnICosJyArIC8vIHdpdGhpbiBhbiBldmVudCBlbGVtZW50XG5cdFx0XHRcdFx0Jy5mYy1tb3JlLCcgKyAvLyBhIFwibW9yZS4uXCIgbGlua1xuXHRcdFx0XHRcdCdhW2RhdGEtZ290b10nIC8vIGEgY2xpY2thYmxlIG5hdiBsaW5rXG5cdFx0XHRcdClcblx0XHRcdCkge1xuXHRcdFx0XHRyZXR1cm4gaGFuZGxlci5jYWxsKF90aGlzLCBldik7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0sXG5cblxuXHQvLyBSZW1vdmVzIHRoZSBncmlkJ3MgY29udGFpbmVyIGVsZW1lbnQgZnJvbSB0aGUgRE9NLiBVbmRvZXMgYW55IG90aGVyIERPTS1yZWxhdGVkIGF0dGFjaG1lbnRzLlxuXHQvLyBET0VTIE5PVCByZW1vdmUgYW55IGNvbnRlbnQgYmVmb3JlaGFuZCAoZG9lc24ndCBjbGVhciBldmVudHMgb3IgY2FsbCB1bnJlbmRlckRhdGVzKSwgdW5saWtlIFZpZXdcblx0cmVtb3ZlRWxlbWVudDogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy51bmJpbmRHbG9iYWxIYW5kbGVycygpO1xuXHRcdHRoaXMuY2xlYXJEcmFnTGlzdGVuZXJzKCk7XG5cblx0XHR0aGlzLmVsLnJlbW92ZSgpO1xuXG5cdFx0Ly8gTk9URTogd2UgZG9uJ3QgbnVsbC1vdXQgdGhpcy5lbCBmb3IgdGhlIHNhbWUgcmVhc29ucyB3ZSBkb24ndCBkbyBpdCB3aXRoaW4gVmlldzo6cmVtb3ZlRWxlbWVudFxuXHR9LFxuXG5cblx0Ly8gUmVuZGVycyB0aGUgYmFzaWMgc3RydWN0dXJlIG9mIGdyaWQgdmlldyBiZWZvcmUgYW55IGNvbnRlbnQgaXMgcmVuZGVyZWRcblx0cmVuZGVyU2tlbGV0b246IGZ1bmN0aW9uKCkge1xuXHRcdC8vIHN1YmNsYXNzZXMgc2hvdWxkIGltcGxlbWVudFxuXHR9LFxuXG5cblx0Ly8gUmVuZGVycyB0aGUgZ3JpZCdzIGRhdGUtcmVsYXRlZCBjb250ZW50IChsaWtlIGFyZWFzIHRoYXQgcmVwcmVzZW50IGRheXMvdGltZXMpLlxuXHQvLyBBc3N1bWVzIHNldFJhbmdlIGhhcyBhbHJlYWR5IGJlZW4gY2FsbGVkIGFuZCB0aGUgc2tlbGV0b24gaGFzIGFscmVhZHkgYmVlbiByZW5kZXJlZC5cblx0cmVuZGVyRGF0ZXM6IGZ1bmN0aW9uKCkge1xuXHRcdC8vIHN1YmNsYXNzZXMgc2hvdWxkIGltcGxlbWVudFxuXHR9LFxuXG5cblx0Ly8gVW5yZW5kZXJzIHRoZSBncmlkJ3MgZGF0ZS1yZWxhdGVkIGNvbnRlbnRcblx0dW5yZW5kZXJEYXRlczogZnVuY3Rpb24oKSB7XG5cdFx0Ly8gc3ViY2xhc3NlcyBzaG91bGQgaW1wbGVtZW50XG5cdH0sXG5cblxuXHQvKiBIYW5kbGVyc1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gQmluZHMgRE9NIGhhbmRsZXJzIHRvIGVsZW1lbnRzIHRoYXQgcmVzaWRlIG91dHNpZGUgdGhlIGdyaWQsIHN1Y2ggYXMgdGhlIGRvY3VtZW50XG5cdGJpbmRHbG9iYWxIYW5kbGVyczogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5saXN0ZW5UbygkKGRvY3VtZW50KSwge1xuXHRcdFx0ZHJhZ3N0YXJ0OiB0aGlzLmV4dGVybmFsRHJhZ1N0YXJ0LCAvLyBqcXVpXG5cdFx0XHRzb3J0c3RhcnQ6IHRoaXMuZXh0ZXJuYWxEcmFnU3RhcnQgLy8ganF1aVxuXHRcdH0pO1xuXHR9LFxuXG5cblx0Ly8gVW5iaW5kcyBET00gaGFuZGxlcnMgZnJvbSBlbGVtZW50cyB0aGF0IHJlc2lkZSBvdXRzaWRlIHRoZSBncmlkXG5cdHVuYmluZEdsb2JhbEhhbmRsZXJzOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnN0b3BMaXN0ZW5pbmdUbygkKGRvY3VtZW50KSk7XG5cdH0sXG5cblxuXHQvLyBQcm9jZXNzIGEgbW91c2Vkb3duIG9uIGFuIGVsZW1lbnQgdGhhdCByZXByZXNlbnRzIGEgZGF5LiBGb3IgZGF5IGNsaWNraW5nIGFuZCBzZWxlY3RpbmcuXG5cdGRheU1vdXNlZG93bjogZnVuY3Rpb24oZXYpIHtcblx0XHRpZiAoIXRoaXMuaXNJZ25vcmluZ01vdXNlKSB7XG5cdFx0XHR0aGlzLmRheURyYWdMaXN0ZW5lci5zdGFydEludGVyYWN0aW9uKGV2LCB7XG5cdFx0XHRcdC8vZGlzdGFuY2U6IDUsIC8vIG5lZWRzIG1vcmUgd29yayBpZiB3ZSB3YW50IGRheUNsaWNrIHRvIGZpcmUgY29ycmVjdGx5XG5cdFx0XHR9KTtcblx0XHR9XG5cdH0sXG5cblxuXHRkYXlUb3VjaFN0YXJ0OiBmdW5jdGlvbihldikge1xuXHRcdHZhciB2aWV3ID0gdGhpcy52aWV3O1xuXHRcdHZhciBzZWxlY3RMb25nUHJlc3NEZWxheSA9IHZpZXcub3B0KCdzZWxlY3RMb25nUHJlc3NEZWxheScpO1xuXG5cdFx0Ly8gSEFDSyB0byBwcmV2ZW50IGEgdXNlcidzIGNsaWNrYXdheSBmb3IgdW5zZWxlY3RpbmcgYSByYW5nZSBvciBhbiBldmVudFxuXHRcdC8vIGZyb20gY2F1c2luZyBhIGRheUNsaWNrLlxuXHRcdGlmICh2aWV3LmlzU2VsZWN0ZWQgfHwgdmlldy5zZWxlY3RlZEV2ZW50KSB7XG5cdFx0XHR0aGlzLnRlbXBJZ25vcmVNb3VzZSgpO1xuXHRcdH1cblxuXHRcdGlmIChzZWxlY3RMb25nUHJlc3NEZWxheSA9PSBudWxsKSB7XG5cdFx0XHRzZWxlY3RMb25nUHJlc3NEZWxheSA9IHZpZXcub3B0KCdsb25nUHJlc3NEZWxheScpOyAvLyBmYWxsYmFja1xuXHRcdH1cblxuXHRcdHRoaXMuZGF5RHJhZ0xpc3RlbmVyLnN0YXJ0SW50ZXJhY3Rpb24oZXYsIHtcblx0XHRcdGRlbGF5OiBzZWxlY3RMb25nUHJlc3NEZWxheVxuXHRcdH0pO1xuXHR9LFxuXG5cblx0Ly8gQ3JlYXRlcyBhIGxpc3RlbmVyIHRoYXQgdHJhY2tzIHRoZSB1c2VyJ3MgZHJhZyBhY3Jvc3MgZGF5IGVsZW1lbnRzLlxuXHQvLyBGb3IgZGF5IGNsaWNraW5nIGFuZCBzZWxlY3RpbmcuXG5cdGJ1aWxkRGF5RHJhZ0xpc3RlbmVyOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXHRcdHZhciB2aWV3ID0gdGhpcy52aWV3O1xuXHRcdHZhciBpc1NlbGVjdGFibGUgPSB2aWV3Lm9wdCgnc2VsZWN0YWJsZScpO1xuXHRcdHZhciBkYXlDbGlja0hpdDsgLy8gbnVsbCBpZiBpbnZhbGlkIGRheUNsaWNrXG5cdFx0dmFyIHNlbGVjdGlvblNwYW47IC8vIG51bGwgaWYgaW52YWxpZCBzZWxlY3Rpb25cblxuXHRcdC8vIHRoaXMgbGlzdGVuZXIgdHJhY2tzIGEgbW91c2Vkb3duIG9uIGEgZGF5IGVsZW1lbnQsIGFuZCBhIHN1YnNlcXVlbnQgZHJhZy5cblx0XHQvLyBpZiB0aGUgZHJhZyBlbmRzIG9uIHRoZSBzYW1lIGRheSwgaXQgaXMgYSAnZGF5Q2xpY2snLlxuXHRcdC8vIGlmICdzZWxlY3RhYmxlJyBpcyBlbmFibGVkLCB0aGlzIGxpc3RlbmVyIGFsc28gZGV0ZWN0cyBzZWxlY3Rpb25zLlxuXHRcdHZhciBkcmFnTGlzdGVuZXIgPSBuZXcgSGl0RHJhZ0xpc3RlbmVyKHRoaXMsIHtcblx0XHRcdHNjcm9sbDogdmlldy5vcHQoJ2RyYWdTY3JvbGwnKSxcblx0XHRcdGludGVyYWN0aW9uU3RhcnQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRkYXlDbGlja0hpdCA9IGRyYWdMaXN0ZW5lci5vcmlnSGl0OyAvLyBmb3IgZGF5Q2xpY2ssIHdoZXJlIG5vIGRyYWdnaW5nIGhhcHBlbnNcblx0XHRcdFx0c2VsZWN0aW9uU3BhbiA9IG51bGw7XG5cdFx0XHR9LFxuXHRcdFx0ZHJhZ1N0YXJ0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmlldy51bnNlbGVjdCgpOyAvLyBzaW5jZSB3ZSBjb3VsZCBiZSByZW5kZXJpbmcgYSBuZXcgc2VsZWN0aW9uLCB3ZSB3YW50IHRvIGNsZWFyIGFueSBvbGQgb25lXG5cdFx0XHR9LFxuXHRcdFx0aGl0T3ZlcjogZnVuY3Rpb24oaGl0LCBpc09yaWcsIG9yaWdIaXQpIHtcblx0XHRcdFx0aWYgKG9yaWdIaXQpIHsgLy8gY2xpY2sgbmVlZHMgdG8gaGF2ZSBzdGFydGVkIG9uIGEgaGl0XG5cblx0XHRcdFx0XHQvLyBpZiB1c2VyIGRyYWdnZWQgdG8gYW5vdGhlciBjZWxsIGF0IGFueSBwb2ludCwgaXQgY2FuIG5vIGxvbmdlciBiZSBhIGRheUNsaWNrXG5cdFx0XHRcdFx0aWYgKCFpc09yaWcpIHtcblx0XHRcdFx0XHRcdGRheUNsaWNrSGl0ID0gbnVsbDtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoaXNTZWxlY3RhYmxlKSB7XG5cdFx0XHRcdFx0XHRzZWxlY3Rpb25TcGFuID0gX3RoaXMuY29tcHV0ZVNlbGVjdGlvbihcblx0XHRcdFx0XHRcdFx0X3RoaXMuZ2V0SGl0U3BhbihvcmlnSGl0KSxcblx0XHRcdFx0XHRcdFx0X3RoaXMuZ2V0SGl0U3BhbihoaXQpXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0aWYgKHNlbGVjdGlvblNwYW4pIHtcblx0XHRcdFx0XHRcdFx0X3RoaXMucmVuZGVyU2VsZWN0aW9uKHNlbGVjdGlvblNwYW4pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZWxzZSBpZiAoc2VsZWN0aW9uU3BhbiA9PT0gZmFsc2UpIHtcblx0XHRcdFx0XHRcdFx0ZGlzYWJsZUN1cnNvcigpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGhpdE91dDogZnVuY3Rpb24oKSB7IC8vIGNhbGxlZCBiZWZvcmUgbW91c2UgbW92ZXMgdG8gYSBkaWZmZXJlbnQgaGl0IE9SIG1vdmVkIG91dCBvZiBhbGwgaGl0c1xuXHRcdFx0XHRkYXlDbGlja0hpdCA9IG51bGw7XG5cdFx0XHRcdHNlbGVjdGlvblNwYW4gPSBudWxsO1xuXHRcdFx0XHRfdGhpcy51bnJlbmRlclNlbGVjdGlvbigpO1xuXHRcdFx0fSxcblx0XHRcdGhpdERvbmU6IGZ1bmN0aW9uKCkgeyAvLyBjYWxsZWQgYWZ0ZXIgYSBoaXRPdXQgT1IgYmVmb3JlIGEgZHJhZ0VuZFxuXHRcdFx0XHRlbmFibGVDdXJzb3IoKTtcblx0XHRcdH0sXG5cdFx0XHRpbnRlcmFjdGlvbkVuZDogZnVuY3Rpb24oZXYsIGlzQ2FuY2VsbGVkKSB7XG5cdFx0XHRcdGlmICghaXNDYW5jZWxsZWQpIHtcblx0XHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0XHRkYXlDbGlja0hpdCAmJlxuXHRcdFx0XHRcdFx0IV90aGlzLmlzSWdub3JpbmdNb3VzZSAvLyBzZWUgaGFjayBpbiBkYXlUb3VjaFN0YXJ0XG5cdFx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0XHR2aWV3LnRyaWdnZXJEYXlDbGljayhcblx0XHRcdFx0XHRcdFx0X3RoaXMuZ2V0SGl0U3BhbihkYXlDbGlja0hpdCksXG5cdFx0XHRcdFx0XHRcdF90aGlzLmdldEhpdEVsKGRheUNsaWNrSGl0KSxcblx0XHRcdFx0XHRcdFx0ZXZcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChzZWxlY3Rpb25TcGFuKSB7XG5cdFx0XHRcdFx0XHQvLyB0aGUgc2VsZWN0aW9uIHdpbGwgYWxyZWFkeSBoYXZlIGJlZW4gcmVuZGVyZWQuIGp1c3QgcmVwb3J0IGl0XG5cdFx0XHRcdFx0XHR2aWV3LnJlcG9ydFNlbGVjdGlvbihzZWxlY3Rpb25TcGFuLCBldik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gZHJhZ0xpc3RlbmVyO1xuXHR9LFxuXG5cblx0Ly8gS2lsbHMgYWxsIGluLXByb2dyZXNzIGRyYWdnaW5nLlxuXHQvLyBVc2VmdWwgZm9yIHdoZW4gcHVibGljIEFQSSBtZXRob2RzIHRoYXQgcmVzdWx0IGluIHJlLXJlbmRlcmluZyBhcmUgaW52b2tlZCBkdXJpbmcgYSBkcmFnLlxuXHQvLyBBbHNvIHVzZWZ1bCBmb3Igd2hlbiB0b3VjaCBkZXZpY2VzIG1pc2JlaGF2ZSBhbmQgZG9uJ3QgZmlyZSB0aGVpciB0b3VjaGVuZC5cblx0Y2xlYXJEcmFnTGlzdGVuZXJzOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLmRheURyYWdMaXN0ZW5lci5lbmRJbnRlcmFjdGlvbigpO1xuXG5cdFx0aWYgKHRoaXMuc2VnRHJhZ0xpc3RlbmVyKSB7XG5cdFx0XHR0aGlzLnNlZ0RyYWdMaXN0ZW5lci5lbmRJbnRlcmFjdGlvbigpOyAvLyB3aWxsIGNsZWFyIHRoaXMuc2VnRHJhZ0xpc3RlbmVyXG5cdFx0fVxuXHRcdGlmICh0aGlzLnNlZ1Jlc2l6ZUxpc3RlbmVyKSB7XG5cdFx0XHR0aGlzLnNlZ1Jlc2l6ZUxpc3RlbmVyLmVuZEludGVyYWN0aW9uKCk7IC8vIHdpbGwgY2xlYXIgdGhpcy5zZWdSZXNpemVMaXN0ZW5lclxuXHRcdH1cblx0XHRpZiAodGhpcy5leHRlcm5hbERyYWdMaXN0ZW5lcikge1xuXHRcdFx0dGhpcy5leHRlcm5hbERyYWdMaXN0ZW5lci5lbmRJbnRlcmFjdGlvbigpOyAvLyB3aWxsIGNsZWFyIHRoaXMuZXh0ZXJuYWxEcmFnTGlzdGVuZXJcblx0XHR9XG5cdH0sXG5cblxuXHQvKiBFdmVudCBIZWxwZXJcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0Ly8gVE9ETzogc2hvdWxkIHByb2JhYmx5IG1vdmUgdGhpcyB0byBHcmlkLmV2ZW50cywgbGlrZSB3ZSBkaWQgZXZlbnQgZHJhZ2dpbmcgLyByZXNpemluZ1xuXG5cblx0Ly8gUmVuZGVycyBhIG1vY2sgZXZlbnQgYXQgdGhlIGdpdmVuIGV2ZW50IGxvY2F0aW9uLCB3aGljaCBjb250YWlucyB6b25lZCBzdGFydC9lbmQgcHJvcGVydGllcy5cblx0Ly8gUmV0dXJucyBhbGwgbW9jayBldmVudCBlbGVtZW50cy5cblx0cmVuZGVyRXZlbnRMb2NhdGlvbkhlbHBlcjogZnVuY3Rpb24oZXZlbnRMb2NhdGlvbiwgc291cmNlU2VnKSB7XG5cdFx0dmFyIGZha2VFdmVudCA9IHRoaXMuZmFicmljYXRlSGVscGVyRXZlbnQoZXZlbnRMb2NhdGlvbiwgc291cmNlU2VnKTtcblxuXHRcdHJldHVybiB0aGlzLnJlbmRlckhlbHBlcihmYWtlRXZlbnQsIHNvdXJjZVNlZyk7IC8vIGRvIHRoZSBhY3R1YWwgcmVuZGVyaW5nXG5cdH0sXG5cblxuXHQvLyBCdWlsZHMgYSBmYWtlIGV2ZW50IGdpdmVuIHpvbmVkIGV2ZW50IGRhdGUgcHJvcGVydGllcyBhbmQgYSBzZWdtZW50IGlzIHNob3VsZCBiZSBpbnNwaXJlZCBmcm9tLlxuXHQvLyBUaGUgcmFuZ2UncyBlbmQgY2FuIGJlIG51bGwsIGluIHdoaWNoIGNhc2UgdGhlIG1vY2sgZXZlbnQgdGhhdCBpcyByZW5kZXJlZCB3aWxsIGhhdmUgYSBudWxsIGVuZCB0aW1lLlxuXHQvLyBgc291cmNlU2VnYCBpcyB0aGUgaW50ZXJuYWwgc2VnbWVudCBvYmplY3QgaW52b2x2ZWQgaW4gdGhlIGRyYWcuIElmIG51bGwsIHNvbWV0aGluZyBleHRlcm5hbCBpcyBkcmFnZ2luZy5cblx0ZmFicmljYXRlSGVscGVyRXZlbnQ6IGZ1bmN0aW9uKGV2ZW50TG9jYXRpb24sIHNvdXJjZVNlZykge1xuXHRcdHZhciBmYWtlRXZlbnQgPSBzb3VyY2VTZWcgPyBjcmVhdGVPYmplY3Qoc291cmNlU2VnLmV2ZW50KSA6IHt9OyAvLyBtYXNrIHRoZSBvcmlnaW5hbCBldmVudCBvYmplY3QgaWYgcG9zc2libGVcblxuXHRcdGZha2VFdmVudC5zdGFydCA9IGV2ZW50TG9jYXRpb24uc3RhcnQuY2xvbmUoKTtcblx0XHRmYWtlRXZlbnQuZW5kID0gZXZlbnRMb2NhdGlvbi5lbmQgPyBldmVudExvY2F0aW9uLmVuZC5jbG9uZSgpIDogbnVsbDtcblx0XHRmYWtlRXZlbnQuYWxsRGF5ID0gbnVsbDsgLy8gZm9yY2UgaXQgdG8gYmUgZnJlc2hseSBjb21wdXRlZCBieSBub3JtYWxpemVFdmVudERhdGVzXG5cdFx0dGhpcy52aWV3LmNhbGVuZGFyLm5vcm1hbGl6ZUV2ZW50RGF0ZXMoZmFrZUV2ZW50KTtcblxuXHRcdC8vIHRoaXMgZXh0cmEgY2xhc3NOYW1lIHdpbGwgYmUgdXNlZnVsIGZvciBkaWZmZXJlbnRpYXRpbmcgcmVhbCBldmVudHMgZnJvbSBtb2NrIGV2ZW50cyBpbiBDU1Ncblx0XHRmYWtlRXZlbnQuY2xhc3NOYW1lID0gKGZha2VFdmVudC5jbGFzc05hbWUgfHwgW10pLmNvbmNhdCgnZmMtaGVscGVyJyk7XG5cblx0XHQvLyBpZiBzb21ldGhpbmcgZXh0ZXJuYWwgaXMgYmVpbmcgZHJhZ2dlZCBpbiwgZG9uJ3QgcmVuZGVyIGEgcmVzaXplclxuXHRcdGlmICghc291cmNlU2VnKSB7XG5cdFx0XHRmYWtlRXZlbnQuZWRpdGFibGUgPSBmYWxzZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZmFrZUV2ZW50O1xuXHR9LFxuXG5cblx0Ly8gUmVuZGVycyBhIG1vY2sgZXZlbnQuIEdpdmVuIHpvbmVkIGV2ZW50IGRhdGUgcHJvcGVydGllcy5cblx0Ly8gTXVzdCByZXR1cm4gYWxsIG1vY2sgZXZlbnQgZWxlbWVudHMuXG5cdHJlbmRlckhlbHBlcjogZnVuY3Rpb24oZXZlbnRMb2NhdGlvbiwgc291cmNlU2VnKSB7XG5cdFx0Ly8gc3ViY2xhc3NlcyBtdXN0IGltcGxlbWVudFxuXHR9LFxuXG5cblx0Ly8gVW5yZW5kZXJzIGEgbW9jayBldmVudFxuXHR1bnJlbmRlckhlbHBlcjogZnVuY3Rpb24oKSB7XG5cdFx0Ly8gc3ViY2xhc3NlcyBtdXN0IGltcGxlbWVudFxuXHR9LFxuXG5cblx0LyogU2VsZWN0aW9uXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBSZW5kZXJzIGEgdmlzdWFsIGluZGljYXRpb24gb2YgYSBzZWxlY3Rpb24uIFdpbGwgaGlnaGxpZ2h0IGJ5IGRlZmF1bHQgYnV0IGNhbiBiZSBvdmVycmlkZGVuIGJ5IHN1YmNsYXNzZXMuXG5cdC8vIEdpdmVuIGEgc3BhbiAodW56b25lZCBzdGFydC9lbmQgYW5kIG90aGVyIG1pc2MgZGF0YSlcblx0cmVuZGVyU2VsZWN0aW9uOiBmdW5jdGlvbihzcGFuKSB7XG5cdFx0dGhpcy5yZW5kZXJIaWdobGlnaHQoc3Bhbik7XG5cdH0sXG5cblxuXHQvLyBVbnJlbmRlcnMgYW55IHZpc3VhbCBpbmRpY2F0aW9ucyBvZiBhIHNlbGVjdGlvbi4gV2lsbCB1bnJlbmRlciBhIGhpZ2hsaWdodCBieSBkZWZhdWx0LlxuXHR1bnJlbmRlclNlbGVjdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy51bnJlbmRlckhpZ2hsaWdodCgpO1xuXHR9LFxuXG5cblx0Ly8gR2l2ZW4gdGhlIGZpcnN0IGFuZCBsYXN0IGRhdGUtc3BhbnMgb2YgYSBzZWxlY3Rpb24sIHJldHVybnMgYW5vdGhlciBkYXRlLXNwYW4gb2JqZWN0LlxuXHQvLyBTdWJjbGFzc2VzIGNhbiBvdmVycmlkZSBhbmQgcHJvdmlkZSBhZGRpdGlvbmFsIGRhdGEgaW4gdGhlIHNwYW4gb2JqZWN0LiBXaWxsIGJlIHBhc3NlZCB0byByZW5kZXJTZWxlY3Rpb24oKS5cblx0Ly8gV2lsbCByZXR1cm4gZmFsc2UgaWYgdGhlIHNlbGVjdGlvbiBpcyBpbnZhbGlkIGFuZCB0aGlzIHNob3VsZCBiZSBpbmRpY2F0ZWQgdG8gdGhlIHVzZXIuXG5cdC8vIFdpbGwgcmV0dXJuIG51bGwvdW5kZWZpbmVkIGlmIGEgc2VsZWN0aW9uIGludmFsaWQgYnV0IG5vIGVycm9yIHNob3VsZCBiZSByZXBvcnRlZC5cblx0Y29tcHV0ZVNlbGVjdGlvbjogZnVuY3Rpb24oc3BhbjAsIHNwYW4xKSB7XG5cdFx0dmFyIHNwYW4gPSB0aGlzLmNvbXB1dGVTZWxlY3Rpb25TcGFuKHNwYW4wLCBzcGFuMSk7XG5cblx0XHRpZiAoc3BhbiAmJiAhdGhpcy52aWV3LmNhbGVuZGFyLmlzU2VsZWN0aW9uU3BhbkFsbG93ZWQoc3BhbikpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gc3Bhbjtcblx0fSxcblxuXG5cdC8vIEdpdmVuIHR3byBzcGFucywgbXVzdCByZXR1cm4gdGhlIGNvbWJpbmF0aW9uIG9mIHRoZSB0d28uXG5cdC8vIFRPRE86IGRvIHRoaXMgc2VwYXJhdGlvbiBvZiBjb25jZXJucyAoY29tYmluaW5nIFZTIHZhbGlkYXRpb24pIGZvciBldmVudCBkbmQvcmVzaXplIHRvby5cblx0Y29tcHV0ZVNlbGVjdGlvblNwYW46IGZ1bmN0aW9uKHNwYW4wLCBzcGFuMSkge1xuXHRcdHZhciBkYXRlcyA9IFsgc3BhbjAuc3RhcnQsIHNwYW4wLmVuZCwgc3BhbjEuc3RhcnQsIHNwYW4xLmVuZCBdO1xuXG5cdFx0ZGF0ZXMuc29ydChjb21wYXJlTnVtYmVycyk7IC8vIHNvcnRzIGNocm9ub2xvZ2ljYWxseS4gd29ya3Mgd2l0aCBNb21lbnRzXG5cblx0XHRyZXR1cm4geyBzdGFydDogZGF0ZXNbMF0uY2xvbmUoKSwgZW5kOiBkYXRlc1szXS5jbG9uZSgpIH07XG5cdH0sXG5cblxuXHQvKiBIaWdobGlnaHRcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIFJlbmRlcnMgYW4gZW1waGFzaXMgb24gdGhlIGdpdmVuIGRhdGUgcmFuZ2UuIEdpdmVuIGEgc3BhbiAodW56b25lZCBzdGFydC9lbmQgYW5kIG90aGVyIG1pc2MgZGF0YSlcblx0cmVuZGVySGlnaGxpZ2h0OiBmdW5jdGlvbihzcGFuKSB7XG5cdFx0dGhpcy5yZW5kZXJGaWxsKCdoaWdobGlnaHQnLCB0aGlzLnNwYW5Ub1NlZ3Moc3BhbikpO1xuXHR9LFxuXG5cblx0Ly8gVW5yZW5kZXJzIHRoZSBlbXBoYXNpcyBvbiBhIGRhdGUgcmFuZ2Vcblx0dW5yZW5kZXJIaWdobGlnaHQ6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMudW5yZW5kZXJGaWxsKCdoaWdobGlnaHQnKTtcblx0fSxcblxuXG5cdC8vIEdlbmVyYXRlcyBhbiBhcnJheSBvZiBjbGFzc05hbWVzIGZvciByZW5kZXJpbmcgdGhlIGhpZ2hsaWdodC4gVXNlZCBieSB0aGUgZmlsbCBzeXN0ZW0uXG5cdGhpZ2hsaWdodFNlZ0NsYXNzZXM6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBbICdmYy1oaWdobGlnaHQnIF07XG5cdH0sXG5cblxuXHQvKiBCdXNpbmVzcyBIb3Vyc1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0cmVuZGVyQnVzaW5lc3NIb3VyczogZnVuY3Rpb24oKSB7XG5cdH0sXG5cblxuXHR1bnJlbmRlckJ1c2luZXNzSG91cnM6IGZ1bmN0aW9uKCkge1xuXHR9LFxuXG5cblx0LyogTm93IEluZGljYXRvclxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Z2V0Tm93SW5kaWNhdG9yVW5pdDogZnVuY3Rpb24oKSB7XG5cdH0sXG5cblxuXHRyZW5kZXJOb3dJbmRpY2F0b3I6IGZ1bmN0aW9uKGRhdGUpIHtcblx0fSxcblxuXG5cdHVucmVuZGVyTm93SW5kaWNhdG9yOiBmdW5jdGlvbigpIHtcblx0fSxcblxuXG5cdC8qIEZpbGwgU3lzdGVtIChoaWdobGlnaHQsIGJhY2tncm91bmQgZXZlbnRzLCBidXNpbmVzcyBob3Vycylcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0VE9ETzogcmVtb3ZlIHRoaXMgc3lzdGVtLiBsaWtlIHdlIGRpZCBpbiBUaW1lR3JpZFxuXHQqL1xuXG5cblx0Ly8gUmVuZGVycyBhIHNldCBvZiByZWN0YW5nbGVzIG92ZXIgdGhlIGdpdmVuIHNlZ21lbnRzIG9mIHRpbWUuXG5cdC8vIE1VU1QgUkVUVVJOIGEgc3Vic2V0IG9mIHNlZ3MsIHRoZSBzZWdzIHRoYXQgd2VyZSBhY3R1YWxseSByZW5kZXJlZC5cblx0Ly8gUmVzcG9uc2libGUgZm9yIHBvcHVsYXRpbmcgdGhpcy5lbHNCeUZpbGwuIFRPRE86IGJldHRlciBBUEkgZm9yIGV4cHJlc3NpbmcgdGhpcyByZXF1aXJlbWVudFxuXHRyZW5kZXJGaWxsOiBmdW5jdGlvbih0eXBlLCBzZWdzKSB7XG5cdFx0Ly8gc3ViY2xhc3NlcyBtdXN0IGltcGxlbWVudFxuXHR9LFxuXG5cblx0Ly8gVW5yZW5kZXJzIGEgc3BlY2lmaWMgdHlwZSBvZiBmaWxsIHRoYXQgaXMgY3VycmVudGx5IHJlbmRlcmVkIG9uIHRoZSBncmlkXG5cdHVucmVuZGVyRmlsbDogZnVuY3Rpb24odHlwZSkge1xuXHRcdHZhciBlbCA9IHRoaXMuZWxzQnlGaWxsW3R5cGVdO1xuXG5cdFx0aWYgKGVsKSB7XG5cdFx0XHRlbC5yZW1vdmUoKTtcblx0XHRcdGRlbGV0ZSB0aGlzLmVsc0J5RmlsbFt0eXBlXTtcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBSZW5kZXJzIGFuZCBhc3NpZ25zIGFuIGBlbGAgcHJvcGVydHkgZm9yIGVhY2ggZmlsbCBzZWdtZW50LiBHZW5lcmljIGVub3VnaCB0byB3b3JrIHdpdGggZGlmZmVyZW50IHR5cGVzLlxuXHQvLyBPbmx5IHJldHVybnMgc2VnbWVudHMgdGhhdCBzdWNjZXNzZnVsbHkgcmVuZGVyZWQuXG5cdC8vIFRvIGJlIGhhcm5lc3NlZCBieSByZW5kZXJGaWxsIChpbXBsZW1lbnRlZCBieSBzdWJjbGFzc2VzKS5cblx0Ly8gQW5hbGFnb3VzIHRvIHJlbmRlckZnU2VnRWxzLlxuXHRyZW5kZXJGaWxsU2VnRWxzOiBmdW5jdGlvbih0eXBlLCBzZWdzKSB7XG5cdFx0dmFyIF90aGlzID0gdGhpcztcblx0XHR2YXIgc2VnRWxNZXRob2QgPSB0aGlzW3R5cGUgKyAnU2VnRWwnXTtcblx0XHR2YXIgaHRtbCA9ICcnO1xuXHRcdHZhciByZW5kZXJlZFNlZ3MgPSBbXTtcblx0XHR2YXIgaTtcblxuXHRcdGlmIChzZWdzLmxlbmd0aCkge1xuXG5cdFx0XHQvLyBidWlsZCBhIGxhcmdlIGNvbmNhdGVuYXRpb24gb2Ygc2VnbWVudCBIVE1MXG5cdFx0XHRmb3IgKGkgPSAwOyBpIDwgc2Vncy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRodG1sICs9IHRoaXMuZmlsbFNlZ0h0bWwodHlwZSwgc2Vnc1tpXSk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEdyYWIgaW5kaXZpZHVhbCBlbGVtZW50cyBmcm9tIHRoZSBjb21iaW5lZCBIVE1MIHN0cmluZy4gVXNlIGVhY2ggYXMgdGhlIGRlZmF1bHQgcmVuZGVyaW5nLlxuXHRcdFx0Ly8gVGhlbiwgY29tcHV0ZSB0aGUgJ2VsJyBmb3IgZWFjaCBzZWdtZW50LlxuXHRcdFx0JChodG1sKS5lYWNoKGZ1bmN0aW9uKGksIG5vZGUpIHtcblx0XHRcdFx0dmFyIHNlZyA9IHNlZ3NbaV07XG5cdFx0XHRcdHZhciBlbCA9ICQobm9kZSk7XG5cblx0XHRcdFx0Ly8gYWxsb3cgY3VzdG9tIGZpbHRlciBtZXRob2RzIHBlci10eXBlXG5cdFx0XHRcdGlmIChzZWdFbE1ldGhvZCkge1xuXHRcdFx0XHRcdGVsID0gc2VnRWxNZXRob2QuY2FsbChfdGhpcywgc2VnLCBlbCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoZWwpIHsgLy8gY3VzdG9tIGZpbHRlcnMgZGlkIG5vdCBjYW5jZWwgdGhlIHJlbmRlclxuXHRcdFx0XHRcdGVsID0gJChlbCk7IC8vIGFsbG93IGN1c3RvbSBmaWx0ZXIgdG8gcmV0dXJuIHJhdyBET00gbm9kZVxuXG5cdFx0XHRcdFx0Ly8gY29ycmVjdCBlbGVtZW50IHR5cGU/ICh3b3VsZCBiZSBiYWQgaWYgYSBub24tVEQgd2VyZSBpbnNlcnRlZCBpbnRvIGEgdGFibGUgZm9yIGV4YW1wbGUpXG5cdFx0XHRcdFx0aWYgKGVsLmlzKF90aGlzLmZpbGxTZWdUYWcpKSB7XG5cdFx0XHRcdFx0XHRzZWcuZWwgPSBlbDtcblx0XHRcdFx0XHRcdHJlbmRlcmVkU2Vncy5wdXNoKHNlZyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gcmVuZGVyZWRTZWdzO1xuXHR9LFxuXG5cblx0ZmlsbFNlZ1RhZzogJ2RpdicsIC8vIHN1YmNsYXNzZXMgY2FuIG92ZXJyaWRlXG5cblxuXHQvLyBCdWlsZHMgdGhlIEhUTUwgbmVlZGVkIGZvciBvbmUgZmlsbCBzZWdtZW50LiBHZW5lcmljIGVub3VnaCB0byB3b3JrIHdpdGggZGlmZmVyZW50IHR5cGVzLlxuXHRmaWxsU2VnSHRtbDogZnVuY3Rpb24odHlwZSwgc2VnKSB7XG5cblx0XHQvLyBjdXN0b20gaG9va3MgcGVyLXR5cGVcblx0XHR2YXIgY2xhc3Nlc01ldGhvZCA9IHRoaXNbdHlwZSArICdTZWdDbGFzc2VzJ107XG5cdFx0dmFyIGNzc01ldGhvZCA9IHRoaXNbdHlwZSArICdTZWdDc3MnXTtcblxuXHRcdHZhciBjbGFzc2VzID0gY2xhc3Nlc01ldGhvZCA/IGNsYXNzZXNNZXRob2QuY2FsbCh0aGlzLCBzZWcpIDogW107XG5cdFx0dmFyIGNzcyA9IGNzc1RvU3RyKGNzc01ldGhvZCA/IGNzc01ldGhvZC5jYWxsKHRoaXMsIHNlZykgOiB7fSk7XG5cblx0XHRyZXR1cm4gJzwnICsgdGhpcy5maWxsU2VnVGFnICtcblx0XHRcdChjbGFzc2VzLmxlbmd0aCA/ICcgY2xhc3M9XCInICsgY2xhc3Nlcy5qb2luKCcgJykgKyAnXCInIDogJycpICtcblx0XHRcdChjc3MgPyAnIHN0eWxlPVwiJyArIGNzcyArICdcIicgOiAnJykgK1xuXHRcdFx0JyAvPic7XG5cdH0sXG5cblxuXG5cdC8qIEdlbmVyaWMgcmVuZGVyaW5nIHV0aWxpdGllcyBmb3Igc3ViY2xhc3Nlc1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gQ29tcHV0ZXMgSFRNTCBjbGFzc05hbWVzIGZvciBhIHNpbmdsZS1kYXkgZWxlbWVudFxuXHRnZXREYXlDbGFzc2VzOiBmdW5jdGlvbihkYXRlLCBub1RoZW1lSGlnaGxpZ2h0KSB7XG5cdFx0dmFyIHZpZXcgPSB0aGlzLnZpZXc7XG5cdFx0dmFyIHRvZGF5ID0gdmlldy5jYWxlbmRhci5nZXROb3coKTtcblx0XHR2YXIgY2xhc3NlcyA9IFsgJ2ZjLScgKyBkYXlJRHNbZGF0ZS5kYXkoKV0gXTtcblxuXHRcdGlmIChcblx0XHRcdHZpZXcuaW50ZXJ2YWxEdXJhdGlvbi5hcygnbW9udGhzJykgPT0gMSAmJlxuXHRcdFx0ZGF0ZS5tb250aCgpICE9IHZpZXcuaW50ZXJ2YWxTdGFydC5tb250aCgpXG5cdFx0KSB7XG5cdFx0XHRjbGFzc2VzLnB1c2goJ2ZjLW90aGVyLW1vbnRoJyk7XG5cdFx0fVxuXG5cdFx0aWYgKGRhdGUuaXNTYW1lKHRvZGF5LCAnZGF5JykpIHtcblx0XHRcdGNsYXNzZXMucHVzaCgnZmMtdG9kYXknKTtcblxuXHRcdFx0aWYgKG5vVGhlbWVIaWdobGlnaHQgIT09IHRydWUpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKHZpZXcuaGlnaGxpZ2h0U3RhdGVDbGFzcyk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVsc2UgaWYgKGRhdGUgPCB0b2RheSkge1xuXHRcdFx0Y2xhc3Nlcy5wdXNoKCdmYy1wYXN0Jyk7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0Y2xhc3Nlcy5wdXNoKCdmYy1mdXR1cmUnKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gY2xhc3Nlcztcblx0fVxuXG59KTtcblxuOztcblxuLyogRXZlbnQtcmVuZGVyaW5nIGFuZCBldmVudC1pbnRlcmFjdGlvbiBtZXRob2RzIGZvciB0aGUgYWJzdHJhY3QgR3JpZCBjbGFzc1xuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbkdyaWQubWl4aW4oe1xuXG5cdC8vIHNlbGYtY29uZmlnLCBvdmVycmlkYWJsZSBieSBzdWJjbGFzc2VzXG5cdHNlZ1NlbGVjdG9yOiAnLmZjLWV2ZW50LWNvbnRhaW5lciA+IConLCAvLyB3aGF0IGNvbnN0aXR1dGVzIGFuIGV2ZW50IGVsZW1lbnQ/XG5cblx0bW91c2VkT3ZlclNlZzogbnVsbCwgLy8gdGhlIHNlZ21lbnQgb2JqZWN0IHRoZSB1c2VyJ3MgbW91c2UgaXMgb3Zlci4gbnVsbCBpZiBvdmVyIG5vdGhpbmdcblx0aXNEcmFnZ2luZ1NlZzogZmFsc2UsIC8vIGlzIGEgc2VnbWVudCBiZWluZyBkcmFnZ2VkPyBib29sZWFuXG5cdGlzUmVzaXppbmdTZWc6IGZhbHNlLCAvLyBpcyBhIHNlZ21lbnQgYmVpbmcgcmVzaXplZD8gYm9vbGVhblxuXHRpc0RyYWdnaW5nRXh0ZXJuYWw6IGZhbHNlLCAvLyBqcXVpLWRyYWdnaW5nIGFuIGV4dGVybmFsIGVsZW1lbnQ/IGJvb2xlYW5cblx0c2VnczogbnVsbCwgLy8gdGhlICpldmVudCogc2VnbWVudHMgY3VycmVudGx5IHJlbmRlcmVkIGluIHRoZSBncmlkLiBUT0RPOiByZW5hbWUgdG8gYGV2ZW50U2Vnc2BcblxuXG5cdC8vIFJlbmRlcnMgdGhlIGdpdmVuIGV2ZW50cyBvbnRvIHRoZSBncmlkXG5cdHJlbmRlckV2ZW50czogZnVuY3Rpb24oZXZlbnRzKSB7XG5cdFx0dmFyIGJnRXZlbnRzID0gW107XG5cdFx0dmFyIGZnRXZlbnRzID0gW107XG5cdFx0dmFyIGk7XG5cblx0XHRmb3IgKGkgPSAwOyBpIDwgZXZlbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHQoaXNCZ0V2ZW50KGV2ZW50c1tpXSkgPyBiZ0V2ZW50cyA6IGZnRXZlbnRzKS5wdXNoKGV2ZW50c1tpXSk7XG5cdFx0fVxuXG5cdFx0dGhpcy5zZWdzID0gW10uY29uY2F0KCAvLyByZWNvcmQgYWxsIHNlZ3Ncblx0XHRcdHRoaXMucmVuZGVyQmdFdmVudHMoYmdFdmVudHMpLFxuXHRcdFx0dGhpcy5yZW5kZXJGZ0V2ZW50cyhmZ0V2ZW50cylcblx0XHQpO1xuXHR9LFxuXG5cblx0cmVuZGVyQmdFdmVudHM6IGZ1bmN0aW9uKGV2ZW50cykge1xuXHRcdHZhciBzZWdzID0gdGhpcy5ldmVudHNUb1NlZ3MoZXZlbnRzKTtcblxuXHRcdC8vIHJlbmRlckJnU2VncyBtaWdodCByZXR1cm4gYSBzdWJzZXQgb2Ygc2Vncywgc2VncyB0aGF0IHdlcmUgYWN0dWFsbHkgcmVuZGVyZWRcblx0XHRyZXR1cm4gdGhpcy5yZW5kZXJCZ1NlZ3Moc2VncykgfHwgc2Vncztcblx0fSxcblxuXG5cdHJlbmRlckZnRXZlbnRzOiBmdW5jdGlvbihldmVudHMpIHtcblx0XHR2YXIgc2VncyA9IHRoaXMuZXZlbnRzVG9TZWdzKGV2ZW50cyk7XG5cblx0XHQvLyByZW5kZXJGZ1NlZ3MgbWlnaHQgcmV0dXJuIGEgc3Vic2V0IG9mIHNlZ3MsIHNlZ3MgdGhhdCB3ZXJlIGFjdHVhbGx5IHJlbmRlcmVkXG5cdFx0cmV0dXJuIHRoaXMucmVuZGVyRmdTZWdzKHNlZ3MpIHx8IHNlZ3M7XG5cdH0sXG5cblxuXHQvLyBVbnJlbmRlcnMgYWxsIGV2ZW50cyBjdXJyZW50bHkgcmVuZGVyZWQgb24gdGhlIGdyaWRcblx0dW5yZW5kZXJFdmVudHM6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuaGFuZGxlU2VnTW91c2VvdXQoKTsgLy8gdHJpZ2dlciBhbiBldmVudE1vdXNlb3V0IGlmIHVzZXIncyBtb3VzZSBpcyBvdmVyIGFuIGV2ZW50XG5cdFx0dGhpcy5jbGVhckRyYWdMaXN0ZW5lcnMoKTtcblxuXHRcdHRoaXMudW5yZW5kZXJGZ1NlZ3MoKTtcblx0XHR0aGlzLnVucmVuZGVyQmdTZWdzKCk7XG5cblx0XHR0aGlzLnNlZ3MgPSBudWxsO1xuXHR9LFxuXG5cblx0Ly8gUmV0cmlldmVzIGFsbCByZW5kZXJlZCBzZWdtZW50IG9iamVjdHMgY3VycmVudGx5IHJlbmRlcmVkIG9uIHRoZSBncmlkXG5cdGdldEV2ZW50U2VnczogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuc2VncyB8fCBbXTtcblx0fSxcblxuXG5cdC8qIEZvcmVncm91bmQgU2VnbWVudCBSZW5kZXJpbmdcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIFJlbmRlcnMgZm9yZWdyb3VuZCBldmVudCBzZWdtZW50cyBvbnRvIHRoZSBncmlkLiBNYXkgcmV0dXJuIGEgc3Vic2V0IG9mIHNlZ3MgdGhhdCB3ZXJlIHJlbmRlcmVkLlxuXHRyZW5kZXJGZ1NlZ3M6IGZ1bmN0aW9uKHNlZ3MpIHtcblx0XHQvLyBzdWJjbGFzc2VzIG11c3QgaW1wbGVtZW50XG5cdH0sXG5cblxuXHQvLyBVbnJlbmRlcnMgYWxsIGN1cnJlbnRseSByZW5kZXJlZCBmb3JlZ3JvdW5kIHNlZ21lbnRzXG5cdHVucmVuZGVyRmdTZWdzOiBmdW5jdGlvbigpIHtcblx0XHQvLyBzdWJjbGFzc2VzIG11c3QgaW1wbGVtZW50XG5cdH0sXG5cblxuXHQvLyBSZW5kZXJzIGFuZCBhc3NpZ25zIGFuIGBlbGAgcHJvcGVydHkgZm9yIGVhY2ggZm9yZWdyb3VuZCBldmVudCBzZWdtZW50LlxuXHQvLyBPbmx5IHJldHVybnMgc2VnbWVudHMgdGhhdCBzdWNjZXNzZnVsbHkgcmVuZGVyZWQuXG5cdC8vIEEgdXRpbGl0eSB0aGF0IHN1YmNsYXNzZXMgbWF5IHVzZS5cblx0cmVuZGVyRmdTZWdFbHM6IGZ1bmN0aW9uKHNlZ3MsIGRpc2FibGVSZXNpemluZykge1xuXHRcdHZhciB2aWV3ID0gdGhpcy52aWV3O1xuXHRcdHZhciBodG1sID0gJyc7XG5cdFx0dmFyIHJlbmRlcmVkU2VncyA9IFtdO1xuXHRcdHZhciBpO1xuXG5cdFx0aWYgKHNlZ3MubGVuZ3RoKSB7IC8vIGRvbid0IGJ1aWxkIGFuIGVtcHR5IGh0bWwgc3RyaW5nXG5cblx0XHRcdC8vIGJ1aWxkIGEgbGFyZ2UgY29uY2F0ZW5hdGlvbiBvZiBldmVudCBzZWdtZW50IEhUTUxcblx0XHRcdGZvciAoaSA9IDA7IGkgPCBzZWdzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGh0bWwgKz0gdGhpcy5mZ1NlZ0h0bWwoc2Vnc1tpXSwgZGlzYWJsZVJlc2l6aW5nKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gR3JhYiBpbmRpdmlkdWFsIGVsZW1lbnRzIGZyb20gdGhlIGNvbWJpbmVkIEhUTUwgc3RyaW5nLiBVc2UgZWFjaCBhcyB0aGUgZGVmYXVsdCByZW5kZXJpbmcuXG5cdFx0XHQvLyBUaGVuLCBjb21wdXRlIHRoZSAnZWwnIGZvciBlYWNoIHNlZ21lbnQuIEFuIGVsIG1pZ2h0IGJlIG51bGwgaWYgdGhlIGV2ZW50UmVuZGVyIGNhbGxiYWNrIHJldHVybmVkIGZhbHNlLlxuXHRcdFx0JChodG1sKS5lYWNoKGZ1bmN0aW9uKGksIG5vZGUpIHtcblx0XHRcdFx0dmFyIHNlZyA9IHNlZ3NbaV07XG5cdFx0XHRcdHZhciBlbCA9IHZpZXcucmVzb2x2ZUV2ZW50RWwoc2VnLmV2ZW50LCAkKG5vZGUpKTtcblxuXHRcdFx0XHRpZiAoZWwpIHtcblx0XHRcdFx0XHRlbC5kYXRhKCdmYy1zZWcnLCBzZWcpOyAvLyB1c2VkIGJ5IGhhbmRsZXJzXG5cdFx0XHRcdFx0c2VnLmVsID0gZWw7XG5cdFx0XHRcdFx0cmVuZGVyZWRTZWdzLnB1c2goc2VnKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJlbmRlcmVkU2Vncztcblx0fSxcblxuXG5cdC8vIEdlbmVyYXRlcyB0aGUgSFRNTCBmb3IgdGhlIGRlZmF1bHQgcmVuZGVyaW5nIG9mIGEgZm9yZWdyb3VuZCBldmVudCBzZWdtZW50LiBVc2VkIGJ5IHJlbmRlckZnU2VnRWxzKClcblx0ZmdTZWdIdG1sOiBmdW5jdGlvbihzZWcsIGRpc2FibGVSZXNpemluZykge1xuXHRcdC8vIHN1YmNsYXNzZXMgc2hvdWxkIGltcGxlbWVudFxuXHR9LFxuXG5cblx0LyogQmFja2dyb3VuZCBTZWdtZW50IFJlbmRlcmluZ1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gUmVuZGVycyB0aGUgZ2l2ZW4gYmFja2dyb3VuZCBldmVudCBzZWdtZW50cyBvbnRvIHRoZSBncmlkLlxuXHQvLyBSZXR1cm5zIGEgc3Vic2V0IG9mIHRoZSBzZWdzIHRoYXQgd2VyZSBhY3R1YWxseSByZW5kZXJlZC5cblx0cmVuZGVyQmdTZWdzOiBmdW5jdGlvbihzZWdzKSB7XG5cdFx0cmV0dXJuIHRoaXMucmVuZGVyRmlsbCgnYmdFdmVudCcsIHNlZ3MpO1xuXHR9LFxuXG5cblx0Ly8gVW5yZW5kZXJzIGFsbCB0aGUgY3VycmVudGx5IHJlbmRlcmVkIGJhY2tncm91bmQgZXZlbnQgc2VnbWVudHNcblx0dW5yZW5kZXJCZ1NlZ3M6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMudW5yZW5kZXJGaWxsKCdiZ0V2ZW50Jyk7XG5cdH0sXG5cblxuXHQvLyBSZW5kZXJzIGEgYmFja2dyb3VuZCBldmVudCBlbGVtZW50LCBnaXZlbiB0aGUgZGVmYXVsdCByZW5kZXJpbmcuIENhbGxlZCBieSB0aGUgZmlsbCBzeXN0ZW0uXG5cdGJnRXZlbnRTZWdFbDogZnVuY3Rpb24oc2VnLCBlbCkge1xuXHRcdHJldHVybiB0aGlzLnZpZXcucmVzb2x2ZUV2ZW50RWwoc2VnLmV2ZW50LCBlbCk7IC8vIHdpbGwgZmlsdGVyIHRocm91Z2ggZXZlbnRSZW5kZXJcblx0fSxcblxuXG5cdC8vIEdlbmVyYXRlcyBhbiBhcnJheSBvZiBjbGFzc05hbWVzIHRvIGJlIHVzZWQgZm9yIHRoZSBkZWZhdWx0IHJlbmRlcmluZyBvZiBhIGJhY2tncm91bmQgZXZlbnQuXG5cdC8vIENhbGxlZCBieSBmaWxsU2VnSHRtbC5cblx0YmdFdmVudFNlZ0NsYXNzZXM6IGZ1bmN0aW9uKHNlZykge1xuXHRcdHZhciBldmVudCA9IHNlZy5ldmVudDtcblx0XHR2YXIgc291cmNlID0gZXZlbnQuc291cmNlIHx8IHt9O1xuXG5cdFx0cmV0dXJuIFsgJ2ZjLWJnZXZlbnQnIF0uY29uY2F0KFxuXHRcdFx0ZXZlbnQuY2xhc3NOYW1lLFxuXHRcdFx0c291cmNlLmNsYXNzTmFtZSB8fCBbXVxuXHRcdCk7XG5cdH0sXG5cblxuXHQvLyBHZW5lcmF0ZXMgYSBzZW1pY29sb24tc2VwYXJhdGVkIENTUyBzdHJpbmcgdG8gYmUgdXNlZCBmb3IgdGhlIGRlZmF1bHQgcmVuZGVyaW5nIG9mIGEgYmFja2dyb3VuZCBldmVudC5cblx0Ly8gQ2FsbGVkIGJ5IGZpbGxTZWdIdG1sLlxuXHRiZ0V2ZW50U2VnQ3NzOiBmdW5jdGlvbihzZWcpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0J2JhY2tncm91bmQtY29sb3InOiB0aGlzLmdldFNlZ1NraW5Dc3Moc2VnKVsnYmFja2dyb3VuZC1jb2xvciddXG5cdFx0fTtcblx0fSxcblxuXG5cdC8vIEdlbmVyYXRlcyBhbiBhcnJheSBvZiBjbGFzc05hbWVzIHRvIGJlIHVzZWQgZm9yIHRoZSByZW5kZXJpbmcgYnVzaW5lc3MgaG91cnMgb3ZlcmxheS4gQ2FsbGVkIGJ5IHRoZSBmaWxsIHN5c3RlbS5cblx0Ly8gQ2FsbGVkIGJ5IGZpbGxTZWdIdG1sLlxuXHRidXNpbmVzc0hvdXJzU2VnQ2xhc3NlczogZnVuY3Rpb24oc2VnKSB7XG5cdFx0cmV0dXJuIFsgJ2ZjLW5vbmJ1c2luZXNzJywgJ2ZjLWJnZXZlbnQnIF07XG5cdH0sXG5cblxuXHQvKiBCdXNpbmVzcyBIb3Vyc1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gQ29tcHV0ZSBidXNpbmVzcyBob3VyIHNlZ3MgZm9yIHRoZSBncmlkJ3MgY3VycmVudCBkYXRlIHJhbmdlLlxuXHQvLyBDYWxsZXIgbXVzdCBhc2sgaWYgd2hvbGUtZGF5IGJ1c2luZXNzIGhvdXJzIGFyZSBuZWVkZWQuXG5cdC8vIElmIG5vIGBidXNpbmVzc0hvdXJzYCBjb25maWd1cmF0aW9uIHZhbHVlIGlzIHNwZWNpZmllZCwgYXNzdW1lcyB0aGUgY2FsZW5kYXIgZGVmYXVsdC5cblx0YnVpbGRCdXNpbmVzc0hvdXJTZWdzOiBmdW5jdGlvbih3aG9sZURheSwgYnVzaW5lc3NIb3Vycykge1xuXHRcdHJldHVybiB0aGlzLmV2ZW50c1RvU2Vncyhcblx0XHRcdHRoaXMuYnVpbGRCdXNpbmVzc0hvdXJFdmVudHMod2hvbGVEYXksIGJ1c2luZXNzSG91cnMpXG5cdFx0KTtcblx0fSxcblxuXG5cdC8vIENvbXB1dGUgYnVzaW5lc3MgaG91ciAqZXZlbnRzKiBmb3IgdGhlIGdyaWQncyBjdXJyZW50IGRhdGUgcmFuZ2UuXG5cdC8vIENhbGxlciBtdXN0IGFzayBpZiB3aG9sZS1kYXkgYnVzaW5lc3MgaG91cnMgYXJlIG5lZWRlZC5cblx0Ly8gSWYgbm8gYGJ1c2luZXNzSG91cnNgIGNvbmZpZ3VyYXRpb24gdmFsdWUgaXMgc3BlY2lmaWVkLCBhc3N1bWVzIHRoZSBjYWxlbmRhciBkZWZhdWx0LlxuXHRidWlsZEJ1c2luZXNzSG91ckV2ZW50czogZnVuY3Rpb24od2hvbGVEYXksIGJ1c2luZXNzSG91cnMpIHtcblx0XHR2YXIgY2FsZW5kYXIgPSB0aGlzLnZpZXcuY2FsZW5kYXI7XG5cdFx0dmFyIGV2ZW50cztcblxuXHRcdGlmIChidXNpbmVzc0hvdXJzID09IG51bGwpIHtcblx0XHRcdC8vIGZhbGxiYWNrXG5cdFx0XHQvLyBhY2Nlc3MgZnJvbSBjYWxlbmRhd3IuIGRvbid0IGFjY2VzcyBmcm9tIHZpZXcuIGRvZXNuJ3QgdXBkYXRlIHdpdGggZHluYW1pYyBvcHRpb25zLlxuXHRcdFx0YnVzaW5lc3NIb3VycyA9IGNhbGVuZGFyLm9wdGlvbnMuYnVzaW5lc3NIb3Vycztcblx0XHR9XG5cblx0XHRldmVudHMgPSBjYWxlbmRhci5jb21wdXRlQnVzaW5lc3NIb3VyRXZlbnRzKHdob2xlRGF5LCBidXNpbmVzc0hvdXJzKTtcblxuXHRcdC8vIEhBQ0suIEV2ZW50dWFsbHkgcmVmYWN0b3IgYnVzaW5lc3MgaG91cnMgXCJldmVudHNcIiBzeXN0ZW0uXG5cdFx0Ly8gSWYgbm8gZXZlbnRzIGFyZSBnaXZlbiwgYnV0IGJ1c2luZXNzSG91cnMgaXMgYWN0aXZhdGVkLCB0aGlzIG1lYW5zIHRoZSBlbnRpcmUgdmlzaWJsZSByYW5nZSBzaG91bGQgYmVcblx0XHQvLyBtYXJrZWQgYXMgKm5vdCogYnVzaW5lc3MtaG91cnMsIHZpYSBpbnZlcnNlLWJhY2tncm91bmQgcmVuZGVyaW5nLlxuXHRcdGlmICghZXZlbnRzLmxlbmd0aCAmJiBidXNpbmVzc0hvdXJzKSB7XG5cdFx0XHRldmVudHMgPSBbXG5cdFx0XHRcdCQuZXh0ZW5kKHt9LCBCVVNJTkVTU19IT1VSX0VWRU5UX0RFRkFVTFRTLCB7XG5cdFx0XHRcdFx0c3RhcnQ6IHRoaXMudmlldy5lbmQsIC8vIGd1YXJhbnRlZWQgb3V0LW9mLXJhbmdlXG5cdFx0XHRcdFx0ZW5kOiB0aGlzLnZpZXcuZW5kLCAgIC8vIFwiXG5cdFx0XHRcdFx0ZG93OiBudWxsXG5cdFx0XHRcdH0pXG5cdFx0XHRdO1xuXHRcdH1cblxuXHRcdHJldHVybiBldmVudHM7XG5cdH0sXG5cblxuXHQvKiBIYW5kbGVyc1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gQXR0YWNoZXMgZXZlbnQtZWxlbWVudC1yZWxhdGVkIGhhbmRsZXJzIGZvciAqYWxsKiByZW5kZXJlZCBldmVudCBzZWdtZW50cyBvZiB0aGUgdmlldy5cblx0YmluZFNlZ0hhbmRsZXJzOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLmJpbmRTZWdIYW5kbGVyc1RvRWwodGhpcy5lbCk7XG5cdH0sXG5cblxuXHQvLyBBdHRhY2hlcyBldmVudC1lbGVtZW50LXJlbGF0ZWQgaGFuZGxlcnMgdG8gYW4gYXJiaXRyYXJ5IGNvbnRhaW5lciBlbGVtZW50LiBsZXZlcmFnZXMgYnViYmxpbmcuXG5cdGJpbmRTZWdIYW5kbGVyc1RvRWw6IGZ1bmN0aW9uKGVsKSB7XG5cdFx0dGhpcy5iaW5kU2VnSGFuZGxlclRvRWwoZWwsICd0b3VjaHN0YXJ0JywgdGhpcy5oYW5kbGVTZWdUb3VjaFN0YXJ0KTtcblx0XHR0aGlzLmJpbmRTZWdIYW5kbGVyVG9FbChlbCwgJ3RvdWNoZW5kJywgdGhpcy5oYW5kbGVTZWdUb3VjaEVuZCk7XG5cdFx0dGhpcy5iaW5kU2VnSGFuZGxlclRvRWwoZWwsICdtb3VzZWVudGVyJywgdGhpcy5oYW5kbGVTZWdNb3VzZW92ZXIpO1xuXHRcdHRoaXMuYmluZFNlZ0hhbmRsZXJUb0VsKGVsLCAnbW91c2VsZWF2ZScsIHRoaXMuaGFuZGxlU2VnTW91c2VvdXQpO1xuXHRcdHRoaXMuYmluZFNlZ0hhbmRsZXJUb0VsKGVsLCAnbW91c2Vkb3duJywgdGhpcy5oYW5kbGVTZWdNb3VzZWRvd24pO1xuXHRcdHRoaXMuYmluZFNlZ0hhbmRsZXJUb0VsKGVsLCAnY2xpY2snLCB0aGlzLmhhbmRsZVNlZ0NsaWNrKTtcblx0fSxcblxuXG5cdC8vIEV4ZWN1dGVzIGEgaGFuZGxlciBmb3IgYW55IGEgdXNlci1pbnRlcmFjdGlvbiBvbiBhIHNlZ21lbnQuXG5cdC8vIEhhbmRsZXIgZ2V0cyBjYWxsZWQgd2l0aCAoc2VnLCBldiksIGFuZCB3aXRoIHRoZSBgdGhpc2AgY29udGV4dCBvZiB0aGUgR3JpZFxuXHRiaW5kU2VnSGFuZGxlclRvRWw6IGZ1bmN0aW9uKGVsLCBuYW1lLCBoYW5kbGVyKSB7XG5cdFx0dmFyIF90aGlzID0gdGhpcztcblxuXHRcdGVsLm9uKG5hbWUsIHRoaXMuc2VnU2VsZWN0b3IsIGZ1bmN0aW9uKGV2KSB7XG5cdFx0XHR2YXIgc2VnID0gJCh0aGlzKS5kYXRhKCdmYy1zZWcnKTsgLy8gZ3JhYiBzZWdtZW50IGRhdGEuIHB1dCB0aGVyZSBieSBWaWV3OjpyZW5kZXJFdmVudHNcblxuXHRcdFx0Ly8gb25seSBjYWxsIHRoZSBoYW5kbGVycyBpZiB0aGVyZSBpcyBub3QgYSBkcmFnL3Jlc2l6ZSBpbiBwcm9ncmVzc1xuXHRcdFx0aWYgKHNlZyAmJiAhX3RoaXMuaXNEcmFnZ2luZ1NlZyAmJiAhX3RoaXMuaXNSZXNpemluZ1NlZykge1xuXHRcdFx0XHRyZXR1cm4gaGFuZGxlci5jYWxsKF90aGlzLCBzZWcsIGV2KTsgLy8gY29udGV4dCB3aWxsIGJlIHRoZSBHcmlkXG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0sXG5cblxuXHRoYW5kbGVTZWdDbGljazogZnVuY3Rpb24oc2VnLCBldikge1xuXHRcdHZhciByZXMgPSB0aGlzLnZpZXcucHVibGljbHlUcmlnZ2VyKCdldmVudENsaWNrJywgc2VnLmVsWzBdLCBzZWcuZXZlbnQsIGV2KTsgLy8gY2FuIHJldHVybiBgZmFsc2VgIHRvIGNhbmNlbFxuXHRcdGlmIChyZXMgPT09IGZhbHNlKSB7XG5cdFx0XHRldi5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH1cblx0fSxcblxuXG5cdC8vIFVwZGF0ZXMgaW50ZXJuYWwgc3RhdGUgYW5kIHRyaWdnZXJzIGhhbmRsZXJzIGZvciB3aGVuIGFuIGV2ZW50IGVsZW1lbnQgaXMgbW91c2VkIG92ZXJcblx0aGFuZGxlU2VnTW91c2VvdmVyOiBmdW5jdGlvbihzZWcsIGV2KSB7XG5cdFx0aWYgKFxuXHRcdFx0IXRoaXMuaXNJZ25vcmluZ01vdXNlICYmXG5cdFx0XHQhdGhpcy5tb3VzZWRPdmVyU2VnXG5cdFx0KSB7XG5cdFx0XHR0aGlzLm1vdXNlZE92ZXJTZWcgPSBzZWc7XG5cdFx0XHRpZiAodGhpcy52aWV3LmlzRXZlbnRSZXNpemFibGUoc2VnLmV2ZW50KSkge1xuXHRcdFx0XHRzZWcuZWwuYWRkQ2xhc3MoJ2ZjLWFsbG93LW1vdXNlLXJlc2l6ZScpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy52aWV3LnB1YmxpY2x5VHJpZ2dlcignZXZlbnRNb3VzZW92ZXInLCBzZWcuZWxbMF0sIHNlZy5ldmVudCwgZXYpO1xuXHRcdH1cblx0fSxcblxuXG5cdC8vIFVwZGF0ZXMgaW50ZXJuYWwgc3RhdGUgYW5kIHRyaWdnZXJzIGhhbmRsZXJzIGZvciB3aGVuIGFuIGV2ZW50IGVsZW1lbnQgaXMgbW91c2VkIG91dC5cblx0Ly8gQ2FuIGJlIGdpdmVuIG5vIGFyZ3VtZW50cywgaW4gd2hpY2ggY2FzZSBpdCB3aWxsIG1vdXNlb3V0IHRoZSBzZWdtZW50IHRoYXQgd2FzIHByZXZpb3VzbHkgbW91c2VkIG92ZXIuXG5cdGhhbmRsZVNlZ01vdXNlb3V0OiBmdW5jdGlvbihzZWcsIGV2KSB7XG5cdFx0ZXYgPSBldiB8fCB7fTsgLy8gaWYgZ2l2ZW4gbm8gYXJncywgbWFrZSBhIG1vY2sgbW91c2UgZXZlbnRcblxuXHRcdGlmICh0aGlzLm1vdXNlZE92ZXJTZWcpIHtcblx0XHRcdHNlZyA9IHNlZyB8fCB0aGlzLm1vdXNlZE92ZXJTZWc7IC8vIGlmIGdpdmVuIG5vIGFyZ3MsIHVzZSB0aGUgY3VycmVudGx5IG1vdXNlZC1vdmVyIHNlZ21lbnRcblx0XHRcdHRoaXMubW91c2VkT3ZlclNlZyA9IG51bGw7XG5cdFx0XHRpZiAodGhpcy52aWV3LmlzRXZlbnRSZXNpemFibGUoc2VnLmV2ZW50KSkge1xuXHRcdFx0XHRzZWcuZWwucmVtb3ZlQ2xhc3MoJ2ZjLWFsbG93LW1vdXNlLXJlc2l6ZScpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy52aWV3LnB1YmxpY2x5VHJpZ2dlcignZXZlbnRNb3VzZW91dCcsIHNlZy5lbFswXSwgc2VnLmV2ZW50LCBldik7XG5cdFx0fVxuXHR9LFxuXG5cblx0aGFuZGxlU2VnTW91c2Vkb3duOiBmdW5jdGlvbihzZWcsIGV2KSB7XG5cdFx0dmFyIGlzUmVzaXppbmcgPSB0aGlzLnN0YXJ0U2VnUmVzaXplKHNlZywgZXYsIHsgZGlzdGFuY2U6IDUgfSk7XG5cblx0XHRpZiAoIWlzUmVzaXppbmcgJiYgdGhpcy52aWV3LmlzRXZlbnREcmFnZ2FibGUoc2VnLmV2ZW50KSkge1xuXHRcdFx0dGhpcy5idWlsZFNlZ0RyYWdMaXN0ZW5lcihzZWcpXG5cdFx0XHRcdC5zdGFydEludGVyYWN0aW9uKGV2LCB7XG5cdFx0XHRcdFx0ZGlzdGFuY2U6IDVcblx0XHRcdFx0fSk7XG5cdFx0fVxuXHR9LFxuXG5cblx0aGFuZGxlU2VnVG91Y2hTdGFydDogZnVuY3Rpb24oc2VnLCBldikge1xuXHRcdHZhciB2aWV3ID0gdGhpcy52aWV3O1xuXHRcdHZhciBldmVudCA9IHNlZy5ldmVudDtcblx0XHR2YXIgaXNTZWxlY3RlZCA9IHZpZXcuaXNFdmVudFNlbGVjdGVkKGV2ZW50KTtcblx0XHR2YXIgaXNEcmFnZ2FibGUgPSB2aWV3LmlzRXZlbnREcmFnZ2FibGUoZXZlbnQpO1xuXHRcdHZhciBpc1Jlc2l6YWJsZSA9IHZpZXcuaXNFdmVudFJlc2l6YWJsZShldmVudCk7XG5cdFx0dmFyIGlzUmVzaXppbmcgPSBmYWxzZTtcblx0XHR2YXIgZHJhZ0xpc3RlbmVyO1xuXHRcdHZhciBldmVudExvbmdQcmVzc0RlbGF5O1xuXG5cdFx0aWYgKGlzU2VsZWN0ZWQgJiYgaXNSZXNpemFibGUpIHtcblx0XHRcdC8vIG9ubHkgYWxsb3cgcmVzaXppbmcgb2YgdGhlIGV2ZW50IGlzIHNlbGVjdGVkXG5cdFx0XHRpc1Jlc2l6aW5nID0gdGhpcy5zdGFydFNlZ1Jlc2l6ZShzZWcsIGV2KTtcblx0XHR9XG5cblx0XHRpZiAoIWlzUmVzaXppbmcgJiYgKGlzRHJhZ2dhYmxlIHx8IGlzUmVzaXphYmxlKSkgeyAvLyBhbGxvd2VkIHRvIGJlIHNlbGVjdGVkP1xuXG5cdFx0XHRldmVudExvbmdQcmVzc0RlbGF5ID0gdmlldy5vcHQoJ2V2ZW50TG9uZ1ByZXNzRGVsYXknKTtcblx0XHRcdGlmIChldmVudExvbmdQcmVzc0RlbGF5ID09IG51bGwpIHtcblx0XHRcdFx0ZXZlbnRMb25nUHJlc3NEZWxheSA9IHZpZXcub3B0KCdsb25nUHJlc3NEZWxheScpOyAvLyBmYWxsYmFja1xuXHRcdFx0fVxuXG5cdFx0XHRkcmFnTGlzdGVuZXIgPSBpc0RyYWdnYWJsZSA/XG5cdFx0XHRcdHRoaXMuYnVpbGRTZWdEcmFnTGlzdGVuZXIoc2VnKSA6XG5cdFx0XHRcdHRoaXMuYnVpbGRTZWdTZWxlY3RMaXN0ZW5lcihzZWcpOyAvLyBzZWcgaXNuJ3QgZHJhZ2dhYmxlLCBidXQgc3RpbGwgbmVlZHMgdG8gYmUgc2VsZWN0ZWRcblxuXHRcdFx0ZHJhZ0xpc3RlbmVyLnN0YXJ0SW50ZXJhY3Rpb24oZXYsIHsgLy8gd29uJ3Qgc3RhcnQgaWYgYWxyZWFkeSBzdGFydGVkXG5cdFx0XHRcdGRlbGF5OiBpc1NlbGVjdGVkID8gMCA6IGV2ZW50TG9uZ1ByZXNzRGVsYXkgLy8gZG8gZGVsYXkgaWYgbm90IGFscmVhZHkgc2VsZWN0ZWRcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdC8vIGEgbG9uZyB0YXAgc2ltdWxhdGVzIGEgbW91c2VvdmVyLiBpZ25vcmUgdGhpcyBib2d1cyBtb3VzZW92ZXIuXG5cdFx0dGhpcy50ZW1wSWdub3JlTW91c2UoKTtcblx0fSxcblxuXG5cdGhhbmRsZVNlZ1RvdWNoRW5kOiBmdW5jdGlvbihzZWcsIGV2KSB7XG5cdFx0Ly8gdG91Y2hzdGFydCt0b3VjaGVuZCA9IGNsaWNrLCB3aGljaCBzaW11bGF0ZXMgYSBtb3VzZW92ZXIuXG5cdFx0Ly8gaWdub3JlIHRoaXMgYm9ndXMgbW91c2VvdmVyLlxuXHRcdHRoaXMudGVtcElnbm9yZU1vdXNlKCk7XG5cdH0sXG5cblxuXHQvLyByZXR1cm5zIGJvb2xlYW4gd2hldGhlciByZXNpemluZyBhY3R1YWxseSBzdGFydGVkIG9yIG5vdC5cblx0Ly8gYXNzdW1lcyB0aGUgc2VnIGFsbG93cyByZXNpemluZy5cblx0Ly8gYGRyYWdPcHRpb25zYCBhcmUgb3B0aW9uYWwuXG5cdHN0YXJ0U2VnUmVzaXplOiBmdW5jdGlvbihzZWcsIGV2LCBkcmFnT3B0aW9ucykge1xuXHRcdGlmICgkKGV2LnRhcmdldCkuaXMoJy5mYy1yZXNpemVyJykpIHtcblx0XHRcdHRoaXMuYnVpbGRTZWdSZXNpemVMaXN0ZW5lcihzZWcsICQoZXYudGFyZ2V0KS5pcygnLmZjLXN0YXJ0LXJlc2l6ZXInKSlcblx0XHRcdFx0LnN0YXJ0SW50ZXJhY3Rpb24oZXYsIGRyYWdPcHRpb25zKTtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH0sXG5cblxuXG5cdC8qIEV2ZW50IERyYWdnaW5nXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBCdWlsZHMgYSBsaXN0ZW5lciB0aGF0IHdpbGwgdHJhY2sgdXNlci1kcmFnZ2luZyBvbiBhbiBldmVudCBzZWdtZW50LlxuXHQvLyBHZW5lcmljIGVub3VnaCB0byB3b3JrIHdpdGggYW55IHR5cGUgb2YgR3JpZC5cblx0Ly8gSGFzIHNpZGUgZWZmZWN0IG9mIHNldHRpbmcvdW5zZXR0aW5nIGBzZWdEcmFnTGlzdGVuZXJgXG5cdGJ1aWxkU2VnRHJhZ0xpc3RlbmVyOiBmdW5jdGlvbihzZWcpIHtcblx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXHRcdHZhciB2aWV3ID0gdGhpcy52aWV3O1xuXHRcdHZhciBjYWxlbmRhciA9IHZpZXcuY2FsZW5kYXI7XG5cdFx0dmFyIGVsID0gc2VnLmVsO1xuXHRcdHZhciBldmVudCA9IHNlZy5ldmVudDtcblx0XHR2YXIgaXNEcmFnZ2luZztcblx0XHR2YXIgbW91c2VGb2xsb3dlcjsgLy8gQSBjbG9uZSBvZiB0aGUgb3JpZ2luYWwgZWxlbWVudCB0aGF0IHdpbGwgbW92ZSB3aXRoIHRoZSBtb3VzZVxuXHRcdHZhciBkcm9wTG9jYXRpb247IC8vIHpvbmVkIGV2ZW50IGRhdGUgcHJvcGVydGllc1xuXG5cdFx0aWYgKHRoaXMuc2VnRHJhZ0xpc3RlbmVyKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5zZWdEcmFnTGlzdGVuZXI7XG5cdFx0fVxuXG5cdFx0Ly8gVHJhY2tzIG1vdXNlIG1vdmVtZW50IG92ZXIgdGhlICp2aWV3J3MqIGNvb3JkaW5hdGUgbWFwLiBBbGxvd3MgZHJhZ2dpbmcgYW5kIGRyb3BwaW5nIGJldHdlZW4gc3ViY29tcG9uZW50c1xuXHRcdC8vIG9mIHRoZSB2aWV3LlxuXHRcdHZhciBkcmFnTGlzdGVuZXIgPSB0aGlzLnNlZ0RyYWdMaXN0ZW5lciA9IG5ldyBIaXREcmFnTGlzdGVuZXIodmlldywge1xuXHRcdFx0c2Nyb2xsOiB2aWV3Lm9wdCgnZHJhZ1Njcm9sbCcpLFxuXHRcdFx0c3ViamVjdEVsOiBlbCxcblx0XHRcdHN1YmplY3RDZW50ZXI6IHRydWUsXG5cdFx0XHRpbnRlcmFjdGlvblN0YXJ0OiBmdW5jdGlvbihldikge1xuXHRcdFx0XHRzZWcuY29tcG9uZW50ID0gX3RoaXM7IC8vIGZvciByZW5kZXJEcmFnXG5cdFx0XHRcdGlzRHJhZ2dpbmcgPSBmYWxzZTtcblx0XHRcdFx0bW91c2VGb2xsb3dlciA9IG5ldyBNb3VzZUZvbGxvd2VyKHNlZy5lbCwge1xuXHRcdFx0XHRcdGFkZGl0aW9uYWxDbGFzczogJ2ZjLWRyYWdnaW5nJyxcblx0XHRcdFx0XHRwYXJlbnRFbDogdmlldy5lbCxcblx0XHRcdFx0XHRvcGFjaXR5OiBkcmFnTGlzdGVuZXIuaXNUb3VjaCA/IG51bGwgOiB2aWV3Lm9wdCgnZHJhZ09wYWNpdHknKSxcblx0XHRcdFx0XHRyZXZlcnREdXJhdGlvbjogdmlldy5vcHQoJ2RyYWdSZXZlcnREdXJhdGlvbicpLFxuXHRcdFx0XHRcdHpJbmRleDogMiAvLyBvbmUgYWJvdmUgdGhlIC5mYy12aWV3XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRtb3VzZUZvbGxvd2VyLmhpZGUoKTsgLy8gZG9uJ3Qgc2hvdyB1bnRpbCB3ZSBrbm93IHRoaXMgaXMgYSByZWFsIGRyYWdcblx0XHRcdFx0bW91c2VGb2xsb3dlci5zdGFydChldik7XG5cdFx0XHR9LFxuXHRcdFx0ZHJhZ1N0YXJ0OiBmdW5jdGlvbihldikge1xuXHRcdFx0XHRpZiAoZHJhZ0xpc3RlbmVyLmlzVG91Y2ggJiYgIXZpZXcuaXNFdmVudFNlbGVjdGVkKGV2ZW50KSkge1xuXHRcdFx0XHRcdC8vIGlmIG5vdCBwcmV2aW91c2x5IHNlbGVjdGVkLCB3aWxsIGZpcmUgYWZ0ZXIgYSBkZWxheS4gdGhlbiwgc2VsZWN0IHRoZSBldmVudFxuXHRcdFx0XHRcdHZpZXcuc2VsZWN0RXZlbnQoZXZlbnQpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlzRHJhZ2dpbmcgPSB0cnVlO1xuXHRcdFx0XHRfdGhpcy5oYW5kbGVTZWdNb3VzZW91dChzZWcsIGV2KTsgLy8gZW5zdXJlIGEgbW91c2VvdXQgb24gdGhlIG1hbmlwdWxhdGVkIGV2ZW50IGhhcyBiZWVuIHJlcG9ydGVkXG5cdFx0XHRcdF90aGlzLnNlZ0RyYWdTdGFydChzZWcsIGV2KTtcblx0XHRcdFx0dmlldy5oaWRlRXZlbnQoZXZlbnQpOyAvLyBoaWRlIGFsbCBldmVudCBzZWdtZW50cy4gb3VyIG1vdXNlRm9sbG93ZXIgd2lsbCB0YWtlIG92ZXJcblx0XHRcdH0sXG5cdFx0XHRoaXRPdmVyOiBmdW5jdGlvbihoaXQsIGlzT3JpZywgb3JpZ0hpdCkge1xuXHRcdFx0XHR2YXIgZHJhZ0hlbHBlckVscztcblxuXHRcdFx0XHQvLyBzdGFydGluZyBoaXQgY291bGQgYmUgZm9yY2VkIChEYXlHcmlkLmxpbWl0KVxuXHRcdFx0XHRpZiAoc2VnLmhpdCkge1xuXHRcdFx0XHRcdG9yaWdIaXQgPSBzZWcuaGl0O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gc2luY2Ugd2UgYXJlIHF1ZXJ5aW5nIHRoZSBwYXJlbnQgdmlldywgbWlnaHQgbm90IGJlbG9uZyB0byB0aGlzIGdyaWRcblx0XHRcdFx0ZHJvcExvY2F0aW9uID0gX3RoaXMuY29tcHV0ZUV2ZW50RHJvcChcblx0XHRcdFx0XHRvcmlnSGl0LmNvbXBvbmVudC5nZXRIaXRTcGFuKG9yaWdIaXQpLFxuXHRcdFx0XHRcdGhpdC5jb21wb25lbnQuZ2V0SGl0U3BhbihoaXQpLFxuXHRcdFx0XHRcdGV2ZW50XG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0aWYgKGRyb3BMb2NhdGlvbiAmJiAhY2FsZW5kYXIuaXNFdmVudFNwYW5BbGxvd2VkKF90aGlzLmV2ZW50VG9TcGFuKGRyb3BMb2NhdGlvbiksIGV2ZW50KSkge1xuXHRcdFx0XHRcdGRpc2FibGVDdXJzb3IoKTtcblx0XHRcdFx0XHRkcm9wTG9jYXRpb24gPSBudWxsO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gaWYgYSB2YWxpZCBkcm9wIGxvY2F0aW9uLCBoYXZlIHRoZSBzdWJjbGFzcyByZW5kZXIgYSB2aXN1YWwgaW5kaWNhdGlvblxuXHRcdFx0XHRpZiAoZHJvcExvY2F0aW9uICYmIChkcmFnSGVscGVyRWxzID0gdmlldy5yZW5kZXJEcmFnKGRyb3BMb2NhdGlvbiwgc2VnKSkpIHtcblxuXHRcdFx0XHRcdGRyYWdIZWxwZXJFbHMuYWRkQ2xhc3MoJ2ZjLWRyYWdnaW5nJyk7XG5cdFx0XHRcdFx0aWYgKCFkcmFnTGlzdGVuZXIuaXNUb3VjaCkge1xuXHRcdFx0XHRcdFx0X3RoaXMuYXBwbHlEcmFnT3BhY2l0eShkcmFnSGVscGVyRWxzKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRtb3VzZUZvbGxvd2VyLmhpZGUoKTsgLy8gaWYgdGhlIHN1YmNsYXNzIGlzIGFscmVhZHkgdXNpbmcgYSBtb2NrIGV2ZW50IFwiaGVscGVyXCIsIGhpZGUgb3VyIG93blxuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdG1vdXNlRm9sbG93ZXIuc2hvdygpOyAvLyBvdGhlcndpc2UsIGhhdmUgdGhlIGhlbHBlciBmb2xsb3cgdGhlIG1vdXNlIChubyBzbmFwcGluZylcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChpc09yaWcpIHtcblx0XHRcdFx0XHRkcm9wTG9jYXRpb24gPSBudWxsOyAvLyBuZWVkcyB0byBoYXZlIG1vdmVkIGhpdHMgdG8gYmUgYSB2YWxpZCBkcm9wXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRoaXRPdXQ6IGZ1bmN0aW9uKCkgeyAvLyBjYWxsZWQgYmVmb3JlIG1vdXNlIG1vdmVzIHRvIGEgZGlmZmVyZW50IGhpdCBPUiBtb3ZlZCBvdXQgb2YgYWxsIGhpdHNcblx0XHRcdFx0dmlldy51bnJlbmRlckRyYWcoKTsgLy8gdW5yZW5kZXIgd2hhdGV2ZXIgd2FzIGRvbmUgaW4gcmVuZGVyRHJhZ1xuXHRcdFx0XHRtb3VzZUZvbGxvd2VyLnNob3coKTsgLy8gc2hvdyBpbiBjYXNlIHdlIGFyZSBtb3Zpbmcgb3V0IG9mIGFsbCBoaXRzXG5cdFx0XHRcdGRyb3BMb2NhdGlvbiA9IG51bGw7XG5cdFx0XHR9LFxuXHRcdFx0aGl0RG9uZTogZnVuY3Rpb24oKSB7IC8vIENhbGxlZCBhZnRlciBhIGhpdE91dCBPUiBiZWZvcmUgYSBkcmFnRW5kXG5cdFx0XHRcdGVuYWJsZUN1cnNvcigpO1xuXHRcdFx0fSxcblx0XHRcdGludGVyYWN0aW9uRW5kOiBmdW5jdGlvbihldikge1xuXHRcdFx0XHRkZWxldGUgc2VnLmNvbXBvbmVudDsgLy8gcHJldmVudCBzaWRlIGVmZmVjdHNcblxuXHRcdFx0XHQvLyBkbyByZXZlcnQgYW5pbWF0aW9uIGlmIGhhc24ndCBjaGFuZ2VkLiBjYWxscyBhIGNhbGxiYWNrIHdoZW4gZmluaXNoZWQgKHdoZXRoZXIgYW5pbWF0aW9uIG9yIG5vdClcblx0XHRcdFx0bW91c2VGb2xsb3dlci5zdG9wKCFkcm9wTG9jYXRpb24sIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGlmIChpc0RyYWdnaW5nKSB7XG5cdFx0XHRcdFx0XHR2aWV3LnVucmVuZGVyRHJhZygpO1xuXHRcdFx0XHRcdFx0X3RoaXMuc2VnRHJhZ1N0b3Aoc2VnLCBldik7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKGRyb3BMb2NhdGlvbikge1xuXHRcdFx0XHRcdFx0Ly8gbm8gbmVlZCB0byByZS1zaG93IG9yaWdpbmFsLCB3aWxsIHJlcmVuZGVyIGFsbCBhbnl3YXlzLiBlc3AgaW1wb3J0YW50IGlmIGV2ZW50UmVuZGVyV2FpdFxuXHRcdFx0XHRcdFx0dmlldy5yZXBvcnRFdmVudERyb3AoZXZlbnQsIGRyb3BMb2NhdGlvbiwgX3RoaXMubGFyZ2VVbml0LCBlbCwgZXYpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdHZpZXcuc2hvd0V2ZW50KGV2ZW50KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRfdGhpcy5zZWdEcmFnTGlzdGVuZXIgPSBudWxsO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIGRyYWdMaXN0ZW5lcjtcblx0fSxcblxuXG5cdC8vIHNlZyBpc24ndCBkcmFnZ2FibGUsIGJ1dCBsZXQncyB1c2UgYSBnZW5lcmljIERyYWdMaXN0ZW5lclxuXHQvLyBzaW1wbHkgZm9yIHRoZSBkZWxheSwgc28gaXQgY2FuIGJlIHNlbGVjdGVkLlxuXHQvLyBIYXMgc2lkZSBlZmZlY3Qgb2Ygc2V0dGluZy91bnNldHRpbmcgYHNlZ0RyYWdMaXN0ZW5lcmBcblx0YnVpbGRTZWdTZWxlY3RMaXN0ZW5lcjogZnVuY3Rpb24oc2VnKSB7XG5cdFx0dmFyIF90aGlzID0gdGhpcztcblx0XHR2YXIgdmlldyA9IHRoaXMudmlldztcblx0XHR2YXIgZXZlbnQgPSBzZWcuZXZlbnQ7XG5cblx0XHRpZiAodGhpcy5zZWdEcmFnTGlzdGVuZXIpIHtcblx0XHRcdHJldHVybiB0aGlzLnNlZ0RyYWdMaXN0ZW5lcjtcblx0XHR9XG5cblx0XHR2YXIgZHJhZ0xpc3RlbmVyID0gdGhpcy5zZWdEcmFnTGlzdGVuZXIgPSBuZXcgRHJhZ0xpc3RlbmVyKHtcblx0XHRcdGRyYWdTdGFydDogZnVuY3Rpb24oZXYpIHtcblx0XHRcdFx0aWYgKGRyYWdMaXN0ZW5lci5pc1RvdWNoICYmICF2aWV3LmlzRXZlbnRTZWxlY3RlZChldmVudCkpIHtcblx0XHRcdFx0XHQvLyBpZiBub3QgcHJldmlvdXNseSBzZWxlY3RlZCwgd2lsbCBmaXJlIGFmdGVyIGEgZGVsYXkuIHRoZW4sIHNlbGVjdCB0aGUgZXZlbnRcblx0XHRcdFx0XHR2aWV3LnNlbGVjdEV2ZW50KGV2ZW50KTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGludGVyYWN0aW9uRW5kOiBmdW5jdGlvbihldikge1xuXHRcdFx0XHRfdGhpcy5zZWdEcmFnTGlzdGVuZXIgPSBudWxsO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIGRyYWdMaXN0ZW5lcjtcblx0fSxcblxuXG5cdC8vIENhbGxlZCBiZWZvcmUgZXZlbnQgc2VnbWVudCBkcmFnZ2luZyBzdGFydHNcblx0c2VnRHJhZ1N0YXJ0OiBmdW5jdGlvbihzZWcsIGV2KSB7XG5cdFx0dGhpcy5pc0RyYWdnaW5nU2VnID0gdHJ1ZTtcblx0XHR0aGlzLnZpZXcucHVibGljbHlUcmlnZ2VyKCdldmVudERyYWdTdGFydCcsIHNlZy5lbFswXSwgc2VnLmV2ZW50LCBldiwge30pOyAvLyBsYXN0IGFyZ3VtZW50IGlzIGpxdWkgZHVtbXlcblx0fSxcblxuXG5cdC8vIENhbGxlZCBhZnRlciBldmVudCBzZWdtZW50IGRyYWdnaW5nIHN0b3BzXG5cdHNlZ0RyYWdTdG9wOiBmdW5jdGlvbihzZWcsIGV2KSB7XG5cdFx0dGhpcy5pc0RyYWdnaW5nU2VnID0gZmFsc2U7XG5cdFx0dGhpcy52aWV3LnB1YmxpY2x5VHJpZ2dlcignZXZlbnREcmFnU3RvcCcsIHNlZy5lbFswXSwgc2VnLmV2ZW50LCBldiwge30pOyAvLyBsYXN0IGFyZ3VtZW50IGlzIGpxdWkgZHVtbXlcblx0fSxcblxuXG5cdC8vIEdpdmVuIHRoZSBzcGFucyBhbiBldmVudCBkcmFnIGJlZ2FuLCBhbmQgdGhlIHNwYW4gZXZlbnQgd2FzIGRyb3BwZWQsIGNhbGN1bGF0ZXMgdGhlIG5ldyB6b25lZCBzdGFydC9lbmQvYWxsRGF5XG5cdC8vIHZhbHVlcyBmb3IgdGhlIGV2ZW50LiBTdWJjbGFzc2VzIG1heSBvdmVycmlkZSBhbmQgc2V0IGFkZGl0aW9uYWwgcHJvcGVydGllcyB0byBiZSB1c2VkIGJ5IHJlbmRlckRyYWcuXG5cdC8vIEEgZmFsc3kgcmV0dXJuZWQgdmFsdWUgaW5kaWNhdGVzIGFuIGludmFsaWQgZHJvcC5cblx0Ly8gRE9FUyBOT1QgY29uc2lkZXIgb3ZlcmxhcC9jb25zdHJhaW50LlxuXHRjb21wdXRlRXZlbnREcm9wOiBmdW5jdGlvbihzdGFydFNwYW4sIGVuZFNwYW4sIGV2ZW50KSB7XG5cdFx0dmFyIGNhbGVuZGFyID0gdGhpcy52aWV3LmNhbGVuZGFyO1xuXHRcdHZhciBkcmFnU3RhcnQgPSBzdGFydFNwYW4uc3RhcnQ7XG5cdFx0dmFyIGRyYWdFbmQgPSBlbmRTcGFuLnN0YXJ0O1xuXHRcdHZhciBkZWx0YTtcblx0XHR2YXIgZHJvcExvY2F0aW9uOyAvLyB6b25lZCBldmVudCBkYXRlIHByb3BlcnRpZXNcblxuXHRcdGlmIChkcmFnU3RhcnQuaGFzVGltZSgpID09PSBkcmFnRW5kLmhhc1RpbWUoKSkge1xuXHRcdFx0ZGVsdGEgPSB0aGlzLmRpZmZEYXRlcyhkcmFnRW5kLCBkcmFnU3RhcnQpO1xuXG5cdFx0XHQvLyBpZiBhbiBhbGwtZGF5IGV2ZW50IHdhcyBpbiBhIHRpbWVkIGFyZWEgYW5kIGl0IHdhcyBkcmFnZ2VkIHRvIGEgZGlmZmVyZW50IHRpbWUsXG5cdFx0XHQvLyBndWFyYW50ZWUgYW4gZW5kIGFuZCBhZGp1c3Qgc3RhcnQvZW5kIHRvIGhhdmUgdGltZXNcblx0XHRcdGlmIChldmVudC5hbGxEYXkgJiYgZHVyYXRpb25IYXNUaW1lKGRlbHRhKSkge1xuXHRcdFx0XHRkcm9wTG9jYXRpb24gPSB7XG5cdFx0XHRcdFx0c3RhcnQ6IGV2ZW50LnN0YXJ0LmNsb25lKCksXG5cdFx0XHRcdFx0ZW5kOiBjYWxlbmRhci5nZXRFdmVudEVuZChldmVudCksIC8vIHdpbGwgYmUgYW4gYW1iaWcgZGF5XG5cdFx0XHRcdFx0YWxsRGF5OiBmYWxzZSAvLyBmb3Igbm9ybWFsaXplRXZlbnRUaW1lc1xuXHRcdFx0XHR9O1xuXHRcdFx0XHRjYWxlbmRhci5ub3JtYWxpemVFdmVudFRpbWVzKGRyb3BMb2NhdGlvbik7XG5cdFx0XHR9XG5cdFx0XHQvLyBvdGhld2lzZSwgd29yayBvZmYgZXhpc3RpbmcgdmFsdWVzXG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0ZHJvcExvY2F0aW9uID0gcGx1Y2tFdmVudERhdGVQcm9wcyhldmVudCk7XG5cdFx0XHR9XG5cblx0XHRcdGRyb3BMb2NhdGlvbi5zdGFydC5hZGQoZGVsdGEpO1xuXHRcdFx0aWYgKGRyb3BMb2NhdGlvbi5lbmQpIHtcblx0XHRcdFx0ZHJvcExvY2F0aW9uLmVuZC5hZGQoZGVsdGEpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdC8vIGlmIHN3aXRjaGluZyBmcm9tIGRheSA8LT4gdGltZWQsIHN0YXJ0IHNob3VsZCBiZSByZXNldCB0byB0aGUgZHJvcHBlZCBkYXRlLCBhbmQgdGhlIGVuZCBjbGVhcmVkXG5cdFx0XHRkcm9wTG9jYXRpb24gPSB7XG5cdFx0XHRcdHN0YXJ0OiBkcmFnRW5kLmNsb25lKCksXG5cdFx0XHRcdGVuZDogbnVsbCwgLy8gZW5kIHNob3VsZCBiZSBjbGVhcmVkXG5cdFx0XHRcdGFsbERheTogIWRyYWdFbmQuaGFzVGltZSgpXG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdHJldHVybiBkcm9wTG9jYXRpb247XG5cdH0sXG5cblxuXHQvLyBVdGlsaXR5IGZvciBhcHBseSBkcmFnT3BhY2l0eSB0byBhIGpRdWVyeSBzZXRcblx0YXBwbHlEcmFnT3BhY2l0eTogZnVuY3Rpb24oZWxzKSB7XG5cdFx0dmFyIG9wYWNpdHkgPSB0aGlzLnZpZXcub3B0KCdkcmFnT3BhY2l0eScpO1xuXG5cdFx0aWYgKG9wYWNpdHkgIT0gbnVsbCkge1xuXHRcdFx0ZWxzLmNzcygnb3BhY2l0eScsIG9wYWNpdHkpO1xuXHRcdH1cblx0fSxcblxuXG5cdC8qIEV4dGVybmFsIEVsZW1lbnQgRHJhZ2dpbmdcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIENhbGxlZCB3aGVuIGEgalF1ZXJ5IFVJIGRyYWcgaXMgaW5pdGlhdGVkIGFueXdoZXJlIGluIHRoZSBET01cblx0ZXh0ZXJuYWxEcmFnU3RhcnQ6IGZ1bmN0aW9uKGV2LCB1aSkge1xuXHRcdHZhciB2aWV3ID0gdGhpcy52aWV3O1xuXHRcdHZhciBlbDtcblx0XHR2YXIgYWNjZXB0O1xuXG5cdFx0aWYgKHZpZXcub3B0KCdkcm9wcGFibGUnKSkgeyAvLyBvbmx5IGxpc3RlbiBpZiB0aGlzIHNldHRpbmcgaXMgb25cblx0XHRcdGVsID0gJCgodWkgPyB1aS5pdGVtIDogbnVsbCkgfHwgZXYudGFyZ2V0KTtcblxuXHRcdFx0Ly8gVGVzdCB0aGF0IHRoZSBkcmFnZ2VkIGVsZW1lbnQgcGFzc2VzIHRoZSBkcm9wQWNjZXB0IHNlbGVjdG9yIG9yIGZpbHRlciBmdW5jdGlvbi5cblx0XHRcdC8vIEZZSSwgdGhlIGRlZmF1bHQgaXMgXCIqXCIgKG1hdGNoZXMgYWxsKVxuXHRcdFx0YWNjZXB0ID0gdmlldy5vcHQoJ2Ryb3BBY2NlcHQnKTtcblx0XHRcdGlmICgkLmlzRnVuY3Rpb24oYWNjZXB0KSA/IGFjY2VwdC5jYWxsKGVsWzBdLCBlbCkgOiBlbC5pcyhhY2NlcHQpKSB7XG5cdFx0XHRcdGlmICghdGhpcy5pc0RyYWdnaW5nRXh0ZXJuYWwpIHsgLy8gcHJldmVudCBkb3VibGUtbGlzdGVuaW5nIGlmIGZpcmVkIHR3aWNlXG5cdFx0XHRcdFx0dGhpcy5saXN0ZW5Ub0V4dGVybmFsRHJhZyhlbCwgZXYsIHVpKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXG5cdC8vIENhbGxlZCB3aGVuIGEgalF1ZXJ5IFVJIGRyYWcgc3RhcnRzIGFuZCBpdCBuZWVkcyB0byBiZSBtb25pdG9yZWQgZm9yIGRyb3BwaW5nXG5cdGxpc3RlblRvRXh0ZXJuYWxEcmFnOiBmdW5jdGlvbihlbCwgZXYsIHVpKSB7XG5cdFx0dmFyIF90aGlzID0gdGhpcztcblx0XHR2YXIgY2FsZW5kYXIgPSB0aGlzLnZpZXcuY2FsZW5kYXI7XG5cdFx0dmFyIG1ldGEgPSBnZXREcmFnZ2VkRWxNZXRhKGVsKTsgLy8gZXh0cmEgZGF0YSBhYm91dCBldmVudCBkcm9wLCBpbmNsdWRpbmcgcG9zc2libGUgZXZlbnQgdG8gY3JlYXRlXG5cdFx0dmFyIGRyb3BMb2NhdGlvbjsgLy8gYSBudWxsIHZhbHVlIHNpZ25hbHMgYW4gdW5zdWNjZXNzZnVsIGRyYWdcblxuXHRcdC8vIGxpc3RlbmVyIHRoYXQgdHJhY2tzIG1vdXNlIG1vdmVtZW50IG92ZXIgZGF0ZS1hc3NvY2lhdGVkIHBpeGVsIHJlZ2lvbnNcblx0XHR2YXIgZHJhZ0xpc3RlbmVyID0gX3RoaXMuZXh0ZXJuYWxEcmFnTGlzdGVuZXIgPSBuZXcgSGl0RHJhZ0xpc3RlbmVyKHRoaXMsIHtcblx0XHRcdGludGVyYWN0aW9uU3RhcnQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRfdGhpcy5pc0RyYWdnaW5nRXh0ZXJuYWwgPSB0cnVlO1xuXHRcdFx0fSxcblx0XHRcdGhpdE92ZXI6IGZ1bmN0aW9uKGhpdCkge1xuXHRcdFx0XHRkcm9wTG9jYXRpb24gPSBfdGhpcy5jb21wdXRlRXh0ZXJuYWxEcm9wKFxuXHRcdFx0XHRcdGhpdC5jb21wb25lbnQuZ2V0SGl0U3BhbihoaXQpLCAvLyBzaW5jZSB3ZSBhcmUgcXVlcnlpbmcgdGhlIHBhcmVudCB2aWV3LCBtaWdodCBub3QgYmVsb25nIHRvIHRoaXMgZ3JpZFxuXHRcdFx0XHRcdG1ldGFcblx0XHRcdFx0KTtcblxuXHRcdFx0XHRpZiAoIC8vIGludmFsaWQgaGl0P1xuXHRcdFx0XHRcdGRyb3BMb2NhdGlvbiAmJlxuXHRcdFx0XHRcdCFjYWxlbmRhci5pc0V4dGVybmFsU3BhbkFsbG93ZWQoX3RoaXMuZXZlbnRUb1NwYW4oZHJvcExvY2F0aW9uKSwgZHJvcExvY2F0aW9uLCBtZXRhLmV2ZW50UHJvcHMpXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdGRpc2FibGVDdXJzb3IoKTtcblx0XHRcdFx0XHRkcm9wTG9jYXRpb24gPSBudWxsO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGRyb3BMb2NhdGlvbikge1xuXHRcdFx0XHRcdF90aGlzLnJlbmRlckRyYWcoZHJvcExvY2F0aW9uKTsgLy8gY2FsbGVkIHdpdGhvdXQgYSBzZWcgcGFyYW1ldGVyXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRoaXRPdXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRkcm9wTG9jYXRpb24gPSBudWxsOyAvLyBzaWduYWwgdW5zdWNjZXNzZnVsXG5cdFx0XHR9LFxuXHRcdFx0aGl0RG9uZTogZnVuY3Rpb24oKSB7IC8vIENhbGxlZCBhZnRlciBhIGhpdE91dCBPUiBiZWZvcmUgYSBkcmFnRW5kXG5cdFx0XHRcdGVuYWJsZUN1cnNvcigpO1xuXHRcdFx0XHRfdGhpcy51bnJlbmRlckRyYWcoKTtcblx0XHRcdH0sXG5cdFx0XHRpbnRlcmFjdGlvbkVuZDogZnVuY3Rpb24oZXYpIHtcblx0XHRcdFx0aWYgKGRyb3BMb2NhdGlvbikgeyAvLyBlbGVtZW50IHdhcyBkcm9wcGVkIG9uIGEgdmFsaWQgaGl0XG5cdFx0XHRcdFx0X3RoaXMudmlldy5yZXBvcnRFeHRlcm5hbERyb3AobWV0YSwgZHJvcExvY2F0aW9uLCBlbCwgZXYsIHVpKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRfdGhpcy5pc0RyYWdnaW5nRXh0ZXJuYWwgPSBmYWxzZTtcblx0XHRcdFx0X3RoaXMuZXh0ZXJuYWxEcmFnTGlzdGVuZXIgPSBudWxsO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0ZHJhZ0xpc3RlbmVyLnN0YXJ0RHJhZyhldik7IC8vIHN0YXJ0IGxpc3RlbmluZyBpbW1lZGlhdGVseVxuXHR9LFxuXG5cblx0Ly8gR2l2ZW4gYSBoaXQgdG8gYmUgZHJvcHBlZCB1cG9uLCBhbmQgbWlzYyBkYXRhIGFzc29jaWF0ZWQgd2l0aCB0aGUganF1aSBkcmFnIChndWFyYW50ZWVkIHRvIGJlIGEgcGxhaW4gb2JqZWN0KSxcblx0Ly8gcmV0dXJucyB0aGUgem9uZWQgc3RhcnQvZW5kIGRhdGVzIGZvciB0aGUgZXZlbnQgdGhhdCB3b3VsZCByZXN1bHQgZnJvbSB0aGUgaHlwb3RoZXRpY2FsIGRyb3AuIGVuZCBtaWdodCBiZSBudWxsLlxuXHQvLyBSZXR1cm5pbmcgYSBudWxsIHZhbHVlIHNpZ25hbHMgYW4gaW52YWxpZCBkcm9wIGhpdC5cblx0Ly8gRE9FUyBOT1QgY29uc2lkZXIgb3ZlcmxhcC9jb25zdHJhaW50LlxuXHRjb21wdXRlRXh0ZXJuYWxEcm9wOiBmdW5jdGlvbihzcGFuLCBtZXRhKSB7XG5cdFx0dmFyIGNhbGVuZGFyID0gdGhpcy52aWV3LmNhbGVuZGFyO1xuXHRcdHZhciBkcm9wTG9jYXRpb24gPSB7XG5cdFx0XHRzdGFydDogY2FsZW5kYXIuYXBwbHlUaW1lem9uZShzcGFuLnN0YXJ0KSwgLy8gc2ltdWxhdGUgYSB6b25lZCBldmVudCBzdGFydCBkYXRlXG5cdFx0XHRlbmQ6IG51bGxcblx0XHR9O1xuXG5cdFx0Ly8gaWYgZHJvcHBlZCBvbiBhbiBhbGwtZGF5IHNwYW4sIGFuZCBlbGVtZW50J3MgbWV0YWRhdGEgc3BlY2lmaWVkIGEgdGltZSwgc2V0IGl0XG5cdFx0aWYgKG1ldGEuc3RhcnRUaW1lICYmICFkcm9wTG9jYXRpb24uc3RhcnQuaGFzVGltZSgpKSB7XG5cdFx0XHRkcm9wTG9jYXRpb24uc3RhcnQudGltZShtZXRhLnN0YXJ0VGltZSk7XG5cdFx0fVxuXG5cdFx0aWYgKG1ldGEuZHVyYXRpb24pIHtcblx0XHRcdGRyb3BMb2NhdGlvbi5lbmQgPSBkcm9wTG9jYXRpb24uc3RhcnQuY2xvbmUoKS5hZGQobWV0YS5kdXJhdGlvbik7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRyb3BMb2NhdGlvbjtcblx0fSxcblxuXG5cblx0LyogRHJhZyBSZW5kZXJpbmcgKGZvciBib3RoIGV2ZW50cyBhbmQgYW4gZXh0ZXJuYWwgZWxlbWVudHMpXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBSZW5kZXJzIGEgdmlzdWFsIGluZGljYXRpb24gb2YgYW4gZXZlbnQgb3IgZXh0ZXJuYWwgZWxlbWVudCBiZWluZyBkcmFnZ2VkLlxuXHQvLyBgZHJvcExvY2F0aW9uYCBjb250YWlucyBoeXBvdGhldGljYWwgc3RhcnQvZW5kL2FsbERheSB2YWx1ZXMgdGhlIGV2ZW50IHdvdWxkIGhhdmUgaWYgZHJvcHBlZC4gZW5kIGNhbiBiZSBudWxsLlxuXHQvLyBgc2VnYCBpcyB0aGUgaW50ZXJuYWwgc2VnbWVudCBvYmplY3QgdGhhdCBpcyBiZWluZyBkcmFnZ2VkLiBJZiBkcmFnZ2luZyBhbiBleHRlcm5hbCBlbGVtZW50LCBgc2VnYCBpcyBudWxsLlxuXHQvLyBBIHRydXRoeSByZXR1cm5lZCB2YWx1ZSBpbmRpY2F0ZXMgdGhpcyBtZXRob2QgaGFzIHJlbmRlcmVkIGEgaGVscGVyIGVsZW1lbnQuXG5cdC8vIE11c3QgcmV0dXJuIGVsZW1lbnRzIHVzZWQgZm9yIGFueSBtb2NrIGV2ZW50cy5cblx0cmVuZGVyRHJhZzogZnVuY3Rpb24oZHJvcExvY2F0aW9uLCBzZWcpIHtcblx0XHQvLyBzdWJjbGFzc2VzIG11c3QgaW1wbGVtZW50XG5cdH0sXG5cblxuXHQvLyBVbnJlbmRlcnMgYSB2aXN1YWwgaW5kaWNhdGlvbiBvZiBhbiBldmVudCBvciBleHRlcm5hbCBlbGVtZW50IGJlaW5nIGRyYWdnZWRcblx0dW5yZW5kZXJEcmFnOiBmdW5jdGlvbigpIHtcblx0XHQvLyBzdWJjbGFzc2VzIG11c3QgaW1wbGVtZW50XG5cdH0sXG5cblxuXHQvKiBSZXNpemluZ1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gQ3JlYXRlcyBhIGxpc3RlbmVyIHRoYXQgdHJhY2tzIHRoZSB1c2VyIGFzIHRoZXkgcmVzaXplIGFuIGV2ZW50IHNlZ21lbnQuXG5cdC8vIEdlbmVyaWMgZW5vdWdoIHRvIHdvcmsgd2l0aCBhbnkgdHlwZSBvZiBHcmlkLlxuXHRidWlsZFNlZ1Jlc2l6ZUxpc3RlbmVyOiBmdW5jdGlvbihzZWcsIGlzU3RhcnQpIHtcblx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXHRcdHZhciB2aWV3ID0gdGhpcy52aWV3O1xuXHRcdHZhciBjYWxlbmRhciA9IHZpZXcuY2FsZW5kYXI7XG5cdFx0dmFyIGVsID0gc2VnLmVsO1xuXHRcdHZhciBldmVudCA9IHNlZy5ldmVudDtcblx0XHR2YXIgZXZlbnRFbmQgPSBjYWxlbmRhci5nZXRFdmVudEVuZChldmVudCk7XG5cdFx0dmFyIGlzRHJhZ2dpbmc7XG5cdFx0dmFyIHJlc2l6ZUxvY2F0aW9uOyAvLyB6b25lZCBldmVudCBkYXRlIHByb3BlcnRpZXMuIGZhbHN5IGlmIGludmFsaWQgcmVzaXplXG5cblx0XHQvLyBUcmFja3MgbW91c2UgbW92ZW1lbnQgb3ZlciB0aGUgKmdyaWQncyogY29vcmRpbmF0ZSBtYXBcblx0XHR2YXIgZHJhZ0xpc3RlbmVyID0gdGhpcy5zZWdSZXNpemVMaXN0ZW5lciA9IG5ldyBIaXREcmFnTGlzdGVuZXIodGhpcywge1xuXHRcdFx0c2Nyb2xsOiB2aWV3Lm9wdCgnZHJhZ1Njcm9sbCcpLFxuXHRcdFx0c3ViamVjdEVsOiBlbCxcblx0XHRcdGludGVyYWN0aW9uU3RhcnQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpc0RyYWdnaW5nID0gZmFsc2U7XG5cdFx0XHR9LFxuXHRcdFx0ZHJhZ1N0YXJ0OiBmdW5jdGlvbihldikge1xuXHRcdFx0XHRpc0RyYWdnaW5nID0gdHJ1ZTtcblx0XHRcdFx0X3RoaXMuaGFuZGxlU2VnTW91c2VvdXQoc2VnLCBldik7IC8vIGVuc3VyZSBhIG1vdXNlb3V0IG9uIHRoZSBtYW5pcHVsYXRlZCBldmVudCBoYXMgYmVlbiByZXBvcnRlZFxuXHRcdFx0XHRfdGhpcy5zZWdSZXNpemVTdGFydChzZWcsIGV2KTtcblx0XHRcdH0sXG5cdFx0XHRoaXRPdmVyOiBmdW5jdGlvbihoaXQsIGlzT3JpZywgb3JpZ0hpdCkge1xuXHRcdFx0XHR2YXIgb3JpZ0hpdFNwYW4gPSBfdGhpcy5nZXRIaXRTcGFuKG9yaWdIaXQpO1xuXHRcdFx0XHR2YXIgaGl0U3BhbiA9IF90aGlzLmdldEhpdFNwYW4oaGl0KTtcblxuXHRcdFx0XHRyZXNpemVMb2NhdGlvbiA9IGlzU3RhcnQgP1xuXHRcdFx0XHRcdF90aGlzLmNvbXB1dGVFdmVudFN0YXJ0UmVzaXplKG9yaWdIaXRTcGFuLCBoaXRTcGFuLCBldmVudCkgOlxuXHRcdFx0XHRcdF90aGlzLmNvbXB1dGVFdmVudEVuZFJlc2l6ZShvcmlnSGl0U3BhbiwgaGl0U3BhbiwgZXZlbnQpO1xuXG5cdFx0XHRcdGlmIChyZXNpemVMb2NhdGlvbikge1xuXHRcdFx0XHRcdGlmICghY2FsZW5kYXIuaXNFdmVudFNwYW5BbGxvd2VkKF90aGlzLmV2ZW50VG9TcGFuKHJlc2l6ZUxvY2F0aW9uKSwgZXZlbnQpKSB7XG5cdFx0XHRcdFx0XHRkaXNhYmxlQ3Vyc29yKCk7XG5cdFx0XHRcdFx0XHRyZXNpemVMb2NhdGlvbiA9IG51bGw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vIG5vIGNoYW5nZT8gKEZZSSwgZXZlbnQgZGF0ZXMgbWlnaHQgaGF2ZSB6b25lcylcblx0XHRcdFx0XHRlbHNlIGlmIChcblx0XHRcdFx0XHRcdHJlc2l6ZUxvY2F0aW9uLnN0YXJ0LmlzU2FtZShldmVudC5zdGFydC5jbG9uZSgpLnN0cmlwWm9uZSgpKSAmJlxuXHRcdFx0XHRcdFx0cmVzaXplTG9jYXRpb24uZW5kLmlzU2FtZShldmVudEVuZC5jbG9uZSgpLnN0cmlwWm9uZSgpKVxuXHRcdFx0XHRcdCkge1xuXHRcdFx0XHRcdFx0cmVzaXplTG9jYXRpb24gPSBudWxsO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChyZXNpemVMb2NhdGlvbikge1xuXHRcdFx0XHRcdHZpZXcuaGlkZUV2ZW50KGV2ZW50KTtcblx0XHRcdFx0XHRfdGhpcy5yZW5kZXJFdmVudFJlc2l6ZShyZXNpemVMb2NhdGlvbiwgc2VnKTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGhpdE91dDogZnVuY3Rpb24oKSB7IC8vIGNhbGxlZCBiZWZvcmUgbW91c2UgbW92ZXMgdG8gYSBkaWZmZXJlbnQgaGl0IE9SIG1vdmVkIG91dCBvZiBhbGwgaGl0c1xuXHRcdFx0XHRyZXNpemVMb2NhdGlvbiA9IG51bGw7XG5cdFx0XHRcdHZpZXcuc2hvd0V2ZW50KGV2ZW50KTsgLy8gZm9yIHdoZW4gb3V0LW9mLWJvdW5kcy4gc2hvdyBvcmlnaW5hbFxuXHRcdFx0fSxcblx0XHRcdGhpdERvbmU6IGZ1bmN0aW9uKCkgeyAvLyByZXNldHMgdGhlIHJlbmRlcmluZyB0byBzaG93IHRoZSBvcmlnaW5hbCBldmVudFxuXHRcdFx0XHRfdGhpcy51bnJlbmRlckV2ZW50UmVzaXplKCk7XG5cdFx0XHRcdGVuYWJsZUN1cnNvcigpO1xuXHRcdFx0fSxcblx0XHRcdGludGVyYWN0aW9uRW5kOiBmdW5jdGlvbihldikge1xuXHRcdFx0XHRpZiAoaXNEcmFnZ2luZykge1xuXHRcdFx0XHRcdF90aGlzLnNlZ1Jlc2l6ZVN0b3Aoc2VnLCBldik7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAocmVzaXplTG9jYXRpb24pIHsgLy8gdmFsaWQgZGF0ZSB0byByZXNpemUgdG8/XG5cdFx0XHRcdFx0Ly8gbm8gbmVlZCB0byByZS1zaG93IG9yaWdpbmFsLCB3aWxsIHJlcmVuZGVyIGFsbCBhbnl3YXlzLiBlc3AgaW1wb3J0YW50IGlmIGV2ZW50UmVuZGVyV2FpdFxuXHRcdFx0XHRcdHZpZXcucmVwb3J0RXZlbnRSZXNpemUoZXZlbnQsIHJlc2l6ZUxvY2F0aW9uLCBfdGhpcy5sYXJnZVVuaXQsIGVsLCBldik7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0dmlldy5zaG93RXZlbnQoZXZlbnQpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdF90aGlzLnNlZ1Jlc2l6ZUxpc3RlbmVyID0gbnVsbDtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHJldHVybiBkcmFnTGlzdGVuZXI7XG5cdH0sXG5cblxuXHQvLyBDYWxsZWQgYmVmb3JlIGV2ZW50IHNlZ21lbnQgcmVzaXppbmcgc3RhcnRzXG5cdHNlZ1Jlc2l6ZVN0YXJ0OiBmdW5jdGlvbihzZWcsIGV2KSB7XG5cdFx0dGhpcy5pc1Jlc2l6aW5nU2VnID0gdHJ1ZTtcblx0XHR0aGlzLnZpZXcucHVibGljbHlUcmlnZ2VyKCdldmVudFJlc2l6ZVN0YXJ0Jywgc2VnLmVsWzBdLCBzZWcuZXZlbnQsIGV2LCB7fSk7IC8vIGxhc3QgYXJndW1lbnQgaXMganF1aSBkdW1teVxuXHR9LFxuXG5cblx0Ly8gQ2FsbGVkIGFmdGVyIGV2ZW50IHNlZ21lbnQgcmVzaXppbmcgc3RvcHNcblx0c2VnUmVzaXplU3RvcDogZnVuY3Rpb24oc2VnLCBldikge1xuXHRcdHRoaXMuaXNSZXNpemluZ1NlZyA9IGZhbHNlO1xuXHRcdHRoaXMudmlldy5wdWJsaWNseVRyaWdnZXIoJ2V2ZW50UmVzaXplU3RvcCcsIHNlZy5lbFswXSwgc2VnLmV2ZW50LCBldiwge30pOyAvLyBsYXN0IGFyZ3VtZW50IGlzIGpxdWkgZHVtbXlcblx0fSxcblxuXG5cdC8vIFJldHVybnMgbmV3IGRhdGUtaW5mb3JtYXRpb24gZm9yIGFuIGV2ZW50IHNlZ21lbnQgYmVpbmcgcmVzaXplZCBmcm9tIGl0cyBzdGFydFxuXHRjb21wdXRlRXZlbnRTdGFydFJlc2l6ZTogZnVuY3Rpb24oc3RhcnRTcGFuLCBlbmRTcGFuLCBldmVudCkge1xuXHRcdHJldHVybiB0aGlzLmNvbXB1dGVFdmVudFJlc2l6ZSgnc3RhcnQnLCBzdGFydFNwYW4sIGVuZFNwYW4sIGV2ZW50KTtcblx0fSxcblxuXG5cdC8vIFJldHVybnMgbmV3IGRhdGUtaW5mb3JtYXRpb24gZm9yIGFuIGV2ZW50IHNlZ21lbnQgYmVpbmcgcmVzaXplZCBmcm9tIGl0cyBlbmRcblx0Y29tcHV0ZUV2ZW50RW5kUmVzaXplOiBmdW5jdGlvbihzdGFydFNwYW4sIGVuZFNwYW4sIGV2ZW50KSB7XG5cdFx0cmV0dXJuIHRoaXMuY29tcHV0ZUV2ZW50UmVzaXplKCdlbmQnLCBzdGFydFNwYW4sIGVuZFNwYW4sIGV2ZW50KTtcblx0fSxcblxuXG5cdC8vIFJldHVybnMgbmV3IHpvbmVkIGRhdGUgaW5mb3JtYXRpb24gZm9yIGFuIGV2ZW50IHNlZ21lbnQgYmVpbmcgcmVzaXplZCBmcm9tIGl0cyBzdGFydCBPUiBlbmRcblx0Ly8gYHR5cGVgIGlzIGVpdGhlciAnc3RhcnQnIG9yICdlbmQnLlxuXHQvLyBET0VTIE5PVCBjb25zaWRlciBvdmVybGFwL2NvbnN0cmFpbnQuXG5cdGNvbXB1dGVFdmVudFJlc2l6ZTogZnVuY3Rpb24odHlwZSwgc3RhcnRTcGFuLCBlbmRTcGFuLCBldmVudCkge1xuXHRcdHZhciBjYWxlbmRhciA9IHRoaXMudmlldy5jYWxlbmRhcjtcblx0XHR2YXIgZGVsdGEgPSB0aGlzLmRpZmZEYXRlcyhlbmRTcGFuW3R5cGVdLCBzdGFydFNwYW5bdHlwZV0pO1xuXHRcdHZhciByZXNpemVMb2NhdGlvbjsgLy8gem9uZWQgZXZlbnQgZGF0ZSBwcm9wZXJ0aWVzXG5cdFx0dmFyIGRlZmF1bHREdXJhdGlvbjtcblxuXHRcdC8vIGJ1aWxkIG9yaWdpbmFsIHZhbHVlcyB0byB3b3JrIGZyb20sIGd1YXJhbnRlZWluZyBhIHN0YXJ0IGFuZCBlbmRcblx0XHRyZXNpemVMb2NhdGlvbiA9IHtcblx0XHRcdHN0YXJ0OiBldmVudC5zdGFydC5jbG9uZSgpLFxuXHRcdFx0ZW5kOiBjYWxlbmRhci5nZXRFdmVudEVuZChldmVudCksXG5cdFx0XHRhbGxEYXk6IGV2ZW50LmFsbERheVxuXHRcdH07XG5cblx0XHQvLyBpZiBhbiBhbGwtZGF5IGV2ZW50IHdhcyBpbiBhIHRpbWVkIGFyZWEgYW5kIHdhcyByZXNpemVkIHRvIGEgdGltZSwgYWRqdXN0IHN0YXJ0L2VuZCB0byBoYXZlIHRpbWVzXG5cdFx0aWYgKHJlc2l6ZUxvY2F0aW9uLmFsbERheSAmJiBkdXJhdGlvbkhhc1RpbWUoZGVsdGEpKSB7XG5cdFx0XHRyZXNpemVMb2NhdGlvbi5hbGxEYXkgPSBmYWxzZTtcblx0XHRcdGNhbGVuZGFyLm5vcm1hbGl6ZUV2ZW50VGltZXMocmVzaXplTG9jYXRpb24pO1xuXHRcdH1cblxuXHRcdHJlc2l6ZUxvY2F0aW9uW3R5cGVdLmFkZChkZWx0YSk7IC8vIGFwcGx5IGRlbHRhIHRvIHN0YXJ0IG9yIGVuZFxuXG5cdFx0Ly8gaWYgdGhlIGV2ZW50IHdhcyBjb21wcmVzc2VkIHRvbyBzbWFsbCwgZmluZCBhIG5ldyByZWFzb25hYmxlIGR1cmF0aW9uIGZvciBpdFxuXHRcdGlmICghcmVzaXplTG9jYXRpb24uc3RhcnQuaXNCZWZvcmUocmVzaXplTG9jYXRpb24uZW5kKSkge1xuXG5cdFx0XHRkZWZhdWx0RHVyYXRpb24gPVxuXHRcdFx0XHR0aGlzLm1pblJlc2l6ZUR1cmF0aW9uIHx8IC8vIFRPRE86IGhhY2tcblx0XHRcdFx0KGV2ZW50LmFsbERheSA/XG5cdFx0XHRcdFx0Y2FsZW5kYXIuZGVmYXVsdEFsbERheUV2ZW50RHVyYXRpb24gOlxuXHRcdFx0XHRcdGNhbGVuZGFyLmRlZmF1bHRUaW1lZEV2ZW50RHVyYXRpb24pO1xuXG5cdFx0XHRpZiAodHlwZSA9PSAnc3RhcnQnKSB7IC8vIHJlc2l6aW5nIHRoZSBzdGFydD9cblx0XHRcdFx0cmVzaXplTG9jYXRpb24uc3RhcnQgPSByZXNpemVMb2NhdGlvbi5lbmQuY2xvbmUoKS5zdWJ0cmFjdChkZWZhdWx0RHVyYXRpb24pO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7IC8vIHJlc2l6aW5nIHRoZSBlbmQ/XG5cdFx0XHRcdHJlc2l6ZUxvY2F0aW9uLmVuZCA9IHJlc2l6ZUxvY2F0aW9uLnN0YXJ0LmNsb25lKCkuYWRkKGRlZmF1bHREdXJhdGlvbik7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJlc2l6ZUxvY2F0aW9uO1xuXHR9LFxuXG5cblx0Ly8gUmVuZGVycyBhIHZpc3VhbCBpbmRpY2F0aW9uIG9mIGFuIGV2ZW50IGJlaW5nIHJlc2l6ZWQuXG5cdC8vIGByYW5nZWAgaGFzIHRoZSB1cGRhdGVkIGRhdGVzIG9mIHRoZSBldmVudC4gYHNlZ2AgaXMgdGhlIG9yaWdpbmFsIHNlZ21lbnQgb2JqZWN0IGludm9sdmVkIGluIHRoZSBkcmFnLlxuXHQvLyBNdXN0IHJldHVybiBlbGVtZW50cyB1c2VkIGZvciBhbnkgbW9jayBldmVudHMuXG5cdHJlbmRlckV2ZW50UmVzaXplOiBmdW5jdGlvbihyYW5nZSwgc2VnKSB7XG5cdFx0Ly8gc3ViY2xhc3NlcyBtdXN0IGltcGxlbWVudFxuXHR9LFxuXG5cblx0Ly8gVW5yZW5kZXJzIGEgdmlzdWFsIGluZGljYXRpb24gb2YgYW4gZXZlbnQgYmVpbmcgcmVzaXplZC5cblx0dW5yZW5kZXJFdmVudFJlc2l6ZTogZnVuY3Rpb24oKSB7XG5cdFx0Ly8gc3ViY2xhc3NlcyBtdXN0IGltcGxlbWVudFxuXHR9LFxuXG5cblx0LyogUmVuZGVyaW5nIFV0aWxzXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBDb21wdXRlIHRoZSB0ZXh0IHRoYXQgc2hvdWxkIGJlIGRpc3BsYXllZCBvbiBhbiBldmVudCdzIGVsZW1lbnQuXG5cdC8vIGByYW5nZWAgY2FuIGJlIHRoZSBFdmVudCBvYmplY3QgaXRzZWxmLCBvciBzb21ldGhpbmcgcmFuZ2UtbGlrZSwgd2l0aCBhdCBsZWFzdCBhIGBzdGFydGAuXG5cdC8vIElmIGV2ZW50IHRpbWVzIGFyZSBkaXNhYmxlZCwgb3IgdGhlIGV2ZW50IGhhcyBubyB0aW1lLCB3aWxsIHJldHVybiBhIGJsYW5rIHN0cmluZy5cblx0Ly8gSWYgbm90IHNwZWNpZmllZCwgZm9ybWF0U3RyIHdpbGwgZGVmYXVsdCB0byB0aGUgZXZlbnRUaW1lRm9ybWF0IHNldHRpbmcsXG5cdC8vIGFuZCBkaXNwbGF5RW5kIHdpbGwgZGVmYXVsdCB0byB0aGUgZGlzcGxheUV2ZW50RW5kIHNldHRpbmcuXG5cdGdldEV2ZW50VGltZVRleHQ6IGZ1bmN0aW9uKHJhbmdlLCBmb3JtYXRTdHIsIGRpc3BsYXlFbmQpIHtcblxuXHRcdGlmIChmb3JtYXRTdHIgPT0gbnVsbCkge1xuXHRcdFx0Zm9ybWF0U3RyID0gdGhpcy5ldmVudFRpbWVGb3JtYXQ7XG5cdFx0fVxuXG5cdFx0aWYgKGRpc3BsYXlFbmQgPT0gbnVsbCkge1xuXHRcdFx0ZGlzcGxheUVuZCA9IHRoaXMuZGlzcGxheUV2ZW50RW5kO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLmRpc3BsYXlFdmVudFRpbWUgJiYgcmFuZ2Uuc3RhcnQuaGFzVGltZSgpKSB7XG5cdFx0XHRpZiAoZGlzcGxheUVuZCAmJiByYW5nZS5lbmQpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMudmlldy5mb3JtYXRSYW5nZShyYW5nZSwgZm9ybWF0U3RyKTtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gcmFuZ2Uuc3RhcnQuZm9ybWF0KGZvcm1hdFN0cik7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuICcnO1xuXHR9LFxuXG5cblx0Ly8gR2VuZXJpYyB1dGlsaXR5IGZvciBnZW5lcmF0aW5nIHRoZSBIVE1MIGNsYXNzTmFtZXMgZm9yIGFuIGV2ZW50IHNlZ21lbnQncyBlbGVtZW50XG5cdGdldFNlZ0NsYXNzZXM6IGZ1bmN0aW9uKHNlZywgaXNEcmFnZ2FibGUsIGlzUmVzaXphYmxlKSB7XG5cdFx0dmFyIHZpZXcgPSB0aGlzLnZpZXc7XG5cdFx0dmFyIGNsYXNzZXMgPSBbXG5cdFx0XHQnZmMtZXZlbnQnLFxuXHRcdFx0c2VnLmlzU3RhcnQgPyAnZmMtc3RhcnQnIDogJ2ZjLW5vdC1zdGFydCcsXG5cdFx0XHRzZWcuaXNFbmQgPyAnZmMtZW5kJyA6ICdmYy1ub3QtZW5kJ1xuXHRcdF0uY29uY2F0KHRoaXMuZ2V0U2VnQ3VzdG9tQ2xhc3NlcyhzZWcpKTtcblxuXHRcdGlmIChpc0RyYWdnYWJsZSkge1xuXHRcdFx0Y2xhc3Nlcy5wdXNoKCdmYy1kcmFnZ2FibGUnKTtcblx0XHR9XG5cdFx0aWYgKGlzUmVzaXphYmxlKSB7XG5cdFx0XHRjbGFzc2VzLnB1c2goJ2ZjLXJlc2l6YWJsZScpO1xuXHRcdH1cblxuXHRcdC8vIGV2ZW50IGlzIGN1cnJlbnRseSBzZWxlY3RlZD8gYXR0YWNoIGEgY2xhc3NOYW1lLlxuXHRcdGlmICh2aWV3LmlzRXZlbnRTZWxlY3RlZChzZWcuZXZlbnQpKSB7XG5cdFx0XHRjbGFzc2VzLnB1c2goJ2ZjLXNlbGVjdGVkJyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNsYXNzZXM7XG5cdH0sXG5cblxuXHQvLyBMaXN0IG9mIGNsYXNzZXMgdGhhdCB3ZXJlIGRlZmluZWQgYnkgdGhlIGNhbGxlciBvZiB0aGUgQVBJIGluIHNvbWUgd2F5XG5cdGdldFNlZ0N1c3RvbUNsYXNzZXM6IGZ1bmN0aW9uKHNlZykge1xuXHRcdHZhciBldmVudCA9IHNlZy5ldmVudDtcblxuXHRcdHJldHVybiBbXS5jb25jYXQoXG5cdFx0XHRldmVudC5jbGFzc05hbWUsIC8vIGd1YXJhbnRlZWQgdG8gYmUgYW4gYXJyYXlcblx0XHRcdGV2ZW50LnNvdXJjZSA/IGV2ZW50LnNvdXJjZS5jbGFzc05hbWUgOiBbXVxuXHRcdCk7XG5cdH0sXG5cblxuXHQvLyBVdGlsaXR5IGZvciBnZW5lcmF0aW5nIGV2ZW50IHNraW4tcmVsYXRlZCBDU1MgcHJvcGVydGllc1xuXHRnZXRTZWdTa2luQ3NzOiBmdW5jdGlvbihzZWcpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0J2JhY2tncm91bmQtY29sb3InOiB0aGlzLmdldFNlZ0JhY2tncm91bmRDb2xvcihzZWcpLFxuXHRcdFx0J2JvcmRlci1jb2xvcic6IHRoaXMuZ2V0U2VnQm9yZGVyQ29sb3Ioc2VnKSxcblx0XHRcdGNvbG9yOiB0aGlzLmdldFNlZ1RleHRDb2xvcihzZWcpXG5cdFx0fTtcblx0fSxcblxuXG5cdC8vIFF1ZXJpZXMgZm9yIGNhbGxlci1zcGVjaWZpZWQgY29sb3IsIHRoZW4gZmFsbHMgYmFjayB0byBkZWZhdWx0XG5cdGdldFNlZ0JhY2tncm91bmRDb2xvcjogZnVuY3Rpb24oc2VnKSB7XG5cdFx0cmV0dXJuIHNlZy5ldmVudC5iYWNrZ3JvdW5kQ29sb3IgfHxcblx0XHRcdHNlZy5ldmVudC5jb2xvciB8fFxuXHRcdFx0dGhpcy5nZXRTZWdEZWZhdWx0QmFja2dyb3VuZENvbG9yKHNlZyk7XG5cdH0sXG5cblxuXHRnZXRTZWdEZWZhdWx0QmFja2dyb3VuZENvbG9yOiBmdW5jdGlvbihzZWcpIHtcblx0XHR2YXIgc291cmNlID0gc2VnLmV2ZW50LnNvdXJjZSB8fCB7fTtcblxuXHRcdHJldHVybiBzb3VyY2UuYmFja2dyb3VuZENvbG9yIHx8XG5cdFx0XHRzb3VyY2UuY29sb3IgfHxcblx0XHRcdHRoaXMudmlldy5vcHQoJ2V2ZW50QmFja2dyb3VuZENvbG9yJykgfHxcblx0XHRcdHRoaXMudmlldy5vcHQoJ2V2ZW50Q29sb3InKTtcblx0fSxcblxuXG5cdC8vIFF1ZXJpZXMgZm9yIGNhbGxlci1zcGVjaWZpZWQgY29sb3IsIHRoZW4gZmFsbHMgYmFjayB0byBkZWZhdWx0XG5cdGdldFNlZ0JvcmRlckNvbG9yOiBmdW5jdGlvbihzZWcpIHtcblx0XHRyZXR1cm4gc2VnLmV2ZW50LmJvcmRlckNvbG9yIHx8XG5cdFx0XHRzZWcuZXZlbnQuY29sb3IgfHxcblx0XHRcdHRoaXMuZ2V0U2VnRGVmYXVsdEJvcmRlckNvbG9yKHNlZyk7XG5cdH0sXG5cblxuXHRnZXRTZWdEZWZhdWx0Qm9yZGVyQ29sb3I6IGZ1bmN0aW9uKHNlZykge1xuXHRcdHZhciBzb3VyY2UgPSBzZWcuZXZlbnQuc291cmNlIHx8IHt9O1xuXG5cdFx0cmV0dXJuIHNvdXJjZS5ib3JkZXJDb2xvciB8fFxuXHRcdFx0c291cmNlLmNvbG9yIHx8XG5cdFx0XHR0aGlzLnZpZXcub3B0KCdldmVudEJvcmRlckNvbG9yJykgfHxcblx0XHRcdHRoaXMudmlldy5vcHQoJ2V2ZW50Q29sb3InKTtcblx0fSxcblxuXG5cdC8vIFF1ZXJpZXMgZm9yIGNhbGxlci1zcGVjaWZpZWQgY29sb3IsIHRoZW4gZmFsbHMgYmFjayB0byBkZWZhdWx0XG5cdGdldFNlZ1RleHRDb2xvcjogZnVuY3Rpb24oc2VnKSB7XG5cdFx0cmV0dXJuIHNlZy5ldmVudC50ZXh0Q29sb3IgfHxcblx0XHRcdHRoaXMuZ2V0U2VnRGVmYXVsdFRleHRDb2xvcihzZWcpO1xuXHR9LFxuXG5cblx0Z2V0U2VnRGVmYXVsdFRleHRDb2xvcjogZnVuY3Rpb24oc2VnKSB7XG5cdFx0dmFyIHNvdXJjZSA9IHNlZy5ldmVudC5zb3VyY2UgfHwge307XG5cblx0XHRyZXR1cm4gc291cmNlLnRleHRDb2xvciB8fFxuXHRcdFx0dGhpcy52aWV3Lm9wdCgnZXZlbnRUZXh0Q29sb3InKTtcblx0fSxcblxuXG5cdC8qIENvbnZlcnRpbmcgZXZlbnRzIC0+IGV2ZW50UmFuZ2UgLT4gZXZlbnRTcGFuIC0+IGV2ZW50U2Vnc1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gR2VuZXJhdGVzIGFuIGFycmF5IG9mIHNlZ21lbnRzIGZvciB0aGUgZ2l2ZW4gc2luZ2xlIGV2ZW50XG5cdC8vIENhbiBhY2NlcHQgYW4gZXZlbnQgXCJsb2NhdGlvblwiIGFzIHdlbGwgKHdoaWNoIG9ubHkgaGFzIHN0YXJ0L2VuZCBhbmQgbm8gYWxsRGF5KVxuXHRldmVudFRvU2VnczogZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRyZXR1cm4gdGhpcy5ldmVudHNUb1NlZ3MoWyBldmVudCBdKTtcblx0fSxcblxuXG5cdGV2ZW50VG9TcGFuOiBmdW5jdGlvbihldmVudCkge1xuXHRcdHJldHVybiB0aGlzLmV2ZW50VG9TcGFucyhldmVudClbMF07XG5cdH0sXG5cblxuXHQvLyBHZW5lcmF0ZXMgc3BhbnMgKGFsd2F5cyB1bnpvbmVkKSBmb3IgdGhlIGdpdmVuIGV2ZW50LlxuXHQvLyBEb2VzIG5vdCBkbyBhbnkgaW52ZXJ0aW5nIGZvciBpbnZlcnNlLWJhY2tncm91bmQgZXZlbnRzLlxuXHQvLyBDYW4gYWNjZXB0IGFuIGV2ZW50IFwibG9jYXRpb25cIiBhcyB3ZWxsICh3aGljaCBvbmx5IGhhcyBzdGFydC9lbmQgYW5kIG5vIGFsbERheSlcblx0ZXZlbnRUb1NwYW5zOiBmdW5jdGlvbihldmVudCkge1xuXHRcdHZhciByYW5nZSA9IHRoaXMuZXZlbnRUb1JhbmdlKGV2ZW50KTtcblx0XHRyZXR1cm4gdGhpcy5ldmVudFJhbmdlVG9TcGFucyhyYW5nZSwgZXZlbnQpO1xuXHR9LFxuXG5cblxuXHQvLyBDb252ZXJ0cyBhbiBhcnJheSBvZiBldmVudCBvYmplY3RzIGludG8gYW4gYXJyYXkgb2YgZXZlbnQgc2VnbWVudCBvYmplY3RzLlxuXHQvLyBBIGN1c3RvbSBgc2VnU2xpY2VGdW5jYCBtYXkgYmUgZ2l2ZW4gZm9yIGFyYml0cmFyaWx5IHNsaWNpbmcgdXAgZXZlbnRzLlxuXHQvLyBEb2Vzbid0IGd1YXJhbnRlZSBhbiBvcmRlciBmb3IgdGhlIHJlc3VsdGluZyBhcnJheS5cblx0ZXZlbnRzVG9TZWdzOiBmdW5jdGlvbihhbGxFdmVudHMsIHNlZ1NsaWNlRnVuYykge1xuXHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cdFx0dmFyIGV2ZW50c0J5SWQgPSBncm91cEV2ZW50c0J5SWQoYWxsRXZlbnRzKTtcblx0XHR2YXIgc2VncyA9IFtdO1xuXG5cdFx0JC5lYWNoKGV2ZW50c0J5SWQsIGZ1bmN0aW9uKGlkLCBldmVudHMpIHtcblx0XHRcdHZhciByYW5nZXMgPSBbXTtcblx0XHRcdHZhciBpO1xuXG5cdFx0XHRmb3IgKGkgPSAwOyBpIDwgZXZlbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHJhbmdlcy5wdXNoKF90aGlzLmV2ZW50VG9SYW5nZShldmVudHNbaV0pKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gaW52ZXJzZS1iYWNrZ3JvdW5kIGV2ZW50cyAodXRpbGl6ZSBvbmx5IHRoZSBmaXJzdCBldmVudCBpbiBjYWxjdWxhdGlvbnMpXG5cdFx0XHRpZiAoaXNJbnZlcnNlQmdFdmVudChldmVudHNbMF0pKSB7XG5cdFx0XHRcdHJhbmdlcyA9IF90aGlzLmludmVydFJhbmdlcyhyYW5nZXMpO1xuXG5cdFx0XHRcdGZvciAoaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRzZWdzLnB1c2guYXBwbHkoc2VncywgLy8gYXBwZW5kIHRvXG5cdFx0XHRcdFx0XHRfdGhpcy5ldmVudFJhbmdlVG9TZWdzKHJhbmdlc1tpXSwgZXZlbnRzWzBdLCBzZWdTbGljZUZ1bmMpKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Ly8gbm9ybWFsIGV2ZW50IHJhbmdlc1xuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGZvciAoaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRzZWdzLnB1c2guYXBwbHkoc2VncywgLy8gYXBwZW5kIHRvXG5cdFx0XHRcdFx0XHRfdGhpcy5ldmVudFJhbmdlVG9TZWdzKHJhbmdlc1tpXSwgZXZlbnRzW2ldLCBzZWdTbGljZUZ1bmMpKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIHNlZ3M7XG5cdH0sXG5cblxuXHQvLyBHZW5lcmF0ZXMgdGhlIHVuem9uZWQgc3RhcnQvZW5kIGRhdGVzIGFuIGV2ZW50IGFwcGVhcnMgdG8gb2NjdXB5XG5cdC8vIENhbiBhY2NlcHQgYW4gZXZlbnQgXCJsb2NhdGlvblwiIGFzIHdlbGwgKHdoaWNoIG9ubHkgaGFzIHN0YXJ0L2VuZCBhbmQgbm8gYWxsRGF5KVxuXHRldmVudFRvUmFuZ2U6IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0dmFyIGNhbGVuZGFyID0gdGhpcy52aWV3LmNhbGVuZGFyO1xuXHRcdHZhciBzdGFydCA9IGV2ZW50LnN0YXJ0LmNsb25lKCkuc3RyaXBab25lKCk7XG5cdFx0dmFyIGVuZCA9IChcblx0XHRcdFx0ZXZlbnQuZW5kID9cblx0XHRcdFx0XHRldmVudC5lbmQuY2xvbmUoKSA6XG5cdFx0XHRcdFx0Ly8gZGVyaXZlIHRoZSBlbmQgZnJvbSB0aGUgc3RhcnQgYW5kIGFsbERheS4gY29tcHV0ZSBhbGxEYXkgaWYgbmVjZXNzYXJ5XG5cdFx0XHRcdFx0Y2FsZW5kYXIuZ2V0RGVmYXVsdEV2ZW50RW5kKFxuXHRcdFx0XHRcdFx0ZXZlbnQuYWxsRGF5ICE9IG51bGwgP1xuXHRcdFx0XHRcdFx0XHRldmVudC5hbGxEYXkgOlxuXHRcdFx0XHRcdFx0XHQhZXZlbnQuc3RhcnQuaGFzVGltZSgpLFxuXHRcdFx0XHRcdFx0ZXZlbnQuc3RhcnRcblx0XHRcdFx0XHQpXG5cdFx0XHQpLnN0cmlwWm9uZSgpO1xuXG5cdFx0Ly8gaGFjazogZHluYW1pYyBsb2NhbGUgY2hhbmdlIGZvcmdldHMgdG8gdXBhdGUgc3RvcmVkIGV2ZW50IGxvY2FsZWRcblx0XHRjYWxlbmRhci5sb2NhbGl6ZU1vbWVudChzdGFydCk7XG5cdFx0Y2FsZW5kYXIubG9jYWxpemVNb21lbnQoZW5kKTtcblxuXHRcdHJldHVybiB7IHN0YXJ0OiBzdGFydCwgZW5kOiBlbmQgfTtcblx0fSxcblxuXG5cdC8vIEdpdmVuIGFuIGV2ZW50J3MgcmFuZ2UgKHVuem9uZWQgc3RhcnQvZW5kKSwgYW5kIHRoZSBldmVudCBpdHNlbGYsXG5cdC8vIHNsaWNlIGludG8gc2VnbWVudHMgKHVzaW5nIHRoZSBzZWdTbGljZUZ1bmMgZnVuY3Rpb24gaWYgc3BlY2lmaWVkKVxuXHRldmVudFJhbmdlVG9TZWdzOiBmdW5jdGlvbihyYW5nZSwgZXZlbnQsIHNlZ1NsaWNlRnVuYykge1xuXHRcdHZhciBzcGFucyA9IHRoaXMuZXZlbnRSYW5nZVRvU3BhbnMocmFuZ2UsIGV2ZW50KTtcblx0XHR2YXIgc2VncyA9IFtdO1xuXHRcdHZhciBpO1xuXG5cdFx0Zm9yIChpID0gMDsgaSA8IHNwYW5zLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRzZWdzLnB1c2guYXBwbHkoc2VncywgLy8gYXBwZW5kIHRvXG5cdFx0XHRcdHRoaXMuZXZlbnRTcGFuVG9TZWdzKHNwYW5zW2ldLCBldmVudCwgc2VnU2xpY2VGdW5jKSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHNlZ3M7XG5cdH0sXG5cblxuXHQvLyBHaXZlbiBhbiBldmVudCdzIHVuem9uZWQgZGF0ZSByYW5nZSwgcmV0dXJuIGFuIGFycmF5IG9mIFwic3BhblwiIG9iamVjdHMuXG5cdC8vIFN1YmNsYXNzZXMgY2FuIG92ZXJyaWRlLlxuXHRldmVudFJhbmdlVG9TcGFuczogZnVuY3Rpb24ocmFuZ2UsIGV2ZW50KSB7XG5cdFx0cmV0dXJuIFsgJC5leHRlbmQoe30sIHJhbmdlKSBdOyAvLyBjb3B5IGludG8gYSBzaW5nbGUtaXRlbSBhcnJheVxuXHR9LFxuXG5cblx0Ly8gR2l2ZW4gYW4gZXZlbnQncyBzcGFuICh1bnpvbmVkIHN0YXJ0L2VuZCBhbmQgb3RoZXIgbWlzYyBkYXRhKSwgYW5kIHRoZSBldmVudCBpdHNlbGYsXG5cdC8vIHNsaWNlcyBpbnRvIHNlZ21lbnRzIGFuZCBhdHRhY2hlcyBldmVudC1kZXJpdmVkIHByb3BlcnRpZXMgdG8gdGhlbS5cblx0ZXZlbnRTcGFuVG9TZWdzOiBmdW5jdGlvbihzcGFuLCBldmVudCwgc2VnU2xpY2VGdW5jKSB7XG5cdFx0dmFyIHNlZ3MgPSBzZWdTbGljZUZ1bmMgPyBzZWdTbGljZUZ1bmMoc3BhbikgOiB0aGlzLnNwYW5Ub1NlZ3Moc3Bhbik7XG5cdFx0dmFyIGksIHNlZztcblxuXHRcdGZvciAoaSA9IDA7IGkgPCBzZWdzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRzZWcgPSBzZWdzW2ldO1xuXHRcdFx0c2VnLmV2ZW50ID0gZXZlbnQ7XG5cdFx0XHRzZWcuZXZlbnRTdGFydE1TID0gK3NwYW4uc3RhcnQ7IC8vIFRPRE86IG5vdCB0aGUgYmVzdCBuYW1lIGFmdGVyIG1ha2luZyBzcGFucyB1bnpvbmVkXG5cdFx0XHRzZWcuZXZlbnREdXJhdGlvbk1TID0gc3Bhbi5lbmQgLSBzcGFuLnN0YXJ0O1xuXHRcdH1cblxuXHRcdHJldHVybiBzZWdzO1xuXHR9LFxuXG5cblx0Ly8gUHJvZHVjZXMgYSBuZXcgYXJyYXkgb2YgcmFuZ2Ugb2JqZWN0cyB0aGF0IHdpbGwgY292ZXIgYWxsIHRoZSB0aW1lIE5PVCBjb3ZlcmVkIGJ5IHRoZSBnaXZlbiByYW5nZXMuXG5cdC8vIFNJREUgRUZGRUNUOiB3aWxsIG11dGF0ZSB0aGUgZ2l2ZW4gYXJyYXkgYW5kIHdpbGwgdXNlIGl0cyBkYXRlIHJlZmVyZW5jZXMuXG5cdGludmVydFJhbmdlczogZnVuY3Rpb24ocmFuZ2VzKSB7XG5cdFx0dmFyIHZpZXcgPSB0aGlzLnZpZXc7XG5cdFx0dmFyIHZpZXdTdGFydCA9IHZpZXcuc3RhcnQuY2xvbmUoKTsgLy8gbmVlZCBhIGNvcHlcblx0XHR2YXIgdmlld0VuZCA9IHZpZXcuZW5kLmNsb25lKCk7IC8vIG5lZWQgYSBjb3B5XG5cdFx0dmFyIGludmVyc2VSYW5nZXMgPSBbXTtcblx0XHR2YXIgc3RhcnQgPSB2aWV3U3RhcnQ7IC8vIHRoZSBlbmQgb2YgdGhlIHByZXZpb3VzIHJhbmdlLiB0aGUgc3RhcnQgb2YgdGhlIG5ldyByYW5nZVxuXHRcdHZhciBpLCByYW5nZTtcblxuXHRcdC8vIHJhbmdlcyBuZWVkIHRvIGJlIGluIG9yZGVyLiByZXF1aXJlZCBmb3Igb3VyIGRhdGUtd2Fsa2luZyBhbGdvcml0aG1cblx0XHRyYW5nZXMuc29ydChjb21wYXJlUmFuZ2VzKTtcblxuXHRcdGZvciAoaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHJhbmdlID0gcmFuZ2VzW2ldO1xuXG5cdFx0XHQvLyBhZGQgdGhlIHNwYW4gb2YgdGltZSBiZWZvcmUgdGhlIGV2ZW50IChpZiB0aGVyZSBpcyBhbnkpXG5cdFx0XHRpZiAocmFuZ2Uuc3RhcnQgPiBzdGFydCkgeyAvLyBjb21wYXJlIG1pbGxpc2Vjb25kIHRpbWUgKHNraXAgYW55IGFtYmlnIGxvZ2ljKVxuXHRcdFx0XHRpbnZlcnNlUmFuZ2VzLnB1c2goe1xuXHRcdFx0XHRcdHN0YXJ0OiBzdGFydCxcblx0XHRcdFx0XHRlbmQ6IHJhbmdlLnN0YXJ0XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0XHRzdGFydCA9IHJhbmdlLmVuZDtcblx0XHR9XG5cblx0XHQvLyBhZGQgdGhlIHNwYW4gb2YgdGltZSBhZnRlciB0aGUgbGFzdCBldmVudCAoaWYgdGhlcmUgaXMgYW55KVxuXHRcdGlmIChzdGFydCA8IHZpZXdFbmQpIHsgLy8gY29tcGFyZSBtaWxsaXNlY29uZCB0aW1lIChza2lwIGFueSBhbWJpZyBsb2dpYylcblx0XHRcdGludmVyc2VSYW5nZXMucHVzaCh7XG5cdFx0XHRcdHN0YXJ0OiBzdGFydCxcblx0XHRcdFx0ZW5kOiB2aWV3RW5kXG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gaW52ZXJzZVJhbmdlcztcblx0fSxcblxuXG5cdHNvcnRFdmVudFNlZ3M6IGZ1bmN0aW9uKHNlZ3MpIHtcblx0XHRzZWdzLnNvcnQocHJveHkodGhpcywgJ2NvbXBhcmVFdmVudFNlZ3MnKSk7XG5cdH0sXG5cblxuXHQvLyBBIGNtcCBmdW5jdGlvbiBmb3IgZGV0ZXJtaW5pbmcgd2hpY2ggc2VnbWVudHMgc2hvdWxkIHRha2UgdmlzdWFsIHByaW9yaXR5XG5cdGNvbXBhcmVFdmVudFNlZ3M6IGZ1bmN0aW9uKHNlZzEsIHNlZzIpIHtcblx0XHRyZXR1cm4gc2VnMS5ldmVudFN0YXJ0TVMgLSBzZWcyLmV2ZW50U3RhcnRNUyB8fCAvLyBlYXJsaWVyIGV2ZW50cyBnbyBmaXJzdFxuXHRcdFx0c2VnMi5ldmVudER1cmF0aW9uTVMgLSBzZWcxLmV2ZW50RHVyYXRpb25NUyB8fCAvLyB0aWU/IGxvbmdlciBldmVudHMgZ28gZmlyc3Rcblx0XHRcdHNlZzIuZXZlbnQuYWxsRGF5IC0gc2VnMS5ldmVudC5hbGxEYXkgfHwgLy8gdGllPyBwdXQgYWxsLWRheSBldmVudHMgZmlyc3QgKGJvb2xlYW5zIGNhc3QgdG8gMC8xKVxuXHRcdFx0Y29tcGFyZUJ5RmllbGRTcGVjcyhzZWcxLmV2ZW50LCBzZWcyLmV2ZW50LCB0aGlzLnZpZXcuZXZlbnRPcmRlclNwZWNzKTtcblx0fVxuXG59KTtcblxuXG4vKiBVdGlsaXRpZXNcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cbmZ1bmN0aW9uIHBsdWNrRXZlbnREYXRlUHJvcHMoZXZlbnQpIHtcblx0cmV0dXJuIHtcblx0XHRzdGFydDogZXZlbnQuc3RhcnQuY2xvbmUoKSxcblx0XHRlbmQ6IGV2ZW50LmVuZCA/IGV2ZW50LmVuZC5jbG9uZSgpIDogbnVsbCxcblx0XHRhbGxEYXk6IGV2ZW50LmFsbERheSAvLyBrZWVwIGl0IHRoZSBzYW1lXG5cdH07XG59XG5GQy5wbHVja0V2ZW50RGF0ZVByb3BzID0gcGx1Y2tFdmVudERhdGVQcm9wcztcblxuXG5mdW5jdGlvbiBpc0JnRXZlbnQoZXZlbnQpIHsgLy8gcmV0dXJucyB0cnVlIGlmIGJhY2tncm91bmQgT1IgaW52ZXJzZS1iYWNrZ3JvdW5kXG5cdHZhciByZW5kZXJpbmcgPSBnZXRFdmVudFJlbmRlcmluZyhldmVudCk7XG5cdHJldHVybiByZW5kZXJpbmcgPT09ICdiYWNrZ3JvdW5kJyB8fCByZW5kZXJpbmcgPT09ICdpbnZlcnNlLWJhY2tncm91bmQnO1xufVxuRkMuaXNCZ0V2ZW50ID0gaXNCZ0V2ZW50OyAvLyBleHBvcnRcblxuXG5mdW5jdGlvbiBpc0ludmVyc2VCZ0V2ZW50KGV2ZW50KSB7XG5cdHJldHVybiBnZXRFdmVudFJlbmRlcmluZyhldmVudCkgPT09ICdpbnZlcnNlLWJhY2tncm91bmQnO1xufVxuXG5cbmZ1bmN0aW9uIGdldEV2ZW50UmVuZGVyaW5nKGV2ZW50KSB7XG5cdHJldHVybiBmaXJzdERlZmluZWQoKGV2ZW50LnNvdXJjZSB8fCB7fSkucmVuZGVyaW5nLCBldmVudC5yZW5kZXJpbmcpO1xufVxuXG5cbmZ1bmN0aW9uIGdyb3VwRXZlbnRzQnlJZChldmVudHMpIHtcblx0dmFyIGV2ZW50c0J5SWQgPSB7fTtcblx0dmFyIGksIGV2ZW50O1xuXG5cdGZvciAoaSA9IDA7IGkgPCBldmVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRldmVudCA9IGV2ZW50c1tpXTtcblx0XHQoZXZlbnRzQnlJZFtldmVudC5faWRdIHx8IChldmVudHNCeUlkW2V2ZW50Ll9pZF0gPSBbXSkpLnB1c2goZXZlbnQpO1xuXHR9XG5cblx0cmV0dXJuIGV2ZW50c0J5SWQ7XG59XG5cblxuLy8gQSBjbXAgZnVuY3Rpb24gZm9yIGRldGVybWluaW5nIHdoaWNoIG5vbi1pbnZlcnRlZCBcInJhbmdlc1wiIChzZWUgYWJvdmUpIGhhcHBlbiBlYXJsaWVyXG5mdW5jdGlvbiBjb21wYXJlUmFuZ2VzKHJhbmdlMSwgcmFuZ2UyKSB7XG5cdHJldHVybiByYW5nZTEuc3RhcnQgLSByYW5nZTIuc3RhcnQ7IC8vIGVhcmxpZXIgcmFuZ2VzIGdvIGZpcnN0XG59XG5cblxuLyogRXh0ZXJuYWwtRHJhZ2dpbmctRWxlbWVudCBEYXRhXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuLy8gUmVxdWlyZSBhbGwgSFRNTDUgZGF0YS0qIGF0dHJpYnV0ZXMgdXNlZCBieSBGdWxsQ2FsZW5kYXIgdG8gaGF2ZSB0aGlzIHByZWZpeC5cbi8vIEEgdmFsdWUgb2YgJycgd2lsbCBxdWVyeSBhdHRyaWJ1dGVzIGxpa2UgZGF0YS1ldmVudC4gQSB2YWx1ZSBvZiAnZmMnIHdpbGwgcXVlcnkgYXR0cmlidXRlcyBsaWtlIGRhdGEtZmMtZXZlbnQuXG5GQy5kYXRhQXR0clByZWZpeCA9ICcnO1xuXG4vLyBHaXZlbiBhIGpRdWVyeSBlbGVtZW50IHRoYXQgbWlnaHQgcmVwcmVzZW50IGEgZHJhZ2dlZCBGdWxsQ2FsZW5kYXIgZXZlbnQsIHJldHVybnMgYW4gaW50ZXJtZWRpYXRlIGRhdGEgc3RydWN0dXJlXG4vLyB0byBiZSB1c2VkIGZvciBFdmVudCBPYmplY3QgY3JlYXRpb24uXG4vLyBBIGRlZmluZWQgYC5ldmVudFByb3BzYCwgZXZlbiB3aGVuIGVtcHR5LCBpbmRpY2F0ZXMgdGhhdCBhbiBldmVudCBzaG91bGQgYmUgY3JlYXRlZC5cbmZ1bmN0aW9uIGdldERyYWdnZWRFbE1ldGEoZWwpIHtcblx0dmFyIHByZWZpeCA9IEZDLmRhdGFBdHRyUHJlZml4O1xuXHR2YXIgZXZlbnRQcm9wczsgLy8gcHJvcGVydGllcyBmb3IgY3JlYXRpbmcgdGhlIGV2ZW50LCBub3QgcmVsYXRlZCB0byBkYXRlL3RpbWVcblx0dmFyIHN0YXJ0VGltZTsgLy8gYSBEdXJhdGlvblxuXHR2YXIgZHVyYXRpb247XG5cdHZhciBzdGljaztcblxuXHRpZiAocHJlZml4KSB7IHByZWZpeCArPSAnLSc7IH1cblx0ZXZlbnRQcm9wcyA9IGVsLmRhdGEocHJlZml4ICsgJ2V2ZW50JykgfHwgbnVsbDtcblxuXHRpZiAoZXZlbnRQcm9wcykge1xuXHRcdGlmICh0eXBlb2YgZXZlbnRQcm9wcyA9PT0gJ29iamVjdCcpIHtcblx0XHRcdGV2ZW50UHJvcHMgPSAkLmV4dGVuZCh7fSwgZXZlbnRQcm9wcyk7IC8vIG1ha2UgYSBjb3B5XG5cdFx0fVxuXHRcdGVsc2UgeyAvLyBzb21ldGhpbmcgbGlrZSAxIG9yIHRydWUuIHN0aWxsIHNpZ25hbCBldmVudCBjcmVhdGlvblxuXHRcdFx0ZXZlbnRQcm9wcyA9IHt9O1xuXHRcdH1cblxuXHRcdC8vIHBsdWNrIHNwZWNpYWwtY2FzZWQgZGF0ZS90aW1lIHByb3BlcnRpZXNcblx0XHRzdGFydFRpbWUgPSBldmVudFByb3BzLnN0YXJ0O1xuXHRcdGlmIChzdGFydFRpbWUgPT0gbnVsbCkgeyBzdGFydFRpbWUgPSBldmVudFByb3BzLnRpbWU7IH0gLy8gYWNjZXB0ICd0aW1lJyBhcyB3ZWxsXG5cdFx0ZHVyYXRpb24gPSBldmVudFByb3BzLmR1cmF0aW9uO1xuXHRcdHN0aWNrID0gZXZlbnRQcm9wcy5zdGljaztcblx0XHRkZWxldGUgZXZlbnRQcm9wcy5zdGFydDtcblx0XHRkZWxldGUgZXZlbnRQcm9wcy50aW1lO1xuXHRcdGRlbGV0ZSBldmVudFByb3BzLmR1cmF0aW9uO1xuXHRcdGRlbGV0ZSBldmVudFByb3BzLnN0aWNrO1xuXHR9XG5cblx0Ly8gZmFsbGJhY2sgdG8gc3RhbmRhbG9uZSBhdHRyaWJ1dGUgdmFsdWVzIGZvciBlYWNoIG9mIHRoZSBkYXRlL3RpbWUgcHJvcGVydGllc1xuXHRpZiAoc3RhcnRUaW1lID09IG51bGwpIHsgc3RhcnRUaW1lID0gZWwuZGF0YShwcmVmaXggKyAnc3RhcnQnKTsgfVxuXHRpZiAoc3RhcnRUaW1lID09IG51bGwpIHsgc3RhcnRUaW1lID0gZWwuZGF0YShwcmVmaXggKyAndGltZScpOyB9IC8vIGFjY2VwdCAndGltZScgYXMgd2VsbFxuXHRpZiAoZHVyYXRpb24gPT0gbnVsbCkgeyBkdXJhdGlvbiA9IGVsLmRhdGEocHJlZml4ICsgJ2R1cmF0aW9uJyk7IH1cblx0aWYgKHN0aWNrID09IG51bGwpIHsgc3RpY2sgPSBlbC5kYXRhKHByZWZpeCArICdzdGljaycpOyB9XG5cblx0Ly8gbWFzc2FnZSBpbnRvIGNvcnJlY3QgZGF0YSB0eXBlc1xuXHRzdGFydFRpbWUgPSBzdGFydFRpbWUgIT0gbnVsbCA/IG1vbWVudC5kdXJhdGlvbihzdGFydFRpbWUpIDogbnVsbDtcblx0ZHVyYXRpb24gPSBkdXJhdGlvbiAhPSBudWxsID8gbW9tZW50LmR1cmF0aW9uKGR1cmF0aW9uKSA6IG51bGw7XG5cdHN0aWNrID0gQm9vbGVhbihzdGljayk7XG5cblx0cmV0dXJuIHsgZXZlbnRQcm9wczogZXZlbnRQcm9wcywgc3RhcnRUaW1lOiBzdGFydFRpbWUsIGR1cmF0aW9uOiBkdXJhdGlvbiwgc3RpY2s6IHN0aWNrIH07XG59XG5cblxuOztcblxuLypcbkEgc2V0IG9mIHJlbmRlcmluZyBhbmQgZGF0ZS1yZWxhdGVkIG1ldGhvZHMgZm9yIGEgdmlzdWFsIGNvbXBvbmVudCBjb21wcmlzZWQgb2Ygb25lIG9yIG1vcmUgcm93cyBvZiBkYXkgY29sdW1ucy5cblByZXJlcXVpc2l0ZTogdGhlIG9iamVjdCBiZWluZyBtaXhlZCBpbnRvIG5lZWRzIHRvIGJlIGEgKkdyaWQqXG4qL1xudmFyIERheVRhYmxlTWl4aW4gPSBGQy5EYXlUYWJsZU1peGluID0ge1xuXG5cdGJyZWFrT25XZWVrczogZmFsc2UsIC8vIHNob3VsZCBjcmVhdGUgYSBuZXcgcm93IGZvciBlYWNoIHdlZWs/XG5cdGRheURhdGVzOiBudWxsLCAvLyB3aG9sZS1kYXkgZGF0ZXMgZm9yIGVhY2ggY29sdW1uLiBsZWZ0IHRvIHJpZ2h0XG5cdGRheUluZGljZXM6IG51bGwsIC8vIGZvciBlYWNoIGRheSBmcm9tIHN0YXJ0LCB0aGUgb2Zmc2V0XG5cdGRheXNQZXJSb3c6IG51bGwsXG5cdHJvd0NudDogbnVsbCxcblx0Y29sQ250OiBudWxsLFxuXHRjb2xIZWFkRm9ybWF0OiBudWxsLFxuXG5cblx0Ly8gUG9wdWxhdGVzIGludGVybmFsIHZhcmlhYmxlcyB1c2VkIGZvciBkYXRlIGNhbGN1bGF0aW9uIGFuZCByZW5kZXJpbmdcblx0dXBkYXRlRGF5VGFibGU6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB2aWV3ID0gdGhpcy52aWV3O1xuXHRcdHZhciBkYXRlID0gdGhpcy5zdGFydC5jbG9uZSgpO1xuXHRcdHZhciBkYXlJbmRleCA9IC0xO1xuXHRcdHZhciBkYXlJbmRpY2VzID0gW107XG5cdFx0dmFyIGRheURhdGVzID0gW107XG5cdFx0dmFyIGRheXNQZXJSb3c7XG5cdFx0dmFyIGZpcnN0RGF5O1xuXHRcdHZhciByb3dDbnQ7XG5cblx0XHR3aGlsZSAoZGF0ZS5pc0JlZm9yZSh0aGlzLmVuZCkpIHsgLy8gbG9vcCBlYWNoIGRheSBmcm9tIHN0YXJ0IHRvIGVuZFxuXHRcdFx0aWYgKHZpZXcuaXNIaWRkZW5EYXkoZGF0ZSkpIHtcblx0XHRcdFx0ZGF5SW5kaWNlcy5wdXNoKGRheUluZGV4ICsgMC41KTsgLy8gbWFyayB0aGF0IGl0J3MgYmV0d2VlbiBpbmRpY2VzXG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0ZGF5SW5kZXgrKztcblx0XHRcdFx0ZGF5SW5kaWNlcy5wdXNoKGRheUluZGV4KTtcblx0XHRcdFx0ZGF5RGF0ZXMucHVzaChkYXRlLmNsb25lKCkpO1xuXHRcdFx0fVxuXHRcdFx0ZGF0ZS5hZGQoMSwgJ2RheXMnKTtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5icmVha09uV2Vla3MpIHtcblx0XHRcdC8vIGNvdW50IGNvbHVtbnMgdW50aWwgdGhlIGRheS1vZi13ZWVrIHJlcGVhdHNcblx0XHRcdGZpcnN0RGF5ID0gZGF5RGF0ZXNbMF0uZGF5KCk7XG5cdFx0XHRmb3IgKGRheXNQZXJSb3cgPSAxOyBkYXlzUGVyUm93IDwgZGF5RGF0ZXMubGVuZ3RoOyBkYXlzUGVyUm93KyspIHtcblx0XHRcdFx0aWYgKGRheURhdGVzW2RheXNQZXJSb3ddLmRheSgpID09IGZpcnN0RGF5KSB7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJvd0NudCA9IE1hdGguY2VpbChkYXlEYXRlcy5sZW5ndGggLyBkYXlzUGVyUm93KTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRyb3dDbnQgPSAxO1xuXHRcdFx0ZGF5c1BlclJvdyA9IGRheURhdGVzLmxlbmd0aDtcblx0XHR9XG5cblx0XHR0aGlzLmRheURhdGVzID0gZGF5RGF0ZXM7XG5cdFx0dGhpcy5kYXlJbmRpY2VzID0gZGF5SW5kaWNlcztcblx0XHR0aGlzLmRheXNQZXJSb3cgPSBkYXlzUGVyUm93O1xuXHRcdHRoaXMucm93Q250ID0gcm93Q250O1xuXG5cdFx0dGhpcy51cGRhdGVEYXlUYWJsZUNvbHMoKTtcblx0fSxcblxuXG5cdC8vIENvbXB1dGVzIGFuZCBhc3NpZ25lZCB0aGUgY29sQ250IHByb3BlcnR5IGFuZCB1cGRhdGVzIGFueSBvcHRpb25zIHRoYXQgbWF5IGJlIGNvbXB1dGVkIGZyb20gaXRcblx0dXBkYXRlRGF5VGFibGVDb2xzOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLmNvbENudCA9IHRoaXMuY29tcHV0ZUNvbENudCgpO1xuXHRcdHRoaXMuY29sSGVhZEZvcm1hdCA9IHRoaXMudmlldy5vcHQoJ2NvbHVtbkZvcm1hdCcpIHx8IHRoaXMuY29tcHV0ZUNvbEhlYWRGb3JtYXQoKTtcblx0fSxcblxuXG5cdC8vIERldGVybWluZXMgaG93IG1hbnkgY29sdW1ucyB0aGVyZSBzaG91bGQgYmUgaW4gdGhlIHRhYmxlXG5cdGNvbXB1dGVDb2xDbnQ6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmRheXNQZXJSb3c7XG5cdH0sXG5cblxuXHQvLyBDb21wdXRlcyB0aGUgYW1iaWd1b3VzbHktdGltZWQgbW9tZW50IGZvciB0aGUgZ2l2ZW4gY2VsbFxuXHRnZXRDZWxsRGF0ZTogZnVuY3Rpb24ocm93LCBjb2wpIHtcblx0XHRyZXR1cm4gdGhpcy5kYXlEYXRlc1tcblx0XHRcdFx0dGhpcy5nZXRDZWxsRGF5SW5kZXgocm93LCBjb2wpXG5cdFx0XHRdLmNsb25lKCk7XG5cdH0sXG5cblxuXHQvLyBDb21wdXRlcyB0aGUgYW1iaWd1b3VzbHktdGltZWQgZGF0ZSByYW5nZSBmb3IgdGhlIGdpdmVuIGNlbGxcblx0Z2V0Q2VsbFJhbmdlOiBmdW5jdGlvbihyb3csIGNvbCkge1xuXHRcdHZhciBzdGFydCA9IHRoaXMuZ2V0Q2VsbERhdGUocm93LCBjb2wpO1xuXHRcdHZhciBlbmQgPSBzdGFydC5jbG9uZSgpLmFkZCgxLCAnZGF5cycpO1xuXG5cdFx0cmV0dXJuIHsgc3RhcnQ6IHN0YXJ0LCBlbmQ6IGVuZCB9O1xuXHR9LFxuXG5cblx0Ly8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIGRheSBjZWxscywgY2hyb25vbG9naWNhbGx5LCBmcm9tIHRoZSBmaXJzdCBvZiB0aGUgZ3JpZCAoMC1iYXNlZClcblx0Z2V0Q2VsbERheUluZGV4OiBmdW5jdGlvbihyb3csIGNvbCkge1xuXHRcdHJldHVybiByb3cgKiB0aGlzLmRheXNQZXJSb3cgKyB0aGlzLmdldENvbERheUluZGV4KGNvbCk7XG5cdH0sXG5cblxuXHQvLyBSZXR1cm5zIHRoZSBudW1uZXIgb2YgZGF5IGNlbGxzLCBjaHJvbm9sb2dpY2FsbHksIGZyb20gdGhlIGZpcnN0IGNlbGwgaW4gKmFueSBnaXZlbiByb3cqXG5cdGdldENvbERheUluZGV4OiBmdW5jdGlvbihjb2wpIHtcblx0XHRpZiAodGhpcy5pc1JUTCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuY29sQ250IC0gMSAtIGNvbDtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRyZXR1cm4gY29sO1xuXHRcdH1cblx0fSxcblxuXG5cdC8vIEdpdmVuIGEgZGF0ZSwgcmV0dXJucyBpdHMgY2hyb25vbG9jaWFsIGNlbGwtaW5kZXggZnJvbSB0aGUgZmlyc3QgY2VsbCBvZiB0aGUgZ3JpZC5cblx0Ly8gSWYgdGhlIGRhdGUgbGllcyBiZXR3ZWVuIGNlbGxzIChiZWNhdXNlIG9mIGhpZGRlbkRheXMpLCByZXR1cm5zIGEgZmxvYXRpbmctcG9pbnQgdmFsdWUgYmV0d2VlbiBvZmZzZXRzLlxuXHQvLyBJZiBiZWZvcmUgdGhlIGZpcnN0IG9mZnNldCwgcmV0dXJucyBhIG5lZ2F0aXZlIG51bWJlci5cblx0Ly8gSWYgYWZ0ZXIgdGhlIGxhc3Qgb2Zmc2V0LCByZXR1cm5zIGFuIG9mZnNldCBwYXN0IHRoZSBsYXN0IGNlbGwgb2Zmc2V0LlxuXHQvLyBPbmx5IHdvcmtzIGZvciAqc3RhcnQqIGRhdGVzIG9mIGNlbGxzLiBXaWxsIG5vdCB3b3JrIGZvciBleGNsdXNpdmUgZW5kIGRhdGVzIGZvciBjZWxscy5cblx0Z2V0RGF0ZURheUluZGV4OiBmdW5jdGlvbihkYXRlKSB7XG5cdFx0dmFyIGRheUluZGljZXMgPSB0aGlzLmRheUluZGljZXM7XG5cdFx0dmFyIGRheU9mZnNldCA9IGRhdGUuZGlmZih0aGlzLnN0YXJ0LCAnZGF5cycpO1xuXG5cdFx0aWYgKGRheU9mZnNldCA8IDApIHtcblx0XHRcdHJldHVybiBkYXlJbmRpY2VzWzBdIC0gMTtcblx0XHR9XG5cdFx0ZWxzZSBpZiAoZGF5T2Zmc2V0ID49IGRheUluZGljZXMubGVuZ3RoKSB7XG5cdFx0XHRyZXR1cm4gZGF5SW5kaWNlc1tkYXlJbmRpY2VzLmxlbmd0aCAtIDFdICsgMTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRyZXR1cm4gZGF5SW5kaWNlc1tkYXlPZmZzZXRdO1xuXHRcdH1cblx0fSxcblxuXG5cdC8qIE9wdGlvbnNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIENvbXB1dGVzIGEgZGVmYXVsdCBjb2x1bW4gaGVhZGVyIGZvcm1hdHRpbmcgc3RyaW5nIGlmIGBjb2xGb3JtYXRgIGlzIG5vdCBleHBsaWNpdGx5IGRlZmluZWRcblx0Y29tcHV0ZUNvbEhlYWRGb3JtYXQ6IGZ1bmN0aW9uKCkge1xuXHRcdC8vIGlmIG1vcmUgdGhhbiBvbmUgd2VlayByb3csIG9yIGlmIHRoZXJlIGFyZSBhIGxvdCBvZiBjb2x1bW5zIHdpdGggbm90IG11Y2ggc3BhY2UsXG5cdFx0Ly8gcHV0IGp1c3QgdGhlIGRheSBudW1iZXJzIHdpbGwgYmUgaW4gZWFjaCBjZWxsXG5cdFx0aWYgKHRoaXMucm93Q250ID4gMSB8fCB0aGlzLmNvbENudCA+IDEwKSB7XG5cdFx0XHRyZXR1cm4gJ2RkZCc7IC8vIFwiU2F0XCJcblx0XHR9XG5cdFx0Ly8gbXVsdGlwbGUgZGF5cywgc28gZnVsbCBzaW5nbGUgZGF0ZSBzdHJpbmcgV09OJ1QgYmUgaW4gdGl0bGUgdGV4dFxuXHRcdGVsc2UgaWYgKHRoaXMuY29sQ250ID4gMSkge1xuXHRcdFx0cmV0dXJuIHRoaXMudmlldy5vcHQoJ2RheU9mTW9udGhGb3JtYXQnKTsgLy8gXCJTYXQgMTIvMTBcIlxuXHRcdH1cblx0XHQvLyBzaW5nbGUgZGF5LCBzbyBmdWxsIHNpbmdsZSBkYXRlIHN0cmluZyB3aWxsIHByb2JhYmx5IGJlIGluIHRpdGxlIHRleHRcblx0XHRlbHNlIHtcblx0XHRcdHJldHVybiAnZGRkZCc7IC8vIFwiU2F0dXJkYXlcIlxuXHRcdH1cblx0fSxcblxuXG5cdC8qIFNsaWNpbmdcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIFNsaWNlcyB1cCBhIGRhdGUgcmFuZ2UgaW50byBhIHNlZ21lbnQgZm9yIGV2ZXJ5IHdlZWstcm93IGl0IGludGVyc2VjdHMgd2l0aFxuXHRzbGljZVJhbmdlQnlSb3c6IGZ1bmN0aW9uKHJhbmdlKSB7XG5cdFx0dmFyIGRheXNQZXJSb3cgPSB0aGlzLmRheXNQZXJSb3c7XG5cdFx0dmFyIG5vcm1hbFJhbmdlID0gdGhpcy52aWV3LmNvbXB1dGVEYXlSYW5nZShyYW5nZSk7IC8vIG1ha2Ugd2hvbGUtZGF5IHJhbmdlLCBjb25zaWRlcmluZyBuZXh0RGF5VGhyZXNob2xkXG5cdFx0dmFyIHJhbmdlRmlyc3QgPSB0aGlzLmdldERhdGVEYXlJbmRleChub3JtYWxSYW5nZS5zdGFydCk7IC8vIGluY2x1c2l2ZSBmaXJzdCBpbmRleFxuXHRcdHZhciByYW5nZUxhc3QgPSB0aGlzLmdldERhdGVEYXlJbmRleChub3JtYWxSYW5nZS5lbmQuY2xvbmUoKS5zdWJ0cmFjdCgxLCAnZGF5cycpKTsgLy8gaW5jbHVzaXZlIGxhc3QgaW5kZXhcblx0XHR2YXIgc2VncyA9IFtdO1xuXHRcdHZhciByb3c7XG5cdFx0dmFyIHJvd0ZpcnN0LCByb3dMYXN0OyAvLyBpbmNsdXNpdmUgZGF5LWluZGV4IHJhbmdlIGZvciBjdXJyZW50IHJvd1xuXHRcdHZhciBzZWdGaXJzdCwgc2VnTGFzdDsgLy8gaW5jbHVzaXZlIGRheS1pbmRleCByYW5nZSBmb3Igc2VnbWVudFxuXG5cdFx0Zm9yIChyb3cgPSAwOyByb3cgPCB0aGlzLnJvd0NudDsgcm93KyspIHtcblx0XHRcdHJvd0ZpcnN0ID0gcm93ICogZGF5c1BlclJvdztcblx0XHRcdHJvd0xhc3QgPSByb3dGaXJzdCArIGRheXNQZXJSb3cgLSAxO1xuXG5cdFx0XHQvLyBpbnRlcnNlY3Qgc2VnbWVudCdzIG9mZnNldCByYW5nZSB3aXRoIHRoZSByb3cnc1xuXHRcdFx0c2VnRmlyc3QgPSBNYXRoLm1heChyYW5nZUZpcnN0LCByb3dGaXJzdCk7XG5cdFx0XHRzZWdMYXN0ID0gTWF0aC5taW4ocmFuZ2VMYXN0LCByb3dMYXN0KTtcblxuXHRcdFx0Ly8gZGVhbCB3aXRoIGluLWJldHdlZW4gaW5kaWNlc1xuXHRcdFx0c2VnRmlyc3QgPSBNYXRoLmNlaWwoc2VnRmlyc3QpOyAvLyBpbi1iZXR3ZWVuIHN0YXJ0cyByb3VuZCB0byBuZXh0IGNlbGxcblx0XHRcdHNlZ0xhc3QgPSBNYXRoLmZsb29yKHNlZ0xhc3QpOyAvLyBpbi1iZXR3ZWVuIGVuZHMgcm91bmQgdG8gcHJldiBjZWxsXG5cblx0XHRcdGlmIChzZWdGaXJzdCA8PSBzZWdMYXN0KSB7IC8vIHdhcyB0aGVyZSBhbnkgaW50ZXJzZWN0aW9uIHdpdGggdGhlIGN1cnJlbnQgcm93P1xuXHRcdFx0XHRzZWdzLnB1c2goe1xuXHRcdFx0XHRcdHJvdzogcm93LFxuXG5cdFx0XHRcdFx0Ly8gbm9ybWFsaXplIHRvIHN0YXJ0IG9mIHJvd1xuXHRcdFx0XHRcdGZpcnN0Um93RGF5SW5kZXg6IHNlZ0ZpcnN0IC0gcm93Rmlyc3QsXG5cdFx0XHRcdFx0bGFzdFJvd0RheUluZGV4OiBzZWdMYXN0IC0gcm93Rmlyc3QsXG5cblx0XHRcdFx0XHQvLyBtdXN0IGJlIG1hdGNoaW5nIGludGVnZXJzIHRvIGJlIHRoZSBzZWdtZW50J3Mgc3RhcnQvZW5kXG5cdFx0XHRcdFx0aXNTdGFydDogc2VnRmlyc3QgPT09IHJhbmdlRmlyc3QsXG5cdFx0XHRcdFx0aXNFbmQ6IHNlZ0xhc3QgPT09IHJhbmdlTGFzdFxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gc2Vncztcblx0fSxcblxuXG5cdC8vIFNsaWNlcyB1cCBhIGRhdGUgcmFuZ2UgaW50byBhIHNlZ21lbnQgZm9yIGV2ZXJ5IGRheS1jZWxsIGl0IGludGVyc2VjdHMgd2l0aC5cblx0Ly8gVE9ETzogbWFrZSBtb3JlIERSWSB3aXRoIHNsaWNlUmFuZ2VCeVJvdyBzb21laG93LlxuXHRzbGljZVJhbmdlQnlEYXk6IGZ1bmN0aW9uKHJhbmdlKSB7XG5cdFx0dmFyIGRheXNQZXJSb3cgPSB0aGlzLmRheXNQZXJSb3c7XG5cdFx0dmFyIG5vcm1hbFJhbmdlID0gdGhpcy52aWV3LmNvbXB1dGVEYXlSYW5nZShyYW5nZSk7IC8vIG1ha2Ugd2hvbGUtZGF5IHJhbmdlLCBjb25zaWRlcmluZyBuZXh0RGF5VGhyZXNob2xkXG5cdFx0dmFyIHJhbmdlRmlyc3QgPSB0aGlzLmdldERhdGVEYXlJbmRleChub3JtYWxSYW5nZS5zdGFydCk7IC8vIGluY2x1c2l2ZSBmaXJzdCBpbmRleFxuXHRcdHZhciByYW5nZUxhc3QgPSB0aGlzLmdldERhdGVEYXlJbmRleChub3JtYWxSYW5nZS5lbmQuY2xvbmUoKS5zdWJ0cmFjdCgxLCAnZGF5cycpKTsgLy8gaW5jbHVzaXZlIGxhc3QgaW5kZXhcblx0XHR2YXIgc2VncyA9IFtdO1xuXHRcdHZhciByb3c7XG5cdFx0dmFyIHJvd0ZpcnN0LCByb3dMYXN0OyAvLyBpbmNsdXNpdmUgZGF5LWluZGV4IHJhbmdlIGZvciBjdXJyZW50IHJvd1xuXHRcdHZhciBpO1xuXHRcdHZhciBzZWdGaXJzdCwgc2VnTGFzdDsgLy8gaW5jbHVzaXZlIGRheS1pbmRleCByYW5nZSBmb3Igc2VnbWVudFxuXG5cdFx0Zm9yIChyb3cgPSAwOyByb3cgPCB0aGlzLnJvd0NudDsgcm93KyspIHtcblx0XHRcdHJvd0ZpcnN0ID0gcm93ICogZGF5c1BlclJvdztcblx0XHRcdHJvd0xhc3QgPSByb3dGaXJzdCArIGRheXNQZXJSb3cgLSAxO1xuXG5cdFx0XHRmb3IgKGkgPSByb3dGaXJzdDsgaSA8PSByb3dMYXN0OyBpKyspIHtcblxuXHRcdFx0XHQvLyBpbnRlcnNlY3Qgc2VnbWVudCdzIG9mZnNldCByYW5nZSB3aXRoIHRoZSByb3cnc1xuXHRcdFx0XHRzZWdGaXJzdCA9IE1hdGgubWF4KHJhbmdlRmlyc3QsIGkpO1xuXHRcdFx0XHRzZWdMYXN0ID0gTWF0aC5taW4ocmFuZ2VMYXN0LCBpKTtcblxuXHRcdFx0XHQvLyBkZWFsIHdpdGggaW4tYmV0d2VlbiBpbmRpY2VzXG5cdFx0XHRcdHNlZ0ZpcnN0ID0gTWF0aC5jZWlsKHNlZ0ZpcnN0KTsgLy8gaW4tYmV0d2VlbiBzdGFydHMgcm91bmQgdG8gbmV4dCBjZWxsXG5cdFx0XHRcdHNlZ0xhc3QgPSBNYXRoLmZsb29yKHNlZ0xhc3QpOyAvLyBpbi1iZXR3ZWVuIGVuZHMgcm91bmQgdG8gcHJldiBjZWxsXG5cblx0XHRcdFx0aWYgKHNlZ0ZpcnN0IDw9IHNlZ0xhc3QpIHsgLy8gd2FzIHRoZXJlIGFueSBpbnRlcnNlY3Rpb24gd2l0aCB0aGUgY3VycmVudCByb3c/XG5cdFx0XHRcdFx0c2Vncy5wdXNoKHtcblx0XHRcdFx0XHRcdHJvdzogcm93LFxuXG5cdFx0XHRcdFx0XHQvLyBub3JtYWxpemUgdG8gc3RhcnQgb2Ygcm93XG5cdFx0XHRcdFx0XHRmaXJzdFJvd0RheUluZGV4OiBzZWdGaXJzdCAtIHJvd0ZpcnN0LFxuXHRcdFx0XHRcdFx0bGFzdFJvd0RheUluZGV4OiBzZWdMYXN0IC0gcm93Rmlyc3QsXG5cblx0XHRcdFx0XHRcdC8vIG11c3QgYmUgbWF0Y2hpbmcgaW50ZWdlcnMgdG8gYmUgdGhlIHNlZ21lbnQncyBzdGFydC9lbmRcblx0XHRcdFx0XHRcdGlzU3RhcnQ6IHNlZ0ZpcnN0ID09PSByYW5nZUZpcnN0LFxuXHRcdFx0XHRcdFx0aXNFbmQ6IHNlZ0xhc3QgPT09IHJhbmdlTGFzdFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHNlZ3M7XG5cdH0sXG5cblxuXHQvKiBIZWFkZXIgUmVuZGVyaW5nXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHRyZW5kZXJIZWFkSHRtbDogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHZpZXcgPSB0aGlzLnZpZXc7XG5cblx0XHRyZXR1cm4gJycgK1xuXHRcdFx0JzxkaXYgY2xhc3M9XCJmYy1yb3cgJyArIHZpZXcud2lkZ2V0SGVhZGVyQ2xhc3MgKyAnXCI+JyArXG5cdFx0XHRcdCc8dGFibGU+JyArXG5cdFx0XHRcdFx0Jzx0aGVhZD4nICtcblx0XHRcdFx0XHRcdHRoaXMucmVuZGVySGVhZFRySHRtbCgpICtcblx0XHRcdFx0XHQnPC90aGVhZD4nICtcblx0XHRcdFx0JzwvdGFibGU+JyArXG5cdFx0XHQnPC9kaXY+Jztcblx0fSxcblxuXG5cdHJlbmRlckhlYWRJbnRyb0h0bWw6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLnJlbmRlckludHJvSHRtbCgpOyAvLyBmYWxsIGJhY2sgdG8gZ2VuZXJpY1xuXHR9LFxuXG5cblx0cmVuZGVySGVhZFRySHRtbDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuICcnICtcblx0XHRcdCc8dHI+JyArXG5cdFx0XHRcdCh0aGlzLmlzUlRMID8gJycgOiB0aGlzLnJlbmRlckhlYWRJbnRyb0h0bWwoKSkgK1xuXHRcdFx0XHR0aGlzLnJlbmRlckhlYWREYXRlQ2VsbHNIdG1sKCkgK1xuXHRcdFx0XHQodGhpcy5pc1JUTCA/IHRoaXMucmVuZGVySGVhZEludHJvSHRtbCgpIDogJycpICtcblx0XHRcdCc8L3RyPic7XG5cdH0sXG5cblxuXHRyZW5kZXJIZWFkRGF0ZUNlbGxzSHRtbDogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGh0bWxzID0gW107XG5cdFx0dmFyIGNvbCwgZGF0ZTtcblxuXHRcdGZvciAoY29sID0gMDsgY29sIDwgdGhpcy5jb2xDbnQ7IGNvbCsrKSB7XG5cdFx0XHRkYXRlID0gdGhpcy5nZXRDZWxsRGF0ZSgwLCBjb2wpO1xuXHRcdFx0aHRtbHMucHVzaCh0aGlzLnJlbmRlckhlYWREYXRlQ2VsbEh0bWwoZGF0ZSkpO1xuXHRcdH1cblxuXHRcdHJldHVybiBodG1scy5qb2luKCcnKTtcblx0fSxcblxuXG5cdC8vIFRPRE86IHdoZW4gaW50ZXJuYWxBcGlWZXJzaW9uLCBhY2NlcHQgYW4gb2JqZWN0IGZvciBIVE1MIGF0dHJpYnV0ZXNcblx0Ly8gKGNvbHNwYW4gc2hvdWxkIGJlIG5vIGRpZmZlcmVudClcblx0cmVuZGVySGVhZERhdGVDZWxsSHRtbDogZnVuY3Rpb24oZGF0ZSwgY29sc3Bhbiwgb3RoZXJBdHRycykge1xuXHRcdHZhciB2aWV3ID0gdGhpcy52aWV3O1xuXHRcdHZhciBjbGFzc05hbWVzID0gW1xuXHRcdFx0J2ZjLWRheS1oZWFkZXInLFxuXHRcdFx0dmlldy53aWRnZXRIZWFkZXJDbGFzc1xuXHRcdF07XG5cblx0XHQvLyBpZiBvbmx5IG9uZSByb3cgb2YgZGF5cywgdGhlIGNsYXNzTmFtZXMgb24gdGhlIGhlYWRlciBjYW4gcmVwcmVzZW50IHRoZSBzcGVjaWZpYyBkYXlzIGJlbmVhdGhcblx0XHRpZiAodGhpcy5yb3dDbnQgPT09IDEpIHtcblx0XHRcdGNsYXNzTmFtZXMgPSBjbGFzc05hbWVzLmNvbmNhdChcblx0XHRcdFx0Ly8gaW5jbHVkZXMgdGhlIGRheS1vZi13ZWVrIGNsYXNzXG5cdFx0XHRcdC8vIG5vVGhlbWVIaWdobGlnaHQ9dHJ1ZSAoZG9uJ3QgaGlnaGxpZ2h0IHRoZSBoZWFkZXIpXG5cdFx0XHRcdHRoaXMuZ2V0RGF5Q2xhc3NlcyhkYXRlLCB0cnVlKVxuXHRcdFx0KTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRjbGFzc05hbWVzLnB1c2goJ2ZjLScgKyBkYXlJRHNbZGF0ZS5kYXkoKV0pOyAvLyBvbmx5IGFkZCB0aGUgZGF5LW9mLXdlZWsgY2xhc3Ncblx0XHR9XG5cblx0XHRyZXR1cm4gJycgK1xuICAgICAgICAgICAgJzx0aCBjbGFzcz1cIicgKyBjbGFzc05hbWVzLmpvaW4oJyAnKSArICdcIicgK1xuXHRcdFx0XHQodGhpcy5yb3dDbnQgPT09IDEgP1xuXHRcdFx0XHRcdCcgZGF0YS1kYXRlPVwiJyArIGRhdGUuZm9ybWF0KCdZWVlZLU1NLUREJykgKyAnXCInIDpcblx0XHRcdFx0XHQnJykgK1xuXHRcdFx0XHQoY29sc3BhbiA+IDEgP1xuXHRcdFx0XHRcdCcgY29sc3Bhbj1cIicgKyBjb2xzcGFuICsgJ1wiJyA6XG5cdFx0XHRcdFx0JycpICtcblx0XHRcdFx0KG90aGVyQXR0cnMgP1xuXHRcdFx0XHRcdCcgJyArIG90aGVyQXR0cnMgOlxuXHRcdFx0XHRcdCcnKSArXG5cdFx0XHRcdCc+JyArXG5cdFx0XHRcdC8vIGRvbid0IG1ha2UgYSBsaW5rIGlmIHRoZSBoZWFkaW5nIGNvdWxkIHJlcHJlc2VudCBtdWx0aXBsZSBkYXlzLCBvciBpZiB0aGVyZSdzIG9ubHkgb25lIGRheSAoZm9yY2VPZmYpXG5cdFx0XHRcdHZpZXcuYnVpbGRHb3RvQW5jaG9ySHRtbChcblx0XHRcdFx0XHR7IGRhdGU6IGRhdGUsIGZvcmNlT2ZmOiB0aGlzLnJvd0NudCA+IDEgfHwgdGhpcy5jb2xDbnQgPT09IDEgfSxcblx0XHRcdFx0XHRodG1sRXNjYXBlKGRhdGUuZm9ybWF0KHRoaXMuY29sSGVhZEZvcm1hdCkpIC8vIGlubmVyIEhUTUxcblx0XHRcdFx0KSArXG5cdFx0XHQnPC90aD4nO1xuXHR9LFxuXG5cblx0LyogQmFja2dyb3VuZCBSZW5kZXJpbmdcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdHJlbmRlckJnVHJIdG1sOiBmdW5jdGlvbihyb3cpIHtcblx0XHRyZXR1cm4gJycgK1xuXHRcdFx0Jzx0cj4nICtcblx0XHRcdFx0KHRoaXMuaXNSVEwgPyAnJyA6IHRoaXMucmVuZGVyQmdJbnRyb0h0bWwocm93KSkgK1xuXHRcdFx0XHR0aGlzLnJlbmRlckJnQ2VsbHNIdG1sKHJvdykgK1xuXHRcdFx0XHQodGhpcy5pc1JUTCA/IHRoaXMucmVuZGVyQmdJbnRyb0h0bWwocm93KSA6ICcnKSArXG5cdFx0XHQnPC90cj4nO1xuXHR9LFxuXG5cblx0cmVuZGVyQmdJbnRyb0h0bWw6IGZ1bmN0aW9uKHJvdykge1xuXHRcdHJldHVybiB0aGlzLnJlbmRlckludHJvSHRtbCgpOyAvLyBmYWxsIGJhY2sgdG8gZ2VuZXJpY1xuXHR9LFxuXG5cblx0cmVuZGVyQmdDZWxsc0h0bWw6IGZ1bmN0aW9uKHJvdykge1xuXHRcdHZhciBodG1scyA9IFtdO1xuXHRcdHZhciBjb2wsIGRhdGU7XG5cblx0XHRmb3IgKGNvbCA9IDA7IGNvbCA8IHRoaXMuY29sQ250OyBjb2wrKykge1xuXHRcdFx0ZGF0ZSA9IHRoaXMuZ2V0Q2VsbERhdGUocm93LCBjb2wpO1xuXHRcdFx0aHRtbHMucHVzaCh0aGlzLnJlbmRlckJnQ2VsbEh0bWwoZGF0ZSkpO1xuXHRcdH1cblxuXHRcdHJldHVybiBodG1scy5qb2luKCcnKTtcblx0fSxcblxuXG5cdHJlbmRlckJnQ2VsbEh0bWw6IGZ1bmN0aW9uKGRhdGUsIG90aGVyQXR0cnMpIHtcblx0XHR2YXIgdmlldyA9IHRoaXMudmlldztcblx0XHR2YXIgY2xhc3NlcyA9IHRoaXMuZ2V0RGF5Q2xhc3NlcyhkYXRlKTtcblxuXHRcdGNsYXNzZXMudW5zaGlmdCgnZmMtZGF5Jywgdmlldy53aWRnZXRDb250ZW50Q2xhc3MpO1xuXG5cdFx0cmV0dXJuICc8dGQgY2xhc3M9XCInICsgY2xhc3Nlcy5qb2luKCcgJykgKyAnXCInICtcblx0XHRcdCcgZGF0YS1kYXRlPVwiJyArIGRhdGUuZm9ybWF0KCdZWVlZLU1NLUREJykgKyAnXCInICsgLy8gaWYgZGF0ZSBoYXMgYSB0aW1lLCB3b24ndCBmb3JtYXQgaXRcblx0XHRcdChvdGhlckF0dHJzID9cblx0XHRcdFx0JyAnICsgb3RoZXJBdHRycyA6XG5cdFx0XHRcdCcnKSArXG5cdFx0XHQnPjwvdGQ+Jztcblx0fSxcblxuXG5cdC8qIEdlbmVyaWNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIEdlbmVyYXRlcyB0aGUgZGVmYXVsdCBIVE1MIGludHJvIGZvciBhbnkgcm93LiBVc2VyIGNsYXNzZXMgc2hvdWxkIG92ZXJyaWRlXG5cdHJlbmRlckludHJvSHRtbDogZnVuY3Rpb24oKSB7XG5cdH0sXG5cblxuXHQvLyBUT0RPOiBhIGdlbmVyaWMgbWV0aG9kIGZvciBkZWFsaW5nIHdpdGggPHRyPiwgUlRMLCBpbnRyb1xuXHQvLyB3aGVuIGluY3JlbWVudCBpbnRlcm5hbEFwaVZlcnNpb25cblx0Ly8gd3JhcFRyIChzY2hlZHVsZXIpXG5cblxuXHQvKiBVdGlsc1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gQXBwbGllcyB0aGUgZ2VuZXJpYyBcImludHJvXCIgYW5kIFwib3V0cm9cIiBIVE1MIHRvIHRoZSBnaXZlbiBjZWxscy5cblx0Ly8gSW50cm8gbWVhbnMgdGhlIGxlZnRtb3N0IGNlbGwgd2hlbiB0aGUgY2FsZW5kYXIgaXMgTFRSIGFuZCB0aGUgcmlnaHRtb3N0IGNlbGwgd2hlbiBSVEwuIFZpY2UtdmVyc2EgZm9yIG91dHJvLlxuXHRib29rZW5kQ2VsbHM6IGZ1bmN0aW9uKHRyRWwpIHtcblx0XHR2YXIgaW50cm9IdG1sID0gdGhpcy5yZW5kZXJJbnRyb0h0bWwoKTtcblxuXHRcdGlmIChpbnRyb0h0bWwpIHtcblx0XHRcdGlmICh0aGlzLmlzUlRMKSB7XG5cdFx0XHRcdHRyRWwuYXBwZW5kKGludHJvSHRtbCk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0dHJFbC5wcmVwZW5kKGludHJvSHRtbCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cbn07XG5cbjs7XG5cbi8qIEEgY29tcG9uZW50IHRoYXQgcmVuZGVycyBhIGdyaWQgb2Ygd2hvbGUtZGF5cyB0aGF0IHJ1bnMgaG9yaXpvbnRhbGx5LiBUaGVyZSBjYW4gYmUgbXVsdGlwbGUgcm93cywgb25lIHBlciB3ZWVrLlxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbnZhciBEYXlHcmlkID0gRkMuRGF5R3JpZCA9IEdyaWQuZXh0ZW5kKERheVRhYmxlTWl4aW4sIHtcblxuXHRudW1iZXJzVmlzaWJsZTogZmFsc2UsIC8vIHNob3VsZCByZW5kZXIgYSByb3cgZm9yIGRheS93ZWVrIG51bWJlcnM/IHNldCBieSBvdXRzaWRlIHZpZXcuIFRPRE86IG1ha2UgaW50ZXJuYWxcblx0Ym90dG9tQ29vcmRQYWRkaW5nOiAwLCAvLyBoYWNrIGZvciBleHRlbmRpbmcgdGhlIGhpdCBhcmVhIGZvciB0aGUgbGFzdCByb3cgb2YgdGhlIGNvb3JkaW5hdGUgZ3JpZFxuXG5cdHJvd0VsczogbnVsbCwgLy8gc2V0IG9mIGZha2Ugcm93IGVsZW1lbnRzXG5cdGNlbGxFbHM6IG51bGwsIC8vIHNldCBvZiB3aG9sZS1kYXkgZWxlbWVudHMgY29tcHJpc2luZyB0aGUgcm93J3MgYmFja2dyb3VuZFxuXHRoZWxwZXJFbHM6IG51bGwsIC8vIHNldCBvZiBjZWxsIHNrZWxldG9uIGVsZW1lbnRzIGZvciByZW5kZXJpbmcgdGhlIG1vY2sgZXZlbnQgXCJoZWxwZXJcIlxuXG5cdHJvd0Nvb3JkQ2FjaGU6IG51bGwsXG5cdGNvbENvb3JkQ2FjaGU6IG51bGwsXG5cblxuXHQvLyBSZW5kZXJzIHRoZSByb3dzIGFuZCBjb2x1bW5zIGludG8gdGhlIGNvbXBvbmVudCdzIGB0aGlzLmVsYCwgd2hpY2ggc2hvdWxkIGFscmVhZHkgYmUgYXNzaWduZWQuXG5cdC8vIGlzUmlnaWQgZGV0ZXJtaW5zIHdoZXRoZXIgdGhlIGluZGl2aWR1YWwgcm93cyBzaG91bGQgaWdub3JlIHRoZSBjb250ZW50cyBhbmQgYmUgYSBjb25zdGFudCBoZWlnaHQuXG5cdC8vIFJlbGllcyBvbiB0aGUgdmlldydzIGNvbENudCBhbmQgcm93Q250LiBJbiB0aGUgZnV0dXJlLCB0aGlzIGNvbXBvbmVudCBzaG91bGQgcHJvYmFibHkgYmUgc2VsZi1zdWZmaWNpZW50LlxuXHRyZW5kZXJEYXRlczogZnVuY3Rpb24oaXNSaWdpZCkge1xuXHRcdHZhciB2aWV3ID0gdGhpcy52aWV3O1xuXHRcdHZhciByb3dDbnQgPSB0aGlzLnJvd0NudDtcblx0XHR2YXIgY29sQ250ID0gdGhpcy5jb2xDbnQ7XG5cdFx0dmFyIGh0bWwgPSAnJztcblx0XHR2YXIgcm93O1xuXHRcdHZhciBjb2w7XG5cblx0XHRmb3IgKHJvdyA9IDA7IHJvdyA8IHJvd0NudDsgcm93KyspIHtcblx0XHRcdGh0bWwgKz0gdGhpcy5yZW5kZXJEYXlSb3dIdG1sKHJvdywgaXNSaWdpZCk7XG5cdFx0fVxuXHRcdHRoaXMuZWwuaHRtbChodG1sKTtcblxuXHRcdHRoaXMucm93RWxzID0gdGhpcy5lbC5maW5kKCcuZmMtcm93Jyk7XG5cdFx0dGhpcy5jZWxsRWxzID0gdGhpcy5lbC5maW5kKCcuZmMtZGF5Jyk7XG5cblx0XHR0aGlzLnJvd0Nvb3JkQ2FjaGUgPSBuZXcgQ29vcmRDYWNoZSh7XG5cdFx0XHRlbHM6IHRoaXMucm93RWxzLFxuXHRcdFx0aXNWZXJ0aWNhbDogdHJ1ZVxuXHRcdH0pO1xuXHRcdHRoaXMuY29sQ29vcmRDYWNoZSA9IG5ldyBDb29yZENhY2hlKHtcblx0XHRcdGVsczogdGhpcy5jZWxsRWxzLnNsaWNlKDAsIHRoaXMuY29sQ250KSwgLy8gb25seSB0aGUgZmlyc3Qgcm93XG5cdFx0XHRpc0hvcml6b250YWw6IHRydWVcblx0XHR9KTtcblxuXHRcdC8vIHRyaWdnZXIgZGF5UmVuZGVyIHdpdGggZWFjaCBjZWxsJ3MgZWxlbWVudFxuXHRcdGZvciAocm93ID0gMDsgcm93IDwgcm93Q250OyByb3crKykge1xuXHRcdFx0Zm9yIChjb2wgPSAwOyBjb2wgPCBjb2xDbnQ7IGNvbCsrKSB7XG5cdFx0XHRcdHZpZXcucHVibGljbHlUcmlnZ2VyKFxuXHRcdFx0XHRcdCdkYXlSZW5kZXInLFxuXHRcdFx0XHRcdG51bGwsXG5cdFx0XHRcdFx0dGhpcy5nZXRDZWxsRGF0ZShyb3csIGNvbCksXG5cdFx0XHRcdFx0dGhpcy5nZXRDZWxsRWwocm93LCBjb2wpXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cblx0dW5yZW5kZXJEYXRlczogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5yZW1vdmVTZWdQb3BvdmVyKCk7XG5cdH0sXG5cblxuXHRyZW5kZXJCdXNpbmVzc0hvdXJzOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgc2VncyA9IHRoaXMuYnVpbGRCdXNpbmVzc0hvdXJTZWdzKHRydWUpOyAvLyB3aG9sZURheT10cnVlXG5cdFx0dGhpcy5yZW5kZXJGaWxsKCdidXNpbmVzc0hvdXJzJywgc2VncywgJ2JnZXZlbnQnKTtcblx0fSxcblxuXG5cdHVucmVuZGVyQnVzaW5lc3NIb3VyczogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy51bnJlbmRlckZpbGwoJ2J1c2luZXNzSG91cnMnKTtcblx0fSxcblxuXG5cdC8vIEdlbmVyYXRlcyB0aGUgSFRNTCBmb3IgYSBzaW5nbGUgcm93LCB3aGljaCBpcyBhIGRpdiB0aGF0IHdyYXBzIGEgdGFibGUuXG5cdC8vIGByb3dgIGlzIHRoZSByb3cgbnVtYmVyLlxuXHRyZW5kZXJEYXlSb3dIdG1sOiBmdW5jdGlvbihyb3csIGlzUmlnaWQpIHtcblx0XHR2YXIgdmlldyA9IHRoaXMudmlldztcblx0XHR2YXIgY2xhc3NlcyA9IFsgJ2ZjLXJvdycsICdmYy13ZWVrJywgdmlldy53aWRnZXRDb250ZW50Q2xhc3MgXTtcblxuXHRcdGlmIChpc1JpZ2lkKSB7XG5cdFx0XHRjbGFzc2VzLnB1c2goJ2ZjLXJpZ2lkJyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuICcnICtcblx0XHRcdCc8ZGl2IGNsYXNzPVwiJyArIGNsYXNzZXMuam9pbignICcpICsgJ1wiPicgK1xuXHRcdFx0XHQnPGRpdiBjbGFzcz1cImZjLWJnXCI+JyArXG5cdFx0XHRcdFx0Jzx0YWJsZT4nICtcblx0XHRcdFx0XHRcdHRoaXMucmVuZGVyQmdUckh0bWwocm93KSArXG5cdFx0XHRcdFx0JzwvdGFibGU+JyArXG5cdFx0XHRcdCc8L2Rpdj4nICtcblx0XHRcdFx0JzxkaXYgY2xhc3M9XCJmYy1jb250ZW50LXNrZWxldG9uXCI+JyArXG5cdFx0XHRcdFx0Jzx0YWJsZT4nICtcblx0XHRcdFx0XHRcdCh0aGlzLm51bWJlcnNWaXNpYmxlID9cblx0XHRcdFx0XHRcdFx0Jzx0aGVhZD4nICtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlck51bWJlclRySHRtbChyb3cpICtcblx0XHRcdFx0XHRcdFx0JzwvdGhlYWQ+JyA6XG5cdFx0XHRcdFx0XHRcdCcnXG5cdFx0XHRcdFx0XHRcdCkgK1xuXHRcdFx0XHRcdCc8L3RhYmxlPicgK1xuXHRcdFx0XHQnPC9kaXY+JyArXG5cdFx0XHQnPC9kaXY+Jztcblx0fSxcblxuXG5cdC8qIEdyaWQgTnVtYmVyIFJlbmRlcmluZ1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0cmVuZGVyTnVtYmVyVHJIdG1sOiBmdW5jdGlvbihyb3cpIHtcblx0XHRyZXR1cm4gJycgK1xuXHRcdFx0Jzx0cj4nICtcblx0XHRcdFx0KHRoaXMuaXNSVEwgPyAnJyA6IHRoaXMucmVuZGVyTnVtYmVySW50cm9IdG1sKHJvdykpICtcblx0XHRcdFx0dGhpcy5yZW5kZXJOdW1iZXJDZWxsc0h0bWwocm93KSArXG5cdFx0XHRcdCh0aGlzLmlzUlRMID8gdGhpcy5yZW5kZXJOdW1iZXJJbnRyb0h0bWwocm93KSA6ICcnKSArXG5cdFx0XHQnPC90cj4nO1xuXHR9LFxuXG5cblx0cmVuZGVyTnVtYmVySW50cm9IdG1sOiBmdW5jdGlvbihyb3cpIHtcblx0XHRyZXR1cm4gdGhpcy5yZW5kZXJJbnRyb0h0bWwoKTtcblx0fSxcblxuXG5cdHJlbmRlck51bWJlckNlbGxzSHRtbDogZnVuY3Rpb24ocm93KSB7XG5cdFx0dmFyIGh0bWxzID0gW107XG5cdFx0dmFyIGNvbCwgZGF0ZTtcblxuXHRcdGZvciAoY29sID0gMDsgY29sIDwgdGhpcy5jb2xDbnQ7IGNvbCsrKSB7XG5cdFx0XHRkYXRlID0gdGhpcy5nZXRDZWxsRGF0ZShyb3csIGNvbCk7XG5cdFx0XHRodG1scy5wdXNoKHRoaXMucmVuZGVyTnVtYmVyQ2VsbEh0bWwoZGF0ZSkpO1xuXHRcdH1cblxuXHRcdHJldHVybiBodG1scy5qb2luKCcnKTtcblx0fSxcblxuXG5cdC8vIEdlbmVyYXRlcyB0aGUgSFRNTCBmb3IgdGhlIDx0ZD5zIG9mIHRoZSBcIm51bWJlclwiIHJvdyBpbiB0aGUgRGF5R3JpZCdzIGNvbnRlbnQgc2tlbGV0b24uXG5cdC8vIFRoZSBudW1iZXIgcm93IHdpbGwgb25seSBleGlzdCBpZiBlaXRoZXIgZGF5IG51bWJlcnMgb3Igd2VlayBudW1iZXJzIGFyZSB0dXJuZWQgb24uXG5cdHJlbmRlck51bWJlckNlbGxIdG1sOiBmdW5jdGlvbihkYXRlKSB7XG5cdFx0dmFyIGh0bWwgPSAnJztcblx0XHR2YXIgY2xhc3Nlcztcblx0XHR2YXIgd2Vla0NhbGNGaXJzdERvVztcblxuXHRcdGlmICghdGhpcy52aWV3LmRheU51bWJlcnNWaXNpYmxlICYmICF0aGlzLnZpZXcuY2VsbFdlZWtOdW1iZXJzVmlzaWJsZSkge1xuXHRcdFx0Ly8gbm8gbnVtYmVycyBpbiBkYXkgY2VsbCAod2VlayBudW1iZXIgbXVzdCBiZSBhbG9uZyB0aGUgc2lkZSlcblx0XHRcdHJldHVybiAnPHRkLz4nOyAvLyAgd2lsbCBjcmVhdGUgYW4gZW1wdHkgc3BhY2UgYWJvdmUgZXZlbnRzIDooXG5cdFx0fVxuXG5cdFx0Y2xhc3NlcyA9IHRoaXMuZ2V0RGF5Q2xhc3NlcyhkYXRlKTtcblx0XHRjbGFzc2VzLnVuc2hpZnQoJ2ZjLWRheS10b3AnKTtcblxuXHRcdGlmICh0aGlzLnZpZXcuY2VsbFdlZWtOdW1iZXJzVmlzaWJsZSkge1xuXHRcdFx0Ly8gVG8gZGV0ZXJtaW5lIHRoZSBkYXkgb2Ygd2VlayBudW1iZXIgY2hhbmdlIHVuZGVyIElTTywgd2UgY2Fubm90XG5cdFx0XHQvLyByZWx5IG9uIG1vbWVudC5qcyBtZXRob2RzIHN1Y2ggYXMgZmlyc3REYXlPZldlZWsoKSBvciB3ZWVrZGF5KCksXG5cdFx0XHQvLyBiZWNhdXNlIHRoZXkgcmVseSBvbiB0aGUgbG9jYWxlJ3MgZG93IChwb3NzaWJseSBvdmVycmlkZGVuIGJ5XG5cdFx0XHQvLyBvdXIgZmlyc3REYXkgb3B0aW9uKSwgd2hpY2ggbWF5IG5vdCBiZSBNb25kYXkuIFdlIGNhbm5vdCBjaGFuZ2Vcblx0XHRcdC8vIGRvdywgYmVjYXVzZSB0aGF0IHdvdWxkIGFmZmVjdCB0aGUgY2FsZW5kYXIgc3RhcnQgZGF5IGFzIHdlbGwuXG5cdFx0XHRpZiAoZGF0ZS5fbG9jYWxlLl9mdWxsQ2FsZW5kYXJfd2Vla0NhbGMgPT09ICdJU08nKSB7XG5cdFx0XHRcdHdlZWtDYWxjRmlyc3REb1cgPSAxOyAgLy8gTW9uZGF5IGJ5IElTTyA4NjAxIGRlZmluaXRpb25cblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHR3ZWVrQ2FsY0ZpcnN0RG9XID0gZGF0ZS5fbG9jYWxlLmZpcnN0RGF5T2ZXZWVrKCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aHRtbCArPSAnPHRkIGNsYXNzPVwiJyArIGNsYXNzZXMuam9pbignICcpICsgJ1wiIGRhdGEtZGF0ZT1cIicgKyBkYXRlLmZvcm1hdCgpICsgJ1wiPic7XG5cblx0XHRpZiAodGhpcy52aWV3LmNlbGxXZWVrTnVtYmVyc1Zpc2libGUgJiYgKGRhdGUuZGF5KCkgPT0gd2Vla0NhbGNGaXJzdERvVykpIHtcblx0XHRcdGh0bWwgKz0gdGhpcy52aWV3LmJ1aWxkR290b0FuY2hvckh0bWwoXG5cdFx0XHRcdHsgZGF0ZTogZGF0ZSwgdHlwZTogJ3dlZWsnIH0sXG5cdFx0XHRcdHsgJ2NsYXNzJzogJ2ZjLXdlZWstbnVtYmVyJyB9LFxuXHRcdFx0XHRkYXRlLmZvcm1hdCgndycpIC8vIGlubmVyIEhUTUxcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMudmlldy5kYXlOdW1iZXJzVmlzaWJsZSkge1xuXHRcdFx0aHRtbCArPSB0aGlzLnZpZXcuYnVpbGRHb3RvQW5jaG9ySHRtbChcblx0XHRcdFx0ZGF0ZSxcblx0XHRcdFx0eyAnY2xhc3MnOiAnZmMtZGF5LW51bWJlcicgfSxcblx0XHRcdFx0ZGF0ZS5kYXRlKCkgLy8gaW5uZXIgSFRNTFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRodG1sICs9ICc8L3RkPic7XG5cblx0XHRyZXR1cm4gaHRtbDtcblx0fSxcblxuXG5cdC8qIE9wdGlvbnNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIENvbXB1dGVzIGEgZGVmYXVsdCBldmVudCB0aW1lIGZvcm1hdHRpbmcgc3RyaW5nIGlmIGB0aW1lRm9ybWF0YCBpcyBub3QgZXhwbGljaXRseSBkZWZpbmVkXG5cdGNvbXB1dGVFdmVudFRpbWVGb3JtYXQ6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLnZpZXcub3B0KCdleHRyYVNtYWxsVGltZUZvcm1hdCcpOyAvLyBsaWtlIFwiNnBcIiBvciBcIjY6MzBwXCJcblx0fSxcblxuXG5cdC8vIENvbXB1dGVzIGEgZGVmYXVsdCBgZGlzcGxheUV2ZW50RW5kYCB2YWx1ZSBpZiBvbmUgaXMgbm90IGV4cGxpY2x0eSBkZWZpbmVkXG5cdGNvbXB1dGVEaXNwbGF5RXZlbnRFbmQ6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmNvbENudCA9PSAxOyAvLyB3ZSdsbCBsaWtlbHkgaGF2ZSBzcGFjZSBpZiB0aGVyZSdzIG9ubHkgb25lIGRheVxuXHR9LFxuXG5cblx0LyogRGF0ZXNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdHJhbmdlVXBkYXRlZDogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy51cGRhdGVEYXlUYWJsZSgpO1xuXHR9LFxuXG5cblx0Ly8gU2xpY2VzIHVwIHRoZSBnaXZlbiBzcGFuICh1bnpvbmVkIHN0YXJ0L2VuZCB3aXRoIG90aGVyIG1pc2MgZGF0YSkgaW50byBhbiBhcnJheSBvZiBzZWdtZW50c1xuXHRzcGFuVG9TZWdzOiBmdW5jdGlvbihzcGFuKSB7XG5cdFx0dmFyIHNlZ3MgPSB0aGlzLnNsaWNlUmFuZ2VCeVJvdyhzcGFuKTtcblx0XHR2YXIgaSwgc2VnO1xuXG5cdFx0Zm9yIChpID0gMDsgaSA8IHNlZ3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdHNlZyA9IHNlZ3NbaV07XG5cdFx0XHRpZiAodGhpcy5pc1JUTCkge1xuXHRcdFx0XHRzZWcubGVmdENvbCA9IHRoaXMuZGF5c1BlclJvdyAtIDEgLSBzZWcubGFzdFJvd0RheUluZGV4O1xuXHRcdFx0XHRzZWcucmlnaHRDb2wgPSB0aGlzLmRheXNQZXJSb3cgLSAxIC0gc2VnLmZpcnN0Um93RGF5SW5kZXg7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0c2VnLmxlZnRDb2wgPSBzZWcuZmlyc3RSb3dEYXlJbmRleDtcblx0XHRcdFx0c2VnLnJpZ2h0Q29sID0gc2VnLmxhc3RSb3dEYXlJbmRleDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gc2Vncztcblx0fSxcblxuXG5cdC8qIEhpdCBTeXN0ZW1cblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdHByZXBhcmVIaXRzOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLmNvbENvb3JkQ2FjaGUuYnVpbGQoKTtcblx0XHR0aGlzLnJvd0Nvb3JkQ2FjaGUuYnVpbGQoKTtcblx0XHR0aGlzLnJvd0Nvb3JkQ2FjaGUuYm90dG9tc1t0aGlzLnJvd0NudCAtIDFdICs9IHRoaXMuYm90dG9tQ29vcmRQYWRkaW5nOyAvLyBoYWNrXG5cdH0sXG5cblxuXHRyZWxlYXNlSGl0czogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5jb2xDb29yZENhY2hlLmNsZWFyKCk7XG5cdFx0dGhpcy5yb3dDb29yZENhY2hlLmNsZWFyKCk7XG5cdH0sXG5cblxuXHRxdWVyeUhpdDogZnVuY3Rpb24obGVmdE9mZnNldCwgdG9wT2Zmc2V0KSB7XG5cdFx0aWYgKHRoaXMuY29sQ29vcmRDYWNoZS5pc0xlZnRJbkJvdW5kcyhsZWZ0T2Zmc2V0KSAmJiB0aGlzLnJvd0Nvb3JkQ2FjaGUuaXNUb3BJbkJvdW5kcyh0b3BPZmZzZXQpKSB7XG5cdFx0XHR2YXIgY29sID0gdGhpcy5jb2xDb29yZENhY2hlLmdldEhvcml6b250YWxJbmRleChsZWZ0T2Zmc2V0KTtcblx0XHRcdHZhciByb3cgPSB0aGlzLnJvd0Nvb3JkQ2FjaGUuZ2V0VmVydGljYWxJbmRleCh0b3BPZmZzZXQpO1xuXG5cdFx0XHRpZiAocm93ICE9IG51bGwgJiYgY29sICE9IG51bGwpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuZ2V0Q2VsbEhpdChyb3csIGNvbCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cblx0Z2V0SGl0U3BhbjogZnVuY3Rpb24oaGl0KSB7XG5cdFx0cmV0dXJuIHRoaXMuZ2V0Q2VsbFJhbmdlKGhpdC5yb3csIGhpdC5jb2wpO1xuXHR9LFxuXG5cblx0Z2V0SGl0RWw6IGZ1bmN0aW9uKGhpdCkge1xuXHRcdHJldHVybiB0aGlzLmdldENlbGxFbChoaXQucm93LCBoaXQuY29sKTtcblx0fSxcblxuXG5cdC8qIENlbGwgU3lzdGVtXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdC8vIEZZSTogdGhlIGZpcnN0IGNvbHVtbiBpcyB0aGUgbGVmdG1vc3QgY29sdW1uLCByZWdhcmRsZXNzIG9mIGRhdGVcblxuXG5cdGdldENlbGxIaXQ6IGZ1bmN0aW9uKHJvdywgY29sKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHJvdzogcm93LFxuXHRcdFx0Y29sOiBjb2wsXG5cdFx0XHRjb21wb25lbnQ6IHRoaXMsIC8vIG5lZWRlZCB1bmZvcnR1bmF0ZWx5IDooXG5cdFx0XHRsZWZ0OiB0aGlzLmNvbENvb3JkQ2FjaGUuZ2V0TGVmdE9mZnNldChjb2wpLFxuXHRcdFx0cmlnaHQ6IHRoaXMuY29sQ29vcmRDYWNoZS5nZXRSaWdodE9mZnNldChjb2wpLFxuXHRcdFx0dG9wOiB0aGlzLnJvd0Nvb3JkQ2FjaGUuZ2V0VG9wT2Zmc2V0KHJvdyksXG5cdFx0XHRib3R0b206IHRoaXMucm93Q29vcmRDYWNoZS5nZXRCb3R0b21PZmZzZXQocm93KVxuXHRcdH07XG5cdH0sXG5cblxuXHRnZXRDZWxsRWw6IGZ1bmN0aW9uKHJvdywgY29sKSB7XG5cdFx0cmV0dXJuIHRoaXMuY2VsbEVscy5lcShyb3cgKiB0aGlzLmNvbENudCArIGNvbCk7XG5cdH0sXG5cblxuXHQvKiBFdmVudCBEcmFnIFZpc3VhbGl6YXRpb25cblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0Ly8gVE9ETzogbW92ZSB0byBEYXlHcmlkLmV2ZW50LCBzaW1pbGFyIHRvIHdoYXQgd2UgZGlkIHdpdGggR3JpZCdzIGRyYWcgbWV0aG9kc1xuXG5cblx0Ly8gUmVuZGVycyBhIHZpc3VhbCBpbmRpY2F0aW9uIG9mIGFuIGV2ZW50IG9yIGV4dGVybmFsIGVsZW1lbnQgYmVpbmcgZHJhZ2dlZC5cblx0Ly8gYGV2ZW50TG9jYXRpb25gIGhhcyB6b25lZCBzdGFydCBhbmQgZW5kIChvcHRpb25hbClcblx0cmVuZGVyRHJhZzogZnVuY3Rpb24oZXZlbnRMb2NhdGlvbiwgc2VnKSB7XG5cblx0XHQvLyBhbHdheXMgcmVuZGVyIGEgaGlnaGxpZ2h0IHVuZGVybmVhdGhcblx0XHR0aGlzLnJlbmRlckhpZ2hsaWdodCh0aGlzLmV2ZW50VG9TcGFuKGV2ZW50TG9jYXRpb24pKTtcblxuXHRcdC8vIGlmIGEgc2VnbWVudCBmcm9tIHRoZSBzYW1lIGNhbGVuZGFyIGJ1dCBhbm90aGVyIGNvbXBvbmVudCBpcyBiZWluZyBkcmFnZ2VkLCByZW5kZXIgYSBoZWxwZXIgZXZlbnRcblx0XHRpZiAoc2VnICYmIHNlZy5jb21wb25lbnQgIT09IHRoaXMpIHtcblx0XHRcdHJldHVybiB0aGlzLnJlbmRlckV2ZW50TG9jYXRpb25IZWxwZXIoZXZlbnRMb2NhdGlvbiwgc2VnKTsgLy8gcmV0dXJucyBtb2NrIGV2ZW50IGVsZW1lbnRzXG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gVW5yZW5kZXJzIGFueSB2aXN1YWwgaW5kaWNhdGlvbiBvZiBhIGhvdmVyaW5nIGV2ZW50XG5cdHVucmVuZGVyRHJhZzogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy51bnJlbmRlckhpZ2hsaWdodCgpO1xuXHRcdHRoaXMudW5yZW5kZXJIZWxwZXIoKTtcblx0fSxcblxuXG5cdC8qIEV2ZW50IFJlc2l6ZSBWaXN1YWxpemF0aW9uXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBSZW5kZXJzIGEgdmlzdWFsIGluZGljYXRpb24gb2YgYW4gZXZlbnQgYmVpbmcgcmVzaXplZFxuXHRyZW5kZXJFdmVudFJlc2l6ZTogZnVuY3Rpb24oZXZlbnRMb2NhdGlvbiwgc2VnKSB7XG5cdFx0dGhpcy5yZW5kZXJIaWdobGlnaHQodGhpcy5ldmVudFRvU3BhbihldmVudExvY2F0aW9uKSk7XG5cdFx0cmV0dXJuIHRoaXMucmVuZGVyRXZlbnRMb2NhdGlvbkhlbHBlcihldmVudExvY2F0aW9uLCBzZWcpOyAvLyByZXR1cm5zIG1vY2sgZXZlbnQgZWxlbWVudHNcblx0fSxcblxuXG5cdC8vIFVucmVuZGVycyBhIHZpc3VhbCBpbmRpY2F0aW9uIG9mIGFuIGV2ZW50IGJlaW5nIHJlc2l6ZWRcblx0dW5yZW5kZXJFdmVudFJlc2l6ZTogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy51bnJlbmRlckhpZ2hsaWdodCgpO1xuXHRcdHRoaXMudW5yZW5kZXJIZWxwZXIoKTtcblx0fSxcblxuXG5cdC8qIEV2ZW50IEhlbHBlclxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gUmVuZGVycyBhIG1vY2sgXCJoZWxwZXJcIiBldmVudC4gYHNvdXJjZVNlZ2AgaXMgdGhlIGFzc29jaWF0ZWQgaW50ZXJuYWwgc2VnbWVudCBvYmplY3QuIEl0IGNhbiBiZSBudWxsLlxuXHRyZW5kZXJIZWxwZXI6IGZ1bmN0aW9uKGV2ZW50LCBzb3VyY2VTZWcpIHtcblx0XHR2YXIgaGVscGVyTm9kZXMgPSBbXTtcblx0XHR2YXIgc2VncyA9IHRoaXMuZXZlbnRUb1NlZ3MoZXZlbnQpO1xuXHRcdHZhciByb3dTdHJ1Y3RzO1xuXG5cdFx0c2VncyA9IHRoaXMucmVuZGVyRmdTZWdFbHMoc2Vncyk7IC8vIGFzc2lnbnMgZWFjaCBzZWcncyBlbCBhbmQgcmV0dXJucyBhIHN1YnNldCBvZiBzZWdzIHRoYXQgd2VyZSByZW5kZXJlZFxuXHRcdHJvd1N0cnVjdHMgPSB0aGlzLnJlbmRlclNlZ1Jvd3Moc2Vncyk7XG5cblx0XHQvLyBpbmplY3QgZWFjaCBuZXcgZXZlbnQgc2tlbGV0b24gaW50byBlYWNoIGFzc29jaWF0ZWQgcm93XG5cdFx0dGhpcy5yb3dFbHMuZWFjaChmdW5jdGlvbihyb3csIHJvd05vZGUpIHtcblx0XHRcdHZhciByb3dFbCA9ICQocm93Tm9kZSk7IC8vIHRoZSAuZmMtcm93XG5cdFx0XHR2YXIgc2tlbGV0b25FbCA9ICQoJzxkaXYgY2xhc3M9XCJmYy1oZWxwZXItc2tlbGV0b25cIj48dGFibGUvPjwvZGl2PicpOyAvLyB3aWxsIGJlIGFic29sdXRlbHkgcG9zaXRpb25lZFxuXHRcdFx0dmFyIHNrZWxldG9uVG9wO1xuXG5cdFx0XHQvLyBJZiB0aGVyZSBpcyBhbiBvcmlnaW5hbCBzZWdtZW50LCBtYXRjaCB0aGUgdG9wIHBvc2l0aW9uLiBPdGhlcndpc2UsIHB1dCBpdCBhdCB0aGUgcm93J3MgdG9wIGxldmVsXG5cdFx0XHRpZiAoc291cmNlU2VnICYmIHNvdXJjZVNlZy5yb3cgPT09IHJvdykge1xuXHRcdFx0XHRza2VsZXRvblRvcCA9IHNvdXJjZVNlZy5lbC5wb3NpdGlvbigpLnRvcDtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRza2VsZXRvblRvcCA9IHJvd0VsLmZpbmQoJy5mYy1jb250ZW50LXNrZWxldG9uIHRib2R5JykucG9zaXRpb24oKS50b3A7XG5cdFx0XHR9XG5cblx0XHRcdHNrZWxldG9uRWwuY3NzKCd0b3AnLCBza2VsZXRvblRvcClcblx0XHRcdFx0LmZpbmQoJ3RhYmxlJylcblx0XHRcdFx0XHQuYXBwZW5kKHJvd1N0cnVjdHNbcm93XS50Ym9keUVsKTtcblxuXHRcdFx0cm93RWwuYXBwZW5kKHNrZWxldG9uRWwpO1xuXHRcdFx0aGVscGVyTm9kZXMucHVzaChza2VsZXRvbkVsWzBdKTtcblx0XHR9KTtcblxuXHRcdHJldHVybiAoIC8vIG11c3QgcmV0dXJuIHRoZSBlbGVtZW50cyByZW5kZXJlZFxuXHRcdFx0dGhpcy5oZWxwZXJFbHMgPSAkKGhlbHBlck5vZGVzKSAvLyBhcnJheSAtPiBqUXVlcnkgc2V0XG5cdFx0KTtcblx0fSxcblxuXG5cdC8vIFVucmVuZGVycyBhbnkgdmlzdWFsIGluZGljYXRpb24gb2YgYSBtb2NrIGhlbHBlciBldmVudFxuXHR1bnJlbmRlckhlbHBlcjogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHRoaXMuaGVscGVyRWxzKSB7XG5cdFx0XHR0aGlzLmhlbHBlckVscy5yZW1vdmUoKTtcblx0XHRcdHRoaXMuaGVscGVyRWxzID0gbnVsbDtcblx0XHR9XG5cdH0sXG5cblxuXHQvKiBGaWxsIFN5c3RlbSAoaGlnaGxpZ2h0LCBiYWNrZ3JvdW5kIGV2ZW50cywgYnVzaW5lc3MgaG91cnMpXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHRmaWxsU2VnVGFnOiAndGQnLCAvLyBvdmVycmlkZSB0aGUgZGVmYXVsdCB0YWcgbmFtZVxuXG5cblx0Ly8gUmVuZGVycyBhIHNldCBvZiByZWN0YW5nbGVzIG92ZXIgdGhlIGdpdmVuIHNlZ21lbnRzIG9mIGRheXMuXG5cdC8vIE9ubHkgcmV0dXJucyBzZWdtZW50cyB0aGF0IHN1Y2Nlc3NmdWxseSByZW5kZXJlZC5cblx0cmVuZGVyRmlsbDogZnVuY3Rpb24odHlwZSwgc2VncywgY2xhc3NOYW1lKSB7XG5cdFx0dmFyIG5vZGVzID0gW107XG5cdFx0dmFyIGksIHNlZztcblx0XHR2YXIgc2tlbGV0b25FbDtcblxuXHRcdHNlZ3MgPSB0aGlzLnJlbmRlckZpbGxTZWdFbHModHlwZSwgc2Vncyk7IC8vIGFzc2lnbmVzIGAuZWxgIHRvIGVhY2ggc2VnLiByZXR1cm5zIHN1Y2Nlc3NmdWxseSByZW5kZXJlZCBzZWdzXG5cblx0XHRmb3IgKGkgPSAwOyBpIDwgc2Vncy5sZW5ndGg7IGkrKykge1xuXHRcdFx0c2VnID0gc2Vnc1tpXTtcblx0XHRcdHNrZWxldG9uRWwgPSB0aGlzLnJlbmRlckZpbGxSb3codHlwZSwgc2VnLCBjbGFzc05hbWUpO1xuXHRcdFx0dGhpcy5yb3dFbHMuZXEoc2VnLnJvdykuYXBwZW5kKHNrZWxldG9uRWwpO1xuXHRcdFx0bm9kZXMucHVzaChza2VsZXRvbkVsWzBdKTtcblx0XHR9XG5cblx0XHR0aGlzLmVsc0J5RmlsbFt0eXBlXSA9ICQobm9kZXMpO1xuXG5cdFx0cmV0dXJuIHNlZ3M7XG5cdH0sXG5cblxuXHQvLyBHZW5lcmF0ZXMgdGhlIEhUTUwgbmVlZGVkIGZvciBvbmUgcm93IG9mIGEgZmlsbC4gUmVxdWlyZXMgdGhlIHNlZydzIGVsIHRvIGJlIHJlbmRlcmVkLlxuXHRyZW5kZXJGaWxsUm93OiBmdW5jdGlvbih0eXBlLCBzZWcsIGNsYXNzTmFtZSkge1xuXHRcdHZhciBjb2xDbnQgPSB0aGlzLmNvbENudDtcblx0XHR2YXIgc3RhcnRDb2wgPSBzZWcubGVmdENvbDtcblx0XHR2YXIgZW5kQ29sID0gc2VnLnJpZ2h0Q29sICsgMTtcblx0XHR2YXIgc2tlbGV0b25FbDtcblx0XHR2YXIgdHJFbDtcblxuXHRcdGNsYXNzTmFtZSA9IGNsYXNzTmFtZSB8fCB0eXBlLnRvTG93ZXJDYXNlKCk7XG5cblx0XHRza2VsZXRvbkVsID0gJChcblx0XHRcdCc8ZGl2IGNsYXNzPVwiZmMtJyArIGNsYXNzTmFtZSArICctc2tlbGV0b25cIj4nICtcblx0XHRcdFx0Jzx0YWJsZT48dHIvPjwvdGFibGU+JyArXG5cdFx0XHQnPC9kaXY+J1xuXHRcdCk7XG5cdFx0dHJFbCA9IHNrZWxldG9uRWwuZmluZCgndHInKTtcblxuXHRcdGlmIChzdGFydENvbCA+IDApIHtcblx0XHRcdHRyRWwuYXBwZW5kKCc8dGQgY29sc3Bhbj1cIicgKyBzdGFydENvbCArICdcIi8+Jyk7XG5cdFx0fVxuXG5cdFx0dHJFbC5hcHBlbmQoXG5cdFx0XHRzZWcuZWwuYXR0cignY29sc3BhbicsIGVuZENvbCAtIHN0YXJ0Q29sKVxuXHRcdCk7XG5cblx0XHRpZiAoZW5kQ29sIDwgY29sQ250KSB7XG5cdFx0XHR0ckVsLmFwcGVuZCgnPHRkIGNvbHNwYW49XCInICsgKGNvbENudCAtIGVuZENvbCkgKyAnXCIvPicpO1xuXHRcdH1cblxuXHRcdHRoaXMuYm9va2VuZENlbGxzKHRyRWwpO1xuXG5cdFx0cmV0dXJuIHNrZWxldG9uRWw7XG5cdH1cblxufSk7XG5cbjs7XG5cbi8qIEV2ZW50LXJlbmRlcmluZyBtZXRob2RzIGZvciB0aGUgRGF5R3JpZCBjbGFzc1xuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbkRheUdyaWQubWl4aW4oe1xuXG5cdHJvd1N0cnVjdHM6IG51bGwsIC8vIGFuIGFycmF5IG9mIG9iamVjdHMsIGVhY2ggaG9sZGluZyBpbmZvcm1hdGlvbiBhYm91dCBhIHJvdydzIGZvcmVncm91bmQgZXZlbnQtcmVuZGVyaW5nXG5cblxuXHQvLyBVbnJlbmRlcnMgYWxsIGV2ZW50cyBjdXJyZW50bHkgcmVuZGVyZWQgb24gdGhlIGdyaWRcblx0dW5yZW5kZXJFdmVudHM6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMucmVtb3ZlU2VnUG9wb3ZlcigpOyAvLyByZW1vdmVzIHRoZSBcIm1vcmUuLlwiIGV2ZW50cyBwb3BvdmVyXG5cdFx0R3JpZC5wcm90b3R5cGUudW5yZW5kZXJFdmVudHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgLy8gY2FsbHMgdGhlIHN1cGVyLW1ldGhvZFxuXHR9LFxuXG5cblx0Ly8gUmV0cmlldmVzIGFsbCByZW5kZXJlZCBzZWdtZW50IG9iamVjdHMgY3VycmVudGx5IHJlbmRlcmVkIG9uIHRoZSBncmlkXG5cdGdldEV2ZW50U2VnczogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIEdyaWQucHJvdG90eXBlLmdldEV2ZW50U2Vncy5jYWxsKHRoaXMpIC8vIGdldCB0aGUgc2VnbWVudHMgZnJvbSB0aGUgc3VwZXItbWV0aG9kXG5cdFx0XHQuY29uY2F0KHRoaXMucG9wb3ZlclNlZ3MgfHwgW10pOyAvLyBhcHBlbmQgdGhlIHNlZ21lbnRzIGZyb20gdGhlIFwibW9yZS4uLlwiIHBvcG92ZXJcblx0fSxcblxuXG5cdC8vIFJlbmRlcnMgdGhlIGdpdmVuIGJhY2tncm91bmQgZXZlbnQgc2VnbWVudHMgb250byB0aGUgZ3JpZFxuXHRyZW5kZXJCZ1NlZ3M6IGZ1bmN0aW9uKHNlZ3MpIHtcblxuXHRcdC8vIGRvbid0IHJlbmRlciB0aW1lZCBiYWNrZ3JvdW5kIGV2ZW50c1xuXHRcdHZhciBhbGxEYXlTZWdzID0gJC5ncmVwKHNlZ3MsIGZ1bmN0aW9uKHNlZykge1xuXHRcdFx0cmV0dXJuIHNlZy5ldmVudC5hbGxEYXk7XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gR3JpZC5wcm90b3R5cGUucmVuZGVyQmdTZWdzLmNhbGwodGhpcywgYWxsRGF5U2Vncyk7IC8vIGNhbGwgdGhlIHN1cGVyLW1ldGhvZFxuXHR9LFxuXG5cblx0Ly8gUmVuZGVycyB0aGUgZ2l2ZW4gZm9yZWdyb3VuZCBldmVudCBzZWdtZW50cyBvbnRvIHRoZSBncmlkXG5cdHJlbmRlckZnU2VnczogZnVuY3Rpb24oc2Vncykge1xuXHRcdHZhciByb3dTdHJ1Y3RzO1xuXG5cdFx0Ly8gcmVuZGVyIGFuIGAuZWxgIG9uIGVhY2ggc2VnXG5cdFx0Ly8gcmV0dXJucyBhIHN1YnNldCBvZiB0aGUgc2Vncy4gc2VncyB0aGF0IHdlcmUgYWN0dWFsbHkgcmVuZGVyZWRcblx0XHRzZWdzID0gdGhpcy5yZW5kZXJGZ1NlZ0VscyhzZWdzKTtcblxuXHRcdHJvd1N0cnVjdHMgPSB0aGlzLnJvd1N0cnVjdHMgPSB0aGlzLnJlbmRlclNlZ1Jvd3Moc2Vncyk7XG5cblx0XHQvLyBhcHBlbmQgdG8gZWFjaCByb3cncyBjb250ZW50IHNrZWxldG9uXG5cdFx0dGhpcy5yb3dFbHMuZWFjaChmdW5jdGlvbihpLCByb3dOb2RlKSB7XG5cdFx0XHQkKHJvd05vZGUpLmZpbmQoJy5mYy1jb250ZW50LXNrZWxldG9uID4gdGFibGUnKS5hcHBlbmQoXG5cdFx0XHRcdHJvd1N0cnVjdHNbaV0udGJvZHlFbFxuXHRcdFx0KTtcblx0XHR9KTtcblxuXHRcdHJldHVybiBzZWdzOyAvLyByZXR1cm4gb25seSB0aGUgc2VncyB0aGF0IHdlcmUgYWN0dWFsbHkgcmVuZGVyZWRcblx0fSxcblxuXG5cdC8vIFVucmVuZGVycyBhbGwgY3VycmVudGx5IHJlbmRlcmVkIGZvcmVncm91bmQgZXZlbnQgc2VnbWVudHNcblx0dW5yZW5kZXJGZ1NlZ3M6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciByb3dTdHJ1Y3RzID0gdGhpcy5yb3dTdHJ1Y3RzIHx8IFtdO1xuXHRcdHZhciByb3dTdHJ1Y3Q7XG5cblx0XHR3aGlsZSAoKHJvd1N0cnVjdCA9IHJvd1N0cnVjdHMucG9wKCkpKSB7XG5cdFx0XHRyb3dTdHJ1Y3QudGJvZHlFbC5yZW1vdmUoKTtcblx0XHR9XG5cblx0XHR0aGlzLnJvd1N0cnVjdHMgPSBudWxsO1xuXHR9LFxuXG5cblx0Ly8gVXNlcyB0aGUgZ2l2ZW4gZXZlbnRzIGFycmF5IHRvIGdlbmVyYXRlIDx0Ym9keT4gZWxlbWVudHMgdGhhdCBzaG91bGQgYmUgYXBwZW5kZWQgdG8gZWFjaCByb3cncyBjb250ZW50IHNrZWxldG9uLlxuXHQvLyBSZXR1cm5zIGFuIGFycmF5IG9mIHJvd1N0cnVjdCBvYmplY3RzIChzZWUgdGhlIGJvdHRvbSBvZiBgcmVuZGVyU2VnUm93YCkuXG5cdC8vIFBSRUNPTkRJVElPTjogZWFjaCBzZWdtZW50IHNob3VkIGFscmVhZHkgaGF2ZSBhIHJlbmRlcmVkIGFuZCBhc3NpZ25lZCBgLmVsYFxuXHRyZW5kZXJTZWdSb3dzOiBmdW5jdGlvbihzZWdzKSB7XG5cdFx0dmFyIHJvd1N0cnVjdHMgPSBbXTtcblx0XHR2YXIgc2VnUm93cztcblx0XHR2YXIgcm93O1xuXG5cdFx0c2VnUm93cyA9IHRoaXMuZ3JvdXBTZWdSb3dzKHNlZ3MpOyAvLyBncm91cCBpbnRvIG5lc3RlZCBhcnJheXNcblxuXHRcdC8vIGl0ZXJhdGUgZWFjaCByb3cgb2Ygc2VnbWVudCBncm91cGluZ3Ncblx0XHRmb3IgKHJvdyA9IDA7IHJvdyA8IHNlZ1Jvd3MubGVuZ3RoOyByb3crKykge1xuXHRcdFx0cm93U3RydWN0cy5wdXNoKFxuXHRcdFx0XHR0aGlzLnJlbmRlclNlZ1Jvdyhyb3csIHNlZ1Jvd3Nbcm93XSlcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJvd1N0cnVjdHM7XG5cdH0sXG5cblxuXHQvLyBCdWlsZHMgdGhlIEhUTUwgdG8gYmUgdXNlZCBmb3IgdGhlIGRlZmF1bHQgZWxlbWVudCBmb3IgYW4gaW5kaXZpZHVhbCBzZWdtZW50XG5cdGZnU2VnSHRtbDogZnVuY3Rpb24oc2VnLCBkaXNhYmxlUmVzaXppbmcpIHtcblx0XHR2YXIgdmlldyA9IHRoaXMudmlldztcblx0XHR2YXIgZXZlbnQgPSBzZWcuZXZlbnQ7XG5cdFx0dmFyIGlzRHJhZ2dhYmxlID0gdmlldy5pc0V2ZW50RHJhZ2dhYmxlKGV2ZW50KTtcblx0XHR2YXIgaXNSZXNpemFibGVGcm9tU3RhcnQgPSAhZGlzYWJsZVJlc2l6aW5nICYmIGV2ZW50LmFsbERheSAmJlxuXHRcdFx0c2VnLmlzU3RhcnQgJiYgdmlldy5pc0V2ZW50UmVzaXphYmxlRnJvbVN0YXJ0KGV2ZW50KTtcblx0XHR2YXIgaXNSZXNpemFibGVGcm9tRW5kID0gIWRpc2FibGVSZXNpemluZyAmJiBldmVudC5hbGxEYXkgJiZcblx0XHRcdHNlZy5pc0VuZCAmJiB2aWV3LmlzRXZlbnRSZXNpemFibGVGcm9tRW5kKGV2ZW50KTtcblx0XHR2YXIgY2xhc3NlcyA9IHRoaXMuZ2V0U2VnQ2xhc3NlcyhzZWcsIGlzRHJhZ2dhYmxlLCBpc1Jlc2l6YWJsZUZyb21TdGFydCB8fCBpc1Jlc2l6YWJsZUZyb21FbmQpO1xuXHRcdHZhciBza2luQ3NzID0gY3NzVG9TdHIodGhpcy5nZXRTZWdTa2luQ3NzKHNlZykpO1xuXHRcdHZhciB0aW1lSHRtbCA9ICcnO1xuXHRcdHZhciB0aW1lVGV4dDtcblx0XHR2YXIgdGl0bGVIdG1sO1xuXG5cdFx0Y2xhc3Nlcy51bnNoaWZ0KCdmYy1kYXktZ3JpZC1ldmVudCcsICdmYy1oLWV2ZW50Jyk7XG5cblx0XHQvLyBPbmx5IGRpc3BsYXkgYSB0aW1lZCBldmVudHMgdGltZSBpZiBpdCBpcyB0aGUgc3RhcnRpbmcgc2VnbWVudFxuXHRcdGlmIChzZWcuaXNTdGFydCkge1xuXHRcdFx0dGltZVRleHQgPSB0aGlzLmdldEV2ZW50VGltZVRleHQoZXZlbnQpO1xuXHRcdFx0aWYgKHRpbWVUZXh0KSB7XG5cdFx0XHRcdHRpbWVIdG1sID0gJzxzcGFuIGNsYXNzPVwiZmMtdGltZVwiPicgKyBodG1sRXNjYXBlKHRpbWVUZXh0KSArICc8L3NwYW4+Jztcblx0XHRcdH1cblx0XHR9XG5cblx0XHR0aXRsZUh0bWwgPVxuXHRcdFx0JzxzcGFuIGNsYXNzPVwiZmMtdGl0bGVcIj4nICtcblx0XHRcdFx0KGh0bWxFc2NhcGUoZXZlbnQudGl0bGUgfHwgJycpIHx8ICcmbmJzcDsnKSArIC8vIHdlIGFsd2F5cyB3YW50IG9uZSBsaW5lIG9mIGhlaWdodFxuXHRcdFx0Jzwvc3Bhbj4nO1xuXG5cdFx0cmV0dXJuICc8YSBjbGFzcz1cIicgKyBjbGFzc2VzLmpvaW4oJyAnKSArICdcIicgK1xuXHRcdFx0XHQoZXZlbnQudXJsID9cblx0XHRcdFx0XHQnIGhyZWY9XCInICsgaHRtbEVzY2FwZShldmVudC51cmwpICsgJ1wiJyA6XG5cdFx0XHRcdFx0Jydcblx0XHRcdFx0XHQpICtcblx0XHRcdFx0KHNraW5Dc3MgP1xuXHRcdFx0XHRcdCcgc3R5bGU9XCInICsgc2tpbkNzcyArICdcIicgOlxuXHRcdFx0XHRcdCcnXG5cdFx0XHRcdFx0KSArXG5cdFx0XHQnPicgK1xuXHRcdFx0XHQnPGRpdiBjbGFzcz1cImZjLWNvbnRlbnRcIj4nICtcblx0XHRcdFx0XHQodGhpcy5pc1JUTCA/XG5cdFx0XHRcdFx0XHR0aXRsZUh0bWwgKyAnICcgKyB0aW1lSHRtbCA6IC8vIHB1dCBhIG5hdHVyYWwgc3BhY2UgaW4gYmV0d2VlblxuXHRcdFx0XHRcdFx0dGltZUh0bWwgKyAnICcgKyB0aXRsZUh0bWwgICAvL1xuXHRcdFx0XHRcdFx0KSArXG5cdFx0XHRcdCc8L2Rpdj4nICtcblx0XHRcdFx0KGlzUmVzaXphYmxlRnJvbVN0YXJ0ID9cblx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cImZjLXJlc2l6ZXIgZmMtc3RhcnQtcmVzaXplclwiIC8+JyA6XG5cdFx0XHRcdFx0Jydcblx0XHRcdFx0XHQpICtcblx0XHRcdFx0KGlzUmVzaXphYmxlRnJvbUVuZCA/XG5cdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJmYy1yZXNpemVyIGZjLWVuZC1yZXNpemVyXCIgLz4nIDpcblx0XHRcdFx0XHQnJ1xuXHRcdFx0XHRcdCkgK1xuXHRcdFx0JzwvYT4nO1xuXHR9LFxuXG5cblx0Ly8gR2l2ZW4gYSByb3cgIyBhbmQgYW4gYXJyYXkgb2Ygc2VnbWVudHMgYWxsIGluIHRoZSBzYW1lIHJvdywgcmVuZGVyIGEgPHRib2R5PiBlbGVtZW50LCBhIHNrZWxldG9uIHRoYXQgY29udGFpbnNcblx0Ly8gdGhlIHNlZ21lbnRzLiBSZXR1cm5zIG9iamVjdCB3aXRoIGEgYnVuY2ggb2YgaW50ZXJuYWwgZGF0YSBhYm91dCBob3cgdGhlIHJlbmRlciB3YXMgY2FsY3VsYXRlZC5cblx0Ly8gTk9URTogbW9kaWZpZXMgcm93U2Vnc1xuXHRyZW5kZXJTZWdSb3c6IGZ1bmN0aW9uKHJvdywgcm93U2Vncykge1xuXHRcdHZhciBjb2xDbnQgPSB0aGlzLmNvbENudDtcblx0XHR2YXIgc2VnTGV2ZWxzID0gdGhpcy5idWlsZFNlZ0xldmVscyhyb3dTZWdzKTsgLy8gZ3JvdXAgaW50byBzdWItYXJyYXlzIG9mIGxldmVsc1xuXHRcdHZhciBsZXZlbENudCA9IE1hdGgubWF4KDEsIHNlZ0xldmVscy5sZW5ndGgpOyAvLyBlbnN1cmUgYXQgbGVhc3Qgb25lIGxldmVsXG5cdFx0dmFyIHRib2R5ID0gJCgnPHRib2R5Lz4nKTtcblx0XHR2YXIgc2VnTWF0cml4ID0gW107IC8vIGxvb2t1cCBmb3Igd2hpY2ggc2VnbWVudHMgYXJlIHJlbmRlcmVkIGludG8gd2hpY2ggbGV2ZWwrY29sIGNlbGxzXG5cdFx0dmFyIGNlbGxNYXRyaXggPSBbXTsgLy8gbG9va3VwIGZvciBhbGwgPHRkPiBlbGVtZW50cyBvZiB0aGUgbGV2ZWwrY29sIG1hdHJpeFxuXHRcdHZhciBsb25lQ2VsbE1hdHJpeCA9IFtdOyAvLyBsb29rdXAgZm9yIDx0ZD4gZWxlbWVudHMgdGhhdCBvbmx5IHRha2UgdXAgYSBzaW5nbGUgY29sdW1uXG5cdFx0dmFyIGksIGxldmVsU2Vncztcblx0XHR2YXIgY29sO1xuXHRcdHZhciB0cjtcblx0XHR2YXIgaiwgc2VnO1xuXHRcdHZhciB0ZDtcblxuXHRcdC8vIHBvcHVsYXRlcyBlbXB0eSBjZWxscyBmcm9tIHRoZSBjdXJyZW50IGNvbHVtbiAoYGNvbGApIHRvIGBlbmRDb2xgXG5cdFx0ZnVuY3Rpb24gZW1wdHlDZWxsc1VudGlsKGVuZENvbCkge1xuXHRcdFx0d2hpbGUgKGNvbCA8IGVuZENvbCkge1xuXHRcdFx0XHQvLyB0cnkgdG8gZ3JhYiBhIGNlbGwgZnJvbSB0aGUgbGV2ZWwgYWJvdmUgYW5kIGV4dGVuZCBpdHMgcm93c3Bhbi4gb3RoZXJ3aXNlLCBjcmVhdGUgYSBmcmVzaCBjZWxsXG5cdFx0XHRcdHRkID0gKGxvbmVDZWxsTWF0cml4W2kgLSAxXSB8fCBbXSlbY29sXTtcblx0XHRcdFx0aWYgKHRkKSB7XG5cdFx0XHRcdFx0dGQuYXR0cihcblx0XHRcdFx0XHRcdCdyb3dzcGFuJyxcblx0XHRcdFx0XHRcdHBhcnNlSW50KHRkLmF0dHIoJ3Jvd3NwYW4nKSB8fCAxLCAxMCkgKyAxXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHR0ZCA9ICQoJzx0ZC8+Jyk7XG5cdFx0XHRcdFx0dHIuYXBwZW5kKHRkKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjZWxsTWF0cml4W2ldW2NvbF0gPSB0ZDtcblx0XHRcdFx0bG9uZUNlbGxNYXRyaXhbaV1bY29sXSA9IHRkO1xuXHRcdFx0XHRjb2wrKztcblx0XHRcdH1cblx0XHR9XG5cblx0XHRmb3IgKGkgPSAwOyBpIDwgbGV2ZWxDbnQ7IGkrKykgeyAvLyBpdGVyYXRlIHRocm91Z2ggYWxsIGxldmVsc1xuXHRcdFx0bGV2ZWxTZWdzID0gc2VnTGV2ZWxzW2ldO1xuXHRcdFx0Y29sID0gMDtcblx0XHRcdHRyID0gJCgnPHRyLz4nKTtcblxuXHRcdFx0c2VnTWF0cml4LnB1c2goW10pO1xuXHRcdFx0Y2VsbE1hdHJpeC5wdXNoKFtdKTtcblx0XHRcdGxvbmVDZWxsTWF0cml4LnB1c2goW10pO1xuXG5cdFx0XHQvLyBsZXZlbENudCBtaWdodCBiZSAxIGV2ZW4gdGhvdWdoIHRoZXJlIGFyZSBubyBhY3R1YWwgbGV2ZWxzLiBwcm90ZWN0IGFnYWluc3QgdGhpcy5cblx0XHRcdC8vIHRoaXMgc2luZ2xlIGVtcHR5IHJvdyBpcyB1c2VmdWwgZm9yIHN0eWxpbmcuXG5cdFx0XHRpZiAobGV2ZWxTZWdzKSB7XG5cdFx0XHRcdGZvciAoaiA9IDA7IGogPCBsZXZlbFNlZ3MubGVuZ3RoOyBqKyspIHsgLy8gaXRlcmF0ZSB0aHJvdWdoIHNlZ21lbnRzIGluIGxldmVsXG5cdFx0XHRcdFx0c2VnID0gbGV2ZWxTZWdzW2pdO1xuXG5cdFx0XHRcdFx0ZW1wdHlDZWxsc1VudGlsKHNlZy5sZWZ0Q29sKTtcblxuXHRcdFx0XHRcdC8vIGNyZWF0ZSBhIGNvbnRhaW5lciB0aGF0IG9jY3VwaWVzIG9yIG1vcmUgY29sdW1ucy4gYXBwZW5kIHRoZSBldmVudCBlbGVtZW50LlxuXHRcdFx0XHRcdHRkID0gJCgnPHRkIGNsYXNzPVwiZmMtZXZlbnQtY29udGFpbmVyXCIvPicpLmFwcGVuZChzZWcuZWwpO1xuXHRcdFx0XHRcdGlmIChzZWcubGVmdENvbCAhPSBzZWcucmlnaHRDb2wpIHtcblx0XHRcdFx0XHRcdHRkLmF0dHIoJ2NvbHNwYW4nLCBzZWcucmlnaHRDb2wgLSBzZWcubGVmdENvbCArIDEpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlIHsgLy8gYSBzaW5nbGUtY29sdW1uIHNlZ21lbnRcblx0XHRcdFx0XHRcdGxvbmVDZWxsTWF0cml4W2ldW2NvbF0gPSB0ZDtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR3aGlsZSAoY29sIDw9IHNlZy5yaWdodENvbCkge1xuXHRcdFx0XHRcdFx0Y2VsbE1hdHJpeFtpXVtjb2xdID0gdGQ7XG5cdFx0XHRcdFx0XHRzZWdNYXRyaXhbaV1bY29sXSA9IHNlZztcblx0XHRcdFx0XHRcdGNvbCsrO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHRyLmFwcGVuZCh0ZCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0ZW1wdHlDZWxsc1VudGlsKGNvbENudCk7IC8vIGZpbmlzaCBvZmYgdGhlIHJvd1xuXHRcdFx0dGhpcy5ib29rZW5kQ2VsbHModHIpO1xuXHRcdFx0dGJvZHkuYXBwZW5kKHRyKTtcblx0XHR9XG5cblx0XHRyZXR1cm4geyAvLyBhIFwicm93U3RydWN0XCJcblx0XHRcdHJvdzogcm93LCAvLyB0aGUgcm93IG51bWJlclxuXHRcdFx0dGJvZHlFbDogdGJvZHksXG5cdFx0XHRjZWxsTWF0cml4OiBjZWxsTWF0cml4LFxuXHRcdFx0c2VnTWF0cml4OiBzZWdNYXRyaXgsXG5cdFx0XHRzZWdMZXZlbHM6IHNlZ0xldmVscyxcblx0XHRcdHNlZ3M6IHJvd1NlZ3Ncblx0XHR9O1xuXHR9LFxuXG5cblx0Ly8gU3RhY2tzIGEgZmxhdCBhcnJheSBvZiBzZWdtZW50cywgd2hpY2ggYXJlIGFsbCBhc3N1bWVkIHRvIGJlIGluIHRoZSBzYW1lIHJvdywgaW50byBzdWJhcnJheXMgb2YgdmVydGljYWwgbGV2ZWxzLlxuXHQvLyBOT1RFOiBtb2RpZmllcyBzZWdzXG5cdGJ1aWxkU2VnTGV2ZWxzOiBmdW5jdGlvbihzZWdzKSB7XG5cdFx0dmFyIGxldmVscyA9IFtdO1xuXHRcdHZhciBpLCBzZWc7XG5cdFx0dmFyIGo7XG5cblx0XHQvLyBHaXZlIHByZWZlcmVuY2UgdG8gZWxlbWVudHMgd2l0aCBjZXJ0YWluIGNyaXRlcmlhLCBzbyB0aGV5IGhhdmVcblx0XHQvLyBhIGNoYW5jZSB0byBiZSBjbG9zZXIgdG8gdGhlIHRvcC5cblx0XHR0aGlzLnNvcnRFdmVudFNlZ3Moc2Vncyk7XG5cblx0XHRmb3IgKGkgPSAwOyBpIDwgc2Vncy5sZW5ndGg7IGkrKykge1xuXHRcdFx0c2VnID0gc2Vnc1tpXTtcblxuXHRcdFx0Ly8gbG9vcCB0aHJvdWdoIGxldmVscywgc3RhcnRpbmcgd2l0aCB0aGUgdG9wbW9zdCwgdW50aWwgdGhlIHNlZ21lbnQgZG9lc24ndCBjb2xsaWRlIHdpdGggb3RoZXIgc2VnbWVudHNcblx0XHRcdGZvciAoaiA9IDA7IGogPCBsZXZlbHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0aWYgKCFpc0RheVNlZ0NvbGxpc2lvbihzZWcsIGxldmVsc1tqXSkpIHtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Ly8gYGpgIG5vdyBob2xkcyB0aGUgZGVzaXJlZCBzdWJyb3cgaW5kZXhcblx0XHRcdHNlZy5sZXZlbCA9IGo7XG5cblx0XHRcdC8vIGNyZWF0ZSBuZXcgbGV2ZWwgYXJyYXkgaWYgbmVlZGVkIGFuZCBhcHBlbmQgc2VnbWVudFxuXHRcdFx0KGxldmVsc1tqXSB8fCAobGV2ZWxzW2pdID0gW10pKS5wdXNoKHNlZyk7XG5cdFx0fVxuXG5cdFx0Ly8gb3JkZXIgc2VnbWVudHMgbGVmdC10by1yaWdodC4gdmVyeSBpbXBvcnRhbnQgaWYgY2FsZW5kYXIgaXMgUlRMXG5cdFx0Zm9yIChqID0gMDsgaiA8IGxldmVscy5sZW5ndGg7IGorKykge1xuXHRcdFx0bGV2ZWxzW2pdLnNvcnQoY29tcGFyZURheVNlZ0NvbHMpO1xuXHRcdH1cblxuXHRcdHJldHVybiBsZXZlbHM7XG5cdH0sXG5cblxuXHQvLyBHaXZlbiBhIGZsYXQgYXJyYXkgb2Ygc2VnbWVudHMsIHJldHVybiBhbiBhcnJheSBvZiBzdWItYXJyYXlzLCBncm91cGVkIGJ5IGVhY2ggc2VnbWVudCdzIHJvd1xuXHRncm91cFNlZ1Jvd3M6IGZ1bmN0aW9uKHNlZ3MpIHtcblx0XHR2YXIgc2VnUm93cyA9IFtdO1xuXHRcdHZhciBpO1xuXG5cdFx0Zm9yIChpID0gMDsgaSA8IHRoaXMucm93Q250OyBpKyspIHtcblx0XHRcdHNlZ1Jvd3MucHVzaChbXSk7XG5cdFx0fVxuXG5cdFx0Zm9yIChpID0gMDsgaSA8IHNlZ3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdHNlZ1Jvd3Nbc2Vnc1tpXS5yb3ddLnB1c2goc2Vnc1tpXSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHNlZ1Jvd3M7XG5cdH1cblxufSk7XG5cblxuLy8gQ29tcHV0ZXMgd2hldGhlciB0d28gc2VnbWVudHMnIGNvbHVtbnMgY29sbGlkZS4gVGhleSBhcmUgYXNzdW1lZCB0byBiZSBpbiB0aGUgc2FtZSByb3cuXG5mdW5jdGlvbiBpc0RheVNlZ0NvbGxpc2lvbihzZWcsIG90aGVyU2Vncykge1xuXHR2YXIgaSwgb3RoZXJTZWc7XG5cblx0Zm9yIChpID0gMDsgaSA8IG90aGVyU2Vncy5sZW5ndGg7IGkrKykge1xuXHRcdG90aGVyU2VnID0gb3RoZXJTZWdzW2ldO1xuXG5cdFx0aWYgKFxuXHRcdFx0b3RoZXJTZWcubGVmdENvbCA8PSBzZWcucmlnaHRDb2wgJiZcblx0XHRcdG90aGVyU2VnLnJpZ2h0Q29sID49IHNlZy5sZWZ0Q29sXG5cdFx0KSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gZmFsc2U7XG59XG5cblxuLy8gQSBjbXAgZnVuY3Rpb24gZm9yIGRldGVybWluaW5nIHRoZSBsZWZ0bW9zdCBldmVudFxuZnVuY3Rpb24gY29tcGFyZURheVNlZ0NvbHMoYSwgYikge1xuXHRyZXR1cm4gYS5sZWZ0Q29sIC0gYi5sZWZ0Q29sO1xufVxuXG47O1xuXG4vKiBNZXRob2RzIHJlbGF0ZSB0byBsaW1pdGluZyB0aGUgbnVtYmVyIGV2ZW50cyBmb3IgYSBnaXZlbiBkYXkgb24gYSBEYXlHcmlkXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8vIE5PVEU6IGFsbCB0aGUgc2VncyBiZWluZyBwYXNzZWQgYXJvdW5kIGluIGhlcmUgYXJlIGZvcmVncm91bmQgc2Vnc1xuXG5EYXlHcmlkLm1peGluKHtcblxuXHRzZWdQb3BvdmVyOiBudWxsLCAvLyB0aGUgUG9wb3ZlciB0aGF0IGhvbGRzIGV2ZW50cyB0aGF0IGNhbid0IGZpdCBpbiBhIGNlbGwuIG51bGwgd2hlbiBub3QgdmlzaWJsZVxuXHRwb3BvdmVyU2VnczogbnVsbCwgLy8gYW4gYXJyYXkgb2Ygc2VnbWVudCBvYmplY3RzIHRoYXQgdGhlIHNlZ1BvcG92ZXIgaG9sZHMuIG51bGwgd2hlbiBub3QgdmlzaWJsZVxuXG5cblx0cmVtb3ZlU2VnUG9wb3ZlcjogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHRoaXMuc2VnUG9wb3Zlcikge1xuXHRcdFx0dGhpcy5zZWdQb3BvdmVyLmhpZGUoKTsgLy8gaW4gaGFuZGxlciwgd2lsbCBjYWxsIHNlZ1BvcG92ZXIncyByZW1vdmVFbGVtZW50XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gTGltaXRzIHRoZSBudW1iZXIgb2YgXCJsZXZlbHNcIiAodmVydGljYWxseSBzdGFja2luZyBsYXllcnMgb2YgZXZlbnRzKSBmb3IgZWFjaCByb3cgb2YgdGhlIGdyaWQuXG5cdC8vIGBsZXZlbExpbWl0YCBjYW4gYmUgZmFsc2UgKGRvbid0IGxpbWl0KSwgYSBudW1iZXIsIG9yIHRydWUgKHNob3VsZCBiZSBjb21wdXRlZCkuXG5cdGxpbWl0Um93czogZnVuY3Rpb24obGV2ZWxMaW1pdCkge1xuXHRcdHZhciByb3dTdHJ1Y3RzID0gdGhpcy5yb3dTdHJ1Y3RzIHx8IFtdO1xuXHRcdHZhciByb3c7IC8vIHJvdyAjXG5cdFx0dmFyIHJvd0xldmVsTGltaXQ7XG5cblx0XHRmb3IgKHJvdyA9IDA7IHJvdyA8IHJvd1N0cnVjdHMubGVuZ3RoOyByb3crKykge1xuXHRcdFx0dGhpcy51bmxpbWl0Um93KHJvdyk7XG5cblx0XHRcdGlmICghbGV2ZWxMaW1pdCkge1xuXHRcdFx0XHRyb3dMZXZlbExpbWl0ID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmICh0eXBlb2YgbGV2ZWxMaW1pdCA9PT0gJ251bWJlcicpIHtcblx0XHRcdFx0cm93TGV2ZWxMaW1pdCA9IGxldmVsTGltaXQ7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0cm93TGV2ZWxMaW1pdCA9IHRoaXMuY29tcHV0ZVJvd0xldmVsTGltaXQocm93KTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKHJvd0xldmVsTGltaXQgIT09IGZhbHNlKSB7XG5cdFx0XHRcdHRoaXMubGltaXRSb3cocm93LCByb3dMZXZlbExpbWl0KTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblxuXHQvLyBDb21wdXRlcyB0aGUgbnVtYmVyIG9mIGxldmVscyBhIHJvdyB3aWxsIGFjY29tb2RhdGUgd2l0aG91dCBnb2luZyBvdXRzaWRlIGl0cyBib3VuZHMuXG5cdC8vIEFzc3VtZXMgdGhlIHJvdyBpcyBcInJpZ2lkXCIgKG1haW50YWlucyBhIGNvbnN0YW50IGhlaWdodCByZWdhcmRsZXNzIG9mIHdoYXQgaXMgaW5zaWRlKS5cblx0Ly8gYHJvd2AgaXMgdGhlIHJvdyBudW1iZXIuXG5cdGNvbXB1dGVSb3dMZXZlbExpbWl0OiBmdW5jdGlvbihyb3cpIHtcblx0XHR2YXIgcm93RWwgPSB0aGlzLnJvd0Vscy5lcShyb3cpOyAvLyB0aGUgY29udGFpbmluZyBcImZha2VcIiByb3cgZGl2XG5cdFx0dmFyIHJvd0hlaWdodCA9IHJvd0VsLmhlaWdodCgpOyAvLyBUT0RPOiBjYWNoZSBzb21laG93P1xuXHRcdHZhciB0ckVscyA9IHRoaXMucm93U3RydWN0c1tyb3ddLnRib2R5RWwuY2hpbGRyZW4oKTtcblx0XHR2YXIgaSwgdHJFbDtcblx0XHR2YXIgdHJIZWlnaHQ7XG5cblx0XHRmdW5jdGlvbiBpdGVySW5uZXJIZWlnaHRzKGksIGNoaWxkTm9kZSkge1xuXHRcdFx0dHJIZWlnaHQgPSBNYXRoLm1heCh0ckhlaWdodCwgJChjaGlsZE5vZGUpLm91dGVySGVpZ2h0KCkpO1xuXHRcdH1cblxuXHRcdC8vIFJldmVhbCBvbmUgbGV2ZWwgPHRyPiBhdCBhIHRpbWUgYW5kIHN0b3Agd2hlbiB3ZSBmaW5kIG9uZSBvdXQgb2YgYm91bmRzXG5cdFx0Zm9yIChpID0gMDsgaSA8IHRyRWxzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR0ckVsID0gdHJFbHMuZXEoaSkucmVtb3ZlQ2xhc3MoJ2ZjLWxpbWl0ZWQnKTsgLy8gcmVzZXQgdG8gb3JpZ2luYWwgc3RhdGUgKHJldmVhbClcblxuXHRcdFx0Ly8gd2l0aCByb3dzcGFucz4xIGFuZCBJRTgsIHRyRWwub3V0ZXJIZWlnaHQoKSB3b3VsZCByZXR1cm4gdGhlIGhlaWdodCBvZiB0aGUgbGFyZ2VzdCBjZWxsLFxuXHRcdFx0Ly8gc28gaW5zdGVhZCwgZmluZCB0aGUgdGFsbGVzdCBpbm5lciBjb250ZW50IGVsZW1lbnQuXG5cdFx0XHR0ckhlaWdodCA9IDA7XG5cdFx0XHR0ckVsLmZpbmQoJz4gdGQgPiA6Zmlyc3QtY2hpbGQnKS5lYWNoKGl0ZXJJbm5lckhlaWdodHMpO1xuXG5cdFx0XHRpZiAodHJFbC5wb3NpdGlvbigpLnRvcCArIHRySGVpZ2h0ID4gcm93SGVpZ2h0KSB7XG5cdFx0XHRcdHJldHVybiBpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTsgLy8gc2hvdWxkIG5vdCBsaW1pdCBhdCBhbGxcblx0fSxcblxuXG5cdC8vIExpbWl0cyB0aGUgZ2l2ZW4gZ3JpZCByb3cgdG8gdGhlIG1heGltdW0gbnVtYmVyIG9mIGxldmVscyBhbmQgaW5qZWN0cyBcIm1vcmVcIiBsaW5rcyBpZiBuZWNlc3NhcnkuXG5cdC8vIGByb3dgIGlzIHRoZSByb3cgbnVtYmVyLlxuXHQvLyBgbGV2ZWxMaW1pdGAgaXMgYSBudW1iZXIgZm9yIHRoZSBtYXhpbXVtIChpbmNsdXNpdmUpIG51bWJlciBvZiBsZXZlbHMgYWxsb3dlZC5cblx0bGltaXRSb3c6IGZ1bmN0aW9uKHJvdywgbGV2ZWxMaW1pdCkge1xuXHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cdFx0dmFyIHJvd1N0cnVjdCA9IHRoaXMucm93U3RydWN0c1tyb3ddO1xuXHRcdHZhciBtb3JlTm9kZXMgPSBbXTsgLy8gYXJyYXkgb2YgXCJtb3JlXCIgPGE+IGxpbmtzIGFuZCA8dGQ+IERPTSBub2Rlc1xuXHRcdHZhciBjb2wgPSAwOyAvLyBjb2wgIywgbGVmdC10by1yaWdodCAobm90IGNocm9ub2xvZ2ljYWxseSlcblx0XHR2YXIgbGV2ZWxTZWdzOyAvLyBhcnJheSBvZiBzZWdtZW50IG9iamVjdHMgaW4gdGhlIGxhc3QgYWxsb3dhYmxlIGxldmVsLCBvcmRlcmVkIGxlZnQtdG8tcmlnaHRcblx0XHR2YXIgY2VsbE1hdHJpeDsgLy8gYSBtYXRyaXggKGJ5IGxldmVsLCB0aGVuIGNvbHVtbikgb2YgYWxsIDx0ZD4galF1ZXJ5IGVsZW1lbnRzIGluIHRoZSByb3dcblx0XHR2YXIgbGltaXRlZE5vZGVzOyAvLyBhcnJheSBvZiB0ZW1wb3JhcmlseSBoaWRkZW4gbGV2ZWwgPHRyPiBhbmQgc2VnbWVudCA8dGQ+IERPTSBub2Rlc1xuXHRcdHZhciBpLCBzZWc7XG5cdFx0dmFyIHNlZ3NCZWxvdzsgLy8gYXJyYXkgb2Ygc2VnbWVudCBvYmplY3RzIGJlbG93IGBzZWdgIGluIHRoZSBjdXJyZW50IGBjb2xgXG5cdFx0dmFyIHRvdGFsU2Vnc0JlbG93OyAvLyB0b3RhbCBudW1iZXIgb2Ygc2VnbWVudHMgYmVsb3cgYHNlZ2AgaW4gYW55IG9mIHRoZSBjb2x1bW5zIGBzZWdgIG9jY3VwaWVzXG5cdFx0dmFyIGNvbFNlZ3NCZWxvdzsgLy8gYXJyYXkgb2Ygc2VnbWVudCBhcnJheXMsIGJlbG93IHNlZywgb25lIGZvciBlYWNoIGNvbHVtbiAob2Zmc2V0IGZyb20gc2VncydzIGZpcnN0IGNvbHVtbilcblx0XHR2YXIgdGQsIHJvd3NwYW47XG5cdFx0dmFyIHNlZ01vcmVOb2RlczsgLy8gYXJyYXkgb2YgXCJtb3JlXCIgPHRkPiBjZWxscyB0aGF0IHdpbGwgc3RhbmQtaW4gZm9yIHRoZSBjdXJyZW50IHNlZydzIGNlbGxcblx0XHR2YXIgajtcblx0XHR2YXIgbW9yZVRkLCBtb3JlV3JhcCwgbW9yZUxpbms7XG5cblx0XHQvLyBJdGVyYXRlcyB0aHJvdWdoIGVtcHR5IGxldmVsIGNlbGxzIGFuZCBwbGFjZXMgXCJtb3JlXCIgbGlua3MgaW5zaWRlIGlmIG5lZWQgYmVcblx0XHRmdW5jdGlvbiBlbXB0eUNlbGxzVW50aWwoZW5kQ29sKSB7IC8vIGdvZXMgZnJvbSBjdXJyZW50IGBjb2xgIHRvIGBlbmRDb2xgXG5cdFx0XHR3aGlsZSAoY29sIDwgZW5kQ29sKSB7XG5cdFx0XHRcdHNlZ3NCZWxvdyA9IF90aGlzLmdldENlbGxTZWdzKHJvdywgY29sLCBsZXZlbExpbWl0KTtcblx0XHRcdFx0aWYgKHNlZ3NCZWxvdy5sZW5ndGgpIHtcblx0XHRcdFx0XHR0ZCA9IGNlbGxNYXRyaXhbbGV2ZWxMaW1pdCAtIDFdW2NvbF07XG5cdFx0XHRcdFx0bW9yZUxpbmsgPSBfdGhpcy5yZW5kZXJNb3JlTGluayhyb3csIGNvbCwgc2Vnc0JlbG93KTtcblx0XHRcdFx0XHRtb3JlV3JhcCA9ICQoJzxkaXYvPicpLmFwcGVuZChtb3JlTGluayk7XG5cdFx0XHRcdFx0dGQuYXBwZW5kKG1vcmVXcmFwKTtcblx0XHRcdFx0XHRtb3JlTm9kZXMucHVzaChtb3JlV3JhcFswXSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29sKys7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKGxldmVsTGltaXQgJiYgbGV2ZWxMaW1pdCA8IHJvd1N0cnVjdC5zZWdMZXZlbHMubGVuZ3RoKSB7IC8vIGlzIGl0IGFjdHVhbGx5IG92ZXIgdGhlIGxpbWl0P1xuXHRcdFx0bGV2ZWxTZWdzID0gcm93U3RydWN0LnNlZ0xldmVsc1tsZXZlbExpbWl0IC0gMV07XG5cdFx0XHRjZWxsTWF0cml4ID0gcm93U3RydWN0LmNlbGxNYXRyaXg7XG5cblx0XHRcdGxpbWl0ZWROb2RlcyA9IHJvd1N0cnVjdC50Ym9keUVsLmNoaWxkcmVuKCkuc2xpY2UobGV2ZWxMaW1pdCkgLy8gZ2V0IGxldmVsIDx0cj4gZWxlbWVudHMgcGFzdCB0aGUgbGltaXRcblx0XHRcdFx0LmFkZENsYXNzKCdmYy1saW1pdGVkJykuZ2V0KCk7IC8vIGhpZGUgZWxlbWVudHMgYW5kIGdldCBhIHNpbXBsZSBET00tbm9kZXMgYXJyYXlcblxuXHRcdFx0Ly8gaXRlcmF0ZSB0aG91Z2ggc2VnbWVudHMgaW4gdGhlIGxhc3QgYWxsb3dhYmxlIGxldmVsXG5cdFx0XHRmb3IgKGkgPSAwOyBpIDwgbGV2ZWxTZWdzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHNlZyA9IGxldmVsU2Vnc1tpXTtcblx0XHRcdFx0ZW1wdHlDZWxsc1VudGlsKHNlZy5sZWZ0Q29sKTsgLy8gcHJvY2VzcyBlbXB0eSBjZWxscyBiZWZvcmUgdGhlIHNlZ21lbnRcblxuXHRcdFx0XHQvLyBkZXRlcm1pbmUgKmFsbCogc2VnbWVudHMgYmVsb3cgYHNlZ2AgdGhhdCBvY2N1cHkgdGhlIHNhbWUgY29sdW1uc1xuXHRcdFx0XHRjb2xTZWdzQmVsb3cgPSBbXTtcblx0XHRcdFx0dG90YWxTZWdzQmVsb3cgPSAwO1xuXHRcdFx0XHR3aGlsZSAoY29sIDw9IHNlZy5yaWdodENvbCkge1xuXHRcdFx0XHRcdHNlZ3NCZWxvdyA9IHRoaXMuZ2V0Q2VsbFNlZ3Mocm93LCBjb2wsIGxldmVsTGltaXQpO1xuXHRcdFx0XHRcdGNvbFNlZ3NCZWxvdy5wdXNoKHNlZ3NCZWxvdyk7XG5cdFx0XHRcdFx0dG90YWxTZWdzQmVsb3cgKz0gc2Vnc0JlbG93Lmxlbmd0aDtcblx0XHRcdFx0XHRjb2wrKztcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICh0b3RhbFNlZ3NCZWxvdykgeyAvLyBkbyB3ZSBuZWVkIHRvIHJlcGxhY2UgdGhpcyBzZWdtZW50IHdpdGggb25lIG9yIG1hbnkgXCJtb3JlXCIgbGlua3M/XG5cdFx0XHRcdFx0dGQgPSBjZWxsTWF0cml4W2xldmVsTGltaXQgLSAxXVtzZWcubGVmdENvbF07IC8vIHRoZSBzZWdtZW50J3MgcGFyZW50IGNlbGxcblx0XHRcdFx0XHRyb3dzcGFuID0gdGQuYXR0cigncm93c3BhbicpIHx8IDE7XG5cdFx0XHRcdFx0c2VnTW9yZU5vZGVzID0gW107XG5cblx0XHRcdFx0XHQvLyBtYWtlIGEgcmVwbGFjZW1lbnQgPHRkPiBmb3IgZWFjaCBjb2x1bW4gdGhlIHNlZ21lbnQgb2NjdXBpZXMuIHdpbGwgYmUgb25lIGZvciBlYWNoIGNvbHNwYW5cblx0XHRcdFx0XHRmb3IgKGogPSAwOyBqIDwgY29sU2Vnc0JlbG93Lmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdFx0XHRtb3JlVGQgPSAkKCc8dGQgY2xhc3M9XCJmYy1tb3JlLWNlbGxcIi8+JykuYXR0cigncm93c3BhbicsIHJvd3NwYW4pO1xuXHRcdFx0XHRcdFx0c2Vnc0JlbG93ID0gY29sU2Vnc0JlbG93W2pdO1xuXHRcdFx0XHRcdFx0bW9yZUxpbmsgPSB0aGlzLnJlbmRlck1vcmVMaW5rKFxuXHRcdFx0XHRcdFx0XHRyb3csXG5cdFx0XHRcdFx0XHRcdHNlZy5sZWZ0Q29sICsgaixcblx0XHRcdFx0XHRcdFx0WyBzZWcgXS5jb25jYXQoc2Vnc0JlbG93KSAvLyBjb3VudCBzZWcgYXMgaGlkZGVuIHRvb1xuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdG1vcmVXcmFwID0gJCgnPGRpdi8+JykuYXBwZW5kKG1vcmVMaW5rKTtcblx0XHRcdFx0XHRcdG1vcmVUZC5hcHBlbmQobW9yZVdyYXApO1xuXHRcdFx0XHRcdFx0c2VnTW9yZU5vZGVzLnB1c2gobW9yZVRkWzBdKTtcblx0XHRcdFx0XHRcdG1vcmVOb2Rlcy5wdXNoKG1vcmVUZFswXSk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0dGQuYWRkQ2xhc3MoJ2ZjLWxpbWl0ZWQnKS5hZnRlcigkKHNlZ01vcmVOb2RlcykpOyAvLyBoaWRlIG9yaWdpbmFsIDx0ZD4gYW5kIGluamVjdCByZXBsYWNlbWVudHNcblx0XHRcdFx0XHRsaW1pdGVkTm9kZXMucHVzaCh0ZFswXSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0ZW1wdHlDZWxsc1VudGlsKHRoaXMuY29sQ250KTsgLy8gZmluaXNoIG9mZiB0aGUgbGV2ZWxcblx0XHRcdHJvd1N0cnVjdC5tb3JlRWxzID0gJChtb3JlTm9kZXMpOyAvLyBmb3IgZWFzeSB1bmRvaW5nIGxhdGVyXG5cdFx0XHRyb3dTdHJ1Y3QubGltaXRlZEVscyA9ICQobGltaXRlZE5vZGVzKTsgLy8gZm9yIGVhc3kgdW5kb2luZyBsYXRlclxuXHRcdH1cblx0fSxcblxuXG5cdC8vIFJldmVhbHMgYWxsIGxldmVscyBhbmQgcmVtb3ZlcyBhbGwgXCJtb3JlXCItcmVsYXRlZCBlbGVtZW50cyBmb3IgYSBncmlkJ3Mgcm93LlxuXHQvLyBgcm93YCBpcyBhIHJvdyBudW1iZXIuXG5cdHVubGltaXRSb3c6IGZ1bmN0aW9uKHJvdykge1xuXHRcdHZhciByb3dTdHJ1Y3QgPSB0aGlzLnJvd1N0cnVjdHNbcm93XTtcblxuXHRcdGlmIChyb3dTdHJ1Y3QubW9yZUVscykge1xuXHRcdFx0cm93U3RydWN0Lm1vcmVFbHMucmVtb3ZlKCk7XG5cdFx0XHRyb3dTdHJ1Y3QubW9yZUVscyA9IG51bGw7XG5cdFx0fVxuXG5cdFx0aWYgKHJvd1N0cnVjdC5saW1pdGVkRWxzKSB7XG5cdFx0XHRyb3dTdHJ1Y3QubGltaXRlZEVscy5yZW1vdmVDbGFzcygnZmMtbGltaXRlZCcpO1xuXHRcdFx0cm93U3RydWN0LmxpbWl0ZWRFbHMgPSBudWxsO1xuXHRcdH1cblx0fSxcblxuXG5cdC8vIFJlbmRlcnMgYW4gPGE+IGVsZW1lbnQgdGhhdCByZXByZXNlbnRzIGhpZGRlbiBldmVudCBlbGVtZW50IGZvciBhIGNlbGwuXG5cdC8vIFJlc3BvbnNpYmxlIGZvciBhdHRhY2hpbmcgY2xpY2sgaGFuZGxlciBhcyB3ZWxsLlxuXHRyZW5kZXJNb3JlTGluazogZnVuY3Rpb24ocm93LCBjb2wsIGhpZGRlblNlZ3MpIHtcblx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXHRcdHZhciB2aWV3ID0gdGhpcy52aWV3O1xuXG5cdFx0cmV0dXJuICQoJzxhIGNsYXNzPVwiZmMtbW9yZVwiLz4nKVxuXHRcdFx0LnRleHQoXG5cdFx0XHRcdHRoaXMuZ2V0TW9yZUxpbmtUZXh0KGhpZGRlblNlZ3MubGVuZ3RoKVxuXHRcdFx0KVxuXHRcdFx0Lm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7XG5cdFx0XHRcdHZhciBjbGlja09wdGlvbiA9IHZpZXcub3B0KCdldmVudExpbWl0Q2xpY2snKTtcblx0XHRcdFx0dmFyIGRhdGUgPSBfdGhpcy5nZXRDZWxsRGF0ZShyb3csIGNvbCk7XG5cdFx0XHRcdHZhciBtb3JlRWwgPSAkKHRoaXMpO1xuXHRcdFx0XHR2YXIgZGF5RWwgPSBfdGhpcy5nZXRDZWxsRWwocm93LCBjb2wpO1xuXHRcdFx0XHR2YXIgYWxsU2VncyA9IF90aGlzLmdldENlbGxTZWdzKHJvdywgY29sKTtcblxuXHRcdFx0XHQvLyByZXNjb3BlIHRoZSBzZWdtZW50cyB0byBiZSB3aXRoaW4gdGhlIGNlbGwncyBkYXRlXG5cdFx0XHRcdHZhciByZXNsaWNlZEFsbFNlZ3MgPSBfdGhpcy5yZXNsaWNlRGF5U2VncyhhbGxTZWdzLCBkYXRlKTtcblx0XHRcdFx0dmFyIHJlc2xpY2VkSGlkZGVuU2VncyA9IF90aGlzLnJlc2xpY2VEYXlTZWdzKGhpZGRlblNlZ3MsIGRhdGUpO1xuXG5cdFx0XHRcdGlmICh0eXBlb2YgY2xpY2tPcHRpb24gPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHQvLyB0aGUgcmV0dXJuZWQgdmFsdWUgY2FuIGJlIGFuIGF0b21pYyBvcHRpb25cblx0XHRcdFx0XHRjbGlja09wdGlvbiA9IHZpZXcucHVibGljbHlUcmlnZ2VyKCdldmVudExpbWl0Q2xpY2snLCBudWxsLCB7XG5cdFx0XHRcdFx0XHRkYXRlOiBkYXRlLFxuXHRcdFx0XHRcdFx0ZGF5RWw6IGRheUVsLFxuXHRcdFx0XHRcdFx0bW9yZUVsOiBtb3JlRWwsXG5cdFx0XHRcdFx0XHRzZWdzOiByZXNsaWNlZEFsbFNlZ3MsXG5cdFx0XHRcdFx0XHRoaWRkZW5TZWdzOiByZXNsaWNlZEhpZGRlblNlZ3Ncblx0XHRcdFx0XHR9LCBldik7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoY2xpY2tPcHRpb24gPT09ICdwb3BvdmVyJykge1xuXHRcdFx0XHRcdF90aGlzLnNob3dTZWdQb3BvdmVyKHJvdywgY29sLCBtb3JlRWwsIHJlc2xpY2VkQWxsU2Vncyk7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSBpZiAodHlwZW9mIGNsaWNrT3B0aW9uID09PSAnc3RyaW5nJykgeyAvLyBhIHZpZXcgbmFtZVxuXHRcdFx0XHRcdHZpZXcuY2FsZW5kYXIuem9vbVRvKGRhdGUsIGNsaWNrT3B0aW9uKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdH0sXG5cblxuXHQvLyBSZXZlYWxzIHRoZSBwb3BvdmVyIHRoYXQgZGlzcGxheXMgYWxsIGV2ZW50cyB3aXRoaW4gYSBjZWxsXG5cdHNob3dTZWdQb3BvdmVyOiBmdW5jdGlvbihyb3csIGNvbCwgbW9yZUxpbmssIHNlZ3MpIHtcblx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXHRcdHZhciB2aWV3ID0gdGhpcy52aWV3O1xuXHRcdHZhciBtb3JlV3JhcCA9IG1vcmVMaW5rLnBhcmVudCgpOyAvLyB0aGUgPGRpdj4gd3JhcHBlciBhcm91bmQgdGhlIDxhPlxuXHRcdHZhciB0b3BFbDsgLy8gdGhlIGVsZW1lbnQgd2Ugd2FudCB0byBtYXRjaCB0aGUgdG9wIGNvb3JkaW5hdGUgb2Zcblx0XHR2YXIgb3B0aW9ucztcblxuXHRcdGlmICh0aGlzLnJvd0NudCA9PSAxKSB7XG5cdFx0XHR0b3BFbCA9IHZpZXcuZWw7IC8vIHdpbGwgY2F1c2UgdGhlIHBvcG92ZXIgdG8gY292ZXIgYW55IHNvcnQgb2YgaGVhZGVyXG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0dG9wRWwgPSB0aGlzLnJvd0Vscy5lcShyb3cpOyAvLyB3aWxsIGFsaWduIHdpdGggdG9wIG9mIHJvd1xuXHRcdH1cblxuXHRcdG9wdGlvbnMgPSB7XG5cdFx0XHRjbGFzc05hbWU6ICdmYy1tb3JlLXBvcG92ZXInLFxuXHRcdFx0Y29udGVudDogdGhpcy5yZW5kZXJTZWdQb3BvdmVyQ29udGVudChyb3csIGNvbCwgc2VncyksXG5cdFx0XHRwYXJlbnRFbDogdGhpcy52aWV3LmVsLCAvLyBhdHRhY2ggdG8gcm9vdCBvZiB2aWV3LiBndWFyYW50ZWVzIG91dHNpZGUgb2Ygc2Nyb2xsYmFycy5cblx0XHRcdHRvcDogdG9wRWwub2Zmc2V0KCkudG9wLFxuXHRcdFx0YXV0b0hpZGU6IHRydWUsIC8vIHdoZW4gdGhlIHVzZXIgY2xpY2tzIGVsc2V3aGVyZSwgaGlkZSB0aGUgcG9wb3ZlclxuXHRcdFx0dmlld3BvcnRDb25zdHJhaW46IHZpZXcub3B0KCdwb3BvdmVyVmlld3BvcnRDb25zdHJhaW4nKSxcblx0XHRcdGhpZGU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQvLyBraWxsIGV2ZXJ5dGhpbmcgd2hlbiB0aGUgcG9wb3ZlciBpcyBoaWRkZW5cblx0XHRcdFx0Ly8gbm90aWZ5IGV2ZW50cyB0byBiZSByZW1vdmVkXG5cdFx0XHRcdGlmIChfdGhpcy5wb3BvdmVyU2Vncykge1xuXHRcdFx0XHRcdHZhciBzZWc7XG5cdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBfdGhpcy5wb3BvdmVyU2Vncy5sZW5ndGg7ICsraSkge1xuXHRcdFx0XHRcdFx0c2VnID0gX3RoaXMucG9wb3ZlclNlZ3NbaV07XG5cdFx0XHRcdFx0XHR2aWV3LnB1YmxpY2x5VHJpZ2dlcignZXZlbnREZXN0cm95Jywgc2VnLmV2ZW50LCBzZWcuZXZlbnQsIHNlZy5lbCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdF90aGlzLnNlZ1BvcG92ZXIucmVtb3ZlRWxlbWVudCgpO1xuXHRcdFx0XHRfdGhpcy5zZWdQb3BvdmVyID0gbnVsbDtcblx0XHRcdFx0X3RoaXMucG9wb3ZlclNlZ3MgPSBudWxsO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHQvLyBEZXRlcm1pbmUgaG9yaXpvbnRhbCBjb29yZGluYXRlLlxuXHRcdC8vIFdlIHVzZSB0aGUgbW9yZVdyYXAgaW5zdGVhZCBvZiB0aGUgPHRkPiB0byBhdm9pZCBib3JkZXIgY29uZnVzaW9uLlxuXHRcdGlmICh0aGlzLmlzUlRMKSB7XG5cdFx0XHRvcHRpb25zLnJpZ2h0ID0gbW9yZVdyYXAub2Zmc2V0KCkubGVmdCArIG1vcmVXcmFwLm91dGVyV2lkdGgoKSArIDE7IC8vICsxIHRvIGJlIG92ZXIgY2VsbCBib3JkZXJcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRvcHRpb25zLmxlZnQgPSBtb3JlV3JhcC5vZmZzZXQoKS5sZWZ0IC0gMTsgLy8gLTEgdG8gYmUgb3ZlciBjZWxsIGJvcmRlclxuXHRcdH1cblxuXHRcdHRoaXMuc2VnUG9wb3ZlciA9IG5ldyBQb3BvdmVyKG9wdGlvbnMpO1xuXHRcdHRoaXMuc2VnUG9wb3Zlci5zaG93KCk7XG5cblx0XHQvLyB0aGUgcG9wb3ZlciBkb2Vzbid0IGxpdmUgd2l0aGluIHRoZSBncmlkJ3MgY29udGFpbmVyIGVsZW1lbnQsIGFuZCB0aHVzIHdvbid0IGdldCB0aGUgZXZlbnRcblx0XHQvLyBkZWxlZ2F0ZWQtaGFuZGxlcnMgZm9yIGZyZWUuIGF0dGFjaCBldmVudC1yZWxhdGVkIGhhbmRsZXJzIHRvIHRoZSBwb3BvdmVyLlxuXHRcdHRoaXMuYmluZFNlZ0hhbmRsZXJzVG9FbCh0aGlzLnNlZ1BvcG92ZXIuZWwpO1xuXHR9LFxuXG5cblx0Ly8gQnVpbGRzIHRoZSBpbm5lciBET00gY29udGVudHMgb2YgdGhlIHNlZ21lbnQgcG9wb3ZlclxuXHRyZW5kZXJTZWdQb3BvdmVyQ29udGVudDogZnVuY3Rpb24ocm93LCBjb2wsIHNlZ3MpIHtcblx0XHR2YXIgdmlldyA9IHRoaXMudmlldztcblx0XHR2YXIgaXNUaGVtZSA9IHZpZXcub3B0KCd0aGVtZScpO1xuXHRcdHZhciB0aXRsZSA9IHRoaXMuZ2V0Q2VsbERhdGUocm93LCBjb2wpLmZvcm1hdCh2aWV3Lm9wdCgnZGF5UG9wb3ZlckZvcm1hdCcpKTtcblx0XHR2YXIgY29udGVudCA9ICQoXG5cdFx0XHQnPGRpdiBjbGFzcz1cImZjLWhlYWRlciAnICsgdmlldy53aWRnZXRIZWFkZXJDbGFzcyArICdcIj4nICtcblx0XHRcdFx0JzxzcGFuIGNsYXNzPVwiZmMtY2xvc2UgJyArXG5cdFx0XHRcdFx0KGlzVGhlbWUgPyAndWktaWNvbiB1aS1pY29uLWNsb3NldGhpY2snIDogJ2ZjLWljb24gZmMtaWNvbi14JykgK1xuXHRcdFx0XHQnXCI+PC9zcGFuPicgK1xuXHRcdFx0XHQnPHNwYW4gY2xhc3M9XCJmYy10aXRsZVwiPicgK1xuXHRcdFx0XHRcdGh0bWxFc2NhcGUodGl0bGUpICtcblx0XHRcdFx0Jzwvc3Bhbj4nICtcblx0XHRcdFx0JzxkaXYgY2xhc3M9XCJmYy1jbGVhclwiLz4nICtcblx0XHRcdCc8L2Rpdj4nICtcblx0XHRcdCc8ZGl2IGNsYXNzPVwiZmMtYm9keSAnICsgdmlldy53aWRnZXRDb250ZW50Q2xhc3MgKyAnXCI+JyArXG5cdFx0XHRcdCc8ZGl2IGNsYXNzPVwiZmMtZXZlbnQtY29udGFpbmVyXCI+PC9kaXY+JyArXG5cdFx0XHQnPC9kaXY+J1xuXHRcdCk7XG5cdFx0dmFyIHNlZ0NvbnRhaW5lciA9IGNvbnRlbnQuZmluZCgnLmZjLWV2ZW50LWNvbnRhaW5lcicpO1xuXHRcdHZhciBpO1xuXG5cdFx0Ly8gcmVuZGVyIGVhY2ggc2VnJ3MgYGVsYCBhbmQgb25seSByZXR1cm4gdGhlIHZpc2libGUgc2Vnc1xuXHRcdHNlZ3MgPSB0aGlzLnJlbmRlckZnU2VnRWxzKHNlZ3MsIHRydWUpOyAvLyBkaXNhYmxlUmVzaXppbmc9dHJ1ZVxuXHRcdHRoaXMucG9wb3ZlclNlZ3MgPSBzZWdzO1xuXG5cdFx0Zm9yIChpID0gMDsgaSA8IHNlZ3MubGVuZ3RoOyBpKyspIHtcblxuXHRcdFx0Ly8gYmVjYXVzZSBzZWdtZW50cyBpbiB0aGUgcG9wb3ZlciBhcmUgbm90IHBhcnQgb2YgYSBncmlkIGNvb3JkaW5hdGUgc3lzdGVtLCBwcm92aWRlIGEgaGludCB0byBhbnlcblx0XHRcdC8vIGdyaWRzIHRoYXQgd2FudCB0byBkbyBkcmFnLW4tZHJvcCBhYm91dCB3aGljaCBjZWxsIGl0IGNhbWUgZnJvbVxuXHRcdFx0dGhpcy5wcmVwYXJlSGl0cygpO1xuXHRcdFx0c2Vnc1tpXS5oaXQgPSB0aGlzLmdldENlbGxIaXQocm93LCBjb2wpO1xuXHRcdFx0dGhpcy5yZWxlYXNlSGl0cygpO1xuXG5cdFx0XHRzZWdDb250YWluZXIuYXBwZW5kKHNlZ3NbaV0uZWwpO1xuXHRcdH1cblxuXHRcdHJldHVybiBjb250ZW50O1xuXHR9LFxuXG5cblx0Ly8gR2l2ZW4gdGhlIGV2ZW50cyB3aXRoaW4gYW4gYXJyYXkgb2Ygc2VnbWVudCBvYmplY3RzLCByZXNsaWNlIHRoZW0gdG8gYmUgaW4gYSBzaW5nbGUgZGF5XG5cdHJlc2xpY2VEYXlTZWdzOiBmdW5jdGlvbihzZWdzLCBkYXlEYXRlKSB7XG5cblx0XHQvLyBidWlsZCBhbiBhcnJheSBvZiB0aGUgb3JpZ2luYWwgZXZlbnRzXG5cdFx0dmFyIGV2ZW50cyA9ICQubWFwKHNlZ3MsIGZ1bmN0aW9uKHNlZykge1xuXHRcdFx0cmV0dXJuIHNlZy5ldmVudDtcblx0XHR9KTtcblxuXHRcdHZhciBkYXlTdGFydCA9IGRheURhdGUuY2xvbmUoKTtcblx0XHR2YXIgZGF5RW5kID0gZGF5U3RhcnQuY2xvbmUoKS5hZGQoMSwgJ2RheXMnKTtcblx0XHR2YXIgZGF5UmFuZ2UgPSB7IHN0YXJ0OiBkYXlTdGFydCwgZW5kOiBkYXlFbmQgfTtcblxuXHRcdC8vIHNsaWNlIHRoZSBldmVudHMgd2l0aCBhIGN1c3RvbSBzbGljaW5nIGZ1bmN0aW9uXG5cdFx0c2VncyA9IHRoaXMuZXZlbnRzVG9TZWdzKFxuXHRcdFx0ZXZlbnRzLFxuXHRcdFx0ZnVuY3Rpb24ocmFuZ2UpIHtcblx0XHRcdFx0dmFyIHNlZyA9IGludGVyc2VjdFJhbmdlcyhyYW5nZSwgZGF5UmFuZ2UpOyAvLyB1bmRlZmluZCBpZiBubyBpbnRlcnNlY3Rpb25cblx0XHRcdFx0cmV0dXJuIHNlZyA/IFsgc2VnIF0gOiBbXTsgLy8gbXVzdCByZXR1cm4gYW4gYXJyYXkgb2Ygc2VnbWVudHNcblx0XHRcdH1cblx0XHQpO1xuXG5cdFx0Ly8gZm9yY2UgYW4gb3JkZXIgYmVjYXVzZSBldmVudHNUb1NlZ3MgZG9lc24ndCBndWFyYW50ZWUgb25lXG5cdFx0dGhpcy5zb3J0RXZlbnRTZWdzKHNlZ3MpO1xuXG5cdFx0cmV0dXJuIHNlZ3M7XG5cdH0sXG5cblxuXHQvLyBHZW5lcmF0ZXMgdGhlIHRleHQgdGhhdCBzaG91bGQgYmUgaW5zaWRlIGEgXCJtb3JlXCIgbGluaywgZ2l2ZW4gdGhlIG51bWJlciBvZiBldmVudHMgaXQgcmVwcmVzZW50c1xuXHRnZXRNb3JlTGlua1RleHQ6IGZ1bmN0aW9uKG51bSkge1xuXHRcdHZhciBvcHQgPSB0aGlzLnZpZXcub3B0KCdldmVudExpbWl0VGV4dCcpO1xuXG5cdFx0aWYgKHR5cGVvZiBvcHQgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdHJldHVybiBvcHQobnVtKTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRyZXR1cm4gJysnICsgbnVtICsgJyAnICsgb3B0O1xuXHRcdH1cblx0fSxcblxuXG5cdC8vIFJldHVybnMgc2VnbWVudHMgd2l0aGluIGEgZ2l2ZW4gY2VsbC5cblx0Ly8gSWYgYHN0YXJ0TGV2ZWxgIGlzIHNwZWNpZmllZCwgcmV0dXJucyBvbmx5IGV2ZW50cyBpbmNsdWRpbmcgYW5kIGJlbG93IHRoYXQgbGV2ZWwuIE90aGVyd2lzZSByZXR1cm5zIGFsbCBzZWdzLlxuXHRnZXRDZWxsU2VnczogZnVuY3Rpb24ocm93LCBjb2wsIHN0YXJ0TGV2ZWwpIHtcblx0XHR2YXIgc2VnTWF0cml4ID0gdGhpcy5yb3dTdHJ1Y3RzW3Jvd10uc2VnTWF0cml4O1xuXHRcdHZhciBsZXZlbCA9IHN0YXJ0TGV2ZWwgfHwgMDtcblx0XHR2YXIgc2VncyA9IFtdO1xuXHRcdHZhciBzZWc7XG5cblx0XHR3aGlsZSAobGV2ZWwgPCBzZWdNYXRyaXgubGVuZ3RoKSB7XG5cdFx0XHRzZWcgPSBzZWdNYXRyaXhbbGV2ZWxdW2NvbF07XG5cdFx0XHRpZiAoc2VnKSB7XG5cdFx0XHRcdHNlZ3MucHVzaChzZWcpO1xuXHRcdFx0fVxuXHRcdFx0bGV2ZWwrKztcblx0XHR9XG5cblx0XHRyZXR1cm4gc2Vncztcblx0fVxuXG59KTtcblxuOztcblxuLyogQSBjb21wb25lbnQgdGhhdCByZW5kZXJzIG9uZSBvciBtb3JlIGNvbHVtbnMgb2YgdmVydGljYWwgdGltZSBzbG90c1xuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4vLyBXZSBtaXhpbiBEYXlUYWJsZSwgZXZlbiB0aG91Z2ggdGhlcmUgaXMgb25seSBhIHNpbmdsZSByb3cgb2YgZGF5c1xuXG52YXIgVGltZUdyaWQgPSBGQy5UaW1lR3JpZCA9IEdyaWQuZXh0ZW5kKERheVRhYmxlTWl4aW4sIHtcblxuXHRzbG90RHVyYXRpb246IG51bGwsIC8vIGR1cmF0aW9uIG9mIGEgXCJzbG90XCIsIGEgZGlzdGluY3QgdGltZSBzZWdtZW50IG9uIGdpdmVuIGRheSwgdmlzdWFsaXplZCBieSBsaW5lc1xuXHRzbmFwRHVyYXRpb246IG51bGwsIC8vIGdyYW51bGFyaXR5IG9mIHRpbWUgZm9yIGRyYWdnaW5nIGFuZCBzZWxlY3Rpbmdcblx0c25hcHNQZXJTbG90OiBudWxsLFxuXHRtaW5UaW1lOiBudWxsLCAvLyBEdXJhdGlvbiBvYmplY3QgdGhhdCBkZW5vdGVzIHRoZSBmaXJzdCB2aXNpYmxlIHRpbWUgb2YgYW55IGdpdmVuIGRheVxuXHRtYXhUaW1lOiBudWxsLCAvLyBEdXJhdGlvbiBvYmplY3QgdGhhdCBkZW5vdGVzIHRoZSBleGNsdXNpdmUgdmlzaWJsZSBlbmQgdGltZSBvZiBhbnkgZ2l2ZW4gZGF5XG5cdGxhYmVsRm9ybWF0OiBudWxsLCAvLyBmb3JtYXR0aW5nIHN0cmluZyBmb3IgdGltZXMgcnVubmluZyBhbG9uZyB2ZXJ0aWNhbCBheGlzXG5cdGxhYmVsSW50ZXJ2YWw6IG51bGwsIC8vIGR1cmF0aW9uIG9mIGhvdyBvZnRlbiBhIGxhYmVsIHNob3VsZCBiZSBkaXNwbGF5ZWQgZm9yIGEgc2xvdFxuXG5cdGNvbEVsczogbnVsbCwgLy8gY2VsbHMgZWxlbWVudHMgaW4gdGhlIGRheS1yb3cgYmFja2dyb3VuZFxuXHRzbGF0Q29udGFpbmVyRWw6IG51bGwsIC8vIGRpdiB0aGF0IHdyYXBzIGFsbCB0aGUgc2xhdCByb3dzXG5cdHNsYXRFbHM6IG51bGwsIC8vIGVsZW1lbnRzIHJ1bm5pbmcgaG9yaXpvbnRhbGx5IGFjcm9zcyBhbGwgY29sdW1uc1xuXHRub3dJbmRpY2F0b3JFbHM6IG51bGwsXG5cblx0Y29sQ29vcmRDYWNoZTogbnVsbCxcblx0c2xhdENvb3JkQ2FjaGU6IG51bGwsXG5cblxuXHRjb25zdHJ1Y3RvcjogZnVuY3Rpb24oKSB7XG5cdFx0R3JpZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyAvLyBjYWxsIHRoZSBzdXBlci1jb25zdHJ1Y3RvclxuXG5cdFx0dGhpcy5wcm9jZXNzT3B0aW9ucygpO1xuXHR9LFxuXG5cblx0Ly8gUmVuZGVycyB0aGUgdGltZSBncmlkIGludG8gYHRoaXMuZWxgLCB3aGljaCBzaG91bGQgYWxyZWFkeSBiZSBhc3NpZ25lZC5cblx0Ly8gUmVsaWVzIG9uIHRoZSB2aWV3J3MgY29sQ250LiBJbiB0aGUgZnV0dXJlLCB0aGlzIGNvbXBvbmVudCBzaG91bGQgcHJvYmFibHkgYmUgc2VsZi1zdWZmaWNpZW50LlxuXHRyZW5kZXJEYXRlczogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5lbC5odG1sKHRoaXMucmVuZGVySHRtbCgpKTtcblx0XHR0aGlzLmNvbEVscyA9IHRoaXMuZWwuZmluZCgnLmZjLWRheScpO1xuXHRcdHRoaXMuc2xhdENvbnRhaW5lckVsID0gdGhpcy5lbC5maW5kKCcuZmMtc2xhdHMnKTtcblx0XHR0aGlzLnNsYXRFbHMgPSB0aGlzLnNsYXRDb250YWluZXJFbC5maW5kKCd0cicpO1xuXG5cdFx0dGhpcy5jb2xDb29yZENhY2hlID0gbmV3IENvb3JkQ2FjaGUoe1xuXHRcdFx0ZWxzOiB0aGlzLmNvbEVscyxcblx0XHRcdGlzSG9yaXpvbnRhbDogdHJ1ZVxuXHRcdH0pO1xuXHRcdHRoaXMuc2xhdENvb3JkQ2FjaGUgPSBuZXcgQ29vcmRDYWNoZSh7XG5cdFx0XHRlbHM6IHRoaXMuc2xhdEVscyxcblx0XHRcdGlzVmVydGljYWw6IHRydWVcblx0XHR9KTtcblxuXHRcdHRoaXMucmVuZGVyQ29udGVudFNrZWxldG9uKCk7XG5cdH0sXG5cblxuXHQvLyBSZW5kZXJzIHRoZSBiYXNpYyBIVE1MIHNrZWxldG9uIGZvciB0aGUgZ3JpZFxuXHRyZW5kZXJIdG1sOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gJycgK1xuXHRcdFx0JzxkaXYgY2xhc3M9XCJmYy1iZ1wiPicgK1xuXHRcdFx0XHQnPHRhYmxlPicgK1xuXHRcdFx0XHRcdHRoaXMucmVuZGVyQmdUckh0bWwoMCkgKyAvLyByb3c9MFxuXHRcdFx0XHQnPC90YWJsZT4nICtcblx0XHRcdCc8L2Rpdj4nICtcblx0XHRcdCc8ZGl2IGNsYXNzPVwiZmMtc2xhdHNcIj4nICtcblx0XHRcdFx0Jzx0YWJsZT4nICtcblx0XHRcdFx0XHR0aGlzLnJlbmRlclNsYXRSb3dIdG1sKCkgK1xuXHRcdFx0XHQnPC90YWJsZT4nICtcblx0XHRcdCc8L2Rpdj4nO1xuXHR9LFxuXG5cblx0Ly8gR2VuZXJhdGVzIHRoZSBIVE1MIGZvciB0aGUgaG9yaXpvbnRhbCBcInNsYXRzXCIgdGhhdCBydW4gd2lkdGgtd2lzZS4gSGFzIGEgdGltZSBheGlzIG9uIGEgc2lkZS4gRGVwZW5kcyBvbiBSVEwuXG5cdHJlbmRlclNsYXRSb3dIdG1sOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgdmlldyA9IHRoaXMudmlldztcblx0XHR2YXIgaXNSVEwgPSB0aGlzLmlzUlRMO1xuXHRcdHZhciBodG1sID0gJyc7XG5cdFx0dmFyIHNsb3RUaW1lID0gbW9tZW50LmR1cmF0aW9uKCt0aGlzLm1pblRpbWUpOyAvLyB3aXNoIHRoZXJlIHdhcyAuY2xvbmUoKSBmb3IgZHVyYXRpb25zXG5cdFx0dmFyIHNsb3REYXRlOyAvLyB3aWxsIGJlIG9uIHRoZSB2aWV3J3MgZmlyc3QgZGF5LCBidXQgd2Ugb25seSBjYXJlIGFib3V0IGl0cyB0aW1lXG5cdFx0dmFyIGlzTGFiZWxlZDtcblx0XHR2YXIgYXhpc0h0bWw7XG5cblx0XHQvLyBDYWxjdWxhdGUgdGhlIHRpbWUgZm9yIGVhY2ggc2xvdFxuXHRcdHdoaWxlIChzbG90VGltZSA8IHRoaXMubWF4VGltZSkge1xuXHRcdFx0c2xvdERhdGUgPSB0aGlzLnN0YXJ0LmNsb25lKCkudGltZShzbG90VGltZSk7XG5cdFx0XHRpc0xhYmVsZWQgPSBpc0ludChkaXZpZGVEdXJhdGlvbkJ5RHVyYXRpb24oc2xvdFRpbWUsIHRoaXMubGFiZWxJbnRlcnZhbCkpO1xuXG5cdFx0XHRheGlzSHRtbCA9XG5cdFx0XHRcdCc8dGQgY2xhc3M9XCJmYy1heGlzIGZjLXRpbWUgJyArIHZpZXcud2lkZ2V0Q29udGVudENsYXNzICsgJ1wiICcgKyB2aWV3LmF4aXNTdHlsZUF0dHIoKSArICc+JyArXG5cdFx0XHRcdFx0KGlzTGFiZWxlZCA/XG5cdFx0XHRcdFx0XHQnPHNwYW4+JyArIC8vIGZvciBtYXRjaENlbGxXaWR0aHNcblx0XHRcdFx0XHRcdFx0aHRtbEVzY2FwZShzbG90RGF0ZS5mb3JtYXQodGhpcy5sYWJlbEZvcm1hdCkpICtcblx0XHRcdFx0XHRcdCc8L3NwYW4+JyA6XG5cdFx0XHRcdFx0XHQnJ1xuXHRcdFx0XHRcdFx0KSArXG5cdFx0XHRcdCc8L3RkPic7XG5cblx0XHRcdGh0bWwgKz1cblx0XHRcdFx0Jzx0ciBkYXRhLXRpbWU9XCInICsgc2xvdERhdGUuZm9ybWF0KCdISDptbTpzcycpICsgJ1wiJyArXG5cdFx0XHRcdFx0KGlzTGFiZWxlZCA/ICcnIDogJyBjbGFzcz1cImZjLW1pbm9yXCInKSArXG5cdFx0XHRcdFx0Jz4nICtcblx0XHRcdFx0XHQoIWlzUlRMID8gYXhpc0h0bWwgOiAnJykgK1xuXHRcdFx0XHRcdCc8dGQgY2xhc3M9XCInICsgdmlldy53aWRnZXRDb250ZW50Q2xhc3MgKyAnXCIvPicgK1xuXHRcdFx0XHRcdChpc1JUTCA/IGF4aXNIdG1sIDogJycpICtcblx0XHRcdFx0XCI8L3RyPlwiO1xuXG5cdFx0XHRzbG90VGltZS5hZGQodGhpcy5zbG90RHVyYXRpb24pO1xuXHRcdH1cblxuXHRcdHJldHVybiBodG1sO1xuXHR9LFxuXG5cblx0LyogT3B0aW9uc1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gUGFyc2VzIHZhcmlvdXMgb3B0aW9ucyBpbnRvIHByb3BlcnRpZXMgb2YgdGhpcyBvYmplY3Rcblx0cHJvY2Vzc09wdGlvbnM6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB2aWV3ID0gdGhpcy52aWV3O1xuXHRcdHZhciBzbG90RHVyYXRpb24gPSB2aWV3Lm9wdCgnc2xvdER1cmF0aW9uJyk7XG5cdFx0dmFyIHNuYXBEdXJhdGlvbiA9IHZpZXcub3B0KCdzbmFwRHVyYXRpb24nKTtcblx0XHR2YXIgaW5wdXQ7XG5cblx0XHRzbG90RHVyYXRpb24gPSBtb21lbnQuZHVyYXRpb24oc2xvdER1cmF0aW9uKTtcblx0XHRzbmFwRHVyYXRpb24gPSBzbmFwRHVyYXRpb24gPyBtb21lbnQuZHVyYXRpb24oc25hcER1cmF0aW9uKSA6IHNsb3REdXJhdGlvbjtcblxuXHRcdHRoaXMuc2xvdER1cmF0aW9uID0gc2xvdER1cmF0aW9uO1xuXHRcdHRoaXMuc25hcER1cmF0aW9uID0gc25hcER1cmF0aW9uO1xuXHRcdHRoaXMuc25hcHNQZXJTbG90ID0gc2xvdER1cmF0aW9uIC8gc25hcER1cmF0aW9uOyAvLyBUT0RPOiBlbnN1cmUgYW4gaW50ZWdlciBtdWx0aXBsZT9cblxuXHRcdHRoaXMubWluUmVzaXplRHVyYXRpb24gPSBzbmFwRHVyYXRpb247IC8vIGhhY2tcblxuXHRcdHRoaXMubWluVGltZSA9IG1vbWVudC5kdXJhdGlvbih2aWV3Lm9wdCgnbWluVGltZScpKTtcblx0XHR0aGlzLm1heFRpbWUgPSBtb21lbnQuZHVyYXRpb24odmlldy5vcHQoJ21heFRpbWUnKSk7XG5cblx0XHQvLyBtaWdodCBiZSBhbiBhcnJheSB2YWx1ZSAoZm9yIFRpbWVsaW5lVmlldykuXG5cdFx0Ly8gaWYgc28sIGdldHRpbmcgdGhlIG1vc3QgZ3JhbnVsYXIgZW50cnkgKHRoZSBsYXN0IG9uZSBwcm9iYWJseSkuXG5cdFx0aW5wdXQgPSB2aWV3Lm9wdCgnc2xvdExhYmVsRm9ybWF0Jyk7XG5cdFx0aWYgKCQuaXNBcnJheShpbnB1dCkpIHtcblx0XHRcdGlucHV0ID0gaW5wdXRbaW5wdXQubGVuZ3RoIC0gMV07XG5cdFx0fVxuXG5cdFx0dGhpcy5sYWJlbEZvcm1hdCA9XG5cdFx0XHRpbnB1dCB8fFxuXHRcdFx0dmlldy5vcHQoJ3NtYWxsVGltZUZvcm1hdCcpOyAvLyB0aGUgY29tcHV0ZWQgZGVmYXVsdFxuXG5cdFx0aW5wdXQgPSB2aWV3Lm9wdCgnc2xvdExhYmVsSW50ZXJ2YWwnKTtcblx0XHR0aGlzLmxhYmVsSW50ZXJ2YWwgPSBpbnB1dCA/XG5cdFx0XHRtb21lbnQuZHVyYXRpb24oaW5wdXQpIDpcblx0XHRcdHRoaXMuY29tcHV0ZUxhYmVsSW50ZXJ2YWwoc2xvdER1cmF0aW9uKTtcblx0fSxcblxuXG5cdC8vIENvbXB1dGVzIGFuIGF1dG9tYXRpYyB2YWx1ZSBmb3Igc2xvdExhYmVsSW50ZXJ2YWxcblx0Y29tcHV0ZUxhYmVsSW50ZXJ2YWw6IGZ1bmN0aW9uKHNsb3REdXJhdGlvbikge1xuXHRcdHZhciBpO1xuXHRcdHZhciBsYWJlbEludGVydmFsO1xuXHRcdHZhciBzbG90c1BlckxhYmVsO1xuXG5cdFx0Ly8gZmluZCB0aGUgc21hbGxlc3Qgc3RvY2sgbGFiZWwgaW50ZXJ2YWwgdGhhdCByZXN1bHRzIGluIG1vcmUgdGhhbiBvbmUgc2xvdHMtcGVyLWxhYmVsXG5cdFx0Zm9yIChpID0gQUdFTkRBX1NUT0NLX1NVQl9EVVJBVElPTlMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdGxhYmVsSW50ZXJ2YWwgPSBtb21lbnQuZHVyYXRpb24oQUdFTkRBX1NUT0NLX1NVQl9EVVJBVElPTlNbaV0pO1xuXHRcdFx0c2xvdHNQZXJMYWJlbCA9IGRpdmlkZUR1cmF0aW9uQnlEdXJhdGlvbihsYWJlbEludGVydmFsLCBzbG90RHVyYXRpb24pO1xuXHRcdFx0aWYgKGlzSW50KHNsb3RzUGVyTGFiZWwpICYmIHNsb3RzUGVyTGFiZWwgPiAxKSB7XG5cdFx0XHRcdHJldHVybiBsYWJlbEludGVydmFsO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBtb21lbnQuZHVyYXRpb24oc2xvdER1cmF0aW9uKTsgLy8gZmFsbCBiYWNrLiBjbG9uZVxuXHR9LFxuXG5cblx0Ly8gQ29tcHV0ZXMgYSBkZWZhdWx0IGV2ZW50IHRpbWUgZm9ybWF0dGluZyBzdHJpbmcgaWYgYHRpbWVGb3JtYXRgIGlzIG5vdCBleHBsaWNpdGx5IGRlZmluZWRcblx0Y29tcHV0ZUV2ZW50VGltZUZvcm1hdDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMudmlldy5vcHQoJ25vTWVyaWRpZW1UaW1lRm9ybWF0Jyk7IC8vIGxpa2UgXCI2OjMwXCIgKG5vIEFNL1BNKVxuXHR9LFxuXG5cblx0Ly8gQ29tcHV0ZXMgYSBkZWZhdWx0IGBkaXNwbGF5RXZlbnRFbmRgIHZhbHVlIGlmIG9uZSBpcyBub3QgZXhwbGljbHR5IGRlZmluZWRcblx0Y29tcHV0ZURpc3BsYXlFdmVudEVuZDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH0sXG5cblxuXHQvKiBIaXQgU3lzdGVtXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHRwcmVwYXJlSGl0czogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5jb2xDb29yZENhY2hlLmJ1aWxkKCk7XG5cdFx0dGhpcy5zbGF0Q29vcmRDYWNoZS5idWlsZCgpO1xuXHR9LFxuXG5cblx0cmVsZWFzZUhpdHM6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuY29sQ29vcmRDYWNoZS5jbGVhcigpO1xuXHRcdC8vIE5PVEU6IGRvbid0IGNsZWFyIHNsYXRDb29yZENhY2hlIGJlY2F1c2Ugd2UgcmVseSBvbiBpdCBmb3IgY29tcHV0ZVRpbWVUb3Bcblx0fSxcblxuXG5cdHF1ZXJ5SGl0OiBmdW5jdGlvbihsZWZ0T2Zmc2V0LCB0b3BPZmZzZXQpIHtcblx0XHR2YXIgc25hcHNQZXJTbG90ID0gdGhpcy5zbmFwc1BlclNsb3Q7XG5cdFx0dmFyIGNvbENvb3JkQ2FjaGUgPSB0aGlzLmNvbENvb3JkQ2FjaGU7XG5cdFx0dmFyIHNsYXRDb29yZENhY2hlID0gdGhpcy5zbGF0Q29vcmRDYWNoZTtcblxuXHRcdGlmIChjb2xDb29yZENhY2hlLmlzTGVmdEluQm91bmRzKGxlZnRPZmZzZXQpICYmIHNsYXRDb29yZENhY2hlLmlzVG9wSW5Cb3VuZHModG9wT2Zmc2V0KSkge1xuXHRcdFx0dmFyIGNvbEluZGV4ID0gY29sQ29vcmRDYWNoZS5nZXRIb3Jpem9udGFsSW5kZXgobGVmdE9mZnNldCk7XG5cdFx0XHR2YXIgc2xhdEluZGV4ID0gc2xhdENvb3JkQ2FjaGUuZ2V0VmVydGljYWxJbmRleCh0b3BPZmZzZXQpO1xuXG5cdFx0XHRpZiAoY29sSW5kZXggIT0gbnVsbCAmJiBzbGF0SW5kZXggIT0gbnVsbCkge1xuXHRcdFx0XHR2YXIgc2xhdFRvcCA9IHNsYXRDb29yZENhY2hlLmdldFRvcE9mZnNldChzbGF0SW5kZXgpO1xuXHRcdFx0XHR2YXIgc2xhdEhlaWdodCA9IHNsYXRDb29yZENhY2hlLmdldEhlaWdodChzbGF0SW5kZXgpO1xuXHRcdFx0XHR2YXIgcGFydGlhbCA9ICh0b3BPZmZzZXQgLSBzbGF0VG9wKSAvIHNsYXRIZWlnaHQ7IC8vIGZsb2F0aW5nIHBvaW50IG51bWJlciBiZXR3ZWVuIDAgYW5kIDFcblx0XHRcdFx0dmFyIGxvY2FsU25hcEluZGV4ID0gTWF0aC5mbG9vcihwYXJ0aWFsICogc25hcHNQZXJTbG90KTsgLy8gdGhlIHNuYXAgIyByZWxhdGl2ZSB0byBzdGFydCBvZiBzbGF0XG5cdFx0XHRcdHZhciBzbmFwSW5kZXggPSBzbGF0SW5kZXggKiBzbmFwc1BlclNsb3QgKyBsb2NhbFNuYXBJbmRleDtcblx0XHRcdFx0dmFyIHNuYXBUb3AgPSBzbGF0VG9wICsgKGxvY2FsU25hcEluZGV4IC8gc25hcHNQZXJTbG90KSAqIHNsYXRIZWlnaHQ7XG5cdFx0XHRcdHZhciBzbmFwQm90dG9tID0gc2xhdFRvcCArICgobG9jYWxTbmFwSW5kZXggKyAxKSAvIHNuYXBzUGVyU2xvdCkgKiBzbGF0SGVpZ2h0O1xuXG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0Y29sOiBjb2xJbmRleCxcblx0XHRcdFx0XHRzbmFwOiBzbmFwSW5kZXgsXG5cdFx0XHRcdFx0Y29tcG9uZW50OiB0aGlzLCAvLyBuZWVkZWQgdW5mb3J0dW5hdGVseSA6KFxuXHRcdFx0XHRcdGxlZnQ6IGNvbENvb3JkQ2FjaGUuZ2V0TGVmdE9mZnNldChjb2xJbmRleCksXG5cdFx0XHRcdFx0cmlnaHQ6IGNvbENvb3JkQ2FjaGUuZ2V0UmlnaHRPZmZzZXQoY29sSW5kZXgpLFxuXHRcdFx0XHRcdHRvcDogc25hcFRvcCxcblx0XHRcdFx0XHRib3R0b206IHNuYXBCb3R0b21cblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblxuXHRnZXRIaXRTcGFuOiBmdW5jdGlvbihoaXQpIHtcblx0XHR2YXIgc3RhcnQgPSB0aGlzLmdldENlbGxEYXRlKDAsIGhpdC5jb2wpOyAvLyByb3c9MFxuXHRcdHZhciB0aW1lID0gdGhpcy5jb21wdXRlU25hcFRpbWUoaGl0LnNuYXApOyAvLyBwYXNzIGluIHRoZSBzbmFwLWluZGV4XG5cdFx0dmFyIGVuZDtcblxuXHRcdHN0YXJ0LnRpbWUodGltZSk7XG5cdFx0ZW5kID0gc3RhcnQuY2xvbmUoKS5hZGQodGhpcy5zbmFwRHVyYXRpb24pO1xuXG5cdFx0cmV0dXJuIHsgc3RhcnQ6IHN0YXJ0LCBlbmQ6IGVuZCB9O1xuXHR9LFxuXG5cblx0Z2V0SGl0RWw6IGZ1bmN0aW9uKGhpdCkge1xuXHRcdHJldHVybiB0aGlzLmNvbEVscy5lcShoaXQuY29sKTtcblx0fSxcblxuXG5cdC8qIERhdGVzXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHRyYW5nZVVwZGF0ZWQ6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMudXBkYXRlRGF5VGFibGUoKTtcblx0fSxcblxuXG5cdC8vIEdpdmVuIGEgcm93IG51bWJlciBvZiB0aGUgZ3JpZCwgcmVwcmVzZW50aW5nIGEgXCJzbmFwXCIsIHJldHVybnMgYSB0aW1lIChEdXJhdGlvbikgZnJvbSBpdHMgc3RhcnQtb2YtZGF5XG5cdGNvbXB1dGVTbmFwVGltZTogZnVuY3Rpb24oc25hcEluZGV4KSB7XG5cdFx0cmV0dXJuIG1vbWVudC5kdXJhdGlvbih0aGlzLm1pblRpbWUgKyB0aGlzLnNuYXBEdXJhdGlvbiAqIHNuYXBJbmRleCk7XG5cdH0sXG5cblxuXHQvLyBTbGljZXMgdXAgdGhlIGdpdmVuIHNwYW4gKHVuem9uZWQgc3RhcnQvZW5kIHdpdGggb3RoZXIgbWlzYyBkYXRhKSBpbnRvIGFuIGFycmF5IG9mIHNlZ21lbnRzXG5cdHNwYW5Ub1NlZ3M6IGZ1bmN0aW9uKHNwYW4pIHtcblx0XHR2YXIgc2VncyA9IHRoaXMuc2xpY2VSYW5nZUJ5VGltZXMoc3Bhbik7XG5cdFx0dmFyIGk7XG5cblx0XHRmb3IgKGkgPSAwOyBpIDwgc2Vncy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKHRoaXMuaXNSVEwpIHtcblx0XHRcdFx0c2Vnc1tpXS5jb2wgPSB0aGlzLmRheXNQZXJSb3cgLSAxIC0gc2Vnc1tpXS5kYXlJbmRleDtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRzZWdzW2ldLmNvbCA9IHNlZ3NbaV0uZGF5SW5kZXg7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHNlZ3M7XG5cdH0sXG5cblxuXHRzbGljZVJhbmdlQnlUaW1lczogZnVuY3Rpb24ocmFuZ2UpIHtcblx0XHR2YXIgc2VncyA9IFtdO1xuXHRcdHZhciBzZWc7XG5cdFx0dmFyIGRheUluZGV4O1xuXHRcdHZhciBkYXlEYXRlO1xuXHRcdHZhciBkYXlSYW5nZTtcblxuXHRcdGZvciAoZGF5SW5kZXggPSAwOyBkYXlJbmRleCA8IHRoaXMuZGF5c1BlclJvdzsgZGF5SW5kZXgrKykge1xuXHRcdFx0ZGF5RGF0ZSA9IHRoaXMuZGF5RGF0ZXNbZGF5SW5kZXhdLmNsb25lKCk7IC8vIFRPRE86IGJldHRlciBBUEkgZm9yIHRoaXM/XG5cdFx0XHRkYXlSYW5nZSA9IHtcblx0XHRcdFx0c3RhcnQ6IGRheURhdGUuY2xvbmUoKS50aW1lKHRoaXMubWluVGltZSksXG5cdFx0XHRcdGVuZDogZGF5RGF0ZS5jbG9uZSgpLnRpbWUodGhpcy5tYXhUaW1lKVxuXHRcdFx0fTtcblx0XHRcdHNlZyA9IGludGVyc2VjdFJhbmdlcyhyYW5nZSwgZGF5UmFuZ2UpOyAvLyBib3RoIHdpbGwgYmUgYW1iaWcgdGltZXpvbmVcblx0XHRcdGlmIChzZWcpIHtcblx0XHRcdFx0c2VnLmRheUluZGV4ID0gZGF5SW5kZXg7XG5cdFx0XHRcdHNlZ3MucHVzaChzZWcpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBzZWdzO1xuXHR9LFxuXG5cblx0LyogQ29vcmRpbmF0ZXNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdHVwZGF0ZVNpemU6IGZ1bmN0aW9uKGlzUmVzaXplKSB7IC8vIE5PVCBhIHN0YW5kYXJkIEdyaWQgbWV0aG9kXG5cdFx0dGhpcy5zbGF0Q29vcmRDYWNoZS5idWlsZCgpO1xuXG5cdFx0aWYgKGlzUmVzaXplKSB7XG5cdFx0XHR0aGlzLnVwZGF0ZVNlZ1ZlcnRpY2Fscyhcblx0XHRcdFx0W10uY29uY2F0KHRoaXMuZmdTZWdzIHx8IFtdLCB0aGlzLmJnU2VncyB8fCBbXSwgdGhpcy5idXNpbmVzc1NlZ3MgfHwgW10pXG5cdFx0XHQpO1xuXHRcdH1cblx0fSxcblxuXG5cdGdldFRvdGFsU2xhdEhlaWdodDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuc2xhdENvbnRhaW5lckVsLm91dGVySGVpZ2h0KCk7XG5cdH0sXG5cblxuXHQvLyBDb21wdXRlcyB0aGUgdG9wIGNvb3JkaW5hdGUsIHJlbGF0aXZlIHRvIHRoZSBib3VuZHMgb2YgdGhlIGdyaWQsIG9mIHRoZSBnaXZlbiBkYXRlLlxuXHQvLyBBIGBzdGFydE9mRGF5RGF0ZWAgbXVzdCBiZSBnaXZlbiBmb3IgYXZvaWRpbmcgYW1iaWd1aXR5IG92ZXIgaG93IHRvIHRyZWF0IG1pZG5pZ2h0LlxuXHRjb21wdXRlRGF0ZVRvcDogZnVuY3Rpb24oZGF0ZSwgc3RhcnRPZkRheURhdGUpIHtcblx0XHRyZXR1cm4gdGhpcy5jb21wdXRlVGltZVRvcChcblx0XHRcdG1vbWVudC5kdXJhdGlvbihcblx0XHRcdFx0ZGF0ZSAtIHN0YXJ0T2ZEYXlEYXRlLmNsb25lKCkuc3RyaXBUaW1lKClcblx0XHRcdClcblx0XHQpO1xuXHR9LFxuXG5cblx0Ly8gQ29tcHV0ZXMgdGhlIHRvcCBjb29yZGluYXRlLCByZWxhdGl2ZSB0byB0aGUgYm91bmRzIG9mIHRoZSBncmlkLCBvZiB0aGUgZ2l2ZW4gdGltZSAoYSBEdXJhdGlvbikuXG5cdGNvbXB1dGVUaW1lVG9wOiBmdW5jdGlvbih0aW1lKSB7XG5cdFx0dmFyIGxlbiA9IHRoaXMuc2xhdEVscy5sZW5ndGg7XG5cdFx0dmFyIHNsYXRDb3ZlcmFnZSA9ICh0aW1lIC0gdGhpcy5taW5UaW1lKSAvIHRoaXMuc2xvdER1cmF0aW9uOyAvLyBmbG9hdGluZy1wb2ludCB2YWx1ZSBvZiAjIG9mIHNsb3RzIGNvdmVyZWRcblx0XHR2YXIgc2xhdEluZGV4O1xuXHRcdHZhciBzbGF0UmVtYWluZGVyO1xuXG5cdFx0Ly8gY29tcHV0ZSBhIGZsb2F0aW5nLXBvaW50IG51bWJlciBmb3IgaG93IG1hbnkgc2xhdHMgc2hvdWxkIGJlIHByb2dyZXNzZWQgdGhyb3VnaC5cblx0XHQvLyBmcm9tIDAgdG8gbnVtYmVyIG9mIHNsYXRzIChpbmNsdXNpdmUpXG5cdFx0Ly8gY29uc3RyYWluZWQgYmVjYXVzZSBtaW5UaW1lL21heFRpbWUgbWlnaHQgYmUgY3VzdG9taXplZC5cblx0XHRzbGF0Q292ZXJhZ2UgPSBNYXRoLm1heCgwLCBzbGF0Q292ZXJhZ2UpO1xuXHRcdHNsYXRDb3ZlcmFnZSA9IE1hdGgubWluKGxlbiwgc2xhdENvdmVyYWdlKTtcblxuXHRcdC8vIGFuIGludGVnZXIgaW5kZXggb2YgdGhlIGZ1cnRoZXN0IHdob2xlIHNsYXRcblx0XHQvLyBmcm9tIDAgdG8gbnVtYmVyIHNsYXRzICgqZXhjbHVzaXZlKiwgc28gbGVuLTEpXG5cdFx0c2xhdEluZGV4ID0gTWF0aC5mbG9vcihzbGF0Q292ZXJhZ2UpO1xuXHRcdHNsYXRJbmRleCA9IE1hdGgubWluKHNsYXRJbmRleCwgbGVuIC0gMSk7XG5cblx0XHQvLyBob3cgbXVjaCBmdXJ0aGVyIHRocm91Z2ggdGhlIHNsYXRJbmRleCBzbGF0IChmcm9tIDAuMC0xLjApIG11c3QgYmUgY292ZXJlZCBpbiBhZGRpdGlvbi5cblx0XHQvLyBjb3VsZCBiZSAxLjAgaWYgc2xhdENvdmVyYWdlIGlzIGNvdmVyaW5nICphbGwqIHRoZSBzbG90c1xuXHRcdHNsYXRSZW1haW5kZXIgPSBzbGF0Q292ZXJhZ2UgLSBzbGF0SW5kZXg7XG5cblx0XHRyZXR1cm4gdGhpcy5zbGF0Q29vcmRDYWNoZS5nZXRUb3BQb3NpdGlvbihzbGF0SW5kZXgpICtcblx0XHRcdHRoaXMuc2xhdENvb3JkQ2FjaGUuZ2V0SGVpZ2h0KHNsYXRJbmRleCkgKiBzbGF0UmVtYWluZGVyO1xuXHR9LFxuXG5cblxuXHQvKiBFdmVudCBEcmFnIFZpc3VhbGl6YXRpb25cblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIFJlbmRlcnMgYSB2aXN1YWwgaW5kaWNhdGlvbiBvZiBhbiBldmVudCBiZWluZyBkcmFnZ2VkIG92ZXIgdGhlIHNwZWNpZmllZCBkYXRlKHMpLlxuXHQvLyBBIHJldHVybmVkIHZhbHVlIG9mIGB0cnVlYCBzaWduYWxzIHRoYXQgYSBtb2NrIFwiaGVscGVyXCIgZXZlbnQgaGFzIGJlZW4gcmVuZGVyZWQuXG5cdHJlbmRlckRyYWc6IGZ1bmN0aW9uKGV2ZW50TG9jYXRpb24sIHNlZykge1xuXG5cdFx0aWYgKHNlZykgeyAvLyBpZiB0aGVyZSBpcyBldmVudCBpbmZvcm1hdGlvbiBmb3IgdGhpcyBkcmFnLCByZW5kZXIgYSBoZWxwZXIgZXZlbnRcblxuXHRcdFx0Ly8gcmV0dXJucyBtb2NrIGV2ZW50IGVsZW1lbnRzXG5cdFx0XHQvLyBzaWduYWwgdGhhdCBhIGhlbHBlciBoYXMgYmVlbiByZW5kZXJlZFxuXHRcdFx0cmV0dXJuIHRoaXMucmVuZGVyRXZlbnRMb2NhdGlvbkhlbHBlcihldmVudExvY2F0aW9uLCBzZWcpO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdC8vIG90aGVyd2lzZSwganVzdCByZW5kZXIgYSBoaWdobGlnaHRcblx0XHRcdHRoaXMucmVuZGVySGlnaGxpZ2h0KHRoaXMuZXZlbnRUb1NwYW4oZXZlbnRMb2NhdGlvbikpO1xuXHRcdH1cblx0fSxcblxuXG5cdC8vIFVucmVuZGVycyBhbnkgdmlzdWFsIGluZGljYXRpb24gb2YgYW4gZXZlbnQgYmVpbmcgZHJhZ2dlZFxuXHR1bnJlbmRlckRyYWc6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMudW5yZW5kZXJIZWxwZXIoKTtcblx0XHR0aGlzLnVucmVuZGVySGlnaGxpZ2h0KCk7XG5cdH0sXG5cblxuXHQvKiBFdmVudCBSZXNpemUgVmlzdWFsaXphdGlvblxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gUmVuZGVycyBhIHZpc3VhbCBpbmRpY2F0aW9uIG9mIGFuIGV2ZW50IGJlaW5nIHJlc2l6ZWRcblx0cmVuZGVyRXZlbnRSZXNpemU6IGZ1bmN0aW9uKGV2ZW50TG9jYXRpb24sIHNlZykge1xuXHRcdHJldHVybiB0aGlzLnJlbmRlckV2ZW50TG9jYXRpb25IZWxwZXIoZXZlbnRMb2NhdGlvbiwgc2VnKTsgLy8gcmV0dXJucyBtb2NrIGV2ZW50IGVsZW1lbnRzXG5cdH0sXG5cblxuXHQvLyBVbnJlbmRlcnMgYW55IHZpc3VhbCBpbmRpY2F0aW9uIG9mIGFuIGV2ZW50IGJlaW5nIHJlc2l6ZWRcblx0dW5yZW5kZXJFdmVudFJlc2l6ZTogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy51bnJlbmRlckhlbHBlcigpO1xuXHR9LFxuXG5cblx0LyogRXZlbnQgSGVscGVyXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBSZW5kZXJzIGEgbW9jayBcImhlbHBlclwiIGV2ZW50LiBgc291cmNlU2VnYCBpcyB0aGUgb3JpZ2luYWwgc2VnbWVudCBvYmplY3QgYW5kIG1pZ2h0IGJlIG51bGwgKGFuIGV4dGVybmFsIGRyYWcpXG5cdHJlbmRlckhlbHBlcjogZnVuY3Rpb24oZXZlbnQsIHNvdXJjZVNlZykge1xuXHRcdHJldHVybiB0aGlzLnJlbmRlckhlbHBlclNlZ3ModGhpcy5ldmVudFRvU2VncyhldmVudCksIHNvdXJjZVNlZyk7IC8vIHJldHVybnMgbW9jayBldmVudCBlbGVtZW50c1xuXHR9LFxuXG5cblx0Ly8gVW5yZW5kZXJzIGFueSBtb2NrIGhlbHBlciBldmVudFxuXHR1bnJlbmRlckhlbHBlcjogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy51bnJlbmRlckhlbHBlclNlZ3MoKTtcblx0fSxcblxuXG5cdC8qIEJ1c2luZXNzIEhvdXJzXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHRyZW5kZXJCdXNpbmVzc0hvdXJzOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnJlbmRlckJ1c2luZXNzU2Vncyhcblx0XHRcdHRoaXMuYnVpbGRCdXNpbmVzc0hvdXJTZWdzKClcblx0XHQpO1xuXHR9LFxuXG5cblx0dW5yZW5kZXJCdXNpbmVzc0hvdXJzOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnVucmVuZGVyQnVzaW5lc3NTZWdzKCk7XG5cdH0sXG5cblxuXHQvKiBOb3cgSW5kaWNhdG9yXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHRnZXROb3dJbmRpY2F0b3JVbml0OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gJ21pbnV0ZSc7IC8vIHdpbGwgcmVmcmVzaCBvbiB0aGUgbWludXRlXG5cdH0sXG5cblxuXHRyZW5kZXJOb3dJbmRpY2F0b3I6IGZ1bmN0aW9uKGRhdGUpIHtcblx0XHQvLyBzZWcgc3lzdGVtIG1pZ2h0IGJlIG92ZXJraWxsLCBidXQgaXQgaGFuZGxlcyBzY2VuYXJpbyB3aGVyZSBsaW5lIG5lZWRzIHRvIGJlIHJlbmRlcmVkXG5cdFx0Ly8gIG1vcmUgdGhhbiBvbmNlIGJlY2F1c2Ugb2YgY29sdW1ucyB3aXRoIHRoZSBzYW1lIGRhdGUgKHJlc291cmNlcyBjb2x1bW5zIGZvciBleGFtcGxlKVxuXHRcdHZhciBzZWdzID0gdGhpcy5zcGFuVG9TZWdzKHsgc3RhcnQ6IGRhdGUsIGVuZDogZGF0ZSB9KTtcblx0XHR2YXIgdG9wID0gdGhpcy5jb21wdXRlRGF0ZVRvcChkYXRlLCBkYXRlKTtcblx0XHR2YXIgbm9kZXMgPSBbXTtcblx0XHR2YXIgaTtcblxuXHRcdC8vIHJlbmRlciBsaW5lcyB3aXRoaW4gdGhlIGNvbHVtbnNcblx0XHRmb3IgKGkgPSAwOyBpIDwgc2Vncy5sZW5ndGg7IGkrKykge1xuXHRcdFx0bm9kZXMucHVzaCgkKCc8ZGl2IGNsYXNzPVwiZmMtbm93LWluZGljYXRvciBmYy1ub3ctaW5kaWNhdG9yLWxpbmVcIj48L2Rpdj4nKVxuXHRcdFx0XHQuY3NzKCd0b3AnLCB0b3ApXG5cdFx0XHRcdC5hcHBlbmRUbyh0aGlzLmNvbENvbnRhaW5lckVscy5lcShzZWdzW2ldLmNvbCkpWzBdKTtcblx0XHR9XG5cblx0XHQvLyByZW5kZXIgYW4gYXJyb3cgb3ZlciB0aGUgYXhpc1xuXHRcdGlmIChzZWdzLmxlbmd0aCA+IDApIHsgLy8gaXMgdGhlIGN1cnJlbnQgdGltZSBpbiB2aWV3P1xuXHRcdFx0bm9kZXMucHVzaCgkKCc8ZGl2IGNsYXNzPVwiZmMtbm93LWluZGljYXRvciBmYy1ub3ctaW5kaWNhdG9yLWFycm93XCI+PC9kaXY+Jylcblx0XHRcdFx0LmNzcygndG9wJywgdG9wKVxuXHRcdFx0XHQuYXBwZW5kVG8odGhpcy5lbC5maW5kKCcuZmMtY29udGVudC1za2VsZXRvbicpKVswXSk7XG5cdFx0fVxuXG5cdFx0dGhpcy5ub3dJbmRpY2F0b3JFbHMgPSAkKG5vZGVzKTtcblx0fSxcblxuXG5cdHVucmVuZGVyTm93SW5kaWNhdG9yOiBmdW5jdGlvbigpIHtcblx0XHRpZiAodGhpcy5ub3dJbmRpY2F0b3JFbHMpIHtcblx0XHRcdHRoaXMubm93SW5kaWNhdG9yRWxzLnJlbW92ZSgpO1xuXHRcdFx0dGhpcy5ub3dJbmRpY2F0b3JFbHMgPSBudWxsO1xuXHRcdH1cblx0fSxcblxuXG5cdC8qIFNlbGVjdGlvblxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gUmVuZGVycyBhIHZpc3VhbCBpbmRpY2F0aW9uIG9mIGEgc2VsZWN0aW9uLiBPdmVycmlkZXMgdGhlIGRlZmF1bHQsIHdoaWNoIHdhcyB0byBzaW1wbHkgcmVuZGVyIGEgaGlnaGxpZ2h0LlxuXHRyZW5kZXJTZWxlY3Rpb246IGZ1bmN0aW9uKHNwYW4pIHtcblx0XHRpZiAodGhpcy52aWV3Lm9wdCgnc2VsZWN0SGVscGVyJykpIHsgLy8gdGhpcyBzZXR0aW5nIHNpZ25hbHMgdGhhdCBhIG1vY2sgaGVscGVyIGV2ZW50IHNob3VsZCBiZSByZW5kZXJlZFxuXG5cdFx0XHQvLyBub3JtYWxseSBhY2NlcHMgYW4gZXZlbnRMb2NhdGlvbiwgc3BhbiBoYXMgYSBzdGFydC9lbmQsIHdoaWNoIGlzIGdvb2QgZW5vdWdoXG5cdFx0XHR0aGlzLnJlbmRlckV2ZW50TG9jYXRpb25IZWxwZXIoc3Bhbik7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0dGhpcy5yZW5kZXJIaWdobGlnaHQoc3Bhbik7XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gVW5yZW5kZXJzIGFueSB2aXN1YWwgaW5kaWNhdGlvbiBvZiBhIHNlbGVjdGlvblxuXHR1bnJlbmRlclNlbGVjdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy51bnJlbmRlckhlbHBlcigpO1xuXHRcdHRoaXMudW5yZW5kZXJIaWdobGlnaHQoKTtcblx0fSxcblxuXG5cdC8qIEhpZ2hsaWdodFxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0cmVuZGVySGlnaGxpZ2h0OiBmdW5jdGlvbihzcGFuKSB7XG5cdFx0dGhpcy5yZW5kZXJIaWdobGlnaHRTZWdzKHRoaXMuc3BhblRvU2VncyhzcGFuKSk7XG5cdH0sXG5cblxuXHR1bnJlbmRlckhpZ2hsaWdodDogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy51bnJlbmRlckhpZ2hsaWdodFNlZ3MoKTtcblx0fVxuXG59KTtcblxuOztcblxuLyogTWV0aG9kcyBmb3IgcmVuZGVyaW5nIFNFR01FTlRTLCBwaWVjZXMgb2YgY29udGVudCB0aGF0IGxpdmUgb24gdGhlIHZpZXdcbiAoIHRoaXMgZmlsZSBpcyBubyBsb25nZXIganVzdCBmb3IgZXZlbnRzIClcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5UaW1lR3JpZC5taXhpbih7XG5cblx0Y29sQ29udGFpbmVyRWxzOiBudWxsLCAvLyBjb250YWluZXJzIGZvciBlYWNoIGNvbHVtblxuXG5cdC8vIGlubmVyLWNvbnRhaW5lcnMgZm9yIGVhY2ggY29sdW1uIHdoZXJlIGRpZmZlcmVudCB0eXBlcyBvZiBzZWdzIGxpdmVcblx0ZmdDb250YWluZXJFbHM6IG51bGwsXG5cdGJnQ29udGFpbmVyRWxzOiBudWxsLFxuXHRoZWxwZXJDb250YWluZXJFbHM6IG51bGwsXG5cdGhpZ2hsaWdodENvbnRhaW5lckVsczogbnVsbCxcblx0YnVzaW5lc3NDb250YWluZXJFbHM6IG51bGwsXG5cblx0Ly8gYXJyYXlzIG9mIGRpZmZlcmVudCB0eXBlcyBvZiBkaXNwbGF5ZWQgc2VnbWVudHNcblx0ZmdTZWdzOiBudWxsLFxuXHRiZ1NlZ3M6IG51bGwsXG5cdGhlbHBlclNlZ3M6IG51bGwsXG5cdGhpZ2hsaWdodFNlZ3M6IG51bGwsXG5cdGJ1c2luZXNzU2VnczogbnVsbCxcblxuXG5cdC8vIFJlbmRlcnMgdGhlIERPTSB0aGF0IHRoZSB2aWV3J3MgY29udGVudCB3aWxsIGxpdmUgaW5cblx0cmVuZGVyQ29udGVudFNrZWxldG9uOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgY2VsbEh0bWwgPSAnJztcblx0XHR2YXIgaTtcblx0XHR2YXIgc2tlbGV0b25FbDtcblxuXHRcdGZvciAoaSA9IDA7IGkgPCB0aGlzLmNvbENudDsgaSsrKSB7XG5cdFx0XHRjZWxsSHRtbCArPVxuXHRcdFx0XHQnPHRkPicgK1xuXHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwiZmMtY29udGVudC1jb2xcIj4nICtcblx0XHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwiZmMtZXZlbnQtY29udGFpbmVyIGZjLWhlbHBlci1jb250YWluZXJcIj48L2Rpdj4nICtcblx0XHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwiZmMtZXZlbnQtY29udGFpbmVyXCI+PC9kaXY+JyArXG5cdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cImZjLWhpZ2hsaWdodC1jb250YWluZXJcIj48L2Rpdj4nICtcblx0XHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwiZmMtYmdldmVudC1jb250YWluZXJcIj48L2Rpdj4nICtcblx0XHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwiZmMtYnVzaW5lc3MtY29udGFpbmVyXCI+PC9kaXY+JyArXG5cdFx0XHRcdFx0JzwvZGl2PicgK1xuXHRcdFx0XHQnPC90ZD4nO1xuXHRcdH1cblxuXHRcdHNrZWxldG9uRWwgPSAkKFxuXHRcdFx0JzxkaXYgY2xhc3M9XCJmYy1jb250ZW50LXNrZWxldG9uXCI+JyArXG5cdFx0XHRcdCc8dGFibGU+JyArXG5cdFx0XHRcdFx0Jzx0cj4nICsgY2VsbEh0bWwgKyAnPC90cj4nICtcblx0XHRcdFx0JzwvdGFibGU+JyArXG5cdFx0XHQnPC9kaXY+J1xuXHRcdCk7XG5cblx0XHR0aGlzLmNvbENvbnRhaW5lckVscyA9IHNrZWxldG9uRWwuZmluZCgnLmZjLWNvbnRlbnQtY29sJyk7XG5cdFx0dGhpcy5oZWxwZXJDb250YWluZXJFbHMgPSBza2VsZXRvbkVsLmZpbmQoJy5mYy1oZWxwZXItY29udGFpbmVyJyk7XG5cdFx0dGhpcy5mZ0NvbnRhaW5lckVscyA9IHNrZWxldG9uRWwuZmluZCgnLmZjLWV2ZW50LWNvbnRhaW5lcjpub3QoLmZjLWhlbHBlci1jb250YWluZXIpJyk7XG5cdFx0dGhpcy5iZ0NvbnRhaW5lckVscyA9IHNrZWxldG9uRWwuZmluZCgnLmZjLWJnZXZlbnQtY29udGFpbmVyJyk7XG5cdFx0dGhpcy5oaWdobGlnaHRDb250YWluZXJFbHMgPSBza2VsZXRvbkVsLmZpbmQoJy5mYy1oaWdobGlnaHQtY29udGFpbmVyJyk7XG5cdFx0dGhpcy5idXNpbmVzc0NvbnRhaW5lckVscyA9IHNrZWxldG9uRWwuZmluZCgnLmZjLWJ1c2luZXNzLWNvbnRhaW5lcicpO1xuXG5cdFx0dGhpcy5ib29rZW5kQ2VsbHMoc2tlbGV0b25FbC5maW5kKCd0cicpKTsgLy8gVE9ETzogZG8gdGhpcyBvbiBzdHJpbmcgbGV2ZWxcblx0XHR0aGlzLmVsLmFwcGVuZChza2VsZXRvbkVsKTtcblx0fSxcblxuXG5cdC8qIEZvcmVncm91bmQgRXZlbnRzXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHRyZW5kZXJGZ1NlZ3M6IGZ1bmN0aW9uKHNlZ3MpIHtcblx0XHRzZWdzID0gdGhpcy5yZW5kZXJGZ1NlZ3NJbnRvQ29udGFpbmVycyhzZWdzLCB0aGlzLmZnQ29udGFpbmVyRWxzKTtcblx0XHR0aGlzLmZnU2VncyA9IHNlZ3M7XG5cdFx0cmV0dXJuIHNlZ3M7IC8vIG5lZWRlZCBmb3IgR3JpZDo6cmVuZGVyRXZlbnRzXG5cdH0sXG5cblxuXHR1bnJlbmRlckZnU2VnczogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy51bnJlbmRlck5hbWVkU2VncygnZmdTZWdzJyk7XG5cdH0sXG5cblxuXHQvKiBGb3JlZ3JvdW5kIEhlbHBlciBFdmVudHNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdHJlbmRlckhlbHBlclNlZ3M6IGZ1bmN0aW9uKHNlZ3MsIHNvdXJjZVNlZykge1xuXHRcdHZhciBoZWxwZXJFbHMgPSBbXTtcblx0XHR2YXIgaSwgc2VnO1xuXHRcdHZhciBzb3VyY2VFbDtcblxuXHRcdHNlZ3MgPSB0aGlzLnJlbmRlckZnU2Vnc0ludG9Db250YWluZXJzKHNlZ3MsIHRoaXMuaGVscGVyQ29udGFpbmVyRWxzKTtcblxuXHRcdC8vIFRyeSB0byBtYWtlIHRoZSBzZWdtZW50IHRoYXQgaXMgaW4gdGhlIHNhbWUgcm93IGFzIHNvdXJjZVNlZyBsb29rIHRoZSBzYW1lXG5cdFx0Zm9yIChpID0gMDsgaSA8IHNlZ3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdHNlZyA9IHNlZ3NbaV07XG5cdFx0XHRpZiAoc291cmNlU2VnICYmIHNvdXJjZVNlZy5jb2wgPT09IHNlZy5jb2wpIHtcblx0XHRcdFx0c291cmNlRWwgPSBzb3VyY2VTZWcuZWw7XG5cdFx0XHRcdHNlZy5lbC5jc3Moe1xuXHRcdFx0XHRcdGxlZnQ6IHNvdXJjZUVsLmNzcygnbGVmdCcpLFxuXHRcdFx0XHRcdHJpZ2h0OiBzb3VyY2VFbC5jc3MoJ3JpZ2h0JyksXG5cdFx0XHRcdFx0J21hcmdpbi1sZWZ0Jzogc291cmNlRWwuY3NzKCdtYXJnaW4tbGVmdCcpLFxuXHRcdFx0XHRcdCdtYXJnaW4tcmlnaHQnOiBzb3VyY2VFbC5jc3MoJ21hcmdpbi1yaWdodCcpXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0aGVscGVyRWxzLnB1c2goc2VnLmVsWzBdKTtcblx0XHR9XG5cblx0XHR0aGlzLmhlbHBlclNlZ3MgPSBzZWdzO1xuXG5cdFx0cmV0dXJuICQoaGVscGVyRWxzKTsgLy8gbXVzdCByZXR1cm4gcmVuZGVyZWQgaGVscGVyc1xuXHR9LFxuXG5cblx0dW5yZW5kZXJIZWxwZXJTZWdzOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnVucmVuZGVyTmFtZWRTZWdzKCdoZWxwZXJTZWdzJyk7XG5cdH0sXG5cblxuXHQvKiBCYWNrZ3JvdW5kIEV2ZW50c1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0cmVuZGVyQmdTZWdzOiBmdW5jdGlvbihzZWdzKSB7XG5cdFx0c2VncyA9IHRoaXMucmVuZGVyRmlsbFNlZ0VscygnYmdFdmVudCcsIHNlZ3MpOyAvLyBUT0RPOiBvbGQgZmlsbCBzeXN0ZW1cblx0XHR0aGlzLnVwZGF0ZVNlZ1ZlcnRpY2FscyhzZWdzKTtcblx0XHR0aGlzLmF0dGFjaFNlZ3NCeUNvbCh0aGlzLmdyb3VwU2Vnc0J5Q29sKHNlZ3MpLCB0aGlzLmJnQ29udGFpbmVyRWxzKTtcblx0XHR0aGlzLmJnU2VncyA9IHNlZ3M7XG5cdFx0cmV0dXJuIHNlZ3M7IC8vIG5lZWRlZCBmb3IgR3JpZDo6cmVuZGVyRXZlbnRzXG5cdH0sXG5cblxuXHR1bnJlbmRlckJnU2VnczogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy51bnJlbmRlck5hbWVkU2VncygnYmdTZWdzJyk7XG5cdH0sXG5cblxuXHQvKiBIaWdobGlnaHRcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdHJlbmRlckhpZ2hsaWdodFNlZ3M6IGZ1bmN0aW9uKHNlZ3MpIHtcblx0XHRzZWdzID0gdGhpcy5yZW5kZXJGaWxsU2VnRWxzKCdoaWdobGlnaHQnLCBzZWdzKTsgLy8gVE9ETzogb2xkIGZpbGwgc3lzdGVtXG5cdFx0dGhpcy51cGRhdGVTZWdWZXJ0aWNhbHMoc2Vncyk7XG5cdFx0dGhpcy5hdHRhY2hTZWdzQnlDb2wodGhpcy5ncm91cFNlZ3NCeUNvbChzZWdzKSwgdGhpcy5oaWdobGlnaHRDb250YWluZXJFbHMpO1xuXHRcdHRoaXMuaGlnaGxpZ2h0U2VncyA9IHNlZ3M7XG5cdH0sXG5cblxuXHR1bnJlbmRlckhpZ2hsaWdodFNlZ3M6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMudW5yZW5kZXJOYW1lZFNlZ3MoJ2hpZ2hsaWdodFNlZ3MnKTtcblx0fSxcblxuXG5cdC8qIEJ1c2luZXNzIEhvdXJzXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHRyZW5kZXJCdXNpbmVzc1NlZ3M6IGZ1bmN0aW9uKHNlZ3MpIHtcblx0XHRzZWdzID0gdGhpcy5yZW5kZXJGaWxsU2VnRWxzKCdidXNpbmVzc0hvdXJzJywgc2Vncyk7IC8vIFRPRE86IG9sZCBmaWxsIHN5c3RlbVxuXHRcdHRoaXMudXBkYXRlU2VnVmVydGljYWxzKHNlZ3MpO1xuXHRcdHRoaXMuYXR0YWNoU2Vnc0J5Q29sKHRoaXMuZ3JvdXBTZWdzQnlDb2woc2VncyksIHRoaXMuYnVzaW5lc3NDb250YWluZXJFbHMpO1xuXHRcdHRoaXMuYnVzaW5lc3NTZWdzID0gc2Vncztcblx0fSxcblxuXG5cdHVucmVuZGVyQnVzaW5lc3NTZWdzOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnVucmVuZGVyTmFtZWRTZWdzKCdidXNpbmVzc1NlZ3MnKTtcblx0fSxcblxuXG5cdC8qIFNlZyBSZW5kZXJpbmcgVXRpbHNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIEdpdmVuIGEgZmxhdCBhcnJheSBvZiBzZWdtZW50cywgcmV0dXJuIGFuIGFycmF5IG9mIHN1Yi1hcnJheXMsIGdyb3VwZWQgYnkgZWFjaCBzZWdtZW50J3MgY29sXG5cdGdyb3VwU2Vnc0J5Q29sOiBmdW5jdGlvbihzZWdzKSB7XG5cdFx0dmFyIHNlZ3NCeUNvbCA9IFtdO1xuXHRcdHZhciBpO1xuXG5cdFx0Zm9yIChpID0gMDsgaSA8IHRoaXMuY29sQ250OyBpKyspIHtcblx0XHRcdHNlZ3NCeUNvbC5wdXNoKFtdKTtcblx0XHR9XG5cblx0XHRmb3IgKGkgPSAwOyBpIDwgc2Vncy5sZW5ndGg7IGkrKykge1xuXHRcdFx0c2Vnc0J5Q29sW3NlZ3NbaV0uY29sXS5wdXNoKHNlZ3NbaV0pO1xuXHRcdH1cblxuXHRcdHJldHVybiBzZWdzQnlDb2w7XG5cdH0sXG5cblxuXHQvLyBHaXZlbiBzZWdtZW50cyBncm91cGVkIGJ5IGNvbHVtbiwgaW5zZXJ0IHRoZSBzZWdtZW50cycgZWxlbWVudHMgaW50byBhIHBhcmFsbGVsIGFycmF5IG9mIGNvbnRhaW5lclxuXHQvLyBlbGVtZW50cywgZWFjaCBsaXZpbmcgd2l0aGluIGEgY29sdW1uLlxuXHRhdHRhY2hTZWdzQnlDb2w6IGZ1bmN0aW9uKHNlZ3NCeUNvbCwgY29udGFpbmVyRWxzKSB7XG5cdFx0dmFyIGNvbDtcblx0XHR2YXIgc2Vncztcblx0XHR2YXIgaTtcblxuXHRcdGZvciAoY29sID0gMDsgY29sIDwgdGhpcy5jb2xDbnQ7IGNvbCsrKSB7IC8vIGl0ZXJhdGUgZWFjaCBjb2x1bW4gZ3JvdXBpbmdcblx0XHRcdHNlZ3MgPSBzZWdzQnlDb2xbY29sXTtcblxuXHRcdFx0Zm9yIChpID0gMDsgaSA8IHNlZ3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0Y29udGFpbmVyRWxzLmVxKGNvbCkuYXBwZW5kKHNlZ3NbaV0uZWwpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXG5cdC8vIEdpdmVuIHRoZSBuYW1lIG9mIGEgcHJvcGVydHkgb2YgYHRoaXNgIG9iamVjdCwgYXNzdW1lZCB0byBiZSBhbiBhcnJheSBvZiBzZWdtZW50cyxcblx0Ly8gbG9vcHMgdGhyb3VnaCBlYWNoIHNlZ21lbnQgYW5kIHJlbW92ZXMgZnJvbSBET00uIFdpbGwgbnVsbC1vdXQgdGhlIHByb3BlcnR5IGFmdGVyd2FyZHMuXG5cdHVucmVuZGVyTmFtZWRTZWdzOiBmdW5jdGlvbihwcm9wTmFtZSkge1xuXHRcdHZhciBzZWdzID0gdGhpc1twcm9wTmFtZV07XG5cdFx0dmFyIGk7XG5cblx0XHRpZiAoc2Vncykge1xuXHRcdFx0Zm9yIChpID0gMDsgaSA8IHNlZ3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0c2Vnc1tpXS5lbC5yZW1vdmUoKTtcblx0XHRcdH1cblx0XHRcdHRoaXNbcHJvcE5hbWVdID0gbnVsbDtcblx0XHR9XG5cdH0sXG5cblxuXG5cdC8qIEZvcmVncm91bmQgRXZlbnQgUmVuZGVyaW5nIFV0aWxzXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBHaXZlbiBhbiBhcnJheSBvZiBmb3JlZ3JvdW5kIHNlZ21lbnRzLCByZW5kZXIgYSBET00gZWxlbWVudCBmb3IgZWFjaCwgY29tcHV0ZXMgcG9zaXRpb24sXG5cdC8vIGFuZCBhdHRhY2hlcyB0byB0aGUgY29sdW1uIGlubmVyLWNvbnRhaW5lciBlbGVtZW50cy5cblx0cmVuZGVyRmdTZWdzSW50b0NvbnRhaW5lcnM6IGZ1bmN0aW9uKHNlZ3MsIGNvbnRhaW5lckVscykge1xuXHRcdHZhciBzZWdzQnlDb2w7XG5cdFx0dmFyIGNvbDtcblxuXHRcdHNlZ3MgPSB0aGlzLnJlbmRlckZnU2VnRWxzKHNlZ3MpOyAvLyB3aWxsIGNhbGwgZmdTZWdIdG1sXG5cdFx0c2Vnc0J5Q29sID0gdGhpcy5ncm91cFNlZ3NCeUNvbChzZWdzKTtcblxuXHRcdGZvciAoY29sID0gMDsgY29sIDwgdGhpcy5jb2xDbnQ7IGNvbCsrKSB7XG5cdFx0XHR0aGlzLnVwZGF0ZUZnU2VnQ29vcmRzKHNlZ3NCeUNvbFtjb2xdKTtcblx0XHR9XG5cblx0XHR0aGlzLmF0dGFjaFNlZ3NCeUNvbChzZWdzQnlDb2wsIGNvbnRhaW5lckVscyk7XG5cblx0XHRyZXR1cm4gc2Vncztcblx0fSxcblxuXG5cdC8vIFJlbmRlcnMgdGhlIEhUTUwgZm9yIGEgc2luZ2xlIGV2ZW50IHNlZ21lbnQncyBkZWZhdWx0IHJlbmRlcmluZ1xuXHRmZ1NlZ0h0bWw6IGZ1bmN0aW9uKHNlZywgZGlzYWJsZVJlc2l6aW5nKSB7XG5cdFx0dmFyIHZpZXcgPSB0aGlzLnZpZXc7XG5cdFx0dmFyIGV2ZW50ID0gc2VnLmV2ZW50O1xuXHRcdHZhciBpc0RyYWdnYWJsZSA9IHZpZXcuaXNFdmVudERyYWdnYWJsZShldmVudCk7XG5cdFx0dmFyIGlzUmVzaXphYmxlRnJvbVN0YXJ0ID0gIWRpc2FibGVSZXNpemluZyAmJiBzZWcuaXNTdGFydCAmJiB2aWV3LmlzRXZlbnRSZXNpemFibGVGcm9tU3RhcnQoZXZlbnQpO1xuXHRcdHZhciBpc1Jlc2l6YWJsZUZyb21FbmQgPSAhZGlzYWJsZVJlc2l6aW5nICYmIHNlZy5pc0VuZCAmJiB2aWV3LmlzRXZlbnRSZXNpemFibGVGcm9tRW5kKGV2ZW50KTtcblx0XHR2YXIgY2xhc3NlcyA9IHRoaXMuZ2V0U2VnQ2xhc3NlcyhzZWcsIGlzRHJhZ2dhYmxlLCBpc1Jlc2l6YWJsZUZyb21TdGFydCB8fCBpc1Jlc2l6YWJsZUZyb21FbmQpO1xuXHRcdHZhciBza2luQ3NzID0gY3NzVG9TdHIodGhpcy5nZXRTZWdTa2luQ3NzKHNlZykpO1xuXHRcdHZhciB0aW1lVGV4dDtcblx0XHR2YXIgZnVsbFRpbWVUZXh0OyAvLyBtb3JlIHZlcmJvc2UgdGltZSB0ZXh0LiBmb3IgdGhlIHByaW50IHN0eWxlc2hlZXRcblx0XHR2YXIgc3RhcnRUaW1lVGV4dDsgLy8ganVzdCB0aGUgc3RhcnQgdGltZSB0ZXh0XG5cblx0XHRjbGFzc2VzLnVuc2hpZnQoJ2ZjLXRpbWUtZ3JpZC1ldmVudCcsICdmYy12LWV2ZW50Jyk7XG5cblx0XHRpZiAodmlldy5pc011bHRpRGF5RXZlbnQoZXZlbnQpKSB7IC8vIGlmIHRoZSBldmVudCBhcHBlYXJzIHRvIHNwYW4gbW9yZSB0aGFuIG9uZSBkYXkuLi5cblx0XHRcdC8vIERvbid0IGRpc3BsYXkgdGltZSB0ZXh0IG9uIHNlZ21lbnRzIHRoYXQgcnVuIGVudGlyZWx5IHRocm91Z2ggYSBkYXkuXG5cdFx0XHQvLyBUaGF0IHdvdWxkIGFwcGVhciBhcyBtaWRuaWdodC1taWRuaWdodCBhbmQgd291bGQgbG9vayBkdW1iLlxuXHRcdFx0Ly8gT3RoZXJ3aXNlLCBkaXNwbGF5IHRoZSB0aW1lIHRleHQgZm9yIHRoZSAqc2VnbWVudCdzKiB0aW1lcyAobGlrZSA2cG0tbWlkbmlnaHQgb3IgbWlkbmlnaHQtMTBhbSlcblx0XHRcdGlmIChzZWcuaXNTdGFydCB8fCBzZWcuaXNFbmQpIHtcblx0XHRcdFx0dGltZVRleHQgPSB0aGlzLmdldEV2ZW50VGltZVRleHQoc2VnKTtcblx0XHRcdFx0ZnVsbFRpbWVUZXh0ID0gdGhpcy5nZXRFdmVudFRpbWVUZXh0KHNlZywgJ0xUJyk7XG5cdFx0XHRcdHN0YXJ0VGltZVRleHQgPSB0aGlzLmdldEV2ZW50VGltZVRleHQoc2VnLCBudWxsLCBmYWxzZSk7IC8vIGRpc3BsYXlFbmQ9ZmFsc2Vcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gRGlzcGxheSB0aGUgbm9ybWFsIHRpbWUgdGV4dCBmb3IgdGhlICpldmVudCdzKiB0aW1lc1xuXHRcdFx0dGltZVRleHQgPSB0aGlzLmdldEV2ZW50VGltZVRleHQoZXZlbnQpO1xuXHRcdFx0ZnVsbFRpbWVUZXh0ID0gdGhpcy5nZXRFdmVudFRpbWVUZXh0KGV2ZW50LCAnTFQnKTtcblx0XHRcdHN0YXJ0VGltZVRleHQgPSB0aGlzLmdldEV2ZW50VGltZVRleHQoZXZlbnQsIG51bGwsIGZhbHNlKTsgLy8gZGlzcGxheUVuZD1mYWxzZVxuXHRcdH1cblxuXHRcdHJldHVybiAnPGEgY2xhc3M9XCInICsgY2xhc3Nlcy5qb2luKCcgJykgKyAnXCInICtcblx0XHRcdChldmVudC51cmwgP1xuXHRcdFx0XHQnIGhyZWY9XCInICsgaHRtbEVzY2FwZShldmVudC51cmwpICsgJ1wiJyA6XG5cdFx0XHRcdCcnXG5cdFx0XHRcdCkgK1xuXHRcdFx0KHNraW5Dc3MgP1xuXHRcdFx0XHQnIHN0eWxlPVwiJyArIHNraW5Dc3MgKyAnXCInIDpcblx0XHRcdFx0Jydcblx0XHRcdFx0KSArXG5cdFx0XHQnPicgK1xuXHRcdFx0XHQnPGRpdiBjbGFzcz1cImZjLWNvbnRlbnRcIj4nICtcblx0XHRcdFx0XHQodGltZVRleHQgP1xuXHRcdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJmYy10aW1lXCInICtcblx0XHRcdFx0XHRcdCcgZGF0YS1zdGFydD1cIicgKyBodG1sRXNjYXBlKHN0YXJ0VGltZVRleHQpICsgJ1wiJyArXG5cdFx0XHRcdFx0XHQnIGRhdGEtZnVsbD1cIicgKyBodG1sRXNjYXBlKGZ1bGxUaW1lVGV4dCkgKyAnXCInICtcblx0XHRcdFx0XHRcdCc+JyArXG5cdFx0XHRcdFx0XHRcdCc8c3Bhbj4nICsgaHRtbEVzY2FwZSh0aW1lVGV4dCkgKyAnPC9zcGFuPicgK1xuXHRcdFx0XHRcdFx0JzwvZGl2PicgOlxuXHRcdFx0XHRcdFx0Jydcblx0XHRcdFx0XHRcdCkgK1xuXHRcdFx0XHRcdChldmVudC50aXRsZSA/XG5cdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cImZjLXRpdGxlXCI+JyArXG5cdFx0XHRcdFx0XHRcdGh0bWxFc2NhcGUoZXZlbnQudGl0bGUpICtcblx0XHRcdFx0XHRcdCc8L2Rpdj4nIDpcblx0XHRcdFx0XHRcdCcnXG5cdFx0XHRcdFx0XHQpICtcblx0XHRcdFx0JzwvZGl2PicgK1xuXHRcdFx0XHQnPGRpdiBjbGFzcz1cImZjLWJnXCIvPicgK1xuXHRcdFx0XHQvKiBUT0RPOiB3cml0ZSBDU1MgZm9yIHRoaXNcblx0XHRcdFx0KGlzUmVzaXphYmxlRnJvbVN0YXJ0ID9cblx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cImZjLXJlc2l6ZXIgZmMtc3RhcnQtcmVzaXplclwiIC8+JyA6XG5cdFx0XHRcdFx0Jydcblx0XHRcdFx0XHQpICtcblx0XHRcdFx0Ki9cblx0XHRcdFx0KGlzUmVzaXphYmxlRnJvbUVuZCA/XG5cdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJmYy1yZXNpemVyIGZjLWVuZC1yZXNpemVyXCIgLz4nIDpcblx0XHRcdFx0XHQnJ1xuXHRcdFx0XHRcdCkgK1xuXHRcdFx0JzwvYT4nO1xuXHR9LFxuXG5cblx0LyogU2VnIFBvc2l0aW9uIFV0aWxzXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBSZWZyZXNoZXMgdGhlIENTUyB0b3AvYm90dG9tIGNvb3JkaW5hdGVzIGZvciBlYWNoIHNlZ21lbnQgZWxlbWVudC5cblx0Ly8gV29ya3Mgd2hlbiBjYWxsZWQgYWZ0ZXIgaW5pdGlhbCByZW5kZXIsIGFmdGVyIGEgd2luZG93IHJlc2l6ZS96b29tIGZvciBleGFtcGxlLlxuXHR1cGRhdGVTZWdWZXJ0aWNhbHM6IGZ1bmN0aW9uKHNlZ3MpIHtcblx0XHR0aGlzLmNvbXB1dGVTZWdWZXJ0aWNhbHMoc2Vncyk7XG5cdFx0dGhpcy5hc3NpZ25TZWdWZXJ0aWNhbHMoc2Vncyk7XG5cdH0sXG5cblxuXHQvLyBGb3IgZWFjaCBzZWdtZW50IGluIGFuIGFycmF5LCBjb21wdXRlcyBhbmQgYXNzaWducyBpdHMgdG9wIGFuZCBib3R0b20gcHJvcGVydGllc1xuXHRjb21wdXRlU2VnVmVydGljYWxzOiBmdW5jdGlvbihzZWdzKSB7XG5cdFx0dmFyIGksIHNlZztcblxuXHRcdGZvciAoaSA9IDA7IGkgPCBzZWdzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRzZWcgPSBzZWdzW2ldO1xuXHRcdFx0c2VnLnRvcCA9IHRoaXMuY29tcHV0ZURhdGVUb3Aoc2VnLnN0YXJ0LCBzZWcuc3RhcnQpO1xuXHRcdFx0c2VnLmJvdHRvbSA9IHRoaXMuY29tcHV0ZURhdGVUb3Aoc2VnLmVuZCwgc2VnLnN0YXJ0KTtcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBHaXZlbiBzZWdtZW50cyB0aGF0IGFscmVhZHkgaGF2ZSB0aGVpciB0b3AvYm90dG9tIHByb3BlcnRpZXMgY29tcHV0ZWQsIGFwcGxpZXMgdGhvc2UgdmFsdWVzIHRvXG5cdC8vIHRoZSBzZWdtZW50cycgZWxlbWVudHMuXG5cdGFzc2lnblNlZ1ZlcnRpY2FsczogZnVuY3Rpb24oc2Vncykge1xuXHRcdHZhciBpLCBzZWc7XG5cblx0XHRmb3IgKGkgPSAwOyBpIDwgc2Vncy5sZW5ndGg7IGkrKykge1xuXHRcdFx0c2VnID0gc2Vnc1tpXTtcblx0XHRcdHNlZy5lbC5jc3ModGhpcy5nZW5lcmF0ZVNlZ1ZlcnRpY2FsQ3NzKHNlZykpO1xuXHRcdH1cblx0fSxcblxuXG5cdC8vIEdlbmVyYXRlcyBhbiBvYmplY3Qgd2l0aCBDU1MgcHJvcGVydGllcyBmb3IgdGhlIHRvcC9ib3R0b20gY29vcmRpbmF0ZXMgb2YgYSBzZWdtZW50IGVsZW1lbnRcblx0Z2VuZXJhdGVTZWdWZXJ0aWNhbENzczogZnVuY3Rpb24oc2VnKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHRvcDogc2VnLnRvcCxcblx0XHRcdGJvdHRvbTogLXNlZy5ib3R0b20gLy8gZmxpcHBlZCBiZWNhdXNlIG5lZWRzIHRvIGJlIHNwYWNlIGJleW9uZCBib3R0b20gZWRnZSBvZiBldmVudCBjb250YWluZXJcblx0XHR9O1xuXHR9LFxuXG5cblx0LyogRm9yZWdyb3VuZCBFdmVudCBQb3NpdGlvbmluZyBVdGlsc1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gR2l2ZW4gc2VnbWVudHMgdGhhdCBhcmUgYXNzdW1lZCB0byBhbGwgbGl2ZSBpbiB0aGUgKnNhbWUgY29sdW1uKixcblx0Ly8gY29tcHV0ZSB0aGVpciB2ZXJpY2FsL2hvcml6b250YWwgY29vcmRpbmF0ZXMgYW5kIGFzc2lnbiB0byB0aGVpciBlbGVtZW50cy5cblx0dXBkYXRlRmdTZWdDb29yZHM6IGZ1bmN0aW9uKHNlZ3MpIHtcblx0XHR0aGlzLmNvbXB1dGVTZWdWZXJ0aWNhbHMoc2Vncyk7IC8vIGhvcml6b250YWxzIHJlbGllcyBvbiB0aGlzXG5cdFx0dGhpcy5jb21wdXRlRmdTZWdIb3Jpem9udGFscyhzZWdzKTsgLy8gY29tcHV0ZSBob3Jpem9udGFsIGNvb3JkaW5hdGVzLCB6LWluZGV4J3MsIGFuZCByZW9yZGVyIHRoZSBhcnJheVxuXHRcdHRoaXMuYXNzaWduU2VnVmVydGljYWxzKHNlZ3MpO1xuXHRcdHRoaXMuYXNzaWduRmdTZWdIb3Jpem9udGFscyhzZWdzKTtcblx0fSxcblxuXG5cdC8vIEdpdmVuIGFuIGFycmF5IG9mIHNlZ21lbnRzIHRoYXQgYXJlIGFsbCBpbiB0aGUgc2FtZSBjb2x1bW4sIHNldHMgdGhlIGJhY2t3YXJkQ29vcmQgYW5kIGZvcndhcmRDb29yZCBvbiBlYWNoLlxuXHQvLyBOT1RFOiBBbHNvIHJlb3JkZXJzIHRoZSBnaXZlbiBhcnJheSBieSBkYXRlIVxuXHRjb21wdXRlRmdTZWdIb3Jpem9udGFsczogZnVuY3Rpb24oc2Vncykge1xuXHRcdHZhciBsZXZlbHM7XG5cdFx0dmFyIGxldmVsMDtcblx0XHR2YXIgaTtcblxuXHRcdHRoaXMuc29ydEV2ZW50U2VncyhzZWdzKTsgLy8gb3JkZXIgYnkgY2VydGFpbiBjcml0ZXJpYVxuXHRcdGxldmVscyA9IGJ1aWxkU2xvdFNlZ0xldmVscyhzZWdzKTtcblx0XHRjb21wdXRlRm9yd2FyZFNsb3RTZWdzKGxldmVscyk7XG5cblx0XHRpZiAoKGxldmVsMCA9IGxldmVsc1swXSkpIHtcblxuXHRcdFx0Zm9yIChpID0gMDsgaSA8IGxldmVsMC5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRjb21wdXRlU2xvdFNlZ1ByZXNzdXJlcyhsZXZlbDBbaV0pO1xuXHRcdFx0fVxuXG5cdFx0XHRmb3IgKGkgPSAwOyBpIDwgbGV2ZWwwLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHRoaXMuY29tcHV0ZUZnU2VnRm9yd2FyZEJhY2sobGV2ZWwwW2ldLCAwLCAwKTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblxuXHQvLyBDYWxjdWxhdGUgc2VnLmZvcndhcmRDb29yZCBhbmQgc2VnLmJhY2t3YXJkQ29vcmQgZm9yIHRoZSBzZWdtZW50LCB3aGVyZSBib3RoIHZhbHVlcyByYW5nZVxuXHQvLyBmcm9tIDAgdG8gMS4gSWYgdGhlIGNhbGVuZGFyIGlzIGxlZnQtdG8tcmlnaHQsIHRoZSBzZWcuYmFja3dhcmRDb29yZCBtYXBzIHRvIFwibGVmdFwiIGFuZFxuXHQvLyBzZWcuZm9yd2FyZENvb3JkIG1hcHMgdG8gXCJyaWdodFwiICh2aWEgcGVyY2VudGFnZSkuIFZpY2UtdmVyc2EgaWYgdGhlIGNhbGVuZGFyIGlzIHJpZ2h0LXRvLWxlZnQuXG5cdC8vXG5cdC8vIFRoZSBzZWdtZW50IG1pZ2h0IGJlIHBhcnQgb2YgYSBcInNlcmllc1wiLCB3aGljaCBtZWFucyBjb25zZWN1dGl2ZSBzZWdtZW50cyB3aXRoIHRoZSBzYW1lIHByZXNzdXJlXG5cdC8vIHdobydzIHdpZHRoIGlzIHVua25vd24gdW50aWwgYW4gZWRnZSBoYXMgYmVlbiBoaXQuIGBzZXJpZXNCYWNrd2FyZFByZXNzdXJlYCBpcyB0aGUgbnVtYmVyIG9mXG5cdC8vIHNlZ21lbnRzIGJlaGluZCB0aGlzIG9uZSBpbiB0aGUgY3VycmVudCBzZXJpZXMsIGFuZCBgc2VyaWVzQmFja3dhcmRDb29yZGAgaXMgdGhlIHN0YXJ0aW5nXG5cdC8vIGNvb3JkaW5hdGUgb2YgdGhlIGZpcnN0IHNlZ21lbnQgaW4gdGhlIHNlcmllcy5cblx0Y29tcHV0ZUZnU2VnRm9yd2FyZEJhY2s6IGZ1bmN0aW9uKHNlZywgc2VyaWVzQmFja3dhcmRQcmVzc3VyZSwgc2VyaWVzQmFja3dhcmRDb29yZCkge1xuXHRcdHZhciBmb3J3YXJkU2VncyA9IHNlZy5mb3J3YXJkU2Vncztcblx0XHR2YXIgaTtcblxuXHRcdGlmIChzZWcuZm9yd2FyZENvb3JkID09PSB1bmRlZmluZWQpIHsgLy8gbm90IGFscmVhZHkgY29tcHV0ZWRcblxuXHRcdFx0aWYgKCFmb3J3YXJkU2Vncy5sZW5ndGgpIHtcblxuXHRcdFx0XHQvLyBpZiB0aGVyZSBhcmUgbm8gZm9yd2FyZCBzZWdtZW50cywgdGhpcyBzZWdtZW50IHNob3VsZCBidXR0IHVwIGFnYWluc3QgdGhlIGVkZ2Vcblx0XHRcdFx0c2VnLmZvcndhcmRDb29yZCA9IDE7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblxuXHRcdFx0XHQvLyBzb3J0IGhpZ2hlc3QgcHJlc3N1cmUgZmlyc3Rcblx0XHRcdFx0dGhpcy5zb3J0Rm9yd2FyZFNlZ3MoZm9yd2FyZFNlZ3MpO1xuXG5cdFx0XHRcdC8vIHRoaXMgc2VnbWVudCdzIGZvcndhcmRDb29yZCB3aWxsIGJlIGNhbGN1bGF0ZWQgZnJvbSB0aGUgYmFja3dhcmRDb29yZCBvZiB0aGVcblx0XHRcdFx0Ly8gaGlnaGVzdC1wcmVzc3VyZSBmb3J3YXJkIHNlZ21lbnQuXG5cdFx0XHRcdHRoaXMuY29tcHV0ZUZnU2VnRm9yd2FyZEJhY2soZm9yd2FyZFNlZ3NbMF0sIHNlcmllc0JhY2t3YXJkUHJlc3N1cmUgKyAxLCBzZXJpZXNCYWNrd2FyZENvb3JkKTtcblx0XHRcdFx0c2VnLmZvcndhcmRDb29yZCA9IGZvcndhcmRTZWdzWzBdLmJhY2t3YXJkQ29vcmQ7XG5cdFx0XHR9XG5cblx0XHRcdC8vIGNhbGN1bGF0ZSB0aGUgYmFja3dhcmRDb29yZCBmcm9tIHRoZSBmb3J3YXJkQ29vcmQuIGNvbnNpZGVyIHRoZSBzZXJpZXNcblx0XHRcdHNlZy5iYWNrd2FyZENvb3JkID0gc2VnLmZvcndhcmRDb29yZCAtXG5cdFx0XHRcdChzZWcuZm9yd2FyZENvb3JkIC0gc2VyaWVzQmFja3dhcmRDb29yZCkgLyAvLyBhdmFpbGFibGUgd2lkdGggZm9yIHNlcmllc1xuXHRcdFx0XHQoc2VyaWVzQmFja3dhcmRQcmVzc3VyZSArIDEpOyAvLyAjIG9mIHNlZ21lbnRzIGluIHRoZSBzZXJpZXNcblxuXHRcdFx0Ly8gdXNlIHRoaXMgc2VnbWVudCdzIGNvb3JkaW5hdGVzIHRvIGNvbXB1dGVkIHRoZSBjb29yZGluYXRlcyBvZiB0aGUgbGVzcy1wcmVzc3VyaXplZFxuXHRcdFx0Ly8gZm9yd2FyZCBzZWdtZW50c1xuXHRcdFx0Zm9yIChpPTA7IGk8Zm9yd2FyZFNlZ3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0dGhpcy5jb21wdXRlRmdTZWdGb3J3YXJkQmFjayhmb3J3YXJkU2Vnc1tpXSwgMCwgc2VnLmZvcndhcmRDb29yZCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cblx0c29ydEZvcndhcmRTZWdzOiBmdW5jdGlvbihmb3J3YXJkU2Vncykge1xuXHRcdGZvcndhcmRTZWdzLnNvcnQocHJveHkodGhpcywgJ2NvbXBhcmVGb3J3YXJkU2VncycpKTtcblx0fSxcblxuXG5cdC8vIEEgY21wIGZ1bmN0aW9uIGZvciBkZXRlcm1pbmluZyB3aGljaCBmb3J3YXJkIHNlZ21lbnQgdG8gcmVseSBvbiBtb3JlIHdoZW4gY29tcHV0aW5nIGNvb3JkaW5hdGVzLlxuXHRjb21wYXJlRm9yd2FyZFNlZ3M6IGZ1bmN0aW9uKHNlZzEsIHNlZzIpIHtcblx0XHQvLyBwdXQgaGlnaGVyLXByZXNzdXJlIGZpcnN0XG5cdFx0cmV0dXJuIHNlZzIuZm9yd2FyZFByZXNzdXJlIC0gc2VnMS5mb3J3YXJkUHJlc3N1cmUgfHxcblx0XHRcdC8vIHB1dCBzZWdtZW50cyB0aGF0IGFyZSBjbG9zZXIgdG8gaW5pdGlhbCBlZGdlIGZpcnN0IChhbmQgZmF2b3Igb25lcyB3aXRoIG5vIGNvb3JkcyB5ZXQpXG5cdFx0XHQoc2VnMS5iYWNrd2FyZENvb3JkIHx8IDApIC0gKHNlZzIuYmFja3dhcmRDb29yZCB8fCAwKSB8fFxuXHRcdFx0Ly8gZG8gbm9ybWFsIHNvcnRpbmcuLi5cblx0XHRcdHRoaXMuY29tcGFyZUV2ZW50U2VncyhzZWcxLCBzZWcyKTtcblx0fSxcblxuXG5cdC8vIEdpdmVuIGZvcmVncm91bmQgZXZlbnQgc2VnbWVudHMgdGhhdCBoYXZlIGFscmVhZHkgaGFkIHRoZWlyIHBvc2l0aW9uIGNvb3JkaW5hdGVzIGNvbXB1dGVkLFxuXHQvLyBhc3NpZ25zIHBvc2l0aW9uLXJlbGF0ZWQgQ1NTIHZhbHVlcyB0byB0aGVpciBlbGVtZW50cy5cblx0YXNzaWduRmdTZWdIb3Jpem9udGFsczogZnVuY3Rpb24oc2Vncykge1xuXHRcdHZhciBpLCBzZWc7XG5cblx0XHRmb3IgKGkgPSAwOyBpIDwgc2Vncy5sZW5ndGg7IGkrKykge1xuXHRcdFx0c2VnID0gc2Vnc1tpXTtcblx0XHRcdHNlZy5lbC5jc3ModGhpcy5nZW5lcmF0ZUZnU2VnSG9yaXpvbnRhbENzcyhzZWcpKTtcblxuXHRcdFx0Ly8gaWYgdGhlIGhlaWdodCBpcyBzaG9ydCwgYWRkIGEgY2xhc3NOYW1lIGZvciBhbHRlcm5hdGUgc3R5bGluZ1xuXHRcdFx0aWYgKHNlZy5ib3R0b20gLSBzZWcudG9wIDwgMzApIHtcblx0XHRcdFx0c2VnLmVsLmFkZENsYXNzKCdmYy1zaG9ydCcpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXG5cdC8vIEdlbmVyYXRlcyBhbiBvYmplY3Qgd2l0aCBDU1MgcHJvcGVydGllcy92YWx1ZXMgdGhhdCBzaG91bGQgYmUgYXBwbGllZCB0byBhbiBldmVudCBzZWdtZW50IGVsZW1lbnQuXG5cdC8vIENvbnRhaW5zIGltcG9ydGFudCBwb3NpdGlvbmluZy1yZWxhdGVkIHByb3BlcnRpZXMgdGhhdCBzaG91bGQgYmUgYXBwbGllZCB0byBhbnkgZXZlbnQgZWxlbWVudCwgY3VzdG9taXplZCBvciBub3QuXG5cdGdlbmVyYXRlRmdTZWdIb3Jpem9udGFsQ3NzOiBmdW5jdGlvbihzZWcpIHtcblx0XHR2YXIgc2hvdWxkT3ZlcmxhcCA9IHRoaXMudmlldy5vcHQoJ3Nsb3RFdmVudE92ZXJsYXAnKTtcblx0XHR2YXIgYmFja3dhcmRDb29yZCA9IHNlZy5iYWNrd2FyZENvb3JkOyAvLyB0aGUgbGVmdCBzaWRlIGlmIExUUi4gdGhlIHJpZ2h0IHNpZGUgaWYgUlRMLiBmbG9hdGluZy1wb2ludFxuXHRcdHZhciBmb3J3YXJkQ29vcmQgPSBzZWcuZm9yd2FyZENvb3JkOyAvLyB0aGUgcmlnaHQgc2lkZSBpZiBMVFIuIHRoZSBsZWZ0IHNpZGUgaWYgUlRMLiBmbG9hdGluZy1wb2ludFxuXHRcdHZhciBwcm9wcyA9IHRoaXMuZ2VuZXJhdGVTZWdWZXJ0aWNhbENzcyhzZWcpOyAvLyBnZXQgdG9wL2JvdHRvbSBmaXJzdFxuXHRcdHZhciBsZWZ0OyAvLyBhbW91bnQgb2Ygc3BhY2UgZnJvbSBsZWZ0IGVkZ2UsIGEgZnJhY3Rpb24gb2YgdGhlIHRvdGFsIHdpZHRoXG5cdFx0dmFyIHJpZ2h0OyAvLyBhbW91bnQgb2Ygc3BhY2UgZnJvbSByaWdodCBlZGdlLCBhIGZyYWN0aW9uIG9mIHRoZSB0b3RhbCB3aWR0aFxuXG5cdFx0aWYgKHNob3VsZE92ZXJsYXApIHtcblx0XHRcdC8vIGRvdWJsZSB0aGUgd2lkdGgsIGJ1dCBkb24ndCBnbyBiZXlvbmQgdGhlIG1heGltdW0gZm9yd2FyZCBjb29yZGluYXRlICgxLjApXG5cdFx0XHRmb3J3YXJkQ29vcmQgPSBNYXRoLm1pbigxLCBiYWNrd2FyZENvb3JkICsgKGZvcndhcmRDb29yZCAtIGJhY2t3YXJkQ29vcmQpICogMik7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuaXNSVEwpIHtcblx0XHRcdGxlZnQgPSAxIC0gZm9yd2FyZENvb3JkO1xuXHRcdFx0cmlnaHQgPSBiYWNrd2FyZENvb3JkO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdGxlZnQgPSBiYWNrd2FyZENvb3JkO1xuXHRcdFx0cmlnaHQgPSAxIC0gZm9yd2FyZENvb3JkO1xuXHRcdH1cblxuXHRcdHByb3BzLnpJbmRleCA9IHNlZy5sZXZlbCArIDE7IC8vIGNvbnZlcnQgZnJvbSAwLWJhc2UgdG8gMS1iYXNlZFxuXHRcdHByb3BzLmxlZnQgPSBsZWZ0ICogMTAwICsgJyUnO1xuXHRcdHByb3BzLnJpZ2h0ID0gcmlnaHQgKiAxMDAgKyAnJSc7XG5cblx0XHRpZiAoc2hvdWxkT3ZlcmxhcCAmJiBzZWcuZm9yd2FyZFByZXNzdXJlKSB7XG5cdFx0XHQvLyBhZGQgcGFkZGluZyB0byB0aGUgZWRnZSBzbyB0aGF0IGZvcndhcmQgc3RhY2tlZCBldmVudHMgZG9uJ3QgY292ZXIgdGhlIHJlc2l6ZXIncyBpY29uXG5cdFx0XHRwcm9wc1t0aGlzLmlzUlRMID8gJ21hcmdpbkxlZnQnIDogJ21hcmdpblJpZ2h0J10gPSAxMCAqIDI7IC8vIDEwIGlzIGEgZ3Vlc3N0aW1hdGUgb2YgdGhlIGljb24ncyB3aWR0aFxuXHRcdH1cblxuXHRcdHJldHVybiBwcm9wcztcblx0fVxuXG59KTtcblxuXG4vLyBCdWlsZHMgYW4gYXJyYXkgb2Ygc2VnbWVudHMgXCJsZXZlbHNcIi4gVGhlIGZpcnN0IGxldmVsIHdpbGwgYmUgdGhlIGxlZnRtb3N0IHRpZXIgb2Ygc2VnbWVudHMgaWYgdGhlIGNhbGVuZGFyIGlzXG4vLyBsZWZ0LXRvLXJpZ2h0LCBvciB0aGUgcmlnaHRtb3N0IGlmIHRoZSBjYWxlbmRhciBpcyByaWdodC10by1sZWZ0LiBBc3N1bWVzIHRoZSBzZWdtZW50cyBhcmUgYWxyZWFkeSBvcmRlcmVkIGJ5IGRhdGUuXG5mdW5jdGlvbiBidWlsZFNsb3RTZWdMZXZlbHMoc2Vncykge1xuXHR2YXIgbGV2ZWxzID0gW107XG5cdHZhciBpLCBzZWc7XG5cdHZhciBqO1xuXG5cdGZvciAoaT0wOyBpPHNlZ3MubGVuZ3RoOyBpKyspIHtcblx0XHRzZWcgPSBzZWdzW2ldO1xuXG5cdFx0Ly8gZ28gdGhyb3VnaCBhbGwgdGhlIGxldmVscyBhbmQgc3RvcCBvbiB0aGUgZmlyc3QgbGV2ZWwgd2hlcmUgdGhlcmUgYXJlIG5vIGNvbGxpc2lvbnNcblx0XHRmb3IgKGo9MDsgajxsZXZlbHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdGlmICghY29tcHV0ZVNsb3RTZWdDb2xsaXNpb25zKHNlZywgbGV2ZWxzW2pdKS5sZW5ndGgpIHtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0c2VnLmxldmVsID0gajtcblxuXHRcdChsZXZlbHNbal0gfHwgKGxldmVsc1tqXSA9IFtdKSkucHVzaChzZWcpO1xuXHR9XG5cblx0cmV0dXJuIGxldmVscztcbn1cblxuXG4vLyBGb3IgZXZlcnkgc2VnbWVudCwgZmlndXJlIG91dCB0aGUgb3RoZXIgc2VnbWVudHMgdGhhdCBhcmUgaW4gc3Vic2VxdWVudFxuLy8gbGV2ZWxzIHRoYXQgYWxzbyBvY2N1cHkgdGhlIHNhbWUgdmVydGljYWwgc3BhY2UuIEFjY3VtdWxhdGUgaW4gc2VnLmZvcndhcmRTZWdzXG5mdW5jdGlvbiBjb21wdXRlRm9yd2FyZFNsb3RTZWdzKGxldmVscykge1xuXHR2YXIgaSwgbGV2ZWw7XG5cdHZhciBqLCBzZWc7XG5cdHZhciBrO1xuXG5cdGZvciAoaT0wOyBpPGxldmVscy5sZW5ndGg7IGkrKykge1xuXHRcdGxldmVsID0gbGV2ZWxzW2ldO1xuXG5cdFx0Zm9yIChqPTA7IGo8bGV2ZWwubGVuZ3RoOyBqKyspIHtcblx0XHRcdHNlZyA9IGxldmVsW2pdO1xuXG5cdFx0XHRzZWcuZm9yd2FyZFNlZ3MgPSBbXTtcblx0XHRcdGZvciAoaz1pKzE7IGs8bGV2ZWxzLmxlbmd0aDsgaysrKSB7XG5cdFx0XHRcdGNvbXB1dGVTbG90U2VnQ29sbGlzaW9ucyhzZWcsIGxldmVsc1trXSwgc2VnLmZvcndhcmRTZWdzKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn1cblxuXG4vLyBGaWd1cmUgb3V0IHdoaWNoIHBhdGggZm9yd2FyZCAodmlhIHNlZy5mb3J3YXJkU2VncykgcmVzdWx0cyBpbiB0aGUgbG9uZ2VzdCBwYXRoIHVudGlsXG4vLyB0aGUgZnVydGhlc3QgZWRnZSBpcyByZWFjaGVkLiBUaGUgbnVtYmVyIG9mIHNlZ21lbnRzIGluIHRoaXMgcGF0aCB3aWxsIGJlIHNlZy5mb3J3YXJkUHJlc3N1cmVcbmZ1bmN0aW9uIGNvbXB1dGVTbG90U2VnUHJlc3N1cmVzKHNlZykge1xuXHR2YXIgZm9yd2FyZFNlZ3MgPSBzZWcuZm9yd2FyZFNlZ3M7XG5cdHZhciBmb3J3YXJkUHJlc3N1cmUgPSAwO1xuXHR2YXIgaSwgZm9yd2FyZFNlZztcblxuXHRpZiAoc2VnLmZvcndhcmRQcmVzc3VyZSA9PT0gdW5kZWZpbmVkKSB7IC8vIG5vdCBhbHJlYWR5IGNvbXB1dGVkXG5cblx0XHRmb3IgKGk9MDsgaTxmb3J3YXJkU2Vncy5sZW5ndGg7IGkrKykge1xuXHRcdFx0Zm9yd2FyZFNlZyA9IGZvcndhcmRTZWdzW2ldO1xuXG5cdFx0XHQvLyBmaWd1cmUgb3V0IHRoZSBjaGlsZCdzIG1heGltdW0gZm9yd2FyZCBwYXRoXG5cdFx0XHRjb21wdXRlU2xvdFNlZ1ByZXNzdXJlcyhmb3J3YXJkU2VnKTtcblxuXHRcdFx0Ly8gZWl0aGVyIHVzZSB0aGUgZXhpc3RpbmcgbWF4aW11bSwgb3IgdXNlIHRoZSBjaGlsZCdzIGZvcndhcmQgcHJlc3N1cmVcblx0XHRcdC8vIHBsdXMgb25lIChmb3IgdGhlIGZvcndhcmRTZWcgaXRzZWxmKVxuXHRcdFx0Zm9yd2FyZFByZXNzdXJlID0gTWF0aC5tYXgoXG5cdFx0XHRcdGZvcndhcmRQcmVzc3VyZSxcblx0XHRcdFx0MSArIGZvcndhcmRTZWcuZm9yd2FyZFByZXNzdXJlXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdHNlZy5mb3J3YXJkUHJlc3N1cmUgPSBmb3J3YXJkUHJlc3N1cmU7XG5cdH1cbn1cblxuXG4vLyBGaW5kIGFsbCB0aGUgc2VnbWVudHMgaW4gYG90aGVyU2Vnc2AgdGhhdCB2ZXJ0aWNhbGx5IGNvbGxpZGUgd2l0aCBgc2VnYC5cbi8vIEFwcGVuZCBpbnRvIGFuIG9wdGlvbmFsbHktc3VwcGxpZWQgYHJlc3VsdHNgIGFycmF5IGFuZCByZXR1cm4uXG5mdW5jdGlvbiBjb21wdXRlU2xvdFNlZ0NvbGxpc2lvbnMoc2VnLCBvdGhlclNlZ3MsIHJlc3VsdHMpIHtcblx0cmVzdWx0cyA9IHJlc3VsdHMgfHwgW107XG5cblx0Zm9yICh2YXIgaT0wOyBpPG90aGVyU2Vncy5sZW5ndGg7IGkrKykge1xuXHRcdGlmIChpc1Nsb3RTZWdDb2xsaXNpb24oc2VnLCBvdGhlclNlZ3NbaV0pKSB7XG5cdFx0XHRyZXN1bHRzLnB1c2gob3RoZXJTZWdzW2ldKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gcmVzdWx0cztcbn1cblxuXG4vLyBEbyB0aGVzZSBzZWdtZW50cyBvY2N1cHkgdGhlIHNhbWUgdmVydGljYWwgc3BhY2U/XG5mdW5jdGlvbiBpc1Nsb3RTZWdDb2xsaXNpb24oc2VnMSwgc2VnMikge1xuXHRyZXR1cm4gc2VnMS5ib3R0b20gPiBzZWcyLnRvcCAmJiBzZWcxLnRvcCA8IHNlZzIuYm90dG9tO1xufVxuXG47O1xuXG4vKiBBbiBhYnN0cmFjdCBjbGFzcyBmcm9tIHdoaWNoIG90aGVyIHZpZXdzIGluaGVyaXQgZnJvbVxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbnZhciBWaWV3ID0gRkMuVmlldyA9IENsYXNzLmV4dGVuZChFbWl0dGVyTWl4aW4sIExpc3RlbmVyTWl4aW4sIHtcblxuXHR0eXBlOiBudWxsLCAvLyBzdWJjbGFzcycgdmlldyBuYW1lIChzdHJpbmcpXG5cdG5hbWU6IG51bGwsIC8vIGRlcHJlY2F0ZWQuIHVzZSBgdHlwZWAgaW5zdGVhZFxuXHR0aXRsZTogbnVsbCwgLy8gdGhlIHRleHQgdGhhdCB3aWxsIGJlIGRpc3BsYXllZCBpbiB0aGUgaGVhZGVyJ3MgdGl0bGVcblxuXHRjYWxlbmRhcjogbnVsbCwgLy8gb3duZXIgQ2FsZW5kYXIgb2JqZWN0XG5cdG9wdGlvbnM6IG51bGwsIC8vIGhhc2ggY29udGFpbmluZyBhbGwgb3B0aW9ucy4gYWxyZWFkeSBtZXJnZWQgd2l0aCB2aWV3LXNwZWNpZmljLW9wdGlvbnNcblx0ZWw6IG51bGwsIC8vIHRoZSB2aWV3J3MgY29udGFpbmluZyBlbGVtZW50LiBzZXQgYnkgQ2FsZW5kYXJcblxuXHRpc0RhdGVTZXQ6IGZhbHNlLFxuXHRpc0RhdGVSZW5kZXJlZDogZmFsc2UsXG5cdGRhdGVSZW5kZXJRdWV1ZTogbnVsbCxcblxuXHRpc0V2ZW50c0JvdW5kOiBmYWxzZSxcblx0aXNFdmVudHNTZXQ6IGZhbHNlLFxuXHRpc0V2ZW50c1JlbmRlcmVkOiBmYWxzZSxcblx0ZXZlbnRSZW5kZXJRdWV1ZTogbnVsbCxcblxuXHQvLyByYW5nZSB0aGUgdmlldyBpcyBhY3R1YWxseSBkaXNwbGF5aW5nIChtb21lbnRzKVxuXHRzdGFydDogbnVsbCxcblx0ZW5kOiBudWxsLCAvLyBleGNsdXNpdmVcblxuXHQvLyByYW5nZSB0aGUgdmlldyBpcyBmb3JtYWxseSByZXNwb25zaWJsZSBmb3IgKG1vbWVudHMpXG5cdC8vIG1heSBiZSBkaWZmZXJlbnQgZnJvbSBzdGFydC9lbmQuIGZvciBleGFtcGxlLCBhIG1vbnRoIHZpZXcgbWlnaHQgaGF2ZSAxc3QtMzFzdCwgZXhjbHVkaW5nIHBhZGRlZCBkYXRlc1xuXHRpbnRlcnZhbFN0YXJ0OiBudWxsLFxuXHRpbnRlcnZhbEVuZDogbnVsbCwgLy8gZXhjbHVzaXZlXG5cdGludGVydmFsRHVyYXRpb246IG51bGwsXG5cdGludGVydmFsVW5pdDogbnVsbCwgLy8gbmFtZSBvZiBsYXJnZXN0IHVuaXQgYmVpbmcgZGlzcGxheWVkLCBsaWtlIFwibW9udGhcIiBvciBcIndlZWtcIlxuXG5cdGlzUlRMOiBmYWxzZSxcblx0aXNTZWxlY3RlZDogZmFsc2UsIC8vIGJvb2xlYW4gd2hldGhlciBhIHJhbmdlIG9mIHRpbWUgaXMgdXNlci1zZWxlY3RlZCBvciBub3Rcblx0c2VsZWN0ZWRFdmVudDogbnVsbCxcblxuXHRldmVudE9yZGVyU3BlY3M6IG51bGwsIC8vIGNyaXRlcmlhIGZvciBvcmRlcmluZyBldmVudHMgd2hlbiB0aGV5IGhhdmUgc2FtZSBkYXRlL3RpbWVcblxuXHQvLyBjbGFzc05hbWVzIHN0eWxlZCBieSBqcXVpIHRoZW1lc1xuXHR3aWRnZXRIZWFkZXJDbGFzczogbnVsbCxcblx0d2lkZ2V0Q29udGVudENsYXNzOiBudWxsLFxuXHRoaWdobGlnaHRTdGF0ZUNsYXNzOiBudWxsLFxuXG5cdC8vIGZvciBkYXRlIHV0aWxzLCBjb21wdXRlZCBmcm9tIG9wdGlvbnNcblx0bmV4dERheVRocmVzaG9sZDogbnVsbCxcblx0aXNIaWRkZW5EYXlIYXNoOiBudWxsLFxuXG5cdC8vIG5vdyBpbmRpY2F0b3Jcblx0aXNOb3dJbmRpY2F0b3JSZW5kZXJlZDogbnVsbCxcblx0aW5pdGlhbE5vd0RhdGU6IG51bGwsIC8vIHJlc3VsdCBmaXJzdCBnZXROb3cgY2FsbFxuXHRpbml0aWFsTm93UXVlcmllZE1zOiBudWxsLCAvLyBtcyB0aW1lIHRoZSBnZXROb3cgd2FzIGNhbGxlZFxuXHRub3dJbmRpY2F0b3JUaW1lb3V0SUQ6IG51bGwsIC8vIGZvciByZWZyZXNoIHRpbWluZyBvZiBub3cgaW5kaWNhdG9yXG5cdG5vd0luZGljYXRvckludGVydmFsSUQ6IG51bGwsIC8vIFwiXG5cblxuXHRjb25zdHJ1Y3RvcjogZnVuY3Rpb24oY2FsZW5kYXIsIHR5cGUsIG9wdGlvbnMsIGludGVydmFsRHVyYXRpb24pIHtcblxuXHRcdHRoaXMuY2FsZW5kYXIgPSBjYWxlbmRhcjtcblx0XHR0aGlzLnR5cGUgPSB0aGlzLm5hbWUgPSB0eXBlOyAvLyAubmFtZSBpcyBkZXByZWNhdGVkXG5cdFx0dGhpcy5vcHRpb25zID0gb3B0aW9ucztcblx0XHR0aGlzLmludGVydmFsRHVyYXRpb24gPSBpbnRlcnZhbER1cmF0aW9uIHx8IG1vbWVudC5kdXJhdGlvbigxLCAnZGF5Jyk7XG5cblx0XHR0aGlzLm5leHREYXlUaHJlc2hvbGQgPSBtb21lbnQuZHVyYXRpb24odGhpcy5vcHQoJ25leHREYXlUaHJlc2hvbGQnKSk7XG5cdFx0dGhpcy5pbml0VGhlbWluZ1Byb3BzKCk7XG5cdFx0dGhpcy5pbml0SGlkZGVuRGF5cygpO1xuXHRcdHRoaXMuaXNSVEwgPSB0aGlzLm9wdCgnaXNSVEwnKTtcblxuXHRcdHRoaXMuZXZlbnRPcmRlclNwZWNzID0gcGFyc2VGaWVsZFNwZWNzKHRoaXMub3B0KCdldmVudE9yZGVyJykpO1xuXG5cdFx0dGhpcy5kYXRlUmVuZGVyUXVldWUgPSBuZXcgVGFza1F1ZXVlKCk7XG5cdFx0dGhpcy5ldmVudFJlbmRlclF1ZXVlID0gbmV3IFRhc2tRdWV1ZSh0aGlzLm9wdCgnZXZlbnRSZW5kZXJXYWl0JykpO1xuXG5cdFx0dGhpcy5pbml0aWFsaXplKCk7XG5cdH0sXG5cblxuXHQvLyBBIGdvb2QgcGxhY2UgZm9yIHN1YmNsYXNzZXMgdG8gaW5pdGlhbGl6ZSBtZW1iZXIgdmFyaWFibGVzXG5cdGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xuXHRcdC8vIHN1YmNsYXNzZXMgY2FuIGltcGxlbWVudFxuXHR9LFxuXG5cblx0Ly8gUmV0cmlldmVzIGFuIG9wdGlvbiB3aXRoIHRoZSBnaXZlbiBuYW1lXG5cdG9wdDogZnVuY3Rpb24obmFtZSkge1xuXHRcdHJldHVybiB0aGlzLm9wdGlvbnNbbmFtZV07XG5cdH0sXG5cblxuXHQvLyBUcmlnZ2VycyBoYW5kbGVycyB0aGF0IGFyZSB2aWV3LXJlbGF0ZWQuIE1vZGlmaWVzIGFyZ3MgYmVmb3JlIHBhc3NpbmcgdG8gY2FsZW5kYXIuXG5cdHB1YmxpY2x5VHJpZ2dlcjogZnVuY3Rpb24obmFtZSwgdGhpc09iaikgeyAvLyBhcmd1bWVudHMgYmV5b25kIHRoaXNPYmogYXJlIHBhc3NlZCBhbG9uZ1xuXHRcdHZhciBjYWxlbmRhciA9IHRoaXMuY2FsZW5kYXI7XG5cblx0XHRyZXR1cm4gY2FsZW5kYXIucHVibGljbHlUcmlnZ2VyLmFwcGx5KFxuXHRcdFx0Y2FsZW5kYXIsXG5cdFx0XHRbbmFtZSwgdGhpc09iaiB8fCB0aGlzXS5jb25jYXQoXG5cdFx0XHRcdEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMiksIC8vIGFyZ3VtZW50cyBiZXlvbmQgdGhpc09ialxuXHRcdFx0XHRbIHRoaXMgXSAvLyBhbHdheXMgbWFrZSB0aGUgbGFzdCBhcmd1bWVudCBhIHJlZmVyZW5jZSB0byB0aGUgdmlldy4gVE9ETzogZGVwcmVjYXRlXG5cdFx0XHQpXG5cdFx0KTtcblx0fSxcblxuXG5cdC8vIFJldHVybnMgYSBwcm94eSBvZiB0aGUgZ2l2ZW4gcHJvbWlzZSB0aGF0IHdpbGwgYmUgcmVqZWN0ZWQgaWYgdGhlIGdpdmVuIGV2ZW50IGZpcmVzXG5cdC8vIGJlZm9yZSB0aGUgcHJvbWlzZSByZXNvbHZlcy5cblx0cmVqZWN0T246IGZ1bmN0aW9uKGV2ZW50TmFtZSwgcHJvbWlzZSkge1xuXHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cblx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRfdGhpcy5vbmUoZXZlbnROYW1lLCByZWplY3QpO1xuXG5cdFx0XHRmdW5jdGlvbiBjbGVhbnVwKCkge1xuXHRcdFx0XHRfdGhpcy5vZmYoZXZlbnROYW1lLCByZWplY3QpO1xuXHRcdFx0fVxuXG5cdFx0XHRwcm9taXNlLnRoZW4oZnVuY3Rpb24ocmVzKSB7IC8vIHN1Y2Nlc3Ncblx0XHRcdFx0Y2xlYW51cCgpO1xuXHRcdFx0XHRyZXNvbHZlKHJlcyk7XG5cdFx0XHR9LCBmdW5jdGlvbigpIHsgLy8gZmFpbHVyZVxuXHRcdFx0XHRjbGVhbnVwKCk7XG5cdFx0XHRcdHJlamVjdCgpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH0sXG5cblxuXHQvKiBEYXRlIENvbXB1dGF0aW9uXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBVcGRhdGVzIGFsbCBpbnRlcm5hbCBkYXRlcyBmb3IgZGlzcGxheWluZyB0aGUgZ2l2ZW4gdW56b25lZCByYW5nZS5cblx0c2V0UmFuZ2U6IGZ1bmN0aW9uKHJhbmdlKSB7XG5cdFx0JC5leHRlbmQodGhpcywgcmFuZ2UpOyAvLyBhc3NpZ25zIGV2ZXJ5IHByb3BlcnR5IHRvIHRoaXMgb2JqZWN0J3MgbWVtYmVyIHZhcmlhYmxlc1xuXHRcdHRoaXMudXBkYXRlVGl0bGUoKTtcblx0fSxcblxuXG5cdC8vIEdpdmVuIGEgc2luZ2xlIGN1cnJlbnQgdW56b25lZCBkYXRlLCBwcm9kdWNlIGluZm9ybWF0aW9uIGFib3V0IHdoYXQgcmFuZ2UgdG8gZGlzcGxheS5cblx0Ly8gU3ViY2xhc3NlcyBjYW4gb3ZlcnJpZGUuIE11c3QgcmV0dXJuIGFsbCBwcm9wZXJ0aWVzLlxuXHRjb21wdXRlUmFuZ2U6IGZ1bmN0aW9uKGRhdGUpIHtcblx0XHR2YXIgaW50ZXJ2YWxVbml0ID0gY29tcHV0ZUludGVydmFsVW5pdCh0aGlzLmludGVydmFsRHVyYXRpb24pO1xuXHRcdHZhciBpbnRlcnZhbFN0YXJ0ID0gZGF0ZS5jbG9uZSgpLnN0YXJ0T2YoaW50ZXJ2YWxVbml0KTtcblx0XHR2YXIgaW50ZXJ2YWxFbmQgPSBpbnRlcnZhbFN0YXJ0LmNsb25lKCkuYWRkKHRoaXMuaW50ZXJ2YWxEdXJhdGlvbik7XG5cdFx0dmFyIHN0YXJ0LCBlbmQ7XG5cblx0XHQvLyBub3JtYWxpemUgdGhlIHJhbmdlJ3MgdGltZS1hbWJpZ3VpdHlcblx0XHRpZiAoL3llYXJ8bW9udGh8d2Vla3xkYXkvLnRlc3QoaW50ZXJ2YWxVbml0KSkgeyAvLyB3aG9sZS1kYXlzP1xuXHRcdFx0aW50ZXJ2YWxTdGFydC5zdHJpcFRpbWUoKTtcblx0XHRcdGludGVydmFsRW5kLnN0cmlwVGltZSgpO1xuXHRcdH1cblx0XHRlbHNlIHsgLy8gbmVlZHMgdG8gaGF2ZSBhIHRpbWU/XG5cdFx0XHRpZiAoIWludGVydmFsU3RhcnQuaGFzVGltZSgpKSB7XG5cdFx0XHRcdGludGVydmFsU3RhcnQgPSB0aGlzLmNhbGVuZGFyLnRpbWUoMCk7IC8vIGdpdmUgMDA6MDAgdGltZVxuXHRcdFx0fVxuXHRcdFx0aWYgKCFpbnRlcnZhbEVuZC5oYXNUaW1lKCkpIHtcblx0XHRcdFx0aW50ZXJ2YWxFbmQgPSB0aGlzLmNhbGVuZGFyLnRpbWUoMCk7IC8vIGdpdmUgMDA6MDAgdGltZVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHN0YXJ0ID0gaW50ZXJ2YWxTdGFydC5jbG9uZSgpO1xuXHRcdHN0YXJ0ID0gdGhpcy5za2lwSGlkZGVuRGF5cyhzdGFydCk7XG5cdFx0ZW5kID0gaW50ZXJ2YWxFbmQuY2xvbmUoKTtcblx0XHRlbmQgPSB0aGlzLnNraXBIaWRkZW5EYXlzKGVuZCwgLTEsIHRydWUpOyAvLyBleGNsdXNpdmVseSBtb3ZlIGJhY2t3YXJkc1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdGludGVydmFsVW5pdDogaW50ZXJ2YWxVbml0LFxuXHRcdFx0aW50ZXJ2YWxTdGFydDogaW50ZXJ2YWxTdGFydCxcblx0XHRcdGludGVydmFsRW5kOiBpbnRlcnZhbEVuZCxcblx0XHRcdHN0YXJ0OiBzdGFydCxcblx0XHRcdGVuZDogZW5kXG5cdFx0fTtcblx0fSxcblxuXG5cdC8vIENvbXB1dGVzIHRoZSBuZXcgZGF0ZSB3aGVuIHRoZSB1c2VyIGhpdHMgdGhlIHByZXYgYnV0dG9uLCBnaXZlbiB0aGUgY3VycmVudCBkYXRlXG5cdGNvbXB1dGVQcmV2RGF0ZTogZnVuY3Rpb24oZGF0ZSkge1xuXHRcdHJldHVybiB0aGlzLm1hc3NhZ2VDdXJyZW50RGF0ZShcblx0XHRcdGRhdGUuY2xvbmUoKS5zdGFydE9mKHRoaXMuaW50ZXJ2YWxVbml0KS5zdWJ0cmFjdCh0aGlzLmludGVydmFsRHVyYXRpb24pLCAtMVxuXHRcdCk7XG5cdH0sXG5cblxuXHQvLyBDb21wdXRlcyB0aGUgbmV3IGRhdGUgd2hlbiB0aGUgdXNlciBoaXRzIHRoZSBuZXh0IGJ1dHRvbiwgZ2l2ZW4gdGhlIGN1cnJlbnQgZGF0ZVxuXHRjb21wdXRlTmV4dERhdGU6IGZ1bmN0aW9uKGRhdGUpIHtcblx0XHRyZXR1cm4gdGhpcy5tYXNzYWdlQ3VycmVudERhdGUoXG5cdFx0XHRkYXRlLmNsb25lKCkuc3RhcnRPZih0aGlzLmludGVydmFsVW5pdCkuYWRkKHRoaXMuaW50ZXJ2YWxEdXJhdGlvbilcblx0XHQpO1xuXHR9LFxuXG5cblx0Ly8gR2l2ZW4gYW4gYXJiaXRyYXJpbHkgY2FsY3VsYXRlZCBjdXJyZW50IGRhdGUgb2YgdGhlIGNhbGVuZGFyLCByZXR1cm5zIGEgZGF0ZSB0aGF0IGlzIGVuc3VyZWQgdG8gYmUgY29tcGxldGVseVxuXHQvLyB2aXNpYmxlLiBgZGlyZWN0aW9uYCBpcyBvcHRpb25hbCBhbmQgaW5kaWNhdGVzIHdoaWNoIGRpcmVjdGlvbiB0aGUgY3VycmVudCBkYXRlIHdhcyBiZWluZ1xuXHQvLyBpbmNyZW1lbnRlZCBvciBkZWNyZW1lbnRlZCAoMSBvciAtMSkuXG5cdG1hc3NhZ2VDdXJyZW50RGF0ZTogZnVuY3Rpb24oZGF0ZSwgZGlyZWN0aW9uKSB7XG5cdFx0aWYgKHRoaXMuaW50ZXJ2YWxEdXJhdGlvbi5hcygnZGF5cycpIDw9IDEpIHsgLy8gaWYgdGhlIHZpZXcgZGlzcGxheXMgYSBzaW5nbGUgZGF5IG9yIHNtYWxsZXJcblx0XHRcdGlmICh0aGlzLmlzSGlkZGVuRGF5KGRhdGUpKSB7XG5cdFx0XHRcdGRhdGUgPSB0aGlzLnNraXBIaWRkZW5EYXlzKGRhdGUsIGRpcmVjdGlvbik7XG5cdFx0XHRcdGRhdGUuc3RhcnRPZignZGF5Jyk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRhdGU7XG5cdH0sXG5cblxuXHQvKiBUaXRsZSBhbmQgRGF0ZSBGb3JtYXR0aW5nXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBTZXRzIHRoZSB2aWV3J3MgdGl0bGUgcHJvcGVydHkgdG8gdGhlIG1vc3QgdXBkYXRlZCBjb21wdXRlZCB2YWx1ZVxuXHR1cGRhdGVUaXRsZTogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy50aXRsZSA9IHRoaXMuY29tcHV0ZVRpdGxlKCk7XG5cdFx0dGhpcy5jYWxlbmRhci5zZXRUb29sYmFyc1RpdGxlKHRoaXMudGl0bGUpO1xuXHR9LFxuXG5cblx0Ly8gQ29tcHV0ZXMgd2hhdCB0aGUgdGl0bGUgYXQgdGhlIHRvcCBvZiB0aGUgY2FsZW5kYXIgc2hvdWxkIGJlIGZvciB0aGlzIHZpZXdcblx0Y29tcHV0ZVRpdGxlOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5mb3JtYXRSYW5nZShcblx0XHRcdHtcblx0XHRcdFx0Ly8gaW4gY2FzZSBpbnRlcnZhbFN0YXJ0L0VuZCBoYXMgYSB0aW1lLCBtYWtlIHN1cmUgdGltZXpvbmUgaXMgY29ycmVjdFxuXHRcdFx0XHRzdGFydDogdGhpcy5jYWxlbmRhci5hcHBseVRpbWV6b25lKHRoaXMuaW50ZXJ2YWxTdGFydCksXG5cdFx0XHRcdGVuZDogdGhpcy5jYWxlbmRhci5hcHBseVRpbWV6b25lKHRoaXMuaW50ZXJ2YWxFbmQpXG5cdFx0XHR9LFxuXHRcdFx0dGhpcy5vcHQoJ3RpdGxlRm9ybWF0JykgfHwgdGhpcy5jb21wdXRlVGl0bGVGb3JtYXQoKSxcblx0XHRcdHRoaXMub3B0KCd0aXRsZVJhbmdlU2VwYXJhdG9yJylcblx0XHQpO1xuXHR9LFxuXG5cblx0Ly8gR2VuZXJhdGVzIHRoZSBmb3JtYXQgc3RyaW5nIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gZ2VuZXJhdGUgdGhlIHRpdGxlIGZvciB0aGUgY3VycmVudCBkYXRlIHJhbmdlLlxuXHQvLyBBdHRlbXB0cyB0byBjb21wdXRlIHRoZSBtb3N0IGFwcHJvcHJpYXRlIGZvcm1hdCBpZiBub3QgZXhwbGljaXRseSBzcGVjaWZpZWQgd2l0aCBgdGl0bGVGb3JtYXRgLlxuXHRjb21wdXRlVGl0bGVGb3JtYXQ6IGZ1bmN0aW9uKCkge1xuXHRcdGlmICh0aGlzLmludGVydmFsVW5pdCA9PSAneWVhcicpIHtcblx0XHRcdHJldHVybiAnWVlZWSc7XG5cdFx0fVxuXHRcdGVsc2UgaWYgKHRoaXMuaW50ZXJ2YWxVbml0ID09ICdtb250aCcpIHtcblx0XHRcdHJldHVybiB0aGlzLm9wdCgnbW9udGhZZWFyRm9ybWF0Jyk7IC8vIGxpa2UgXCJTZXB0ZW1iZXIgMjAxNFwiXG5cdFx0fVxuXHRcdGVsc2UgaWYgKHRoaXMuaW50ZXJ2YWxEdXJhdGlvbi5hcygnZGF5cycpID4gMSkge1xuXHRcdFx0cmV0dXJuICdsbCc7IC8vIG11bHRpLWRheSByYW5nZS4gc2hvcnRlciwgbGlrZSBcIlNlcCA5IC0gMTAgMjAxNFwiXG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0cmV0dXJuICdMTCc7IC8vIG9uZSBkYXkuIGxvbmdlciwgbGlrZSBcIlNlcHRlbWJlciA5IDIwMTRcIlxuXHRcdH1cblx0fSxcblxuXG5cdC8vIFV0aWxpdHkgZm9yIGZvcm1hdHRpbmcgYSByYW5nZS4gQWNjZXB0cyBhIHJhbmdlIG9iamVjdCwgZm9ybWF0dGluZyBzdHJpbmcsIGFuZCBvcHRpb25hbCBzZXBhcmF0b3IuXG5cdC8vIERpc3BsYXlzIGFsbC1kYXkgcmFuZ2VzIG5hdHVyYWxseSwgd2l0aCBhbiBpbmNsdXNpdmUgZW5kLiBUYWtlcyB0aGUgY3VycmVudCBpc1JUTCBpbnRvIGFjY291bnQuXG5cdC8vIFRoZSB0aW1lem9uZXMgb2YgdGhlIGRhdGVzIHdpdGhpbiBgcmFuZ2VgIHdpbGwgYmUgcmVzcGVjdGVkLlxuXHRmb3JtYXRSYW5nZTogZnVuY3Rpb24ocmFuZ2UsIGZvcm1hdFN0ciwgc2VwYXJhdG9yKSB7XG5cdFx0dmFyIGVuZCA9IHJhbmdlLmVuZDtcblxuXHRcdGlmICghZW5kLmhhc1RpbWUoKSkgeyAvLyBhbGwtZGF5P1xuXHRcdFx0ZW5kID0gZW5kLmNsb25lKCkuc3VidHJhY3QoMSk7IC8vIGNvbnZlcnQgdG8gaW5jbHVzaXZlLiBsYXN0IG1zIG9mIHByZXZpb3VzIGRheVxuXHRcdH1cblxuXHRcdHJldHVybiBmb3JtYXRSYW5nZShyYW5nZS5zdGFydCwgZW5kLCBmb3JtYXRTdHIsIHNlcGFyYXRvciwgdGhpcy5vcHQoJ2lzUlRMJykpO1xuXHR9LFxuXG5cblx0Z2V0QWxsRGF5SHRtbDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMub3B0KCdhbGxEYXlIdG1sJykgfHwgaHRtbEVzY2FwZSh0aGlzLm9wdCgnYWxsRGF5VGV4dCcpKTtcblx0fSxcblxuXG5cdC8qIE5hdmlnYXRpb25cblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIEdlbmVyYXRlcyBIVE1MIGZvciBhbiBhbmNob3IgdG8gYW5vdGhlciB2aWV3IGludG8gdGhlIGNhbGVuZGFyLlxuXHQvLyBXaWxsIGVpdGhlciBnZW5lcmF0ZSBhbiA8YT4gdGFnIG9yIGEgbm9uLWNsaWNrYWJsZSA8c3Bhbj4gdGFnLCBkZXBlbmRpbmcgb24gZW5hYmxlZCBzZXR0aW5ncy5cblx0Ly8gYGdvdG9PcHRpb25zYCBjYW4gZWl0aGVyIGJlIGEgbW9tZW50IGlucHV0LCBvciBhbiBvYmplY3Qgd2l0aCB0aGUgZm9ybTpcblx0Ly8geyBkYXRlLCB0eXBlLCBmb3JjZU9mZiB9XG5cdC8vIGB0eXBlYCBpcyBhIHZpZXctdHlwZSBsaWtlIFwiZGF5XCIgb3IgXCJ3ZWVrXCIuIGRlZmF1bHQgdmFsdWUgaXMgXCJkYXlcIi5cblx0Ly8gYGF0dHJzYCBhbmQgYGlubmVySHRtbGAgYXJlIHVzZSB0byBnZW5lcmF0ZSB0aGUgcmVzdCBvZiB0aGUgSFRNTCB0YWcuXG5cdGJ1aWxkR290b0FuY2hvckh0bWw6IGZ1bmN0aW9uKGdvdG9PcHRpb25zLCBhdHRycywgaW5uZXJIdG1sKSB7XG5cdFx0dmFyIGRhdGUsIHR5cGUsIGZvcmNlT2ZmO1xuXHRcdHZhciBmaW5hbE9wdGlvbnM7XG5cblx0XHRpZiAoJC5pc1BsYWluT2JqZWN0KGdvdG9PcHRpb25zKSkge1xuXHRcdFx0ZGF0ZSA9IGdvdG9PcHRpb25zLmRhdGU7XG5cdFx0XHR0eXBlID0gZ290b09wdGlvbnMudHlwZTtcblx0XHRcdGZvcmNlT2ZmID0gZ290b09wdGlvbnMuZm9yY2VPZmY7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0ZGF0ZSA9IGdvdG9PcHRpb25zOyAvLyBhIHNpbmdsZSBtb21lbnQgaW5wdXRcblx0XHR9XG5cdFx0ZGF0ZSA9IEZDLm1vbWVudChkYXRlKTsgLy8gaWYgYSBzdHJpbmcsIHBhcnNlIGl0XG5cblx0XHRmaW5hbE9wdGlvbnMgPSB7IC8vIGZvciBzZXJpYWxpemF0aW9uIGludG8gdGhlIGxpbmtcblx0XHRcdGRhdGU6IGRhdGUuZm9ybWF0KCdZWVlZLU1NLUREJyksXG5cdFx0XHR0eXBlOiB0eXBlIHx8ICdkYXknXG5cdFx0fTtcblxuXHRcdGlmICh0eXBlb2YgYXR0cnMgPT09ICdzdHJpbmcnKSB7XG5cdFx0XHRpbm5lckh0bWwgPSBhdHRycztcblx0XHRcdGF0dHJzID0gbnVsbDtcblx0XHR9XG5cblx0XHRhdHRycyA9IGF0dHJzID8gJyAnICsgYXR0cnNUb1N0cihhdHRycykgOiAnJzsgLy8gd2lsbCBoYXZlIGEgbGVhZGluZyBzcGFjZVxuXHRcdGlubmVySHRtbCA9IGlubmVySHRtbCB8fCAnJztcblxuXHRcdGlmICghZm9yY2VPZmYgJiYgdGhpcy5vcHQoJ25hdkxpbmtzJykpIHtcblx0XHRcdHJldHVybiAnPGEnICsgYXR0cnMgK1xuXHRcdFx0XHQnIGRhdGEtZ290bz1cIicgKyBodG1sRXNjYXBlKEpTT04uc3RyaW5naWZ5KGZpbmFsT3B0aW9ucykpICsgJ1wiPicgK1xuXHRcdFx0XHRpbm5lckh0bWwgK1xuXHRcdFx0XHQnPC9hPic7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0cmV0dXJuICc8c3BhbicgKyBhdHRycyArICc+JyArXG5cdFx0XHRcdGlubmVySHRtbCArXG5cdFx0XHRcdCc8L3NwYW4+Jztcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBSZW5kZXJpbmcgTm9uLWRhdGUtcmVsYXRlZCBDb250ZW50XG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuXHQvLyBTZXRzIHRoZSBjb250YWluZXIgZWxlbWVudCB0aGF0IHRoZSB2aWV3IHNob3VsZCByZW5kZXIgaW5zaWRlIG9mLCBkb2VzIGdsb2JhbCBET00tcmVsYXRlZCBpbml0aWFsaXphdGlvbnMsXG5cdC8vIGFuZCByZW5kZXJzIGFsbCB0aGUgbm9uLWRhdGUtcmVsYXRlZCBjb250ZW50IGluc2lkZS5cblx0c2V0RWxlbWVudDogZnVuY3Rpb24oZWwpIHtcblx0XHR0aGlzLmVsID0gZWw7XG5cdFx0dGhpcy5iaW5kR2xvYmFsSGFuZGxlcnMoKTtcblx0XHR0aGlzLnJlbmRlclNrZWxldG9uKCk7XG5cdH0sXG5cblxuXHQvLyBSZW1vdmVzIHRoZSB2aWV3J3MgY29udGFpbmVyIGVsZW1lbnQgZnJvbSB0aGUgRE9NLCBjbGVhcmluZyBhbnkgY29udGVudCBiZWZvcmVoYW5kLlxuXHQvLyBVbmRvZXMgYW55IG90aGVyIERPTS1yZWxhdGVkIGF0dGFjaG1lbnRzLlxuXHRyZW1vdmVFbGVtZW50OiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnVuc2V0RGF0ZSgpO1xuXHRcdHRoaXMudW5yZW5kZXJTa2VsZXRvbigpO1xuXG5cdFx0dGhpcy51bmJpbmRHbG9iYWxIYW5kbGVycygpO1xuXG5cdFx0dGhpcy5lbC5yZW1vdmUoKTtcblx0XHQvLyBOT1RFOiBkb24ndCBudWxsLW91dCB0aGlzLmVsIGluIGNhc2UgdGhlIFZpZXcgd2FzIGRlc3Ryb3llZCB3aXRoaW4gYW4gQVBJIGNhbGxiYWNrLlxuXHRcdC8vIFdlIGRvbid0IG51bGwtb3V0IHRoZSBWaWV3J3Mgb3RoZXIgalF1ZXJ5IGVsZW1lbnQgcmVmZXJlbmNlcyB1cG9uIGRlc3Ryb3ksXG5cdFx0Ly8gIHNvIHdlIHNob3VsZG4ndCBraWxsIHRoaXMuZWwgZWl0aGVyLlxuXHR9LFxuXG5cblx0Ly8gUmVuZGVycyB0aGUgYmFzaWMgc3RydWN0dXJlIG9mIHRoZSB2aWV3IGJlZm9yZSBhbnkgY29udGVudCBpcyByZW5kZXJlZFxuXHRyZW5kZXJTa2VsZXRvbjogZnVuY3Rpb24oKSB7XG5cdFx0Ly8gc3ViY2xhc3NlcyBzaG91bGQgaW1wbGVtZW50XG5cdH0sXG5cblxuXHQvLyBVbnJlbmRlcnMgdGhlIGJhc2ljIHN0cnVjdHVyZSBvZiB0aGUgdmlld1xuXHR1bnJlbmRlclNrZWxldG9uOiBmdW5jdGlvbigpIHtcblx0XHQvLyBzdWJjbGFzc2VzIHNob3VsZCBpbXBsZW1lbnRcblx0fSxcblxuXG5cdC8vIERhdGUgU2V0dGluZy9VbnNldHRpbmdcblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG5cdHNldERhdGU6IGZ1bmN0aW9uKGRhdGUpIHtcblx0XHR2YXIgaXNSZXNldCA9IHRoaXMuaXNEYXRlU2V0O1xuXG5cdFx0dGhpcy5pc0RhdGVTZXQgPSB0cnVlO1xuXHRcdHRoaXMuaGFuZGxlRGF0ZShkYXRlLCBpc1Jlc2V0KTtcblx0XHR0aGlzLnRyaWdnZXIoaXNSZXNldCA/ICdkYXRlUmVzZXQnIDogJ2RhdGVTZXQnLCBkYXRlKTtcblx0fSxcblxuXG5cdHVuc2V0RGF0ZTogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHRoaXMuaXNEYXRlU2V0KSB7XG5cdFx0XHR0aGlzLmlzRGF0ZVNldCA9IGZhbHNlO1xuXHRcdFx0dGhpcy5oYW5kbGVEYXRlVW5zZXQoKTtcblx0XHRcdHRoaXMudHJpZ2dlcignZGF0ZVVuc2V0Jyk7XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gRGF0ZSBIYW5kbGluZ1xuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cblx0aGFuZGxlRGF0ZTogZnVuY3Rpb24oZGF0ZSwgaXNSZXNldCkge1xuXHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cblx0XHR0aGlzLnVuYmluZEV2ZW50cygpOyAvLyB3aWxsIGRvIG5vdGhpbmcgaWYgbm90IGFscmVhZHkgYm91bmRcblx0XHR0aGlzLnJlcXVlc3REYXRlUmVuZGVyKGRhdGUpLnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHQvLyB3aXNoIHdlIGNvdWxkIHN0YXJ0IGVhcmxpZXIsIGJ1dCBzZXRSYW5nZS9jb21wdXRlUmFuZ2UgbmVlZHMgdG8gZXhlY3V0ZSBmaXJzdFxuXHRcdFx0X3RoaXMuYmluZEV2ZW50cygpOyAvLyB3aWxsIHJlcXVlc3QgZXZlbnRzXG5cdFx0fSk7XG5cdH0sXG5cblxuXHRoYW5kbGVEYXRlVW5zZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMudW5iaW5kRXZlbnRzKCk7XG5cdFx0dGhpcy5yZXF1ZXN0RGF0ZVVucmVuZGVyKCk7XG5cdH0sXG5cblxuXHQvLyBEYXRlIFJlbmRlciBRdWV1aW5nXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuXHQvLyBpZiBkYXRlIG5vdCBzcGVjaWZpZWQsIHVzZXMgY3VycmVudFxuXHRyZXF1ZXN0RGF0ZVJlbmRlcjogZnVuY3Rpb24oZGF0ZSkge1xuXHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cblx0XHRyZXR1cm4gdGhpcy5kYXRlUmVuZGVyUXVldWUuYWRkKGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIF90aGlzLmV4ZWN1dGVEYXRlUmVuZGVyKGRhdGUpO1xuXHRcdH0pO1xuXHR9LFxuXG5cblx0cmVxdWVzdERhdGVVbnJlbmRlcjogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIF90aGlzID0gdGhpcztcblxuXHRcdHJldHVybiB0aGlzLmRhdGVSZW5kZXJRdWV1ZS5hZGQoZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gX3RoaXMuZXhlY3V0ZURhdGVVbnJlbmRlcigpO1xuXHRcdH0pO1xuXHR9LFxuXG5cblx0Ly8gRGF0ZSBIaWdoLWxldmVsIFJlbmRlcmluZ1xuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cblx0Ly8gaWYgZGF0ZSBub3Qgc3BlY2lmaWVkLCB1c2VzIGN1cnJlbnRcblx0ZXhlY3V0ZURhdGVSZW5kZXI6IGZ1bmN0aW9uKGRhdGUpIHtcblx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdFx0Ly8gaWYgcmVuZGVyaW5nIGEgbmV3IGRhdGUsIHJlc2V0IHNjcm9sbCB0byBpbml0aWFsIHN0YXRlIChzY3JvbGxUaW1lKVxuXHRcdGlmIChkYXRlKSB7XG5cdFx0XHR0aGlzLmNhcHR1cmVJbml0aWFsU2Nyb2xsKCk7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0dGhpcy5jYXB0dXJlU2Nyb2xsKCk7IC8vIGEgcmVyZW5kZXIgb2YgdGhlIGN1cnJlbnQgZGF0ZVxuXHRcdH1cblxuXHRcdHRoaXMuZnJlZXplSGVpZ2h0KCk7XG5cblx0XHRyZXR1cm4gdGhpcy5leGVjdXRlRGF0ZVVucmVuZGVyKCkudGhlbihmdW5jdGlvbigpIHtcblxuXHRcdFx0aWYgKGRhdGUpIHtcblx0XHRcdFx0X3RoaXMuc2V0UmFuZ2UoX3RoaXMuY29tcHV0ZVJhbmdlKGRhdGUpKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKF90aGlzLnJlbmRlcikge1xuXHRcdFx0XHRfdGhpcy5yZW5kZXIoKTsgLy8gVE9ETzogZGVwcmVjYXRlXG5cdFx0XHR9XG5cblx0XHRcdF90aGlzLnJlbmRlckRhdGVzKCk7XG5cdFx0XHRfdGhpcy51cGRhdGVTaXplKCk7XG5cdFx0XHRfdGhpcy5yZW5kZXJCdXNpbmVzc0hvdXJzKCk7IC8vIG1pZ2h0IG5lZWQgY29vcmRpbmF0ZXMsIHNvIHNob3VsZCBnbyBhZnRlciB1cGRhdGVTaXplKClcblx0XHRcdF90aGlzLnN0YXJ0Tm93SW5kaWNhdG9yKCk7XG5cblx0XHRcdF90aGlzLnRoYXdIZWlnaHQoKTtcblx0XHRcdF90aGlzLnJlbGVhc2VTY3JvbGwoKTtcblxuXHRcdFx0X3RoaXMuaXNEYXRlUmVuZGVyZWQgPSB0cnVlO1xuXHRcdFx0X3RoaXMub25EYXRlUmVuZGVyKCk7XG5cdFx0XHRfdGhpcy50cmlnZ2VyKCdkYXRlUmVuZGVyJyk7XG5cdFx0fSk7XG5cdH0sXG5cblxuXHRleGVjdXRlRGF0ZVVucmVuZGVyOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdFx0aWYgKF90aGlzLmlzRGF0ZVJlbmRlcmVkKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5yZXF1ZXN0RXZlbnRzVW5yZW5kZXIoKS50aGVuKGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdF90aGlzLnVuc2VsZWN0KCk7XG5cdFx0XHRcdF90aGlzLnN0b3BOb3dJbmRpY2F0b3IoKTtcblx0XHRcdFx0X3RoaXMudHJpZ2dlclVucmVuZGVyKCk7XG5cdFx0XHRcdF90aGlzLnVucmVuZGVyQnVzaW5lc3NIb3VycygpO1xuXHRcdFx0XHRfdGhpcy51bnJlbmRlckRhdGVzKCk7XG5cblx0XHRcdFx0aWYgKF90aGlzLmRlc3Ryb3kpIHtcblx0XHRcdFx0XHRfdGhpcy5kZXN0cm95KCk7IC8vIFRPRE86IGRlcHJlY2F0ZVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0X3RoaXMuaXNEYXRlUmVuZGVyZWQgPSBmYWxzZTtcblx0XHRcdFx0X3RoaXMudHJpZ2dlcignZGF0ZVVucmVuZGVyJyk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gRGF0ZSBSZW5kZXJpbmcgVHJpZ2dlcnNcblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG5cdG9uRGF0ZVJlbmRlcjogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy50cmlnZ2VyUmVuZGVyKCk7XG5cdH0sXG5cblxuXHQvLyBEYXRlIExvdy1sZXZlbCBSZW5kZXJpbmdcblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG5cdC8vIGRhdGUtY2VsbCBjb250ZW50IG9ubHlcblx0cmVuZGVyRGF0ZXM6IGZ1bmN0aW9uKCkge1xuXHRcdC8vIHN1YmNsYXNzZXMgc2hvdWxkIGltcGxlbWVudFxuXHR9LFxuXG5cblx0Ly8gZGF0ZS1jZWxsIGNvbnRlbnQgb25seVxuXHR1bnJlbmRlckRhdGVzOiBmdW5jdGlvbigpIHtcblx0XHQvLyBzdWJjbGFzc2VzIHNob3VsZCBvdmVycmlkZVxuXHR9LFxuXG5cblx0Ly8gTWlzYyB2aWV3IHJlbmRlcmluZyB1dGlsc1xuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuXHQvLyBTaWduYWxzIHRoYXQgdGhlIHZpZXcncyBjb250ZW50IGhhcyBiZWVuIHJlbmRlcmVkXG5cdHRyaWdnZXJSZW5kZXI6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMucHVibGljbHlUcmlnZ2VyKCd2aWV3UmVuZGVyJywgdGhpcywgdGhpcywgdGhpcy5lbCk7XG5cdH0sXG5cblxuXHQvLyBTaWduYWxzIHRoYXQgdGhlIHZpZXcncyBjb250ZW50IGlzIGFib3V0IHRvIGJlIHVucmVuZGVyZWRcblx0dHJpZ2dlclVucmVuZGVyOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnB1YmxpY2x5VHJpZ2dlcigndmlld0Rlc3Ryb3knLCB0aGlzLCB0aGlzLCB0aGlzLmVsKTtcblx0fSxcblxuXG5cdC8vIEJpbmRzIERPTSBoYW5kbGVycyB0byBlbGVtZW50cyB0aGF0IHJlc2lkZSBvdXRzaWRlIHRoZSB2aWV3IGNvbnRhaW5lciwgc3VjaCBhcyB0aGUgZG9jdW1lbnRcblx0YmluZEdsb2JhbEhhbmRsZXJzOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLmxpc3RlblRvKCQoZG9jdW1lbnQpLCAnbW91c2Vkb3duJywgdGhpcy5oYW5kbGVEb2N1bWVudE1vdXNlZG93bik7XG5cdFx0dGhpcy5saXN0ZW5UbygkKGRvY3VtZW50KSwgJ3RvdWNoc3RhcnQnLCB0aGlzLnByb2Nlc3NVbnNlbGVjdCk7XG5cdH0sXG5cblxuXHQvLyBVbmJpbmRzIERPTSBoYW5kbGVycyBmcm9tIGVsZW1lbnRzIHRoYXQgcmVzaWRlIG91dHNpZGUgdGhlIHZpZXcgY29udGFpbmVyXG5cdHVuYmluZEdsb2JhbEhhbmRsZXJzOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnN0b3BMaXN0ZW5pbmdUbygkKGRvY3VtZW50KSk7XG5cdH0sXG5cblxuXHQvLyBJbml0aWFsaXplcyBpbnRlcm5hbCB2YXJpYWJsZXMgcmVsYXRlZCB0byB0aGVtaW5nXG5cdGluaXRUaGVtaW5nUHJvcHM6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB0bSA9IHRoaXMub3B0KCd0aGVtZScpID8gJ3VpJyA6ICdmYyc7XG5cblx0XHR0aGlzLndpZGdldEhlYWRlckNsYXNzID0gdG0gKyAnLXdpZGdldC1oZWFkZXInO1xuXHRcdHRoaXMud2lkZ2V0Q29udGVudENsYXNzID0gdG0gKyAnLXdpZGdldC1jb250ZW50Jztcblx0XHR0aGlzLmhpZ2hsaWdodFN0YXRlQ2xhc3MgPSB0bSArICctc3RhdGUtaGlnaGxpZ2h0Jztcblx0fSxcblxuXG5cdC8qIEJ1c2luZXNzIEhvdXJzXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBSZW5kZXJzIGJ1c2luZXNzLWhvdXJzIG9udG8gdGhlIHZpZXcuIEFzc3VtZXMgdXBkYXRlU2l6ZSBoYXMgYWxyZWFkeSBiZWVuIGNhbGxlZC5cblx0cmVuZGVyQnVzaW5lc3NIb3VyczogZnVuY3Rpb24oKSB7XG5cdFx0Ly8gc3ViY2xhc3NlcyBzaG91bGQgaW1wbGVtZW50XG5cdH0sXG5cblxuXHQvLyBVbnJlbmRlcnMgcHJldmlvdXNseS1yZW5kZXJlZCBidXNpbmVzcy1ob3Vyc1xuXHR1bnJlbmRlckJ1c2luZXNzSG91cnM6IGZ1bmN0aW9uKCkge1xuXHRcdC8vIHN1YmNsYXNzZXMgc2hvdWxkIGltcGxlbWVudFxuXHR9LFxuXG5cblx0LyogTm93IEluZGljYXRvclxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gSW1tZWRpYXRlbHkgcmVuZGVyIHRoZSBjdXJyZW50IHRpbWUgaW5kaWNhdG9yIGFuZCBiZWdpbnMgcmUtcmVuZGVyaW5nIGl0IGF0IGFuIGludGVydmFsLFxuXHQvLyB3aGljaCBpcyBkZWZpbmVkIGJ5IHRoaXMuZ2V0Tm93SW5kaWNhdG9yVW5pdCgpLlxuXHQvLyBUT0RPOiBzb21laG93IGRvIHRoaXMgZm9yIHRoZSBjdXJyZW50IHdob2xlIGRheSdzIGJhY2tncm91bmQgdG9vXG5cdHN0YXJ0Tm93SW5kaWNhdG9yOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXHRcdHZhciB1bml0O1xuXHRcdHZhciB1cGRhdGU7XG5cdFx0dmFyIGRlbGF5OyAvLyBtcyB3YWl0IHZhbHVlXG5cblx0XHRpZiAodGhpcy5vcHQoJ25vd0luZGljYXRvcicpKSB7XG5cdFx0XHR1bml0ID0gdGhpcy5nZXROb3dJbmRpY2F0b3JVbml0KCk7XG5cdFx0XHRpZiAodW5pdCkge1xuXHRcdFx0XHR1cGRhdGUgPSBwcm94eSh0aGlzLCAndXBkYXRlTm93SW5kaWNhdG9yJyk7IC8vIGJpbmQgdG8gYHRoaXNgXG5cblx0XHRcdFx0dGhpcy5pbml0aWFsTm93RGF0ZSA9IHRoaXMuY2FsZW5kYXIuZ2V0Tm93KCk7XG5cdFx0XHRcdHRoaXMuaW5pdGlhbE5vd1F1ZXJpZWRNcyA9ICtuZXcgRGF0ZSgpO1xuXHRcdFx0XHR0aGlzLnJlbmRlck5vd0luZGljYXRvcih0aGlzLmluaXRpYWxOb3dEYXRlKTtcblx0XHRcdFx0dGhpcy5pc05vd0luZGljYXRvclJlbmRlcmVkID0gdHJ1ZTtcblxuXHRcdFx0XHQvLyB3YWl0IHVudGlsIHRoZSBiZWdpbm5pbmcgb2YgdGhlIG5leHQgaW50ZXJ2YWxcblx0XHRcdFx0ZGVsYXkgPSB0aGlzLmluaXRpYWxOb3dEYXRlLmNsb25lKCkuc3RhcnRPZih1bml0KS5hZGQoMSwgdW5pdCkgLSB0aGlzLmluaXRpYWxOb3dEYXRlO1xuXHRcdFx0XHR0aGlzLm5vd0luZGljYXRvclRpbWVvdXRJRCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0X3RoaXMubm93SW5kaWNhdG9yVGltZW91dElEID0gbnVsbDtcblx0XHRcdFx0XHR1cGRhdGUoKTtcblx0XHRcdFx0XHRkZWxheSA9ICttb21lbnQuZHVyYXRpb24oMSwgdW5pdCk7XG5cdFx0XHRcdFx0ZGVsYXkgPSBNYXRoLm1heCgxMDAsIGRlbGF5KTsgLy8gcHJldmVudCB0b28gZnJlcXVlbnRcblx0XHRcdFx0XHRfdGhpcy5ub3dJbmRpY2F0b3JJbnRlcnZhbElEID0gc2V0SW50ZXJ2YWwodXBkYXRlLCBkZWxheSk7IC8vIHVwZGF0ZSBldmVyeSBpbnRlcnZhbFxuXHRcdFx0XHR9LCBkZWxheSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gcmVyZW5kZXJzIHRoZSBub3cgaW5kaWNhdG9yLCBjb21wdXRpbmcgdGhlIG5ldyBjdXJyZW50IHRpbWUgZnJvbSB0aGUgYW1vdW50IG9mIHRpbWUgdGhhdCBoYXMgcGFzc2VkXG5cdC8vIHNpbmNlIHRoZSBpbml0aWFsIGdldE5vdyBjYWxsLlxuXHR1cGRhdGVOb3dJbmRpY2F0b3I6IGZ1bmN0aW9uKCkge1xuXHRcdGlmICh0aGlzLmlzTm93SW5kaWNhdG9yUmVuZGVyZWQpIHtcblx0XHRcdHRoaXMudW5yZW5kZXJOb3dJbmRpY2F0b3IoKTtcblx0XHRcdHRoaXMucmVuZGVyTm93SW5kaWNhdG9yKFxuXHRcdFx0XHR0aGlzLmluaXRpYWxOb3dEYXRlLmNsb25lKCkuYWRkKG5ldyBEYXRlKCkgLSB0aGlzLmluaXRpYWxOb3dRdWVyaWVkTXMpIC8vIGFkZCBtc1xuXHRcdFx0KTtcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBJbW1lZGlhdGVseSB1bnJlbmRlcnMgdGhlIHZpZXcncyBjdXJyZW50IHRpbWUgaW5kaWNhdG9yIGFuZCBzdG9wcyBhbnkgcmUtcmVuZGVyaW5nIHRpbWVycy5cblx0Ly8gV29uJ3QgY2F1c2Ugc2lkZSBlZmZlY3RzIGlmIGluZGljYXRvciBpc24ndCByZW5kZXJlZC5cblx0c3RvcE5vd0luZGljYXRvcjogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHRoaXMuaXNOb3dJbmRpY2F0b3JSZW5kZXJlZCkge1xuXG5cdFx0XHRpZiAodGhpcy5ub3dJbmRpY2F0b3JUaW1lb3V0SUQpIHtcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRoaXMubm93SW5kaWNhdG9yVGltZW91dElEKTtcblx0XHRcdFx0dGhpcy5ub3dJbmRpY2F0b3JUaW1lb3V0SUQgPSBudWxsO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHRoaXMubm93SW5kaWNhdG9ySW50ZXJ2YWxJRCkge1xuXHRcdFx0XHRjbGVhclRpbWVvdXQodGhpcy5ub3dJbmRpY2F0b3JJbnRlcnZhbElEKTtcblx0XHRcdFx0dGhpcy5ub3dJbmRpY2F0b3JJbnRlcnZhbElEID0gbnVsbDtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy51bnJlbmRlck5vd0luZGljYXRvcigpO1xuXHRcdFx0dGhpcy5pc05vd0luZGljYXRvclJlbmRlcmVkID0gZmFsc2U7XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gUmV0dXJucyBhIHN0cmluZyB1bml0LCBsaWtlICdzZWNvbmQnIG9yICdtaW51dGUnIHRoYXQgZGVmaW5lZCBob3cgb2Z0ZW4gdGhlIGN1cnJlbnQgdGltZSBpbmRpY2F0b3Jcblx0Ly8gc2hvdWxkIGJlIHJlZnJlc2hlZC4gSWYgc29tZXRoaW5nIGZhbHN5IGlzIHJldHVybmVkLCBubyB0aW1lIGluZGljYXRvciBpcyByZW5kZXJlZCBhdCBhbGwuXG5cdGdldE5vd0luZGljYXRvclVuaXQ6IGZ1bmN0aW9uKCkge1xuXHRcdC8vIHN1YmNsYXNzZXMgc2hvdWxkIGltcGxlbWVudFxuXHR9LFxuXG5cblx0Ly8gUmVuZGVycyBhIGN1cnJlbnQgdGltZSBpbmRpY2F0b3IgYXQgdGhlIGdpdmVuIGRhdGV0aW1lXG5cdHJlbmRlck5vd0luZGljYXRvcjogZnVuY3Rpb24oZGF0ZSkge1xuXHRcdC8vIHN1YmNsYXNzZXMgc2hvdWxkIGltcGxlbWVudFxuXHR9LFxuXG5cblx0Ly8gVW5kb2VzIHRoZSByZW5kZXJpbmcgYWN0aW9ucyBmcm9tIHJlbmRlck5vd0luZGljYXRvclxuXHR1bnJlbmRlck5vd0luZGljYXRvcjogZnVuY3Rpb24oKSB7XG5cdFx0Ly8gc3ViY2xhc3NlcyBzaG91bGQgaW1wbGVtZW50XG5cdH0sXG5cblxuXHQvKiBEaW1lbnNpb25zXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBSZWZyZXNoZXMgYW55dGhpbmcgZGVwZW5kYW50IHVwb24gc2l6aW5nIG9mIHRoZSBjb250YWluZXIgZWxlbWVudCBvZiB0aGUgZ3JpZFxuXHR1cGRhdGVTaXplOiBmdW5jdGlvbihpc1Jlc2l6ZSkge1xuXG5cdFx0aWYgKGlzUmVzaXplKSB7XG5cdFx0XHR0aGlzLmNhcHR1cmVTY3JvbGwoKTtcblx0XHR9XG5cblx0XHR0aGlzLnVwZGF0ZUhlaWdodChpc1Jlc2l6ZSk7XG5cdFx0dGhpcy51cGRhdGVXaWR0aChpc1Jlc2l6ZSk7XG5cdFx0dGhpcy51cGRhdGVOb3dJbmRpY2F0b3IoKTtcblxuXHRcdGlmIChpc1Jlc2l6ZSkge1xuXHRcdFx0dGhpcy5yZWxlYXNlU2Nyb2xsKCk7XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gUmVmcmVzaGVzIHRoZSBob3Jpem9udGFsIGRpbWVuc2lvbnMgb2YgdGhlIGNhbGVuZGFyXG5cdHVwZGF0ZVdpZHRoOiBmdW5jdGlvbihpc1Jlc2l6ZSkge1xuXHRcdC8vIHN1YmNsYXNzZXMgc2hvdWxkIGltcGxlbWVudFxuXHR9LFxuXG5cblx0Ly8gUmVmcmVzaGVzIHRoZSB2ZXJ0aWNhbCBkaW1lbnNpb25zIG9mIHRoZSBjYWxlbmRhclxuXHR1cGRhdGVIZWlnaHQ6IGZ1bmN0aW9uKGlzUmVzaXplKSB7XG5cdFx0dmFyIGNhbGVuZGFyID0gdGhpcy5jYWxlbmRhcjsgLy8gd2UgcG9sbCB0aGUgY2FsZW5kYXIgZm9yIGhlaWdodCBpbmZvcm1hdGlvblxuXG5cdFx0dGhpcy5zZXRIZWlnaHQoXG5cdFx0XHRjYWxlbmRhci5nZXRTdWdnZXN0ZWRWaWV3SGVpZ2h0KCksXG5cdFx0XHRjYWxlbmRhci5pc0hlaWdodEF1dG8oKVxuXHRcdCk7XG5cdH0sXG5cblxuXHQvLyBVcGRhdGVzIHRoZSB2ZXJ0aWNhbCBkaW1lbnNpb25zIG9mIHRoZSBjYWxlbmRhciB0byB0aGUgc3BlY2lmaWVkIGhlaWdodC5cblx0Ly8gaWYgYGlzQXV0b2AgaXMgc2V0IHRvIHRydWUsIGhlaWdodCBiZWNvbWVzIG1lcmVseSBhIHN1Z2dlc3Rpb24gYW5kIHRoZSB2aWV3IHNob3VsZCB1c2UgaXRzIFwibmF0dXJhbFwiIGhlaWdodC5cblx0c2V0SGVpZ2h0OiBmdW5jdGlvbihoZWlnaHQsIGlzQXV0bykge1xuXHRcdC8vIHN1YmNsYXNzZXMgc2hvdWxkIGltcGxlbWVudFxuXHR9LFxuXG5cblx0LyogU2Nyb2xsZXJcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdGNhcHR1cmVkU2Nyb2xsOiBudWxsLFxuXHRjYXB0dXJlZFNjcm9sbERlcHRoOiAwLFxuXG5cblx0Y2FwdHVyZVNjcm9sbDogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCEodGhpcy5jYXB0dXJlZFNjcm9sbERlcHRoKyspKSB7XG5cdFx0XHR0aGlzLmNhcHR1cmVkU2Nyb2xsID0gdGhpcy5pc0RhdGVSZW5kZXJlZCA/IHRoaXMucXVlcnlTY3JvbGwoKSA6IHt9OyAvLyByZXF1aXJlIGEgcmVuZGVyIGZpcnN0XG5cdFx0XHRyZXR1cm4gdHJ1ZTsgLy8gcm9vdD9cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9LFxuXG5cblx0Y2FwdHVyZUluaXRpYWxTY3JvbGw6IGZ1bmN0aW9uKGZvcmNlZFNjcm9sbCkge1xuXHRcdGlmICh0aGlzLmNhcHR1cmVTY3JvbGwoKSkgeyAvLyByb290P1xuXHRcdFx0dGhpcy5jYXB0dXJlZFNjcm9sbC5pc0luaXRpYWwgPSB0cnVlO1xuXG5cdFx0XHRpZiAoZm9yY2VkU2Nyb2xsKSB7XG5cdFx0XHRcdCQuZXh0ZW5kKHRoaXMuY2FwdHVyZWRTY3JvbGwsIGZvcmNlZFNjcm9sbCk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0dGhpcy5jYXB0dXJlZFNjcm9sbC5pc0NvbXB1dGVkID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblxuXHRyZWxlYXNlU2Nyb2xsOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgc2Nyb2xsID0gdGhpcy5jYXB0dXJlZFNjcm9sbDtcblx0XHR2YXIgaXNSb290ID0gdGhpcy5kaXNjYXJkU2Nyb2xsKCk7XG5cblx0XHRpZiAoc2Nyb2xsLmlzQ29tcHV0ZWQpIHtcblx0XHRcdGlmIChpc1Jvb3QpIHtcblx0XHRcdFx0Ly8gb25seSBjb21wdXRlIGluaXRpYWwgc2Nyb2xsIGlmIGl0IHdpbGwgYWN0dWFsbHkgYmUgdXNlZCAoaXMgdGhlIHJvb3QgY2FwdHVyZSlcblx0XHRcdFx0JC5leHRlbmQoc2Nyb2xsLCB0aGlzLmNvbXB1dGVJbml0aWFsU2Nyb2xsKCkpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdHNjcm9sbCA9IG51bGw7IC8vIHNjcm9sbCBjb3VsZG4ndCBiZSBjb21wdXRlZC4gZG9uJ3QgYXBwbHkgaXQgdG8gdGhlIERPTVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmIChzY3JvbGwpIHtcblx0XHRcdC8vIHdlIGFjdCBpbW1lZGlhdGVseSBvbiBhIHJlbGVhc2VTY3JvbGwgb3BlcmF0aW9uLCBhcyBvcHBvc2VkIHRvIGNhcHR1cmVTY3JvbGwuXG5cdFx0XHQvLyBpZiBjYXB0dXJlL3JlbGVhc2Ugd3JhcHMgYSByZW5kZXIgb3BlcmF0aW9uIHRoYXQgc2NyZXdzIHVwIHRoZSBzY3JvbGwsXG5cdFx0XHQvLyB3ZSBzdGlsbCB3YW50IHRvIHJlc3RvcmUgaXQgYSBnb29kIHN0YXRlIGFmdGVyLCByZWdhcmRsZXNzIG9mIGRlcHRoLlxuXG5cdFx0XHRpZiAoc2Nyb2xsLmlzSW5pdGlhbCkge1xuXHRcdFx0XHR0aGlzLmhhcmRTZXRTY3JvbGwoc2Nyb2xsKTsgLy8gb3V0c21hcnQgaG93IGJyb3dzZXJzIHNldCBzY3JvbGwgb24gaW5pdGlhbCBET01cblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHR0aGlzLnNldFNjcm9sbChzY3JvbGwpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXG5cdGRpc2NhcmRTY3JvbGw6IGZ1bmN0aW9uKCkge1xuXHRcdGlmICghKC0tdGhpcy5jYXB0dXJlZFNjcm9sbERlcHRoKSkge1xuXHRcdFx0dGhpcy5jYXB0dXJlZFNjcm9sbCA9IG51bGw7XG5cdFx0XHRyZXR1cm4gdHJ1ZTsgLy8gcm9vdD9cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9LFxuXG5cblx0Y29tcHV0ZUluaXRpYWxTY3JvbGw6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB7fTtcblx0fSxcblxuXG5cdHF1ZXJ5U2Nyb2xsOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4ge307XG5cdH0sXG5cblxuXHRoYXJkU2V0U2Nyb2xsOiBmdW5jdGlvbihzY3JvbGwpIHtcblx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXHRcdHZhciBleGVjID0gZnVuY3Rpb24oKSB7IF90aGlzLnNldFNjcm9sbChzY3JvbGwpOyB9O1xuXHRcdGV4ZWMoKTtcblx0XHRzZXRUaW1lb3V0KGV4ZWMsIDApOyAvLyB0byBzdXJlbHkgY2xlYXIgdGhlIGJyb3dzZXIncyBpbml0aWFsIHNjcm9sbCBmb3IgdGhlIERPTVxuXHR9LFxuXG5cblx0c2V0U2Nyb2xsOiBmdW5jdGlvbihzY3JvbGwpIHtcblx0fSxcblxuXG5cdC8qIEhlaWdodCBGcmVlemluZ1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0ZnJlZXplSGVpZ2h0OiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLmNhbGVuZGFyLmZyZWV6ZUNvbnRlbnRIZWlnaHQoKTtcblx0fSxcblxuXG5cdHRoYXdIZWlnaHQ6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuY2FsZW5kYXIudGhhd0NvbnRlbnRIZWlnaHQoKTtcblx0fSxcblxuXG5cdC8vIEV2ZW50IEJpbmRpbmcvVW5iaW5kaW5nXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuXHRiaW5kRXZlbnRzOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdFx0aWYgKCF0aGlzLmlzRXZlbnRzQm91bmQpIHtcblx0XHRcdHRoaXMuaXNFdmVudHNCb3VuZCA9IHRydWU7XG5cdFx0XHR0aGlzLnJlamVjdE9uKCdldmVudHNVbmJpbmQnLCB0aGlzLnJlcXVlc3RFdmVudHMoKSkudGhlbihmdW5jdGlvbihldmVudHMpIHsgLy8gVE9ETzogdGVzdCByZWplY3Rpb25cblx0XHRcdFx0X3RoaXMubGlzdGVuVG8oX3RoaXMuY2FsZW5kYXIsICdldmVudHNSZXNldCcsIF90aGlzLnNldEV2ZW50cyk7XG5cdFx0XHRcdF90aGlzLnNldEV2ZW50cyhldmVudHMpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9LFxuXG5cblx0dW5iaW5kRXZlbnRzOiBmdW5jdGlvbigpIHtcblx0XHRpZiAodGhpcy5pc0V2ZW50c0JvdW5kKSB7XG5cdFx0XHR0aGlzLmlzRXZlbnRzQm91bmQgPSBmYWxzZTtcblx0XHRcdHRoaXMuc3RvcExpc3RlbmluZ1RvKHRoaXMuY2FsZW5kYXIsICdldmVudHNSZXNldCcpO1xuXHRcdFx0dGhpcy51bnNldEV2ZW50cygpO1xuXHRcdFx0dGhpcy50cmlnZ2VyKCdldmVudHNVbmJpbmQnKTtcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBFdmVudCBTZXR0aW5nL1Vuc2V0dGluZ1xuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cblx0c2V0RXZlbnRzOiBmdW5jdGlvbihldmVudHMpIHtcblx0XHR2YXIgaXNSZXNldCA9IHRoaXMuaXNFdmVudFNldDtcblxuXHRcdHRoaXMuaXNFdmVudHNTZXQgPSB0cnVlO1xuXHRcdHRoaXMuaGFuZGxlRXZlbnRzKGV2ZW50cywgaXNSZXNldCk7XG5cdFx0dGhpcy50cmlnZ2VyKGlzUmVzZXQgPyAnZXZlbnRzUmVzZXQnIDogJ2V2ZW50c1NldCcsIGV2ZW50cyk7XG5cdH0sXG5cblxuXHR1bnNldEV2ZW50czogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHRoaXMuaXNFdmVudHNTZXQpIHtcblx0XHRcdHRoaXMuaXNFdmVudHNTZXQgPSBmYWxzZTtcblx0XHRcdHRoaXMuaGFuZGxlRXZlbnRzVW5zZXQoKTtcblx0XHRcdHRoaXMudHJpZ2dlcignZXZlbnRzVW5zZXQnKTtcblx0XHR9XG5cdH0sXG5cblxuXHR3aGVuRXZlbnRzU2V0OiBmdW5jdGlvbigpIHtcblx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdFx0aWYgKHRoaXMuaXNFdmVudHNTZXQpIHtcblx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5nZXRDdXJyZW50RXZlbnRzKCkpO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7XG5cdFx0XHRcdF90aGlzLm9uZSgnZXZlbnRzU2V0JywgcmVzb2x2ZSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBFdmVudCBIYW5kbGluZ1xuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cblx0aGFuZGxlRXZlbnRzOiBmdW5jdGlvbihldmVudHMsIGlzUmVzZXQpIHtcblx0XHR0aGlzLnJlcXVlc3RFdmVudHNSZW5kZXIoZXZlbnRzKTtcblx0fSxcblxuXG5cdGhhbmRsZUV2ZW50c1Vuc2V0OiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnJlcXVlc3RFdmVudHNVbnJlbmRlcigpO1xuXHR9LFxuXG5cblx0Ly8gRXZlbnQgUmVuZGVyIFF1ZXVpbmdcblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG5cdC8vIGFzc3VtZXMgYW55IHByZXZpb3VzIGV2ZW50IHJlbmRlcnMgaGF2ZSBiZWVuIGNsZWFyZWQgYWxyZWFkeVxuXHRyZXF1ZXN0RXZlbnRzUmVuZGVyOiBmdW5jdGlvbihldmVudHMpIHtcblx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdFx0cmV0dXJuIHRoaXMuZXZlbnRSZW5kZXJRdWV1ZS5hZGQoZnVuY3Rpb24oKSB7IC8vIG1pZ2h0IG5vdCByZXR1cm4gYSBwcm9taXNlIGlmIGRlYm91bmNlZCE/IGJhZFxuXHRcdFx0cmV0dXJuIF90aGlzLmV4ZWN1dGVFdmVudHNSZW5kZXIoZXZlbnRzKTtcblx0XHR9KTtcblx0fSxcblxuXG5cdHJlcXVlc3RFdmVudHNVbnJlbmRlcjogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIF90aGlzID0gdGhpcztcblxuXHRcdGlmICh0aGlzLmlzRXZlbnRzUmVuZGVyZWQpIHtcblx0XHRcdHJldHVybiB0aGlzLmV2ZW50UmVuZGVyUXVldWUuYWRkUXVpY2tseShmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIF90aGlzLmV4ZWN1dGVFdmVudHNVbnJlbmRlcigpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuXHRcdH1cblx0fSxcblxuXG5cdHJlcXVlc3RDdXJyZW50RXZlbnRzUmVuZGVyOiBmdW5jdGlvbigpIHtcblx0XHRpZiAodGhpcy5pc0V2ZW50c1NldCkge1xuXHRcdFx0dGhpcy5yZXF1ZXN0RXZlbnRzUmVuZGVyKHRoaXMuZ2V0Q3VycmVudEV2ZW50cygpKTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBFdmVudCBIaWdoLWxldmVsIFJlbmRlcmluZ1xuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cblx0ZXhlY3V0ZUV2ZW50c1JlbmRlcjogZnVuY3Rpb24oZXZlbnRzKSB7XG5cdFx0dmFyIF90aGlzID0gdGhpcztcblxuXHRcdHRoaXMuY2FwdHVyZVNjcm9sbCgpO1xuXHRcdHRoaXMuZnJlZXplSGVpZ2h0KCk7XG5cblx0XHRyZXR1cm4gdGhpcy5leGVjdXRlRXZlbnRzVW5yZW5kZXIoKS50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0X3RoaXMucmVuZGVyRXZlbnRzKGV2ZW50cyk7XG5cblx0XHRcdF90aGlzLnRoYXdIZWlnaHQoKTtcblx0XHRcdF90aGlzLnJlbGVhc2VTY3JvbGwoKTtcblxuXHRcdFx0X3RoaXMuaXNFdmVudHNSZW5kZXJlZCA9IHRydWU7XG5cdFx0XHRfdGhpcy5vbkV2ZW50c1JlbmRlcigpO1xuXHRcdFx0X3RoaXMudHJpZ2dlcignZXZlbnRzUmVuZGVyJyk7XG5cdFx0fSk7XG5cdH0sXG5cblxuXHRleGVjdXRlRXZlbnRzVW5yZW5kZXI6IGZ1bmN0aW9uKCkge1xuXHRcdGlmICh0aGlzLmlzRXZlbnRzUmVuZGVyZWQpIHtcblx0XHRcdHRoaXMub25CZWZvcmVFdmVudHNVbnJlbmRlcigpO1xuXG5cdFx0XHR0aGlzLmNhcHR1cmVTY3JvbGwoKTtcblx0XHRcdHRoaXMuZnJlZXplSGVpZ2h0KCk7XG5cblx0XHRcdGlmICh0aGlzLmRlc3Ryb3lFdmVudHMpIHtcblx0XHRcdFx0dGhpcy5kZXN0cm95RXZlbnRzKCk7IC8vIFRPRE86IGRlcHJlY2F0ZVxuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLnVucmVuZGVyRXZlbnRzKCk7XG5cblx0XHRcdHRoaXMudGhhd0hlaWdodCgpO1xuXHRcdFx0dGhpcy5yZWxlYXNlU2Nyb2xsKCk7XG5cblx0XHRcdHRoaXMuaXNFdmVudHNSZW5kZXJlZCA9IGZhbHNlO1xuXHRcdFx0dGhpcy50cmlnZ2VyKCdldmVudHNVbnJlbmRlcicpO1xuXHRcdH1cblxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsgLy8gYWx3YXlzIHN5bmNocm9ub3VzXG5cdH0sXG5cblxuXHQvLyBFdmVudCBSZW5kZXJpbmcgVHJpZ2dlcnNcblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG5cdC8vIFNpZ25hbHMgdGhhdCBhbGwgZXZlbnRzIGhhdmUgYmVlbiByZW5kZXJlZFxuXHRvbkV2ZW50c1JlbmRlcjogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5yZW5kZXJlZEV2ZW50U2VnRWFjaChmdW5jdGlvbihzZWcpIHtcblx0XHRcdHRoaXMucHVibGljbHlUcmlnZ2VyKCdldmVudEFmdGVyUmVuZGVyJywgc2VnLmV2ZW50LCBzZWcuZXZlbnQsIHNlZy5lbCk7XG5cdFx0fSk7XG5cdFx0dGhpcy5wdWJsaWNseVRyaWdnZXIoJ2V2ZW50QWZ0ZXJBbGxSZW5kZXInKTtcblx0fSxcblxuXG5cdC8vIFNpZ25hbHMgdGhhdCBhbGwgZXZlbnQgZWxlbWVudHMgYXJlIGFib3V0IHRvIGJlIHJlbW92ZWRcblx0b25CZWZvcmVFdmVudHNVbnJlbmRlcjogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5yZW5kZXJlZEV2ZW50U2VnRWFjaChmdW5jdGlvbihzZWcpIHtcblx0XHRcdHRoaXMucHVibGljbHlUcmlnZ2VyKCdldmVudERlc3Ryb3knLCBzZWcuZXZlbnQsIHNlZy5ldmVudCwgc2VnLmVsKTtcblx0XHR9KTtcblx0fSxcblxuXG5cdC8vIEV2ZW50IExvdy1sZXZlbCBSZW5kZXJpbmdcblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG5cdC8vIFJlbmRlcnMgdGhlIGV2ZW50cyBvbnRvIHRoZSB2aWV3LlxuXHRyZW5kZXJFdmVudHM6IGZ1bmN0aW9uKGV2ZW50cykge1xuXHRcdC8vIHN1YmNsYXNzZXMgc2hvdWxkIGltcGxlbWVudFxuXHR9LFxuXG5cblx0Ly8gUmVtb3ZlcyBldmVudCBlbGVtZW50cyBmcm9tIHRoZSB2aWV3LlxuXHR1bnJlbmRlckV2ZW50czogZnVuY3Rpb24oKSB7XG5cdFx0Ly8gc3ViY2xhc3NlcyBzaG91bGQgaW1wbGVtZW50XG5cdH0sXG5cblxuXHQvLyBFdmVudCBEYXRhIEFjY2Vzc1xuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cblx0cmVxdWVzdEV2ZW50czogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuY2FsZW5kYXIucmVxdWVzdEV2ZW50cyh0aGlzLnN0YXJ0LCB0aGlzLmVuZCk7XG5cdH0sXG5cblxuXHRnZXRDdXJyZW50RXZlbnRzOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5jYWxlbmRhci5nZXRQcnVuZWRFdmVudENhY2hlKCk7XG5cdH0sXG5cblxuXHQvLyBFdmVudCBSZW5kZXJpbmcgVXRpbHNcblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG5cdC8vIEdpdmVuIGFuIGV2ZW50IGFuZCB0aGUgZGVmYXVsdCBlbGVtZW50IHVzZWQgZm9yIHJlbmRlcmluZywgcmV0dXJucyB0aGUgZWxlbWVudCB0aGF0IHNob3VsZCBhY3R1YWxseSBiZSB1c2VkLlxuXHQvLyBCYXNpY2FsbHkgcnVucyBldmVudHMgYW5kIGVsZW1lbnRzIHRocm91Z2ggdGhlIGV2ZW50UmVuZGVyIGhvb2suXG5cdHJlc29sdmVFdmVudEVsOiBmdW5jdGlvbihldmVudCwgZWwpIHtcblx0XHR2YXIgY3VzdG9tID0gdGhpcy5wdWJsaWNseVRyaWdnZXIoJ2V2ZW50UmVuZGVyJywgZXZlbnQsIGV2ZW50LCBlbCk7XG5cblx0XHRpZiAoY3VzdG9tID09PSBmYWxzZSkgeyAvLyBtZWFucyBkb24ndCByZW5kZXIgYXQgYWxsXG5cdFx0XHRlbCA9IG51bGw7XG5cdFx0fVxuXHRcdGVsc2UgaWYgKGN1c3RvbSAmJiBjdXN0b20gIT09IHRydWUpIHtcblx0XHRcdGVsID0gJChjdXN0b20pO1xuXHRcdH1cblxuXHRcdHJldHVybiBlbDtcblx0fSxcblxuXG5cdC8vIEhpZGVzIGFsbCByZW5kZXJlZCBldmVudCBzZWdtZW50cyBsaW5rZWQgdG8gdGhlIGdpdmVuIGV2ZW50XG5cdHNob3dFdmVudDogZnVuY3Rpb24oZXZlbnQpIHtcblx0XHR0aGlzLnJlbmRlcmVkRXZlbnRTZWdFYWNoKGZ1bmN0aW9uKHNlZykge1xuXHRcdFx0c2VnLmVsLmNzcygndmlzaWJpbGl0eScsICcnKTtcblx0XHR9LCBldmVudCk7XG5cdH0sXG5cblxuXHQvLyBTaG93cyBhbGwgcmVuZGVyZWQgZXZlbnQgc2VnbWVudHMgbGlua2VkIHRvIHRoZSBnaXZlbiBldmVudFxuXHRoaWRlRXZlbnQ6IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0dGhpcy5yZW5kZXJlZEV2ZW50U2VnRWFjaChmdW5jdGlvbihzZWcpIHtcblx0XHRcdHNlZy5lbC5jc3MoJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7XG5cdFx0fSwgZXZlbnQpO1xuXHR9LFxuXG5cblx0Ly8gSXRlcmF0ZXMgdGhyb3VnaCBldmVudCBzZWdtZW50cyB0aGF0IGhhdmUgYmVlbiByZW5kZXJlZCAoaGF2ZSBhbiBlbCkuIEdvZXMgdGhyb3VnaCBhbGwgYnkgZGVmYXVsdC5cblx0Ly8gSWYgdGhlIG9wdGlvbmFsIGBldmVudGAgYXJndW1lbnQgaXMgc3BlY2lmaWVkLCBvbmx5IGl0ZXJhdGVzIHRocm91Z2ggc2VnbWVudHMgbGlua2VkIHRvIHRoYXQgZXZlbnQuXG5cdC8vIFRoZSBgdGhpc2AgdmFsdWUgb2YgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHdpbGwgYmUgdGhlIHZpZXcuXG5cdHJlbmRlcmVkRXZlbnRTZWdFYWNoOiBmdW5jdGlvbihmdW5jLCBldmVudCkge1xuXHRcdHZhciBzZWdzID0gdGhpcy5nZXRFdmVudFNlZ3MoKTtcblx0XHR2YXIgaTtcblxuXHRcdGZvciAoaSA9IDA7IGkgPCBzZWdzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZiAoIWV2ZW50IHx8IHNlZ3NbaV0uZXZlbnQuX2lkID09PSBldmVudC5faWQpIHtcblx0XHRcdFx0aWYgKHNlZ3NbaV0uZWwpIHtcblx0XHRcdFx0XHRmdW5jLmNhbGwodGhpcywgc2Vnc1tpXSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblxuXHQvLyBSZXRyaWV2ZXMgYWxsIHRoZSByZW5kZXJlZCBzZWdtZW50IG9iamVjdHMgZm9yIHRoZSB2aWV3XG5cdGdldEV2ZW50U2VnczogZnVuY3Rpb24oKSB7XG5cdFx0Ly8gc3ViY2xhc3NlcyBtdXN0IGltcGxlbWVudFxuXHRcdHJldHVybiBbXTtcblx0fSxcblxuXG5cdC8qIEV2ZW50IERyYWctbi1Ecm9wXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBDb21wdXRlcyBpZiB0aGUgZ2l2ZW4gZXZlbnQgaXMgYWxsb3dlZCB0byBiZSBkcmFnZ2VkIGJ5IHRoZSB1c2VyXG5cdGlzRXZlbnREcmFnZ2FibGU6IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0cmV0dXJuIHRoaXMuaXNFdmVudFN0YXJ0RWRpdGFibGUoZXZlbnQpO1xuXHR9LFxuXG5cblx0aXNFdmVudFN0YXJ0RWRpdGFibGU6IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0cmV0dXJuIGZpcnN0RGVmaW5lZChcblx0XHRcdGV2ZW50LnN0YXJ0RWRpdGFibGUsXG5cdFx0XHQoZXZlbnQuc291cmNlIHx8IHt9KS5zdGFydEVkaXRhYmxlLFxuXHRcdFx0dGhpcy5vcHQoJ2V2ZW50U3RhcnRFZGl0YWJsZScpLFxuXHRcdFx0dGhpcy5pc0V2ZW50R2VuZXJhbGx5RWRpdGFibGUoZXZlbnQpXG5cdFx0KTtcblx0fSxcblxuXG5cdGlzRXZlbnRHZW5lcmFsbHlFZGl0YWJsZTogZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRyZXR1cm4gZmlyc3REZWZpbmVkKFxuXHRcdFx0ZXZlbnQuZWRpdGFibGUsXG5cdFx0XHQoZXZlbnQuc291cmNlIHx8IHt9KS5lZGl0YWJsZSxcblx0XHRcdHRoaXMub3B0KCdlZGl0YWJsZScpXG5cdFx0KTtcblx0fSxcblxuXG5cdC8vIE11c3QgYmUgY2FsbGVkIHdoZW4gYW4gZXZlbnQgaW4gdGhlIHZpZXcgaXMgZHJvcHBlZCBvbnRvIG5ldyBsb2NhdGlvbi5cblx0Ly8gYGRyb3BMb2NhdGlvbmAgaXMgYW4gb2JqZWN0IHRoYXQgY29udGFpbnMgdGhlIG5ldyB6b25lZCBzdGFydC9lbmQvYWxsRGF5IHZhbHVlcyBmb3IgdGhlIGV2ZW50LlxuXHRyZXBvcnRFdmVudERyb3A6IGZ1bmN0aW9uKGV2ZW50LCBkcm9wTG9jYXRpb24sIGxhcmdlVW5pdCwgZWwsIGV2KSB7XG5cdFx0dmFyIGNhbGVuZGFyID0gdGhpcy5jYWxlbmRhcjtcblx0XHR2YXIgbXV0YXRlUmVzdWx0ID0gY2FsZW5kYXIubXV0YXRlRXZlbnQoZXZlbnQsIGRyb3BMb2NhdGlvbiwgbGFyZ2VVbml0KTtcblx0XHR2YXIgdW5kb0Z1bmMgPSBmdW5jdGlvbigpIHtcblx0XHRcdG11dGF0ZVJlc3VsdC51bmRvKCk7XG5cdFx0XHRjYWxlbmRhci5yZXBvcnRFdmVudENoYW5nZSgpO1xuXHRcdH07XG5cblx0XHR0aGlzLnRyaWdnZXJFdmVudERyb3AoZXZlbnQsIG11dGF0ZVJlc3VsdC5kYXRlRGVsdGEsIHVuZG9GdW5jLCBlbCwgZXYpO1xuXHRcdGNhbGVuZGFyLnJlcG9ydEV2ZW50Q2hhbmdlKCk7IC8vIHdpbGwgcmVyZW5kZXIgZXZlbnRzXG5cdH0sXG5cblxuXHQvLyBUcmlnZ2VycyBldmVudC1kcm9wIGhhbmRsZXJzIHRoYXQgaGF2ZSBzdWJzY3JpYmVkIHZpYSB0aGUgQVBJXG5cdHRyaWdnZXJFdmVudERyb3A6IGZ1bmN0aW9uKGV2ZW50LCBkYXRlRGVsdGEsIHVuZG9GdW5jLCBlbCwgZXYpIHtcblx0XHR0aGlzLnB1YmxpY2x5VHJpZ2dlcignZXZlbnREcm9wJywgZWxbMF0sIGV2ZW50LCBkYXRlRGVsdGEsIHVuZG9GdW5jLCBldiwge30pOyAvLyB7fSA9IGpxdWkgZHVtbXlcblx0fSxcblxuXG5cdC8qIEV4dGVybmFsIEVsZW1lbnQgRHJhZy1uLURyb3Bcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIE11c3QgYmUgY2FsbGVkIHdoZW4gYW4gZXh0ZXJuYWwgZWxlbWVudCwgdmlhIGpRdWVyeSBVSSwgaGFzIGJlZW4gZHJvcHBlZCBvbnRvIHRoZSBjYWxlbmRhci5cblx0Ly8gYG1ldGFgIGlzIHRoZSBwYXJzZWQgZGF0YSB0aGF0IGhhcyBiZWVuIGVtYmVkZGVkIGludG8gdGhlIGRyYWdnaW5nIGV2ZW50LlxuXHQvLyBgZHJvcExvY2F0aW9uYCBpcyBhbiBvYmplY3QgdGhhdCBjb250YWlucyB0aGUgbmV3IHpvbmVkIHN0YXJ0L2VuZC9hbGxEYXkgdmFsdWVzIGZvciB0aGUgZXZlbnQuXG5cdHJlcG9ydEV4dGVybmFsRHJvcDogZnVuY3Rpb24obWV0YSwgZHJvcExvY2F0aW9uLCBlbCwgZXYsIHVpKSB7XG5cdFx0dmFyIGV2ZW50UHJvcHMgPSBtZXRhLmV2ZW50UHJvcHM7XG5cdFx0dmFyIGV2ZW50SW5wdXQ7XG5cdFx0dmFyIGV2ZW50O1xuXG5cdFx0Ly8gVHJ5IHRvIGJ1aWxkIGFuIGV2ZW50IG9iamVjdCBhbmQgcmVuZGVyIGl0LiBUT0RPOiBkZWNvdXBsZSB0aGUgdHdvXG5cdFx0aWYgKGV2ZW50UHJvcHMpIHtcblx0XHRcdGV2ZW50SW5wdXQgPSAkLmV4dGVuZCh7fSwgZXZlbnRQcm9wcywgZHJvcExvY2F0aW9uKTtcblx0XHRcdGV2ZW50ID0gdGhpcy5jYWxlbmRhci5yZW5kZXJFdmVudChldmVudElucHV0LCBtZXRhLnN0aWNrKVswXTsgLy8gcmVuZGVyRXZlbnQgcmV0dXJucyBhbiBhcnJheVxuXHRcdH1cblxuXHRcdHRoaXMudHJpZ2dlckV4dGVybmFsRHJvcChldmVudCwgZHJvcExvY2F0aW9uLCBlbCwgZXYsIHVpKTtcblx0fSxcblxuXG5cdC8vIFRyaWdnZXJzIGV4dGVybmFsLWRyb3AgaGFuZGxlcnMgdGhhdCBoYXZlIHN1YnNjcmliZWQgdmlhIHRoZSBBUElcblx0dHJpZ2dlckV4dGVybmFsRHJvcDogZnVuY3Rpb24oZXZlbnQsIGRyb3BMb2NhdGlvbiwgZWwsIGV2LCB1aSkge1xuXG5cdFx0Ly8gdHJpZ2dlciAnZHJvcCcgcmVnYXJkbGVzcyBvZiB3aGV0aGVyIGVsZW1lbnQgcmVwcmVzZW50cyBhbiBldmVudFxuXHRcdHRoaXMucHVibGljbHlUcmlnZ2VyKCdkcm9wJywgZWxbMF0sIGRyb3BMb2NhdGlvbi5zdGFydCwgZXYsIHVpKTtcblxuXHRcdGlmIChldmVudCkge1xuXHRcdFx0dGhpcy5wdWJsaWNseVRyaWdnZXIoJ2V2ZW50UmVjZWl2ZScsIG51bGwsIGV2ZW50KTsgLy8gc2lnbmFsIGFuIGV4dGVybmFsIGV2ZW50IGxhbmRlZFxuXHRcdH1cblx0fSxcblxuXG5cdC8qIERyYWctbi1Ecm9wIFJlbmRlcmluZyAoZm9yIGJvdGggZXZlbnRzIGFuZCBleHRlcm5hbCBlbGVtZW50cylcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIFJlbmRlcnMgYSB2aXN1YWwgaW5kaWNhdGlvbiBvZiBhIGV2ZW50IG9yIGV4dGVybmFsLWVsZW1lbnQgZHJhZyBvdmVyIHRoZSBnaXZlbiBkcm9wIHpvbmUuXG5cdC8vIElmIGFuIGV4dGVybmFsLWVsZW1lbnQsIHNlZyB3aWxsIGJlIGBudWxsYC5cblx0Ly8gTXVzdCByZXR1cm4gZWxlbWVudHMgdXNlZCBmb3IgYW55IG1vY2sgZXZlbnRzLlxuXHRyZW5kZXJEcmFnOiBmdW5jdGlvbihkcm9wTG9jYXRpb24sIHNlZykge1xuXHRcdC8vIHN1YmNsYXNzZXMgbXVzdCBpbXBsZW1lbnRcblx0fSxcblxuXG5cdC8vIFVucmVuZGVycyBhIHZpc3VhbCBpbmRpY2F0aW9uIG9mIGFuIGV2ZW50IG9yIGV4dGVybmFsLWVsZW1lbnQgYmVpbmcgZHJhZ2dlZC5cblx0dW5yZW5kZXJEcmFnOiBmdW5jdGlvbigpIHtcblx0XHQvLyBzdWJjbGFzc2VzIG11c3QgaW1wbGVtZW50XG5cdH0sXG5cblxuXHQvKiBFdmVudCBSZXNpemluZ1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gQ29tcHV0ZXMgaWYgdGhlIGdpdmVuIGV2ZW50IGlzIGFsbG93ZWQgdG8gYmUgcmVzaXplZCBmcm9tIGl0cyBzdGFydGluZyBlZGdlXG5cdGlzRXZlbnRSZXNpemFibGVGcm9tU3RhcnQ6IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0cmV0dXJuIHRoaXMub3B0KCdldmVudFJlc2l6YWJsZUZyb21TdGFydCcpICYmIHRoaXMuaXNFdmVudFJlc2l6YWJsZShldmVudCk7XG5cdH0sXG5cblxuXHQvLyBDb21wdXRlcyBpZiB0aGUgZ2l2ZW4gZXZlbnQgaXMgYWxsb3dlZCB0byBiZSByZXNpemVkIGZyb20gaXRzIGVuZGluZyBlZGdlXG5cdGlzRXZlbnRSZXNpemFibGVGcm9tRW5kOiBmdW5jdGlvbihldmVudCkge1xuXHRcdHJldHVybiB0aGlzLmlzRXZlbnRSZXNpemFibGUoZXZlbnQpO1xuXHR9LFxuXG5cblx0Ly8gQ29tcHV0ZXMgaWYgdGhlIGdpdmVuIGV2ZW50IGlzIGFsbG93ZWQgdG8gYmUgcmVzaXplZCBieSB0aGUgdXNlciBhdCBhbGxcblx0aXNFdmVudFJlc2l6YWJsZTogZnVuY3Rpb24oZXZlbnQpIHtcblx0XHR2YXIgc291cmNlID0gZXZlbnQuc291cmNlIHx8IHt9O1xuXG5cdFx0cmV0dXJuIGZpcnN0RGVmaW5lZChcblx0XHRcdGV2ZW50LmR1cmF0aW9uRWRpdGFibGUsXG5cdFx0XHRzb3VyY2UuZHVyYXRpb25FZGl0YWJsZSxcblx0XHRcdHRoaXMub3B0KCdldmVudER1cmF0aW9uRWRpdGFibGUnKSxcblx0XHRcdGV2ZW50LmVkaXRhYmxlLFxuXHRcdFx0c291cmNlLmVkaXRhYmxlLFxuXHRcdFx0dGhpcy5vcHQoJ2VkaXRhYmxlJylcblx0XHQpO1xuXHR9LFxuXG5cblx0Ly8gTXVzdCBiZSBjYWxsZWQgd2hlbiBhbiBldmVudCBpbiB0aGUgdmlldyBoYXMgYmVlbiByZXNpemVkIHRvIGEgbmV3IGxlbmd0aFxuXHRyZXBvcnRFdmVudFJlc2l6ZTogZnVuY3Rpb24oZXZlbnQsIHJlc2l6ZUxvY2F0aW9uLCBsYXJnZVVuaXQsIGVsLCBldikge1xuXHRcdHZhciBjYWxlbmRhciA9IHRoaXMuY2FsZW5kYXI7XG5cdFx0dmFyIG11dGF0ZVJlc3VsdCA9IGNhbGVuZGFyLm11dGF0ZUV2ZW50KGV2ZW50LCByZXNpemVMb2NhdGlvbiwgbGFyZ2VVbml0KTtcblx0XHR2YXIgdW5kb0Z1bmMgPSBmdW5jdGlvbigpIHtcblx0XHRcdG11dGF0ZVJlc3VsdC51bmRvKCk7XG5cdFx0XHRjYWxlbmRhci5yZXBvcnRFdmVudENoYW5nZSgpO1xuXHRcdH07XG5cblx0XHR0aGlzLnRyaWdnZXJFdmVudFJlc2l6ZShldmVudCwgbXV0YXRlUmVzdWx0LmR1cmF0aW9uRGVsdGEsIHVuZG9GdW5jLCBlbCwgZXYpO1xuXHRcdGNhbGVuZGFyLnJlcG9ydEV2ZW50Q2hhbmdlKCk7IC8vIHdpbGwgcmVyZW5kZXIgZXZlbnRzXG5cdH0sXG5cblxuXHQvLyBUcmlnZ2VycyBldmVudC1yZXNpemUgaGFuZGxlcnMgdGhhdCBoYXZlIHN1YnNjcmliZWQgdmlhIHRoZSBBUElcblx0dHJpZ2dlckV2ZW50UmVzaXplOiBmdW5jdGlvbihldmVudCwgZHVyYXRpb25EZWx0YSwgdW5kb0Z1bmMsIGVsLCBldikge1xuXHRcdHRoaXMucHVibGljbHlUcmlnZ2VyKCdldmVudFJlc2l6ZScsIGVsWzBdLCBldmVudCwgZHVyYXRpb25EZWx0YSwgdW5kb0Z1bmMsIGV2LCB7fSk7IC8vIHt9ID0ganF1aSBkdW1teVxuXHR9LFxuXG5cblx0LyogU2VsZWN0aW9uICh0aW1lIHJhbmdlKVxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gU2VsZWN0cyBhIGRhdGUgc3BhbiBvbiB0aGUgdmlldy4gYHN0YXJ0YCBhbmQgYGVuZGAgYXJlIGJvdGggTW9tZW50cy5cblx0Ly8gYGV2YCBpcyB0aGUgbmF0aXZlIG1vdXNlIGV2ZW50IHRoYXQgYmVnaW4gdGhlIGludGVyYWN0aW9uLlxuXHRzZWxlY3Q6IGZ1bmN0aW9uKHNwYW4sIGV2KSB7XG5cdFx0dGhpcy51bnNlbGVjdChldik7XG5cdFx0dGhpcy5yZW5kZXJTZWxlY3Rpb24oc3Bhbik7XG5cdFx0dGhpcy5yZXBvcnRTZWxlY3Rpb24oc3BhbiwgZXYpO1xuXHR9LFxuXG5cblx0Ly8gUmVuZGVycyBhIHZpc3VhbCBpbmRpY2F0aW9uIG9mIHRoZSBzZWxlY3Rpb25cblx0cmVuZGVyU2VsZWN0aW9uOiBmdW5jdGlvbihzcGFuKSB7XG5cdFx0Ly8gc3ViY2xhc3NlcyBzaG91bGQgaW1wbGVtZW50XG5cdH0sXG5cblxuXHQvLyBDYWxsZWQgd2hlbiBhIG5ldyBzZWxlY3Rpb24gaXMgbWFkZS4gVXBkYXRlcyBpbnRlcm5hbCBzdGF0ZSBhbmQgdHJpZ2dlcnMgaGFuZGxlcnMuXG5cdHJlcG9ydFNlbGVjdGlvbjogZnVuY3Rpb24oc3BhbiwgZXYpIHtcblx0XHR0aGlzLmlzU2VsZWN0ZWQgPSB0cnVlO1xuXHRcdHRoaXMudHJpZ2dlclNlbGVjdChzcGFuLCBldik7XG5cdH0sXG5cblxuXHQvLyBUcmlnZ2VycyBoYW5kbGVycyB0byAnc2VsZWN0J1xuXHR0cmlnZ2VyU2VsZWN0OiBmdW5jdGlvbihzcGFuLCBldikge1xuXHRcdHRoaXMucHVibGljbHlUcmlnZ2VyKFxuXHRcdFx0J3NlbGVjdCcsXG5cdFx0XHRudWxsLFxuXHRcdFx0dGhpcy5jYWxlbmRhci5hcHBseVRpbWV6b25lKHNwYW4uc3RhcnQpLCAvLyBjb252ZXJ0IHRvIGNhbGVuZGFyJ3MgdHogZm9yIGV4dGVybmFsIEFQSVxuXHRcdFx0dGhpcy5jYWxlbmRhci5hcHBseVRpbWV6b25lKHNwYW4uZW5kKSwgLy8gXCJcblx0XHRcdGV2XG5cdFx0KTtcblx0fSxcblxuXG5cdC8vIFVuZG9lcyBhIHNlbGVjdGlvbi4gdXBkYXRlcyBpbiB0aGUgaW50ZXJuYWwgc3RhdGUgYW5kIHRyaWdnZXJzIGhhbmRsZXJzLlxuXHQvLyBgZXZgIGlzIHRoZSBuYXRpdmUgbW91c2UgZXZlbnQgdGhhdCBiZWdhbiB0aGUgaW50ZXJhY3Rpb24uXG5cdHVuc2VsZWN0OiBmdW5jdGlvbihldikge1xuXHRcdGlmICh0aGlzLmlzU2VsZWN0ZWQpIHtcblx0XHRcdHRoaXMuaXNTZWxlY3RlZCA9IGZhbHNlO1xuXHRcdFx0aWYgKHRoaXMuZGVzdHJveVNlbGVjdGlvbikge1xuXHRcdFx0XHR0aGlzLmRlc3Ryb3lTZWxlY3Rpb24oKTsgLy8gVE9ETzogZGVwcmVjYXRlXG5cdFx0XHR9XG5cdFx0XHR0aGlzLnVucmVuZGVyU2VsZWN0aW9uKCk7XG5cdFx0XHR0aGlzLnB1YmxpY2x5VHJpZ2dlcigndW5zZWxlY3QnLCBudWxsLCBldik7XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gVW5yZW5kZXJzIGEgdmlzdWFsIGluZGljYXRpb24gb2Ygc2VsZWN0aW9uXG5cdHVucmVuZGVyU2VsZWN0aW9uOiBmdW5jdGlvbigpIHtcblx0XHQvLyBzdWJjbGFzc2VzIHNob3VsZCBpbXBsZW1lbnRcblx0fSxcblxuXG5cdC8qIEV2ZW50IFNlbGVjdGlvblxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0c2VsZWN0RXZlbnQ6IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0aWYgKCF0aGlzLnNlbGVjdGVkRXZlbnQgfHwgdGhpcy5zZWxlY3RlZEV2ZW50ICE9PSBldmVudCkge1xuXHRcdFx0dGhpcy51bnNlbGVjdEV2ZW50KCk7XG5cdFx0XHR0aGlzLnJlbmRlcmVkRXZlbnRTZWdFYWNoKGZ1bmN0aW9uKHNlZykge1xuXHRcdFx0XHRzZWcuZWwuYWRkQ2xhc3MoJ2ZjLXNlbGVjdGVkJyk7XG5cdFx0XHR9LCBldmVudCk7XG5cdFx0XHR0aGlzLnNlbGVjdGVkRXZlbnQgPSBldmVudDtcblx0XHR9XG5cdH0sXG5cblxuXHR1bnNlbGVjdEV2ZW50OiBmdW5jdGlvbigpIHtcblx0XHRpZiAodGhpcy5zZWxlY3RlZEV2ZW50KSB7XG5cdFx0XHR0aGlzLnJlbmRlcmVkRXZlbnRTZWdFYWNoKGZ1bmN0aW9uKHNlZykge1xuXHRcdFx0XHRzZWcuZWwucmVtb3ZlQ2xhc3MoJ2ZjLXNlbGVjdGVkJyk7XG5cdFx0XHR9LCB0aGlzLnNlbGVjdGVkRXZlbnQpO1xuXHRcdFx0dGhpcy5zZWxlY3RlZEV2ZW50ID0gbnVsbDtcblx0XHR9XG5cdH0sXG5cblxuXHRpc0V2ZW50U2VsZWN0ZWQ6IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0Ly8gZXZlbnQgcmVmZXJlbmNlcyBtaWdodCBjaGFuZ2Ugb24gcmVmZXRjaEV2ZW50cygpLCB3aGlsZSBzZWxlY3RlZEV2ZW50IGRvZXNuJ3QsXG5cdFx0Ly8gc28gY29tcGFyZSBJRHNcblx0XHRyZXR1cm4gdGhpcy5zZWxlY3RlZEV2ZW50ICYmIHRoaXMuc2VsZWN0ZWRFdmVudC5faWQgPT09IGV2ZW50Ll9pZDtcblx0fSxcblxuXG5cdC8qIE1vdXNlIC8gVG91Y2ggVW5zZWxlY3RpbmcgKHRpbWUgcmFuZ2UgJiBldmVudCB1bnNlbGVjdGlvbilcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0Ly8gVE9ETzogbW92ZSBjb25zaXN0ZW50bHkgdG8gZG93bi9zdGFydCBvciB1cC9lbmQ/XG5cdC8vIFRPRE86IGRvbid0IGtpbGwgcHJldmlvdXMgc2VsZWN0aW9uIGlmIHRvdWNoIHNjcm9sbGluZ1xuXG5cblx0aGFuZGxlRG9jdW1lbnRNb3VzZWRvd246IGZ1bmN0aW9uKGV2KSB7XG5cdFx0aWYgKGlzUHJpbWFyeU1vdXNlQnV0dG9uKGV2KSkge1xuXHRcdFx0dGhpcy5wcm9jZXNzVW5zZWxlY3QoZXYpO1xuXHRcdH1cblx0fSxcblxuXG5cdHByb2Nlc3NVbnNlbGVjdDogZnVuY3Rpb24oZXYpIHtcblx0XHR0aGlzLnByb2Nlc3NSYW5nZVVuc2VsZWN0KGV2KTtcblx0XHR0aGlzLnByb2Nlc3NFdmVudFVuc2VsZWN0KGV2KTtcblx0fSxcblxuXG5cdHByb2Nlc3NSYW5nZVVuc2VsZWN0OiBmdW5jdGlvbihldikge1xuXHRcdHZhciBpZ25vcmU7XG5cblx0XHQvLyBpcyB0aGVyZSBhIHRpbWUtcmFuZ2Ugc2VsZWN0aW9uP1xuXHRcdGlmICh0aGlzLmlzU2VsZWN0ZWQgJiYgdGhpcy5vcHQoJ3Vuc2VsZWN0QXV0bycpKSB7XG5cdFx0XHQvLyBvbmx5IHVuc2VsZWN0IGlmIHRoZSBjbGlja2VkIGVsZW1lbnQgaXMgbm90IGlkZW50aWNhbCB0byBvciBpbnNpZGUgb2YgYW4gJ3Vuc2VsZWN0Q2FuY2VsJyBlbGVtZW50XG5cdFx0XHRpZ25vcmUgPSB0aGlzLm9wdCgndW5zZWxlY3RDYW5jZWwnKTtcblx0XHRcdGlmICghaWdub3JlIHx8ICEkKGV2LnRhcmdldCkuY2xvc2VzdChpZ25vcmUpLmxlbmd0aCkge1xuXHRcdFx0XHR0aGlzLnVuc2VsZWN0KGV2KTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblxuXHRwcm9jZXNzRXZlbnRVbnNlbGVjdDogZnVuY3Rpb24oZXYpIHtcblx0XHRpZiAodGhpcy5zZWxlY3RlZEV2ZW50KSB7XG5cdFx0XHRpZiAoISQoZXYudGFyZ2V0KS5jbG9zZXN0KCcuZmMtc2VsZWN0ZWQnKS5sZW5ndGgpIHtcblx0XHRcdFx0dGhpcy51bnNlbGVjdEV2ZW50KCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cblx0LyogRGF5IENsaWNrXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBUcmlnZ2VycyBoYW5kbGVycyB0byAnZGF5Q2xpY2snXG5cdC8vIFNwYW4gaGFzIHN0YXJ0L2VuZCBvZiB0aGUgY2xpY2tlZCBhcmVhLiBPbmx5IHRoZSBzdGFydCBpcyB1c2VmdWwuXG5cdHRyaWdnZXJEYXlDbGljazogZnVuY3Rpb24oc3BhbiwgZGF5RWwsIGV2KSB7XG5cdFx0dGhpcy5wdWJsaWNseVRyaWdnZXIoXG5cdFx0XHQnZGF5Q2xpY2snLFxuXHRcdFx0ZGF5RWwsXG5cdFx0XHR0aGlzLmNhbGVuZGFyLmFwcGx5VGltZXpvbmUoc3Bhbi5zdGFydCksIC8vIGNvbnZlcnQgdG8gY2FsZW5kYXIncyB0aW1lem9uZSBmb3IgZXh0ZXJuYWwgQVBJXG5cdFx0XHRldlxuXHRcdCk7XG5cdH0sXG5cblxuXHQvKiBEYXRlIFV0aWxzXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBJbml0aWFsaXplcyBpbnRlcm5hbCB2YXJpYWJsZXMgcmVsYXRlZCB0byBjYWxjdWxhdGluZyBoaWRkZW4gZGF5cy1vZi13ZWVrXG5cdGluaXRIaWRkZW5EYXlzOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgaGlkZGVuRGF5cyA9IHRoaXMub3B0KCdoaWRkZW5EYXlzJykgfHwgW107IC8vIGFycmF5IG9mIGRheS1vZi13ZWVrIGluZGljZXMgdGhhdCBhcmUgaGlkZGVuXG5cdFx0dmFyIGlzSGlkZGVuRGF5SGFzaCA9IFtdOyAvLyBpcyB0aGUgZGF5LW9mLXdlZWsgaGlkZGVuPyAoaGFzaCB3aXRoIGRheS1vZi13ZWVrLWluZGV4IC0+IGJvb2wpXG5cdFx0dmFyIGRheUNudCA9IDA7XG5cdFx0dmFyIGk7XG5cblx0XHRpZiAodGhpcy5vcHQoJ3dlZWtlbmRzJykgPT09IGZhbHNlKSB7XG5cdFx0XHRoaWRkZW5EYXlzLnB1c2goMCwgNik7IC8vIDA9c3VuZGF5LCA2PXNhdHVyZGF5XG5cdFx0fVxuXG5cdFx0Zm9yIChpID0gMDsgaSA8IDc7IGkrKykge1xuXHRcdFx0aWYgKFxuXHRcdFx0XHQhKGlzSGlkZGVuRGF5SGFzaFtpXSA9ICQuaW5BcnJheShpLCBoaWRkZW5EYXlzKSAhPT0gLTEpXG5cdFx0XHQpIHtcblx0XHRcdFx0ZGF5Q250Kys7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCFkYXlDbnQpIHtcblx0XHRcdHRocm93ICdpbnZhbGlkIGhpZGRlbkRheXMnOyAvLyBhbGwgZGF5cyB3ZXJlIGhpZGRlbj8gYmFkLlxuXHRcdH1cblxuXHRcdHRoaXMuaXNIaWRkZW5EYXlIYXNoID0gaXNIaWRkZW5EYXlIYXNoO1xuXHR9LFxuXG5cblx0Ly8gSXMgdGhlIGN1cnJlbnQgZGF5IGhpZGRlbj9cblx0Ly8gYGRheWAgaXMgYSBkYXktb2Ytd2VlayBpbmRleCAoMC02KSwgb3IgYSBNb21lbnRcblx0aXNIaWRkZW5EYXk6IGZ1bmN0aW9uKGRheSkge1xuXHRcdGlmIChtb21lbnQuaXNNb21lbnQoZGF5KSkge1xuXHRcdFx0ZGF5ID0gZGF5LmRheSgpO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5pc0hpZGRlbkRheUhhc2hbZGF5XTtcblx0fSxcblxuXG5cdC8vIEluY3JlbWVudGluZyB0aGUgY3VycmVudCBkYXkgdW50aWwgaXQgaXMgbm8gbG9uZ2VyIGEgaGlkZGVuIGRheSwgcmV0dXJuaW5nIGEgY29weS5cblx0Ly8gSWYgdGhlIGluaXRpYWwgdmFsdWUgb2YgYGRhdGVgIGlzIG5vdCBhIGhpZGRlbiBkYXksIGRvbid0IGRvIGFueXRoaW5nLlxuXHQvLyBQYXNzIGBpc0V4Y2x1c2l2ZWAgYXMgYHRydWVgIGlmIHlvdSBhcmUgZGVhbGluZyB3aXRoIGFuIGVuZCBkYXRlLlxuXHQvLyBgaW5jYCBkZWZhdWx0cyB0byBgMWAgKGluY3JlbWVudCBvbmUgZGF5IGZvcndhcmQgZWFjaCB0aW1lKVxuXHRza2lwSGlkZGVuRGF5czogZnVuY3Rpb24oZGF0ZSwgaW5jLCBpc0V4Y2x1c2l2ZSkge1xuXHRcdHZhciBvdXQgPSBkYXRlLmNsb25lKCk7XG5cdFx0aW5jID0gaW5jIHx8IDE7XG5cdFx0d2hpbGUgKFxuXHRcdFx0dGhpcy5pc0hpZGRlbkRheUhhc2hbKG91dC5kYXkoKSArIChpc0V4Y2x1c2l2ZSA/IGluYyA6IDApICsgNykgJSA3XVxuXHRcdCkge1xuXHRcdFx0b3V0LmFkZChpbmMsICdkYXlzJyk7XG5cdFx0fVxuXHRcdHJldHVybiBvdXQ7XG5cdH0sXG5cblxuXHQvLyBSZXR1cm5zIHRoZSBkYXRlIHJhbmdlIG9mIHRoZSBmdWxsIGRheXMgdGhlIGdpdmVuIHJhbmdlIHZpc3VhbGx5IGFwcGVhcnMgdG8gb2NjdXB5LlxuXHQvLyBSZXR1cm5zIGEgbmV3IHJhbmdlIG9iamVjdC5cblx0Y29tcHV0ZURheVJhbmdlOiBmdW5jdGlvbihyYW5nZSkge1xuXHRcdHZhciBzdGFydERheSA9IHJhbmdlLnN0YXJ0LmNsb25lKCkuc3RyaXBUaW1lKCk7IC8vIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGRheSB0aGUgcmFuZ2Ugc3RhcnRzXG5cdFx0dmFyIGVuZCA9IHJhbmdlLmVuZDtcblx0XHR2YXIgZW5kRGF5ID0gbnVsbDtcblx0XHR2YXIgZW5kVGltZU1TO1xuXG5cdFx0aWYgKGVuZCkge1xuXHRcdFx0ZW5kRGF5ID0gZW5kLmNsb25lKCkuc3RyaXBUaW1lKCk7IC8vIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGRheSB0aGUgcmFuZ2UgZXhjbHVzaXZlbHkgZW5kc1xuXHRcdFx0ZW5kVGltZU1TID0gK2VuZC50aW1lKCk7IC8vICMgb2YgbWlsbGlzZWNvbmRzIGludG8gYGVuZERheWBcblxuXHRcdFx0Ly8gSWYgdGhlIGVuZCB0aW1lIGlzIGFjdHVhbGx5IGluY2x1c2l2ZWx5IHBhcnQgb2YgdGhlIG5leHQgZGF5IGFuZCBpcyBlcXVhbCB0byBvclxuXHRcdFx0Ly8gYmV5b25kIHRoZSBuZXh0IGRheSB0aHJlc2hvbGQsIGFkanVzdCB0aGUgZW5kIHRvIGJlIHRoZSBleGNsdXNpdmUgZW5kIG9mIGBlbmREYXlgLlxuXHRcdFx0Ly8gT3RoZXJ3aXNlLCBsZWF2aW5nIGl0IGFzIGluY2x1c2l2ZSB3aWxsIGNhdXNlIGl0IHRvIGV4Y2x1ZGUgYGVuZERheWAuXG5cdFx0XHRpZiAoZW5kVGltZU1TICYmIGVuZFRpbWVNUyA+PSB0aGlzLm5leHREYXlUaHJlc2hvbGQpIHtcblx0XHRcdFx0ZW5kRGF5LmFkZCgxLCAnZGF5cycpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIElmIG5vIGVuZCB3YXMgc3BlY2lmaWVkLCBvciBpZiBpdCBpcyB3aXRoaW4gYHN0YXJ0RGF5YCBidXQgbm90IHBhc3QgbmV4dERheVRocmVzaG9sZCxcblx0XHQvLyBhc3NpZ24gdGhlIGRlZmF1bHQgZHVyYXRpb24gb2Ygb25lIGRheS5cblx0XHRpZiAoIWVuZCB8fCBlbmREYXkgPD0gc3RhcnREYXkpIHtcblx0XHRcdGVuZERheSA9IHN0YXJ0RGF5LmNsb25lKCkuYWRkKDEsICdkYXlzJyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHsgc3RhcnQ6IHN0YXJ0RGF5LCBlbmQ6IGVuZERheSB9O1xuXHR9LFxuXG5cblx0Ly8gRG9lcyB0aGUgZ2l2ZW4gZXZlbnQgdmlzdWFsbHkgYXBwZWFyIHRvIG9jY3VweSBtb3JlIHRoYW4gb25lIGRheT9cblx0aXNNdWx0aURheUV2ZW50OiBmdW5jdGlvbihldmVudCkge1xuXHRcdHZhciByYW5nZSA9IHRoaXMuY29tcHV0ZURheVJhbmdlKGV2ZW50KTsgLy8gZXZlbnQgaXMgcmFuZ2UtaXNoXG5cblx0XHRyZXR1cm4gcmFuZ2UuZW5kLmRpZmYocmFuZ2Uuc3RhcnQsICdkYXlzJykgPiAxO1xuXHR9XG5cbn0pO1xuXG47O1xuXG4vKlxuRW1ib2RpZXMgYSBkaXYgdGhhdCBoYXMgcG90ZW50aWFsIHNjcm9sbGJhcnNcbiovXG52YXIgU2Nyb2xsZXIgPSBGQy5TY3JvbGxlciA9IENsYXNzLmV4dGVuZCh7XG5cblx0ZWw6IG51bGwsIC8vIHRoZSBndWFyYW50ZWVkIG91dGVyIGVsZW1lbnRcblx0c2Nyb2xsRWw6IG51bGwsIC8vIHRoZSBlbGVtZW50IHdpdGggdGhlIHNjcm9sbGJhcnNcblx0b3ZlcmZsb3dYOiBudWxsLFxuXHRvdmVyZmxvd1k6IG51bGwsXG5cblxuXHRjb25zdHJ1Y3RvcjogZnVuY3Rpb24ob3B0aW9ucykge1xuXHRcdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHRcdHRoaXMub3ZlcmZsb3dYID0gb3B0aW9ucy5vdmVyZmxvd1ggfHwgb3B0aW9ucy5vdmVyZmxvdyB8fCAnYXV0byc7XG5cdFx0dGhpcy5vdmVyZmxvd1kgPSBvcHRpb25zLm92ZXJmbG93WSB8fCBvcHRpb25zLm92ZXJmbG93IHx8ICdhdXRvJztcblx0fSxcblxuXG5cdHJlbmRlcjogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5lbCA9IHRoaXMucmVuZGVyRWwoKTtcblx0XHR0aGlzLmFwcGx5T3ZlcmZsb3coKTtcblx0fSxcblxuXG5cdHJlbmRlckVsOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gKHRoaXMuc2Nyb2xsRWwgPSAkKCc8ZGl2IGNsYXNzPVwiZmMtc2Nyb2xsZXJcIj48L2Rpdj4nKSk7XG5cdH0sXG5cblxuXHQvLyBzZXRzIHRvIG5hdHVyYWwgaGVpZ2h0LCB1bmxvY2tzIG92ZXJmbG93XG5cdGNsZWFyOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnNldEhlaWdodCgnYXV0bycpO1xuXHRcdHRoaXMuYXBwbHlPdmVyZmxvdygpO1xuXHR9LFxuXG5cblx0ZGVzdHJveTogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5lbC5yZW1vdmUoKTtcblx0fSxcblxuXG5cdC8vIE92ZXJmbG93XG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuXHRhcHBseU92ZXJmbG93OiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnNjcm9sbEVsLmNzcyh7XG5cdFx0XHQnb3ZlcmZsb3cteCc6IHRoaXMub3ZlcmZsb3dYLFxuXHRcdFx0J292ZXJmbG93LXknOiB0aGlzLm92ZXJmbG93WVxuXHRcdH0pO1xuXHR9LFxuXG5cblx0Ly8gQ2F1c2VzIGFueSAnYXV0bycgb3ZlcmZsb3cgdmFsdWVzIHRvIHJlc29sdmVzIHRvICdzY3JvbGwnIG9yICdoaWRkZW4nLlxuXHQvLyBVc2VmdWwgZm9yIHByZXNlcnZpbmcgc2Nyb2xsYmFyIHdpZHRocyByZWdhcmRsZXNzIG9mIGZ1dHVyZSByZXNpemVzLlxuXHQvLyBDYW4gcGFzcyBpbiBzY3JvbGxiYXJXaWR0aHMgZm9yIG9wdGltaXphdGlvbi5cblx0bG9ja092ZXJmbG93OiBmdW5jdGlvbihzY3JvbGxiYXJXaWR0aHMpIHtcblx0XHR2YXIgb3ZlcmZsb3dYID0gdGhpcy5vdmVyZmxvd1g7XG5cdFx0dmFyIG92ZXJmbG93WSA9IHRoaXMub3ZlcmZsb3dZO1xuXG5cdFx0c2Nyb2xsYmFyV2lkdGhzID0gc2Nyb2xsYmFyV2lkdGhzIHx8IHRoaXMuZ2V0U2Nyb2xsYmFyV2lkdGhzKCk7XG5cblx0XHRpZiAob3ZlcmZsb3dYID09PSAnYXV0bycpIHtcblx0XHRcdG92ZXJmbG93WCA9IChcblx0XHRcdFx0XHRzY3JvbGxiYXJXaWR0aHMudG9wIHx8IHNjcm9sbGJhcldpZHRocy5ib3R0b20gfHwgLy8gaG9yaXpvbnRhbCBzY3JvbGxiYXJzP1xuXHRcdFx0XHRcdC8vIE9SIHNjcm9sbGluZyBwYW5lIHdpdGggbWFzc2xlc3Mgc2Nyb2xsYmFycz9cblx0XHRcdFx0XHR0aGlzLnNjcm9sbEVsWzBdLnNjcm9sbFdpZHRoIC0gMSA+IHRoaXMuc2Nyb2xsRWxbMF0uY2xpZW50V2lkdGhcblx0XHRcdFx0XHRcdC8vIHN1YnRyYWN0IDEgYmVjYXVzZSBvZiBJRSBvZmYtYnktb25lIGlzc3VlXG5cdFx0XHRcdCkgPyAnc2Nyb2xsJyA6ICdoaWRkZW4nO1xuXHRcdH1cblxuXHRcdGlmIChvdmVyZmxvd1kgPT09ICdhdXRvJykge1xuXHRcdFx0b3ZlcmZsb3dZID0gKFxuXHRcdFx0XHRcdHNjcm9sbGJhcldpZHRocy5sZWZ0IHx8IHNjcm9sbGJhcldpZHRocy5yaWdodCB8fCAvLyB2ZXJ0aWNhbCBzY3JvbGxiYXJzP1xuXHRcdFx0XHRcdC8vIE9SIHNjcm9sbGluZyBwYW5lIHdpdGggbWFzc2xlc3Mgc2Nyb2xsYmFycz9cblx0XHRcdFx0XHR0aGlzLnNjcm9sbEVsWzBdLnNjcm9sbEhlaWdodCAtIDEgPiB0aGlzLnNjcm9sbEVsWzBdLmNsaWVudEhlaWdodFxuXHRcdFx0XHRcdFx0Ly8gc3VidHJhY3QgMSBiZWNhdXNlIG9mIElFIG9mZi1ieS1vbmUgaXNzdWVcblx0XHRcdFx0KSA/ICdzY3JvbGwnIDogJ2hpZGRlbic7XG5cdFx0fVxuXG5cdFx0dGhpcy5zY3JvbGxFbC5jc3MoeyAnb3ZlcmZsb3cteCc6IG92ZXJmbG93WCwgJ292ZXJmbG93LXknOiBvdmVyZmxvd1kgfSk7XG5cdH0sXG5cblxuXHQvLyBHZXR0ZXJzIC8gU2V0dGVyc1xuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cblx0c2V0SGVpZ2h0OiBmdW5jdGlvbihoZWlnaHQpIHtcblx0XHR0aGlzLnNjcm9sbEVsLmhlaWdodChoZWlnaHQpO1xuXHR9LFxuXG5cblx0Z2V0U2Nyb2xsVG9wOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5zY3JvbGxFbC5zY3JvbGxUb3AoKTtcblx0fSxcblxuXG5cdHNldFNjcm9sbFRvcDogZnVuY3Rpb24odG9wKSB7XG5cdFx0dGhpcy5zY3JvbGxFbC5zY3JvbGxUb3AodG9wKTtcblx0fSxcblxuXG5cdGdldENsaWVudFdpZHRoOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5zY3JvbGxFbFswXS5jbGllbnRXaWR0aDtcblx0fSxcblxuXG5cdGdldENsaWVudEhlaWdodDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuc2Nyb2xsRWxbMF0uY2xpZW50SGVpZ2h0O1xuXHR9LFxuXG5cblx0Z2V0U2Nyb2xsYmFyV2lkdGhzOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gZ2V0U2Nyb2xsYmFyV2lkdGhzKHRoaXMuc2Nyb2xsRWwpO1xuXHR9XG5cbn0pO1xuXG47O1xuZnVuY3Rpb24gSXRlcmF0b3IoaXRlbXMpIHtcbiAgICB0aGlzLml0ZW1zID0gaXRlbXMgfHwgW107XG59XG5cblxuLyogQ2FsbHMgYSBtZXRob2Qgb24gZXZlcnkgaXRlbSBwYXNzaW5nIHRoZSBhcmd1bWVudHMgdGhyb3VnaCAqL1xuSXRlcmF0b3IucHJvdG90eXBlLnByb3h5Q2FsbCA9IGZ1bmN0aW9uKG1ldGhvZE5hbWUpIHtcbiAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgdmFyIHJlc3VsdHMgPSBbXTtcblxuICAgIHRoaXMuaXRlbXMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgIHJlc3VsdHMucHVzaChpdGVtW21ldGhvZE5hbWVdLmFwcGx5KGl0ZW0sIGFyZ3MpKTtcbiAgICB9KTtcblxuICAgIHJldHVybiByZXN1bHRzO1xufTtcblxuOztcblxuLyogVG9vbGJhciB3aXRoIGJ1dHRvbnMgYW5kIHRpdGxlXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuZnVuY3Rpb24gVG9vbGJhcihjYWxlbmRhciwgdG9vbGJhck9wdGlvbnMpIHtcblx0dmFyIHQgPSB0aGlzO1xuXG5cdC8vIGV4cG9ydHNcblx0dC5zZXRUb29sYmFyT3B0aW9ucyA9IHNldFRvb2xiYXJPcHRpb25zO1xuXHR0LnJlbmRlciA9IHJlbmRlcjtcblx0dC5yZW1vdmVFbGVtZW50ID0gcmVtb3ZlRWxlbWVudDtcblx0dC51cGRhdGVUaXRsZSA9IHVwZGF0ZVRpdGxlO1xuXHR0LmFjdGl2YXRlQnV0dG9uID0gYWN0aXZhdGVCdXR0b247XG5cdHQuZGVhY3RpdmF0ZUJ1dHRvbiA9IGRlYWN0aXZhdGVCdXR0b247XG5cdHQuZGlzYWJsZUJ1dHRvbiA9IGRpc2FibGVCdXR0b247XG5cdHQuZW5hYmxlQnV0dG9uID0gZW5hYmxlQnV0dG9uO1xuXHR0LmdldFZpZXdzV2l0aEJ1dHRvbnMgPSBnZXRWaWV3c1dpdGhCdXR0b25zO1xuXHR0LmVsID0gbnVsbDsgLy8gbWlycm9ycyBsb2NhbCBgZWxgXG5cblx0Ly8gbG9jYWxzXG5cdHZhciBlbDtcblx0dmFyIHZpZXdzV2l0aEJ1dHRvbnMgPSBbXTtcblx0dmFyIHRtO1xuXG5cdC8vIG1ldGhvZCB0byB1cGRhdGUgdG9vbGJhci1zcGVjaWZpYyBvcHRpb25zLCBub3QgY2FsZW5kYXItd2lkZSBvcHRpb25zXG5cdGZ1bmN0aW9uIHNldFRvb2xiYXJPcHRpb25zKG5ld1Rvb2xiYXJPcHRpb25zKSB7XG5cdFx0dG9vbGJhck9wdGlvbnMgPSBuZXdUb29sYmFyT3B0aW9ucztcblx0fVxuXG5cdC8vIGNhbiBiZSBjYWxsZWQgcmVwZWF0ZWRseSBhbmQgd2lsbCByZXJlbmRlclxuXHRmdW5jdGlvbiByZW5kZXIoKSB7XG5cdFx0dmFyIHNlY3Rpb25zID0gdG9vbGJhck9wdGlvbnMubGF5b3V0O1xuXG5cdFx0dG0gPSBjYWxlbmRhci5vcHRpb25zLnRoZW1lID8gJ3VpJyA6ICdmYyc7XG5cblx0XHRpZiAoc2VjdGlvbnMpIHtcblx0XHRcdGlmICghZWwpIHtcblx0XHRcdFx0ZWwgPSB0aGlzLmVsID0gJChcIjxkaXYgY2xhc3M9J2ZjLXRvb2xiYXIgXCIrIHRvb2xiYXJPcHRpb25zLmV4dHJhQ2xhc3NlcyArIFwiJy8+XCIpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGVsLmVtcHR5KCk7XG5cdFx0XHR9XG5cdFx0XHRlbC5hcHBlbmQocmVuZGVyU2VjdGlvbignbGVmdCcpKVxuXHRcdFx0XHQuYXBwZW5kKHJlbmRlclNlY3Rpb24oJ3JpZ2h0JykpXG5cdFx0XHRcdC5hcHBlbmQocmVuZGVyU2VjdGlvbignY2VudGVyJykpXG5cdFx0XHRcdC5hcHBlbmQoJzxkaXYgY2xhc3M9XCJmYy1jbGVhclwiLz4nKTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRyZW1vdmVFbGVtZW50KCk7XG5cdFx0fVxuXHR9XG5cblxuXHRmdW5jdGlvbiByZW1vdmVFbGVtZW50KCkge1xuXHRcdGlmIChlbCkge1xuXHRcdFx0ZWwucmVtb3ZlKCk7XG5cdFx0XHRlbCA9IHQuZWwgPSBudWxsO1xuXHRcdH1cblx0fVxuXG5cblx0ZnVuY3Rpb24gcmVuZGVyU2VjdGlvbihwb3NpdGlvbikge1xuXHRcdHZhciBzZWN0aW9uRWwgPSAkKCc8ZGl2IGNsYXNzPVwiZmMtJyArIHBvc2l0aW9uICsgJ1wiLz4nKTtcblx0XHR2YXIgYnV0dG9uU3RyID0gdG9vbGJhck9wdGlvbnMubGF5b3V0W3Bvc2l0aW9uXTtcblxuXHRcdGlmIChidXR0b25TdHIpIHtcblx0XHRcdCQuZWFjaChidXR0b25TdHIuc3BsaXQoJyAnKSwgZnVuY3Rpb24oaSkge1xuXHRcdFx0XHR2YXIgZ3JvdXBDaGlsZHJlbiA9ICQoKTtcblx0XHRcdFx0dmFyIGlzT25seUJ1dHRvbnMgPSB0cnVlO1xuXHRcdFx0XHR2YXIgZ3JvdXBFbDtcblxuXHRcdFx0XHQkLmVhY2godGhpcy5zcGxpdCgnLCcpLCBmdW5jdGlvbihqLCBidXR0b25OYW1lKSB7XG5cdFx0XHRcdFx0dmFyIGN1c3RvbUJ1dHRvblByb3BzO1xuXHRcdFx0XHRcdHZhciB2aWV3U3BlYztcblx0XHRcdFx0XHR2YXIgYnV0dG9uQ2xpY2s7XG5cdFx0XHRcdFx0dmFyIG92ZXJyaWRlVGV4dDsgLy8gdGV4dCBleHBsaWNpdGx5IHNldCBieSBjYWxlbmRhcidzIGNvbnN0cnVjdG9yIG9wdGlvbnMuIG92ZXJjb21lcyBpY29uc1xuXHRcdFx0XHRcdHZhciBkZWZhdWx0VGV4dDtcblx0XHRcdFx0XHR2YXIgdGhlbWVJY29uO1xuXHRcdFx0XHRcdHZhciBub3JtYWxJY29uO1xuXHRcdFx0XHRcdHZhciBpbm5lckh0bWw7XG5cdFx0XHRcdFx0dmFyIGNsYXNzZXM7XG5cdFx0XHRcdFx0dmFyIGJ1dHRvbjsgLy8gdGhlIGVsZW1lbnRcblxuXHRcdFx0XHRcdGlmIChidXR0b25OYW1lID09ICd0aXRsZScpIHtcblx0XHRcdFx0XHRcdGdyb3VwQ2hpbGRyZW4gPSBncm91cENoaWxkcmVuLmFkZCgkKCc8aDI+Jm5ic3A7PC9oMj4nKSk7IC8vIHdlIGFsd2F5cyB3YW50IGl0IHRvIHRha2UgdXAgaGVpZ2h0XG5cdFx0XHRcdFx0XHRpc09ubHlCdXR0b25zID0gZmFsc2U7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0aWYgKChjdXN0b21CdXR0b25Qcm9wcyA9IChjYWxlbmRhci5vcHRpb25zLmN1c3RvbUJ1dHRvbnMgfHwge30pW2J1dHRvbk5hbWVdKSkge1xuXHRcdFx0XHRcdFx0XHRidXR0b25DbGljayA9IGZ1bmN0aW9uKGV2KSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGN1c3RvbUJ1dHRvblByb3BzLmNsaWNrKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjdXN0b21CdXR0b25Qcm9wcy5jbGljay5jYWxsKGJ1dHRvblswXSwgZXYpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0b3ZlcnJpZGVUZXh0ID0gJyc7IC8vIGljb25zIHdpbGwgb3ZlcnJpZGUgdGV4dFxuXHRcdFx0XHRcdFx0XHRkZWZhdWx0VGV4dCA9IGN1c3RvbUJ1dHRvblByb3BzLnRleHQ7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbHNlIGlmICgodmlld1NwZWMgPSBjYWxlbmRhci5nZXRWaWV3U3BlYyhidXR0b25OYW1lKSkpIHtcblx0XHRcdFx0XHRcdFx0YnV0dG9uQ2xpY2sgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHRjYWxlbmRhci5jaGFuZ2VWaWV3KGJ1dHRvbk5hbWUpO1xuXHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHR2aWV3c1dpdGhCdXR0b25zLnB1c2goYnV0dG9uTmFtZSk7XG5cdFx0XHRcdFx0XHRcdG92ZXJyaWRlVGV4dCA9IHZpZXdTcGVjLmJ1dHRvblRleHRPdmVycmlkZTtcblx0XHRcdFx0XHRcdFx0ZGVmYXVsdFRleHQgPSB2aWV3U3BlYy5idXR0b25UZXh0RGVmYXVsdDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2UgaWYgKGNhbGVuZGFyW2J1dHRvbk5hbWVdKSB7IC8vIGEgY2FsZW5kYXIgbWV0aG9kXG5cdFx0XHRcdFx0XHRcdGJ1dHRvbkNsaWNrID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y2FsZW5kYXJbYnV0dG9uTmFtZV0oKTtcblx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0b3ZlcnJpZGVUZXh0ID0gKGNhbGVuZGFyLm92ZXJyaWRlcy5idXR0b25UZXh0IHx8IHt9KVtidXR0b25OYW1lXTtcblx0XHRcdFx0XHRcdFx0ZGVmYXVsdFRleHQgPSBjYWxlbmRhci5vcHRpb25zLmJ1dHRvblRleHRbYnV0dG9uTmFtZV07IC8vIGV2ZXJ5dGhpbmcgZWxzZSBpcyBjb25zaWRlcmVkIGRlZmF1bHRcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aWYgKGJ1dHRvbkNsaWNrKSB7XG5cblx0XHRcdFx0XHRcdFx0dGhlbWVJY29uID1cblx0XHRcdFx0XHRcdFx0XHRjdXN0b21CdXR0b25Qcm9wcyA/XG5cdFx0XHRcdFx0XHRcdFx0XHRjdXN0b21CdXR0b25Qcm9wcy50aGVtZUljb24gOlxuXHRcdFx0XHRcdFx0XHRcdFx0Y2FsZW5kYXIub3B0aW9ucy50aGVtZUJ1dHRvbkljb25zW2J1dHRvbk5hbWVdO1xuXG5cdFx0XHRcdFx0XHRcdG5vcm1hbEljb24gPVxuXHRcdFx0XHRcdFx0XHRcdGN1c3RvbUJ1dHRvblByb3BzID9cblx0XHRcdFx0XHRcdFx0XHRcdGN1c3RvbUJ1dHRvblByb3BzLmljb24gOlxuXHRcdFx0XHRcdFx0XHRcdFx0Y2FsZW5kYXIub3B0aW9ucy5idXR0b25JY29uc1tidXR0b25OYW1lXTtcblxuXHRcdFx0XHRcdFx0XHRpZiAob3ZlcnJpZGVUZXh0KSB7XG5cdFx0XHRcdFx0XHRcdFx0aW5uZXJIdG1sID0gaHRtbEVzY2FwZShvdmVycmlkZVRleHQpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGVsc2UgaWYgKHRoZW1lSWNvbiAmJiBjYWxlbmRhci5vcHRpb25zLnRoZW1lKSB7XG5cdFx0XHRcdFx0XHRcdFx0aW5uZXJIdG1sID0gXCI8c3BhbiBjbGFzcz0ndWktaWNvbiB1aS1pY29uLVwiICsgdGhlbWVJY29uICsgXCInPjwvc3Bhbj5cIjtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRlbHNlIGlmIChub3JtYWxJY29uICYmICFjYWxlbmRhci5vcHRpb25zLnRoZW1lKSB7XG5cdFx0XHRcdFx0XHRcdFx0aW5uZXJIdG1sID0gXCI8c3BhbiBjbGFzcz0nZmMtaWNvbiBmYy1pY29uLVwiICsgbm9ybWFsSWNvbiArIFwiJz48L3NwYW4+XCI7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0aW5uZXJIdG1sID0gaHRtbEVzY2FwZShkZWZhdWx0VGV4dCk7XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRjbGFzc2VzID0gW1xuXHRcdFx0XHRcdFx0XHRcdCdmYy0nICsgYnV0dG9uTmFtZSArICctYnV0dG9uJyxcblx0XHRcdFx0XHRcdFx0XHR0bSArICctYnV0dG9uJyxcblx0XHRcdFx0XHRcdFx0XHR0bSArICctc3RhdGUtZGVmYXVsdCdcblx0XHRcdFx0XHRcdFx0XTtcblxuXHRcdFx0XHRcdFx0XHRidXR0b24gPSAkKCAvLyB0eXBlPVwiYnV0dG9uXCIgc28gdGhhdCBpdCBkb2Vzbid0IHN1Ym1pdCBhIGZvcm1cblx0XHRcdFx0XHRcdFx0XHQnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCInICsgY2xhc3Nlcy5qb2luKCcgJykgKyAnXCI+JyArXG5cdFx0XHRcdFx0XHRcdFx0XHRpbm5lckh0bWwgK1xuXHRcdFx0XHRcdFx0XHRcdCc8L2J1dHRvbj4nXG5cdFx0XHRcdFx0XHRcdFx0KVxuXHRcdFx0XHRcdFx0XHRcdC5jbGljayhmdW5jdGlvbihldikge1xuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gZG9uJ3QgcHJvY2VzcyBjbGlja3MgZm9yIGRpc2FibGVkIGJ1dHRvbnNcblx0XHRcdFx0XHRcdFx0XHRcdGlmICghYnV0dG9uLmhhc0NsYXNzKHRtICsgJy1zdGF0ZS1kaXNhYmxlZCcpKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0YnV0dG9uQ2xpY2soZXYpO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGFmdGVyIHRoZSBjbGljayBhY3Rpb24sIGlmIHRoZSBidXR0b24gYmVjb21lcyB0aGUgXCJhY3RpdmVcIiB0YWIsIG9yIGRpc2FibGVkLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBpdCBzaG91bGQgbmV2ZXIgaGF2ZSBhIGhvdmVyIGNsYXNzLCBzbyByZW1vdmUgaXQgbm93LlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YnV0dG9uLmhhc0NsYXNzKHRtICsgJy1zdGF0ZS1hY3RpdmUnKSB8fFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJ1dHRvbi5oYXNDbGFzcyh0bSArICctc3RhdGUtZGlzYWJsZWQnKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRidXR0b24ucmVtb3ZlQ2xhc3ModG0gKyAnLXN0YXRlLWhvdmVyJyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0XHRcdC5tb3VzZWRvd24oZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyB0aGUgKmRvd24qIGVmZmVjdCAobW91c2UgcHJlc3NlZCBpbikuXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBvbmx5IG9uIGJ1dHRvbnMgdGhhdCBhcmUgbm90IHRoZSBcImFjdGl2ZVwiIHRhYiwgb3IgZGlzYWJsZWRcblx0XHRcdFx0XHRcdFx0XHRcdGJ1dHRvblxuXHRcdFx0XHRcdFx0XHRcdFx0XHQubm90KCcuJyArIHRtICsgJy1zdGF0ZS1hY3RpdmUnKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQubm90KCcuJyArIHRtICsgJy1zdGF0ZS1kaXNhYmxlZCcpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC5hZGRDbGFzcyh0bSArICctc3RhdGUtZG93bicpO1xuXHRcdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHRcdFx0Lm1vdXNldXAoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyB1bmRvIHRoZSAqZG93biogZWZmZWN0XG5cdFx0XHRcdFx0XHRcdFx0XHRidXR0b24ucmVtb3ZlQ2xhc3ModG0gKyAnLXN0YXRlLWRvd24nKTtcblx0XHRcdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0XHRcdC5ob3Zlcihcblx0XHRcdFx0XHRcdFx0XHRcdGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyB0aGUgKmhvdmVyKiBlZmZlY3QuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIG9ubHkgb24gYnV0dG9ucyB0aGF0IGFyZSBub3QgdGhlIFwiYWN0aXZlXCIgdGFiLCBvciBkaXNhYmxlZFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRidXR0b25cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQubm90KCcuJyArIHRtICsgJy1zdGF0ZS1hY3RpdmUnKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC5ub3QoJy4nICsgdG0gKyAnLXN0YXRlLWRpc2FibGVkJylcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQuYWRkQ2xhc3ModG0gKyAnLXN0YXRlLWhvdmVyJyk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0ZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIHVuZG8gdGhlICpob3ZlciogZWZmZWN0XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGJ1dHRvblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC5yZW1vdmVDbGFzcyh0bSArICctc3RhdGUtaG92ZXInKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC5yZW1vdmVDbGFzcyh0bSArICctc3RhdGUtZG93bicpOyAvLyBpZiBtb3VzZWxlYXZlIGhhcHBlbnMgYmVmb3JlIG1vdXNldXBcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHQpO1xuXG5cdFx0XHRcdFx0XHRcdGdyb3VwQ2hpbGRyZW4gPSBncm91cENoaWxkcmVuLmFkZChidXR0b24pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0aWYgKGlzT25seUJ1dHRvbnMpIHtcblx0XHRcdFx0XHRncm91cENoaWxkcmVuXG5cdFx0XHRcdFx0XHQuZmlyc3QoKS5hZGRDbGFzcyh0bSArICctY29ybmVyLWxlZnQnKS5lbmQoKVxuXHRcdFx0XHRcdFx0Lmxhc3QoKS5hZGRDbGFzcyh0bSArICctY29ybmVyLXJpZ2h0JykuZW5kKCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoZ3JvdXBDaGlsZHJlbi5sZW5ndGggPiAxKSB7XG5cdFx0XHRcdFx0Z3JvdXBFbCA9ICQoJzxkaXYvPicpO1xuXHRcdFx0XHRcdGlmIChpc09ubHlCdXR0b25zKSB7XG5cdFx0XHRcdFx0XHRncm91cEVsLmFkZENsYXNzKCdmYy1idXR0b24tZ3JvdXAnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Z3JvdXBFbC5hcHBlbmQoZ3JvdXBDaGlsZHJlbik7XG5cdFx0XHRcdFx0c2VjdGlvbkVsLmFwcGVuZChncm91cEVsKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRzZWN0aW9uRWwuYXBwZW5kKGdyb3VwQ2hpbGRyZW4pOyAvLyAxIG9yIDAgY2hpbGRyZW5cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHNlY3Rpb25FbDtcblx0fVxuXG5cblx0ZnVuY3Rpb24gdXBkYXRlVGl0bGUodGV4dCkge1xuXHRcdGlmIChlbCkge1xuXHRcdFx0ZWwuZmluZCgnaDInKS50ZXh0KHRleHQpO1xuXHRcdH1cblx0fVxuXG5cblx0ZnVuY3Rpb24gYWN0aXZhdGVCdXR0b24oYnV0dG9uTmFtZSkge1xuXHRcdGlmIChlbCkge1xuXHRcdFx0ZWwuZmluZCgnLmZjLScgKyBidXR0b25OYW1lICsgJy1idXR0b24nKVxuXHRcdFx0XHQuYWRkQ2xhc3ModG0gKyAnLXN0YXRlLWFjdGl2ZScpO1xuXHRcdH1cblx0fVxuXG5cblx0ZnVuY3Rpb24gZGVhY3RpdmF0ZUJ1dHRvbihidXR0b25OYW1lKSB7XG5cdFx0aWYgKGVsKSB7XG5cdFx0XHRlbC5maW5kKCcuZmMtJyArIGJ1dHRvbk5hbWUgKyAnLWJ1dHRvbicpXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyh0bSArICctc3RhdGUtYWN0aXZlJyk7XG5cdFx0fVxuXHR9XG5cblxuXHRmdW5jdGlvbiBkaXNhYmxlQnV0dG9uKGJ1dHRvbk5hbWUpIHtcblx0XHRpZiAoZWwpIHtcblx0XHRcdGVsLmZpbmQoJy5mYy0nICsgYnV0dG9uTmFtZSArICctYnV0dG9uJylcblx0XHRcdFx0LnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSlcblx0XHRcdFx0LmFkZENsYXNzKHRtICsgJy1zdGF0ZS1kaXNhYmxlZCcpO1xuXHRcdH1cblx0fVxuXG5cblx0ZnVuY3Rpb24gZW5hYmxlQnV0dG9uKGJ1dHRvbk5hbWUpIHtcblx0XHRpZiAoZWwpIHtcblx0XHRcdGVsLmZpbmQoJy5mYy0nICsgYnV0dG9uTmFtZSArICctYnV0dG9uJylcblx0XHRcdFx0LnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyh0bSArICctc3RhdGUtZGlzYWJsZWQnKTtcblx0XHR9XG5cdH1cblxuXG5cdGZ1bmN0aW9uIGdldFZpZXdzV2l0aEJ1dHRvbnMoKSB7XG5cdFx0cmV0dXJuIHZpZXdzV2l0aEJ1dHRvbnM7XG5cdH1cblxufVxuXG47O1xuXG52YXIgQ2FsZW5kYXIgPSBGQy5DYWxlbmRhciA9IENsYXNzLmV4dGVuZCh7XG5cblx0ZGlyRGVmYXVsdHM6IG51bGwsIC8vIG9wdGlvbiBkZWZhdWx0cyByZWxhdGVkIHRvIExUUiBvciBSVExcblx0bG9jYWxlRGVmYXVsdHM6IG51bGwsIC8vIG9wdGlvbiBkZWZhdWx0cyByZWxhdGVkIHRvIGN1cnJlbnQgbG9jYWxlXG5cdG92ZXJyaWRlczogbnVsbCwgLy8gb3B0aW9uIG92ZXJyaWRlcyBnaXZlbiB0byB0aGUgZnVsbENhbGVuZGFyIGNvbnN0cnVjdG9yXG5cdGR5bmFtaWNPdmVycmlkZXM6IG51bGwsIC8vIG9wdGlvbnMgc2V0IHdpdGggZHluYW1pYyBzZXR0ZXIgbWV0aG9kLiBoaWdoZXIgcHJlY2VkZW5jZSB0aGFuIHZpZXcgb3ZlcnJpZGVzLlxuXHRvcHRpb25zOiBudWxsLCAvLyBhbGwgZGVmYXVsdHMgY29tYmluZWQgd2l0aCBvdmVycmlkZXNcblx0dmlld1NwZWNDYWNoZTogbnVsbCwgLy8gY2FjaGUgb2YgdmlldyBkZWZpbml0aW9uc1xuXHR2aWV3OiBudWxsLCAvLyBjdXJyZW50IFZpZXcgb2JqZWN0XG5cdGhlYWRlcjogbnVsbCxcblx0Zm9vdGVyOiBudWxsLFxuXHRsb2FkaW5nTGV2ZWw6IDAsIC8vIG51bWJlciBvZiBzaW11bHRhbmVvdXMgbG9hZGluZyB0YXNrc1xuXG5cblx0Ly8gYSBsb3Qgb2YgdGhpcyBjbGFzcycgT09QIGxvZ2ljIGlzIHNjb3BlZCB3aXRoaW4gdGhpcyBjb25zdHJ1Y3RvciBmdW5jdGlvbixcblx0Ly8gYnV0IGluIHRoZSBmdXR1cmUsIHdyaXRlIGluZGl2aWR1YWwgbWV0aG9kcyBvbiB0aGUgcHJvdG90eXBlLlxuXHRjb25zdHJ1Y3RvcjogQ2FsZW5kYXJfY29uc3RydWN0b3IsXG5cblxuXHQvLyBTdWJjbGFzc2VzIGNhbiBvdmVycmlkZSB0aGlzIGZvciBpbml0aWFsaXphdGlvbiBsb2dpYyBhZnRlciB0aGUgY29uc3RydWN0b3IgaGFzIGJlZW4gY2FsbGVkXG5cdGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xuXHR9LFxuXG5cblx0Ly8gQ29tcHV0ZXMgdGhlIGZsYXR0ZW5lZCBvcHRpb25zIGhhc2ggZm9yIHRoZSBjYWxlbmRhciBhbmQgYXNzaWducyB0byBgdGhpcy5vcHRpb25zYC5cblx0Ly8gQXNzdW1lcyB0aGlzLm92ZXJyaWRlcyBhbmQgdGhpcy5keW5hbWljT3ZlcnJpZGVzIGhhdmUgYWxyZWFkeSBiZWVuIGluaXRpYWxpemVkLlxuXHRwb3B1bGF0ZU9wdGlvbnNIYXNoOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgbG9jYWxlLCBsb2NhbGVEZWZhdWx0cztcblx0XHR2YXIgaXNSVEwsIGRpckRlZmF1bHRzO1xuXG5cdFx0bG9jYWxlID0gZmlyc3REZWZpbmVkKCAvLyBleHBsaWNpdCBsb2NhbGUgb3B0aW9uIGdpdmVuP1xuXHRcdFx0dGhpcy5keW5hbWljT3ZlcnJpZGVzLmxvY2FsZSxcblx0XHRcdHRoaXMub3ZlcnJpZGVzLmxvY2FsZVxuXHRcdCk7XG5cdFx0bG9jYWxlRGVmYXVsdHMgPSBsb2NhbGVPcHRpb25IYXNoW2xvY2FsZV07XG5cdFx0aWYgKCFsb2NhbGVEZWZhdWx0cykgeyAvLyBleHBsaWNpdCBsb2NhbGUgb3B0aW9uIG5vdCBnaXZlbiBvciBpbnZhbGlkP1xuXHRcdFx0bG9jYWxlID0gQ2FsZW5kYXIuZGVmYXVsdHMubG9jYWxlO1xuXHRcdFx0bG9jYWxlRGVmYXVsdHMgPSBsb2NhbGVPcHRpb25IYXNoW2xvY2FsZV0gfHwge307XG5cdFx0fVxuXG5cdFx0aXNSVEwgPSBmaXJzdERlZmluZWQoIC8vIGJhc2VkIG9uIG9wdGlvbnMgY29tcHV0ZWQgc28gZmFyLCBpcyBkaXJlY3Rpb24gUlRMP1xuXHRcdFx0dGhpcy5keW5hbWljT3ZlcnJpZGVzLmlzUlRMLFxuXHRcdFx0dGhpcy5vdmVycmlkZXMuaXNSVEwsXG5cdFx0XHRsb2NhbGVEZWZhdWx0cy5pc1JUTCxcblx0XHRcdENhbGVuZGFyLmRlZmF1bHRzLmlzUlRMXG5cdFx0KTtcblx0XHRkaXJEZWZhdWx0cyA9IGlzUlRMID8gQ2FsZW5kYXIucnRsRGVmYXVsdHMgOiB7fTtcblxuXHRcdHRoaXMuZGlyRGVmYXVsdHMgPSBkaXJEZWZhdWx0cztcblx0XHR0aGlzLmxvY2FsZURlZmF1bHRzID0gbG9jYWxlRGVmYXVsdHM7XG5cdFx0dGhpcy5vcHRpb25zID0gbWVyZ2VPcHRpb25zKFsgLy8gbWVyZ2UgZGVmYXVsdHMgYW5kIG92ZXJyaWRlcy4gbG93ZXN0IHRvIGhpZ2hlc3QgcHJlY2VkZW5jZVxuXHRcdFx0Q2FsZW5kYXIuZGVmYXVsdHMsIC8vIGdsb2JhbCBkZWZhdWx0c1xuXHRcdFx0ZGlyRGVmYXVsdHMsXG5cdFx0XHRsb2NhbGVEZWZhdWx0cyxcblx0XHRcdHRoaXMub3ZlcnJpZGVzLFxuXHRcdFx0dGhpcy5keW5hbWljT3ZlcnJpZGVzXG5cdFx0XSk7XG5cdFx0cG9wdWxhdGVJbnN0YW5jZUNvbXB1dGFibGVPcHRpb25zKHRoaXMub3B0aW9ucyk7IC8vIGZpbGwgaW4gZ2FwcyB3aXRoIGNvbXB1dGVkIG9wdGlvbnNcblx0fSxcblxuXG5cdC8vIEdldHMgaW5mb3JtYXRpb24gYWJvdXQgaG93IHRvIGNyZWF0ZSBhIHZpZXcuIFdpbGwgdXNlIGEgY2FjaGUuXG5cdGdldFZpZXdTcGVjOiBmdW5jdGlvbih2aWV3VHlwZSkge1xuXHRcdHZhciBjYWNoZSA9IHRoaXMudmlld1NwZWNDYWNoZTtcblxuXHRcdHJldHVybiBjYWNoZVt2aWV3VHlwZV0gfHwgKGNhY2hlW3ZpZXdUeXBlXSA9IHRoaXMuYnVpbGRWaWV3U3BlYyh2aWV3VHlwZSkpO1xuXHR9LFxuXG5cblx0Ly8gR2l2ZW4gYSBkdXJhdGlvbiBzaW5ndWxhciB1bml0LCBsaWtlIFwid2Vla1wiIG9yIFwiZGF5XCIsIGZpbmRzIGEgbWF0Y2hpbmcgdmlldyBzcGVjLlxuXHQvLyBQcmVmZXJlbmNlIGlzIGdpdmVuIHRvIHZpZXdzIHRoYXQgaGF2ZSBjb3JyZXNwb25kaW5nIGJ1dHRvbnMuXG5cdGdldFVuaXRWaWV3U3BlYzogZnVuY3Rpb24odW5pdCkge1xuXHRcdHZhciB2aWV3VHlwZXM7XG5cdFx0dmFyIGk7XG5cdFx0dmFyIHNwZWM7XG5cblx0XHRpZiAoJC5pbkFycmF5KHVuaXQsIGludGVydmFsVW5pdHMpICE9IC0xKSB7XG5cblx0XHRcdC8vIHB1dCB2aWV3cyB0aGF0IGhhdmUgYnV0dG9ucyBmaXJzdC4gdGhlcmUgd2lsbCBiZSBkdXBsaWNhdGVzLCBidXQgb2ggd2VsbFxuXHRcdFx0dmlld1R5cGVzID0gdGhpcy5oZWFkZXIuZ2V0Vmlld3NXaXRoQnV0dG9ucygpOyAvLyBUT0RPOiBpbmNsdWRlIGZvb3RlciBhcyB3ZWxsP1xuXHRcdFx0JC5lYWNoKEZDLnZpZXdzLCBmdW5jdGlvbih2aWV3VHlwZSkgeyAvLyBhbGwgdmlld3Ncblx0XHRcdFx0dmlld1R5cGVzLnB1c2godmlld1R5cGUpO1xuXHRcdFx0fSk7XG5cblx0XHRcdGZvciAoaSA9IDA7IGkgPCB2aWV3VHlwZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0c3BlYyA9IHRoaXMuZ2V0Vmlld1NwZWModmlld1R5cGVzW2ldKTtcblx0XHRcdFx0aWYgKHNwZWMpIHtcblx0XHRcdFx0XHRpZiAoc3BlYy5zaW5nbGVVbml0ID09IHVuaXQpIHtcblx0XHRcdFx0XHRcdHJldHVybiBzcGVjO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXG5cdC8vIEJ1aWxkcyBhbiBvYmplY3Qgd2l0aCBpbmZvcm1hdGlvbiBvbiBob3cgdG8gY3JlYXRlIGEgZ2l2ZW4gdmlld1xuXHRidWlsZFZpZXdTcGVjOiBmdW5jdGlvbihyZXF1ZXN0ZWRWaWV3VHlwZSkge1xuXHRcdHZhciB2aWV3T3ZlcnJpZGVzID0gdGhpcy5vdmVycmlkZXMudmlld3MgfHwge307XG5cdFx0dmFyIHNwZWNDaGFpbiA9IFtdOyAvLyBmb3IgdGhlIHZpZXcuIGxvd2VzdCB0byBoaWdoZXN0IHByaW9yaXR5XG5cdFx0dmFyIGRlZmF1bHRzQ2hhaW4gPSBbXTsgLy8gZm9yIHRoZSB2aWV3LiBsb3dlc3QgdG8gaGlnaGVzdCBwcmlvcml0eVxuXHRcdHZhciBvdmVycmlkZXNDaGFpbiA9IFtdOyAvLyBmb3IgdGhlIHZpZXcuIGxvd2VzdCB0byBoaWdoZXN0IHByaW9yaXR5XG5cdFx0dmFyIHZpZXdUeXBlID0gcmVxdWVzdGVkVmlld1R5cGU7XG5cdFx0dmFyIHNwZWM7IC8vIGZvciB0aGUgdmlld1xuXHRcdHZhciBvdmVycmlkZXM7IC8vIGZvciB0aGUgdmlld1xuXHRcdHZhciBkdXJhdGlvbjtcblx0XHR2YXIgdW5pdDtcblxuXHRcdC8vIGl0ZXJhdGUgZnJvbSB0aGUgc3BlY2lmaWMgdmlldyBkZWZpbml0aW9uIHRvIGEgbW9yZSBnZW5lcmFsIG9uZSB1bnRpbCB3ZSBoaXQgYW4gYWN0dWFsIFZpZXcgY2xhc3Ncblx0XHR3aGlsZSAodmlld1R5cGUpIHtcblx0XHRcdHNwZWMgPSBmY1ZpZXdzW3ZpZXdUeXBlXTtcblx0XHRcdG92ZXJyaWRlcyA9IHZpZXdPdmVycmlkZXNbdmlld1R5cGVdO1xuXHRcdFx0dmlld1R5cGUgPSBudWxsOyAvLyBjbGVhci4gbWlnaHQgcmVwb3B1bGF0ZSBmb3IgYW5vdGhlciBpdGVyYXRpb25cblxuXHRcdFx0aWYgKHR5cGVvZiBzcGVjID09PSAnZnVuY3Rpb24nKSB7IC8vIFRPRE86IGRlcHJlY2F0ZVxuXHRcdFx0XHRzcGVjID0geyAnY2xhc3MnOiBzcGVjIH07XG5cdFx0XHR9XG5cblx0XHRcdGlmIChzcGVjKSB7XG5cdFx0XHRcdHNwZWNDaGFpbi51bnNoaWZ0KHNwZWMpO1xuXHRcdFx0XHRkZWZhdWx0c0NoYWluLnVuc2hpZnQoc3BlYy5kZWZhdWx0cyB8fCB7fSk7XG5cdFx0XHRcdGR1cmF0aW9uID0gZHVyYXRpb24gfHwgc3BlYy5kdXJhdGlvbjtcblx0XHRcdFx0dmlld1R5cGUgPSB2aWV3VHlwZSB8fCBzcGVjLnR5cGU7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChvdmVycmlkZXMpIHtcblx0XHRcdFx0b3ZlcnJpZGVzQ2hhaW4udW5zaGlmdChvdmVycmlkZXMpOyAvLyB2aWV3LXNwZWNpZmljIG9wdGlvbiBoYXNoZXMgaGF2ZSBvcHRpb25zIGF0IHplcm8tbGV2ZWxcblx0XHRcdFx0ZHVyYXRpb24gPSBkdXJhdGlvbiB8fCBvdmVycmlkZXMuZHVyYXRpb247XG5cdFx0XHRcdHZpZXdUeXBlID0gdmlld1R5cGUgfHwgb3ZlcnJpZGVzLnR5cGU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0c3BlYyA9IG1lcmdlUHJvcHMoc3BlY0NoYWluKTtcblx0XHRzcGVjLnR5cGUgPSByZXF1ZXN0ZWRWaWV3VHlwZTtcblx0XHRpZiAoIXNwZWNbJ2NsYXNzJ10pIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHRpZiAoZHVyYXRpb24pIHtcblx0XHRcdGR1cmF0aW9uID0gbW9tZW50LmR1cmF0aW9uKGR1cmF0aW9uKTtcblx0XHRcdGlmIChkdXJhdGlvbi52YWx1ZU9mKCkpIHsgLy8gdmFsaWQ/XG5cdFx0XHRcdHNwZWMuZHVyYXRpb24gPSBkdXJhdGlvbjtcblx0XHRcdFx0dW5pdCA9IGNvbXB1dGVJbnRlcnZhbFVuaXQoZHVyYXRpb24pO1xuXG5cdFx0XHRcdC8vIHZpZXcgaXMgYSBzaW5nbGUtdW5pdCBkdXJhdGlvbiwgbGlrZSBcIndlZWtcIiBvciBcImRheVwiXG5cdFx0XHRcdC8vIGluY29ycG9yYXRlIG9wdGlvbnMgZm9yIHRoaXMuIGxvd2VzdCBwcmlvcml0eVxuXHRcdFx0XHRpZiAoZHVyYXRpb24uYXModW5pdCkgPT09IDEpIHtcblx0XHRcdFx0XHRzcGVjLnNpbmdsZVVuaXQgPSB1bml0O1xuXHRcdFx0XHRcdG92ZXJyaWRlc0NoYWluLnVuc2hpZnQodmlld092ZXJyaWRlc1t1bml0XSB8fCB7fSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRzcGVjLmRlZmF1bHRzID0gbWVyZ2VPcHRpb25zKGRlZmF1bHRzQ2hhaW4pO1xuXHRcdHNwZWMub3ZlcnJpZGVzID0gbWVyZ2VPcHRpb25zKG92ZXJyaWRlc0NoYWluKTtcblxuXHRcdHRoaXMuYnVpbGRWaWV3U3BlY09wdGlvbnMoc3BlYyk7XG5cdFx0dGhpcy5idWlsZFZpZXdTcGVjQnV0dG9uVGV4dChzcGVjLCByZXF1ZXN0ZWRWaWV3VHlwZSk7XG5cblx0XHRyZXR1cm4gc3BlYztcblx0fSxcblxuXG5cdC8vIEJ1aWxkcyBhbmQgYXNzaWducyBhIHZpZXcgc3BlYydzIG9wdGlvbnMgb2JqZWN0IGZyb20gaXRzIGFscmVhZHktYXNzaWduZWQgZGVmYXVsdHMgYW5kIG92ZXJyaWRlc1xuXHRidWlsZFZpZXdTcGVjT3B0aW9uczogZnVuY3Rpb24oc3BlYykge1xuXHRcdHNwZWMub3B0aW9ucyA9IG1lcmdlT3B0aW9ucyhbIC8vIGxvd2VzdCB0byBoaWdoZXN0IHByaW9yaXR5XG5cdFx0XHRDYWxlbmRhci5kZWZhdWx0cywgLy8gZ2xvYmFsIGRlZmF1bHRzXG5cdFx0XHRzcGVjLmRlZmF1bHRzLCAvLyB2aWV3J3MgZGVmYXVsdHMgKGZyb20gVmlld1N1YmNsYXNzLmRlZmF1bHRzKVxuXHRcdFx0dGhpcy5kaXJEZWZhdWx0cyxcblx0XHRcdHRoaXMubG9jYWxlRGVmYXVsdHMsIC8vIGxvY2FsZSBhbmQgZGlyIHRha2UgcHJlY2VkZW5jZSBvdmVyIHZpZXcncyBkZWZhdWx0cyFcblx0XHRcdHRoaXMub3ZlcnJpZGVzLCAvLyBjYWxlbmRhcidzIG92ZXJyaWRlcyAob3B0aW9ucyBnaXZlbiB0byBjb25zdHJ1Y3Rvcilcblx0XHRcdHNwZWMub3ZlcnJpZGVzLCAvLyB2aWV3J3Mgb3ZlcnJpZGVzICh2aWV3LXNwZWNpZmljIG9wdGlvbnMpXG5cdFx0XHR0aGlzLmR5bmFtaWNPdmVycmlkZXMgLy8gZHluYW1pY2FsbHkgc2V0IHZpYSBzZXR0ZXIuIGhpZ2hlc3QgcHJlY2VkZW5jZVxuXHRcdF0pO1xuXHRcdHBvcHVsYXRlSW5zdGFuY2VDb21wdXRhYmxlT3B0aW9ucyhzcGVjLm9wdGlvbnMpO1xuXHR9LFxuXG5cblx0Ly8gQ29tcHV0ZXMgYW5kIGFzc2lnbnMgYSB2aWV3IHNwZWMncyBidXR0b25UZXh0LXJlbGF0ZWQgb3B0aW9uc1xuXHRidWlsZFZpZXdTcGVjQnV0dG9uVGV4dDogZnVuY3Rpb24oc3BlYywgcmVxdWVzdGVkVmlld1R5cGUpIHtcblxuXHRcdC8vIGdpdmVuIGFuIG9wdGlvbnMgb2JqZWN0IHdpdGggYSBwb3NzaWJsZSBgYnV0dG9uVGV4dGAgaGFzaCwgbG9va3VwIHRoZSBidXR0b25UZXh0IGZvciB0aGVcblx0XHQvLyByZXF1ZXN0ZWQgdmlldywgZmFsbGluZyBiYWNrIHRvIGEgZ2VuZXJpYyB1bml0IGVudHJ5IGxpa2UgXCJ3ZWVrXCIgb3IgXCJkYXlcIlxuXHRcdGZ1bmN0aW9uIHF1ZXJ5QnV0dG9uVGV4dChvcHRpb25zKSB7XG5cdFx0XHR2YXIgYnV0dG9uVGV4dCA9IG9wdGlvbnMuYnV0dG9uVGV4dCB8fCB7fTtcblx0XHRcdHJldHVybiBidXR0b25UZXh0W3JlcXVlc3RlZFZpZXdUeXBlXSB8fFxuXHRcdFx0XHQvLyB2aWV3IGNhbiBkZWNpZGUgdG8gbG9vayB1cCBhIGNlcnRhaW4ga2V5XG5cdFx0XHRcdChzcGVjLmJ1dHRvblRleHRLZXkgPyBidXR0b25UZXh0W3NwZWMuYnV0dG9uVGV4dEtleV0gOiBudWxsKSB8fFxuXHRcdFx0XHQvLyBhIGtleSBsaWtlIFwibW9udGhcIlxuXHRcdFx0XHQoc3BlYy5zaW5nbGVVbml0ID8gYnV0dG9uVGV4dFtzcGVjLnNpbmdsZVVuaXRdIDogbnVsbCk7XG5cdFx0fVxuXG5cdFx0Ly8gaGlnaGVzdCB0byBsb3dlc3QgcHJpb3JpdHlcblx0XHRzcGVjLmJ1dHRvblRleHRPdmVycmlkZSA9XG5cdFx0XHRxdWVyeUJ1dHRvblRleHQodGhpcy5keW5hbWljT3ZlcnJpZGVzKSB8fFxuXHRcdFx0cXVlcnlCdXR0b25UZXh0KHRoaXMub3ZlcnJpZGVzKSB8fCAvLyBjb25zdHJ1Y3Rvci1zcGVjaWZpZWQgYnV0dG9uVGV4dCBsb29rdXAgaGFzaCB0YWtlcyBwcmVjZWRlbmNlXG5cdFx0XHRzcGVjLm92ZXJyaWRlcy5idXR0b25UZXh0OyAvLyBgYnV0dG9uVGV4dGAgZm9yIHZpZXctc3BlY2lmaWMgb3B0aW9ucyBpcyBhIHN0cmluZ1xuXG5cdFx0Ly8gaGlnaGVzdCB0byBsb3dlc3QgcHJpb3JpdHkuIG1pcnJvcnMgYnVpbGRWaWV3U3BlY09wdGlvbnNcblx0XHRzcGVjLmJ1dHRvblRleHREZWZhdWx0ID1cblx0XHRcdHF1ZXJ5QnV0dG9uVGV4dCh0aGlzLmxvY2FsZURlZmF1bHRzKSB8fFxuXHRcdFx0cXVlcnlCdXR0b25UZXh0KHRoaXMuZGlyRGVmYXVsdHMpIHx8XG5cdFx0XHRzcGVjLmRlZmF1bHRzLmJ1dHRvblRleHQgfHwgLy8gYSBzaW5nbGUgc3RyaW5nLiBmcm9tIFZpZXdTdWJjbGFzcy5kZWZhdWx0c1xuXHRcdFx0cXVlcnlCdXR0b25UZXh0KENhbGVuZGFyLmRlZmF1bHRzKSB8fFxuXHRcdFx0KHNwZWMuZHVyYXRpb24gPyB0aGlzLmh1bWFuaXplRHVyYXRpb24oc3BlYy5kdXJhdGlvbikgOiBudWxsKSB8fCAvLyBsaWtlIFwiMyBkYXlzXCJcblx0XHRcdHJlcXVlc3RlZFZpZXdUeXBlOyAvLyBmYWxsIGJhY2sgdG8gZ2l2ZW4gdmlldyBuYW1lXG5cdH0sXG5cblxuXHQvLyBHaXZlbiBhIHZpZXcgbmFtZSBmb3IgYSBjdXN0b20gdmlldyBvciBhIHN0YW5kYXJkIHZpZXcsIGNyZWF0ZXMgYSByZWFkeS10by1nbyBWaWV3IG9iamVjdFxuXHRpbnN0YW50aWF0ZVZpZXc6IGZ1bmN0aW9uKHZpZXdUeXBlKSB7XG5cdFx0dmFyIHNwZWMgPSB0aGlzLmdldFZpZXdTcGVjKHZpZXdUeXBlKTtcblxuXHRcdHJldHVybiBuZXcgc3BlY1snY2xhc3MnXSh0aGlzLCB2aWV3VHlwZSwgc3BlYy5vcHRpb25zLCBzcGVjLmR1cmF0aW9uKTtcblx0fSxcblxuXG5cdC8vIFJldHVybnMgYSBib29sZWFuIGFib3V0IHdoZXRoZXIgdGhlIHZpZXcgaXMgb2theSB0byBpbnN0YW50aWF0ZSBhdCBzb21lIHBvaW50XG5cdGlzVmFsaWRWaWV3VHlwZTogZnVuY3Rpb24odmlld1R5cGUpIHtcblx0XHRyZXR1cm4gQm9vbGVhbih0aGlzLmdldFZpZXdTcGVjKHZpZXdUeXBlKSk7XG5cdH0sXG5cblxuXHQvLyBTaG91bGQgYmUgY2FsbGVkIHdoZW4gYW55IHR5cGUgb2YgYXN5bmMgZGF0YSBmZXRjaGluZyBiZWdpbnNcblx0cHVzaExvYWRpbmc6IGZ1bmN0aW9uKCkge1xuXHRcdGlmICghKHRoaXMubG9hZGluZ0xldmVsKyspKSB7XG5cdFx0XHR0aGlzLnB1YmxpY2x5VHJpZ2dlcignbG9hZGluZycsIG51bGwsIHRydWUsIHRoaXMudmlldyk7XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gU2hvdWxkIGJlIGNhbGxlZCB3aGVuIGFueSB0eXBlIG9mIGFzeW5jIGRhdGEgZmV0Y2hpbmcgY29tcGxldGVzXG5cdHBvcExvYWRpbmc6IGZ1bmN0aW9uKCkge1xuXHRcdGlmICghKC0tdGhpcy5sb2FkaW5nTGV2ZWwpKSB7XG5cdFx0XHR0aGlzLnB1YmxpY2x5VHJpZ2dlcignbG9hZGluZycsIG51bGwsIGZhbHNlLCB0aGlzLnZpZXcpO1xuXHRcdH1cblx0fSxcblxuXG5cdC8vIEdpdmVuIGFyZ3VtZW50cyB0byB0aGUgc2VsZWN0IG1ldGhvZCBpbiB0aGUgQVBJLCByZXR1cm5zIGEgc3BhbiAodW56b25lZCBzdGFydC9lbmQgYW5kIG90aGVyIGluZm8pXG5cdGJ1aWxkU2VsZWN0U3BhbjogZnVuY3Rpb24oem9uZWRTdGFydElucHV0LCB6b25lZEVuZElucHV0KSB7XG5cdFx0dmFyIHN0YXJ0ID0gdGhpcy5tb21lbnQoem9uZWRTdGFydElucHV0KS5zdHJpcFpvbmUoKTtcblx0XHR2YXIgZW5kO1xuXG5cdFx0aWYgKHpvbmVkRW5kSW5wdXQpIHtcblx0XHRcdGVuZCA9IHRoaXMubW9tZW50KHpvbmVkRW5kSW5wdXQpLnN0cmlwWm9uZSgpO1xuXHRcdH1cblx0XHRlbHNlIGlmIChzdGFydC5oYXNUaW1lKCkpIHtcblx0XHRcdGVuZCA9IHN0YXJ0LmNsb25lKCkuYWRkKHRoaXMuZGVmYXVsdFRpbWVkRXZlbnREdXJhdGlvbik7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0ZW5kID0gc3RhcnQuY2xvbmUoKS5hZGQodGhpcy5kZWZhdWx0QWxsRGF5RXZlbnREdXJhdGlvbik7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHsgc3RhcnQ6IHN0YXJ0LCBlbmQ6IGVuZCB9O1xuXHR9XG5cbn0pO1xuXG5cbkNhbGVuZGFyLm1peGluKEVtaXR0ZXJNaXhpbik7XG5cblxuZnVuY3Rpb24gQ2FsZW5kYXJfY29uc3RydWN0b3IoZWxlbWVudCwgb3ZlcnJpZGVzKSB7XG5cdHZhciB0ID0gdGhpcztcblxuXG5cdC8vIEV4cG9ydHNcblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXHR0LnJlbmRlciA9IHJlbmRlcjtcblx0dC5kZXN0cm95ID0gZGVzdHJveTtcblx0dC5yZXJlbmRlckV2ZW50cyA9IHJlcmVuZGVyRXZlbnRzO1xuXHR0LmNoYW5nZVZpZXcgPSByZW5kZXJWaWV3OyAvLyBgcmVuZGVyVmlld2Agd2lsbCBzd2l0Y2ggdG8gYW5vdGhlciB2aWV3XG5cdHQuc2VsZWN0ID0gc2VsZWN0O1xuXHR0LnVuc2VsZWN0ID0gdW5zZWxlY3Q7XG5cdHQucHJldiA9IHByZXY7XG5cdHQubmV4dCA9IG5leHQ7XG5cdHQucHJldlllYXIgPSBwcmV2WWVhcjtcblx0dC5uZXh0WWVhciA9IG5leHRZZWFyO1xuXHR0LnRvZGF5ID0gdG9kYXk7XG5cdHQuZ290b0RhdGUgPSBnb3RvRGF0ZTtcblx0dC5pbmNyZW1lbnREYXRlID0gaW5jcmVtZW50RGF0ZTtcblx0dC56b29tVG8gPSB6b29tVG87XG5cdHQuZ2V0RGF0ZSA9IGdldERhdGU7XG5cdHQuZ2V0Q2FsZW5kYXIgPSBnZXRDYWxlbmRhcjtcblx0dC5nZXRWaWV3ID0gZ2V0Vmlldztcblx0dC5vcHRpb24gPSBvcHRpb247IC8vIGdldHRlci9zZXR0ZXIgbWV0aG9kXG5cdHQucHVibGljbHlUcmlnZ2VyID0gcHVibGljbHlUcmlnZ2VyO1xuXG5cblx0Ly8gT3B0aW9uc1xuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cdHQuZHluYW1pY092ZXJyaWRlcyA9IHt9O1xuXHR0LnZpZXdTcGVjQ2FjaGUgPSB7fTtcblx0dC5vcHRpb25IYW5kbGVycyA9IHt9OyAvLyBmb3IgQ2FsZW5kYXIub3B0aW9ucy5qc1xuXHR0Lm92ZXJyaWRlcyA9ICQuZXh0ZW5kKHt9LCBvdmVycmlkZXMpOyAvLyBtYWtlIGEgY29weVxuXG5cdHQucG9wdWxhdGVPcHRpb25zSGFzaCgpOyAvLyBzZXRzIHRoaXMub3B0aW9uc1xuXG5cblxuXHQvLyBMb2NhbGUtZGF0YSBJbnRlcm5hbHNcblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0Ly8gQXBwbHkgb3ZlcnJpZGVzIHRvIHRoZSBjdXJyZW50IGxvY2FsZSdzIGRhdGFcblxuXHR2YXIgbG9jYWxlRGF0YTtcblxuXHQvLyBDYWxsZWQgaW1tZWRpYXRlbHksIGFuZCB3aGVuIGFueSBvZiB0aGUgb3B0aW9ucyBjaGFuZ2UuXG5cdC8vIEhhcHBlbnMgYmVmb3JlIGFueSBpbnRlcm5hbCBvYmplY3RzIHJlYnVpbGQgb3IgcmVyZW5kZXIsIGJlY2F1c2UgdGhpcyBpcyB2ZXJ5IGNvcmUuXG5cdHQuYmluZE9wdGlvbnMoW1xuXHRcdCdsb2NhbGUnLCAnbW9udGhOYW1lcycsICdtb250aE5hbWVzU2hvcnQnLCAnZGF5TmFtZXMnLCAnZGF5TmFtZXNTaG9ydCcsICdmaXJzdERheScsICd3ZWVrTnVtYmVyQ2FsY3VsYXRpb24nXG5cdF0sIGZ1bmN0aW9uKGxvY2FsZSwgbW9udGhOYW1lcywgbW9udGhOYW1lc1Nob3J0LCBkYXlOYW1lcywgZGF5TmFtZXNTaG9ydCwgZmlyc3REYXksIHdlZWtOdW1iZXJDYWxjdWxhdGlvbikge1xuXG5cdFx0Ly8gbm9ybWFsaXplXG5cdFx0aWYgKHdlZWtOdW1iZXJDYWxjdWxhdGlvbiA9PT0gJ2lzbycpIHtcblx0XHRcdHdlZWtOdW1iZXJDYWxjdWxhdGlvbiA9ICdJU08nOyAvLyBub3JtYWxpemVcblx0XHR9XG5cblx0XHRsb2NhbGVEYXRhID0gY3JlYXRlT2JqZWN0KCAvLyBtYWtlIGEgY2hlYXAgY29weVxuXHRcdFx0Z2V0TW9tZW50TG9jYWxlRGF0YShsb2NhbGUpIC8vIHdpbGwgZmFsbCBiYWNrIHRvIGVuXG5cdFx0KTtcblxuXHRcdGlmIChtb250aE5hbWVzKSB7XG5cdFx0XHRsb2NhbGVEYXRhLl9tb250aHMgPSBtb250aE5hbWVzO1xuXHRcdH1cblx0XHRpZiAobW9udGhOYW1lc1Nob3J0KSB7XG5cdFx0XHRsb2NhbGVEYXRhLl9tb250aHNTaG9ydCA9IG1vbnRoTmFtZXNTaG9ydDtcblx0XHR9XG5cdFx0aWYgKGRheU5hbWVzKSB7XG5cdFx0XHRsb2NhbGVEYXRhLl93ZWVrZGF5cyA9IGRheU5hbWVzO1xuXHRcdH1cblx0XHRpZiAoZGF5TmFtZXNTaG9ydCkge1xuXHRcdFx0bG9jYWxlRGF0YS5fd2Vla2RheXNTaG9ydCA9IGRheU5hbWVzU2hvcnQ7XG5cdFx0fVxuXG5cdFx0aWYgKGZpcnN0RGF5ID09IG51bGwgJiYgd2Vla051bWJlckNhbGN1bGF0aW9uID09PSAnSVNPJykge1xuXHRcdFx0Zmlyc3REYXkgPSAxO1xuXHRcdH1cblx0XHRpZiAoZmlyc3REYXkgIT0gbnVsbCkge1xuXHRcdFx0dmFyIF93ZWVrID0gY3JlYXRlT2JqZWN0KGxvY2FsZURhdGEuX3dlZWspOyAvLyBfd2VlazogeyBkb3c6ICMgfVxuXHRcdFx0X3dlZWsuZG93ID0gZmlyc3REYXk7XG5cdFx0XHRsb2NhbGVEYXRhLl93ZWVrID0gX3dlZWs7XG5cdFx0fVxuXG5cdFx0aWYgKCAvLyB3aGl0ZWxpc3QgY2VydGFpbiBraW5kcyBvZiBpbnB1dFxuXHRcdFx0d2Vla051bWJlckNhbGN1bGF0aW9uID09PSAnSVNPJyB8fFxuXHRcdFx0d2Vla051bWJlckNhbGN1bGF0aW9uID09PSAnbG9jYWwnIHx8XG5cdFx0XHR0eXBlb2Ygd2Vla051bWJlckNhbGN1bGF0aW9uID09PSAnZnVuY3Rpb24nXG5cdFx0KSB7XG5cdFx0XHRsb2NhbGVEYXRhLl9mdWxsQ2FsZW5kYXJfd2Vla0NhbGMgPSB3ZWVrTnVtYmVyQ2FsY3VsYXRpb247IC8vIG1vbWVudC1leHQgd2lsbCBrbm93IHdoYXQgdG8gZG8gd2l0aCBpdFxuXHRcdH1cblxuXHRcdC8vIElmIHRoZSBpbnRlcm5hbCBjdXJyZW50IGRhdGUgb2JqZWN0IGFscmVhZHkgZXhpc3RzLCBtb3ZlIHRvIG5ldyBsb2NhbGUuXG5cdFx0Ly8gV2UgZG8gTk9UIG5lZWQgdG8gZG8gdGhpcyB0ZWNobmlxdWUgZm9yIGV2ZW50IGRhdGVzLCBiZWNhdXNlIHRoaXMgaGFwcGVucyB3aGVuIGNvbnZlcnRpbmcgdG8gXCJzZWdtZW50c1wiLlxuXHRcdGlmIChkYXRlKSB7XG5cdFx0XHRsb2NhbGl6ZU1vbWVudChkYXRlKTsgLy8gc2V0cyB0byBsb2NhbGVEYXRhXG5cdFx0fVxuXHR9KTtcblxuXG5cdC8vIENhbGVuZGFyLXNwZWNpZmljIERhdGUgVXRpbGl0aWVzXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuXHR0LmRlZmF1bHRBbGxEYXlFdmVudER1cmF0aW9uID0gbW9tZW50LmR1cmF0aW9uKHQub3B0aW9ucy5kZWZhdWx0QWxsRGF5RXZlbnREdXJhdGlvbik7XG5cdHQuZGVmYXVsdFRpbWVkRXZlbnREdXJhdGlvbiA9IG1vbWVudC5kdXJhdGlvbih0Lm9wdGlvbnMuZGVmYXVsdFRpbWVkRXZlbnREdXJhdGlvbik7XG5cblxuXHQvLyBCdWlsZHMgYSBtb21lbnQgdXNpbmcgdGhlIHNldHRpbmdzIG9mIHRoZSBjdXJyZW50IGNhbGVuZGFyOiB0aW1lem9uZSBhbmQgbG9jYWxlLlxuXHQvLyBBY2NlcHRzIGFueXRoaW5nIHRoZSB2YW5pbGxhIG1vbWVudCgpIGNvbnN0cnVjdG9yIGFjY2VwdHMuXG5cdHQubW9tZW50ID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG1vbTtcblxuXHRcdGlmICh0Lm9wdGlvbnMudGltZXpvbmUgPT09ICdsb2NhbCcpIHtcblx0XHRcdG1vbSA9IEZDLm1vbWVudC5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuXG5cdFx0XHQvLyBGb3JjZSB0aGUgbW9tZW50IHRvIGJlIGxvY2FsLCBiZWNhdXNlIEZDLm1vbWVudCBkb2Vzbid0IGd1YXJhbnRlZSBpdC5cblx0XHRcdGlmIChtb20uaGFzVGltZSgpKSB7IC8vIGRvbid0IGdpdmUgYW1iaWd1b3VzbHktdGltZWQgbW9tZW50cyBhIGxvY2FsIHpvbmVcblx0XHRcdFx0bW9tLmxvY2FsKCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVsc2UgaWYgKHQub3B0aW9ucy50aW1lem9uZSA9PT0gJ1VUQycpIHtcblx0XHRcdG1vbSA9IEZDLm1vbWVudC51dGMuYXBwbHkobnVsbCwgYXJndW1lbnRzKTsgLy8gcHJvY2VzcyBhcyBVVENcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRtb20gPSBGQy5tb21lbnQucGFyc2Vab25lLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7IC8vIGxldCB0aGUgaW5wdXQgZGVjaWRlIHRoZSB6b25lXG5cdFx0fVxuXG5cdFx0bG9jYWxpemVNb21lbnQobW9tKTtcblxuXHRcdHJldHVybiBtb207XG5cdH07XG5cblxuXHQvLyBVcGRhdGVzIHRoZSBnaXZlbiBtb21lbnQncyBsb2NhbGUgc2V0dGluZ3MgdG8gdGhlIGN1cnJlbnQgY2FsZW5kYXIgbG9jYWxlIHNldHRpbmdzLlxuXHRmdW5jdGlvbiBsb2NhbGl6ZU1vbWVudChtb20pIHtcblx0XHRtb20uX2xvY2FsZSA9IGxvY2FsZURhdGE7XG5cdH1cblx0dC5sb2NhbGl6ZU1vbWVudCA9IGxvY2FsaXplTW9tZW50O1xuXG5cblx0Ly8gUmV0dXJucyBhIGJvb2xlYW4gYWJvdXQgd2hldGhlciBvciBub3QgdGhlIGNhbGVuZGFyIGtub3dzIGhvdyB0byBjYWxjdWxhdGVcblx0Ly8gdGhlIHRpbWV6b25lIG9mZnNldCBvZiBhcmJpdHJhcnkgZGF0ZXMgaW4gdGhlIGN1cnJlbnQgdGltZXpvbmUuXG5cdHQuZ2V0SXNBbWJpZ1RpbWV6b25lID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHQub3B0aW9ucy50aW1lem9uZSAhPT0gJ2xvY2FsJyAmJiB0Lm9wdGlvbnMudGltZXpvbmUgIT09ICdVVEMnO1xuXHR9O1xuXG5cblx0Ly8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIGdpdmVuIGRhdGUgaW4gdGhlIGN1cnJlbnQgdGltZXpvbmUuIEhhcyBubyBlZmZlY3Qgb24gZGF0ZXMgd2l0aG91dCB0aW1lcy5cblx0dC5hcHBseVRpbWV6b25lID0gZnVuY3Rpb24oZGF0ZSkge1xuXHRcdGlmICghZGF0ZS5oYXNUaW1lKCkpIHtcblx0XHRcdHJldHVybiBkYXRlLmNsb25lKCk7XG5cdFx0fVxuXG5cdFx0dmFyIHpvbmVkRGF0ZSA9IHQubW9tZW50KGRhdGUudG9BcnJheSgpKTtcblx0XHR2YXIgdGltZUFkanVzdCA9IGRhdGUudGltZSgpIC0gem9uZWREYXRlLnRpbWUoKTtcblx0XHR2YXIgYWRqdXN0ZWRab25lZERhdGU7XG5cblx0XHQvLyBTYWZhcmkgc29tZXRpbWVzIGhhcyBwcm9ibGVtcyB3aXRoIHRoaXMgY29lcnNpb24gd2hlbiBuZWFyIERTVC4gQWRqdXN0IGlmIG5lY2Vzc2FyeS4gKGJ1ZyAjMjM5Nilcblx0XHRpZiAodGltZUFkanVzdCkgeyAvLyBpcyB0aGUgdGltZSByZXN1bHQgZGlmZmVyZW50IHRoYW4gZXhwZWN0ZWQ/XG5cdFx0XHRhZGp1c3RlZFpvbmVkRGF0ZSA9IHpvbmVkRGF0ZS5jbG9uZSgpLmFkZCh0aW1lQWRqdXN0KTsgLy8gYWRkIG1pbGxpc2Vjb25kc1xuXHRcdFx0aWYgKGRhdGUudGltZSgpIC0gYWRqdXN0ZWRab25lZERhdGUudGltZSgpID09PSAwKSB7IC8vIGRvZXMgaXQgbWF0Y2ggcGVyZmVjdGx5IG5vdz9cblx0XHRcdFx0em9uZWREYXRlID0gYWRqdXN0ZWRab25lZERhdGU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHpvbmVkRGF0ZTtcblx0fTtcblxuXG5cdC8vIFJldHVybnMgYSBtb21lbnQgZm9yIHRoZSBjdXJyZW50IGRhdGUsIGFzIGRlZmluZWQgYnkgdGhlIGNsaWVudCdzIGNvbXB1dGVyIG9yIGZyb20gdGhlIGBub3dgIG9wdGlvbi5cblx0Ly8gV2lsbCByZXR1cm4gYW4gbW9tZW50IHdpdGggYW4gYW1iaWd1b3VzIHRpbWV6b25lLlxuXHR0LmdldE5vdyA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBub3cgPSB0Lm9wdGlvbnMubm93O1xuXHRcdGlmICh0eXBlb2Ygbm93ID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRub3cgPSBub3coKTtcblx0XHR9XG5cdFx0cmV0dXJuIHQubW9tZW50KG5vdykuc3RyaXBab25lKCk7XG5cdH07XG5cblxuXHQvLyBHZXQgYW4gZXZlbnQncyBub3JtYWxpemVkIGVuZCBkYXRlLiBJZiBub3QgcHJlc2VudCwgY2FsY3VsYXRlIGl0IGZyb20gdGhlIGRlZmF1bHRzLlxuXHR0LmdldEV2ZW50RW5kID0gZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRpZiAoZXZlbnQuZW5kKSB7XG5cdFx0XHRyZXR1cm4gZXZlbnQuZW5kLmNsb25lKCk7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0cmV0dXJuIHQuZ2V0RGVmYXVsdEV2ZW50RW5kKGV2ZW50LmFsbERheSwgZXZlbnQuc3RhcnQpO1xuXHRcdH1cblx0fTtcblxuXG5cdC8vIEdpdmVuIGFuIGV2ZW50J3MgYWxsRGF5IHN0YXR1cyBhbmQgc3RhcnQgZGF0ZSwgcmV0dXJuIHdoYXQgaXRzIGZhbGxiYWNrIGVuZCBkYXRlIHNob3VsZCBiZS5cblx0Ly8gVE9ETzogcmVuYW1lIHRvIGNvbXB1dGVEZWZhdWx0RXZlbnRFbmRcblx0dC5nZXREZWZhdWx0RXZlbnRFbmQgPSBmdW5jdGlvbihhbGxEYXksIHpvbmVkU3RhcnQpIHtcblx0XHR2YXIgZW5kID0gem9uZWRTdGFydC5jbG9uZSgpO1xuXG5cdFx0aWYgKGFsbERheSkge1xuXHRcdFx0ZW5kLnN0cmlwVGltZSgpLmFkZCh0LmRlZmF1bHRBbGxEYXlFdmVudER1cmF0aW9uKTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRlbmQuYWRkKHQuZGVmYXVsdFRpbWVkRXZlbnREdXJhdGlvbik7XG5cdFx0fVxuXG5cdFx0aWYgKHQuZ2V0SXNBbWJpZ1RpbWV6b25lKCkpIHtcblx0XHRcdGVuZC5zdHJpcFpvbmUoKTsgLy8gd2UgZG9uJ3Qga25vdyB3aGF0IHRoZSB0em8gc2hvdWxkIGJlXG5cdFx0fVxuXG5cdFx0cmV0dXJuIGVuZDtcblx0fTtcblxuXG5cdC8vIFByb2R1Y2VzIGEgaHVtYW4tcmVhZGFibGUgc3RyaW5nIGZvciB0aGUgZ2l2ZW4gZHVyYXRpb24uXG5cdC8vIFNpZGUtZWZmZWN0OiBjaGFuZ2VzIHRoZSBsb2NhbGUgb2YgdGhlIGdpdmVuIGR1cmF0aW9uLlxuXHR0Lmh1bWFuaXplRHVyYXRpb24gPSBmdW5jdGlvbihkdXJhdGlvbikge1xuXHRcdHJldHVybiBkdXJhdGlvbi5sb2NhbGUodC5vcHRpb25zLmxvY2FsZSkuaHVtYW5pemUoKTtcblx0fTtcblxuXG5cblx0Ly8gSW1wb3J0c1xuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cblx0RXZlbnRNYW5hZ2VyLmNhbGwodCk7XG5cblxuXG5cdC8vIExvY2Fsc1xuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cblx0dmFyIF9lbGVtZW50ID0gZWxlbWVudFswXTtcblx0dmFyIHRvb2xiYXJzTWFuYWdlcjtcblx0dmFyIGhlYWRlcjtcblx0dmFyIGZvb3Rlcjtcblx0dmFyIGNvbnRlbnQ7XG5cdHZhciB0bTsgLy8gZm9yIG1ha2luZyB0aGVtZSBjbGFzc2VzXG5cdHZhciBjdXJyZW50VmlldzsgLy8gTk9URToga2VlcCB0aGlzIGluIHN5bmMgd2l0aCB0aGlzLnZpZXdcblx0dmFyIHZpZXdzQnlUeXBlID0ge307IC8vIGhvbGRzIGFsbCBpbnN0YW50aWF0ZWQgdmlldyBpbnN0YW5jZXMsIGN1cnJlbnQgb3Igbm90XG5cdHZhciBzdWdnZXN0ZWRWaWV3SGVpZ2h0O1xuXHR2YXIgd2luZG93UmVzaXplUHJveHk7IC8vIHdyYXBzIHRoZSB3aW5kb3dSZXNpemUgZnVuY3Rpb25cblx0dmFyIGlnbm9yZVdpbmRvd1Jlc2l6ZSA9IDA7XG5cdHZhciBkYXRlOyAvLyB1bnpvbmVkXG5cblxuXG5cdC8vIE1haW4gUmVuZGVyaW5nXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuXHQvLyBjb21wdXRlIHRoZSBpbml0aWFsIGFtYmlnLXRpbWV6b25lIGRhdGVcblx0aWYgKHQub3B0aW9ucy5kZWZhdWx0RGF0ZSAhPSBudWxsKSB7XG5cdFx0ZGF0ZSA9IHQubW9tZW50KHQub3B0aW9ucy5kZWZhdWx0RGF0ZSkuc3RyaXBab25lKCk7XG5cdH1cblx0ZWxzZSB7XG5cdFx0ZGF0ZSA9IHQuZ2V0Tm93KCk7IC8vIGdldE5vdyBhbHJlYWR5IHJldHVybnMgdW56b25lZFxuXHR9XG5cblxuXHRmdW5jdGlvbiByZW5kZXIoKSB7XG5cdFx0aWYgKCFjb250ZW50KSB7XG5cdFx0XHRpbml0aWFsUmVuZGVyKCk7XG5cdFx0fVxuXHRcdGVsc2UgaWYgKGVsZW1lbnRWaXNpYmxlKCkpIHtcblx0XHRcdC8vIG1haW5seSBmb3IgdGhlIHB1YmxpYyBBUElcblx0XHRcdGNhbGNTaXplKCk7XG5cdFx0XHRyZW5kZXJWaWV3KCk7XG5cdFx0fVxuXHR9XG5cblxuXHRmdW5jdGlvbiBpbml0aWFsUmVuZGVyKCkge1xuXHRcdGVsZW1lbnQuYWRkQ2xhc3MoJ2ZjJyk7XG5cblx0XHQvLyBldmVudCBkZWxlZ2F0aW9uIGZvciBuYXYgbGlua3Ncblx0XHRlbGVtZW50Lm9uKCdjbGljay5mYycsICdhW2RhdGEtZ290b10nLCBmdW5jdGlvbihldikge1xuXHRcdFx0dmFyIGFuY2hvckVsID0gJCh0aGlzKTtcblx0XHRcdHZhciBnb3RvT3B0aW9ucyA9IGFuY2hvckVsLmRhdGEoJ2dvdG8nKTsgLy8gd2lsbCBhdXRvbWF0aWNhbGx5IHBhcnNlIEpTT05cblx0XHRcdHZhciBkYXRlID0gdC5tb21lbnQoZ290b09wdGlvbnMuZGF0ZSk7XG5cdFx0XHR2YXIgdmlld1R5cGUgPSBnb3RvT3B0aW9ucy50eXBlO1xuXG5cdFx0XHQvLyBwcm9wZXJ0eSBsaWtlIFwibmF2TGlua0RheUNsaWNrXCIuIG1pZ2h0IGJlIGEgc3RyaW5nIG9yIGEgZnVuY3Rpb25cblx0XHRcdHZhciBjdXN0b21BY3Rpb24gPSBjdXJyZW50Vmlldy5vcHQoJ25hdkxpbmsnICsgY2FwaXRhbGlzZUZpcnN0TGV0dGVyKHZpZXdUeXBlKSArICdDbGljaycpO1xuXG5cdFx0XHRpZiAodHlwZW9mIGN1c3RvbUFjdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRjdXN0b21BY3Rpb24oZGF0ZSwgZXYpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGlmICh0eXBlb2YgY3VzdG9tQWN0aW9uID09PSAnc3RyaW5nJykge1xuXHRcdFx0XHRcdHZpZXdUeXBlID0gY3VzdG9tQWN0aW9uO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHpvb21UbyhkYXRlLCB2aWV3VHlwZSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBjYWxsZWQgaW1tZWRpYXRlbHksIGFuZCB1cG9uIG9wdGlvbiBjaGFuZ2Vcblx0XHR0LmJpbmRPcHRpb24oJ3RoZW1lJywgZnVuY3Rpb24odGhlbWUpIHtcblx0XHRcdHRtID0gdGhlbWUgPyAndWknIDogJ2ZjJzsgLy8gYWZmZWN0cyBhIGxhcmdlciBzY29wZVxuXHRcdFx0ZWxlbWVudC50b2dnbGVDbGFzcygndWktd2lkZ2V0JywgdGhlbWUpO1xuXHRcdFx0ZWxlbWVudC50b2dnbGVDbGFzcygnZmMtdW50aGVtZWQnLCAhdGhlbWUpO1xuXHRcdH0pO1xuXG5cdFx0Ly8gY2FsbGVkIGltbWVkaWF0ZWx5LCBhbmQgdXBvbiBvcHRpb24gY2hhbmdlLlxuXHRcdC8vIEhBQ0s6IGxvY2FsZSBvZnRlbiBhZmZlY3RzIGlzUlRMLCBzbyB3ZSBleHBsaWNpdGx5IGxpc3RlbiB0byB0aGF0IHRvby5cblx0XHR0LmJpbmRPcHRpb25zKFsgJ2lzUlRMJywgJ2xvY2FsZScgXSwgZnVuY3Rpb24oaXNSVEwpIHtcblx0XHRcdGVsZW1lbnQudG9nZ2xlQ2xhc3MoJ2ZjLWx0cicsICFpc1JUTCk7XG5cdFx0XHRlbGVtZW50LnRvZ2dsZUNsYXNzKCdmYy1ydGwnLCBpc1JUTCk7XG5cdFx0fSk7XG5cblx0XHRjb250ZW50ID0gJChcIjxkaXYgY2xhc3M9J2ZjLXZpZXctY29udGFpbmVyJy8+XCIpLnByZXBlbmRUbyhlbGVtZW50KTtcblxuXHRcdHZhciB0b29sYmFycyA9IGJ1aWxkVG9vbGJhcnMoKTtcblx0XHR0b29sYmFyc01hbmFnZXIgPSBuZXcgSXRlcmF0b3IodG9vbGJhcnMpO1xuXG5cdFx0aGVhZGVyID0gdC5oZWFkZXIgPSB0b29sYmFyc1swXTtcblx0XHRmb290ZXIgPSB0LmZvb3RlciA9IHRvb2xiYXJzWzFdO1xuXG5cdFx0cmVuZGVySGVhZGVyKCk7XG5cdFx0cmVuZGVyRm9vdGVyKCk7XG5cdFx0cmVuZGVyVmlldyh0Lm9wdGlvbnMuZGVmYXVsdFZpZXcpO1xuXG5cdFx0aWYgKHQub3B0aW9ucy5oYW5kbGVXaW5kb3dSZXNpemUpIHtcblx0XHRcdHdpbmRvd1Jlc2l6ZVByb3h5ID0gZGVib3VuY2Uod2luZG93UmVzaXplLCB0Lm9wdGlvbnMud2luZG93UmVzaXplRGVsYXkpOyAvLyBwcmV2ZW50cyByYXBpZCBjYWxsc1xuXHRcdFx0JCh3aW5kb3cpLnJlc2l6ZSh3aW5kb3dSZXNpemVQcm94eSk7XG5cdFx0fVxuXHR9XG5cblxuXHRmdW5jdGlvbiBkZXN0cm95KCkge1xuXG5cdFx0aWYgKGN1cnJlbnRWaWV3KSB7XG5cdFx0XHRjdXJyZW50Vmlldy5yZW1vdmVFbGVtZW50KCk7XG5cblx0XHRcdC8vIE5PVEU6IGRvbid0IG51bGwtb3V0IGN1cnJlbnRWaWV3L3QudmlldyBpbiBjYXNlIEFQSSBtZXRob2RzIGFyZSBjYWxsZWQgYWZ0ZXIgZGVzdHJveS5cblx0XHRcdC8vIEl0IGlzIHN0aWxsIHRoZSBcImN1cnJlbnRcIiB2aWV3LCBqdXN0IG5vdCByZW5kZXJlZC5cblx0XHR9XG5cblx0XHR0b29sYmFyc01hbmFnZXIucHJveHlDYWxsKCdyZW1vdmVFbGVtZW50Jyk7XG5cdFx0Y29udGVudC5yZW1vdmUoKTtcblx0XHRlbGVtZW50LnJlbW92ZUNsYXNzKCdmYyBmYy1sdHIgZmMtcnRsIGZjLXVudGhlbWVkIHVpLXdpZGdldCcpO1xuXG5cdFx0ZWxlbWVudC5vZmYoJy5mYycpOyAvLyB1bmJpbmQgbmF2IGxpbmsgaGFuZGxlcnNcblxuXHRcdGlmICh3aW5kb3dSZXNpemVQcm94eSkge1xuXHRcdFx0JCh3aW5kb3cpLnVuYmluZCgncmVzaXplJywgd2luZG93UmVzaXplUHJveHkpO1xuXHRcdH1cblx0fVxuXG5cblx0ZnVuY3Rpb24gZWxlbWVudFZpc2libGUoKSB7XG5cdFx0cmV0dXJuIGVsZW1lbnQuaXMoJzp2aXNpYmxlJyk7XG5cdH1cblxuXG5cblx0Ly8gVmlldyBSZW5kZXJpbmdcblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG5cdC8vIFJlbmRlcnMgYSB2aWV3IGJlY2F1c2Ugb2YgYSBkYXRlIGNoYW5nZSwgdmlldy10eXBlIGNoYW5nZSwgb3IgZm9yIHRoZSBmaXJzdCB0aW1lLlxuXHQvLyBJZiBub3QgZ2l2ZW4gYSB2aWV3VHlwZSwga2VlcCB0aGUgY3VycmVudCB2aWV3IGJ1dCByZW5kZXIgZGlmZmVyZW50IGRhdGVzLlxuXHQvLyBBY2NlcHRzIGFuIG9wdGlvbmFsIHNjcm9sbCBzdGF0ZSB0byByZXN0b3JlIHRvLlxuXHRmdW5jdGlvbiByZW5kZXJWaWV3KHZpZXdUeXBlLCBmb3JjZWRTY3JvbGwpIHtcblx0XHRpZ25vcmVXaW5kb3dSZXNpemUrKztcblxuXHRcdHZhciBuZWVkc0NsZWFyVmlldyA9IGN1cnJlbnRWaWV3ICYmIHZpZXdUeXBlICYmIGN1cnJlbnRWaWV3LnR5cGUgIT09IHZpZXdUeXBlO1xuXG5cdFx0Ly8gaWYgdmlld1R5cGUgaXMgY2hhbmdpbmcsIHJlbW92ZSB0aGUgb2xkIHZpZXcncyByZW5kZXJpbmdcblx0XHRpZiAobmVlZHNDbGVhclZpZXcpIHtcblx0XHRcdGZyZWV6ZUNvbnRlbnRIZWlnaHQoKTsgLy8gcHJldmVudCBhIHNjcm9sbCBqdW1wIHdoZW4gdmlldyBlbGVtZW50IGlzIHJlbW92ZWRcblx0XHRcdGNsZWFyVmlldygpO1xuXHRcdH1cblxuXHRcdC8vIGlmIHZpZXdUeXBlIGNoYW5nZWQsIG9yIHRoZSB2aWV3IHdhcyBuZXZlciBjcmVhdGVkLCBjcmVhdGUgYSBmcmVzaCB2aWV3XG5cdFx0aWYgKCFjdXJyZW50VmlldyAmJiB2aWV3VHlwZSkge1xuXHRcdFx0Y3VycmVudFZpZXcgPSB0LnZpZXcgPVxuXHRcdFx0XHR2aWV3c0J5VHlwZVt2aWV3VHlwZV0gfHxcblx0XHRcdFx0KHZpZXdzQnlUeXBlW3ZpZXdUeXBlXSA9IHQuaW5zdGFudGlhdGVWaWV3KHZpZXdUeXBlKSk7XG5cblx0XHRcdGN1cnJlbnRWaWV3LnNldEVsZW1lbnQoXG5cdFx0XHRcdCQoXCI8ZGl2IGNsYXNzPSdmYy12aWV3IGZjLVwiICsgdmlld1R5cGUgKyBcIi12aWV3JyAvPlwiKS5hcHBlbmRUbyhjb250ZW50KVxuXHRcdFx0KTtcblx0XHRcdHRvb2xiYXJzTWFuYWdlci5wcm94eUNhbGwoJ2FjdGl2YXRlQnV0dG9uJywgdmlld1R5cGUpO1xuXHRcdH1cblxuXHRcdGlmIChjdXJyZW50Vmlldykge1xuXG5cdFx0XHQvLyBpbiBjYXNlIHRoZSB2aWV3IHNob3VsZCByZW5kZXIgYSBwZXJpb2Qgb2YgdGltZSB0aGF0IGlzIGNvbXBsZXRlbHkgaGlkZGVuXG5cdFx0XHRkYXRlID0gY3VycmVudFZpZXcubWFzc2FnZUN1cnJlbnREYXRlKGRhdGUpO1xuXG5cdFx0XHQvLyByZW5kZXIgb3IgcmVyZW5kZXIgdGhlIHZpZXdcblx0XHRcdGlmIChcblx0XHRcdFx0IWN1cnJlbnRWaWV3LmlzRGF0ZVNldCB8fFxuXHRcdFx0XHQhKCAvLyBOT1Qgd2l0aGluIGludGVydmFsIHJhbmdlIHNpZ25hbHMgYW4gaW1wbGljaXQgZGF0ZSB3aW5kb3cgY2hhbmdlXG5cdFx0XHRcdFx0ZGF0ZSA+PSBjdXJyZW50Vmlldy5pbnRlcnZhbFN0YXJ0ICYmXG5cdFx0XHRcdFx0ZGF0ZSA8IGN1cnJlbnRWaWV3LmludGVydmFsRW5kXG5cdFx0XHRcdClcblx0XHRcdCkge1xuXHRcdFx0XHRpZiAoZWxlbWVudFZpc2libGUoKSkge1xuXG5cdFx0XHRcdFx0aWYgKGZvcmNlZFNjcm9sbCkge1xuXHRcdFx0XHRcdFx0Y3VycmVudFZpZXcuY2FwdHVyZUluaXRpYWxTY3JvbGwoZm9yY2VkU2Nyb2xsKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjdXJyZW50Vmlldy5zZXREYXRlKGRhdGUsIGZvcmNlZFNjcm9sbCk7XG5cblx0XHRcdFx0XHRpZiAoZm9yY2VkU2Nyb2xsKSB7XG5cdFx0XHRcdFx0XHRjdXJyZW50Vmlldy5yZWxlYXNlU2Nyb2xsKCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gbmVlZCB0byBkbyB0aGlzIGFmdGVyIFZpZXc6OnJlbmRlciwgc28gZGF0ZXMgYXJlIGNhbGN1bGF0ZWRcblx0XHRcdFx0XHQvLyBOT1RFOiB2aWV3IHVwZGF0ZXMgdGl0bGUgdGV4dCBwcm9hY3RpdmVseVxuXHRcdFx0XHRcdHVwZGF0ZVRvb2xiYXJzVG9kYXlCdXR0b24oKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmIChuZWVkc0NsZWFyVmlldykge1xuXHRcdFx0dGhhd0NvbnRlbnRIZWlnaHQoKTtcblx0XHR9XG5cblx0XHRpZ25vcmVXaW5kb3dSZXNpemUtLTtcblx0fVxuXG5cblx0Ly8gVW5yZW5kZXJzIHRoZSBjdXJyZW50IHZpZXcgYW5kIHJlZmxlY3RzIHRoaXMgY2hhbmdlIGluIHRoZSBIZWFkZXIuXG5cdC8vIFVucmVnc2l0ZXJzIHRoZSBgY3VycmVudFZpZXdgLCBidXQgZG9lcyBub3QgcmVtb3ZlIGZyb20gdmlld0J5VHlwZSBoYXNoLlxuXHRmdW5jdGlvbiBjbGVhclZpZXcoKSB7XG5cdFx0dG9vbGJhcnNNYW5hZ2VyLnByb3h5Q2FsbCgnZGVhY3RpdmF0ZUJ1dHRvbicsIGN1cnJlbnRWaWV3LnR5cGUpO1xuXHRcdGN1cnJlbnRWaWV3LnJlbW92ZUVsZW1lbnQoKTtcblx0XHRjdXJyZW50VmlldyA9IHQudmlldyA9IG51bGw7XG5cdH1cblxuXG5cdC8vIERlc3Ryb3lzIHRoZSB2aWV3LCBpbmNsdWRpbmcgdGhlIHZpZXcgb2JqZWN0LiBUaGVuLCByZS1pbnN0YW50aWF0ZXMgaXQgYW5kIHJlbmRlcnMgaXQuXG5cdC8vIE1haW50YWlucyB0aGUgc2FtZSBzY3JvbGwgc3RhdGUuXG5cdC8vIFRPRE86IG1haW50YWluIGFueSBvdGhlciB1c2VyLW1hbmlwdWxhdGVkIHN0YXRlLlxuXHRmdW5jdGlvbiByZWluaXRWaWV3KCkge1xuXHRcdGlnbm9yZVdpbmRvd1Jlc2l6ZSsrO1xuXHRcdGZyZWV6ZUNvbnRlbnRIZWlnaHQoKTtcblxuXHRcdHZhciB2aWV3VHlwZSA9IGN1cnJlbnRWaWV3LnR5cGU7XG5cdFx0dmFyIHNjcm9sbFN0YXRlID0gY3VycmVudFZpZXcucXVlcnlTY3JvbGwoKTtcblx0XHRjbGVhclZpZXcoKTtcblx0XHRjYWxjU2l6ZSgpO1xuXHRcdHJlbmRlclZpZXcodmlld1R5cGUsIHNjcm9sbFN0YXRlKTtcblxuXHRcdHRoYXdDb250ZW50SGVpZ2h0KCk7XG5cdFx0aWdub3JlV2luZG93UmVzaXplLS07XG5cdH1cblxuXG5cblx0Ly8gUmVzaXppbmdcblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG5cdHQuZ2V0U3VnZ2VzdGVkVmlld0hlaWdodCA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmIChzdWdnZXN0ZWRWaWV3SGVpZ2h0ID09PSB1bmRlZmluZWQpIHtcblx0XHRcdGNhbGNTaXplKCk7XG5cdFx0fVxuXHRcdHJldHVybiBzdWdnZXN0ZWRWaWV3SGVpZ2h0O1xuXHR9O1xuXG5cblx0dC5pc0hlaWdodEF1dG8gPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdC5vcHRpb25zLmNvbnRlbnRIZWlnaHQgPT09ICdhdXRvJyB8fCB0Lm9wdGlvbnMuaGVpZ2h0ID09PSAnYXV0byc7XG5cdH07XG5cblxuXHRmdW5jdGlvbiB1cGRhdGVTaXplKHNob3VsZFJlY2FsYykge1xuXHRcdGlmIChlbGVtZW50VmlzaWJsZSgpKSB7XG5cblx0XHRcdGlmIChzaG91bGRSZWNhbGMpIHtcblx0XHRcdFx0X2NhbGNTaXplKCk7XG5cdFx0XHR9XG5cblx0XHRcdGlnbm9yZVdpbmRvd1Jlc2l6ZSsrO1xuXHRcdFx0Y3VycmVudFZpZXcudXBkYXRlU2l6ZSh0cnVlKTsgLy8gaXNSZXNpemU9dHJ1ZS4gd2lsbCBwb2xsIGdldFN1Z2dlc3RlZFZpZXdIZWlnaHQoKSBhbmQgaXNIZWlnaHRBdXRvKClcblx0XHRcdGlnbm9yZVdpbmRvd1Jlc2l6ZS0tO1xuXG5cdFx0XHRyZXR1cm4gdHJ1ZTsgLy8gc2lnbmFsIHN1Y2Nlc3Ncblx0XHR9XG5cdH1cblxuXG5cdGZ1bmN0aW9uIGNhbGNTaXplKCkge1xuXHRcdGlmIChlbGVtZW50VmlzaWJsZSgpKSB7XG5cdFx0XHRfY2FsY1NpemUoKTtcblx0XHR9XG5cdH1cblxuXG5cdGZ1bmN0aW9uIF9jYWxjU2l6ZSgpIHsgLy8gYXNzdW1lcyBlbGVtZW50VmlzaWJsZVxuXHRcdHZhciBjb250ZW50SGVpZ2h0SW5wdXQgPSB0Lm9wdGlvbnMuY29udGVudEhlaWdodDtcblx0XHR2YXIgaGVpZ2h0SW5wdXQgPSB0Lm9wdGlvbnMuaGVpZ2h0O1xuXG5cdFx0aWYgKHR5cGVvZiBjb250ZW50SGVpZ2h0SW5wdXQgPT09ICdudW1iZXInKSB7IC8vIGV4aXN0cyBhbmQgbm90ICdhdXRvJ1xuXHRcdFx0c3VnZ2VzdGVkVmlld0hlaWdodCA9IGNvbnRlbnRIZWlnaHRJbnB1dDtcblx0XHR9XG5cdFx0ZWxzZSBpZiAodHlwZW9mIGNvbnRlbnRIZWlnaHRJbnB1dCA9PT0gJ2Z1bmN0aW9uJykgeyAvLyBleGlzdHMgYW5kIGlzIGEgZnVuY3Rpb25cblx0XHRcdHN1Z2dlc3RlZFZpZXdIZWlnaHQgPSBjb250ZW50SGVpZ2h0SW5wdXQoKTtcblx0XHR9XG5cdFx0ZWxzZSBpZiAodHlwZW9mIGhlaWdodElucHV0ID09PSAnbnVtYmVyJykgeyAvLyBleGlzdHMgYW5kIG5vdCAnYXV0bydcblx0XHRcdHN1Z2dlc3RlZFZpZXdIZWlnaHQgPSBoZWlnaHRJbnB1dCAtIHF1ZXJ5VG9vbGJhcnNIZWlnaHQoKTtcblx0XHR9XG5cdFx0ZWxzZSBpZiAodHlwZW9mIGhlaWdodElucHV0ID09PSAnZnVuY3Rpb24nKSB7IC8vIGV4aXN0cyBhbmQgaXMgYSBmdW5jdGlvblxuXHRcdFx0c3VnZ2VzdGVkVmlld0hlaWdodCA9IGhlaWdodElucHV0KCkgLSBxdWVyeVRvb2xiYXJzSGVpZ2h0KCk7XG5cdFx0fVxuXHRcdGVsc2UgaWYgKGhlaWdodElucHV0ID09PSAncGFyZW50JykgeyAvLyBzZXQgdG8gaGVpZ2h0IG9mIHBhcmVudCBlbGVtZW50XG5cdFx0XHRzdWdnZXN0ZWRWaWV3SGVpZ2h0ID0gZWxlbWVudC5wYXJlbnQoKS5oZWlnaHQoKSAtIHF1ZXJ5VG9vbGJhcnNIZWlnaHQoKTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRzdWdnZXN0ZWRWaWV3SGVpZ2h0ID0gTWF0aC5yb3VuZChjb250ZW50LndpZHRoKCkgLyBNYXRoLm1heCh0Lm9wdGlvbnMuYXNwZWN0UmF0aW8sIC41KSk7XG5cdFx0fVxuXHR9XG5cblxuXHRmdW5jdGlvbiBxdWVyeVRvb2xiYXJzSGVpZ2h0KCkge1xuXHRcdHJldHVybiB0b29sYmFyc01hbmFnZXIuaXRlbXMucmVkdWNlKGZ1bmN0aW9uKGFjY3VtdWxhdG9yLCB0b29sYmFyKSB7XG5cdFx0XHR2YXIgdG9vbGJhckhlaWdodCA9IHRvb2xiYXIuZWwgPyB0b29sYmFyLmVsLm91dGVySGVpZ2h0KHRydWUpIDogMDsgLy8gaW5jbHVkZXMgbWFyZ2luXG5cdFx0XHRyZXR1cm4gYWNjdW11bGF0b3IgKyB0b29sYmFySGVpZ2h0O1xuXHRcdH0sIDApO1xuXHR9XG5cblxuXHRmdW5jdGlvbiB3aW5kb3dSZXNpemUoZXYpIHtcblx0XHRpZiAoXG5cdFx0XHQhaWdub3JlV2luZG93UmVzaXplICYmXG5cdFx0XHRldi50YXJnZXQgPT09IHdpbmRvdyAmJiAvLyBzbyB3ZSBkb24ndCBwcm9jZXNzIGpxdWkgXCJyZXNpemVcIiBldmVudHMgdGhhdCBoYXZlIGJ1YmJsZWQgdXBcblx0XHRcdGN1cnJlbnRWaWV3LnN0YXJ0IC8vIHZpZXcgaGFzIGFscmVhZHkgYmVlbiByZW5kZXJlZFxuXHRcdCkge1xuXHRcdFx0aWYgKHVwZGF0ZVNpemUodHJ1ZSkpIHtcblx0XHRcdFx0Y3VycmVudFZpZXcucHVibGljbHlUcmlnZ2VyKCd3aW5kb3dSZXNpemUnLCBfZWxlbWVudCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblxuXG5cdC8qIEV2ZW50IFJlbmRlcmluZ1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHRmdW5jdGlvbiByZXJlbmRlckV2ZW50cygpIHsgLy8gQVBJIG1ldGhvZC4gZGVzdHJveXMgb2xkIGV2ZW50cyBpZiBwcmV2aW91c2x5IHJlbmRlcmVkLlxuXHRcdGlmIChlbGVtZW50VmlzaWJsZSgpKSB7XG5cdFx0XHR0LnJlcG9ydEV2ZW50Q2hhbmdlKCk7IC8vIHdpbGwgcmUtdHJhc21pdCBldmVudHMgdG8gdGhlIHZpZXcsIGNhdXNpbmcgYSByZXJlbmRlclxuXHRcdH1cblx0fVxuXG5cblxuXHQvKiBUb29sYmFyc1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHRmdW5jdGlvbiBidWlsZFRvb2xiYXJzKCkge1xuXHRcdHJldHVybiBbXG5cdFx0XHRuZXcgVG9vbGJhcih0LCBjb21wdXRlSGVhZGVyT3B0aW9ucygpKSxcblx0XHRcdG5ldyBUb29sYmFyKHQsIGNvbXB1dGVGb290ZXJPcHRpb25zKCkpXG5cdFx0XTtcblx0fVxuXG5cblx0ZnVuY3Rpb24gY29tcHV0ZUhlYWRlck9wdGlvbnMoKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGV4dHJhQ2xhc3NlczogJ2ZjLWhlYWRlci10b29sYmFyJyxcblx0XHRcdGxheW91dDogdC5vcHRpb25zLmhlYWRlclxuXHRcdH07XG5cdH1cblxuXG5cdGZ1bmN0aW9uIGNvbXB1dGVGb290ZXJPcHRpb25zKCkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRleHRyYUNsYXNzZXM6ICdmYy1mb290ZXItdG9vbGJhcicsXG5cdFx0XHRsYXlvdXQ6IHQub3B0aW9ucy5mb290ZXJcblx0XHR9O1xuXHR9XG5cblxuXHQvLyBjYW4gYmUgY2FsbGVkIHJlcGVhdGVkbHkgYW5kIEhlYWRlciB3aWxsIHJlcmVuZGVyXG5cdGZ1bmN0aW9uIHJlbmRlckhlYWRlcigpIHtcblx0XHRoZWFkZXIuc2V0VG9vbGJhck9wdGlvbnMoY29tcHV0ZUhlYWRlck9wdGlvbnMoKSk7XG5cdFx0aGVhZGVyLnJlbmRlcigpO1xuXHRcdGlmIChoZWFkZXIuZWwpIHtcblx0XHRcdGVsZW1lbnQucHJlcGVuZChoZWFkZXIuZWwpO1xuXHRcdH1cblx0fVxuXG5cblx0Ly8gY2FuIGJlIGNhbGxlZCByZXBlYXRlZGx5IGFuZCBGb290ZXIgd2lsbCByZXJlbmRlclxuXHRmdW5jdGlvbiByZW5kZXJGb290ZXIoKSB7XG5cdFx0Zm9vdGVyLnNldFRvb2xiYXJPcHRpb25zKGNvbXB1dGVGb290ZXJPcHRpb25zKCkpO1xuXHRcdGZvb3Rlci5yZW5kZXIoKTtcblx0XHRpZiAoZm9vdGVyLmVsKSB7XG5cdFx0XHRlbGVtZW50LmFwcGVuZChmb290ZXIuZWwpO1xuXHRcdH1cblx0fVxuXG5cblx0dC5zZXRUb29sYmFyc1RpdGxlID0gZnVuY3Rpb24odGl0bGUpIHtcblx0XHR0b29sYmFyc01hbmFnZXIucHJveHlDYWxsKCd1cGRhdGVUaXRsZScsIHRpdGxlKTtcblx0fTtcblxuXG5cdGZ1bmN0aW9uIHVwZGF0ZVRvb2xiYXJzVG9kYXlCdXR0b24oKSB7XG5cdFx0dmFyIG5vdyA9IHQuZ2V0Tm93KCk7XG5cdFx0aWYgKG5vdyA+PSBjdXJyZW50Vmlldy5pbnRlcnZhbFN0YXJ0ICYmIG5vdyA8IGN1cnJlbnRWaWV3LmludGVydmFsRW5kKSB7XG5cdFx0XHR0b29sYmFyc01hbmFnZXIucHJveHlDYWxsKCdkaXNhYmxlQnV0dG9uJywgJ3RvZGF5Jyk7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0dG9vbGJhcnNNYW5hZ2VyLnByb3h5Q2FsbCgnZW5hYmxlQnV0dG9uJywgJ3RvZGF5Jyk7XG5cdFx0fVxuXHR9XG5cblxuXG5cdC8qIFNlbGVjdGlvblxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyB0aGlzIHB1YmxpYyBtZXRob2QgcmVjZWl2ZXMgc3RhcnQvZW5kIGRhdGVzIGluIGFueSBmb3JtYXQsIHdpdGggYW55IHRpbWV6b25lXG5cdGZ1bmN0aW9uIHNlbGVjdCh6b25lZFN0YXJ0SW5wdXQsIHpvbmVkRW5kSW5wdXQpIHtcblx0XHRjdXJyZW50Vmlldy5zZWxlY3QoXG5cdFx0XHR0LmJ1aWxkU2VsZWN0U3Bhbi5hcHBseSh0LCBhcmd1bWVudHMpXG5cdFx0KTtcblx0fVxuXG5cblx0ZnVuY3Rpb24gdW5zZWxlY3QoKSB7IC8vIHNhZmUgdG8gYmUgY2FsbGVkIGJlZm9yZSByZW5kZXJWaWV3XG5cdFx0aWYgKGN1cnJlbnRWaWV3KSB7XG5cdFx0XHRjdXJyZW50Vmlldy51bnNlbGVjdCgpO1xuXHRcdH1cblx0fVxuXG5cblxuXHQvKiBEYXRlXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdGZ1bmN0aW9uIHByZXYoKSB7XG5cdFx0ZGF0ZSA9IGN1cnJlbnRWaWV3LmNvbXB1dGVQcmV2RGF0ZShkYXRlKTtcblx0XHRyZW5kZXJWaWV3KCk7XG5cdH1cblxuXG5cdGZ1bmN0aW9uIG5leHQoKSB7XG5cdFx0ZGF0ZSA9IGN1cnJlbnRWaWV3LmNvbXB1dGVOZXh0RGF0ZShkYXRlKTtcblx0XHRyZW5kZXJWaWV3KCk7XG5cdH1cblxuXG5cdGZ1bmN0aW9uIHByZXZZZWFyKCkge1xuXHRcdGRhdGUuYWRkKC0xLCAneWVhcnMnKTtcblx0XHRyZW5kZXJWaWV3KCk7XG5cdH1cblxuXG5cdGZ1bmN0aW9uIG5leHRZZWFyKCkge1xuXHRcdGRhdGUuYWRkKDEsICd5ZWFycycpO1xuXHRcdHJlbmRlclZpZXcoKTtcblx0fVxuXG5cblx0ZnVuY3Rpb24gdG9kYXkoKSB7XG5cdFx0ZGF0ZSA9IHQuZ2V0Tm93KCk7XG5cdFx0cmVuZGVyVmlldygpO1xuXHR9XG5cblxuXHRmdW5jdGlvbiBnb3RvRGF0ZSh6b25lZERhdGVJbnB1dCkge1xuXHRcdGRhdGUgPSB0Lm1vbWVudCh6b25lZERhdGVJbnB1dCkuc3RyaXBab25lKCk7XG5cdFx0cmVuZGVyVmlldygpO1xuXHR9XG5cblxuXHRmdW5jdGlvbiBpbmNyZW1lbnREYXRlKGRlbHRhKSB7XG5cdFx0ZGF0ZS5hZGQobW9tZW50LmR1cmF0aW9uKGRlbHRhKSk7XG5cdFx0cmVuZGVyVmlldygpO1xuXHR9XG5cblxuXHQvLyBGb3JjZXMgbmF2aWdhdGlvbiB0byBhIHZpZXcgZm9yIHRoZSBnaXZlbiBkYXRlLlxuXHQvLyBgdmlld1R5cGVgIGNhbiBiZSBhIHNwZWNpZmljIHZpZXcgbmFtZSBvciBhIGdlbmVyaWMgb25lIGxpa2UgXCJ3ZWVrXCIgb3IgXCJkYXlcIi5cblx0ZnVuY3Rpb24gem9vbVRvKG5ld0RhdGUsIHZpZXdUeXBlKSB7XG5cdFx0dmFyIHNwZWM7XG5cblx0XHR2aWV3VHlwZSA9IHZpZXdUeXBlIHx8ICdkYXknOyAvLyBkYXkgaXMgZGVmYXVsdCB6b29tXG5cdFx0c3BlYyA9IHQuZ2V0Vmlld1NwZWModmlld1R5cGUpIHx8IHQuZ2V0VW5pdFZpZXdTcGVjKHZpZXdUeXBlKTtcblxuXHRcdGRhdGUgPSBuZXdEYXRlLmNsb25lKCk7XG5cdFx0cmVuZGVyVmlldyhzcGVjID8gc3BlYy50eXBlIDogbnVsbCk7XG5cdH1cblxuXG5cdC8vIGZvciBleHRlcm5hbCBBUElcblx0ZnVuY3Rpb24gZ2V0RGF0ZSgpIHtcblx0XHRyZXR1cm4gdC5hcHBseVRpbWV6b25lKGRhdGUpOyAvLyBpbmZ1c2UgdGhlIGNhbGVuZGFyJ3MgdGltZXpvbmVcblx0fVxuXG5cblxuXHQvKiBIZWlnaHQgXCJGcmVlemluZ1wiXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdHQuZnJlZXplQ29udGVudEhlaWdodCA9IGZyZWV6ZUNvbnRlbnRIZWlnaHQ7XG5cdHQudGhhd0NvbnRlbnRIZWlnaHQgPSB0aGF3Q29udGVudEhlaWdodDtcblxuXHR2YXIgZnJlZXplQ29udGVudEhlaWdodERlcHRoID0gMDtcblxuXG5cdGZ1bmN0aW9uIGZyZWV6ZUNvbnRlbnRIZWlnaHQoKSB7XG5cdFx0aWYgKCEoZnJlZXplQ29udGVudEhlaWdodERlcHRoKyspKSB7XG5cdFx0XHRjb250ZW50LmNzcyh7XG5cdFx0XHRcdHdpZHRoOiAnMTAwJScsXG5cdFx0XHRcdGhlaWdodDogY29udGVudC5oZWlnaHQoKSxcblx0XHRcdFx0b3ZlcmZsb3c6ICdoaWRkZW4nXG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXG5cdGZ1bmN0aW9uIHRoYXdDb250ZW50SGVpZ2h0KCkge1xuXHRcdGlmICghKC0tZnJlZXplQ29udGVudEhlaWdodERlcHRoKSkge1xuXHRcdFx0Y29udGVudC5jc3Moe1xuXHRcdFx0XHR3aWR0aDogJycsXG5cdFx0XHRcdGhlaWdodDogJycsXG5cdFx0XHRcdG92ZXJmbG93OiAnJ1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblxuXG5cdC8qIE1pc2Ncblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0ZnVuY3Rpb24gZ2V0Q2FsZW5kYXIoKSB7XG5cdFx0cmV0dXJuIHQ7XG5cdH1cblxuXG5cdGZ1bmN0aW9uIGdldFZpZXcoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRWaWV3O1xuXHR9XG5cblxuXHRmdW5jdGlvbiBvcHRpb24obmFtZSwgdmFsdWUpIHtcblx0XHR2YXIgbmV3T3B0aW9uSGFzaDtcblxuXHRcdGlmICh0eXBlb2YgbmFtZSA9PT0gJ3N0cmluZycpIHtcblx0XHRcdGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7IC8vIGdldHRlclxuXHRcdFx0XHRyZXR1cm4gdC5vcHRpb25zW25hbWVdO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7IC8vIHNldHRlciBmb3IgaW5kaXZpZHVhbCBvcHRpb25cblx0XHRcdFx0bmV3T3B0aW9uSGFzaCA9IHt9O1xuXHRcdFx0XHRuZXdPcHRpb25IYXNoW25hbWVdID0gdmFsdWU7XG5cdFx0XHRcdHNldE9wdGlvbnMobmV3T3B0aW9uSGFzaCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVsc2UgaWYgKHR5cGVvZiBuYW1lID09PSAnb2JqZWN0JykgeyAvLyBjb21wb3VuZCBzZXR0ZXIgd2l0aCBvYmplY3QgaW5wdXRcblx0XHRcdHNldE9wdGlvbnMobmFtZSk7XG5cdFx0fVxuXHR9XG5cblxuXHRmdW5jdGlvbiBzZXRPcHRpb25zKG5ld09wdGlvbkhhc2gpIHtcblx0XHR2YXIgb3B0aW9uQ250ID0gMDtcblx0XHR2YXIgb3B0aW9uTmFtZTtcblxuXHRcdGZvciAob3B0aW9uTmFtZSBpbiBuZXdPcHRpb25IYXNoKSB7XG5cdFx0XHR0LmR5bmFtaWNPdmVycmlkZXNbb3B0aW9uTmFtZV0gPSBuZXdPcHRpb25IYXNoW29wdGlvbk5hbWVdO1xuXHRcdH1cblxuXHRcdHQudmlld1NwZWNDYWNoZSA9IHt9OyAvLyB0aGUgZHluYW1pYyBvdmVycmlkZSBpbnZhbGlkYXRlcyB0aGUgb3B0aW9ucyBpbiB0aGlzIGNhY2hlLCBzbyBqdXN0IGNsZWFyIGl0XG5cdFx0dC5wb3B1bGF0ZU9wdGlvbnNIYXNoKCk7IC8vIHRoaXMub3B0aW9ucyBuZWVkcyB0byBiZSByZWNvbXB1dGVkIGFmdGVyIHRoZSBkeW5hbWljIG92ZXJyaWRlXG5cblx0XHQvLyB0cmlnZ2VyIGhhbmRsZXJzIGFmdGVyIHRoaXMub3B0aW9ucyBoYXMgYmVlbiB1cGRhdGVkXG5cdFx0Zm9yIChvcHRpb25OYW1lIGluIG5ld09wdGlvbkhhc2gpIHtcblx0XHRcdHQudHJpZ2dlck9wdGlvbkhhbmRsZXJzKG9wdGlvbk5hbWUpOyAvLyByZWNhbGwgYmluZE9wdGlvbi9iaW5kT3B0aW9uc1xuXHRcdFx0b3B0aW9uQ250Kys7XG5cdFx0fVxuXG5cdFx0Ly8gc3BlY2lhbC1jYXNlIGhhbmRsaW5nIG9mIHNpbmdsZSBvcHRpb24gY2hhbmdlLlxuXHRcdC8vIGlmIG9ubHkgb25lIG9wdGlvbiBjaGFuZ2UsIGBvcHRpb25OYW1lYCB3aWxsIGJlIGl0cyBuYW1lLlxuXHRcdGlmIChvcHRpb25DbnQgPT09IDEpIHtcblx0XHRcdGlmIChvcHRpb25OYW1lID09PSAnaGVpZ2h0JyB8fCBvcHRpb25OYW1lID09PSAnY29udGVudEhlaWdodCcgfHwgb3B0aW9uTmFtZSA9PT0gJ2FzcGVjdFJhdGlvJykge1xuXHRcdFx0XHR1cGRhdGVTaXplKHRydWUpOyAvLyB0cnVlID0gYWxsb3cgcmVjYWxjdWxhdGlvbiBvZiBoZWlnaHRcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAob3B0aW9uTmFtZSA9PT0gJ2RlZmF1bHREYXRlJykge1xuXHRcdFx0XHRyZXR1cm47IC8vIGNhbid0IGNoYW5nZSBkYXRlIHRoaXMgd2F5LiB1c2UgZ290b0RhdGUgaW5zdGVhZFxuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAob3B0aW9uTmFtZSA9PT0gJ2J1c2luZXNzSG91cnMnKSB7XG5cdFx0XHRcdGlmIChjdXJyZW50Vmlldykge1xuXHRcdFx0XHRcdGN1cnJlbnRWaWV3LnVucmVuZGVyQnVzaW5lc3NIb3VycygpO1xuXHRcdFx0XHRcdGN1cnJlbnRWaWV3LnJlbmRlckJ1c2luZXNzSG91cnMoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmIChvcHRpb25OYW1lID09PSAndGltZXpvbmUnKSB7XG5cdFx0XHRcdHQucmV6b25lQXJyYXlFdmVudFNvdXJjZXMoKTtcblx0XHRcdFx0dC5yZWZldGNoRXZlbnRzKCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBjYXRjaC1hbGwuIHJlcmVuZGVyIHRoZSBoZWFkZXIgYW5kIGZvb3RlciBhbmQgcmVidWlsZC9yZXJlbmRlciB0aGUgY3VycmVudCB2aWV3XG5cdFx0cmVuZGVySGVhZGVyKCk7XG5cdFx0cmVuZGVyRm9vdGVyKCk7XG5cdFx0dmlld3NCeVR5cGUgPSB7fTsgLy8gZXZlbiBub24tY3VycmVudCB2aWV3cyB3aWxsIGJlIGFmZmVjdGVkIGJ5IHRoaXMgb3B0aW9uIGNoYW5nZS4gZG8gYmVmb3JlIHJlcmVuZGVyXG5cdFx0cmVpbml0VmlldygpO1xuXHR9XG5cblxuXHRmdW5jdGlvbiBwdWJsaWNseVRyaWdnZXIobmFtZSwgdGhpc09iaikge1xuXHRcdHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTtcblxuXHRcdHRoaXNPYmogPSB0aGlzT2JqIHx8IF9lbGVtZW50O1xuXHRcdHRoaXMudHJpZ2dlcldpdGgobmFtZSwgdGhpc09iaiwgYXJncyk7IC8vIEVtaXR0ZXIncyBtZXRob2RcblxuXHRcdGlmICh0Lm9wdGlvbnNbbmFtZV0pIHtcblx0XHRcdHJldHVybiB0Lm9wdGlvbnNbbmFtZV0uYXBwbHkodGhpc09iaiwgYXJncyk7XG5cdFx0fVxuXHR9XG5cblx0dC5pbml0aWFsaXplKCk7XG59XG5cbjs7XG4vKlxuT3B0aW9ucyBiaW5kaW5nL3RyaWdnZXJpbmcgc3lzdGVtLlxuKi9cbkNhbGVuZGFyLm1peGluKHtcblxuXHQvLyBBIG1hcCBvZiBvcHRpb24gbmFtZXMgdG8gYXJyYXlzIG9mIGhhbmRsZXIgb2JqZWN0cy4gSW5pdGlhbGl6ZWQgdG8ge30gaW4gQ2FsZW5kYXIuXG5cdC8vIEZvcm1hdCBmb3IgYSBoYW5kbGVyIG9iamVjdDpcblx0Ly8ge1xuXHQvLyAgIGZ1bmMgLy8gY2FsbGJhY2sgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHVwb24gY2hhbmdlXG5cdC8vICAgbmFtZXMgLy8gb3B0aW9uIG5hbWVzIHdob3NlIHZhbHVlcyBzaG91bGQgYmUgZ2l2ZW4gdG8gZnVuY1xuXHQvLyB9XG5cdG9wdGlvbkhhbmRsZXJzOiBudWxsLFxuXG5cdC8vIENhbGxzIGhhbmRsZXJGdW5jIGltbWVkaWF0ZWx5LCBhbmQgd2hlbiB0aGUgZ2l2ZW4gb3B0aW9uIGhhcyBjaGFuZ2VkLlxuXHQvLyBoYW5kbGVyRnVuYyB3aWxsIGJlIGdpdmVuIHRoZSBvcHRpb24gdmFsdWUuXG5cdGJpbmRPcHRpb246IGZ1bmN0aW9uKG9wdGlvbk5hbWUsIGhhbmRsZXJGdW5jKSB7XG5cdFx0dGhpcy5iaW5kT3B0aW9ucyhbIG9wdGlvbk5hbWUgXSwgaGFuZGxlckZ1bmMpO1xuXHR9LFxuXG5cdC8vIENhbGxzIGhhbmRsZXJGdW5jIGltbWVkaWF0ZWx5LCBhbmQgd2hlbiBhbnkgb2YgdGhlIGdpdmVuIG9wdGlvbnMgY2hhbmdlLlxuXHQvLyBoYW5kbGVyRnVuYyB3aWxsIGJlIGdpdmVuIGVhY2ggb3B0aW9uIHZhbHVlIGFzIG9yZGVyZWQgZnVuY3Rpb24gYXJndW1lbnRzLlxuXHRiaW5kT3B0aW9uczogZnVuY3Rpb24ob3B0aW9uTmFtZXMsIGhhbmRsZXJGdW5jKSB7XG5cdFx0dmFyIGhhbmRsZXJPYmogPSB7IGZ1bmM6IGhhbmRsZXJGdW5jLCBuYW1lczogb3B0aW9uTmFtZXMgfTtcblx0XHR2YXIgaTtcblxuXHRcdGZvciAoaSA9IDA7IGkgPCBvcHRpb25OYW1lcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dGhpcy5yZWdpc3Rlck9wdGlvbkhhbmRsZXJPYmoob3B0aW9uTmFtZXNbaV0sIGhhbmRsZXJPYmopO1xuXHRcdH1cblxuXHRcdHRoaXMudHJpZ2dlck9wdGlvbkhhbmRsZXJPYmooaGFuZGxlck9iaik7XG5cdH0sXG5cblx0Ly8gUHV0cyB0aGUgZ2l2ZW4gaGFuZGxlciBvYmplY3QgaW50byB0aGUgaW50ZXJuYWwgaGFzaFxuXHRyZWdpc3Rlck9wdGlvbkhhbmRsZXJPYmo6IGZ1bmN0aW9uKG9wdGlvbk5hbWUsIGhhbmRsZXJPYmopIHtcblx0XHQodGhpcy5vcHRpb25IYW5kbGVyc1tvcHRpb25OYW1lXSB8fCAodGhpcy5vcHRpb25IYW5kbGVyc1tvcHRpb25OYW1lXSA9IFtdKSlcblx0XHRcdC5wdXNoKGhhbmRsZXJPYmopO1xuXHR9LFxuXG5cdC8vIFJlcG9ydHMgdGhhdCB0aGUgZ2l2ZW4gb3B0aW9uIGhhcyBjaGFuZ2VkLCBhbmQgY2FsbHMgYWxsIGFwcHJvcHJpYXRlIGhhbmRsZXJzLlxuXHR0cmlnZ2VyT3B0aW9uSGFuZGxlcnM6IGZ1bmN0aW9uKG9wdGlvbk5hbWUpIHtcblx0XHR2YXIgaGFuZGxlck9ianMgPSB0aGlzLm9wdGlvbkhhbmRsZXJzW29wdGlvbk5hbWVdIHx8IFtdO1xuXHRcdHZhciBpO1xuXG5cdFx0Zm9yIChpID0gMDsgaSA8IGhhbmRsZXJPYmpzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR0aGlzLnRyaWdnZXJPcHRpb25IYW5kbGVyT2JqKGhhbmRsZXJPYmpzW2ldKTtcblx0XHR9XG5cdH0sXG5cblx0Ly8gQ2FsbHMgdGhlIGNhbGxiYWNrIGZvciBhIHNwZWNpZmljIGhhbmRsZXIgb2JqZWN0LCBwYXNzaW5nIGluIHRoZSBhcHByb3ByaWF0ZSBhcmd1bWVudHMuXG5cdHRyaWdnZXJPcHRpb25IYW5kbGVyT2JqOiBmdW5jdGlvbihoYW5kbGVyT2JqKSB7XG5cdFx0dmFyIG9wdGlvbk5hbWVzID0gaGFuZGxlck9iai5uYW1lcztcblx0XHR2YXIgb3B0aW9uVmFsdWVzID0gW107XG5cdFx0dmFyIGk7XG5cblx0XHRmb3IgKGkgPSAwOyBpIDwgb3B0aW9uTmFtZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdG9wdGlvblZhbHVlcy5wdXNoKHRoaXMub3B0aW9uc1tvcHRpb25OYW1lc1tpXV0pO1xuXHRcdH1cblxuXHRcdGhhbmRsZXJPYmouZnVuYy5hcHBseSh0aGlzLCBvcHRpb25WYWx1ZXMpOyAvLyBtYWludGFpbiB0aGUgQ2FsZW5kYXIncyBgdGhpc2AgY29udGV4dFxuXHR9XG5cbn0pO1xuXG47O1xuXG5DYWxlbmRhci5kZWZhdWx0cyA9IHtcblxuXHR0aXRsZVJhbmdlU2VwYXJhdG9yOiAnIFxcdTIwMTMgJywgLy8gZW4gZGFzaFxuXHRtb250aFllYXJGb3JtYXQ6ICdNTU1NIFlZWVknLCAvLyByZXF1aXJlZCBmb3IgZW4uIG90aGVyIGxvY2FsZXMgcmVseSBvbiBkYXRlcGlja2VyIGNvbXB1dGFibGUgb3B0aW9uXG5cblx0ZGVmYXVsdFRpbWVkRXZlbnREdXJhdGlvbjogJzAyOjAwOjAwJyxcblx0ZGVmYXVsdEFsbERheUV2ZW50RHVyYXRpb246IHsgZGF5czogMSB9LFxuXHRmb3JjZUV2ZW50RHVyYXRpb246IGZhbHNlLFxuXHRuZXh0RGF5VGhyZXNob2xkOiAnMDk6MDA6MDAnLCAvLyA5YW1cblxuXHQvLyBkaXNwbGF5XG5cdGRlZmF1bHRWaWV3OiAnbW9udGgnLFxuXHRhc3BlY3RSYXRpbzogMS4zNSxcblx0aGVhZGVyOiB7XG5cdFx0bGVmdDogJ3RpdGxlJyxcblx0XHRjZW50ZXI6ICcnLFxuXHRcdHJpZ2h0OiAndG9kYXkgcHJldixuZXh0J1xuXHR9LFxuXHR3ZWVrZW5kczogdHJ1ZSxcblx0d2Vla051bWJlcnM6IGZhbHNlLFxuXG5cdHdlZWtOdW1iZXJUaXRsZTogJ1cnLFxuXHR3ZWVrTnVtYmVyQ2FsY3VsYXRpb246ICdsb2NhbCcsXG5cblx0Ly9lZGl0YWJsZTogZmFsc2UsXG5cblx0Ly9ub3dJbmRpY2F0b3I6IGZhbHNlLFxuXG5cdHNjcm9sbFRpbWU6ICcwNjowMDowMCcsXG5cblx0Ly8gZXZlbnQgYWpheFxuXHRsYXp5RmV0Y2hpbmc6IHRydWUsXG5cdHN0YXJ0UGFyYW06ICdzdGFydCcsXG5cdGVuZFBhcmFtOiAnZW5kJyxcblx0dGltZXpvbmVQYXJhbTogJ3RpbWV6b25lJyxcblxuXHR0aW1lem9uZTogZmFsc2UsXG5cblx0Ly9hbGxEYXlEZWZhdWx0OiB1bmRlZmluZWQsXG5cblx0Ly8gbG9jYWxlXG5cdGlzUlRMOiBmYWxzZSxcblx0YnV0dG9uVGV4dDoge1xuXHRcdHByZXY6IFwicHJldlwiLFxuXHRcdG5leHQ6IFwibmV4dFwiLFxuXHRcdHByZXZZZWFyOiBcInByZXYgeWVhclwiLFxuXHRcdG5leHRZZWFyOiBcIm5leHQgeWVhclwiLFxuXHRcdHllYXI6ICd5ZWFyJywgLy8gVE9ETzogbG9jYWxlIGZpbGVzIG5lZWQgdG8gc3BlY2lmeSB0aGlzXG5cdFx0dG9kYXk6ICd0b2RheScsXG5cdFx0bW9udGg6ICdtb250aCcsXG5cdFx0d2VlazogJ3dlZWsnLFxuXHRcdGRheTogJ2RheSdcblx0fSxcblxuXHRidXR0b25JY29uczoge1xuXHRcdHByZXY6ICdsZWZ0LXNpbmdsZS1hcnJvdycsXG5cdFx0bmV4dDogJ3JpZ2h0LXNpbmdsZS1hcnJvdycsXG5cdFx0cHJldlllYXI6ICdsZWZ0LWRvdWJsZS1hcnJvdycsXG5cdFx0bmV4dFllYXI6ICdyaWdodC1kb3VibGUtYXJyb3cnXG5cdH0sXG5cblx0YWxsRGF5VGV4dDogJ2FsbC1kYXknLFxuXG5cdC8vIGpxdWVyeS11aSB0aGVtaW5nXG5cdHRoZW1lOiBmYWxzZSxcblx0dGhlbWVCdXR0b25JY29uczoge1xuXHRcdHByZXY6ICdjaXJjbGUtdHJpYW5nbGUtdycsXG5cdFx0bmV4dDogJ2NpcmNsZS10cmlhbmdsZS1lJyxcblx0XHRwcmV2WWVhcjogJ3NlZWstcHJldicsXG5cdFx0bmV4dFllYXI6ICdzZWVrLW5leHQnXG5cdH0sXG5cblx0Ly9ldmVudFJlc2l6YWJsZUZyb21TdGFydDogZmFsc2UsXG5cdGRyYWdPcGFjaXR5OiAuNzUsXG5cdGRyYWdSZXZlcnREdXJhdGlvbjogNTAwLFxuXHRkcmFnU2Nyb2xsOiB0cnVlLFxuXG5cdC8vc2VsZWN0YWJsZTogZmFsc2UsXG5cdHVuc2VsZWN0QXV0bzogdHJ1ZSxcblxuXHRkcm9wQWNjZXB0OiAnKicsXG5cblx0ZXZlbnRPcmRlcjogJ3RpdGxlJyxcblx0Ly9ldmVudFJlbmRlcldhaXQ6IG51bGwsXG5cblx0ZXZlbnRMaW1pdDogZmFsc2UsXG5cdGV2ZW50TGltaXRUZXh0OiAnbW9yZScsXG5cdGV2ZW50TGltaXRDbGljazogJ3BvcG92ZXInLFxuXHRkYXlQb3BvdmVyRm9ybWF0OiAnTEwnLFxuXG5cdGhhbmRsZVdpbmRvd1Jlc2l6ZTogdHJ1ZSxcblx0d2luZG93UmVzaXplRGVsYXk6IDEwMCwgLy8gbWlsbGlzZWNvbmRzIGJlZm9yZSBhbiB1cGRhdGVTaXplIGhhcHBlbnNcblxuXHRsb25nUHJlc3NEZWxheTogMTAwMFxuXG59O1xuXG5cbkNhbGVuZGFyLmVuZ2xpc2hEZWZhdWx0cyA9IHsgLy8gdXNlZCBieSBsb2NhbGUuanNcblx0ZGF5UG9wb3ZlckZvcm1hdDogJ2RkZGQsIE1NTU0gRCdcbn07XG5cblxuQ2FsZW5kYXIucnRsRGVmYXVsdHMgPSB7IC8vIHJpZ2h0LXRvLWxlZnQgZGVmYXVsdHNcblx0aGVhZGVyOiB7IC8vIFRPRE86IHNtYXJ0ZXIgc29sdXRpb24gKGZpcnN0L2NlbnRlci9sYXN0ID8pXG5cdFx0bGVmdDogJ25leHQscHJldiB0b2RheScsXG5cdFx0Y2VudGVyOiAnJyxcblx0XHRyaWdodDogJ3RpdGxlJ1xuXHR9LFxuXHRidXR0b25JY29uczoge1xuXHRcdHByZXY6ICdyaWdodC1zaW5nbGUtYXJyb3cnLFxuXHRcdG5leHQ6ICdsZWZ0LXNpbmdsZS1hcnJvdycsXG5cdFx0cHJldlllYXI6ICdyaWdodC1kb3VibGUtYXJyb3cnLFxuXHRcdG5leHRZZWFyOiAnbGVmdC1kb3VibGUtYXJyb3cnXG5cdH0sXG5cdHRoZW1lQnV0dG9uSWNvbnM6IHtcblx0XHRwcmV2OiAnY2lyY2xlLXRyaWFuZ2xlLWUnLFxuXHRcdG5leHQ6ICdjaXJjbGUtdHJpYW5nbGUtdycsXG5cdFx0bmV4dFllYXI6ICdzZWVrLXByZXYnLFxuXHRcdHByZXZZZWFyOiAnc2Vlay1uZXh0J1xuXHR9XG59O1xuXG47O1xuXG52YXIgbG9jYWxlT3B0aW9uSGFzaCA9IEZDLmxvY2FsZXMgPSB7fTsgLy8gaW5pdGlhbGl6ZSBhbmQgZXhwb3NlXG5cblxuLy8gVE9ETzogZG9jdW1lbnQgdGhlIHN0cnVjdHVyZSBhbmQgb3JkZXJpbmcgb2YgYSBGdWxsQ2FsZW5kYXIgbG9jYWxlIGZpbGVcblxuXG4vLyBJbml0aWFsaXplIGpRdWVyeSBVSSBkYXRlcGlja2VyIHRyYW5zbGF0aW9ucyB3aGlsZSB1c2luZyBzb21lIG9mIHRoZSB0cmFuc2xhdGlvbnNcbi8vIFdpbGwgc2V0IHRoaXMgYXMgdGhlIGRlZmF1bHQgbG9jYWxlcyBmb3IgZGF0ZXBpY2tlci5cbkZDLmRhdGVwaWNrZXJMb2NhbGUgPSBmdW5jdGlvbihsb2NhbGVDb2RlLCBkcExvY2FsZUNvZGUsIGRwT3B0aW9ucykge1xuXG5cdC8vIGdldCB0aGUgRnVsbENhbGVuZGFyIGludGVybmFsIG9wdGlvbiBoYXNoIGZvciB0aGlzIGxvY2FsZS4gY3JlYXRlIGlmIG5lY2Vzc2FyeVxuXHR2YXIgZmNPcHRpb25zID0gbG9jYWxlT3B0aW9uSGFzaFtsb2NhbGVDb2RlXSB8fCAobG9jYWxlT3B0aW9uSGFzaFtsb2NhbGVDb2RlXSA9IHt9KTtcblxuXHQvLyB0cmFuc2ZlciBzb21lIHNpbXBsZSBvcHRpb25zIGZyb20gZGF0ZXBpY2tlciB0byBmY1xuXHRmY09wdGlvbnMuaXNSVEwgPSBkcE9wdGlvbnMuaXNSVEw7XG5cdGZjT3B0aW9ucy53ZWVrTnVtYmVyVGl0bGUgPSBkcE9wdGlvbnMud2Vla0hlYWRlcjtcblxuXHQvLyBjb21wdXRlIHNvbWUgbW9yZSBjb21wbGV4IG9wdGlvbnMgZnJvbSBkYXRlcGlja2VyXG5cdCQuZWFjaChkcENvbXB1dGFibGVPcHRpb25zLCBmdW5jdGlvbihuYW1lLCBmdW5jKSB7XG5cdFx0ZmNPcHRpb25zW25hbWVdID0gZnVuYyhkcE9wdGlvbnMpO1xuXHR9KTtcblxuXHQvLyBpcyBqUXVlcnkgVUkgRGF0ZXBpY2tlciBpcyBvbiB0aGUgcGFnZT9cblx0aWYgKCQuZGF0ZXBpY2tlcikge1xuXG5cdFx0Ly8gUmVnaXN0ZXIgdGhlIGxvY2FsZSBkYXRhLlxuXHRcdC8vIEZ1bGxDYWxlbmRhciBhbmQgTW9tZW50SlMgdXNlIGxvY2FsZSBjb2RlcyBsaWtlIFwicHQtYnJcIiBidXQgRGF0ZXBpY2tlclxuXHRcdC8vIGRvZXMgaXQgbGlrZSBcInB0LUJSXCIgb3IgaWYgaXQgZG9lc24ndCBoYXZlIHRoZSBsb2NhbGUsIG1heWJlIGp1c3QgXCJwdFwiLlxuXHRcdC8vIE1ha2UgYW4gYWxpYXMgc28gdGhlIGxvY2FsZSBjYW4gYmUgcmVmZXJlbmNlZCBlaXRoZXIgd2F5LlxuXHRcdCQuZGF0ZXBpY2tlci5yZWdpb25hbFtkcExvY2FsZUNvZGVdID1cblx0XHRcdCQuZGF0ZXBpY2tlci5yZWdpb25hbFtsb2NhbGVDb2RlXSA9IC8vIGFsaWFzXG5cdFx0XHRcdGRwT3B0aW9ucztcblxuXHRcdC8vIEFsaWFzICdlbicgdG8gdGhlIGRlZmF1bHQgbG9jYWxlIGRhdGEuIERvIHRoaXMgZXZlcnkgdGltZS5cblx0XHQkLmRhdGVwaWNrZXIucmVnaW9uYWwuZW4gPSAkLmRhdGVwaWNrZXIucmVnaW9uYWxbJyddO1xuXG5cdFx0Ly8gU2V0IGFzIERhdGVwaWNrZXIncyBnbG9iYWwgZGVmYXVsdHMuXG5cdFx0JC5kYXRlcGlja2VyLnNldERlZmF1bHRzKGRwT3B0aW9ucyk7XG5cdH1cbn07XG5cblxuLy8gU2V0cyBGdWxsQ2FsZW5kYXItc3BlY2lmaWMgdHJhbnNsYXRpb25zLiBXaWxsIHNldCB0aGUgbG9jYWxlcyBhcyB0aGUgZ2xvYmFsIGRlZmF1bHQuXG5GQy5sb2NhbGUgPSBmdW5jdGlvbihsb2NhbGVDb2RlLCBuZXdGY09wdGlvbnMpIHtcblx0dmFyIGZjT3B0aW9ucztcblx0dmFyIG1vbU9wdGlvbnM7XG5cblx0Ly8gZ2V0IHRoZSBGdWxsQ2FsZW5kYXIgaW50ZXJuYWwgb3B0aW9uIGhhc2ggZm9yIHRoaXMgbG9jYWxlLiBjcmVhdGUgaWYgbmVjZXNzYXJ5XG5cdGZjT3B0aW9ucyA9IGxvY2FsZU9wdGlvbkhhc2hbbG9jYWxlQ29kZV0gfHwgKGxvY2FsZU9wdGlvbkhhc2hbbG9jYWxlQ29kZV0gPSB7fSk7XG5cblx0Ly8gcHJvdmlkZWQgbmV3IG9wdGlvbnMgZm9yIHRoaXMgbG9jYWxlcz8gbWVyZ2UgdGhlbSBpblxuXHRpZiAobmV3RmNPcHRpb25zKSB7XG5cdFx0ZmNPcHRpb25zID0gbG9jYWxlT3B0aW9uSGFzaFtsb2NhbGVDb2RlXSA9IG1lcmdlT3B0aW9ucyhbIGZjT3B0aW9ucywgbmV3RmNPcHRpb25zIF0pO1xuXHR9XG5cblx0Ly8gY29tcHV0ZSBsb2NhbGUgb3B0aW9ucyB0aGF0IHdlcmVuJ3QgZGVmaW5lZC5cblx0Ly8gYWx3YXlzIGRvIHRoaXMuIG5ld0ZjT3B0aW9ucyBjYW4gYmUgdW5kZWZpbmVkIHdoZW4gaW5pdGlhbGl6aW5nIGZyb20gaTE4biBmaWxlLFxuXHQvLyBzbyBubyB3YXkgdG8gdGVsbCBpZiB0aGlzIGlzIGFuIGluaXRpYWxpemF0aW9uIG9yIGEgZGVmYXVsdC1zZXR0aW5nLlxuXHRtb21PcHRpb25zID0gZ2V0TW9tZW50TG9jYWxlRGF0YShsb2NhbGVDb2RlKTsgLy8gd2lsbCBmYWxsIGJhY2sgdG8gZW5cblx0JC5lYWNoKG1vbUNvbXB1dGFibGVPcHRpb25zLCBmdW5jdGlvbihuYW1lLCBmdW5jKSB7XG5cdFx0aWYgKGZjT3B0aW9uc1tuYW1lXSA9PSBudWxsKSB7XG5cdFx0XHRmY09wdGlvbnNbbmFtZV0gPSBmdW5jKG1vbU9wdGlvbnMsIGZjT3B0aW9ucyk7XG5cdFx0fVxuXHR9KTtcblxuXHQvLyBzZXQgaXQgYXMgdGhlIGRlZmF1bHQgbG9jYWxlIGZvciBGdWxsQ2FsZW5kYXJcblx0Q2FsZW5kYXIuZGVmYXVsdHMubG9jYWxlID0gbG9jYWxlQ29kZTtcbn07XG5cblxuLy8gTk9URTogY2FuJ3QgZ3VhcmFudGVlIGFueSBvZiB0aGVzZSBjb21wdXRhdGlvbnMgd2lsbCBydW4gYmVjYXVzZSBub3QgZXZlcnkgbG9jYWxlIGhhcyBkYXRlcGlja2VyXG4vLyBjb25maWdzLCBzbyBtYWtlIHN1cmUgdGhlcmUgYXJlIEVuZ2xpc2ggZmFsbGJhY2tzIGZvciB0aGVzZSBpbiB0aGUgZGVmYXVsdHMgZmlsZS5cbnZhciBkcENvbXB1dGFibGVPcHRpb25zID0ge1xuXG5cdGJ1dHRvblRleHQ6IGZ1bmN0aW9uKGRwT3B0aW9ucykge1xuXHRcdHJldHVybiB7XG5cdFx0XHQvLyB0aGUgdHJhbnNsYXRpb25zIHNvbWV0aW1lcyB3cm9uZ2x5IGNvbnRhaW4gSFRNTCBlbnRpdGllc1xuXHRcdFx0cHJldjogc3RyaXBIdG1sRW50aXRpZXMoZHBPcHRpb25zLnByZXZUZXh0KSxcblx0XHRcdG5leHQ6IHN0cmlwSHRtbEVudGl0aWVzKGRwT3B0aW9ucy5uZXh0VGV4dCksXG5cdFx0XHR0b2RheTogc3RyaXBIdG1sRW50aXRpZXMoZHBPcHRpb25zLmN1cnJlbnRUZXh0KVxuXHRcdH07XG5cdH0sXG5cblx0Ly8gUHJvZHVjZXMgZm9ybWF0IHN0cmluZ3MgbGlrZSBcIk1NTU0gWVlZWVwiIC0+IFwiU2VwdGVtYmVyIDIwMTRcIlxuXHRtb250aFllYXJGb3JtYXQ6IGZ1bmN0aW9uKGRwT3B0aW9ucykge1xuXHRcdHJldHVybiBkcE9wdGlvbnMuc2hvd01vbnRoQWZ0ZXJZZWFyID9cblx0XHRcdCdZWVlZWycgKyBkcE9wdGlvbnMueWVhclN1ZmZpeCArICddIE1NTU0nIDpcblx0XHRcdCdNTU1NIFlZWVlbJyArIGRwT3B0aW9ucy55ZWFyU3VmZml4ICsgJ10nO1xuXHR9XG5cbn07XG5cbnZhciBtb21Db21wdXRhYmxlT3B0aW9ucyA9IHtcblxuXHQvLyBQcm9kdWNlcyBmb3JtYXQgc3RyaW5ncyBsaWtlIFwiZGRkIE0vRFwiIC0+IFwiRnJpIDkvMTVcIlxuXHRkYXlPZk1vbnRoRm9ybWF0OiBmdW5jdGlvbihtb21PcHRpb25zLCBmY09wdGlvbnMpIHtcblx0XHR2YXIgZm9ybWF0ID0gbW9tT3B0aW9ucy5sb25nRGF0ZUZvcm1hdCgnbCcpOyAvLyBmb3IgdGhlIGZvcm1hdCBsaWtlIFwiTS9EL1lZWVlcIlxuXG5cdFx0Ly8gc3RyaXAgdGhlIHllYXIgb2ZmIHRoZSBlZGdlLCBhcyB3ZWxsIGFzIG90aGVyIG1pc2Mgbm9uLXdoaXRlc3BhY2UgY2hhcnNcblx0XHRmb3JtYXQgPSBmb3JtYXQucmVwbGFjZSgvXlkrW15cXHdcXHNdKnxbXlxcd1xcc10qWSskL2csICcnKTtcblxuXHRcdGlmIChmY09wdGlvbnMuaXNSVEwpIHtcblx0XHRcdGZvcm1hdCArPSAnIGRkZCc7IC8vIGZvciBSVEwsIGFkZCBkYXktb2Ytd2VlayB0byBlbmRcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRmb3JtYXQgPSAnZGRkICcgKyBmb3JtYXQ7IC8vIGZvciBMVFIsIGFkZCBkYXktb2Ytd2VlayB0byBiZWdpbm5pbmdcblx0XHR9XG5cdFx0cmV0dXJuIGZvcm1hdDtcblx0fSxcblxuXHQvLyBQcm9kdWNlcyBmb3JtYXQgc3RyaW5ncyBsaWtlIFwiaDptbWFcIiAtPiBcIjY6MDBwbVwiXG5cdG1lZGl1bVRpbWVGb3JtYXQ6IGZ1bmN0aW9uKG1vbU9wdGlvbnMpIHsgLy8gY2FuJ3QgYmUgY2FsbGVkIGB0aW1lRm9ybWF0YCBiZWNhdXNlIGNvbGxpZGVzIHdpdGggb3B0aW9uXG5cdFx0cmV0dXJuIG1vbU9wdGlvbnMubG9uZ0RhdGVGb3JtYXQoJ0xUJylcblx0XHRcdC5yZXBsYWNlKC9cXHMqYSQvaSwgJ2EnKTsgLy8gY29udmVydCBBTS9QTS9hbS9wbSB0byBsb3dlcmNhc2UuIHJlbW92ZSBhbnkgc3BhY2VzIGJlZm9yZWhhbmRcblx0fSxcblxuXHQvLyBQcm9kdWNlcyBmb3JtYXQgc3RyaW5ncyBsaWtlIFwiaCg6bW0pYVwiIC0+IFwiNnBtXCIgLyBcIjY6MzBwbVwiXG5cdHNtYWxsVGltZUZvcm1hdDogZnVuY3Rpb24obW9tT3B0aW9ucykge1xuXHRcdHJldHVybiBtb21PcHRpb25zLmxvbmdEYXRlRm9ybWF0KCdMVCcpXG5cdFx0XHQucmVwbGFjZSgnOm1tJywgJyg6bW0pJylcblx0XHRcdC5yZXBsYWNlKC8oXFxXbW0pJC8sICcoJDEpJykgLy8gbGlrZSBhYm92ZSwgYnV0IGZvciBmb3JlaWduIGxvY2FsZXNcblx0XHRcdC5yZXBsYWNlKC9cXHMqYSQvaSwgJ2EnKTsgLy8gY29udmVydCBBTS9QTS9hbS9wbSB0byBsb3dlcmNhc2UuIHJlbW92ZSBhbnkgc3BhY2VzIGJlZm9yZWhhbmRcblx0fSxcblxuXHQvLyBQcm9kdWNlcyBmb3JtYXQgc3RyaW5ncyBsaWtlIFwiaCg6bW0pdFwiIC0+IFwiNnBcIiAvIFwiNjozMHBcIlxuXHRleHRyYVNtYWxsVGltZUZvcm1hdDogZnVuY3Rpb24obW9tT3B0aW9ucykge1xuXHRcdHJldHVybiBtb21PcHRpb25zLmxvbmdEYXRlRm9ybWF0KCdMVCcpXG5cdFx0XHQucmVwbGFjZSgnOm1tJywgJyg6bW0pJylcblx0XHRcdC5yZXBsYWNlKC8oXFxXbW0pJC8sICcoJDEpJykgLy8gbGlrZSBhYm92ZSwgYnV0IGZvciBmb3JlaWduIGxvY2FsZXNcblx0XHRcdC5yZXBsYWNlKC9cXHMqYSQvaSwgJ3QnKTsgLy8gY29udmVydCB0byBBTS9QTS9hbS9wbSB0byBsb3dlcmNhc2Ugb25lLWxldHRlci4gcmVtb3ZlIGFueSBzcGFjZXMgYmVmb3JlaGFuZFxuXHR9LFxuXG5cdC8vIFByb2R1Y2VzIGZvcm1hdCBzdHJpbmdzIGxpa2UgXCJoYVwiIC8gXCJIXCIgLT4gXCI2cG1cIiAvIFwiMThcIlxuXHRob3VyRm9ybWF0OiBmdW5jdGlvbihtb21PcHRpb25zKSB7XG5cdFx0cmV0dXJuIG1vbU9wdGlvbnMubG9uZ0RhdGVGb3JtYXQoJ0xUJylcblx0XHRcdC5yZXBsYWNlKCc6bW0nLCAnJylcblx0XHRcdC5yZXBsYWNlKC8oXFxXbW0pJC8sICcnKSAvLyBsaWtlIGFib3ZlLCBidXQgZm9yIGZvcmVpZ24gbG9jYWxlc1xuXHRcdFx0LnJlcGxhY2UoL1xccyphJC9pLCAnYScpOyAvLyBjb252ZXJ0IEFNL1BNL2FtL3BtIHRvIGxvd2VyY2FzZS4gcmVtb3ZlIGFueSBzcGFjZXMgYmVmb3JlaGFuZFxuXHR9LFxuXG5cdC8vIFByb2R1Y2VzIGZvcm1hdCBzdHJpbmdzIGxpa2UgXCJoOm1tXCIgLT4gXCI2OjMwXCIgKHdpdGggbm8gQU0vUE0pXG5cdG5vTWVyaWRpZW1UaW1lRm9ybWF0OiBmdW5jdGlvbihtb21PcHRpb25zKSB7XG5cdFx0cmV0dXJuIG1vbU9wdGlvbnMubG9uZ0RhdGVGb3JtYXQoJ0xUJylcblx0XHRcdC5yZXBsYWNlKC9cXHMqYSQvaSwgJycpOyAvLyByZW1vdmUgdHJhaWxpbmcgQU0vUE1cblx0fVxuXG59O1xuXG5cbi8vIG9wdGlvbnMgdGhhdCBzaG91bGQgYmUgY29tcHV0ZWQgb2ZmIGxpdmUgY2FsZW5kYXIgb3B0aW9ucyAoY29uc2lkZXJzIG92ZXJyaWRlIG9wdGlvbnMpXG4vLyBUT0RPOiBiZXN0IHBsYWNlIGZvciB0aGlzPyByZWxhdGVkIHRvIGxvY2FsZT9cbi8vIFRPRE86IGZsaXBwaW5nIHRleHQgYmFzZWQgb24gaXNSVEwgaXMgYSBiYWQgaWRlYSBiZWNhdXNlIHRoZSBDU1MgYGRpcmVjdGlvbmAgbWlnaHQgd2FudCB0byBoYW5kbGUgaXRcbnZhciBpbnN0YW5jZUNvbXB1dGFibGVPcHRpb25zID0ge1xuXG5cdC8vIFByb2R1Y2VzIGZvcm1hdCBzdHJpbmdzIGZvciByZXN1bHRzIGxpa2UgXCJNbyAxNlwiXG5cdHNtYWxsRGF5RGF0ZUZvcm1hdDogZnVuY3Rpb24ob3B0aW9ucykge1xuXHRcdHJldHVybiBvcHRpb25zLmlzUlRMID9cblx0XHRcdCdEIGRkJyA6XG5cdFx0XHQnZGQgRCc7XG5cdH0sXG5cblx0Ly8gUHJvZHVjZXMgZm9ybWF0IHN0cmluZ3MgZm9yIHJlc3VsdHMgbGlrZSBcIldrIDVcIlxuXHR3ZWVrRm9ybWF0OiBmdW5jdGlvbihvcHRpb25zKSB7XG5cdFx0cmV0dXJuIG9wdGlvbnMuaXNSVEwgP1xuXHRcdFx0J3dbICcgKyBvcHRpb25zLndlZWtOdW1iZXJUaXRsZSArICddJyA6XG5cdFx0XHQnWycgKyBvcHRpb25zLndlZWtOdW1iZXJUaXRsZSArICcgXXcnO1xuXHR9LFxuXG5cdC8vIFByb2R1Y2VzIGZvcm1hdCBzdHJpbmdzIGZvciByZXN1bHRzIGxpa2UgXCJXazVcIlxuXHRzbWFsbFdlZWtGb3JtYXQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0XHRyZXR1cm4gb3B0aW9ucy5pc1JUTCA/XG5cdFx0XHQnd1snICsgb3B0aW9ucy53ZWVrTnVtYmVyVGl0bGUgKyAnXScgOlxuXHRcdFx0J1snICsgb3B0aW9ucy53ZWVrTnVtYmVyVGl0bGUgKyAnXXcnO1xuXHR9XG5cbn07XG5cbmZ1bmN0aW9uIHBvcHVsYXRlSW5zdGFuY2VDb21wdXRhYmxlT3B0aW9ucyhvcHRpb25zKSB7XG5cdCQuZWFjaChpbnN0YW5jZUNvbXB1dGFibGVPcHRpb25zLCBmdW5jdGlvbihuYW1lLCBmdW5jKSB7XG5cdFx0aWYgKG9wdGlvbnNbbmFtZV0gPT0gbnVsbCkge1xuXHRcdFx0b3B0aW9uc1tuYW1lXSA9IGZ1bmMob3B0aW9ucyk7XG5cdFx0fVxuXHR9KTtcbn1cblxuXG4vLyBSZXR1cm5zIG1vbWVudCdzIGludGVybmFsIGxvY2FsZSBkYXRhLiBJZiBkb2Vzbid0IGV4aXN0LCByZXR1cm5zIEVuZ2xpc2guXG5mdW5jdGlvbiBnZXRNb21lbnRMb2NhbGVEYXRhKGxvY2FsZUNvZGUpIHtcblx0cmV0dXJuIG1vbWVudC5sb2NhbGVEYXRhKGxvY2FsZUNvZGUpIHx8IG1vbWVudC5sb2NhbGVEYXRhKCdlbicpO1xufVxuXG5cbi8vIEluaXRpYWxpemUgRW5nbGlzaCBieSBmb3JjaW5nIGNvbXB1dGF0aW9uIG9mIG1vbWVudC1kZXJpdmVkIG9wdGlvbnMuXG4vLyBBbHNvLCBzZXRzIGl0IGFzIHRoZSBkZWZhdWx0LlxuRkMubG9jYWxlKCdlbicsIENhbGVuZGFyLmVuZ2xpc2hEZWZhdWx0cyk7XG5cbjs7XG5cbkZDLnNvdXJjZU5vcm1hbGl6ZXJzID0gW107XG5GQy5zb3VyY2VGZXRjaGVycyA9IFtdO1xuXG52YXIgYWpheERlZmF1bHRzID0ge1xuXHRkYXRhVHlwZTogJ2pzb24nLFxuXHRjYWNoZTogZmFsc2Vcbn07XG5cbnZhciBldmVudEdVSUQgPSAxO1xuXG5cbmZ1bmN0aW9uIEV2ZW50TWFuYWdlcigpIHsgLy8gYXNzdW1lZCB0byBiZSBhIGNhbGVuZGFyXG5cdHZhciB0ID0gdGhpcztcblxuXG5cdC8vIGV4cG9ydHNcblx0dC5yZXF1ZXN0RXZlbnRzID0gcmVxdWVzdEV2ZW50cztcblx0dC5yZXBvcnRFdmVudENoYW5nZSA9IHJlcG9ydEV2ZW50Q2hhbmdlO1xuXHR0LmlzRmV0Y2hOZWVkZWQgPSBpc0ZldGNoTmVlZGVkO1xuXHR0LmZldGNoRXZlbnRzID0gZmV0Y2hFdmVudHM7XG5cdHQuZmV0Y2hFdmVudFNvdXJjZXMgPSBmZXRjaEV2ZW50U291cmNlcztcblx0dC5yZWZldGNoRXZlbnRzID0gcmVmZXRjaEV2ZW50cztcblx0dC5yZWZldGNoRXZlbnRTb3VyY2VzID0gcmVmZXRjaEV2ZW50U291cmNlcztcblx0dC5nZXRFdmVudFNvdXJjZXMgPSBnZXRFdmVudFNvdXJjZXM7XG5cdHQuZ2V0RXZlbnRTb3VyY2VCeUlkID0gZ2V0RXZlbnRTb3VyY2VCeUlkO1xuXHR0LmFkZEV2ZW50U291cmNlID0gYWRkRXZlbnRTb3VyY2U7XG5cdHQucmVtb3ZlRXZlbnRTb3VyY2UgPSByZW1vdmVFdmVudFNvdXJjZTtcblx0dC5yZW1vdmVFdmVudFNvdXJjZXMgPSByZW1vdmVFdmVudFNvdXJjZXM7XG5cdHQudXBkYXRlRXZlbnQgPSB1cGRhdGVFdmVudDtcblx0dC51cGRhdGVFdmVudHMgPSB1cGRhdGVFdmVudHM7XG5cdHQucmVuZGVyRXZlbnQgPSByZW5kZXJFdmVudDtcblx0dC5yZW5kZXJFdmVudHMgPSByZW5kZXJFdmVudHM7XG5cdHQucmVtb3ZlRXZlbnRzID0gcmVtb3ZlRXZlbnRzO1xuXHR0LmNsaWVudEV2ZW50cyA9IGNsaWVudEV2ZW50cztcblx0dC5tdXRhdGVFdmVudCA9IG11dGF0ZUV2ZW50O1xuXHR0Lm5vcm1hbGl6ZUV2ZW50RGF0ZXMgPSBub3JtYWxpemVFdmVudERhdGVzO1xuXHR0Lm5vcm1hbGl6ZUV2ZW50VGltZXMgPSBub3JtYWxpemVFdmVudFRpbWVzO1xuXG5cblx0Ly8gbG9jYWxzXG5cdHZhciBzdGlja3lTb3VyY2UgPSB7IGV2ZW50czogW10gfTtcblx0dmFyIHNvdXJjZXMgPSBbIHN0aWNreVNvdXJjZSBdO1xuXHR2YXIgcmFuZ2VTdGFydCwgcmFuZ2VFbmQ7XG5cdHZhciBwZW5kaW5nU291cmNlQ250ID0gMDsgLy8gb3V0c3RhbmRpbmcgZmV0Y2ggcmVxdWVzdHMsIG1heCBvbmUgcGVyIHNvdXJjZVxuXHR2YXIgY2FjaGUgPSBbXTsgLy8gaG9sZHMgZXZlbnRzIHRoYXQgaGF2ZSBhbHJlYWR5IGJlZW4gZXhwYW5kZWRcblx0dmFyIHBydW5lZENhY2hlOyAvLyBsaWtlIGNhY2hlLCBidXQgb25seSBldmVudHMgdGhhdCBpbnRlcnNlY3Qgd2l0aCByYW5nZVN0YXJ0L3JhbmdlRW5kXG5cblxuXHQkLmVhY2goXG5cdFx0KHQub3B0aW9ucy5ldmVudHMgPyBbIHQub3B0aW9ucy5ldmVudHMgXSA6IFtdKS5jb25jYXQodC5vcHRpb25zLmV2ZW50U291cmNlcyB8fCBbXSksXG5cdFx0ZnVuY3Rpb24oaSwgc291cmNlSW5wdXQpIHtcblx0XHRcdHZhciBzb3VyY2UgPSBidWlsZEV2ZW50U291cmNlKHNvdXJjZUlucHV0KTtcblx0XHRcdGlmIChzb3VyY2UpIHtcblx0XHRcdFx0c291cmNlcy5wdXNoKHNvdXJjZSk7XG5cdFx0XHR9XG5cdFx0fVxuXHQpO1xuXG5cblxuXHRmdW5jdGlvbiByZXF1ZXN0RXZlbnRzKHN0YXJ0LCBlbmQpIHtcblx0XHRpZiAoIXQub3B0aW9ucy5sYXp5RmV0Y2hpbmcgfHwgaXNGZXRjaE5lZWRlZChzdGFydCwgZW5kKSkge1xuXHRcdFx0cmV0dXJuIGZldGNoRXZlbnRzKHN0YXJ0LCBlbmQpO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUocHJ1bmVkQ2FjaGUpO1xuXHRcdH1cblx0fVxuXG5cblx0ZnVuY3Rpb24gcmVwb3J0RXZlbnRDaGFuZ2UoKSB7XG5cdFx0cHJ1bmVkQ2FjaGUgPSBmaWx0ZXJFdmVudHNXaXRoaW5SYW5nZShjYWNoZSk7XG5cdFx0dC50cmlnZ2VyKCdldmVudHNSZXNldCcsIHBydW5lZENhY2hlKTtcblx0fVxuXG5cblx0ZnVuY3Rpb24gZmlsdGVyRXZlbnRzV2l0aGluUmFuZ2UoZXZlbnRzKSB7XG5cdFx0dmFyIGZpbHRlcmVkRXZlbnRzID0gW107XG5cdFx0dmFyIGksIGV2ZW50O1xuXG5cdFx0Zm9yIChpID0gMDsgaSA8IGV2ZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0ZXZlbnQgPSBldmVudHNbaV07XG5cblx0XHRcdGlmIChcblx0XHRcdFx0ZXZlbnQuc3RhcnQuY2xvbmUoKS5zdHJpcFpvbmUoKSA8IHJhbmdlRW5kICYmXG5cdFx0XHRcdHQuZ2V0RXZlbnRFbmQoZXZlbnQpLnN0cmlwWm9uZSgpID4gcmFuZ2VTdGFydFxuXHRcdFx0KSB7XG5cdFx0XHRcdGZpbHRlcmVkRXZlbnRzLnB1c2goZXZlbnQpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmaWx0ZXJlZEV2ZW50cztcblx0fVxuXG5cblx0dC5nZXRFdmVudENhY2hlID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGNhY2hlO1xuXHR9O1xuXG5cblx0dC5nZXRQcnVuZWRFdmVudENhY2hlID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHBydW5lZENhY2hlO1xuXHR9O1xuXG5cblxuXHQvKiBGZXRjaGluZ1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBzdGFydCBhbmQgZW5kIGFyZSBhc3N1bWVkIHRvIGJlIHVuem9uZWRcblx0ZnVuY3Rpb24gaXNGZXRjaE5lZWRlZChzdGFydCwgZW5kKSB7XG5cdFx0cmV0dXJuICFyYW5nZVN0YXJ0IHx8IC8vIG5vdGhpbmcgaGFzIGJlZW4gZmV0Y2hlZCB5ZXQ/XG5cdFx0XHRzdGFydCA8IHJhbmdlU3RhcnQgfHwgZW5kID4gcmFuZ2VFbmQ7IC8vIGlzIHBhcnQgb2YgdGhlIG5ldyByYW5nZSBvdXRzaWRlIG9mIHRoZSBvbGQgcmFuZ2U/XG5cdH1cblxuXG5cdGZ1bmN0aW9uIGZldGNoRXZlbnRzKHN0YXJ0LCBlbmQpIHtcblx0XHRyYW5nZVN0YXJ0ID0gc3RhcnQ7XG5cdFx0cmFuZ2VFbmQgPSBlbmQ7XG5cdFx0cmV0dXJuIHJlZmV0Y2hFdmVudHMoKTtcblx0fVxuXG5cblx0Ly8gcG9vcmx5IG5hbWVkLiBmZXRjaGVzIGFsbCBzb3VyY2VzIHdpdGggY3VycmVudCBgcmFuZ2VTdGFydGAgYW5kIGByYW5nZUVuZGAuXG5cdGZ1bmN0aW9uIHJlZmV0Y2hFdmVudHMoKSB7XG5cdFx0cmV0dXJuIGZldGNoRXZlbnRTb3VyY2VzKHNvdXJjZXMsICdyZXNldCcpO1xuXHR9XG5cblxuXHQvLyBwb29ybHkgbmFtZWQuIGZldGNoZXMgYSBzdWJzZXQgb2YgZXZlbnQgc291cmNlcy5cblx0ZnVuY3Rpb24gcmVmZXRjaEV2ZW50U291cmNlcyhtYXRjaElucHV0cykge1xuXHRcdHJldHVybiBmZXRjaEV2ZW50U291cmNlcyhnZXRFdmVudFNvdXJjZXNCeU1hdGNoQXJyYXkobWF0Y2hJbnB1dHMpKTtcblx0fVxuXG5cblx0Ly8gZXhwZWN0cyBhbiBhcnJheSBvZiBldmVudCBzb3VyY2Ugb2JqZWN0cyAodGhlIG9yaWdpbmFscywgbm90IGNvcGllcylcblx0Ly8gYHNwZWNpYWxGZXRjaFR5cGVgIGlzIGFuIG9wdGltaXphdGlvbiBwYXJhbWV0ZXIgdGhhdCBhZmZlY3RzIHB1cmdpbmcgb2YgdGhlIGV2ZW50IGNhY2hlLlxuXHRmdW5jdGlvbiBmZXRjaEV2ZW50U291cmNlcyhzcGVjaWZpY1NvdXJjZXMsIHNwZWNpYWxGZXRjaFR5cGUpIHtcblx0XHR2YXIgaSwgc291cmNlO1xuXG5cdFx0aWYgKHNwZWNpYWxGZXRjaFR5cGUgPT09ICdyZXNldCcpIHtcblx0XHRcdGNhY2hlID0gW107XG5cdFx0fVxuXHRcdGVsc2UgaWYgKHNwZWNpYWxGZXRjaFR5cGUgIT09ICdhZGQnKSB7XG5cdFx0XHRjYWNoZSA9IGV4Y2x1ZGVFdmVudHNCeVNvdXJjZXMoY2FjaGUsIHNwZWNpZmljU291cmNlcyk7XG5cdFx0fVxuXG5cdFx0Zm9yIChpID0gMDsgaSA8IHNwZWNpZmljU291cmNlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0c291cmNlID0gc3BlY2lmaWNTb3VyY2VzW2ldO1xuXG5cdFx0XHQvLyBhbHJlYWR5LXBlbmRpbmcgc291cmNlcyBoYXZlIGFscmVhZHkgYmVlbiBhY2NvdW50ZWQgZm9yIGluIHBlbmRpbmdTb3VyY2VDbnRcblx0XHRcdGlmIChzb3VyY2UuX3N0YXR1cyAhPT0gJ3BlbmRpbmcnKSB7XG5cdFx0XHRcdHBlbmRpbmdTb3VyY2VDbnQrKztcblx0XHRcdH1cblxuXHRcdFx0c291cmNlLl9mZXRjaElkID0gKHNvdXJjZS5fZmV0Y2hJZCB8fCAwKSArIDE7XG5cdFx0XHRzb3VyY2UuX3N0YXR1cyA9ICdwZW5kaW5nJztcblx0XHR9XG5cblx0XHRmb3IgKGkgPSAwOyBpIDwgc3BlY2lmaWNTb3VyY2VzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRzb3VyY2UgPSBzcGVjaWZpY1NvdXJjZXNbaV07XG5cdFx0XHR0cnlGZXRjaEV2ZW50U291cmNlKHNvdXJjZSwgc291cmNlLl9mZXRjaElkKTtcblx0XHR9XG5cblx0XHRpZiAocGVuZGluZ1NvdXJjZUNudCkge1xuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpIHtcblx0XHRcdFx0dC5vbmUoJ2V2ZW50c1JlY2VpdmVkJywgcmVzb2x2ZSk7IC8vIHdpbGwgc2VuZCBwcnVuZWRDYWNoZVxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdGVsc2UgeyAvLyBleGVjdXRlZCBhbGwgc3luY2hyb25vdXNseSwgb3Igbm8gc291cmNlcyBhdCBhbGxcblx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUocHJ1bmVkQ2FjaGUpO1xuXHRcdH1cblx0fVxuXG5cblx0Ly8gZmV0Y2hlcyBhbiBldmVudCBzb3VyY2UgYW5kIHByb2Nlc3NlcyBpdHMgcmVzdWx0IE9OTFkgaWYgaXQgaXMgc3RpbGwgdGhlIGN1cnJlbnQgZmV0Y2guXG5cdC8vIGNhbGxlciBpcyByZXNwb25zaWJsZSBmb3IgaW5jcmVtZW50aW5nIHBlbmRpbmdTb3VyY2VDbnQgZmlyc3QuXG5cdGZ1bmN0aW9uIHRyeUZldGNoRXZlbnRTb3VyY2Uoc291cmNlLCBmZXRjaElkKSB7XG5cdFx0X2ZldGNoRXZlbnRTb3VyY2Uoc291cmNlLCBmdW5jdGlvbihldmVudElucHV0cykge1xuXHRcdFx0dmFyIGlzQXJyYXlTb3VyY2UgPSAkLmlzQXJyYXkoc291cmNlLmV2ZW50cyk7XG5cdFx0XHR2YXIgaSwgZXZlbnRJbnB1dDtcblx0XHRcdHZhciBhYnN0cmFjdEV2ZW50O1xuXG5cdFx0XHRpZiAoXG5cdFx0XHRcdC8vIGlzIHRoaXMgdGhlIHNvdXJjZSdzIG1vc3QgcmVjZW50IGZldGNoP1xuXHRcdFx0XHQvLyBpZiBub3QsIHJlbHkgb24gYW4gdXBjb21pbmcgZmV0Y2ggb2YgdGhpcyBzb3VyY2UgdG8gZGVjcmVtZW50IHBlbmRpbmdTb3VyY2VDbnRcblx0XHRcdFx0ZmV0Y2hJZCA9PT0gc291cmNlLl9mZXRjaElkICYmXG5cdFx0XHRcdC8vIGV2ZW50IHNvdXJjZSBubyBsb25nZXIgdmFsaWQ/XG5cdFx0XHRcdHNvdXJjZS5fc3RhdHVzICE9PSAncmVqZWN0ZWQnXG5cdFx0XHQpIHtcblx0XHRcdFx0c291cmNlLl9zdGF0dXMgPSAncmVzb2x2ZWQnO1xuXG5cdFx0XHRcdGlmIChldmVudElucHV0cykge1xuXHRcdFx0XHRcdGZvciAoaSA9IDA7IGkgPCBldmVudElucHV0cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0ZXZlbnRJbnB1dCA9IGV2ZW50SW5wdXRzW2ldO1xuXG5cdFx0XHRcdFx0XHRpZiAoaXNBcnJheVNvdXJjZSkgeyAvLyBhcnJheSBzb3VyY2VzIGhhdmUgYWxyZWFkeSBiZWVuIGNvbnZlcnQgdG8gRXZlbnQgT2JqZWN0c1xuXHRcdFx0XHRcdFx0XHRhYnN0cmFjdEV2ZW50ID0gZXZlbnRJbnB1dDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRhYnN0cmFjdEV2ZW50ID0gYnVpbGRFdmVudEZyb21JbnB1dChldmVudElucHV0LCBzb3VyY2UpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRpZiAoYWJzdHJhY3RFdmVudCkgeyAvLyBub3QgZmFsc2UgKGFuIGludmFsaWQgZXZlbnQpXG5cdFx0XHRcdFx0XHRcdGNhY2hlLnB1c2guYXBwbHkoIC8vIGFwcGVuZFxuXHRcdFx0XHRcdFx0XHRcdGNhY2hlLFxuXHRcdFx0XHRcdFx0XHRcdGV4cGFuZEV2ZW50KGFic3RyYWN0RXZlbnQpIC8vIGFkZCBpbmRpdmlkdWFsIGV4cGFuZGVkIGV2ZW50cyB0byB0aGUgY2FjaGVcblx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRkZWNyZW1lbnRQZW5kaW5nU291cmNlQ250KCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXG5cdGZ1bmN0aW9uIHJlamVjdEV2ZW50U291cmNlKHNvdXJjZSkge1xuXHRcdHZhciB3YXNQZW5kaW5nID0gc291cmNlLl9zdGF0dXMgPT09ICdwZW5kaW5nJztcblxuXHRcdHNvdXJjZS5fc3RhdHVzID0gJ3JlamVjdGVkJztcblxuXHRcdGlmICh3YXNQZW5kaW5nKSB7XG5cdFx0XHRkZWNyZW1lbnRQZW5kaW5nU291cmNlQ250KCk7XG5cdFx0fVxuXHR9XG5cblxuXHRmdW5jdGlvbiBkZWNyZW1lbnRQZW5kaW5nU291cmNlQ250KCkge1xuXHRcdHBlbmRpbmdTb3VyY2VDbnQtLTtcblx0XHRpZiAoIXBlbmRpbmdTb3VyY2VDbnQpIHtcblx0XHRcdHJlcG9ydEV2ZW50Q2hhbmdlKGNhY2hlKTsgLy8gdXBkYXRlcyBwcnVuZWRDYWNoZVxuXHRcdFx0dC50cmlnZ2VyKCdldmVudHNSZWNlaXZlZCcsIHBydW5lZENhY2hlKTtcblx0XHR9XG5cdH1cblxuXG5cdGZ1bmN0aW9uIF9mZXRjaEV2ZW50U291cmNlKHNvdXJjZSwgY2FsbGJhY2spIHtcblx0XHR2YXIgaTtcblx0XHR2YXIgZmV0Y2hlcnMgPSBGQy5zb3VyY2VGZXRjaGVycztcblx0XHR2YXIgcmVzO1xuXG5cdFx0Zm9yIChpPTA7IGk8ZmV0Y2hlcnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHJlcyA9IGZldGNoZXJzW2ldLmNhbGwoXG5cdFx0XHRcdHQsIC8vIHRoaXMsIHRoZSBDYWxlbmRhciBvYmplY3Rcblx0XHRcdFx0c291cmNlLFxuXHRcdFx0XHRyYW5nZVN0YXJ0LmNsb25lKCksXG5cdFx0XHRcdHJhbmdlRW5kLmNsb25lKCksXG5cdFx0XHRcdHQub3B0aW9ucy50aW1lem9uZSxcblx0XHRcdFx0Y2FsbGJhY2tcblx0XHRcdCk7XG5cblx0XHRcdGlmIChyZXMgPT09IHRydWUpIHtcblx0XHRcdFx0Ly8gdGhlIGZldGNoZXIgaXMgaW4gY2hhcmdlLiBtYWRlIGl0cyBvd24gYXN5bmMgcmVxdWVzdFxuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmICh0eXBlb2YgcmVzID09ICdvYmplY3QnKSB7XG5cdFx0XHRcdC8vIHRoZSBmZXRjaGVyIHJldHVybmVkIGEgbmV3IHNvdXJjZS4gcHJvY2VzcyBpdFxuXHRcdFx0XHRfZmV0Y2hFdmVudFNvdXJjZShyZXMsIGNhbGxiYWNrKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHZhciBldmVudHMgPSBzb3VyY2UuZXZlbnRzO1xuXHRcdGlmIChldmVudHMpIHtcblx0XHRcdGlmICgkLmlzRnVuY3Rpb24oZXZlbnRzKSkge1xuXHRcdFx0XHR0LnB1c2hMb2FkaW5nKCk7XG5cdFx0XHRcdGV2ZW50cy5jYWxsKFxuXHRcdFx0XHRcdHQsIC8vIHRoaXMsIHRoZSBDYWxlbmRhciBvYmplY3Rcblx0XHRcdFx0XHRyYW5nZVN0YXJ0LmNsb25lKCksXG5cdFx0XHRcdFx0cmFuZ2VFbmQuY2xvbmUoKSxcblx0XHRcdFx0XHR0Lm9wdGlvbnMudGltZXpvbmUsXG5cdFx0XHRcdFx0ZnVuY3Rpb24oZXZlbnRzKSB7XG5cdFx0XHRcdFx0XHRjYWxsYmFjayhldmVudHMpO1xuXHRcdFx0XHRcdFx0dC5wb3BMb2FkaW5nKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAoJC5pc0FycmF5KGV2ZW50cykpIHtcblx0XHRcdFx0Y2FsbGJhY2soZXZlbnRzKTtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRjYWxsYmFjaygpO1xuXHRcdFx0fVxuXHRcdH1lbHNle1xuXHRcdFx0dmFyIHVybCA9IHNvdXJjZS51cmw7XG5cdFx0XHRpZiAodXJsKSB7XG5cdFx0XHRcdHZhciBzdWNjZXNzID0gc291cmNlLnN1Y2Nlc3M7XG5cdFx0XHRcdHZhciBlcnJvciA9IHNvdXJjZS5lcnJvcjtcblx0XHRcdFx0dmFyIGNvbXBsZXRlID0gc291cmNlLmNvbXBsZXRlO1xuXG5cdFx0XHRcdC8vIHJldHJpZXZlIGFueSBvdXRib3VuZCBHRVQvUE9TVCAkLmFqYXggZGF0YSBmcm9tIHRoZSBvcHRpb25zXG5cdFx0XHRcdHZhciBjdXN0b21EYXRhO1xuXHRcdFx0XHRpZiAoJC5pc0Z1bmN0aW9uKHNvdXJjZS5kYXRhKSkge1xuXHRcdFx0XHRcdC8vIHN1cHBsaWVkIGFzIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEga2V5L3ZhbHVlIG9iamVjdFxuXHRcdFx0XHRcdGN1c3RvbURhdGEgPSBzb3VyY2UuZGF0YSgpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdC8vIHN1cHBsaWVkIGFzIGEgc3RyYWlnaHQga2V5L3ZhbHVlIG9iamVjdFxuXHRcdFx0XHRcdGN1c3RvbURhdGEgPSBzb3VyY2UuZGF0YTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIHVzZSBhIGNvcHkgb2YgdGhlIGN1c3RvbSBkYXRhIHNvIHdlIGNhbiBtb2RpZnkgdGhlIHBhcmFtZXRlcnNcblx0XHRcdFx0Ly8gYW5kIG5vdCBhZmZlY3QgdGhlIHBhc3NlZC1pbiBvYmplY3QuXG5cdFx0XHRcdHZhciBkYXRhID0gJC5leHRlbmQoe30sIGN1c3RvbURhdGEgfHwge30pO1xuXG5cdFx0XHRcdHZhciBzdGFydFBhcmFtID0gZmlyc3REZWZpbmVkKHNvdXJjZS5zdGFydFBhcmFtLCB0Lm9wdGlvbnMuc3RhcnRQYXJhbSk7XG5cdFx0XHRcdHZhciBlbmRQYXJhbSA9IGZpcnN0RGVmaW5lZChzb3VyY2UuZW5kUGFyYW0sIHQub3B0aW9ucy5lbmRQYXJhbSk7XG5cdFx0XHRcdHZhciB0aW1lem9uZVBhcmFtID0gZmlyc3REZWZpbmVkKHNvdXJjZS50aW1lem9uZVBhcmFtLCB0Lm9wdGlvbnMudGltZXpvbmVQYXJhbSk7XG5cblx0XHRcdFx0aWYgKHN0YXJ0UGFyYW0pIHtcblx0XHRcdFx0XHRkYXRhW3N0YXJ0UGFyYW1dID0gcmFuZ2VTdGFydC5mb3JtYXQoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoZW5kUGFyYW0pIHtcblx0XHRcdFx0XHRkYXRhW2VuZFBhcmFtXSA9IHJhbmdlRW5kLmZvcm1hdCgpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICh0Lm9wdGlvbnMudGltZXpvbmUgJiYgdC5vcHRpb25zLnRpbWV6b25lICE9ICdsb2NhbCcpIHtcblx0XHRcdFx0XHRkYXRhW3RpbWV6b25lUGFyYW1dID0gdC5vcHRpb25zLnRpbWV6b25lO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dC5wdXNoTG9hZGluZygpO1xuXHRcdFx0XHQkLmFqYXgoJC5leHRlbmQoe30sIGFqYXhEZWZhdWx0cywgc291cmNlLCB7XG5cdFx0XHRcdFx0ZGF0YTogZGF0YSxcblx0XHRcdFx0XHRzdWNjZXNzOiBmdW5jdGlvbihldmVudHMpIHtcblx0XHRcdFx0XHRcdGV2ZW50cyA9IGV2ZW50cyB8fCBbXTtcblx0XHRcdFx0XHRcdHZhciByZXMgPSBhcHBseUFsbChzdWNjZXNzLCB0aGlzLCBhcmd1bWVudHMpO1xuXHRcdFx0XHRcdFx0aWYgKCQuaXNBcnJheShyZXMpKSB7XG5cdFx0XHRcdFx0XHRcdGV2ZW50cyA9IHJlcztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGNhbGxiYWNrKGV2ZW50cyk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRlcnJvcjogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRhcHBseUFsbChlcnJvciwgdGhpcywgYXJndW1lbnRzKTtcblx0XHRcdFx0XHRcdGNhbGxiYWNrKCk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRjb21wbGV0ZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRhcHBseUFsbChjb21wbGV0ZSwgdGhpcywgYXJndW1lbnRzKTtcblx0XHRcdFx0XHRcdHQucG9wTG9hZGluZygpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSkpO1xuXHRcdFx0fWVsc2V7XG5cdFx0XHRcdGNhbGxiYWNrKCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblxuXG5cdC8qIFNvdXJjZXNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0ZnVuY3Rpb24gYWRkRXZlbnRTb3VyY2Uoc291cmNlSW5wdXQpIHtcblx0XHR2YXIgc291cmNlID0gYnVpbGRFdmVudFNvdXJjZShzb3VyY2VJbnB1dCk7XG5cdFx0aWYgKHNvdXJjZSkge1xuXHRcdFx0c291cmNlcy5wdXNoKHNvdXJjZSk7XG5cdFx0XHRmZXRjaEV2ZW50U291cmNlcyhbIHNvdXJjZSBdLCAnYWRkJyk7IC8vIHdpbGwgZXZlbnR1YWxseSBjYWxsIHJlcG9ydEV2ZW50Q2hhbmdlXG5cdFx0fVxuXHR9XG5cblxuXHRmdW5jdGlvbiBidWlsZEV2ZW50U291cmNlKHNvdXJjZUlucHV0KSB7IC8vIHdpbGwgcmV0dXJuIHVuZGVmaW5lZCBpZiBpbnZhbGlkIHNvdXJjZVxuXHRcdHZhciBub3JtYWxpemVycyA9IEZDLnNvdXJjZU5vcm1hbGl6ZXJzO1xuXHRcdHZhciBzb3VyY2U7XG5cdFx0dmFyIGk7XG5cblx0XHRpZiAoJC5pc0Z1bmN0aW9uKHNvdXJjZUlucHV0KSB8fCAkLmlzQXJyYXkoc291cmNlSW5wdXQpKSB7XG5cdFx0XHRzb3VyY2UgPSB7IGV2ZW50czogc291cmNlSW5wdXQgfTtcblx0XHR9XG5cdFx0ZWxzZSBpZiAodHlwZW9mIHNvdXJjZUlucHV0ID09PSAnc3RyaW5nJykge1xuXHRcdFx0c291cmNlID0geyB1cmw6IHNvdXJjZUlucHV0IH07XG5cdFx0fVxuXHRcdGVsc2UgaWYgKHR5cGVvZiBzb3VyY2VJbnB1dCA9PT0gJ29iamVjdCcpIHtcblx0XHRcdHNvdXJjZSA9ICQuZXh0ZW5kKHt9LCBzb3VyY2VJbnB1dCk7IC8vIHNoYWxsb3cgY29weVxuXHRcdH1cblxuXHRcdGlmIChzb3VyY2UpIHtcblxuXHRcdFx0Ly8gVE9ETzogcmVwZWF0IGNvZGUsIHNhbWUgY29kZSBmb3IgZXZlbnQgY2xhc3NOYW1lc1xuXHRcdFx0aWYgKHNvdXJjZS5jbGFzc05hbWUpIHtcblx0XHRcdFx0aWYgKHR5cGVvZiBzb3VyY2UuY2xhc3NOYW1lID09PSAnc3RyaW5nJykge1xuXHRcdFx0XHRcdHNvdXJjZS5jbGFzc05hbWUgPSBzb3VyY2UuY2xhc3NOYW1lLnNwbGl0KC9cXHMrLyk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gb3RoZXJ3aXNlLCBhc3N1bWVkIHRvIGJlIGFuIGFycmF5XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0c291cmNlLmNsYXNzTmFtZSA9IFtdO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBmb3IgYXJyYXkgc291cmNlcywgd2UgY29udmVydCB0byBzdGFuZGFyZCBFdmVudCBPYmplY3RzIHVwIGZyb250XG5cdFx0XHRpZiAoJC5pc0FycmF5KHNvdXJjZS5ldmVudHMpKSB7XG5cdFx0XHRcdHNvdXJjZS5vcmlnQXJyYXkgPSBzb3VyY2UuZXZlbnRzOyAvLyBmb3IgcmVtb3ZlRXZlbnRTb3VyY2Vcblx0XHRcdFx0c291cmNlLmV2ZW50cyA9ICQubWFwKHNvdXJjZS5ldmVudHMsIGZ1bmN0aW9uKGV2ZW50SW5wdXQpIHtcblx0XHRcdFx0XHRyZXR1cm4gYnVpbGRFdmVudEZyb21JbnB1dChldmVudElucHV0LCBzb3VyY2UpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblxuXHRcdFx0Zm9yIChpPTA7IGk8bm9ybWFsaXplcnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0bm9ybWFsaXplcnNbaV0uY2FsbCh0LCBzb3VyY2UpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gc291cmNlO1xuXHRcdH1cblx0fVxuXG5cblx0ZnVuY3Rpb24gcmVtb3ZlRXZlbnRTb3VyY2UobWF0Y2hJbnB1dCkge1xuXHRcdHJlbW92ZVNwZWNpZmljRXZlbnRTb3VyY2VzKFxuXHRcdFx0Z2V0RXZlbnRTb3VyY2VzQnlNYXRjaChtYXRjaElucHV0KVxuXHRcdCk7XG5cdH1cblxuXG5cdC8vIGlmIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50cywgcmVtb3ZlcyBhbGwuXG5cdGZ1bmN0aW9uIHJlbW92ZUV2ZW50U291cmNlcyhtYXRjaElucHV0cykge1xuXHRcdGlmIChtYXRjaElucHV0cyA9PSBudWxsKSB7XG5cdFx0XHRyZW1vdmVTcGVjaWZpY0V2ZW50U291cmNlcyhzb3VyY2VzLCB0cnVlKTsgLy8gaXNBbGw9dHJ1ZVxuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdHJlbW92ZVNwZWNpZmljRXZlbnRTb3VyY2VzKFxuXHRcdFx0XHRnZXRFdmVudFNvdXJjZXNCeU1hdGNoQXJyYXkobWF0Y2hJbnB1dHMpXG5cdFx0XHQpO1xuXHRcdH1cblx0fVxuXG5cblx0ZnVuY3Rpb24gcmVtb3ZlU3BlY2lmaWNFdmVudFNvdXJjZXModGFyZ2V0U291cmNlcywgaXNBbGwpIHtcblx0XHR2YXIgaTtcblxuXHRcdC8vIGNhbmNlbCBwZW5kaW5nIHJlcXVlc3RzXG5cdFx0Zm9yIChpID0gMDsgaSA8IHRhcmdldFNvdXJjZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHJlamVjdEV2ZW50U291cmNlKHRhcmdldFNvdXJjZXNbaV0pO1xuXHRcdH1cblxuXHRcdGlmIChpc0FsbCkgeyAvLyBhbiBvcHRpbWl6YXRpb25cblx0XHRcdHNvdXJjZXMgPSBbXTtcblx0XHRcdGNhY2hlID0gW107XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0Ly8gcmVtb3ZlIGZyb20gcGVyc2lzdGVkIHNvdXJjZSBsaXN0XG5cdFx0XHRzb3VyY2VzID0gJC5ncmVwKHNvdXJjZXMsIGZ1bmN0aW9uKHNvdXJjZSkge1xuXHRcdFx0XHRmb3IgKGkgPSAwOyBpIDwgdGFyZ2V0U291cmNlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdGlmIChzb3VyY2UgPT09IHRhcmdldFNvdXJjZXNbaV0pIHtcblx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTsgLy8gZXhjbHVkZVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTsgLy8gaW5jbHVkZVxuXHRcdFx0fSk7XG5cblx0XHRcdGNhY2hlID0gZXhjbHVkZUV2ZW50c0J5U291cmNlcyhjYWNoZSwgdGFyZ2V0U291cmNlcyk7XG5cdFx0fVxuXG5cdFx0cmVwb3J0RXZlbnRDaGFuZ2UoKTtcblx0fVxuXG5cblx0ZnVuY3Rpb24gZ2V0RXZlbnRTb3VyY2VzKCkge1xuXHRcdHJldHVybiBzb3VyY2VzLnNsaWNlKDEpOyAvLyByZXR1cm5zIGEgc2hhbGxvdyBjb3B5IG9mIHNvdXJjZXMgd2l0aCBzdGlja3lTb3VyY2UgcmVtb3ZlZFxuXHR9XG5cblxuXHRmdW5jdGlvbiBnZXRFdmVudFNvdXJjZUJ5SWQoaWQpIHtcblx0XHRyZXR1cm4gJC5ncmVwKHNvdXJjZXMsIGZ1bmN0aW9uKHNvdXJjZSkge1xuXHRcdFx0cmV0dXJuIHNvdXJjZS5pZCAmJiBzb3VyY2UuaWQgPT09IGlkO1xuXHRcdH0pWzBdO1xuXHR9XG5cblxuXHQvLyBsaWtlIGdldEV2ZW50U291cmNlc0J5TWF0Y2gsIGJ1dCBhY2NlcHRzIG11bHRwbGUgbWF0Y2ggY3JpdGVyaWEgKGxpa2UgbXVsdGlwbGUgSURzKVxuXHRmdW5jdGlvbiBnZXRFdmVudFNvdXJjZXNCeU1hdGNoQXJyYXkobWF0Y2hJbnB1dHMpIHtcblxuXHRcdC8vIGNvZXJjZSBpbnRvIGFuIGFycmF5XG5cdFx0aWYgKCFtYXRjaElucHV0cykge1xuXHRcdFx0bWF0Y2hJbnB1dHMgPSBbXTtcblx0XHR9XG5cdFx0ZWxzZSBpZiAoISQuaXNBcnJheShtYXRjaElucHV0cykpIHtcblx0XHRcdG1hdGNoSW5wdXRzID0gWyBtYXRjaElucHV0cyBdO1xuXHRcdH1cblxuXHRcdHZhciBtYXRjaGluZ1NvdXJjZXMgPSBbXTtcblx0XHR2YXIgaTtcblxuXHRcdC8vIHJlc29sdmUgcmF3IGlucHV0cyB0byByZWFsIGV2ZW50IHNvdXJjZSBvYmplY3RzXG5cdFx0Zm9yIChpID0gMDsgaSA8IG1hdGNoSW5wdXRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRtYXRjaGluZ1NvdXJjZXMucHVzaC5hcHBseSggLy8gYXBwZW5kXG5cdFx0XHRcdG1hdGNoaW5nU291cmNlcyxcblx0XHRcdFx0Z2V0RXZlbnRTb3VyY2VzQnlNYXRjaChtYXRjaElucHV0c1tpXSlcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG1hdGNoaW5nU291cmNlcztcblx0fVxuXG5cblx0Ly8gbWF0Y2hJbnB1dCBjYW4gZWl0aGVyIGJ5IGEgcmVhbCBldmVudCBzb3VyY2Ugb2JqZWN0LCBhbiBJRCwgb3IgdGhlIGZ1bmN0aW9uL1VSTCBmb3IgdGhlIHNvdXJjZS5cblx0Ly8gcmV0dXJucyBhbiBhcnJheSBvZiBtYXRjaGluZyBzb3VyY2Ugb2JqZWN0cy5cblx0ZnVuY3Rpb24gZ2V0RXZlbnRTb3VyY2VzQnlNYXRjaChtYXRjaElucHV0KSB7XG5cdFx0dmFyIGksIHNvdXJjZTtcblxuXHRcdC8vIGdpdmVuIGFuIHByb3BlciBldmVudCBzb3VyY2Ugb2JqZWN0XG5cdFx0Zm9yIChpID0gMDsgaSA8IHNvdXJjZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHNvdXJjZSA9IHNvdXJjZXNbaV07XG5cdFx0XHRpZiAoc291cmNlID09PSBtYXRjaElucHV0KSB7XG5cdFx0XHRcdHJldHVybiBbIHNvdXJjZSBdO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIGFuIElEIG1hdGNoXG5cdFx0c291cmNlID0gZ2V0RXZlbnRTb3VyY2VCeUlkKG1hdGNoSW5wdXQpO1xuXHRcdGlmIChzb3VyY2UpIHtcblx0XHRcdHJldHVybiBbIHNvdXJjZSBdO1xuXHRcdH1cblxuXHRcdHJldHVybiAkLmdyZXAoc291cmNlcywgZnVuY3Rpb24oc291cmNlKSB7XG5cdFx0XHRyZXR1cm4gaXNTb3VyY2VzRXF1aXZhbGVudChtYXRjaElucHV0LCBzb3VyY2UpO1xuXHRcdH0pO1xuXHR9XG5cblxuXHRmdW5jdGlvbiBpc1NvdXJjZXNFcXVpdmFsZW50KHNvdXJjZTEsIHNvdXJjZTIpIHtcblx0XHRyZXR1cm4gc291cmNlMSAmJiBzb3VyY2UyICYmIGdldFNvdXJjZVByaW1pdGl2ZShzb3VyY2UxKSA9PSBnZXRTb3VyY2VQcmltaXRpdmUoc291cmNlMik7XG5cdH1cblxuXG5cdGZ1bmN0aW9uIGdldFNvdXJjZVByaW1pdGl2ZShzb3VyY2UpIHtcblx0XHRyZXR1cm4gKFxuXHRcdFx0KHR5cGVvZiBzb3VyY2UgPT09ICdvYmplY3QnKSA/IC8vIGEgbm9ybWFsaXplZCBldmVudCBzb3VyY2U/XG5cdFx0XHRcdChzb3VyY2Uub3JpZ0FycmF5IHx8IHNvdXJjZS5nb29nbGVDYWxlbmRhcklkIHx8IHNvdXJjZS51cmwgfHwgc291cmNlLmV2ZW50cykgOiAvLyBnZXQgdGhlIHByaW1pdGl2ZVxuXHRcdFx0XHRudWxsXG5cdFx0KSB8fFxuXHRcdHNvdXJjZTsgLy8gdGhlIGdpdmVuIGFyZ3VtZW50ICppcyogdGhlIHByaW1pdGl2ZVxuXHR9XG5cblxuXHQvLyB1dGlsXG5cdC8vIHJldHVybnMgYSBmaWx0ZXJlZCBhcnJheSB3aXRob3V0IGV2ZW50cyB0aGF0IGFyZSBwYXJ0IG9mIGFueSBvZiB0aGUgZ2l2ZW4gc291cmNlc1xuXHRmdW5jdGlvbiBleGNsdWRlRXZlbnRzQnlTb3VyY2VzKHNwZWNpZmljRXZlbnRzLCBzcGVjaWZpY1NvdXJjZXMpIHtcblx0XHRyZXR1cm4gJC5ncmVwKHNwZWNpZmljRXZlbnRzLCBmdW5jdGlvbihldmVudCkge1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzcGVjaWZpY1NvdXJjZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0aWYgKGV2ZW50LnNvdXJjZSA9PT0gc3BlY2lmaWNTb3VyY2VzW2ldKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlOyAvLyBleGNsdWRlXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiB0cnVlOyAvLyBrZWVwXG5cdFx0fSk7XG5cdH1cblxuXG5cblx0LyogTWFuaXB1bGF0aW9uXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIE9ubHkgZXZlciBjYWxsZWQgZnJvbSB0aGUgZXh0ZXJuYWxseS1mYWNpbmcgQVBJXG5cdGZ1bmN0aW9uIHVwZGF0ZUV2ZW50KGV2ZW50KSB7XG5cdFx0dXBkYXRlRXZlbnRzKFsgZXZlbnQgXSk7XG5cdH1cblxuXG5cdC8vIE9ubHkgZXZlciBjYWxsZWQgZnJvbSB0aGUgZXh0ZXJuYWxseS1mYWNpbmcgQVBJXG5cdGZ1bmN0aW9uIHVwZGF0ZUV2ZW50cyhldmVudHMpIHtcblx0XHR2YXIgaSwgZXZlbnQ7XG5cblx0XHRmb3IgKGkgPSAwOyBpIDwgZXZlbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRldmVudCA9IGV2ZW50c1tpXTtcblxuXHRcdFx0Ly8gbWFzc2FnZSBzdGFydC9lbmQgdmFsdWVzLCBldmVuIGlmIGRhdGUgc3RyaW5nIHZhbHVlc1xuXHRcdFx0ZXZlbnQuc3RhcnQgPSB0Lm1vbWVudChldmVudC5zdGFydCk7XG5cdFx0XHRpZiAoZXZlbnQuZW5kKSB7XG5cdFx0XHRcdGV2ZW50LmVuZCA9IHQubW9tZW50KGV2ZW50LmVuZCk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0ZXZlbnQuZW5kID0gbnVsbDtcblx0XHRcdH1cblxuXHRcdFx0bXV0YXRlRXZlbnQoZXZlbnQsIGdldE1pc2NFdmVudFByb3BzKGV2ZW50KSk7IC8vIHdpbGwgaGFuZGxlIHN0YXJ0L2VuZC9hbGxEYXkgbm9ybWFsaXphdGlvblxuXHRcdH1cblxuXHRcdHJlcG9ydEV2ZW50Q2hhbmdlKCk7IC8vIHJlcG9ydHMgZXZlbnQgbW9kaWZpY2F0aW9ucyAoc28gd2UgY2FuIHJlZHJhdylcblx0fVxuXG5cblx0Ly8gUmV0dXJucyBhIGhhc2ggb2YgbWlzYyBldmVudCBwcm9wZXJ0aWVzIHRoYXQgc2hvdWxkIGJlIGNvcGllZCBvdmVyIHRvIHJlbGF0ZWQgZXZlbnRzLlxuXHRmdW5jdGlvbiBnZXRNaXNjRXZlbnRQcm9wcyhldmVudCkge1xuXHRcdHZhciBwcm9wcyA9IHt9O1xuXG5cdFx0JC5lYWNoKGV2ZW50LCBmdW5jdGlvbihuYW1lLCB2YWwpIHtcblx0XHRcdGlmIChpc01pc2NFdmVudFByb3BOYW1lKG5hbWUpKSB7XG5cdFx0XHRcdGlmICh2YWwgIT09IHVuZGVmaW5lZCAmJiBpc0F0b21pYyh2YWwpKSB7IC8vIGEgZGVmaW5lZCBub24tb2JqZWN0XG5cdFx0XHRcdFx0cHJvcHNbbmFtZV0gPSB2YWw7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHJldHVybiBwcm9wcztcblx0fVxuXG5cdC8vIG5vbi1kYXRlLXJlbGF0ZWQsIG5vbi1pZC1yZWxhdGVkLCBub24tc2VjcmV0XG5cdGZ1bmN0aW9uIGlzTWlzY0V2ZW50UHJvcE5hbWUobmFtZSkge1xuXHRcdHJldHVybiAhL15ffF4oaWR8YWxsRGF5fHN0YXJ0fGVuZCkkLy50ZXN0KG5hbWUpO1xuXHR9XG5cblxuXHQvLyByZXR1cm5zIHRoZSBleHBhbmRlZCBldmVudHMgdGhhdCB3ZXJlIGNyZWF0ZWRcblx0ZnVuY3Rpb24gcmVuZGVyRXZlbnQoZXZlbnRJbnB1dCwgc3RpY2spIHtcblx0XHRyZXR1cm4gcmVuZGVyRXZlbnRzKFsgZXZlbnRJbnB1dCBdLCBzdGljayk7XG5cdH1cblxuXG5cdC8vIHJldHVybnMgdGhlIGV4cGFuZGVkIGV2ZW50cyB0aGF0IHdlcmUgY3JlYXRlZFxuXHRmdW5jdGlvbiByZW5kZXJFdmVudHMoZXZlbnRJbnB1dHMsIHN0aWNrKSB7XG5cdFx0dmFyIHJlbmRlcmVkRXZlbnRzID0gW107XG5cdFx0dmFyIHJlbmRlcmFibGVFdmVudHM7XG5cdFx0dmFyIGFic3RyYWN0RXZlbnQ7XG5cdFx0dmFyIGksIGosIGV2ZW50O1xuXG5cdFx0Zm9yIChpID0gMDsgaSA8IGV2ZW50SW5wdXRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRhYnN0cmFjdEV2ZW50ID0gYnVpbGRFdmVudEZyb21JbnB1dChldmVudElucHV0c1tpXSk7XG5cblx0XHRcdGlmIChhYnN0cmFjdEV2ZW50KSB7IC8vIG5vdCBmYWxzZSAoYSB2YWxpZCBpbnB1dClcblx0XHRcdFx0cmVuZGVyYWJsZUV2ZW50cyA9IGV4cGFuZEV2ZW50KGFic3RyYWN0RXZlbnQpO1xuXG5cdFx0XHRcdGZvciAoaiA9IDA7IGogPCByZW5kZXJhYmxlRXZlbnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdFx0ZXZlbnQgPSByZW5kZXJhYmxlRXZlbnRzW2pdO1xuXG5cdFx0XHRcdFx0aWYgKCFldmVudC5zb3VyY2UpIHtcblx0XHRcdFx0XHRcdGlmIChzdGljaykge1xuXHRcdFx0XHRcdFx0XHRzdGlja3lTb3VyY2UuZXZlbnRzLnB1c2goZXZlbnQpO1xuXHRcdFx0XHRcdFx0XHRldmVudC5zb3VyY2UgPSBzdGlja3lTb3VyY2U7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRjYWNoZS5wdXNoKGV2ZW50KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZW5kZXJlZEV2ZW50cyA9IHJlbmRlcmVkRXZlbnRzLmNvbmNhdChyZW5kZXJhYmxlRXZlbnRzKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAocmVuZGVyZWRFdmVudHMubGVuZ3RoKSB7IC8vIGFueSBuZXcgZXZlbnRzIHJlbmRlcmVkP1xuXHRcdFx0cmVwb3J0RXZlbnRDaGFuZ2UoKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gcmVuZGVyZWRFdmVudHM7XG5cdH1cblxuXG5cdGZ1bmN0aW9uIHJlbW92ZUV2ZW50cyhmaWx0ZXIpIHtcblx0XHR2YXIgZXZlbnRJRDtcblx0XHR2YXIgaTtcblxuXHRcdGlmIChmaWx0ZXIgPT0gbnVsbCkgeyAvLyBudWxsIG9yIHVuZGVmaW5lZC4gcmVtb3ZlIGFsbCBldmVudHNcblx0XHRcdGZpbHRlciA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdHJ1ZTsgfTsgLy8gd2lsbCBhbHdheXMgbWF0Y2hcblx0XHR9XG5cdFx0ZWxzZSBpZiAoISQuaXNGdW5jdGlvbihmaWx0ZXIpKSB7IC8vIGFuIGV2ZW50IElEXG5cdFx0XHRldmVudElEID0gZmlsdGVyICsgJyc7XG5cdFx0XHRmaWx0ZXIgPSBmdW5jdGlvbihldmVudCkge1xuXHRcdFx0XHRyZXR1cm4gZXZlbnQuX2lkID09IGV2ZW50SUQ7XG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdC8vIFB1cmdlIGV2ZW50KHMpIGZyb20gb3VyIGxvY2FsIGNhY2hlXG5cdFx0Y2FjaGUgPSAkLmdyZXAoY2FjaGUsIGZpbHRlciwgdHJ1ZSk7IC8vIGludmVyc2U9dHJ1ZVxuXG5cdFx0Ly8gUmVtb3ZlIGV2ZW50cyBmcm9tIGFycmF5IHNvdXJjZXMuXG5cdFx0Ly8gVGhpcyB3b3JrcyBiZWNhdXNlIHRoZXkgaGF2ZSBiZWVuIGNvbnZlcnRlZCB0byBvZmZpY2lhbCBFdmVudCBPYmplY3RzIHVwIGZyb250LlxuXHRcdC8vIChhbmQgYXMgYSByZXN1bHQsIGV2ZW50Ll9pZCBoYXMgYmVlbiBjYWxjdWxhdGVkKS5cblx0XHRmb3IgKGk9MDsgaTxzb3VyY2VzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZiAoJC5pc0FycmF5KHNvdXJjZXNbaV0uZXZlbnRzKSkge1xuXHRcdFx0XHRzb3VyY2VzW2ldLmV2ZW50cyA9ICQuZ3JlcChzb3VyY2VzW2ldLmV2ZW50cywgZmlsdGVyLCB0cnVlKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXBvcnRFdmVudENoYW5nZSgpO1xuXHR9XG5cblxuXHRmdW5jdGlvbiBjbGllbnRFdmVudHMoZmlsdGVyKSB7XG5cdFx0aWYgKCQuaXNGdW5jdGlvbihmaWx0ZXIpKSB7XG5cdFx0XHRyZXR1cm4gJC5ncmVwKGNhY2hlLCBmaWx0ZXIpO1xuXHRcdH1cblx0XHRlbHNlIGlmIChmaWx0ZXIgIT0gbnVsbCkgeyAvLyBub3QgbnVsbCwgbm90IHVuZGVmaW5lZC4gYW4gZXZlbnQgSURcblx0XHRcdGZpbHRlciArPSAnJztcblx0XHRcdHJldHVybiAkLmdyZXAoY2FjaGUsIGZ1bmN0aW9uKGUpIHtcblx0XHRcdFx0cmV0dXJuIGUuX2lkID09IGZpbHRlcjtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHRyZXR1cm4gY2FjaGU7IC8vIGVsc2UsIHJldHVybiBhbGxcblx0fVxuXG5cblx0Ly8gTWFrZXMgc3VyZSBhbGwgYXJyYXkgZXZlbnQgc291cmNlcyBoYXZlIHRoZWlyIGludGVybmFsIGV2ZW50IG9iamVjdHNcblx0Ly8gY29udmVydGVkIG92ZXIgdG8gdGhlIENhbGVuZGFyJ3MgY3VycmVudCB0aW1lem9uZS5cblx0dC5yZXpvbmVBcnJheUV2ZW50U291cmNlcyA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBpO1xuXHRcdHZhciBldmVudHM7XG5cdFx0dmFyIGo7XG5cblx0XHRmb3IgKGkgPSAwOyBpIDwgc291cmNlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0ZXZlbnRzID0gc291cmNlc1tpXS5ldmVudHM7XG5cdFx0XHRpZiAoJC5pc0FycmF5KGV2ZW50cykpIHtcblxuXHRcdFx0XHRmb3IgKGogPSAwOyBqIDwgZXZlbnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdFx0cmV6b25lRXZlbnREYXRlcyhldmVudHNbal0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdGZ1bmN0aW9uIHJlem9uZUV2ZW50RGF0ZXMoZXZlbnQpIHtcblx0XHRldmVudC5zdGFydCA9IHQubW9tZW50KGV2ZW50LnN0YXJ0KTtcblx0XHRpZiAoZXZlbnQuZW5kKSB7XG5cdFx0XHRldmVudC5lbmQgPSB0Lm1vbWVudChldmVudC5lbmQpO1xuXHRcdH1cblx0XHRiYWNrdXBFdmVudERhdGVzKGV2ZW50KTtcblx0fVxuXG5cblx0LyogRXZlbnQgTm9ybWFsaXphdGlvblxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBHaXZlbiBhIHJhdyBvYmplY3Qgd2l0aCBrZXkvdmFsdWUgcHJvcGVydGllcywgcmV0dXJucyBhbiBcImFic3RyYWN0XCIgRXZlbnQgb2JqZWN0LlxuXHQvLyBBbiBcImFic3RyYWN0XCIgZXZlbnQgaXMgYW4gZXZlbnQgdGhhdCwgaWYgcmVjdXJyaW5nLCB3aWxsIG5vdCBoYXZlIGJlZW4gZXhwYW5kZWQgeWV0LlxuXHQvLyBXaWxsIHJldHVybiBgZmFsc2VgIHdoZW4gaW5wdXQgaXMgaW52YWxpZC5cblx0Ly8gYHNvdXJjZWAgaXMgb3B0aW9uYWxcblx0ZnVuY3Rpb24gYnVpbGRFdmVudEZyb21JbnB1dChpbnB1dCwgc291cmNlKSB7XG5cdFx0dmFyIG91dCA9IHt9O1xuXHRcdHZhciBzdGFydCwgZW5kO1xuXHRcdHZhciBhbGxEYXk7XG5cblx0XHRpZiAodC5vcHRpb25zLmV2ZW50RGF0YVRyYW5zZm9ybSkge1xuXHRcdFx0aW5wdXQgPSB0Lm9wdGlvbnMuZXZlbnREYXRhVHJhbnNmb3JtKGlucHV0KTtcblx0XHR9XG5cdFx0aWYgKHNvdXJjZSAmJiBzb3VyY2UuZXZlbnREYXRhVHJhbnNmb3JtKSB7XG5cdFx0XHRpbnB1dCA9IHNvdXJjZS5ldmVudERhdGFUcmFuc2Zvcm0oaW5wdXQpO1xuXHRcdH1cblxuXHRcdC8vIENvcHkgYWxsIHByb3BlcnRpZXMgb3ZlciB0byB0aGUgcmVzdWx0aW5nIG9iamVjdC5cblx0XHQvLyBUaGUgc3BlY2lhbC1jYXNlIHByb3BlcnRpZXMgd2lsbCBiZSBjb3BpZWQgb3ZlciBhZnRlcndhcmRzLlxuXHRcdCQuZXh0ZW5kKG91dCwgaW5wdXQpO1xuXG5cdFx0aWYgKHNvdXJjZSkge1xuXHRcdFx0b3V0LnNvdXJjZSA9IHNvdXJjZTtcblx0XHR9XG5cblx0XHRvdXQuX2lkID0gaW5wdXQuX2lkIHx8IChpbnB1dC5pZCA9PT0gdW5kZWZpbmVkID8gJ19mYycgKyBldmVudEdVSUQrKyA6IGlucHV0LmlkICsgJycpO1xuXG5cdFx0aWYgKGlucHV0LmNsYXNzTmFtZSkge1xuXHRcdFx0aWYgKHR5cGVvZiBpbnB1dC5jbGFzc05hbWUgPT0gJ3N0cmluZycpIHtcblx0XHRcdFx0b3V0LmNsYXNzTmFtZSA9IGlucHV0LmNsYXNzTmFtZS5zcGxpdCgvXFxzKy8pO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7IC8vIGFzc3VtZWQgdG8gYmUgYW4gYXJyYXlcblx0XHRcdFx0b3V0LmNsYXNzTmFtZSA9IGlucHV0LmNsYXNzTmFtZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRvdXQuY2xhc3NOYW1lID0gW107XG5cdFx0fVxuXG5cdFx0c3RhcnQgPSBpbnB1dC5zdGFydCB8fCBpbnB1dC5kYXRlOyAvLyBcImRhdGVcIiBpcyBhbiBhbGlhcyBmb3IgXCJzdGFydFwiXG5cdFx0ZW5kID0gaW5wdXQuZW5kO1xuXG5cdFx0Ly8gcGFyc2UgYXMgYSB0aW1lIChEdXJhdGlvbikgaWYgYXBwbGljYWJsZVxuXHRcdGlmIChpc1RpbWVTdHJpbmcoc3RhcnQpKSB7XG5cdFx0XHRzdGFydCA9IG1vbWVudC5kdXJhdGlvbihzdGFydCk7XG5cdFx0fVxuXHRcdGlmIChpc1RpbWVTdHJpbmcoZW5kKSkge1xuXHRcdFx0ZW5kID0gbW9tZW50LmR1cmF0aW9uKGVuZCk7XG5cdFx0fVxuXG5cdFx0aWYgKGlucHV0LmRvdyB8fCBtb21lbnQuaXNEdXJhdGlvbihzdGFydCkgfHwgbW9tZW50LmlzRHVyYXRpb24oZW5kKSkge1xuXG5cdFx0XHQvLyB0aGUgZXZlbnQgaXMgXCJhYnN0cmFjdFwiIChyZWN1cnJpbmcpIHNvIGRvbid0IGNhbGN1bGF0ZSBleGFjdCBzdGFydC9lbmQgZGF0ZXMganVzdCB5ZXRcblx0XHRcdG91dC5zdGFydCA9IHN0YXJ0ID8gbW9tZW50LmR1cmF0aW9uKHN0YXJ0KSA6IG51bGw7IC8vIHdpbGwgYmUgYSBEdXJhdGlvbiBvciBudWxsXG5cdFx0XHRvdXQuZW5kID0gZW5kID8gbW9tZW50LmR1cmF0aW9uKGVuZCkgOiBudWxsOyAvLyB3aWxsIGJlIGEgRHVyYXRpb24gb3IgbnVsbFxuXHRcdFx0b3V0Ll9yZWN1cnJpbmcgPSB0cnVlOyAvLyBvdXIgaW50ZXJuYWwgbWFya2VyXG5cdFx0fVxuXHRcdGVsc2Uge1xuXG5cdFx0XHRpZiAoc3RhcnQpIHtcblx0XHRcdFx0c3RhcnQgPSB0Lm1vbWVudChzdGFydCk7XG5cdFx0XHRcdGlmICghc3RhcnQuaXNWYWxpZCgpKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmIChlbmQpIHtcblx0XHRcdFx0ZW5kID0gdC5tb21lbnQoZW5kKTtcblx0XHRcdFx0aWYgKCFlbmQuaXNWYWxpZCgpKSB7XG5cdFx0XHRcdFx0ZW5kID0gbnVsbDsgLy8gbGV0IGRlZmF1bHRzIHRha2Ugb3ZlclxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGFsbERheSA9IGlucHV0LmFsbERheTtcblx0XHRcdGlmIChhbGxEYXkgPT09IHVuZGVmaW5lZCkgeyAvLyBzdGlsbCB1bmRlZmluZWQ/IGZhbGxiYWNrIHRvIGRlZmF1bHRcblx0XHRcdFx0YWxsRGF5ID0gZmlyc3REZWZpbmVkKFxuXHRcdFx0XHRcdHNvdXJjZSA/IHNvdXJjZS5hbGxEYXlEZWZhdWx0IDogdW5kZWZpbmVkLFxuXHRcdFx0XHRcdHQub3B0aW9ucy5hbGxEYXlEZWZhdWx0XG5cdFx0XHRcdCk7XG5cdFx0XHRcdC8vIHN0aWxsIHVuZGVmaW5lZD8gbm9ybWFsaXplRXZlbnREYXRlcyB3aWxsIGNhbGN1bGF0ZSBpdFxuXHRcdFx0fVxuXG5cdFx0XHRhc3NpZ25EYXRlc1RvRXZlbnQoc3RhcnQsIGVuZCwgYWxsRGF5LCBvdXQpO1xuXHRcdH1cblxuXHRcdHQubm9ybWFsaXplRXZlbnQob3V0KTsgLy8gaG9vayBmb3IgZXh0ZXJuYWwgdXNlLiBhIHByb3RvdHlwZSBtZXRob2RcblxuXHRcdHJldHVybiBvdXQ7XG5cdH1cblx0dC5idWlsZEV2ZW50RnJvbUlucHV0ID0gYnVpbGRFdmVudEZyb21JbnB1dDtcblxuXG5cdC8vIE5vcm1hbGl6ZXMgYW5kIGFzc2lnbnMgdGhlIGdpdmVuIGRhdGVzIHRvIHRoZSBnaXZlbiBwYXJ0aWFsbHktZm9ybWVkIGV2ZW50IG9iamVjdC5cblx0Ly8gTk9URTogbXV0YXRlcyB0aGUgZ2l2ZW4gc3RhcnQvZW5kIG1vbWVudHMuIGRvZXMgbm90IG1ha2UgYSBjb3B5LlxuXHRmdW5jdGlvbiBhc3NpZ25EYXRlc1RvRXZlbnQoc3RhcnQsIGVuZCwgYWxsRGF5LCBldmVudCkge1xuXHRcdGV2ZW50LnN0YXJ0ID0gc3RhcnQ7XG5cdFx0ZXZlbnQuZW5kID0gZW5kO1xuXHRcdGV2ZW50LmFsbERheSA9IGFsbERheTtcblx0XHRub3JtYWxpemVFdmVudERhdGVzKGV2ZW50KTtcblx0XHRiYWNrdXBFdmVudERhdGVzKGV2ZW50KTtcblx0fVxuXG5cblx0Ly8gRW5zdXJlcyBwcm9wZXIgdmFsdWVzIGZvciBhbGxEYXkvc3RhcnQvZW5kLiBBY2NlcHRzIGFuIEV2ZW50IG9iamVjdCwgb3IgYSBwbGFpbiBvYmplY3Qgd2l0aCBldmVudC1pc2ggcHJvcGVydGllcy5cblx0Ly8gTk9URTogV2lsbCBtb2RpZnkgdGhlIGdpdmVuIG9iamVjdC5cblx0ZnVuY3Rpb24gbm9ybWFsaXplRXZlbnREYXRlcyhldmVudFByb3BzKSB7XG5cblx0XHRub3JtYWxpemVFdmVudFRpbWVzKGV2ZW50UHJvcHMpO1xuXG5cdFx0aWYgKGV2ZW50UHJvcHMuZW5kICYmICFldmVudFByb3BzLmVuZC5pc0FmdGVyKGV2ZW50UHJvcHMuc3RhcnQpKSB7XG5cdFx0XHRldmVudFByb3BzLmVuZCA9IG51bGw7XG5cdFx0fVxuXG5cdFx0aWYgKCFldmVudFByb3BzLmVuZCkge1xuXHRcdFx0aWYgKHQub3B0aW9ucy5mb3JjZUV2ZW50RHVyYXRpb24pIHtcblx0XHRcdFx0ZXZlbnRQcm9wcy5lbmQgPSB0LmdldERlZmF1bHRFdmVudEVuZChldmVudFByb3BzLmFsbERheSwgZXZlbnRQcm9wcy5zdGFydCk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0ZXZlbnRQcm9wcy5lbmQgPSBudWxsO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cblx0Ly8gRW5zdXJlcyB0aGUgYWxsRGF5IHByb3BlcnR5IGV4aXN0cyBhbmQgdGhlIHRpbWVsaW5lc3Mgb2YgdGhlIHN0YXJ0L2VuZCBkYXRlcyBhcmUgY29uc2lzdGVudFxuXHRmdW5jdGlvbiBub3JtYWxpemVFdmVudFRpbWVzKGV2ZW50UHJvcHMpIHtcblx0XHRpZiAoZXZlbnRQcm9wcy5hbGxEYXkgPT0gbnVsbCkge1xuXHRcdFx0ZXZlbnRQcm9wcy5hbGxEYXkgPSAhKGV2ZW50UHJvcHMuc3RhcnQuaGFzVGltZSgpIHx8IChldmVudFByb3BzLmVuZCAmJiBldmVudFByb3BzLmVuZC5oYXNUaW1lKCkpKTtcblx0XHR9XG5cblx0XHRpZiAoZXZlbnRQcm9wcy5hbGxEYXkpIHtcblx0XHRcdGV2ZW50UHJvcHMuc3RhcnQuc3RyaXBUaW1lKCk7XG5cdFx0XHRpZiAoZXZlbnRQcm9wcy5lbmQpIHtcblx0XHRcdFx0Ly8gVE9ETzogY29uc2lkZXIgbmV4dERheVRocmVzaG9sZCBoZXJlPyBJZiBzbywgd2lsbCByZXF1aXJlIGEgbG90IG9mIHRlc3RpbmcgYW5kIGFkanVzdG1lbnRcblx0XHRcdFx0ZXZlbnRQcm9wcy5lbmQuc3RyaXBUaW1lKCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0aWYgKCFldmVudFByb3BzLnN0YXJ0Lmhhc1RpbWUoKSkge1xuXHRcdFx0XHRldmVudFByb3BzLnN0YXJ0ID0gdC5hcHBseVRpbWV6b25lKGV2ZW50UHJvcHMuc3RhcnQudGltZSgwKSk7IC8vIHdpbGwgYXNzaWduIGEgMDA6MDAgdGltZVxuXHRcdFx0fVxuXHRcdFx0aWYgKGV2ZW50UHJvcHMuZW5kICYmICFldmVudFByb3BzLmVuZC5oYXNUaW1lKCkpIHtcblx0XHRcdFx0ZXZlbnRQcm9wcy5lbmQgPSB0LmFwcGx5VGltZXpvbmUoZXZlbnRQcm9wcy5lbmQudGltZSgwKSk7IC8vIHdpbGwgYXNzaWduIGEgMDA6MDAgdGltZVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cblx0Ly8gSWYgdGhlIGdpdmVuIGV2ZW50IGlzIGEgcmVjdXJyaW5nIGV2ZW50LCBicmVhayBpdCBkb3duIGludG8gYW4gYXJyYXkgb2YgaW5kaXZpZHVhbCBpbnN0YW5jZXMuXG5cdC8vIElmIG5vdCBhIHJlY3VycmluZyBldmVudCwgcmV0dXJuIGFuIGFycmF5IHdpdGggdGhlIHNpbmdsZSBvcmlnaW5hbCBldmVudC5cblx0Ly8gSWYgZ2l2ZW4gYSBmYWxzeSBpbnB1dCAocHJvYmFibHkgYmVjYXVzZSBvZiBhIGZhaWxlZCBidWlsZEV2ZW50RnJvbUlucHV0IGNhbGwpLCByZXR1cm5zIGFuIGVtcHR5IGFycmF5LlxuXHQvLyBIQUNLOiBjYW4gb3ZlcnJpZGUgdGhlIHJlY3VycmluZyB3aW5kb3cgYnkgcHJvdmlkaW5nIGN1c3RvbSByYW5nZVN0YXJ0L3JhbmdlRW5kIChmb3IgYnVzaW5lc3NIb3VycykuXG5cdGZ1bmN0aW9uIGV4cGFuZEV2ZW50KGFic3RyYWN0RXZlbnQsIF9yYW5nZVN0YXJ0LCBfcmFuZ2VFbmQpIHtcblx0XHR2YXIgZXZlbnRzID0gW107XG5cdFx0dmFyIGRvd0hhc2g7XG5cdFx0dmFyIGRvdztcblx0XHR2YXIgaTtcblx0XHR2YXIgZGF0ZTtcblx0XHR2YXIgc3RhcnRUaW1lLCBlbmRUaW1lO1xuXHRcdHZhciBzdGFydCwgZW5kO1xuXHRcdHZhciBldmVudDtcblxuXHRcdF9yYW5nZVN0YXJ0ID0gX3JhbmdlU3RhcnQgfHwgcmFuZ2VTdGFydDtcblx0XHRfcmFuZ2VFbmQgPSBfcmFuZ2VFbmQgfHwgcmFuZ2VFbmQ7XG5cblx0XHRpZiAoYWJzdHJhY3RFdmVudCkge1xuXHRcdFx0aWYgKGFic3RyYWN0RXZlbnQuX3JlY3VycmluZykge1xuXG5cdFx0XHRcdC8vIG1ha2UgYSBib29sZWFuIGhhc2ggYXMgdG8gd2hldGhlciB0aGUgZXZlbnQgb2NjdXJzIG9uIGVhY2ggZGF5LW9mLXdlZWtcblx0XHRcdFx0aWYgKChkb3cgPSBhYnN0cmFjdEV2ZW50LmRvdykpIHtcblx0XHRcdFx0XHRkb3dIYXNoID0ge307XG5cdFx0XHRcdFx0Zm9yIChpID0gMDsgaSA8IGRvdy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0ZG93SGFzaFtkb3dbaV1dID0gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBpdGVyYXRlIHRocm91Z2ggZXZlcnkgZGF5IGluIHRoZSBjdXJyZW50IHJhbmdlXG5cdFx0XHRcdGRhdGUgPSBfcmFuZ2VTdGFydC5jbG9uZSgpLnN0cmlwVGltZSgpOyAvLyBob2xkcyB0aGUgZGF0ZSBvZiB0aGUgY3VycmVudCBkYXlcblx0XHRcdFx0d2hpbGUgKGRhdGUuaXNCZWZvcmUoX3JhbmdlRW5kKSkge1xuXG5cdFx0XHRcdFx0aWYgKCFkb3dIYXNoIHx8IGRvd0hhc2hbZGF0ZS5kYXkoKV0pIHsgLy8gaWYgZXZlcnlkYXksIG9yIHRoaXMgcGFydGljdWxhciBkYXktb2Ytd2Vla1xuXG5cdFx0XHRcdFx0XHRzdGFydFRpbWUgPSBhYnN0cmFjdEV2ZW50LnN0YXJ0OyAvLyB0aGUgc3RvcmVkIHN0YXJ0IGFuZCBlbmQgcHJvcGVydGllcyBhcmUgdGltZXMgKER1cmF0aW9ucylcblx0XHRcdFx0XHRcdGVuZFRpbWUgPSBhYnN0cmFjdEV2ZW50LmVuZDsgLy8gXCJcblx0XHRcdFx0XHRcdHN0YXJ0ID0gZGF0ZS5jbG9uZSgpO1xuXHRcdFx0XHRcdFx0ZW5kID0gbnVsbDtcblxuXHRcdFx0XHRcdFx0aWYgKHN0YXJ0VGltZSkge1xuXHRcdFx0XHRcdFx0XHRzdGFydCA9IHN0YXJ0LnRpbWUoc3RhcnRUaW1lKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmIChlbmRUaW1lKSB7XG5cdFx0XHRcdFx0XHRcdGVuZCA9IGRhdGUuY2xvbmUoKS50aW1lKGVuZFRpbWUpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRldmVudCA9ICQuZXh0ZW5kKHt9LCBhYnN0cmFjdEV2ZW50KTsgLy8gbWFrZSBhIGNvcHkgb2YgdGhlIG9yaWdpbmFsXG5cdFx0XHRcdFx0XHRhc3NpZ25EYXRlc1RvRXZlbnQoXG5cdFx0XHRcdFx0XHRcdHN0YXJ0LCBlbmQsXG5cdFx0XHRcdFx0XHRcdCFzdGFydFRpbWUgJiYgIWVuZFRpbWUsIC8vIGFsbERheT9cblx0XHRcdFx0XHRcdFx0ZXZlbnRcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRldmVudHMucHVzaChldmVudCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0ZGF0ZS5hZGQoMSwgJ2RheXMnKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGV2ZW50cy5wdXNoKGFic3RyYWN0RXZlbnQpOyAvLyByZXR1cm4gdGhlIG9yaWdpbmFsIGV2ZW50LiB3aWxsIGJlIGEgb25lLWl0ZW0gYXJyYXlcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZXZlbnRzO1xuXHR9XG5cdHQuZXhwYW5kRXZlbnQgPSBleHBhbmRFdmVudDtcblxuXG5cblx0LyogRXZlbnQgTW9kaWZpY2F0aW9uIE1hdGhcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gTW9kaWZpZXMgYW4gZXZlbnQgYW5kIGFsbCByZWxhdGVkIGV2ZW50cyBieSBhcHBseWluZyB0aGUgZ2l2ZW4gcHJvcGVydGllcy5cblx0Ly8gU3BlY2lhbCBkYXRlLWRpZmZpbmcgbG9naWMgaXMgdXNlZCBmb3IgbWFuaXB1bGF0aW9uIG9mIGRhdGVzLlxuXHQvLyBJZiBgcHJvcHNgIGRvZXMgbm90IGNvbnRhaW4gc3RhcnQvZW5kIGRhdGVzLCB0aGUgdXBkYXRlZCB2YWx1ZXMgYXJlIGFzc3VtZWQgdG8gYmUgdGhlIGV2ZW50J3MgY3VycmVudCBzdGFydC9lbmQuXG5cdC8vIEFsbCBkYXRlIGNvbXBhcmlzb25zIGFyZSBkb25lIGFnYWluc3QgdGhlIGV2ZW50J3MgcHJpc3RpbmUgX3N0YXJ0IGFuZCBfZW5kIGRhdGVzLlxuXHQvLyBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGRlbHRhIGluZm9ybWF0aW9uIGFuZCBhIGZ1bmN0aW9uIHRvIHVuZG8gYWxsIG9wZXJhdGlvbnMuXG5cdC8vIEZvciBtYWtpbmcgY29tcHV0YXRpb25zIGluIGEgZ3JhbnVsYXJpdHkgZ3JlYXRlciB0aGFuIGRheS90aW1lLCBzcGVjaWZ5IGxhcmdlVW5pdC5cblx0Ly8gTk9URTogVGhlIGdpdmVuIGBuZXdQcm9wc2AgbWlnaHQgYmUgbXV0YXRlZCBmb3Igbm9ybWFsaXphdGlvbiBwdXJwb3Nlcy5cblx0ZnVuY3Rpb24gbXV0YXRlRXZlbnQoZXZlbnQsIG5ld1Byb3BzLCBsYXJnZVVuaXQpIHtcblx0XHR2YXIgbWlzY1Byb3BzID0ge307XG5cdFx0dmFyIG9sZFByb3BzO1xuXHRcdHZhciBjbGVhckVuZDtcblx0XHR2YXIgc3RhcnREZWx0YTtcblx0XHR2YXIgZW5kRGVsdGE7XG5cdFx0dmFyIGR1cmF0aW9uRGVsdGE7XG5cdFx0dmFyIHVuZG9GdW5jO1xuXG5cdFx0Ly8gZGlmZnMgdGhlIGRhdGVzIGluIHRoZSBhcHByb3ByaWF0ZSB3YXksIHJldHVybmluZyBhIGR1cmF0aW9uXG5cdFx0ZnVuY3Rpb24gZGlmZkRhdGVzKGRhdGUxLCBkYXRlMCkgeyAvLyBkYXRlMSAtIGRhdGUwXG5cdFx0XHRpZiAobGFyZ2VVbml0KSB7XG5cdFx0XHRcdHJldHVybiBkaWZmQnlVbml0KGRhdGUxLCBkYXRlMCwgbGFyZ2VVbml0KTtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKG5ld1Byb3BzLmFsbERheSkge1xuXHRcdFx0XHRyZXR1cm4gZGlmZkRheShkYXRlMSwgZGF0ZTApO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdHJldHVybiBkaWZmRGF5VGltZShkYXRlMSwgZGF0ZTApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdG5ld1Byb3BzID0gbmV3UHJvcHMgfHwge307XG5cblx0XHQvLyBub3JtYWxpemUgbmV3IGRhdGUtcmVsYXRlZCBwcm9wZXJ0aWVzXG5cdFx0aWYgKCFuZXdQcm9wcy5zdGFydCkge1xuXHRcdFx0bmV3UHJvcHMuc3RhcnQgPSBldmVudC5zdGFydC5jbG9uZSgpO1xuXHRcdH1cblx0XHRpZiAobmV3UHJvcHMuZW5kID09PSB1bmRlZmluZWQpIHtcblx0XHRcdG5ld1Byb3BzLmVuZCA9IGV2ZW50LmVuZCA/IGV2ZW50LmVuZC5jbG9uZSgpIDogbnVsbDtcblx0XHR9XG5cdFx0aWYgKG5ld1Byb3BzLmFsbERheSA9PSBudWxsKSB7IC8vIGlzIG51bGwgb3IgdW5kZWZpbmVkP1xuXHRcdFx0bmV3UHJvcHMuYWxsRGF5ID0gZXZlbnQuYWxsRGF5O1xuXHRcdH1cblx0XHRub3JtYWxpemVFdmVudERhdGVzKG5ld1Byb3BzKTtcblxuXHRcdC8vIGNyZWF0ZSBub3JtYWxpemVkIHZlcnNpb25zIG9mIHRoZSBvcmlnaW5hbCBwcm9wcyB0byBjb21wYXJlIGFnYWluc3Rcblx0XHQvLyBuZWVkIGEgcmVhbCBlbmQgdmFsdWUsIGZvciBkaWZmaW5nXG5cdFx0b2xkUHJvcHMgPSB7XG5cdFx0XHRzdGFydDogZXZlbnQuX3N0YXJ0LmNsb25lKCksXG5cdFx0XHRlbmQ6IGV2ZW50Ll9lbmQgPyBldmVudC5fZW5kLmNsb25lKCkgOiB0LmdldERlZmF1bHRFdmVudEVuZChldmVudC5fYWxsRGF5LCBldmVudC5fc3RhcnQpLFxuXHRcdFx0YWxsRGF5OiBuZXdQcm9wcy5hbGxEYXkgLy8gbm9ybWFsaXplIHRoZSBkYXRlcyBpbiB0aGUgc2FtZSByZWdhcmQgYXMgdGhlIG5ldyBwcm9wZXJ0aWVzXG5cdFx0fTtcblx0XHRub3JtYWxpemVFdmVudERhdGVzKG9sZFByb3BzKTtcblxuXHRcdC8vIG5lZWQgdG8gY2xlYXIgdGhlIGVuZCBkYXRlIGlmIGV4cGxpY2l0bHkgY2hhbmdlZCB0byBudWxsXG5cdFx0Y2xlYXJFbmQgPSBldmVudC5fZW5kICE9PSBudWxsICYmIG5ld1Byb3BzLmVuZCA9PT0gbnVsbDtcblxuXHRcdC8vIGNvbXB1dGUgdGhlIGRlbHRhIGZvciBtb3ZpbmcgdGhlIHN0YXJ0IGRhdGVcblx0XHRzdGFydERlbHRhID0gZGlmZkRhdGVzKG5ld1Byb3BzLnN0YXJ0LCBvbGRQcm9wcy5zdGFydCk7XG5cblx0XHQvLyBjb21wdXRlIHRoZSBkZWx0YSBmb3IgbW92aW5nIHRoZSBlbmQgZGF0ZVxuXHRcdGlmIChuZXdQcm9wcy5lbmQpIHtcblx0XHRcdGVuZERlbHRhID0gZGlmZkRhdGVzKG5ld1Byb3BzLmVuZCwgb2xkUHJvcHMuZW5kKTtcblx0XHRcdGR1cmF0aW9uRGVsdGEgPSBlbmREZWx0YS5zdWJ0cmFjdChzdGFydERlbHRhKTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRkdXJhdGlvbkRlbHRhID0gbnVsbDtcblx0XHR9XG5cblx0XHQvLyBnYXRoZXIgYWxsIG5vbi1kYXRlLXJlbGF0ZWQgcHJvcGVydGllc1xuXHRcdCQuZWFjaChuZXdQcm9wcywgZnVuY3Rpb24obmFtZSwgdmFsKSB7XG5cdFx0XHRpZiAoaXNNaXNjRXZlbnRQcm9wTmFtZShuYW1lKSkge1xuXHRcdFx0XHRpZiAodmFsICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRtaXNjUHJvcHNbbmFtZV0gPSB2YWw7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIGFwcGx5IHRoZSBvcGVyYXRpb25zIHRvIHRoZSBldmVudCBhbmQgYWxsIHJlbGF0ZWQgZXZlbnRzXG5cdFx0dW5kb0Z1bmMgPSBtdXRhdGVFdmVudHMoXG5cdFx0XHRjbGllbnRFdmVudHMoZXZlbnQuX2lkKSwgLy8gZ2V0IGV2ZW50cyB3aXRoIHRoaXMgSURcblx0XHRcdGNsZWFyRW5kLFxuXHRcdFx0bmV3UHJvcHMuYWxsRGF5LFxuXHRcdFx0c3RhcnREZWx0YSxcblx0XHRcdGR1cmF0aW9uRGVsdGEsXG5cdFx0XHRtaXNjUHJvcHNcblx0XHQpO1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdGRhdGVEZWx0YTogc3RhcnREZWx0YSxcblx0XHRcdGR1cmF0aW9uRGVsdGE6IGR1cmF0aW9uRGVsdGEsXG5cdFx0XHR1bmRvOiB1bmRvRnVuY1xuXHRcdH07XG5cdH1cblxuXG5cdC8vIE1vZGlmaWVzIGFuIGFycmF5IG9mIGV2ZW50cyBpbiB0aGUgZm9sbG93aW5nIHdheXMgKG9wZXJhdGlvbnMgYXJlIGluIG9yZGVyKTpcblx0Ly8gLSBjbGVhciB0aGUgZXZlbnQncyBgZW5kYFxuXHQvLyAtIGNvbnZlcnQgdGhlIGV2ZW50IHRvIGFsbERheVxuXHQvLyAtIGFkZCBgZGF0ZURlbHRhYCB0byB0aGUgc3RhcnQgYW5kIGVuZFxuXHQvLyAtIGFkZCBgZHVyYXRpb25EZWx0YWAgdG8gdGhlIGV2ZW50J3MgZHVyYXRpb25cblx0Ly8gLSBhc3NpZ24gYG1pc2NQcm9wc2AgdG8gdGhlIGV2ZW50XG5cdC8vXG5cdC8vIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IGNhbiBiZSBjYWxsZWQgdG8gdW5kbyBhbGwgdGhlIG9wZXJhdGlvbnMuXG5cdC8vXG5cdC8vIFRPRE86IGRvbid0IHVzZSBzbyBtYW55IGNsb3N1cmVzLiBwb3NzaWJsZSBtZW1vcnkgaXNzdWVzIHdoZW4gbG90cyBvZiBldmVudHMgd2l0aCBzYW1lIElELlxuXHQvL1xuXHRmdW5jdGlvbiBtdXRhdGVFdmVudHMoZXZlbnRzLCBjbGVhckVuZCwgYWxsRGF5LCBkYXRlRGVsdGEsIGR1cmF0aW9uRGVsdGEsIG1pc2NQcm9wcykge1xuXHRcdHZhciBpc0FtYmlnVGltZXpvbmUgPSB0LmdldElzQW1iaWdUaW1lem9uZSgpO1xuXHRcdHZhciB1bmRvRnVuY3Rpb25zID0gW107XG5cblx0XHQvLyBub3JtYWxpemUgemVyby1sZW5ndGggZGVsdGFzIHRvIGJlIG51bGxcblx0XHRpZiAoZGF0ZURlbHRhICYmICFkYXRlRGVsdGEudmFsdWVPZigpKSB7IGRhdGVEZWx0YSA9IG51bGw7IH1cblx0XHRpZiAoZHVyYXRpb25EZWx0YSAmJiAhZHVyYXRpb25EZWx0YS52YWx1ZU9mKCkpIHsgZHVyYXRpb25EZWx0YSA9IG51bGw7IH1cblxuXHRcdCQuZWFjaChldmVudHMsIGZ1bmN0aW9uKGksIGV2ZW50KSB7XG5cdFx0XHR2YXIgb2xkUHJvcHM7XG5cdFx0XHR2YXIgbmV3UHJvcHM7XG5cblx0XHRcdC8vIGJ1aWxkIGFuIG9iamVjdCBob2xkaW5nIGFsbCB0aGUgb2xkIHZhbHVlcywgYm90aCBkYXRlLXJlbGF0ZWQgYW5kIG1pc2MuXG5cdFx0XHQvLyBmb3IgdGhlIHVuZG8gZnVuY3Rpb24uXG5cdFx0XHRvbGRQcm9wcyA9IHtcblx0XHRcdFx0c3RhcnQ6IGV2ZW50LnN0YXJ0LmNsb25lKCksXG5cdFx0XHRcdGVuZDogZXZlbnQuZW5kID8gZXZlbnQuZW5kLmNsb25lKCkgOiBudWxsLFxuXHRcdFx0XHRhbGxEYXk6IGV2ZW50LmFsbERheVxuXHRcdFx0fTtcblx0XHRcdCQuZWFjaChtaXNjUHJvcHMsIGZ1bmN0aW9uKG5hbWUpIHtcblx0XHRcdFx0b2xkUHJvcHNbbmFtZV0gPSBldmVudFtuYW1lXTtcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBuZXcgZGF0ZS1yZWxhdGVkIHByb3BlcnRpZXMuIHdvcmsgb2ZmIHRoZSBvcmlnaW5hbCBkYXRlIHNuYXBzaG90LlxuXHRcdFx0Ly8gb2sgdG8gdXNlIHJlZmVyZW5jZXMgYmVjYXVzZSB0aGV5IHdpbGwgYmUgdGhyb3duIGF3YXkgd2hlbiBiYWNrdXBFdmVudERhdGVzIGlzIGNhbGxlZC5cblx0XHRcdG5ld1Byb3BzID0ge1xuXHRcdFx0XHRzdGFydDogZXZlbnQuX3N0YXJ0LFxuXHRcdFx0XHRlbmQ6IGV2ZW50Ll9lbmQsXG5cdFx0XHRcdGFsbERheTogYWxsRGF5IC8vIG5vcm1hbGl6ZSB0aGUgZGF0ZXMgaW4gdGhlIHNhbWUgcmVnYXJkIGFzIHRoZSBuZXcgcHJvcGVydGllc1xuXHRcdFx0fTtcblx0XHRcdG5vcm1hbGl6ZUV2ZW50RGF0ZXMobmV3UHJvcHMpOyAvLyBtYXNzYWdlcyBzdGFydC9lbmQvYWxsRGF5XG5cblx0XHRcdC8vIHN0cmlwIG9yIGVuc3VyZSB0aGUgZW5kIGRhdGVcblx0XHRcdGlmIChjbGVhckVuZCkge1xuXHRcdFx0XHRuZXdQcm9wcy5lbmQgPSBudWxsO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAoZHVyYXRpb25EZWx0YSAmJiAhbmV3UHJvcHMuZW5kKSB7IC8vIHRoZSBkdXJhdGlvbiB0cmFuc2xhdGlvbiByZXF1aXJlcyBhbiBlbmQgZGF0ZVxuXHRcdFx0XHRuZXdQcm9wcy5lbmQgPSB0LmdldERlZmF1bHRFdmVudEVuZChuZXdQcm9wcy5hbGxEYXksIG5ld1Byb3BzLnN0YXJ0KTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGRhdGVEZWx0YSkge1xuXHRcdFx0XHRuZXdQcm9wcy5zdGFydC5hZGQoZGF0ZURlbHRhKTtcblx0XHRcdFx0aWYgKG5ld1Byb3BzLmVuZCkge1xuXHRcdFx0XHRcdG5ld1Byb3BzLmVuZC5hZGQoZGF0ZURlbHRhKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoZHVyYXRpb25EZWx0YSkge1xuXHRcdFx0XHRuZXdQcm9wcy5lbmQuYWRkKGR1cmF0aW9uRGVsdGEpOyAvLyBlbmQgYWxyZWFkeSBlbnN1cmVkIGFib3ZlXG5cdFx0XHR9XG5cblx0XHRcdC8vIGlmIHRoZSBkYXRlcyBoYXZlIGNoYW5nZWQsIGFuZCB3ZSBrbm93IGl0IGlzIGltcG9zc2libGUgdG8gcmVjb21wdXRlIHRoZVxuXHRcdFx0Ly8gdGltZXpvbmUgb2Zmc2V0cywgc3RyaXAgdGhlIHpvbmUuXG5cdFx0XHRpZiAoXG5cdFx0XHRcdGlzQW1iaWdUaW1lem9uZSAmJlxuXHRcdFx0XHQhbmV3UHJvcHMuYWxsRGF5ICYmXG5cdFx0XHRcdChkYXRlRGVsdGEgfHwgZHVyYXRpb25EZWx0YSlcblx0XHRcdCkge1xuXHRcdFx0XHRuZXdQcm9wcy5zdGFydC5zdHJpcFpvbmUoKTtcblx0XHRcdFx0aWYgKG5ld1Byb3BzLmVuZCkge1xuXHRcdFx0XHRcdG5ld1Byb3BzLmVuZC5zdHJpcFpvbmUoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQkLmV4dGVuZChldmVudCwgbWlzY1Byb3BzLCBuZXdQcm9wcyk7IC8vIGNvcHkgb3ZlciBtaXNjIHByb3BzLCB0aGVuIGRhdGUtcmVsYXRlZCBwcm9wc1xuXHRcdFx0YmFja3VwRXZlbnREYXRlcyhldmVudCk7IC8vIHJlZ2VuZXJhdGUgaW50ZXJuYWwgX3N0YXJ0L19lbmQvX2FsbERheVxuXG5cdFx0XHR1bmRvRnVuY3Rpb25zLnB1c2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCQuZXh0ZW5kKGV2ZW50LCBvbGRQcm9wcyk7XG5cdFx0XHRcdGJhY2t1cEV2ZW50RGF0ZXMoZXZlbnQpOyAvLyByZWdlbmVyYXRlIGludGVybmFsIF9zdGFydC9fZW5kL19hbGxEYXlcblx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB1bmRvRnVuY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHVuZG9GdW5jdGlvbnNbaV0oKTtcblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cbn1cblxuXG4vLyBob29rIGZvciBleHRlcm5hbCBsaWJzIHRvIG1hbmlwdWxhdGUgZXZlbnQgcHJvcGVydGllcyB1cG9uIGNyZWF0aW9uLlxuLy8gc2hvdWxkIG1hbmlwdWxhdGUgdGhlIGV2ZW50IGluLXBsYWNlLlxuQ2FsZW5kYXIucHJvdG90eXBlLm5vcm1hbGl6ZUV2ZW50ID0gZnVuY3Rpb24oZXZlbnQpIHtcbn07XG5cblxuLy8gRG9lcyB0aGUgZ2l2ZW4gc3BhbiAoc3RhcnQsIGVuZCwgYW5kIG90aGVyIGxvY2F0aW9uIGluZm9ybWF0aW9uKVxuLy8gZnVsbHkgY29udGFpbiB0aGUgb3RoZXI/XG5DYWxlbmRhci5wcm90b3R5cGUuc3BhbkNvbnRhaW5zU3BhbiA9IGZ1bmN0aW9uKG91dGVyU3BhbiwgaW5uZXJTcGFuKSB7XG5cdHZhciBldmVudFN0YXJ0ID0gb3V0ZXJTcGFuLnN0YXJ0LmNsb25lKCkuc3RyaXBab25lKCk7XG5cdHZhciBldmVudEVuZCA9IHRoaXMuZ2V0RXZlbnRFbmQob3V0ZXJTcGFuKS5zdHJpcFpvbmUoKTtcblxuXHRyZXR1cm4gaW5uZXJTcGFuLnN0YXJ0ID49IGV2ZW50U3RhcnQgJiYgaW5uZXJTcGFuLmVuZCA8PSBldmVudEVuZDtcbn07XG5cblxuLy8gUmV0dXJucyBhIGxpc3Qgb2YgZXZlbnRzIHRoYXQgdGhlIGdpdmVuIGV2ZW50IHNob3VsZCBiZSBjb21wYXJlZCBhZ2FpbnN0IHdoZW4gYmVpbmcgY29uc2lkZXJlZCBmb3IgYSBtb3ZlIHRvXG4vLyB0aGUgc3BlY2lmaWVkIHNwYW4uIEF0dGFjaGVkIHRvIHRoZSBDYWxlbmRhcidzIHByb3RvdHlwZSBiZWNhdXNlIEV2ZW50TWFuYWdlciBpcyBhIG1peGluIGZvciBhIENhbGVuZGFyLlxuQ2FsZW5kYXIucHJvdG90eXBlLmdldFBlZXJFdmVudHMgPSBmdW5jdGlvbihzcGFuLCBldmVudCkge1xuXHR2YXIgY2FjaGUgPSB0aGlzLmdldEV2ZW50Q2FjaGUoKTtcblx0dmFyIHBlZXJFdmVudHMgPSBbXTtcblx0dmFyIGksIG90aGVyRXZlbnQ7XG5cblx0Zm9yIChpID0gMDsgaSA8IGNhY2hlLmxlbmd0aDsgaSsrKSB7XG5cdFx0b3RoZXJFdmVudCA9IGNhY2hlW2ldO1xuXHRcdGlmIChcblx0XHRcdCFldmVudCB8fFxuXHRcdFx0ZXZlbnQuX2lkICE9PSBvdGhlckV2ZW50Ll9pZCAvLyBkb24ndCBjb21wYXJlIHRoZSBldmVudCB0byBpdHNlbGYgb3Igb3RoZXIgcmVsYXRlZCBbcmVwZWF0aW5nXSBldmVudHNcblx0XHQpIHtcblx0XHRcdHBlZXJFdmVudHMucHVzaChvdGhlckV2ZW50KTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gcGVlckV2ZW50cztcbn07XG5cblxuLy8gdXBkYXRlcyB0aGUgXCJiYWNrdXBcIiBwcm9wZXJ0aWVzLCB3aGljaCBhcmUgcHJlc2VydmVkIGluIG9yZGVyIHRvIGNvbXB1dGUgZGlmZnMgbGF0ZXIgb24uXG5mdW5jdGlvbiBiYWNrdXBFdmVudERhdGVzKGV2ZW50KSB7XG5cdGV2ZW50Ll9hbGxEYXkgPSBldmVudC5hbGxEYXk7XG5cdGV2ZW50Ll9zdGFydCA9IGV2ZW50LnN0YXJ0LmNsb25lKCk7XG5cdGV2ZW50Ll9lbmQgPSBldmVudC5lbmQgPyBldmVudC5lbmQuY2xvbmUoKSA6IG51bGw7XG59XG5cblxuLyogT3ZlcmxhcHBpbmcgLyBDb25zdHJhaW5pbmdcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG4vLyBEZXRlcm1pbmVzIGlmIHRoZSBnaXZlbiBldmVudCBjYW4gYmUgcmVsb2NhdGVkIHRvIHRoZSBnaXZlbiBzcGFuICh1bnpvbmVkIHN0YXJ0L2VuZCB3aXRoIG90aGVyIG1pc2MgZGF0YSlcbkNhbGVuZGFyLnByb3RvdHlwZS5pc0V2ZW50U3BhbkFsbG93ZWQgPSBmdW5jdGlvbihzcGFuLCBldmVudCkge1xuXHR2YXIgc291cmNlID0gZXZlbnQuc291cmNlIHx8IHt9O1xuXG5cdHZhciBjb25zdHJhaW50ID0gZmlyc3REZWZpbmVkKFxuXHRcdGV2ZW50LmNvbnN0cmFpbnQsXG5cdFx0c291cmNlLmNvbnN0cmFpbnQsXG5cdFx0dGhpcy5vcHRpb25zLmV2ZW50Q29uc3RyYWludFxuXHQpO1xuXG5cdHZhciBvdmVybGFwID0gZmlyc3REZWZpbmVkKFxuXHRcdGV2ZW50Lm92ZXJsYXAsXG5cdFx0c291cmNlLm92ZXJsYXAsXG5cdFx0dGhpcy5vcHRpb25zLmV2ZW50T3ZlcmxhcFxuXHQpO1xuXG5cdHJldHVybiB0aGlzLmlzU3BhbkFsbG93ZWQoc3BhbiwgY29uc3RyYWludCwgb3ZlcmxhcCwgZXZlbnQpICYmXG5cdFx0KCF0aGlzLm9wdGlvbnMuZXZlbnRBbGxvdyB8fCB0aGlzLm9wdGlvbnMuZXZlbnRBbGxvdyhzcGFuLCBldmVudCkgIT09IGZhbHNlKTtcbn07XG5cblxuLy8gRGV0ZXJtaW5lcyBpZiBhbiBleHRlcm5hbCBldmVudCBjYW4gYmUgcmVsb2NhdGVkIHRvIHRoZSBnaXZlbiBzcGFuICh1bnpvbmVkIHN0YXJ0L2VuZCB3aXRoIG90aGVyIG1pc2MgZGF0YSlcbkNhbGVuZGFyLnByb3RvdHlwZS5pc0V4dGVybmFsU3BhbkFsbG93ZWQgPSBmdW5jdGlvbihldmVudFNwYW4sIGV2ZW50TG9jYXRpb24sIGV2ZW50UHJvcHMpIHtcblx0dmFyIGV2ZW50SW5wdXQ7XG5cdHZhciBldmVudDtcblxuXHQvLyBub3RlOiB2ZXJ5IHNpbWlsYXIgbG9naWMgaXMgaW4gVmlldydzIHJlcG9ydEV4dGVybmFsRHJvcFxuXHRpZiAoZXZlbnRQcm9wcykge1xuXHRcdGV2ZW50SW5wdXQgPSAkLmV4dGVuZCh7fSwgZXZlbnRQcm9wcywgZXZlbnRMb2NhdGlvbik7XG5cdFx0ZXZlbnQgPSB0aGlzLmV4cGFuZEV2ZW50KFxuXHRcdFx0dGhpcy5idWlsZEV2ZW50RnJvbUlucHV0KGV2ZW50SW5wdXQpXG5cdFx0KVswXTtcblx0fVxuXG5cdGlmIChldmVudCkge1xuXHRcdHJldHVybiB0aGlzLmlzRXZlbnRTcGFuQWxsb3dlZChldmVudFNwYW4sIGV2ZW50KTtcblx0fVxuXHRlbHNlIHsgLy8gdHJlYXQgaXQgYXMgYSBzZWxlY3Rpb25cblxuXHRcdHJldHVybiB0aGlzLmlzU2VsZWN0aW9uU3BhbkFsbG93ZWQoZXZlbnRTcGFuKTtcblx0fVxufTtcblxuXG4vLyBEZXRlcm1pbmVzIHRoZSBnaXZlbiBzcGFuICh1bnpvbmVkIHN0YXJ0L2VuZCB3aXRoIG90aGVyIG1pc2MgZGF0YSkgY2FuIGJlIHNlbGVjdGVkLlxuQ2FsZW5kYXIucHJvdG90eXBlLmlzU2VsZWN0aW9uU3BhbkFsbG93ZWQgPSBmdW5jdGlvbihzcGFuKSB7XG5cdHJldHVybiB0aGlzLmlzU3BhbkFsbG93ZWQoc3BhbiwgdGhpcy5vcHRpb25zLnNlbGVjdENvbnN0cmFpbnQsIHRoaXMub3B0aW9ucy5zZWxlY3RPdmVybGFwKSAmJlxuXHRcdCghdGhpcy5vcHRpb25zLnNlbGVjdEFsbG93IHx8IHRoaXMub3B0aW9ucy5zZWxlY3RBbGxvdyhzcGFuKSAhPT0gZmFsc2UpO1xufTtcblxuXG4vLyBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIHNwYW4gKGNhdXNlZCBieSBhbiBldmVudCBkcm9wL3Jlc2l6ZSBvciBhIHNlbGVjdGlvbikgaXMgYWxsb3dlZCB0byBleGlzdFxuLy8gYWNjb3JkaW5nIHRvIHRoZSBjb25zdHJhaW50L292ZXJsYXAgc2V0dGluZ3MuXG4vLyBgZXZlbnRgIGlzIG5vdCByZXF1aXJlZCBpZiBjaGVja2luZyBhIHNlbGVjdGlvbi5cbkNhbGVuZGFyLnByb3RvdHlwZS5pc1NwYW5BbGxvd2VkID0gZnVuY3Rpb24oc3BhbiwgY29uc3RyYWludCwgb3ZlcmxhcCwgZXZlbnQpIHtcblx0dmFyIGNvbnN0cmFpbnRFdmVudHM7XG5cdHZhciBhbnlDb250YWlubWVudDtcblx0dmFyIHBlZXJFdmVudHM7XG5cdHZhciBpLCBwZWVyRXZlbnQ7XG5cdHZhciBwZWVyT3ZlcmxhcDtcblxuXHQvLyB0aGUgcmFuZ2UgbXVzdCBiZSBmdWxseSBjb250YWluZWQgYnkgYXQgbGVhc3Qgb25lIG9mIHByb2R1Y2VkIGNvbnN0cmFpbnQgZXZlbnRzXG5cdGlmIChjb25zdHJhaW50ICE9IG51bGwpIHtcblxuXHRcdC8vIG5vdCB0cmVhdGVkIGFzIGFuIGV2ZW50ISBpbnRlcm1lZGlhdGUgZGF0YSBzdHJ1Y3R1cmVcblx0XHQvLyBUT0RPOiB1c2UgcmFuZ2VzIGluIHRoZSBmdXR1cmVcblx0XHRjb25zdHJhaW50RXZlbnRzID0gdGhpcy5jb25zdHJhaW50VG9FdmVudHMoY29uc3RyYWludCk7XG5cdFx0aWYgKGNvbnN0cmFpbnRFdmVudHMpIHsgLy8gbm90IGludmFsaWRcblxuXHRcdFx0YW55Q29udGFpbm1lbnQgPSBmYWxzZTtcblx0XHRcdGZvciAoaSA9IDA7IGkgPCBjb25zdHJhaW50RXZlbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmICh0aGlzLnNwYW5Db250YWluc1NwYW4oY29uc3RyYWludEV2ZW50c1tpXSwgc3BhbikpIHtcblx0XHRcdFx0XHRhbnlDb250YWlubWVudCA9IHRydWU7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYgKCFhbnlDb250YWlubWVudCkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cGVlckV2ZW50cyA9IHRoaXMuZ2V0UGVlckV2ZW50cyhzcGFuLCBldmVudCk7XG5cblx0Zm9yIChpID0gMDsgaSA8IHBlZXJFdmVudHMubGVuZ3RoOyBpKyspICB7XG5cdFx0cGVlckV2ZW50ID0gcGVlckV2ZW50c1tpXTtcblxuXHRcdC8vIHRoZXJlIG5lZWRzIHRvIGJlIGFuIGFjdHVhbCBpbnRlcnNlY3Rpb24gYmVmb3JlIGRpc2FsbG93aW5nIGFueXRoaW5nXG5cdFx0aWYgKHRoaXMuZXZlbnRJbnRlcnNlY3RzUmFuZ2UocGVlckV2ZW50LCBzcGFuKSkge1xuXG5cdFx0XHQvLyBldmFsdWF0ZSBvdmVybGFwIGZvciB0aGUgZ2l2ZW4gcmFuZ2UgYW5kIHNob3J0LWNpcmN1aXQgaWYgbmVjZXNzYXJ5XG5cdFx0XHRpZiAob3ZlcmxhcCA9PT0gZmFsc2UpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0Ly8gaWYgdGhlIGV2ZW50J3Mgb3ZlcmxhcCBpcyBhIHRlc3QgZnVuY3Rpb24sIHBhc3MgdGhlIHBlZXIgZXZlbnQgaW4gcXVlc3Rpb24gYXMgdGhlIGZpcnN0IHBhcmFtXG5cdFx0XHRlbHNlIGlmICh0eXBlb2Ygb3ZlcmxhcCA9PT0gJ2Z1bmN0aW9uJyAmJiAhb3ZlcmxhcChwZWVyRXZlbnQsIGV2ZW50KSkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHRcdC8vIGlmIHdlIGFyZSBjb21wdXRpbmcgaWYgdGhlIGdpdmVuIHJhbmdlIGlzIGFsbG93YWJsZSBmb3IgYW4gZXZlbnQsIGNvbnNpZGVyIHRoZSBvdGhlciBldmVudCdzXG5cdFx0XHQvLyBFdmVudE9iamVjdC1zcGVjaWZpYyBvciBTb3VyY2Utc3BlY2lmaWMgYG92ZXJsYXBgIHByb3BlcnR5XG5cdFx0XHRpZiAoZXZlbnQpIHtcblx0XHRcdFx0cGVlck92ZXJsYXAgPSBmaXJzdERlZmluZWQoXG5cdFx0XHRcdFx0cGVlckV2ZW50Lm92ZXJsYXAsXG5cdFx0XHRcdFx0KHBlZXJFdmVudC5zb3VyY2UgfHwge30pLm92ZXJsYXBcblx0XHRcdFx0XHQvLyB3ZSBhbHJlYWR5IGNvbnNpZGVyZWQgdGhlIGdsb2JhbCBgZXZlbnRPdmVybGFwYFxuXHRcdFx0XHQpO1xuXHRcdFx0XHRpZiAocGVlck92ZXJsYXAgPT09IGZhbHNlKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIGlmIHRoZSBwZWVyIGV2ZW50J3Mgb3ZlcmxhcCBpcyBhIHRlc3QgZnVuY3Rpb24sIHBhc3MgdGhlIHN1YmplY3QgZXZlbnQgYXMgdGhlIGZpcnN0IHBhcmFtXG5cdFx0XHRcdGlmICh0eXBlb2YgcGVlck92ZXJsYXAgPT09ICdmdW5jdGlvbicgJiYgIXBlZXJPdmVybGFwKGV2ZW50LCBwZWVyRXZlbnQpKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHRydWU7XG59O1xuXG5cbi8vIEdpdmVuIGFuIGV2ZW50IGlucHV0IGZyb20gdGhlIEFQSSwgcHJvZHVjZXMgYW4gYXJyYXkgb2YgZXZlbnQgb2JqZWN0cy4gUG9zc2libGUgZXZlbnQgaW5wdXRzOlxuLy8gJ2J1c2luZXNzSG91cnMnXG4vLyBBbiBldmVudCBJRCAobnVtYmVyIG9yIHN0cmluZylcbi8vIEFuIG9iamVjdCB3aXRoIHNwZWNpZmljIHN0YXJ0L2VuZCBkYXRlcyBvciBhIHJlY3VycmluZyBldmVudCAobGlrZSB3aGF0IGJ1c2luZXNzSG91cnMgYWNjZXB0cylcbkNhbGVuZGFyLnByb3RvdHlwZS5jb25zdHJhaW50VG9FdmVudHMgPSBmdW5jdGlvbihjb25zdHJhaW50SW5wdXQpIHtcblxuXHRpZiAoY29uc3RyYWludElucHV0ID09PSAnYnVzaW5lc3NIb3VycycpIHtcblx0XHRyZXR1cm4gdGhpcy5nZXRDdXJyZW50QnVzaW5lc3NIb3VyRXZlbnRzKCk7XG5cdH1cblxuXHRpZiAodHlwZW9mIGNvbnN0cmFpbnRJbnB1dCA9PT0gJ29iamVjdCcpIHtcblx0XHRpZiAoY29uc3RyYWludElucHV0LnN0YXJ0ICE9IG51bGwpIHsgLy8gbmVlZHMgdG8gYmUgZXZlbnQtbGlrZSBpbnB1dFxuXHRcdFx0cmV0dXJuIHRoaXMuZXhwYW5kRXZlbnQodGhpcy5idWlsZEV2ZW50RnJvbUlucHV0KGNvbnN0cmFpbnRJbnB1dCkpO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdHJldHVybiBudWxsOyAvLyBpbnZhbGlkXG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHRoaXMuY2xpZW50RXZlbnRzKGNvbnN0cmFpbnRJbnB1dCk7IC8vIHByb2JhYmx5IGFuIElEXG59O1xuXG5cbi8vIERvZXMgdGhlIGV2ZW50J3MgZGF0ZSByYW5nZSBpbnRlcnNlY3Qgd2l0aCB0aGUgZ2l2ZW4gcmFuZ2U/XG4vLyBzdGFydC9lbmQgYWxyZWFkeSBhc3N1bWVkIHRvIGhhdmUgc3RyaXBwZWQgem9uZXMgOihcbkNhbGVuZGFyLnByb3RvdHlwZS5ldmVudEludGVyc2VjdHNSYW5nZSA9IGZ1bmN0aW9uKGV2ZW50LCByYW5nZSkge1xuXHR2YXIgZXZlbnRTdGFydCA9IGV2ZW50LnN0YXJ0LmNsb25lKCkuc3RyaXBab25lKCk7XG5cdHZhciBldmVudEVuZCA9IHRoaXMuZ2V0RXZlbnRFbmQoZXZlbnQpLnN0cmlwWm9uZSgpO1xuXG5cdHJldHVybiByYW5nZS5zdGFydCA8IGV2ZW50RW5kICYmIHJhbmdlLmVuZCA+IGV2ZW50U3RhcnQ7XG59O1xuXG5cbi8qIEJ1c2luZXNzIEhvdXJzXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbnZhciBCVVNJTkVTU19IT1VSX0VWRU5UX0RFRkFVTFRTID0ge1xuXHRpZDogJ19mY0J1c2luZXNzSG91cnMnLCAvLyB3aWxsIHJlbGF0ZSBldmVudHMgZnJvbSBkaWZmZXJlbnQgY2FsbHMgdG8gZXhwYW5kRXZlbnRcblx0c3RhcnQ6ICcwOTowMCcsXG5cdGVuZDogJzE3OjAwJyxcblx0ZG93OiBbIDEsIDIsIDMsIDQsIDUgXSwgLy8gbW9uZGF5IC0gZnJpZGF5XG5cdHJlbmRlcmluZzogJ2ludmVyc2UtYmFja2dyb3VuZCdcblx0Ly8gY2xhc3NOYW1lcyBhcmUgZGVmaW5lZCBpbiBidXNpbmVzc0hvdXJzU2VnQ2xhc3Nlc1xufTtcblxuLy8gUmV0dXJuIGV2ZW50cyBvYmplY3RzIGZvciBidXNpbmVzcyBob3VycyB3aXRoaW4gdGhlIGN1cnJlbnQgdmlldy5cbi8vIEFidXNlIG9mIG91ciBldmVudCBzeXN0ZW0gOihcbkNhbGVuZGFyLnByb3RvdHlwZS5nZXRDdXJyZW50QnVzaW5lc3NIb3VyRXZlbnRzID0gZnVuY3Rpb24od2hvbGVEYXkpIHtcblx0cmV0dXJuIHRoaXMuY29tcHV0ZUJ1c2luZXNzSG91ckV2ZW50cyh3aG9sZURheSwgdGhpcy5vcHRpb25zLmJ1c2luZXNzSG91cnMpO1xufTtcblxuLy8gR2l2ZW4gYSByYXcgaW5wdXQgdmFsdWUgZnJvbSBvcHRpb25zLCByZXR1cm4gZXZlbnRzIG9iamVjdHMgZm9yIGJ1c2luZXNzIGhvdXJzIHdpdGhpbiB0aGUgY3VycmVudCB2aWV3LlxuQ2FsZW5kYXIucHJvdG90eXBlLmNvbXB1dGVCdXNpbmVzc0hvdXJFdmVudHMgPSBmdW5jdGlvbih3aG9sZURheSwgaW5wdXQpIHtcblx0aWYgKGlucHV0ID09PSB0cnVlKSB7XG5cdFx0cmV0dXJuIHRoaXMuZXhwYW5kQnVzaW5lc3NIb3VyRXZlbnRzKHdob2xlRGF5LCBbIHt9IF0pO1xuXHR9XG5cdGVsc2UgaWYgKCQuaXNQbGFpbk9iamVjdChpbnB1dCkpIHtcblx0XHRyZXR1cm4gdGhpcy5leHBhbmRCdXNpbmVzc0hvdXJFdmVudHMod2hvbGVEYXksIFsgaW5wdXQgXSk7XG5cdH1cblx0ZWxzZSBpZiAoJC5pc0FycmF5KGlucHV0KSkge1xuXHRcdHJldHVybiB0aGlzLmV4cGFuZEJ1c2luZXNzSG91ckV2ZW50cyh3aG9sZURheSwgaW5wdXQsIHRydWUpO1xuXHR9XG5cdGVsc2Uge1xuXHRcdHJldHVybiBbXTtcblx0fVxufTtcblxuLy8gaW5wdXRzIGV4cGVjdGVkIHRvIGJlIGFuIGFycmF5IG9mIG9iamVjdHMuXG4vLyBpZiBpZ25vcmVOb0RvdyBpcyB0cnVlLCB3aWxsIGlnbm9yZSBlbnRyaWVzIHRoYXQgZG9uJ3Qgc3BlY2lmeSBhIGRheS1vZi13ZWVrIChkb3cpIGtleS5cbkNhbGVuZGFyLnByb3RvdHlwZS5leHBhbmRCdXNpbmVzc0hvdXJFdmVudHMgPSBmdW5jdGlvbih3aG9sZURheSwgaW5wdXRzLCBpZ25vcmVOb0Rvdykge1xuXHR2YXIgdmlldyA9IHRoaXMuZ2V0VmlldygpO1xuXHR2YXIgZXZlbnRzID0gW107XG5cdHZhciBpLCBpbnB1dDtcblxuXHRmb3IgKGkgPSAwOyBpIDwgaW5wdXRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0aW5wdXQgPSBpbnB1dHNbaV07XG5cblx0XHRpZiAoaWdub3JlTm9Eb3cgJiYgIWlucHV0LmRvdykge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gZ2l2ZSBkZWZhdWx0cy4gd2lsbCBtYWtlIGEgY29weVxuXHRcdGlucHV0ID0gJC5leHRlbmQoe30sIEJVU0lORVNTX0hPVVJfRVZFTlRfREVGQVVMVFMsIGlucHV0KTtcblxuXHRcdC8vIGlmIGEgd2hvbGUtZGF5IHNlcmllcyBpcyByZXF1ZXN0ZWQsIGNsZWFyIHRoZSBzdGFydC9lbmQgdGltZXNcblx0XHRpZiAod2hvbGVEYXkpIHtcblx0XHRcdGlucHV0LnN0YXJ0ID0gbnVsbDtcblx0XHRcdGlucHV0LmVuZCA9IG51bGw7XG5cdFx0fVxuXG5cdFx0ZXZlbnRzLnB1c2guYXBwbHkoZXZlbnRzLCAvLyBhcHBlbmRcblx0XHRcdHRoaXMuZXhwYW5kRXZlbnQoXG5cdFx0XHRcdHRoaXMuYnVpbGRFdmVudEZyb21JbnB1dChpbnB1dCksXG5cdFx0XHRcdHZpZXcuc3RhcnQsXG5cdFx0XHRcdHZpZXcuZW5kXG5cdFx0XHQpXG5cdFx0KTtcblx0fVxuXG5cdHJldHVybiBldmVudHM7XG59O1xuXG47O1xuXG4vKiBBbiBhYnN0cmFjdCBjbGFzcyBmb3IgdGhlIFwiYmFzaWNcIiB2aWV3cywgYXMgd2VsbCBhcyBtb250aCB2aWV3LiBSZW5kZXJzIG9uZSBvciBtb3JlIHJvd3Mgb2YgZGF5IGNlbGxzLlxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4vLyBJdCBpcyBhIG1hbmFnZXIgZm9yIGEgRGF5R3JpZCBzdWJjb21wb25lbnQsIHdoaWNoIGRvZXMgbW9zdCBvZiB0aGUgaGVhdnkgbGlmdGluZy5cbi8vIEl0IGlzIHJlc3BvbnNpYmxlIGZvciBtYW5hZ2luZyB3aWR0aC9oZWlnaHQuXG5cbnZhciBCYXNpY1ZpZXcgPSBGQy5CYXNpY1ZpZXcgPSBWaWV3LmV4dGVuZCh7XG5cblx0c2Nyb2xsZXI6IG51bGwsXG5cblx0ZGF5R3JpZENsYXNzOiBEYXlHcmlkLCAvLyBjbGFzcyB0aGUgZGF5R3JpZCB3aWxsIGJlIGluc3RhbnRpYXRlZCBmcm9tIChvdmVycmlkYWJsZSBieSBzdWJjbGFzc2VzKVxuXHRkYXlHcmlkOiBudWxsLCAvLyB0aGUgbWFpbiBzdWJjb21wb25lbnQgdGhhdCBkb2VzIG1vc3Qgb2YgdGhlIGhlYXZ5IGxpZnRpbmdcblxuXHRkYXlOdW1iZXJzVmlzaWJsZTogZmFsc2UsIC8vIGRpc3BsYXkgZGF5IG51bWJlcnMgb24gZWFjaCBkYXkgY2VsbD9cblx0Y29sV2Vla051bWJlcnNWaXNpYmxlOiBmYWxzZSwgLy8gZGlzcGxheSB3ZWVrIG51bWJlcnMgYWxvbmcgdGhlIHNpZGU/XG5cdGNlbGxXZWVrTnVtYmVyc1Zpc2libGU6IGZhbHNlLCAvLyBkaXNwbGF5IHdlZWsgbnVtYmVycyBpbiBkYXkgY2VsbD9cblxuXHR3ZWVrTnVtYmVyV2lkdGg6IG51bGwsIC8vIHdpZHRoIG9mIGFsbCB0aGUgd2Vlay1udW1iZXIgY2VsbHMgcnVubmluZyBkb3duIHRoZSBzaWRlXG5cblx0aGVhZENvbnRhaW5lckVsOiBudWxsLCAvLyBkaXYgdGhhdCBob2xkJ3MgdGhlIGRheUdyaWQncyByZW5kZXJlZCBkYXRlIGhlYWRlclxuXHRoZWFkUm93RWw6IG51bGwsIC8vIHRoZSBmYWtlIHJvdyBlbGVtZW50IG9mIHRoZSBkYXktb2Ytd2VlayBoZWFkZXJcblxuXG5cdGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuZGF5R3JpZCA9IHRoaXMuaW5zdGFudGlhdGVEYXlHcmlkKCk7XG5cblx0XHR0aGlzLnNjcm9sbGVyID0gbmV3IFNjcm9sbGVyKHtcblx0XHRcdG92ZXJmbG93WDogJ2hpZGRlbicsXG5cdFx0XHRvdmVyZmxvd1k6ICdhdXRvJ1xuXHRcdH0pO1xuXHR9LFxuXG5cblx0Ly8gR2VuZXJhdGVzIHRoZSBEYXlHcmlkIG9iamVjdCB0aGlzIHZpZXcgbmVlZHMuIERyYXdzIGZyb20gdGhpcy5kYXlHcmlkQ2xhc3Ncblx0aW5zdGFudGlhdGVEYXlHcmlkOiBmdW5jdGlvbigpIHtcblx0XHQvLyBnZW5lcmF0ZSBhIHN1YmNsYXNzIG9uIHRoZSBmbHkgd2l0aCBCYXNpY1ZpZXctc3BlY2lmaWMgYmVoYXZpb3Jcblx0XHQvLyBUT0RPOiBjYWNoZSB0aGlzIHN1YmNsYXNzXG5cdFx0dmFyIHN1YmNsYXNzID0gdGhpcy5kYXlHcmlkQ2xhc3MuZXh0ZW5kKGJhc2ljRGF5R3JpZE1ldGhvZHMpO1xuXG5cdFx0cmV0dXJuIG5ldyBzdWJjbGFzcyh0aGlzKTtcblx0fSxcblxuXG5cdC8vIFNldHMgdGhlIGRpc3BsYXkgcmFuZ2UgYW5kIGNvbXB1dGVzIGFsbCBuZWNlc3NhcnkgZGF0ZXNcblx0c2V0UmFuZ2U6IGZ1bmN0aW9uKHJhbmdlKSB7XG5cdFx0Vmlldy5wcm90b3R5cGUuc2V0UmFuZ2UuY2FsbCh0aGlzLCByYW5nZSk7IC8vIGNhbGwgdGhlIHN1cGVyLW1ldGhvZFxuXG5cdFx0dGhpcy5kYXlHcmlkLmJyZWFrT25XZWVrcyA9IC95ZWFyfG1vbnRofHdlZWsvLnRlc3QodGhpcy5pbnRlcnZhbFVuaXQpOyAvLyBkbyBiZWZvcmUgc2V0UmFuZ2Vcblx0XHR0aGlzLmRheUdyaWQuc2V0UmFuZ2UocmFuZ2UpO1xuXHR9LFxuXG5cblx0Ly8gQ29tcHV0ZSB0aGUgdmFsdWUgdG8gZmVlZCBpbnRvIHNldFJhbmdlLiBPdmVycmlkZXMgc3VwZXJjbGFzcy5cblx0Y29tcHV0ZVJhbmdlOiBmdW5jdGlvbihkYXRlKSB7XG5cdFx0dmFyIHJhbmdlID0gVmlldy5wcm90b3R5cGUuY29tcHV0ZVJhbmdlLmNhbGwodGhpcywgZGF0ZSk7IC8vIGdldCB2YWx1ZSBmcm9tIHRoZSBzdXBlci1tZXRob2RcblxuXHRcdC8vIHllYXIgYW5kIG1vbnRoIHZpZXdzIHNob3VsZCBiZSBhbGlnbmVkIHdpdGggd2Vla3MuIHRoaXMgaXMgYWxyZWFkeSBkb25lIGZvciB3ZWVrXG5cdFx0aWYgKC95ZWFyfG1vbnRoLy50ZXN0KHJhbmdlLmludGVydmFsVW5pdCkpIHtcblx0XHRcdHJhbmdlLnN0YXJ0LnN0YXJ0T2YoJ3dlZWsnKTtcblx0XHRcdHJhbmdlLnN0YXJ0ID0gdGhpcy5za2lwSGlkZGVuRGF5cyhyYW5nZS5zdGFydCk7XG5cblx0XHRcdC8vIG1ha2UgZW5kLW9mLXdlZWsgaWYgbm90IGFscmVhZHlcblx0XHRcdGlmIChyYW5nZS5lbmQud2Vla2RheSgpKSB7XG5cdFx0XHRcdHJhbmdlLmVuZC5hZGQoMSwgJ3dlZWsnKS5zdGFydE9mKCd3ZWVrJyk7XG5cdFx0XHRcdHJhbmdlLmVuZCA9IHRoaXMuc2tpcEhpZGRlbkRheXMocmFuZ2UuZW5kLCAtMSwgdHJ1ZSk7IC8vIGV4Y2x1c2l2ZWx5IG1vdmUgYmFja3dhcmRzXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJhbmdlO1xuXHR9LFxuXG5cblx0Ly8gUmVuZGVycyB0aGUgdmlldyBpbnRvIGB0aGlzLmVsYCwgd2hpY2ggc2hvdWxkIGFscmVhZHkgYmUgYXNzaWduZWRcblx0cmVuZGVyRGF0ZXM6IGZ1bmN0aW9uKCkge1xuXG5cdFx0dGhpcy5kYXlOdW1iZXJzVmlzaWJsZSA9IHRoaXMuZGF5R3JpZC5yb3dDbnQgPiAxOyAvLyBUT0RPOiBtYWtlIGdyaWQgcmVzcG9uc2libGVcblx0XHRpZiAodGhpcy5vcHQoJ3dlZWtOdW1iZXJzJykpIHtcblx0XHRcdGlmICh0aGlzLm9wdCgnd2Vla051bWJlcnNXaXRoaW5EYXlzJykpIHtcblx0XHRcdFx0dGhpcy5jZWxsV2Vla051bWJlcnNWaXNpYmxlID0gdHJ1ZTtcblx0XHRcdFx0dGhpcy5jb2xXZWVrTnVtYmVyc1Zpc2libGUgPSBmYWxzZTtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHR0aGlzLmNlbGxXZWVrTnVtYmVyc1Zpc2libGUgPSBmYWxzZTtcblx0XHRcdFx0dGhpcy5jb2xXZWVrTnVtYmVyc1Zpc2libGUgPSB0cnVlO1xuXHRcdFx0fTtcblx0XHR9XG5cdFx0dGhpcy5kYXlHcmlkLm51bWJlcnNWaXNpYmxlID0gdGhpcy5kYXlOdW1iZXJzVmlzaWJsZSB8fFxuXHRcdFx0dGhpcy5jZWxsV2Vla051bWJlcnNWaXNpYmxlIHx8IHRoaXMuY29sV2Vla051bWJlcnNWaXNpYmxlO1xuXG5cdFx0dGhpcy5lbC5hZGRDbGFzcygnZmMtYmFzaWMtdmlldycpLmh0bWwodGhpcy5yZW5kZXJTa2VsZXRvbkh0bWwoKSk7XG5cdFx0dGhpcy5yZW5kZXJIZWFkKCk7XG5cblx0XHR0aGlzLnNjcm9sbGVyLnJlbmRlcigpO1xuXHRcdHZhciBkYXlHcmlkQ29udGFpbmVyRWwgPSB0aGlzLnNjcm9sbGVyLmVsLmFkZENsYXNzKCdmYy1kYXktZ3JpZC1jb250YWluZXInKTtcblx0XHR2YXIgZGF5R3JpZEVsID0gJCgnPGRpdiBjbGFzcz1cImZjLWRheS1ncmlkXCIgLz4nKS5hcHBlbmRUbyhkYXlHcmlkQ29udGFpbmVyRWwpO1xuXHRcdHRoaXMuZWwuZmluZCgnLmZjLWJvZHkgPiB0ciA+IHRkJykuYXBwZW5kKGRheUdyaWRDb250YWluZXJFbCk7XG5cblx0XHR0aGlzLmRheUdyaWQuc2V0RWxlbWVudChkYXlHcmlkRWwpO1xuXHRcdHRoaXMuZGF5R3JpZC5yZW5kZXJEYXRlcyh0aGlzLmhhc1JpZ2lkUm93cygpKTtcblx0fSxcblxuXG5cdC8vIHJlbmRlciB0aGUgZGF5LW9mLXdlZWsgaGVhZGVyc1xuXHRyZW5kZXJIZWFkOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLmhlYWRDb250YWluZXJFbCA9XG5cdFx0XHR0aGlzLmVsLmZpbmQoJy5mYy1oZWFkLWNvbnRhaW5lcicpXG5cdFx0XHRcdC5odG1sKHRoaXMuZGF5R3JpZC5yZW5kZXJIZWFkSHRtbCgpKTtcblx0XHR0aGlzLmhlYWRSb3dFbCA9IHRoaXMuaGVhZENvbnRhaW5lckVsLmZpbmQoJy5mYy1yb3cnKTtcblx0fSxcblxuXG5cdC8vIFVucmVuZGVycyB0aGUgY29udGVudCBvZiB0aGUgdmlldy4gU2luY2Ugd2UgaGF2ZW4ndCBzZXBhcmF0ZWQgc2tlbGV0b24gcmVuZGVyaW5nIGZyb20gZGF0ZSByZW5kZXJpbmcsXG5cdC8vIGFsd2F5cyBjb21wbGV0ZWx5IGtpbGwgdGhlIGRheUdyaWQncyByZW5kZXJpbmcuXG5cdHVucmVuZGVyRGF0ZXM6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuZGF5R3JpZC51bnJlbmRlckRhdGVzKCk7XG5cdFx0dGhpcy5kYXlHcmlkLnJlbW92ZUVsZW1lbnQoKTtcblx0XHR0aGlzLnNjcm9sbGVyLmRlc3Ryb3koKTtcblx0fSxcblxuXG5cdHJlbmRlckJ1c2luZXNzSG91cnM6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuZGF5R3JpZC5yZW5kZXJCdXNpbmVzc0hvdXJzKCk7XG5cdH0sXG5cblxuXHR1bnJlbmRlckJ1c2luZXNzSG91cnM6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuZGF5R3JpZC51bnJlbmRlckJ1c2luZXNzSG91cnMoKTtcblx0fSxcblxuXG5cdC8vIEJ1aWxkcyB0aGUgSFRNTCBza2VsZXRvbiBmb3IgdGhlIHZpZXcuXG5cdC8vIFRoZSBkYXktZ3JpZCBjb21wb25lbnQgd2lsbCByZW5kZXIgaW5zaWRlIG9mIGEgY29udGFpbmVyIGRlZmluZWQgYnkgdGhpcyBIVE1MLlxuXHRyZW5kZXJTa2VsZXRvbkh0bWw6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiAnJyArXG5cdFx0XHQnPHRhYmxlPicgK1xuXHRcdFx0XHQnPHRoZWFkIGNsYXNzPVwiZmMtaGVhZFwiPicgK1xuXHRcdFx0XHRcdCc8dHI+JyArXG5cdFx0XHRcdFx0XHQnPHRkIGNsYXNzPVwiZmMtaGVhZC1jb250YWluZXIgJyArIHRoaXMud2lkZ2V0SGVhZGVyQ2xhc3MgKyAnXCI+PC90ZD4nICtcblx0XHRcdFx0XHQnPC90cj4nICtcblx0XHRcdFx0JzwvdGhlYWQ+JyArXG5cdFx0XHRcdCc8dGJvZHkgY2xhc3M9XCJmYy1ib2R5XCI+JyArXG5cdFx0XHRcdFx0Jzx0cj4nICtcblx0XHRcdFx0XHRcdCc8dGQgY2xhc3M9XCInICsgdGhpcy53aWRnZXRDb250ZW50Q2xhc3MgKyAnXCI+PC90ZD4nICtcblx0XHRcdFx0XHQnPC90cj4nICtcblx0XHRcdFx0JzwvdGJvZHk+JyArXG5cdFx0XHQnPC90YWJsZT4nO1xuXHR9LFxuXG5cblx0Ly8gR2VuZXJhdGVzIGFuIEhUTUwgYXR0cmlidXRlIHN0cmluZyBmb3Igc2V0dGluZyB0aGUgd2lkdGggb2YgdGhlIHdlZWsgbnVtYmVyIGNvbHVtbiwgaWYgaXQgaXMga25vd25cblx0d2Vla051bWJlclN0eWxlQXR0cjogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHRoaXMud2Vla051bWJlcldpZHRoICE9PSBudWxsKSB7XG5cdFx0XHRyZXR1cm4gJ3N0eWxlPVwid2lkdGg6JyArIHRoaXMud2Vla051bWJlcldpZHRoICsgJ3B4XCInO1xuXHRcdH1cblx0XHRyZXR1cm4gJyc7XG5cdH0sXG5cblxuXHQvLyBEZXRlcm1pbmVzIHdoZXRoZXIgZWFjaCByb3cgc2hvdWxkIGhhdmUgYSBjb25zdGFudCBoZWlnaHRcblx0aGFzUmlnaWRSb3dzOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgZXZlbnRMaW1pdCA9IHRoaXMub3B0KCdldmVudExpbWl0Jyk7XG5cdFx0cmV0dXJuIGV2ZW50TGltaXQgJiYgdHlwZW9mIGV2ZW50TGltaXQgIT09ICdudW1iZXInO1xuXHR9LFxuXG5cblx0LyogRGltZW5zaW9uc1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gUmVmcmVzaGVzIHRoZSBob3Jpem9udGFsIGRpbWVuc2lvbnMgb2YgdGhlIHZpZXdcblx0dXBkYXRlV2lkdGg6IGZ1bmN0aW9uKCkge1xuXHRcdGlmICh0aGlzLmNvbFdlZWtOdW1iZXJzVmlzaWJsZSkge1xuXHRcdFx0Ly8gTWFrZSBzdXJlIGFsbCB3ZWVrIG51bWJlciBjZWxscyBydW5uaW5nIGRvd24gdGhlIHNpZGUgaGF2ZSB0aGUgc2FtZSB3aWR0aC5cblx0XHRcdC8vIFJlY29yZCB0aGUgd2lkdGggZm9yIGNlbGxzIGNyZWF0ZWQgbGF0ZXIuXG5cdFx0XHR0aGlzLndlZWtOdW1iZXJXaWR0aCA9IG1hdGNoQ2VsbFdpZHRocyhcblx0XHRcdFx0dGhpcy5lbC5maW5kKCcuZmMtd2Vlay1udW1iZXInKVxuXHRcdFx0KTtcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBBZGp1c3RzIHRoZSB2ZXJ0aWNhbCBkaW1lbnNpb25zIG9mIHRoZSB2aWV3IHRvIHRoZSBzcGVjaWZpZWQgdmFsdWVzXG5cdHNldEhlaWdodDogZnVuY3Rpb24odG90YWxIZWlnaHQsIGlzQXV0bykge1xuXHRcdHZhciBldmVudExpbWl0ID0gdGhpcy5vcHQoJ2V2ZW50TGltaXQnKTtcblx0XHR2YXIgc2Nyb2xsZXJIZWlnaHQ7XG5cdFx0dmFyIHNjcm9sbGJhcldpZHRocztcblxuXHRcdC8vIHJlc2V0IGFsbCBoZWlnaHRzIHRvIGJlIG5hdHVyYWxcblx0XHR0aGlzLnNjcm9sbGVyLmNsZWFyKCk7XG5cdFx0dW5jb21wZW5zYXRlU2Nyb2xsKHRoaXMuaGVhZFJvd0VsKTtcblxuXHRcdHRoaXMuZGF5R3JpZC5yZW1vdmVTZWdQb3BvdmVyKCk7IC8vIGtpbGwgdGhlIFwibW9yZVwiIHBvcG92ZXIgaWYgZGlzcGxheWVkXG5cblx0XHQvLyBpcyB0aGUgZXZlbnQgbGltaXQgYSBjb25zdGFudCBsZXZlbCBudW1iZXI/XG5cdFx0aWYgKGV2ZW50TGltaXQgJiYgdHlwZW9mIGV2ZW50TGltaXQgPT09ICdudW1iZXInKSB7XG5cdFx0XHR0aGlzLmRheUdyaWQubGltaXRSb3dzKGV2ZW50TGltaXQpOyAvLyBsaW1pdCB0aGUgbGV2ZWxzIGZpcnN0IHNvIHRoZSBoZWlnaHQgY2FuIHJlZGlzdHJpYnV0ZSBhZnRlclxuXHRcdH1cblxuXHRcdC8vIGRpc3RyaWJ1dGUgdGhlIGhlaWdodCB0byB0aGUgcm93c1xuXHRcdC8vICh0b3RhbEhlaWdodCBpcyBhIFwicmVjb21tZW5kZWRcIiB2YWx1ZSBpZiBpc0F1dG8pXG5cdFx0c2Nyb2xsZXJIZWlnaHQgPSB0aGlzLmNvbXB1dGVTY3JvbGxlckhlaWdodCh0b3RhbEhlaWdodCk7XG5cdFx0dGhpcy5zZXRHcmlkSGVpZ2h0KHNjcm9sbGVySGVpZ2h0LCBpc0F1dG8pO1xuXG5cdFx0Ly8gaXMgdGhlIGV2ZW50IGxpbWl0IGR5bmFtaWNhbGx5IGNhbGN1bGF0ZWQ/XG5cdFx0aWYgKGV2ZW50TGltaXQgJiYgdHlwZW9mIGV2ZW50TGltaXQgIT09ICdudW1iZXInKSB7XG5cdFx0XHR0aGlzLmRheUdyaWQubGltaXRSb3dzKGV2ZW50TGltaXQpOyAvLyBsaW1pdCB0aGUgbGV2ZWxzIGFmdGVyIHRoZSBncmlkJ3Mgcm93IGhlaWdodHMgaGF2ZSBiZWVuIHNldFxuXHRcdH1cblxuXHRcdGlmICghaXNBdXRvKSB7IC8vIHNob3VsZCB3ZSBmb3JjZSBkaW1lbnNpb25zIG9mIHRoZSBzY3JvbGwgY29udGFpbmVyP1xuXG5cdFx0XHR0aGlzLnNjcm9sbGVyLnNldEhlaWdodChzY3JvbGxlckhlaWdodCk7XG5cdFx0XHRzY3JvbGxiYXJXaWR0aHMgPSB0aGlzLnNjcm9sbGVyLmdldFNjcm9sbGJhcldpZHRocygpO1xuXG5cdFx0XHRpZiAoc2Nyb2xsYmFyV2lkdGhzLmxlZnQgfHwgc2Nyb2xsYmFyV2lkdGhzLnJpZ2h0KSB7IC8vIHVzaW5nIHNjcm9sbGJhcnM/XG5cblx0XHRcdFx0Y29tcGVuc2F0ZVNjcm9sbCh0aGlzLmhlYWRSb3dFbCwgc2Nyb2xsYmFyV2lkdGhzKTtcblxuXHRcdFx0XHQvLyBkb2luZyB0aGUgc2Nyb2xsYmFyIGNvbXBlbnNhdGlvbiBtaWdodCBoYXZlIGNyZWF0ZWQgdGV4dCBvdmVyZmxvdyB3aGljaCBjcmVhdGVkIG1vcmUgaGVpZ2h0LiByZWRvXG5cdFx0XHRcdHNjcm9sbGVySGVpZ2h0ID0gdGhpcy5jb21wdXRlU2Nyb2xsZXJIZWlnaHQodG90YWxIZWlnaHQpO1xuXHRcdFx0XHR0aGlzLnNjcm9sbGVyLnNldEhlaWdodChzY3JvbGxlckhlaWdodCk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIGd1YXJhbnRlZXMgdGhlIHNhbWUgc2Nyb2xsYmFyIHdpZHRoc1xuXHRcdFx0dGhpcy5zY3JvbGxlci5sb2NrT3ZlcmZsb3coc2Nyb2xsYmFyV2lkdGhzKTtcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBnaXZlbiBhIGRlc2lyZWQgdG90YWwgaGVpZ2h0IG9mIHRoZSB2aWV3LCByZXR1cm5zIHdoYXQgdGhlIGhlaWdodCBvZiB0aGUgc2Nyb2xsZXIgc2hvdWxkIGJlXG5cdGNvbXB1dGVTY3JvbGxlckhlaWdodDogZnVuY3Rpb24odG90YWxIZWlnaHQpIHtcblx0XHRyZXR1cm4gdG90YWxIZWlnaHQgLVxuXHRcdFx0c3VidHJhY3RJbm5lckVsSGVpZ2h0KHRoaXMuZWwsIHRoaXMuc2Nyb2xsZXIuZWwpOyAvLyBldmVyeXRoaW5nIHRoYXQncyBOT1QgdGhlIHNjcm9sbGVyXG5cdH0sXG5cblxuXHQvLyBTZXRzIHRoZSBoZWlnaHQgb2YganVzdCB0aGUgRGF5R3JpZCBjb21wb25lbnQgaW4gdGhpcyB2aWV3XG5cdHNldEdyaWRIZWlnaHQ6IGZ1bmN0aW9uKGhlaWdodCwgaXNBdXRvKSB7XG5cdFx0aWYgKGlzQXV0bykge1xuXHRcdFx0dW5kaXN0cmlidXRlSGVpZ2h0KHRoaXMuZGF5R3JpZC5yb3dFbHMpOyAvLyBsZXQgdGhlIHJvd3MgYmUgdGhlaXIgbmF0dXJhbCBoZWlnaHQgd2l0aCBubyBleHBhbmRpbmdcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRkaXN0cmlidXRlSGVpZ2h0KHRoaXMuZGF5R3JpZC5yb3dFbHMsIGhlaWdodCwgdHJ1ZSk7IC8vIHRydWUgPSBjb21wZW5zYXRlIGZvciBoZWlnaHQtaG9nZ2luZyByb3dzXG5cdFx0fVxuXHR9LFxuXG5cblx0LyogU2Nyb2xsXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHRjb21wdXRlSW5pdGlhbFNjcm9sbDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHsgdG9wOiAwIH07XG5cdH0sXG5cblxuXHRxdWVyeVNjcm9sbDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHsgdG9wOiB0aGlzLnNjcm9sbGVyLmdldFNjcm9sbFRvcCgpIH07XG5cdH0sXG5cblxuXHRzZXRTY3JvbGw6IGZ1bmN0aW9uKHNjcm9sbCkge1xuXHRcdHRoaXMuc2Nyb2xsZXIuc2V0U2Nyb2xsVG9wKHNjcm9sbC50b3ApO1xuXHR9LFxuXG5cblx0LyogSGl0IEFyZWFzXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdC8vIGZvcndhcmQgYWxsIGhpdC1yZWxhdGVkIG1ldGhvZCBjYWxscyB0byBkYXlHcmlkXG5cblxuXHRwcmVwYXJlSGl0czogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5kYXlHcmlkLnByZXBhcmVIaXRzKCk7XG5cdH0sXG5cblxuXHRyZWxlYXNlSGl0czogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5kYXlHcmlkLnJlbGVhc2VIaXRzKCk7XG5cdH0sXG5cblxuXHRxdWVyeUhpdDogZnVuY3Rpb24obGVmdCwgdG9wKSB7XG5cdFx0cmV0dXJuIHRoaXMuZGF5R3JpZC5xdWVyeUhpdChsZWZ0LCB0b3ApO1xuXHR9LFxuXG5cblx0Z2V0SGl0U3BhbjogZnVuY3Rpb24oaGl0KSB7XG5cdFx0cmV0dXJuIHRoaXMuZGF5R3JpZC5nZXRIaXRTcGFuKGhpdCk7XG5cdH0sXG5cblxuXHRnZXRIaXRFbDogZnVuY3Rpb24oaGl0KSB7XG5cdFx0cmV0dXJuIHRoaXMuZGF5R3JpZC5nZXRIaXRFbChoaXQpO1xuXHR9LFxuXG5cblx0LyogRXZlbnRzXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBSZW5kZXJzIHRoZSBnaXZlbiBldmVudHMgb250byB0aGUgdmlldyBhbmQgcG9wdWxhdGVzIHRoZSBzZWdtZW50cyBhcnJheVxuXHRyZW5kZXJFdmVudHM6IGZ1bmN0aW9uKGV2ZW50cykge1xuXHRcdHRoaXMuZGF5R3JpZC5yZW5kZXJFdmVudHMoZXZlbnRzKTtcblxuXHRcdHRoaXMudXBkYXRlSGVpZ2h0KCk7IC8vIG11c3QgY29tcGVuc2F0ZSBmb3IgZXZlbnRzIHRoYXQgb3ZlcmZsb3cgdGhlIHJvd1xuXHR9LFxuXG5cblx0Ly8gUmV0cmlldmVzIGFsbCBzZWdtZW50IG9iamVjdHMgdGhhdCBhcmUgcmVuZGVyZWQgaW4gdGhlIHZpZXdcblx0Z2V0RXZlbnRTZWdzOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5kYXlHcmlkLmdldEV2ZW50U2VncygpO1xuXHR9LFxuXG5cblx0Ly8gVW5yZW5kZXJzIGFsbCBldmVudCBlbGVtZW50cyBhbmQgY2xlYXJzIGludGVybmFsIHNlZ21lbnQgZGF0YVxuXHR1bnJlbmRlckV2ZW50czogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5kYXlHcmlkLnVucmVuZGVyRXZlbnRzKCk7XG5cblx0XHQvLyB3ZSBET04nVCBuZWVkIHRvIGNhbGwgdXBkYXRlSGVpZ2h0KCkgYmVjYXVzZVxuXHRcdC8vIGEgcmVuZGVyRXZlbnRzKCkgY2FsbCBhbHdheXMgaGFwcGVucyBhZnRlciB0aGlzLCB3aGljaCB3aWxsIGV2ZW50dWFsbHkgY2FsbCB1cGRhdGVIZWlnaHQoKVxuXHR9LFxuXG5cblx0LyogRHJhZ2dpbmcgKGZvciBib3RoIGV2ZW50cyBhbmQgZXh0ZXJuYWwgZWxlbWVudHMpXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBBIHJldHVybmVkIHZhbHVlIG9mIGB0cnVlYCBzaWduYWxzIHRoYXQgYSBtb2NrIFwiaGVscGVyXCIgZXZlbnQgaGFzIGJlZW4gcmVuZGVyZWQuXG5cdHJlbmRlckRyYWc6IGZ1bmN0aW9uKGRyb3BMb2NhdGlvbiwgc2VnKSB7XG5cdFx0cmV0dXJuIHRoaXMuZGF5R3JpZC5yZW5kZXJEcmFnKGRyb3BMb2NhdGlvbiwgc2VnKTtcblx0fSxcblxuXG5cdHVucmVuZGVyRHJhZzogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5kYXlHcmlkLnVucmVuZGVyRHJhZygpO1xuXHR9LFxuXG5cblx0LyogU2VsZWN0aW9uXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBSZW5kZXJzIGEgdmlzdWFsIGluZGljYXRpb24gb2YgYSBzZWxlY3Rpb25cblx0cmVuZGVyU2VsZWN0aW9uOiBmdW5jdGlvbihzcGFuKSB7XG5cdFx0dGhpcy5kYXlHcmlkLnJlbmRlclNlbGVjdGlvbihzcGFuKTtcblx0fSxcblxuXG5cdC8vIFVucmVuZGVycyBhIHZpc3VhbCBpbmRpY2F0aW9ucyBvZiBhIHNlbGVjdGlvblxuXHR1bnJlbmRlclNlbGVjdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5kYXlHcmlkLnVucmVuZGVyU2VsZWN0aW9uKCk7XG5cdH1cblxufSk7XG5cblxuLy8gTWV0aG9kcyB0aGF0IHdpbGwgY3VzdG9taXplIHRoZSByZW5kZXJpbmcgYmVoYXZpb3Igb2YgdGhlIEJhc2ljVmlldydzIGRheUdyaWRcbnZhciBiYXNpY0RheUdyaWRNZXRob2RzID0ge1xuXG5cblx0Ly8gR2VuZXJhdGVzIHRoZSBIVE1MIHRoYXQgd2lsbCBnbyBiZWZvcmUgdGhlIGRheS1vZiB3ZWVrIGhlYWRlciBjZWxsc1xuXHRyZW5kZXJIZWFkSW50cm9IdG1sOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgdmlldyA9IHRoaXMudmlldztcblxuXHRcdGlmICh2aWV3LmNvbFdlZWtOdW1iZXJzVmlzaWJsZSkge1xuXHRcdFx0cmV0dXJuICcnICtcblx0XHRcdFx0Jzx0aCBjbGFzcz1cImZjLXdlZWstbnVtYmVyICcgKyB2aWV3LndpZGdldEhlYWRlckNsYXNzICsgJ1wiICcgKyB2aWV3LndlZWtOdW1iZXJTdHlsZUF0dHIoKSArICc+JyArXG5cdFx0XHRcdFx0JzxzcGFuPicgKyAvLyBuZWVkZWQgZm9yIG1hdGNoQ2VsbFdpZHRoc1xuXHRcdFx0XHRcdFx0aHRtbEVzY2FwZSh2aWV3Lm9wdCgnd2Vla051bWJlclRpdGxlJykpICtcblx0XHRcdFx0XHQnPC9zcGFuPicgK1xuXHRcdFx0XHQnPC90aD4nO1xuXHRcdH1cblxuXHRcdHJldHVybiAnJztcblx0fSxcblxuXG5cdC8vIEdlbmVyYXRlcyB0aGUgSFRNTCB0aGF0IHdpbGwgZ28gYmVmb3JlIGNvbnRlbnQtc2tlbGV0b24gY2VsbHMgdGhhdCBkaXNwbGF5IHRoZSBkYXkvd2VlayBudW1iZXJzXG5cdHJlbmRlck51bWJlckludHJvSHRtbDogZnVuY3Rpb24ocm93KSB7XG5cdFx0dmFyIHZpZXcgPSB0aGlzLnZpZXc7XG5cdFx0dmFyIHdlZWtTdGFydCA9IHRoaXMuZ2V0Q2VsbERhdGUocm93LCAwKTtcblxuXHRcdGlmICh2aWV3LmNvbFdlZWtOdW1iZXJzVmlzaWJsZSkge1xuXHRcdFx0cmV0dXJuICcnICtcblx0XHRcdFx0Jzx0ZCBjbGFzcz1cImZjLXdlZWstbnVtYmVyXCIgJyArIHZpZXcud2Vla051bWJlclN0eWxlQXR0cigpICsgJz4nICtcblx0XHRcdFx0XHR2aWV3LmJ1aWxkR290b0FuY2hvckh0bWwoIC8vIGFzaWRlIGZyb20gbGluaywgaW1wb3J0YW50IGZvciBtYXRjaENlbGxXaWR0aHNcblx0XHRcdFx0XHRcdHsgZGF0ZTogd2Vla1N0YXJ0LCB0eXBlOiAnd2VlaycsIGZvcmNlT2ZmOiB0aGlzLmNvbENudCA9PT0gMSB9LFxuXHRcdFx0XHRcdFx0d2Vla1N0YXJ0LmZvcm1hdCgndycpIC8vIGlubmVyIEhUTUxcblx0XHRcdFx0XHQpICtcblx0XHRcdFx0JzwvdGQ+Jztcblx0XHR9XG5cblx0XHRyZXR1cm4gJyc7XG5cdH0sXG5cblxuXHQvLyBHZW5lcmF0ZXMgdGhlIEhUTUwgdGhhdCBnb2VzIGJlZm9yZSB0aGUgZGF5IGJnIGNlbGxzIGZvciBlYWNoIGRheS1yb3dcblx0cmVuZGVyQmdJbnRyb0h0bWw6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB2aWV3ID0gdGhpcy52aWV3O1xuXG5cdFx0aWYgKHZpZXcuY29sV2Vla051bWJlcnNWaXNpYmxlKSB7XG5cdFx0XHRyZXR1cm4gJzx0ZCBjbGFzcz1cImZjLXdlZWstbnVtYmVyICcgKyB2aWV3LndpZGdldENvbnRlbnRDbGFzcyArICdcIiAnICtcblx0XHRcdFx0dmlldy53ZWVrTnVtYmVyU3R5bGVBdHRyKCkgKyAnPjwvdGQ+Jztcblx0XHR9XG5cblx0XHRyZXR1cm4gJyc7XG5cdH0sXG5cblxuXHQvLyBHZW5lcmF0ZXMgdGhlIEhUTUwgdGhhdCBnb2VzIGJlZm9yZSBldmVyeSBvdGhlciB0eXBlIG9mIHJvdyBnZW5lcmF0ZWQgYnkgRGF5R3JpZC5cblx0Ly8gQWZmZWN0cyBoZWxwZXItc2tlbGV0b24gYW5kIGhpZ2hsaWdodC1za2VsZXRvbiByb3dzLlxuXHRyZW5kZXJJbnRyb0h0bWw6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB2aWV3ID0gdGhpcy52aWV3O1xuXG5cdFx0aWYgKHZpZXcuY29sV2Vla051bWJlcnNWaXNpYmxlKSB7XG5cdFx0XHRyZXR1cm4gJzx0ZCBjbGFzcz1cImZjLXdlZWstbnVtYmVyXCIgJyArIHZpZXcud2Vla051bWJlclN0eWxlQXR0cigpICsgJz48L3RkPic7XG5cdFx0fVxuXG5cdFx0cmV0dXJuICcnO1xuXHR9XG5cbn07XG5cbjs7XG5cbi8qIEEgbW9udGggdmlldyB3aXRoIGRheSBjZWxscyBydW5uaW5nIGluIHJvd3MgKG9uZS1wZXItd2VlaykgYW5kIGNvbHVtbnNcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG52YXIgTW9udGhWaWV3ID0gRkMuTW9udGhWaWV3ID0gQmFzaWNWaWV3LmV4dGVuZCh7XG5cblx0Ly8gUHJvZHVjZXMgaW5mb3JtYXRpb24gYWJvdXQgd2hhdCByYW5nZSB0byBkaXNwbGF5XG5cdGNvbXB1dGVSYW5nZTogZnVuY3Rpb24oZGF0ZSkge1xuXHRcdHZhciByYW5nZSA9IEJhc2ljVmlldy5wcm90b3R5cGUuY29tcHV0ZVJhbmdlLmNhbGwodGhpcywgZGF0ZSk7IC8vIGdldCB2YWx1ZSBmcm9tIHN1cGVyLW1ldGhvZFxuXHRcdHZhciByb3dDbnQ7XG5cblx0XHQvLyBlbnN1cmUgNiB3ZWVrc1xuXHRcdGlmICh0aGlzLmlzRml4ZWRXZWVrcygpKSB7XG5cdFx0XHRyb3dDbnQgPSBNYXRoLmNlaWwocmFuZ2UuZW5kLmRpZmYocmFuZ2Uuc3RhcnQsICd3ZWVrcycsIHRydWUpKTsgLy8gY291bGQgYmUgcGFydGlhbCB3ZWVrcyBkdWUgdG8gaGlkZGVuRGF5c1xuXHRcdFx0cmFuZ2UuZW5kLmFkZCg2IC0gcm93Q250LCAnd2Vla3MnKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gcmFuZ2U7XG5cdH0sXG5cblxuXHQvLyBPdmVycmlkZXMgdGhlIGRlZmF1bHQgQmFzaWNWaWV3IGJlaGF2aW9yIHRvIGhhdmUgc3BlY2lhbCBtdWx0aS13ZWVrIGF1dG8taGVpZ2h0IGxvZ2ljXG5cdHNldEdyaWRIZWlnaHQ6IGZ1bmN0aW9uKGhlaWdodCwgaXNBdXRvKSB7XG5cblx0XHQvLyBpZiBhdXRvLCBtYWtlIHRoZSBoZWlnaHQgb2YgZWFjaCByb3cgdGhlIGhlaWdodCB0aGF0IGl0IHdvdWxkIGJlIGlmIHRoZXJlIHdlcmUgNiB3ZWVrc1xuXHRcdGlmIChpc0F1dG8pIHtcblx0XHRcdGhlaWdodCAqPSB0aGlzLnJvd0NudCAvIDY7XG5cdFx0fVxuXG5cdFx0ZGlzdHJpYnV0ZUhlaWdodCh0aGlzLmRheUdyaWQucm93RWxzLCBoZWlnaHQsICFpc0F1dG8pOyAvLyBpZiBhdXRvLCBkb24ndCBjb21wZW5zYXRlIGZvciBoZWlnaHQtaG9nZ2luZyByb3dzXG5cdH0sXG5cblxuXHRpc0ZpeGVkV2Vla3M6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLm9wdCgnZml4ZWRXZWVrQ291bnQnKTtcblx0fVxuXG59KTtcblxuOztcblxuZmNWaWV3cy5iYXNpYyA9IHtcblx0J2NsYXNzJzogQmFzaWNWaWV3XG59O1xuXG5mY1ZpZXdzLmJhc2ljRGF5ID0ge1xuXHR0eXBlOiAnYmFzaWMnLFxuXHRkdXJhdGlvbjogeyBkYXlzOiAxIH1cbn07XG5cbmZjVmlld3MuYmFzaWNXZWVrID0ge1xuXHR0eXBlOiAnYmFzaWMnLFxuXHRkdXJhdGlvbjogeyB3ZWVrczogMSB9XG59O1xuXG5mY1ZpZXdzLm1vbnRoID0ge1xuXHQnY2xhc3MnOiBNb250aFZpZXcsXG5cdGR1cmF0aW9uOiB7IG1vbnRoczogMSB9LCAvLyBpbXBvcnRhbnQgZm9yIHByZXYvbmV4dFxuXHRkZWZhdWx0czoge1xuXHRcdGZpeGVkV2Vla0NvdW50OiB0cnVlXG5cdH1cbn07XG47O1xuXG4vKiBBbiBhYnN0cmFjdCBjbGFzcyBmb3IgYWxsIGFnZW5kYS1yZWxhdGVkIHZpZXdzLiBEaXNwbGF5cyBvbmUgbW9yZSBjb2x1bW5zIHdpdGggdGltZSBzbG90cyBydW5uaW5nIHZlcnRpY2FsbHkuXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8vIElzIGEgbWFuYWdlciBmb3IgdGhlIFRpbWVHcmlkIHN1YmNvbXBvbmVudCBhbmQgcG9zc2libHkgdGhlIERheUdyaWQgc3ViY29tcG9uZW50IChpZiBhbGxEYXlTbG90IGlzIG9uKS5cbi8vIFJlc3BvbnNpYmxlIGZvciBtYW5hZ2luZyB3aWR0aC9oZWlnaHQuXG5cbnZhciBBZ2VuZGFWaWV3ID0gRkMuQWdlbmRhVmlldyA9IFZpZXcuZXh0ZW5kKHtcblxuXHRzY3JvbGxlcjogbnVsbCxcblxuXHR0aW1lR3JpZENsYXNzOiBUaW1lR3JpZCwgLy8gY2xhc3MgdXNlZCB0byBpbnN0YW50aWF0ZSB0aGUgdGltZUdyaWQuIHN1YmNsYXNzZXMgY2FuIG92ZXJyaWRlXG5cdHRpbWVHcmlkOiBudWxsLCAvLyB0aGUgbWFpbiB0aW1lLWdyaWQgc3ViY29tcG9uZW50IG9mIHRoaXMgdmlld1xuXG5cdGRheUdyaWRDbGFzczogRGF5R3JpZCwgLy8gY2xhc3MgdXNlZCB0byBpbnN0YW50aWF0ZSB0aGUgZGF5R3JpZC4gc3ViY2xhc3NlcyBjYW4gb3ZlcnJpZGVcblx0ZGF5R3JpZDogbnVsbCwgLy8gdGhlIFwiYWxsLWRheVwiIHN1YmNvbXBvbmVudC4gaWYgYWxsLWRheSBpcyB0dXJuZWQgb2ZmLCB0aGlzIHdpbGwgYmUgbnVsbFxuXG5cdGF4aXNXaWR0aDogbnVsbCwgLy8gdGhlIHdpZHRoIG9mIHRoZSB0aW1lIGF4aXMgcnVubmluZyBkb3duIHRoZSBzaWRlXG5cblx0aGVhZENvbnRhaW5lckVsOiBudWxsLCAvLyBkaXYgdGhhdCBob2xkJ3MgdGhlIHRpbWVHcmlkJ3MgcmVuZGVyZWQgZGF0ZSBoZWFkZXJcblx0bm9TY3JvbGxSb3dFbHM6IG51bGwsIC8vIHNldCBvZiBmYWtlIHJvdyBlbGVtZW50cyB0aGF0IG11c3QgY29tcGVuc2F0ZSB3aGVuIHNjcm9sbGVyIGhhcyBzY3JvbGxiYXJzXG5cblx0Ly8gd2hlbiB0aGUgdGltZS1ncmlkIGlzbid0IHRhbGwgZW5vdWdoIHRvIG9jY3VweSB0aGUgZ2l2ZW4gaGVpZ2h0LCB3ZSByZW5kZXIgYW4gPGhyPiB1bmRlcm5lYXRoXG5cdGJvdHRvbVJ1bGVFbDogbnVsbCxcblxuXG5cdGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMudGltZUdyaWQgPSB0aGlzLmluc3RhbnRpYXRlVGltZUdyaWQoKTtcblxuXHRcdGlmICh0aGlzLm9wdCgnYWxsRGF5U2xvdCcpKSB7IC8vIHNob3VsZCB3ZSBkaXNwbGF5IHRoZSBcImFsbC1kYXlcIiBhcmVhP1xuXHRcdFx0dGhpcy5kYXlHcmlkID0gdGhpcy5pbnN0YW50aWF0ZURheUdyaWQoKTsgLy8gdGhlIGFsbC1kYXkgc3ViY29tcG9uZW50IG9mIHRoaXMgdmlld1xuXHRcdH1cblxuXHRcdHRoaXMuc2Nyb2xsZXIgPSBuZXcgU2Nyb2xsZXIoe1xuXHRcdFx0b3ZlcmZsb3dYOiAnaGlkZGVuJyxcblx0XHRcdG92ZXJmbG93WTogJ2F1dG8nXG5cdFx0fSk7XG5cdH0sXG5cblxuXHQvLyBJbnN0YW50aWF0ZXMgdGhlIFRpbWVHcmlkIG9iamVjdCB0aGlzIHZpZXcgbmVlZHMuIERyYXdzIGZyb20gdGhpcy50aW1lR3JpZENsYXNzXG5cdGluc3RhbnRpYXRlVGltZUdyaWQ6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBzdWJjbGFzcyA9IHRoaXMudGltZUdyaWRDbGFzcy5leHRlbmQoYWdlbmRhVGltZUdyaWRNZXRob2RzKTtcblxuXHRcdHJldHVybiBuZXcgc3ViY2xhc3ModGhpcyk7XG5cdH0sXG5cblxuXHQvLyBJbnN0YW50aWF0ZXMgdGhlIERheUdyaWQgb2JqZWN0IHRoaXMgdmlldyBtaWdodCBuZWVkLiBEcmF3cyBmcm9tIHRoaXMuZGF5R3JpZENsYXNzXG5cdGluc3RhbnRpYXRlRGF5R3JpZDogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHN1YmNsYXNzID0gdGhpcy5kYXlHcmlkQ2xhc3MuZXh0ZW5kKGFnZW5kYURheUdyaWRNZXRob2RzKTtcblxuXHRcdHJldHVybiBuZXcgc3ViY2xhc3ModGhpcyk7XG5cdH0sXG5cblxuXHQvKiBSZW5kZXJpbmdcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIFNldHMgdGhlIGRpc3BsYXkgcmFuZ2UgYW5kIGNvbXB1dGVzIGFsbCBuZWNlc3NhcnkgZGF0ZXNcblx0c2V0UmFuZ2U6IGZ1bmN0aW9uKHJhbmdlKSB7XG5cdFx0Vmlldy5wcm90b3R5cGUuc2V0UmFuZ2UuY2FsbCh0aGlzLCByYW5nZSk7IC8vIGNhbGwgdGhlIHN1cGVyLW1ldGhvZFxuXG5cdFx0dGhpcy50aW1lR3JpZC5zZXRSYW5nZShyYW5nZSk7XG5cdFx0aWYgKHRoaXMuZGF5R3JpZCkge1xuXHRcdFx0dGhpcy5kYXlHcmlkLnNldFJhbmdlKHJhbmdlKTtcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBSZW5kZXJzIHRoZSB2aWV3IGludG8gYHRoaXMuZWxgLCB3aGljaCBoYXMgYWxyZWFkeSBiZWVuIGFzc2lnbmVkXG5cdHJlbmRlckRhdGVzOiBmdW5jdGlvbigpIHtcblxuXHRcdHRoaXMuZWwuYWRkQ2xhc3MoJ2ZjLWFnZW5kYS12aWV3JykuaHRtbCh0aGlzLnJlbmRlclNrZWxldG9uSHRtbCgpKTtcblx0XHR0aGlzLnJlbmRlckhlYWQoKTtcblxuXHRcdHRoaXMuc2Nyb2xsZXIucmVuZGVyKCk7XG5cdFx0dmFyIHRpbWVHcmlkV3JhcEVsID0gdGhpcy5zY3JvbGxlci5lbC5hZGRDbGFzcygnZmMtdGltZS1ncmlkLWNvbnRhaW5lcicpO1xuXHRcdHZhciB0aW1lR3JpZEVsID0gJCgnPGRpdiBjbGFzcz1cImZjLXRpbWUtZ3JpZFwiIC8+JykuYXBwZW5kVG8odGltZUdyaWRXcmFwRWwpO1xuXHRcdHRoaXMuZWwuZmluZCgnLmZjLWJvZHkgPiB0ciA+IHRkJykuYXBwZW5kKHRpbWVHcmlkV3JhcEVsKTtcblxuXHRcdHRoaXMudGltZUdyaWQuc2V0RWxlbWVudCh0aW1lR3JpZEVsKTtcblx0XHR0aGlzLnRpbWVHcmlkLnJlbmRlckRhdGVzKCk7XG5cblx0XHQvLyB0aGUgPGhyPiB0aGF0IHNvbWV0aW1lcyBkaXNwbGF5cyB1bmRlciB0aGUgdGltZS1ncmlkXG5cdFx0dGhpcy5ib3R0b21SdWxlRWwgPSAkKCc8aHIgY2xhc3M9XCJmYy1kaXZpZGVyICcgKyB0aGlzLndpZGdldEhlYWRlckNsYXNzICsgJ1wiLz4nKVxuXHRcdFx0LmFwcGVuZFRvKHRoaXMudGltZUdyaWQuZWwpOyAvLyBpbmplY3QgaXQgaW50byB0aGUgdGltZS1ncmlkXG5cblx0XHRpZiAodGhpcy5kYXlHcmlkKSB7XG5cdFx0XHR0aGlzLmRheUdyaWQuc2V0RWxlbWVudCh0aGlzLmVsLmZpbmQoJy5mYy1kYXktZ3JpZCcpKTtcblx0XHRcdHRoaXMuZGF5R3JpZC5yZW5kZXJEYXRlcygpO1xuXG5cdFx0XHQvLyBoYXZlIHRoZSBkYXktZ3JpZCBleHRlbmQgaXQncyBjb29yZGluYXRlIGFyZWEgb3ZlciB0aGUgPGhyPiBkaXZpZGluZyB0aGUgdHdvIGdyaWRzXG5cdFx0XHR0aGlzLmRheUdyaWQuYm90dG9tQ29vcmRQYWRkaW5nID0gdGhpcy5kYXlHcmlkLmVsLm5leHQoJ2hyJykub3V0ZXJIZWlnaHQoKTtcblx0XHR9XG5cblx0XHR0aGlzLm5vU2Nyb2xsUm93RWxzID0gdGhpcy5lbC5maW5kKCcuZmMtcm93Om5vdCguZmMtc2Nyb2xsZXIgKiknKTsgLy8gZmFrZSByb3dzIG5vdCB3aXRoaW4gdGhlIHNjcm9sbGVyXG5cdH0sXG5cblxuXHQvLyByZW5kZXIgdGhlIGRheS1vZi13ZWVrIGhlYWRlcnNcblx0cmVuZGVySGVhZDogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5oZWFkQ29udGFpbmVyRWwgPVxuXHRcdFx0dGhpcy5lbC5maW5kKCcuZmMtaGVhZC1jb250YWluZXInKVxuXHRcdFx0XHQuaHRtbCh0aGlzLnRpbWVHcmlkLnJlbmRlckhlYWRIdG1sKCkpO1xuXHR9LFxuXG5cblx0Ly8gVW5yZW5kZXJzIHRoZSBjb250ZW50IG9mIHRoZSB2aWV3LiBTaW5jZSB3ZSBoYXZlbid0IHNlcGFyYXRlZCBza2VsZXRvbiByZW5kZXJpbmcgZnJvbSBkYXRlIHJlbmRlcmluZyxcblx0Ly8gYWx3YXlzIGNvbXBsZXRlbHkga2lsbCBlYWNoIGdyaWQncyByZW5kZXJpbmcuXG5cdHVucmVuZGVyRGF0ZXM6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMudGltZUdyaWQudW5yZW5kZXJEYXRlcygpO1xuXHRcdHRoaXMudGltZUdyaWQucmVtb3ZlRWxlbWVudCgpO1xuXG5cdFx0aWYgKHRoaXMuZGF5R3JpZCkge1xuXHRcdFx0dGhpcy5kYXlHcmlkLnVucmVuZGVyRGF0ZXMoKTtcblx0XHRcdHRoaXMuZGF5R3JpZC5yZW1vdmVFbGVtZW50KCk7XG5cdFx0fVxuXG5cdFx0dGhpcy5zY3JvbGxlci5kZXN0cm95KCk7XG5cdH0sXG5cblxuXHQvLyBCdWlsZHMgdGhlIEhUTUwgc2tlbGV0b24gZm9yIHRoZSB2aWV3LlxuXHQvLyBUaGUgZGF5LWdyaWQgYW5kIHRpbWUtZ3JpZCBjb21wb25lbnRzIHdpbGwgcmVuZGVyIGluc2lkZSBjb250YWluZXJzIGRlZmluZWQgYnkgdGhpcyBIVE1MLlxuXHRyZW5kZXJTa2VsZXRvbkh0bWw6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiAnJyArXG5cdFx0XHQnPHRhYmxlPicgK1xuXHRcdFx0XHQnPHRoZWFkIGNsYXNzPVwiZmMtaGVhZFwiPicgK1xuXHRcdFx0XHRcdCc8dHI+JyArXG5cdFx0XHRcdFx0XHQnPHRkIGNsYXNzPVwiZmMtaGVhZC1jb250YWluZXIgJyArIHRoaXMud2lkZ2V0SGVhZGVyQ2xhc3MgKyAnXCI+PC90ZD4nICtcblx0XHRcdFx0XHQnPC90cj4nICtcblx0XHRcdFx0JzwvdGhlYWQ+JyArXG5cdFx0XHRcdCc8dGJvZHkgY2xhc3M9XCJmYy1ib2R5XCI+JyArXG5cdFx0XHRcdFx0Jzx0cj4nICtcblx0XHRcdFx0XHRcdCc8dGQgY2xhc3M9XCInICsgdGhpcy53aWRnZXRDb250ZW50Q2xhc3MgKyAnXCI+JyArXG5cdFx0XHRcdFx0XHRcdCh0aGlzLmRheUdyaWQgP1xuXHRcdFx0XHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwiZmMtZGF5LWdyaWRcIi8+JyArXG5cdFx0XHRcdFx0XHRcdFx0JzxociBjbGFzcz1cImZjLWRpdmlkZXIgJyArIHRoaXMud2lkZ2V0SGVhZGVyQ2xhc3MgKyAnXCIvPicgOlxuXHRcdFx0XHRcdFx0XHRcdCcnXG5cdFx0XHRcdFx0XHRcdFx0KSArXG5cdFx0XHRcdFx0XHQnPC90ZD4nICtcblx0XHRcdFx0XHQnPC90cj4nICtcblx0XHRcdFx0JzwvdGJvZHk+JyArXG5cdFx0XHQnPC90YWJsZT4nO1xuXHR9LFxuXG5cblx0Ly8gR2VuZXJhdGVzIGFuIEhUTUwgYXR0cmlidXRlIHN0cmluZyBmb3Igc2V0dGluZyB0aGUgd2lkdGggb2YgdGhlIGF4aXMsIGlmIGl0IGlzIGtub3duXG5cdGF4aXNTdHlsZUF0dHI6IGZ1bmN0aW9uKCkge1xuXHRcdGlmICh0aGlzLmF4aXNXaWR0aCAhPT0gbnVsbCkge1xuXHRcdFx0IHJldHVybiAnc3R5bGU9XCJ3aWR0aDonICsgdGhpcy5heGlzV2lkdGggKyAncHhcIic7XG5cdFx0fVxuXHRcdHJldHVybiAnJztcblx0fSxcblxuXG5cdC8qIEJ1c2luZXNzIEhvdXJzXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHRyZW5kZXJCdXNpbmVzc0hvdXJzOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnRpbWVHcmlkLnJlbmRlckJ1c2luZXNzSG91cnMoKTtcblxuXHRcdGlmICh0aGlzLmRheUdyaWQpIHtcblx0XHRcdHRoaXMuZGF5R3JpZC5yZW5kZXJCdXNpbmVzc0hvdXJzKCk7XG5cdFx0fVxuXHR9LFxuXG5cblx0dW5yZW5kZXJCdXNpbmVzc0hvdXJzOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnRpbWVHcmlkLnVucmVuZGVyQnVzaW5lc3NIb3VycygpO1xuXG5cdFx0aWYgKHRoaXMuZGF5R3JpZCkge1xuXHRcdFx0dGhpcy5kYXlHcmlkLnVucmVuZGVyQnVzaW5lc3NIb3VycygpO1xuXHRcdH1cblx0fSxcblxuXG5cdC8qIE5vdyBJbmRpY2F0b3Jcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdGdldE5vd0luZGljYXRvclVuaXQ6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLnRpbWVHcmlkLmdldE5vd0luZGljYXRvclVuaXQoKTtcblx0fSxcblxuXG5cdHJlbmRlck5vd0luZGljYXRvcjogZnVuY3Rpb24oZGF0ZSkge1xuXHRcdHRoaXMudGltZUdyaWQucmVuZGVyTm93SW5kaWNhdG9yKGRhdGUpO1xuXHR9LFxuXG5cblx0dW5yZW5kZXJOb3dJbmRpY2F0b3I6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMudGltZUdyaWQudW5yZW5kZXJOb3dJbmRpY2F0b3IoKTtcblx0fSxcblxuXG5cdC8qIERpbWVuc2lvbnNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdHVwZGF0ZVNpemU6IGZ1bmN0aW9uKGlzUmVzaXplKSB7XG5cdFx0dGhpcy50aW1lR3JpZC51cGRhdGVTaXplKGlzUmVzaXplKTtcblxuXHRcdFZpZXcucHJvdG90eXBlLnVwZGF0ZVNpemUuY2FsbCh0aGlzLCBpc1Jlc2l6ZSk7IC8vIGNhbGwgdGhlIHN1cGVyLW1ldGhvZFxuXHR9LFxuXG5cblx0Ly8gUmVmcmVzaGVzIHRoZSBob3Jpem9udGFsIGRpbWVuc2lvbnMgb2YgdGhlIHZpZXdcblx0dXBkYXRlV2lkdGg6IGZ1bmN0aW9uKCkge1xuXHRcdC8vIG1ha2UgYWxsIGF4aXMgY2VsbHMgbGluZSB1cCwgYW5kIHJlY29yZCB0aGUgd2lkdGggc28gbmV3bHkgY3JlYXRlZCBheGlzIGNlbGxzIHdpbGwgaGF2ZSBpdFxuXHRcdHRoaXMuYXhpc1dpZHRoID0gbWF0Y2hDZWxsV2lkdGhzKHRoaXMuZWwuZmluZCgnLmZjLWF4aXMnKSk7XG5cdH0sXG5cblxuXHQvLyBBZGp1c3RzIHRoZSB2ZXJ0aWNhbCBkaW1lbnNpb25zIG9mIHRoZSB2aWV3IHRvIHRoZSBzcGVjaWZpZWQgdmFsdWVzXG5cdHNldEhlaWdodDogZnVuY3Rpb24odG90YWxIZWlnaHQsIGlzQXV0bykge1xuXHRcdHZhciBldmVudExpbWl0O1xuXHRcdHZhciBzY3JvbGxlckhlaWdodDtcblx0XHR2YXIgc2Nyb2xsYmFyV2lkdGhzO1xuXG5cdFx0Ly8gcmVzZXQgYWxsIGRpbWVuc2lvbnMgYmFjayB0byB0aGUgb3JpZ2luYWwgc3RhdGVcblx0XHR0aGlzLmJvdHRvbVJ1bGVFbC5oaWRlKCk7IC8vIC5zaG93KCkgd2lsbCBiZSBjYWxsZWQgbGF0ZXIgaWYgdGhpcyA8aHI+IGlzIG5lY2Vzc2FyeVxuXHRcdHRoaXMuc2Nyb2xsZXIuY2xlYXIoKTsgLy8gc2V0cyBoZWlnaHQgdG8gJ2F1dG8nIGFuZCBjbGVhcnMgb3ZlcmZsb3dcblx0XHR1bmNvbXBlbnNhdGVTY3JvbGwodGhpcy5ub1Njcm9sbFJvd0Vscyk7XG5cblx0XHQvLyBsaW1pdCBudW1iZXIgb2YgZXZlbnRzIGluIHRoZSBhbGwtZGF5IGFyZWFcblx0XHRpZiAodGhpcy5kYXlHcmlkKSB7XG5cdFx0XHR0aGlzLmRheUdyaWQucmVtb3ZlU2VnUG9wb3ZlcigpOyAvLyBraWxsIHRoZSBcIm1vcmVcIiBwb3BvdmVyIGlmIGRpc3BsYXllZFxuXG5cdFx0XHRldmVudExpbWl0ID0gdGhpcy5vcHQoJ2V2ZW50TGltaXQnKTtcblx0XHRcdGlmIChldmVudExpbWl0ICYmIHR5cGVvZiBldmVudExpbWl0ICE9PSAnbnVtYmVyJykge1xuXHRcdFx0XHRldmVudExpbWl0ID0gQUdFTkRBX0FMTF9EQVlfRVZFTlRfTElNSVQ7IC8vIG1ha2Ugc3VyZSBcImF1dG9cIiBnb2VzIHRvIGEgcmVhbCBudW1iZXJcblx0XHRcdH1cblx0XHRcdGlmIChldmVudExpbWl0KSB7XG5cdFx0XHRcdHRoaXMuZGF5R3JpZC5saW1pdFJvd3MoZXZlbnRMaW1pdCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCFpc0F1dG8pIHsgLy8gc2hvdWxkIHdlIGZvcmNlIGRpbWVuc2lvbnMgb2YgdGhlIHNjcm9sbCBjb250YWluZXI/XG5cblx0XHRcdHNjcm9sbGVySGVpZ2h0ID0gdGhpcy5jb21wdXRlU2Nyb2xsZXJIZWlnaHQodG90YWxIZWlnaHQpO1xuXHRcdFx0dGhpcy5zY3JvbGxlci5zZXRIZWlnaHQoc2Nyb2xsZXJIZWlnaHQpO1xuXHRcdFx0c2Nyb2xsYmFyV2lkdGhzID0gdGhpcy5zY3JvbGxlci5nZXRTY3JvbGxiYXJXaWR0aHMoKTtcblxuXHRcdFx0aWYgKHNjcm9sbGJhcldpZHRocy5sZWZ0IHx8IHNjcm9sbGJhcldpZHRocy5yaWdodCkgeyAvLyB1c2luZyBzY3JvbGxiYXJzP1xuXG5cdFx0XHRcdC8vIG1ha2UgdGhlIGFsbC1kYXkgYW5kIGhlYWRlciByb3dzIGxpbmVzIHVwXG5cdFx0XHRcdGNvbXBlbnNhdGVTY3JvbGwodGhpcy5ub1Njcm9sbFJvd0Vscywgc2Nyb2xsYmFyV2lkdGhzKTtcblxuXHRcdFx0XHQvLyB0aGUgc2Nyb2xsYmFyIGNvbXBlbnNhdGlvbiBtaWdodCBoYXZlIGNoYW5nZWQgdGV4dCBmbG93LCB3aGljaCBtaWdodCBhZmZlY3QgaGVpZ2h0LCBzbyByZWNhbGN1bGF0ZVxuXHRcdFx0XHQvLyBhbmQgcmVhcHBseSB0aGUgZGVzaXJlZCBoZWlnaHQgdG8gdGhlIHNjcm9sbGVyLlxuXHRcdFx0XHRzY3JvbGxlckhlaWdodCA9IHRoaXMuY29tcHV0ZVNjcm9sbGVySGVpZ2h0KHRvdGFsSGVpZ2h0KTtcblx0XHRcdFx0dGhpcy5zY3JvbGxlci5zZXRIZWlnaHQoc2Nyb2xsZXJIZWlnaHQpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBndWFyYW50ZWVzIHRoZSBzYW1lIHNjcm9sbGJhciB3aWR0aHNcblx0XHRcdHRoaXMuc2Nyb2xsZXIubG9ja092ZXJmbG93KHNjcm9sbGJhcldpZHRocyk7XG5cblx0XHRcdC8vIGlmIHRoZXJlJ3MgYW55IHNwYWNlIGJlbG93IHRoZSBzbGF0cywgc2hvdyB0aGUgaG9yaXpvbnRhbCBydWxlLlxuXHRcdFx0Ly8gdGhpcyB3b24ndCBjYXVzZSBhbnkgbmV3IG92ZXJmbG93LCBiZWNhdXNlIGxvY2tPdmVyZmxvdyBhbHJlYWR5IGNhbGxlZC5cblx0XHRcdGlmICh0aGlzLnRpbWVHcmlkLmdldFRvdGFsU2xhdEhlaWdodCgpIDwgc2Nyb2xsZXJIZWlnaHQpIHtcblx0XHRcdFx0dGhpcy5ib3R0b21SdWxlRWwuc2hvdygpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXG5cdC8vIGdpdmVuIGEgZGVzaXJlZCB0b3RhbCBoZWlnaHQgb2YgdGhlIHZpZXcsIHJldHVybnMgd2hhdCB0aGUgaGVpZ2h0IG9mIHRoZSBzY3JvbGxlciBzaG91bGQgYmVcblx0Y29tcHV0ZVNjcm9sbGVySGVpZ2h0OiBmdW5jdGlvbih0b3RhbEhlaWdodCkge1xuXHRcdHJldHVybiB0b3RhbEhlaWdodCAtXG5cdFx0XHRzdWJ0cmFjdElubmVyRWxIZWlnaHQodGhpcy5lbCwgdGhpcy5zY3JvbGxlci5lbCk7IC8vIGV2ZXJ5dGhpbmcgdGhhdCdzIE5PVCB0aGUgc2Nyb2xsZXJcblx0fSxcblxuXG5cdC8qIFNjcm9sbFxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gQ29tcHV0ZXMgdGhlIGluaXRpYWwgcHJlLWNvbmZpZ3VyZWQgc2Nyb2xsIHN0YXRlIHByaW9yIHRvIGFsbG93aW5nIHRoZSB1c2VyIHRvIGNoYW5nZSBpdFxuXHRjb21wdXRlSW5pdGlhbFNjcm9sbDogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHNjcm9sbFRpbWUgPSBtb21lbnQuZHVyYXRpb24odGhpcy5vcHQoJ3Njcm9sbFRpbWUnKSk7XG5cdFx0dmFyIHRvcCA9IHRoaXMudGltZUdyaWQuY29tcHV0ZVRpbWVUb3Aoc2Nyb2xsVGltZSk7XG5cblx0XHQvLyB6b29tIGNhbiBnaXZlIHdlaXJkIGZsb2F0aW5nLXBvaW50IHZhbHVlcy4gcmF0aGVyIHNjcm9sbCBhIGxpdHRsZSBiaXQgZnVydGhlclxuXHRcdHRvcCA9IE1hdGguY2VpbCh0b3ApO1xuXG5cdFx0aWYgKHRvcCkge1xuXHRcdFx0dG9wKys7IC8vIHRvIG92ZXJjb21lIHRvcCBib3JkZXIgdGhhdCBzbG90cyBiZXlvbmQgdGhlIGZpcnN0IGhhdmUuIGxvb2tzIGJldHRlclxuXHRcdH1cblxuXHRcdHJldHVybiB7IHRvcDogdG9wIH07XG5cdH0sXG5cblxuXHRxdWVyeVNjcm9sbDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHsgdG9wOiB0aGlzLnNjcm9sbGVyLmdldFNjcm9sbFRvcCgpIH07XG5cdH0sXG5cblxuXHRzZXRTY3JvbGw6IGZ1bmN0aW9uKHNjcm9sbCkge1xuXHRcdHRoaXMuc2Nyb2xsZXIuc2V0U2Nyb2xsVG9wKHNjcm9sbC50b3ApO1xuXHR9LFxuXG5cblx0LyogSGl0IEFyZWFzXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdC8vIGZvcndhcmQgYWxsIGhpdC1yZWxhdGVkIG1ldGhvZCBjYWxscyB0byB0aGUgZ3JpZHMgKGRheUdyaWQgbWlnaHQgbm90IGJlIGRlZmluZWQpXG5cblxuXHRwcmVwYXJlSGl0czogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy50aW1lR3JpZC5wcmVwYXJlSGl0cygpO1xuXHRcdGlmICh0aGlzLmRheUdyaWQpIHtcblx0XHRcdHRoaXMuZGF5R3JpZC5wcmVwYXJlSGl0cygpO1xuXHRcdH1cblx0fSxcblxuXG5cdHJlbGVhc2VIaXRzOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnRpbWVHcmlkLnJlbGVhc2VIaXRzKCk7XG5cdFx0aWYgKHRoaXMuZGF5R3JpZCkge1xuXHRcdFx0dGhpcy5kYXlHcmlkLnJlbGVhc2VIaXRzKCk7XG5cdFx0fVxuXHR9LFxuXG5cblx0cXVlcnlIaXQ6IGZ1bmN0aW9uKGxlZnQsIHRvcCkge1xuXHRcdHZhciBoaXQgPSB0aGlzLnRpbWVHcmlkLnF1ZXJ5SGl0KGxlZnQsIHRvcCk7XG5cblx0XHRpZiAoIWhpdCAmJiB0aGlzLmRheUdyaWQpIHtcblx0XHRcdGhpdCA9IHRoaXMuZGF5R3JpZC5xdWVyeUhpdChsZWZ0LCB0b3ApO1xuXHRcdH1cblxuXHRcdHJldHVybiBoaXQ7XG5cdH0sXG5cblxuXHRnZXRIaXRTcGFuOiBmdW5jdGlvbihoaXQpIHtcblx0XHQvLyBUT0RPOiBoaXQuY29tcG9uZW50IGlzIHNldCBhcyBhIGhhY2sgdG8gaWRlbnRpZnkgd2hlcmUgdGhlIGhpdCBjYW1lIGZyb21cblx0XHRyZXR1cm4gaGl0LmNvbXBvbmVudC5nZXRIaXRTcGFuKGhpdCk7XG5cdH0sXG5cblxuXHRnZXRIaXRFbDogZnVuY3Rpb24oaGl0KSB7XG5cdFx0Ly8gVE9ETzogaGl0LmNvbXBvbmVudCBpcyBzZXQgYXMgYSBoYWNrIHRvIGlkZW50aWZ5IHdoZXJlIHRoZSBoaXQgY2FtZSBmcm9tXG5cdFx0cmV0dXJuIGhpdC5jb21wb25lbnQuZ2V0SGl0RWwoaGl0KTtcblx0fSxcblxuXG5cdC8qIEV2ZW50c1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gUmVuZGVycyBldmVudHMgb250byB0aGUgdmlldyBhbmQgcG9wdWxhdGVzIHRoZSBWaWV3J3Mgc2VnbWVudCBhcnJheVxuXHRyZW5kZXJFdmVudHM6IGZ1bmN0aW9uKGV2ZW50cykge1xuXHRcdHZhciBkYXlFdmVudHMgPSBbXTtcblx0XHR2YXIgdGltZWRFdmVudHMgPSBbXTtcblx0XHR2YXIgZGF5U2VncyA9IFtdO1xuXHRcdHZhciB0aW1lZFNlZ3M7XG5cdFx0dmFyIGk7XG5cblx0XHQvLyBzZXBhcmF0ZSB0aGUgZXZlbnRzIGludG8gYWxsLWRheSBhbmQgdGltZWRcblx0XHRmb3IgKGkgPSAwOyBpIDwgZXZlbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZiAoZXZlbnRzW2ldLmFsbERheSkge1xuXHRcdFx0XHRkYXlFdmVudHMucHVzaChldmVudHNbaV0pO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdHRpbWVkRXZlbnRzLnB1c2goZXZlbnRzW2ldKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyByZW5kZXIgdGhlIGV2ZW50cyBpbiB0aGUgc3ViY29tcG9uZW50c1xuXHRcdHRpbWVkU2VncyA9IHRoaXMudGltZUdyaWQucmVuZGVyRXZlbnRzKHRpbWVkRXZlbnRzKTtcblx0XHRpZiAodGhpcy5kYXlHcmlkKSB7XG5cdFx0XHRkYXlTZWdzID0gdGhpcy5kYXlHcmlkLnJlbmRlckV2ZW50cyhkYXlFdmVudHMpO1xuXHRcdH1cblxuXHRcdC8vIHRoZSBhbGwtZGF5IGFyZWEgaXMgZmxleGlibGUgYW5kIG1pZ2h0IGhhdmUgYSBsb3Qgb2YgZXZlbnRzLCBzbyBzaGlmdCB0aGUgaGVpZ2h0XG5cdFx0dGhpcy51cGRhdGVIZWlnaHQoKTtcblx0fSxcblxuXG5cdC8vIFJldHJpZXZlcyBhbGwgc2VnbWVudCBvYmplY3RzIHRoYXQgYXJlIHJlbmRlcmVkIGluIHRoZSB2aWV3XG5cdGdldEV2ZW50U2VnczogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMudGltZUdyaWQuZ2V0RXZlbnRTZWdzKCkuY29uY2F0KFxuXHRcdFx0dGhpcy5kYXlHcmlkID8gdGhpcy5kYXlHcmlkLmdldEV2ZW50U2VncygpIDogW11cblx0XHQpO1xuXHR9LFxuXG5cblx0Ly8gVW5yZW5kZXJzIGFsbCBldmVudCBlbGVtZW50cyBhbmQgY2xlYXJzIGludGVybmFsIHNlZ21lbnQgZGF0YVxuXHR1bnJlbmRlckV2ZW50czogZnVuY3Rpb24oKSB7XG5cblx0XHQvLyB1bnJlbmRlciB0aGUgZXZlbnRzIGluIHRoZSBzdWJjb21wb25lbnRzXG5cdFx0dGhpcy50aW1lR3JpZC51bnJlbmRlckV2ZW50cygpO1xuXHRcdGlmICh0aGlzLmRheUdyaWQpIHtcblx0XHRcdHRoaXMuZGF5R3JpZC51bnJlbmRlckV2ZW50cygpO1xuXHRcdH1cblxuXHRcdC8vIHdlIERPTidUIG5lZWQgdG8gY2FsbCB1cGRhdGVIZWlnaHQoKSBiZWNhdXNlXG5cdFx0Ly8gYSByZW5kZXJFdmVudHMoKSBjYWxsIGFsd2F5cyBoYXBwZW5zIGFmdGVyIHRoaXMsIHdoaWNoIHdpbGwgZXZlbnR1YWxseSBjYWxsIHVwZGF0ZUhlaWdodCgpXG5cdH0sXG5cblxuXHQvKiBEcmFnZ2luZyAoZm9yIGV2ZW50cyBhbmQgZXh0ZXJuYWwgZWxlbWVudHMpXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBBIHJldHVybmVkIHZhbHVlIG9mIGB0cnVlYCBzaWduYWxzIHRoYXQgYSBtb2NrIFwiaGVscGVyXCIgZXZlbnQgaGFzIGJlZW4gcmVuZGVyZWQuXG5cdHJlbmRlckRyYWc6IGZ1bmN0aW9uKGRyb3BMb2NhdGlvbiwgc2VnKSB7XG5cdFx0aWYgKGRyb3BMb2NhdGlvbi5zdGFydC5oYXNUaW1lKCkpIHtcblx0XHRcdHJldHVybiB0aGlzLnRpbWVHcmlkLnJlbmRlckRyYWcoZHJvcExvY2F0aW9uLCBzZWcpO1xuXHRcdH1cblx0XHRlbHNlIGlmICh0aGlzLmRheUdyaWQpIHtcblx0XHRcdHJldHVybiB0aGlzLmRheUdyaWQucmVuZGVyRHJhZyhkcm9wTG9jYXRpb24sIHNlZyk7XG5cdFx0fVxuXHR9LFxuXG5cblx0dW5yZW5kZXJEcmFnOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnRpbWVHcmlkLnVucmVuZGVyRHJhZygpO1xuXHRcdGlmICh0aGlzLmRheUdyaWQpIHtcblx0XHRcdHRoaXMuZGF5R3JpZC51bnJlbmRlckRyYWcoKTtcblx0XHR9XG5cdH0sXG5cblxuXHQvKiBTZWxlY3Rpb25cblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIFJlbmRlcnMgYSB2aXN1YWwgaW5kaWNhdGlvbiBvZiBhIHNlbGVjdGlvblxuXHRyZW5kZXJTZWxlY3Rpb246IGZ1bmN0aW9uKHNwYW4pIHtcblx0XHRpZiAoc3Bhbi5zdGFydC5oYXNUaW1lKCkgfHwgc3Bhbi5lbmQuaGFzVGltZSgpKSB7XG5cdFx0XHR0aGlzLnRpbWVHcmlkLnJlbmRlclNlbGVjdGlvbihzcGFuKTtcblx0XHR9XG5cdFx0ZWxzZSBpZiAodGhpcy5kYXlHcmlkKSB7XG5cdFx0XHR0aGlzLmRheUdyaWQucmVuZGVyU2VsZWN0aW9uKHNwYW4pO1xuXHRcdH1cblx0fSxcblxuXG5cdC8vIFVucmVuZGVycyBhIHZpc3VhbCBpbmRpY2F0aW9ucyBvZiBhIHNlbGVjdGlvblxuXHR1bnJlbmRlclNlbGVjdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy50aW1lR3JpZC51bnJlbmRlclNlbGVjdGlvbigpO1xuXHRcdGlmICh0aGlzLmRheUdyaWQpIHtcblx0XHRcdHRoaXMuZGF5R3JpZC51bnJlbmRlclNlbGVjdGlvbigpO1xuXHRcdH1cblx0fVxuXG59KTtcblxuXG4vLyBNZXRob2RzIHRoYXQgd2lsbCBjdXN0b21pemUgdGhlIHJlbmRlcmluZyBiZWhhdmlvciBvZiB0aGUgQWdlbmRhVmlldydzIHRpbWVHcmlkXG4vLyBUT0RPOiBtb3ZlIGludG8gVGltZUdyaWRcbnZhciBhZ2VuZGFUaW1lR3JpZE1ldGhvZHMgPSB7XG5cblxuXHQvLyBHZW5lcmF0ZXMgdGhlIEhUTUwgdGhhdCB3aWxsIGdvIGJlZm9yZSB0aGUgZGF5LW9mIHdlZWsgaGVhZGVyIGNlbGxzXG5cdHJlbmRlckhlYWRJbnRyb0h0bWw6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB2aWV3ID0gdGhpcy52aWV3O1xuXHRcdHZhciB3ZWVrVGV4dDtcblxuXHRcdGlmICh2aWV3Lm9wdCgnd2Vla051bWJlcnMnKSkge1xuXHRcdFx0d2Vla1RleHQgPSB0aGlzLnN0YXJ0LmZvcm1hdCh2aWV3Lm9wdCgnc21hbGxXZWVrRm9ybWF0JykpO1xuXG5cdFx0XHRyZXR1cm4gJycgK1xuXHRcdFx0XHQnPHRoIGNsYXNzPVwiZmMtYXhpcyBmYy13ZWVrLW51bWJlciAnICsgdmlldy53aWRnZXRIZWFkZXJDbGFzcyArICdcIiAnICsgdmlldy5heGlzU3R5bGVBdHRyKCkgKyAnPicgK1xuXHRcdFx0XHRcdHZpZXcuYnVpbGRHb3RvQW5jaG9ySHRtbCggLy8gYXNpZGUgZnJvbSBsaW5rLCBpbXBvcnRhbnQgZm9yIG1hdGNoQ2VsbFdpZHRoc1xuXHRcdFx0XHRcdFx0eyBkYXRlOiB0aGlzLnN0YXJ0LCB0eXBlOiAnd2VlaycsIGZvcmNlT2ZmOiB0aGlzLmNvbENudCA+IDEgfSxcblx0XHRcdFx0XHRcdGh0bWxFc2NhcGUod2Vla1RleHQpIC8vIGlubmVyIEhUTUxcblx0XHRcdFx0XHQpICtcblx0XHRcdFx0JzwvdGg+Jztcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRyZXR1cm4gJzx0aCBjbGFzcz1cImZjLWF4aXMgJyArIHZpZXcud2lkZ2V0SGVhZGVyQ2xhc3MgKyAnXCIgJyArIHZpZXcuYXhpc1N0eWxlQXR0cigpICsgJz48L3RoPic7XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gR2VuZXJhdGVzIHRoZSBIVE1MIHRoYXQgZ29lcyBiZWZvcmUgdGhlIGJnIG9mIHRoZSBUaW1lR3JpZCBzbG90IGFyZWEuIExvbmcgdmVydGljYWwgY29sdW1uLlxuXHRyZW5kZXJCZ0ludHJvSHRtbDogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHZpZXcgPSB0aGlzLnZpZXc7XG5cblx0XHRyZXR1cm4gJzx0ZCBjbGFzcz1cImZjLWF4aXMgJyArIHZpZXcud2lkZ2V0Q29udGVudENsYXNzICsgJ1wiICcgKyB2aWV3LmF4aXNTdHlsZUF0dHIoKSArICc+PC90ZD4nO1xuXHR9LFxuXG5cblx0Ly8gR2VuZXJhdGVzIHRoZSBIVE1MIHRoYXQgZ29lcyBiZWZvcmUgYWxsIG90aGVyIHR5cGVzIG9mIGNlbGxzLlxuXHQvLyBBZmZlY3RzIGNvbnRlbnQtc2tlbGV0b24sIGhlbHBlci1za2VsZXRvbiwgaGlnaGxpZ2h0LXNrZWxldG9uIGZvciBib3RoIHRoZSB0aW1lLWdyaWQgYW5kIGRheS1ncmlkLlxuXHRyZW5kZXJJbnRyb0h0bWw6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB2aWV3ID0gdGhpcy52aWV3O1xuXG5cdFx0cmV0dXJuICc8dGQgY2xhc3M9XCJmYy1heGlzXCIgJyArIHZpZXcuYXhpc1N0eWxlQXR0cigpICsgJz48L3RkPic7XG5cdH1cblxufTtcblxuXG4vLyBNZXRob2RzIHRoYXQgd2lsbCBjdXN0b21pemUgdGhlIHJlbmRlcmluZyBiZWhhdmlvciBvZiB0aGUgQWdlbmRhVmlldydzIGRheUdyaWRcbnZhciBhZ2VuZGFEYXlHcmlkTWV0aG9kcyA9IHtcblxuXG5cdC8vIEdlbmVyYXRlcyB0aGUgSFRNTCB0aGF0IGdvZXMgYmVmb3JlIHRoZSBhbGwtZGF5IGNlbGxzXG5cdHJlbmRlckJnSW50cm9IdG1sOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgdmlldyA9IHRoaXMudmlldztcblxuXHRcdHJldHVybiAnJyArXG5cdFx0XHQnPHRkIGNsYXNzPVwiZmMtYXhpcyAnICsgdmlldy53aWRnZXRDb250ZW50Q2xhc3MgKyAnXCIgJyArIHZpZXcuYXhpc1N0eWxlQXR0cigpICsgJz4nICtcblx0XHRcdFx0JzxzcGFuPicgKyAvLyBuZWVkZWQgZm9yIG1hdGNoQ2VsbFdpZHRoc1xuXHRcdFx0XHRcdHZpZXcuZ2V0QWxsRGF5SHRtbCgpICtcblx0XHRcdFx0Jzwvc3Bhbj4nICtcblx0XHRcdCc8L3RkPic7XG5cdH0sXG5cblxuXHQvLyBHZW5lcmF0ZXMgdGhlIEhUTUwgdGhhdCBnb2VzIGJlZm9yZSBhbGwgb3RoZXIgdHlwZXMgb2YgY2VsbHMuXG5cdC8vIEFmZmVjdHMgY29udGVudC1za2VsZXRvbiwgaGVscGVyLXNrZWxldG9uLCBoaWdobGlnaHQtc2tlbGV0b24gZm9yIGJvdGggdGhlIHRpbWUtZ3JpZCBhbmQgZGF5LWdyaWQuXG5cdHJlbmRlckludHJvSHRtbDogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHZpZXcgPSB0aGlzLnZpZXc7XG5cblx0XHRyZXR1cm4gJzx0ZCBjbGFzcz1cImZjLWF4aXNcIiAnICsgdmlldy5heGlzU3R5bGVBdHRyKCkgKyAnPjwvdGQ+Jztcblx0fVxuXG59O1xuXG47O1xuXG52YXIgQUdFTkRBX0FMTF9EQVlfRVZFTlRfTElNSVQgPSA1O1xuXG4vLyBwb3RlbnRpYWwgbmljZSB2YWx1ZXMgZm9yIHRoZSBzbG90LWR1cmF0aW9uIGFuZCBpbnRlcnZhbC1kdXJhdGlvblxuLy8gZnJvbSBsYXJnZXN0IHRvIHNtYWxsZXN0XG52YXIgQUdFTkRBX1NUT0NLX1NVQl9EVVJBVElPTlMgPSBbXG5cdHsgaG91cnM6IDEgfSxcblx0eyBtaW51dGVzOiAzMCB9LFxuXHR7IG1pbnV0ZXM6IDE1IH0sXG5cdHsgc2Vjb25kczogMzAgfSxcblx0eyBzZWNvbmRzOiAxNSB9XG5dO1xuXG5mY1ZpZXdzLmFnZW5kYSA9IHtcblx0J2NsYXNzJzogQWdlbmRhVmlldyxcblx0ZGVmYXVsdHM6IHtcblx0XHRhbGxEYXlTbG90OiB0cnVlLFxuXHRcdHNsb3REdXJhdGlvbjogJzAwOjMwOjAwJyxcblx0XHRtaW5UaW1lOiAnMDA6MDA6MDAnLFxuXHRcdG1heFRpbWU6ICcyNDowMDowMCcsXG5cdFx0c2xvdEV2ZW50T3ZlcmxhcDogdHJ1ZSAvLyBhIGJhZCBuYW1lLiBjb25mdXNlZCB3aXRoIG92ZXJsYXAvY29uc3RyYWludCBzeXN0ZW1cblx0fVxufTtcblxuZmNWaWV3cy5hZ2VuZGFEYXkgPSB7XG5cdHR5cGU6ICdhZ2VuZGEnLFxuXHRkdXJhdGlvbjogeyBkYXlzOiAxIH1cbn07XG5cbmZjVmlld3MuYWdlbmRhV2VlayA9IHtcblx0dHlwZTogJ2FnZW5kYScsXG5cdGR1cmF0aW9uOiB7IHdlZWtzOiAxIH1cbn07XG47O1xuXG4vKlxuUmVzcG9uc2libGUgZm9yIHRoZSBzY3JvbGxlciwgYW5kIGZvcndhcmRpbmcgZXZlbnQtcmVsYXRlZCBhY3Rpb25zIGludG8gdGhlIFwiZ3JpZFwiXG4qL1xudmFyIExpc3RWaWV3ID0gVmlldy5leHRlbmQoe1xuXG5cdGdyaWQ6IG51bGwsXG5cdHNjcm9sbGVyOiBudWxsLFxuXG5cdGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuZ3JpZCA9IG5ldyBMaXN0Vmlld0dyaWQodGhpcyk7XG5cdFx0dGhpcy5zY3JvbGxlciA9IG5ldyBTY3JvbGxlcih7XG5cdFx0XHRvdmVyZmxvd1g6ICdoaWRkZW4nLFxuXHRcdFx0b3ZlcmZsb3dZOiAnYXV0bydcblx0XHR9KTtcblx0fSxcblxuXHRzZXRSYW5nZTogZnVuY3Rpb24ocmFuZ2UpIHtcblx0XHRWaWV3LnByb3RvdHlwZS5zZXRSYW5nZS5jYWxsKHRoaXMsIHJhbmdlKTsgLy8gc3VwZXJcblxuXHRcdHRoaXMuZ3JpZC5zZXRSYW5nZShyYW5nZSk7IC8vIG5lZWRzIHRvIHByb2Nlc3MgcmFuZ2UtcmVsYXRlZCBvcHRpb25zXG5cdH0sXG5cblx0cmVuZGVyU2tlbGV0b246IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuZWwuYWRkQ2xhc3MoXG5cdFx0XHQnZmMtbGlzdC12aWV3ICcgK1xuXHRcdFx0dGhpcy53aWRnZXRDb250ZW50Q2xhc3Ncblx0XHQpO1xuXG5cdFx0dGhpcy5zY3JvbGxlci5yZW5kZXIoKTtcblx0XHR0aGlzLnNjcm9sbGVyLmVsLmFwcGVuZFRvKHRoaXMuZWwpO1xuXG5cdFx0dGhpcy5ncmlkLnNldEVsZW1lbnQodGhpcy5zY3JvbGxlci5zY3JvbGxFbCk7XG5cdH0sXG5cblx0dW5yZW5kZXJTa2VsZXRvbjogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5zY3JvbGxlci5kZXN0cm95KCk7IC8vIHdpbGwgcmVtb3ZlIHRoZSBHcmlkIHRvb1xuXHR9LFxuXG5cdHNldEhlaWdodDogZnVuY3Rpb24odG90YWxIZWlnaHQsIGlzQXV0bykge1xuXHRcdHRoaXMuc2Nyb2xsZXIuc2V0SGVpZ2h0KHRoaXMuY29tcHV0ZVNjcm9sbGVySGVpZ2h0KHRvdGFsSGVpZ2h0KSk7XG5cdH0sXG5cblx0Y29tcHV0ZVNjcm9sbGVySGVpZ2h0OiBmdW5jdGlvbih0b3RhbEhlaWdodCkge1xuXHRcdHJldHVybiB0b3RhbEhlaWdodCAtXG5cdFx0XHRzdWJ0cmFjdElubmVyRWxIZWlnaHQodGhpcy5lbCwgdGhpcy5zY3JvbGxlci5lbCk7IC8vIGV2ZXJ5dGhpbmcgdGhhdCdzIE5PVCB0aGUgc2Nyb2xsZXJcblx0fSxcblxuXHRyZW5kZXJFdmVudHM6IGZ1bmN0aW9uKGV2ZW50cykge1xuXHRcdHRoaXMuZ3JpZC5yZW5kZXJFdmVudHMoZXZlbnRzKTtcblx0fSxcblxuXHR1bnJlbmRlckV2ZW50czogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5ncmlkLnVucmVuZGVyRXZlbnRzKCk7XG5cdH0sXG5cblx0aXNFdmVudFJlc2l6YWJsZTogZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH0sXG5cblx0aXNFdmVudERyYWdnYWJsZTogZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxufSk7XG5cbi8qXG5SZXNwb25zaWJsZSBmb3IgZXZlbnQgcmVuZGVyaW5nIGFuZCB1c2VyLWludGVyYWN0aW9uLlxuSXRzIFwiZWxcIiBpcyB0aGUgaW5uZXItY29udGVudCBvZiB0aGUgYWJvdmUgdmlldydzIHNjcm9sbGVyLlxuKi9cbnZhciBMaXN0Vmlld0dyaWQgPSBHcmlkLmV4dGVuZCh7XG5cblx0c2VnU2VsZWN0b3I6ICcuZmMtbGlzdC1pdGVtJywgLy8gd2hpY2ggZWxlbWVudHMgYWNjZXB0IGV2ZW50IGFjdGlvbnNcblx0aGFzRGF5SW50ZXJhY3Rpb25zOiBmYWxzZSwgLy8gbm8gZGF5IHNlbGVjdGlvbiBvciBkYXkgY2xpY2tpbmdcblxuXHQvLyBzbGljZXMgYnkgZGF5XG5cdHNwYW5Ub1NlZ3M6IGZ1bmN0aW9uKHNwYW4pIHtcblx0XHR2YXIgdmlldyA9IHRoaXMudmlldztcblx0XHR2YXIgZGF5U3RhcnQgPSB2aWV3LnN0YXJ0LmNsb25lKCkudGltZSgwKTsgLy8gdGltZWQsIHNvIHNlZ3MgZ2V0IHRpbWVzIVxuXHRcdHZhciBkYXlJbmRleCA9IDA7XG5cdFx0dmFyIHNlZztcblx0XHR2YXIgc2VncyA9IFtdO1xuXG5cdFx0d2hpbGUgKGRheVN0YXJ0IDwgdmlldy5lbmQpIHtcblxuXHRcdFx0c2VnID0gaW50ZXJzZWN0UmFuZ2VzKHNwYW4sIHtcblx0XHRcdFx0c3RhcnQ6IGRheVN0YXJ0LFxuXHRcdFx0XHRlbmQ6IGRheVN0YXJ0LmNsb25lKCkuYWRkKDEsICdkYXknKVxuXHRcdFx0fSk7XG5cblx0XHRcdGlmIChzZWcpIHtcblx0XHRcdFx0c2VnLmRheUluZGV4ID0gZGF5SW5kZXg7XG5cdFx0XHRcdHNlZ3MucHVzaChzZWcpO1xuXHRcdFx0fVxuXG5cdFx0XHRkYXlTdGFydC5hZGQoMSwgJ2RheScpO1xuXHRcdFx0ZGF5SW5kZXgrKztcblxuXHRcdFx0Ly8gZGV0ZWN0IHdoZW4gc3BhbiB3b24ndCBnbyBmdWxseSBpbnRvIHRoZSBuZXh0IGRheSxcblx0XHRcdC8vIGFuZCBtdXRhdGUgdGhlIGxhdGVzdCBzZWcgdG8gdGhlIGJlIHRoZSBlbmQuXG5cdFx0XHRpZiAoXG5cdFx0XHRcdHNlZyAmJiAhc2VnLmlzRW5kICYmIHNwYW4uZW5kLmhhc1RpbWUoKSAmJlxuXHRcdFx0XHRzcGFuLmVuZCA8IGRheVN0YXJ0LmNsb25lKCkuYWRkKHRoaXMudmlldy5uZXh0RGF5VGhyZXNob2xkKVxuXHRcdFx0KSB7XG5cdFx0XHRcdHNlZy5lbmQgPSBzcGFuLmVuZC5jbG9uZSgpO1xuXHRcdFx0XHRzZWcuaXNFbmQgPSB0cnVlO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gc2Vncztcblx0fSxcblxuXHQvLyBsaWtlIFwiNDowMGFtXCJcblx0Y29tcHV0ZUV2ZW50VGltZUZvcm1hdDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMudmlldy5vcHQoJ21lZGl1bVRpbWVGb3JtYXQnKTtcblx0fSxcblxuXHQvLyBmb3IgZXZlbnRzIHdpdGggYSB1cmwsIHRoZSB3aG9sZSA8dHI+IHNob3VsZCBiZSBjbGlja2FibGUsXG5cdC8vIGJ1dCBpdCdzIGltcG9zc2libGUgdG8gd3JhcCB3aXRoIGFuIDxhPiB0YWcuIHNpbXVsYXRlIHRoaXMuXG5cdGhhbmRsZVNlZ0NsaWNrOiBmdW5jdGlvbihzZWcsIGV2KSB7XG5cdFx0dmFyIHVybDtcblxuXHRcdEdyaWQucHJvdG90eXBlLmhhbmRsZVNlZ0NsaWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IC8vIHN1cGVyLiBtaWdodCBwcmV2ZW50IHRoZSBkZWZhdWx0IGFjdGlvblxuXG5cdFx0Ly8gbm90IGNsaWNraW5nIG9uIG9yIHdpdGhpbiBhbiA8YT4gd2l0aCBhbiBocmVmXG5cdFx0aWYgKCEkKGV2LnRhcmdldCkuY2xvc2VzdCgnYVtocmVmXScpLmxlbmd0aCkge1xuXHRcdFx0dXJsID0gc2VnLmV2ZW50LnVybDtcblx0XHRcdGlmICh1cmwgJiYgIWV2LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7IC8vIGpzRXZlbnQgbm90IGNhbmNlbGxlZCBpbiBoYW5kbGVyXG5cdFx0XHRcdHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdXJsOyAvLyBzaW11bGF0ZSBsaW5rIGNsaWNrXG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdC8vIHJldHVybnMgbGlzdCBvZiBmb3JlZ3JvdW5kIHNlZ3MgdGhhdCB3ZXJlIGFjdHVhbGx5IHJlbmRlcmVkXG5cdHJlbmRlckZnU2VnczogZnVuY3Rpb24oc2Vncykge1xuXHRcdHNlZ3MgPSB0aGlzLnJlbmRlckZnU2VnRWxzKHNlZ3MpOyAvLyBtaWdodCBmaWx0ZXIgYXdheSBoaWRkZW4gZXZlbnRzXG5cblx0XHRpZiAoIXNlZ3MubGVuZ3RoKSB7XG5cdFx0XHR0aGlzLnJlbmRlckVtcHR5TWVzc2FnZSgpO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdHRoaXMucmVuZGVyU2VnTGlzdChzZWdzKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gc2Vncztcblx0fSxcblxuXHRyZW5kZXJFbXB0eU1lc3NhZ2U6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuZWwuaHRtbChcblx0XHRcdCc8ZGl2IGNsYXNzPVwiZmMtbGlzdC1lbXB0eS13cmFwMlwiPicgKyAvLyBUT0RPOiB0cnkgbGVzcyB3cmFwc1xuXHRcdFx0JzxkaXYgY2xhc3M9XCJmYy1saXN0LWVtcHR5LXdyYXAxXCI+JyArXG5cdFx0XHQnPGRpdiBjbGFzcz1cImZjLWxpc3QtZW1wdHlcIj4nICtcblx0XHRcdFx0aHRtbEVzY2FwZSh0aGlzLnZpZXcub3B0KCdub0V2ZW50c01lc3NhZ2UnKSkgK1xuXHRcdFx0JzwvZGl2PicgK1xuXHRcdFx0JzwvZGl2PicgK1xuXHRcdFx0JzwvZGl2Pidcblx0XHQpO1xuXHR9LFxuXG5cdC8vIHJlbmRlciB0aGUgZXZlbnQgc2VnbWVudHMgaW4gdGhlIHZpZXdcblx0cmVuZGVyU2VnTGlzdDogZnVuY3Rpb24oYWxsU2Vncykge1xuXHRcdHZhciBzZWdzQnlEYXkgPSB0aGlzLmdyb3VwU2Vnc0J5RGF5KGFsbFNlZ3MpOyAvLyBzcGFyc2UgYXJyYXlcblx0XHR2YXIgZGF5SW5kZXg7XG5cdFx0dmFyIGRheVNlZ3M7XG5cdFx0dmFyIGk7XG5cdFx0dmFyIHRhYmxlRWwgPSAkKCc8dGFibGUgY2xhc3M9XCJmYy1saXN0LXRhYmxlXCI+PHRib2R5Lz48L3RhYmxlPicpO1xuXHRcdHZhciB0Ym9keUVsID0gdGFibGVFbC5maW5kKCd0Ym9keScpO1xuXG5cdFx0Zm9yIChkYXlJbmRleCA9IDA7IGRheUluZGV4IDwgc2Vnc0J5RGF5Lmxlbmd0aDsgZGF5SW5kZXgrKykge1xuXHRcdFx0ZGF5U2VncyA9IHNlZ3NCeURheVtkYXlJbmRleF07XG5cdFx0XHRpZiAoZGF5U2VncykgeyAvLyBzcGFyc2UgYXJyYXksIHNvIG1pZ2h0IGJlIHVuZGVmaW5lZFxuXG5cdFx0XHRcdC8vIGFwcGVuZCBhIGRheSBoZWFkZXJcblx0XHRcdFx0dGJvZHlFbC5hcHBlbmQodGhpcy5kYXlIZWFkZXJIdG1sKFxuXHRcdFx0XHRcdHRoaXMudmlldy5zdGFydC5jbG9uZSgpLmFkZChkYXlJbmRleCwgJ2RheXMnKVxuXHRcdFx0XHQpKTtcblxuXHRcdFx0XHR0aGlzLnNvcnRFdmVudFNlZ3MoZGF5U2Vncyk7XG5cblx0XHRcdFx0Zm9yIChpID0gMDsgaSA8IGRheVNlZ3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHR0Ym9keUVsLmFwcGVuZChkYXlTZWdzW2ldLmVsKTsgLy8gYXBwZW5kIGV2ZW50IHJvd1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dGhpcy5lbC5lbXB0eSgpLmFwcGVuZCh0YWJsZUVsKTtcblx0fSxcblxuXHQvLyBSZXR1cm5zIGEgc3BhcnNlIGFycmF5IG9mIGFycmF5cywgc2VncyBncm91cGVkIGJ5IHRoZWlyIGRheUluZGV4XG5cdGdyb3VwU2Vnc0J5RGF5OiBmdW5jdGlvbihzZWdzKSB7XG5cdFx0dmFyIHNlZ3NCeURheSA9IFtdOyAvLyBzcGFyc2UgYXJyYXlcblx0XHR2YXIgaSwgc2VnO1xuXG5cdFx0Zm9yIChpID0gMDsgaSA8IHNlZ3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdHNlZyA9IHNlZ3NbaV07XG5cdFx0XHQoc2Vnc0J5RGF5W3NlZy5kYXlJbmRleF0gfHwgKHNlZ3NCeURheVtzZWcuZGF5SW5kZXhdID0gW10pKVxuXHRcdFx0XHQucHVzaChzZWcpO1xuXHRcdH1cblxuXHRcdHJldHVybiBzZWdzQnlEYXk7XG5cdH0sXG5cblx0Ly8gZ2VuZXJhdGVzIHRoZSBIVE1MIGZvciB0aGUgZGF5IGhlYWRlcnMgdGhhdCBsaXZlIGFtb25nc3QgdGhlIGV2ZW50IHJvd3Ncblx0ZGF5SGVhZGVySHRtbDogZnVuY3Rpb24oZGF5RGF0ZSkge1xuXHRcdHZhciB2aWV3ID0gdGhpcy52aWV3O1xuXHRcdHZhciBtYWluRm9ybWF0ID0gdmlldy5vcHQoJ2xpc3REYXlGb3JtYXQnKTtcblx0XHR2YXIgYWx0Rm9ybWF0ID0gdmlldy5vcHQoJ2xpc3REYXlBbHRGb3JtYXQnKTtcblxuXHRcdHJldHVybiAnPHRyIGNsYXNzPVwiZmMtbGlzdC1oZWFkaW5nXCIgZGF0YS1kYXRlPVwiJyArIGRheURhdGUuZm9ybWF0KCdZWVlZLU1NLUREJykgKyAnXCI+JyArXG5cdFx0XHQnPHRkIGNsYXNzPVwiJyArIHZpZXcud2lkZ2V0SGVhZGVyQ2xhc3MgKyAnXCIgY29sc3Bhbj1cIjNcIj4nICtcblx0XHRcdFx0KG1haW5Gb3JtYXQgP1xuXHRcdFx0XHRcdHZpZXcuYnVpbGRHb3RvQW5jaG9ySHRtbChcblx0XHRcdFx0XHRcdGRheURhdGUsXG5cdFx0XHRcdFx0XHR7ICdjbGFzcyc6ICdmYy1saXN0LWhlYWRpbmctbWFpbicgfSxcblx0XHRcdFx0XHRcdGh0bWxFc2NhcGUoZGF5RGF0ZS5mb3JtYXQobWFpbkZvcm1hdCkpIC8vIGlubmVyIEhUTUxcblx0XHRcdFx0XHQpIDpcblx0XHRcdFx0XHQnJykgK1xuXHRcdFx0XHQoYWx0Rm9ybWF0ID9cblx0XHRcdFx0XHR2aWV3LmJ1aWxkR290b0FuY2hvckh0bWwoXG5cdFx0XHRcdFx0XHRkYXlEYXRlLFxuXHRcdFx0XHRcdFx0eyAnY2xhc3MnOiAnZmMtbGlzdC1oZWFkaW5nLWFsdCcgfSxcblx0XHRcdFx0XHRcdGh0bWxFc2NhcGUoZGF5RGF0ZS5mb3JtYXQoYWx0Rm9ybWF0KSkgLy8gaW5uZXIgSFRNTFxuXHRcdFx0XHRcdCkgOlxuXHRcdFx0XHRcdCcnKSArXG5cdFx0XHQnPC90ZD4nICtcblx0XHQnPC90cj4nO1xuXHR9LFxuXG5cdC8vIGdlbmVyYXRlcyB0aGUgSFRNTCBmb3IgYSBzaW5nbGUgZXZlbnQgcm93XG5cdGZnU2VnSHRtbDogZnVuY3Rpb24oc2VnKSB7XG5cdFx0dmFyIHZpZXcgPSB0aGlzLnZpZXc7XG5cdFx0dmFyIGNsYXNzZXMgPSBbICdmYy1saXN0LWl0ZW0nIF0uY29uY2F0KHRoaXMuZ2V0U2VnQ3VzdG9tQ2xhc3NlcyhzZWcpKTtcblx0XHR2YXIgYmdDb2xvciA9IHRoaXMuZ2V0U2VnQmFja2dyb3VuZENvbG9yKHNlZyk7XG5cdFx0dmFyIGV2ZW50ID0gc2VnLmV2ZW50O1xuXHRcdHZhciB1cmwgPSBldmVudC51cmw7XG5cdFx0dmFyIHRpbWVIdG1sO1xuXG5cdFx0aWYgKGV2ZW50LmFsbERheSkge1xuXHRcdFx0dGltZUh0bWwgPSB2aWV3LmdldEFsbERheUh0bWwoKTtcblx0XHR9XG5cdFx0ZWxzZSBpZiAodmlldy5pc011bHRpRGF5RXZlbnQoZXZlbnQpKSB7IC8vIGlmIHRoZSBldmVudCBhcHBlYXJzIHRvIHNwYW4gbW9yZSB0aGFuIG9uZSBkYXlcblx0XHRcdGlmIChzZWcuaXNTdGFydCB8fCBzZWcuaXNFbmQpIHsgLy8gb3V0ZXIgc2VnbWVudCB0aGF0IHByb2JhYmx5IGxhc3RzIHBhcnQgb2YgdGhlIGRheVxuXHRcdFx0XHR0aW1lSHRtbCA9IGh0bWxFc2NhcGUodGhpcy5nZXRFdmVudFRpbWVUZXh0KHNlZykpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7IC8vIGlubmVyIHNlZ21lbnQgdGhhdCBsYXN0cyB0aGUgd2hvbGUgZGF5XG5cdFx0XHRcdHRpbWVIdG1sID0gdmlldy5nZXRBbGxEYXlIdG1sKCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0Ly8gRGlzcGxheSB0aGUgbm9ybWFsIHRpbWUgdGV4dCBmb3IgdGhlICpldmVudCdzKiB0aW1lc1xuXHRcdFx0dGltZUh0bWwgPSBodG1sRXNjYXBlKHRoaXMuZ2V0RXZlbnRUaW1lVGV4dChldmVudCkpO1xuXHRcdH1cblxuXHRcdGlmICh1cmwpIHtcblx0XHRcdGNsYXNzZXMucHVzaCgnZmMtaGFzLXVybCcpO1xuXHRcdH1cblxuXHRcdHJldHVybiAnPHRyIGNsYXNzPVwiJyArIGNsYXNzZXMuam9pbignICcpICsgJ1wiPicgK1xuXHRcdFx0KHRoaXMuZGlzcGxheUV2ZW50VGltZSA/XG5cdFx0XHRcdCc8dGQgY2xhc3M9XCJmYy1saXN0LWl0ZW0tdGltZSAnICsgdmlldy53aWRnZXRDb250ZW50Q2xhc3MgKyAnXCI+JyArXG5cdFx0XHRcdFx0KHRpbWVIdG1sIHx8ICcnKSArXG5cdFx0XHRcdCc8L3RkPicgOlxuXHRcdFx0XHQnJykgK1xuXHRcdFx0Jzx0ZCBjbGFzcz1cImZjLWxpc3QtaXRlbS1tYXJrZXIgJyArIHZpZXcud2lkZ2V0Q29udGVudENsYXNzICsgJ1wiPicgK1xuXHRcdFx0XHQnPHNwYW4gY2xhc3M9XCJmYy1ldmVudC1kb3RcIicgK1xuXHRcdFx0XHQoYmdDb2xvciA/XG5cdFx0XHRcdFx0JyBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6JyArIGJnQ29sb3IgKyAnXCInIDpcblx0XHRcdFx0XHQnJykgK1xuXHRcdFx0XHQnPjwvc3Bhbj4nICtcblx0XHRcdCc8L3RkPicgK1xuXHRcdFx0Jzx0ZCBjbGFzcz1cImZjLWxpc3QtaXRlbS10aXRsZSAnICsgdmlldy53aWRnZXRDb250ZW50Q2xhc3MgKyAnXCI+JyArXG5cdFx0XHRcdCc8YScgKyAodXJsID8gJyBocmVmPVwiJyArIGh0bWxFc2NhcGUodXJsKSArICdcIicgOiAnJykgKyAnPicgK1xuXHRcdFx0XHRcdGh0bWxFc2NhcGUoc2VnLmV2ZW50LnRpdGxlIHx8ICcnKSArXG5cdFx0XHRcdCc8L2E+JyArXG5cdFx0XHQnPC90ZD4nICtcblx0XHQnPC90cj4nO1xuXHR9XG5cbn0pO1xuXG47O1xuXG5mY1ZpZXdzLmxpc3QgPSB7XG5cdCdjbGFzcyc6IExpc3RWaWV3LFxuXHRidXR0b25UZXh0S2V5OiAnbGlzdCcsIC8vIHdoYXQgdG8gbG9va3VwIGluIGxvY2FsZSBmaWxlc1xuXHRkZWZhdWx0czoge1xuXHRcdGJ1dHRvblRleHQ6ICdsaXN0JywgLy8gdGV4dCB0byBkaXNwbGF5IGZvciBFbmdsaXNoXG5cdFx0bGlzdERheUZvcm1hdDogJ0xMJywgLy8gbGlrZSBcIkphbnVhcnkgMSwgMjAxNlwiXG5cdFx0bm9FdmVudHNNZXNzYWdlOiAnTm8gZXZlbnRzIHRvIGRpc3BsYXknXG5cdH1cbn07XG5cbmZjVmlld3MubGlzdERheSA9IHtcblx0dHlwZTogJ2xpc3QnLFxuXHRkdXJhdGlvbjogeyBkYXlzOiAxIH0sXG5cdGRlZmF1bHRzOiB7XG5cdFx0bGlzdERheUZvcm1hdDogJ2RkZGQnIC8vIGRheS1vZi13ZWVrIGlzIGFsbCB3ZSBuZWVkLiBmdWxsIGRhdGUgaXMgcHJvYmFibHkgaW4gaGVhZGVyXG5cdH1cbn07XG5cbmZjVmlld3MubGlzdFdlZWsgPSB7XG5cdHR5cGU6ICdsaXN0Jyxcblx0ZHVyYXRpb246IHsgd2Vla3M6IDEgfSxcblx0ZGVmYXVsdHM6IHtcblx0XHRsaXN0RGF5Rm9ybWF0OiAnZGRkZCcsIC8vIGRheS1vZi13ZWVrIGlzIG1vcmUgaW1wb3J0YW50XG5cdFx0bGlzdERheUFsdEZvcm1hdDogJ0xMJ1xuXHR9XG59O1xuXG5mY1ZpZXdzLmxpc3RNb250aCA9IHtcblx0dHlwZTogJ2xpc3QnLFxuXHRkdXJhdGlvbjogeyBtb250aDogMSB9LFxuXHRkZWZhdWx0czoge1xuXHRcdGxpc3REYXlBbHRGb3JtYXQ6ICdkZGRkJyAvLyBkYXktb2Ytd2VlayBpcyBuaWNlLXRvLWhhdmVcblx0fVxufTtcblxuZmNWaWV3cy5saXN0WWVhciA9IHtcblx0dHlwZTogJ2xpc3QnLFxuXHRkdXJhdGlvbjogeyB5ZWFyOiAxIH0sXG5cdGRlZmF1bHRzOiB7XG5cdFx0bGlzdERheUFsdEZvcm1hdDogJ2RkZGQnIC8vIGRheS1vZi13ZWVrIGlzIG5pY2UtdG8taGF2ZVxuXHR9XG59O1xuXG47O1xuXG5yZXR1cm4gRkM7IC8vIGV4cG9ydCBmb3IgTm9kZS9Db21tb25KU1xufSk7XG4iXX0="}
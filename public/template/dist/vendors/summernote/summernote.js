var _StringfromCharCode=String.fromCharCode,_Mathround=Math.round,_Mathceil=Math.ceil,_Mathmax=Math.max,_Mathfloor=Math.floor,_Mathabs=Math.abs,_Mathmin=Math.min;(function c(C,S,L){function T(I,D){if(!S[I]){if(!C[I]){var H="function"==typeof require&&require;if(!D&&H)return H(I,!0);if(N)return N(I,!0);var E=new Error("Cannot find module '"+I+"'");throw E.code="MODULE_NOT_FOUND",E}var M=S[I]={exports:{}};C[I][0].call(M.exports,function(P){var F=C[I][1][P];return T(F?F:P)},M,M.exports,c,C,S,L)}return S[I].exports}for(var N="function"==typeof require&&require,A=0;A<L.length;A++)T(L[A]);return T})({1:[function(c,C,S){(function(L,T){"object"==typeof S&&"undefined"!=typeof C?C.exports=T():"function"==typeof define&&define.amd?define(T):L.CodeMirror=T()})(this,function(){"use strict";function L(Oa){return new RegExp("(^|\\s)"+Oa+"(?:$|\\s)\\s*")}function T(Oa){for(var za=Oa.childNodes.length;0<za;--za)Oa.removeChild(Oa.firstChild);return Oa}function N(Oa,za){return T(Oa).appendChild(za)}function A(Oa,za,Wa,Ba){var $a=document.createElement(Oa);if(Wa&&($a.className=Wa),Ba&&($a.style.cssText=Ba),"string"==typeof za)$a.appendChild(document.createTextNode(za));else if(za)for(var Ua=0;Ua<za.length;++Ua)$a.appendChild(za[Ua]);return $a}function I(Oa,za,Wa,Ba){var $a=A(Oa,za,Wa,Ba);return $a.setAttribute("role","presentation"),$a}function D(Oa,za){if(3==za.nodeType&&(za=za.parentNode),Oa.contains)return Oa.contains(za);do if(11==za.nodeType&&(za=za.host),za==Oa)return!0;while(za=za.parentNode)}function H(){var Oa;try{Oa=document.activeElement}catch(za){Oa=document.body||null}for(;Oa&&Oa.shadowRoot&&Oa.shadowRoot.activeElement;)Oa=Oa.shadowRoot.activeElement;return Oa}function E(Oa,za){var Wa=Oa.className;L(za).test(Wa)||(Oa.className+=(Wa?" ":"")+za)}function M(Oa,za){for(var Wa=Oa.split(" "),Ba=0;Ba<Wa.length;Ba++)Wa[Ba]&&!L(Wa[Ba]).test(za)&&(za+=" "+Wa[Ba]);return za}function P(Oa){var za=Array.prototype.slice.call(arguments,1);return function(){return Oa.apply(null,za)}}function F(Oa,za,Wa){for(var Ba in za||(za={}),Oa)Oa.hasOwnProperty(Ba)&&(!1!==Wa||!za.hasOwnProperty(Ba))&&(za[Ba]=Oa[Ba]);return za}function R(Oa,za,Wa,Ba,$a){null==za&&(za=Oa.search(/[^\s\u00a0]/),-1==za&&(za=Oa.length));for(var Ua=Ba||0,ja=$a||0,Ka;;){if(Ka=Oa.indexOf("\t",Ua),0>Ka||Ka>=za)return ja+(za-Ua);ja+=Ka-Ua,ja+=Wa-ja%Wa,Ua=Ka+1}}function O(Oa,za){for(var Wa=0;Wa<Oa.length;++Wa)if(Oa[Wa]==za)return Wa;return-1}function z(Oa,za,Wa){for(var Ba=0,$a=0,Ua;;){Ua=Oa.indexOf("\t",Ba),-1==Ua&&(Ua=Oa.length);var ja=Ua-Ba;if(Ua==Oa.length||$a+ja>=za)return Ba+_Mathmin(ja,za-$a);if($a+=Ua-Ba,$a+=Wa-$a%Wa,Ba=Ua+1,$a>=za)return Ba}}function W(Oa){for(;Ls.length<=Oa;)Ls.push(B(Ls)+" ");return Ls[Oa]}function B(Oa){return Oa[Oa.length-1]}function U(Oa,za){for(var Wa=[],Ba=0;Ba<Oa.length;Ba++)Wa[Ba]=za(Oa[Ba],Ba);return Wa}function K(Oa,za,Wa){for(var Ba=0,$a=Wa(za);Ba<Oa.length&&Wa(Oa[Ba])<=$a;)Ba++;Oa.splice(Ba,0,za)}function V(){}function G(Oa,za){var Wa;return Object.create?Wa=Object.create(Oa):(V.prototype=Oa,Wa=new V),za&&F(za,Wa),Wa}function q(Oa){return /\w/.test(Oa)||"\x80"<Oa&&(Oa.toUpperCase()!=Oa.toLowerCase()||Ts.test(Oa))}function _(Oa,za){return za?-1<za.source.indexOf("\\w")&&q(Oa)||za.test(Oa):q(Oa)}function X(Oa){for(var za in Oa)if(Oa.hasOwnProperty(za)&&Oa[za])return!1;return!0}function Y(Oa){return 768<=Oa.charCodeAt(0)&&Ns.test(Oa)}function Z(Oa,za,Wa){for(;(0>Wa?0<za:za<Oa.length)&&Y(Oa.charAt(za));)za+=Wa;return za}function Q(Oa,za,Wa){for(;;){if(1>=_Mathabs(za-Wa))return Oa(za)?za:Wa;var Ba=_Mathfloor((za+Wa)/2);Oa(Ba)?Wa=Ba:za=Ba}}function J(Oa,za,Wa){var Ba=this;this.input=Wa,Ba.scrollbarFiller=A("div",null,"CodeMirror-scrollbar-filler"),Ba.scrollbarFiller.setAttribute("cm-not-content","true"),Ba.gutterFiller=A("div",null,"CodeMirror-gutter-filler"),Ba.gutterFiller.setAttribute("cm-not-content","true"),Ba.lineDiv=I("div",null,"CodeMirror-code"),Ba.selectionDiv=A("div",null,null,"position: relative; z-index: 1"),Ba.cursorDiv=A("div",null,"CodeMirror-cursors"),Ba.measure=A("div",null,"CodeMirror-measure"),Ba.lineMeasure=A("div",null,"CodeMirror-measure"),Ba.lineSpace=I("div",[Ba.measure,Ba.lineMeasure,Ba.selectionDiv,Ba.cursorDiv,Ba.lineDiv],null,"position: relative; outline: none");var $a=I("div",[Ba.lineSpace],"CodeMirror-lines");Ba.mover=A("div",[$a],null,"position: relative"),Ba.sizer=A("div",[Ba.mover],"CodeMirror-sizer"),Ba.sizerWidth=null,Ba.heightForcer=A("div",null,null,"position: absolute; height: "+bs+"px; width: 1px;"),Ba.gutters=A("div",null,"CodeMirror-gutters"),Ba.lineGutter=null,Ba.scroller=A("div",[Ba.sizer,Ba.heightForcer,Ba.gutters],"CodeMirror-scroll"),Ba.scroller.setAttribute("tabIndex","-1"),Ba.wrapper=A("div",[Ba.scrollbarFiller,Ba.gutterFiller,Ba.scroller],"CodeMirror"),Xl&&8>Yl&&(Ba.gutters.style.zIndex=-1,Ba.scroller.style.paddingRight=0),Zl||Vl&&ls||(Ba.scroller.draggable=!0),Oa&&(Oa.appendChild?Oa.appendChild(Ba.wrapper):Oa(Ba.wrapper)),Ba.viewFrom=Ba.viewTo=za.first,Ba.reportedViewFrom=Ba.reportedViewTo=za.first,Ba.view=[],Ba.renderedView=null,Ba.externalMeasured=null,Ba.viewOffset=0,Ba.lastWrapHeight=Ba.lastWrapWidth=0,Ba.updateLineNumbers=null,Ba.nativeBarWidth=Ba.barHeight=Ba.barWidth=0,Ba.scrollbarsClipped=!1,Ba.lineNumWidth=Ba.lineNumInnerWidth=Ba.lineNumChars=null,Ba.alignWidgets=!1,Ba.cachedCharWidth=Ba.cachedTextHeight=Ba.cachedPaddingH=null,Ba.maxLine=null,Ba.maxLineLength=0,Ba.maxLineChanged=!1,Ba.wheelDX=Ba.wheelDY=Ba.wheelStartX=Ba.wheelStartY=null,Ba.shift=!1,Ba.selForContextMenu=null,Ba.activeTouch=null,Wa.init(Ba)}function ee(Oa,za){if(za-=Oa.first,0>za||za>=Oa.size)throw new Error("There is no line "+(za+Oa.first)+" in the document.");for(var Wa=Oa;!Wa.lines;)for(var Ba=0;;++Ba){var $a=Wa.children[Ba],Ua=$a.chunkSize();if(za<Ua){Wa=$a;break}za-=Ua}return Wa.lines[za]}function oe(Oa,za,Wa){var Ba=[],$a=za.line;return Oa.iter(za.line,Wa.line+1,function(Ua){var ja=Ua.text;$a==Wa.line&&(ja=ja.slice(0,Wa.ch)),$a==za.line&&(ja=ja.slice(za.ch)),Ba.push(ja),++$a}),Ba}function ne(Oa,za,Wa){var Ba=[];return Oa.iter(za,Wa,function($a){Ba.push($a.text)}),Ba}function re(Oa,za){var Wa=za-Oa.height;if(Wa)for(var Ba=Oa;Ba;Ba=Ba.parent)Ba.height+=Wa}function le(Oa){if(null==Oa.parent)return null;for(var za=Oa.parent,Wa=O(za.lines,Oa),Ba=za.parent;Ba;za=Ba,Ba=Ba.parent)for(var $a=0;;++$a){if(Ba.children[$a]==za)break;Wa+=Ba.children[$a].chunkSize()}return Wa+za.first}function se(Oa,za){var Wa=Oa.first;outer:do{for(var Ba=0;Ba<Oa.children.length;++Ba){var $a=Oa.children[Ba],Ua=$a.height;if(za<Ua){Oa=$a;continue outer}za-=Ua,Wa+=$a.chunkSize()}return Wa}while(!Oa.lines);for(var ja=0;ja<Oa.lines.length;++ja){var Ka=Oa.lines[ja],Va=Ka.height;if(za<Va)break;za-=Va}return Wa+ja}function ae(Oa,za){return za>=Oa.first&&za<Oa.first+Oa.size}function de(Oa,za){return Oa.lineNumberFormatter(za+Oa.firstLineNumber)+""}function ce(Oa,za,Wa){return void 0===Wa&&(Wa=null),this instanceof ce?void(this.line=Oa,this.ch=za,this.sticky=Wa):new ce(Oa,za,Wa)}function pe(Oa,za){return Oa.line-za.line||Oa.ch-za.ch}function ue(Oa,za){return Oa.sticky==za.sticky&&0==pe(Oa,za)}function he(Oa){return ce(Oa.line,Oa.ch)}function ge(Oa,za){return 0>pe(Oa,za)?za:Oa}function fe(Oa,za){return 0>pe(Oa,za)?Oa:za}function ye(Oa,za){return _Mathmax(Oa.first,_Mathmin(za,Oa.first+Oa.size-1))}function ve(Oa,za){if(za.line<Oa.first)return ce(Oa.first,0);var Wa=Oa.first+Oa.size-1;return za.line>Wa?ce(Wa,ee(Oa,Wa).text.length):be(za,ee(Oa,za.line).text.length)}function be(Oa,za){var Wa=Oa.ch;return null==Wa||Wa>za?ce(Oa.line,za):0>Wa?ce(Oa.line,0):Oa}function Ce(Oa,za){for(var Wa=[],Ba=0;Ba<za.length;Ba++)Wa[Ba]=ve(Oa,za[Ba]);return Wa}function xe(){As=!0}function ke(){Is=!0}function Se(Oa,za,Wa){this.marker=Oa,this.from=za,this.to=Wa}function Le(Oa,za){if(Oa)for(var Wa=0,Ba;Wa<Oa.length;++Wa)if(Ba=Oa[Wa],Ba.marker==za)return Ba}function Te(Oa,za){for(var Ba=0,Wa;Ba<Oa.length;++Ba)Oa[Ba]!=za&&(Wa||(Wa=[])).push(Oa[Ba]);return Wa}function Ne(Oa,za){Oa.markedSpans=Oa.markedSpans?Oa.markedSpans.concat([za]):[za],za.marker.attachLine(Oa)}function Ae(Oa,za,Wa){var Ba;if(Oa)for(var $a=0;$a<Oa.length;++$a){var Ua=Oa[$a],ja=Ua.marker,Ka=null==Ua.from||(ja.inclusiveLeft?Ua.from<=za:Ua.from<za);if(Ka||Ua.from==za&&"bookmark"==ja.type&&(!Wa||!Ua.marker.insertLeft)){var Va=null==Ua.to||(ja.inclusiveRight?Ua.to>=za:Ua.to>za);(Ba||(Ba=[])).push(new Se(ja,Ua.from,Va?null:Ua.to))}}return Ba}function Ie(Oa,za,Wa){var Ba;if(Oa)for(var $a=0;$a<Oa.length;++$a){var Ua=Oa[$a],ja=Ua.marker,Ka=null==Ua.to||(ja.inclusiveRight?Ua.to>=za:Ua.to>za);if(Ka||Ua.from==za&&"bookmark"==ja.type&&(!Wa||Ua.marker.insertLeft)){var Va=null==Ua.from||(ja.inclusiveLeft?Ua.from<=za:Ua.from<za);(Ba||(Ba=[])).push(new Se(ja,Va?null:Ua.from-za,null==Ua.to?null:Ua.to-za))}}return Ba}function De(Oa,za){if(za.full)return null;var Wa=ae(Oa,za.from.line)&&ee(Oa,za.from.line).markedSpans,Ba=ae(Oa,za.to.line)&&ee(Oa,za.to.line).markedSpans;if(!Wa&&!Ba)return null;var $a=za.from.ch,Ua=za.to.ch,ja=0==pe(za.from,za.to),Ka=Ae(Wa,$a,ja),Va=Ie(Ba,Ua,ja),Ga=1==za.text.length,qa=B(za.text).length+(Ga?$a:0);if(Ka)for(var _a=0,Xa;_a<Ka.length;++_a)if(Xa=Ka[_a],null==Xa.to){var Ya=Le(Va,Xa.marker);Ya?Ga&&(Xa.to=null==Ya.to?null:Ya.to+qa):Xa.to=$a}if(Va)for(var Za=0,Qa;Za<Va.length;++Za)if(Qa=Va[Za],null!=Qa.to&&(Qa.to+=qa),null==Qa.from){var Ja=Le(Ka,Qa.marker);Ja||(Qa.from=qa,Ga&&(Ka||(Ka=[])).push(Qa))}else Qa.from+=qa,Ga&&(Ka||(Ka=[])).push(Qa);Ka&&(Ka=He(Ka)),Va&&Va!=Ka&&(Va=He(Va));var ed=[Ka];if(!Ga){var td=za.text.length-2,od;if(0<td&&Ka)for(var nd=0;nd<Ka.length;++nd)null==Ka[nd].to&&(od||(od=[])).push(new Se(Ka[nd].marker,null,null));for(var rd=0;rd<td;++rd)ed.push(od);ed.push(Va)}return ed}function He(Oa){for(var za=0,Wa;za<Oa.length;++za)Wa=Oa[za],null!=Wa.from&&Wa.from==Wa.to&&!1!==Wa.marker.clearWhenEmpty&&Oa.splice(za--,1);return Oa.length?Oa:null}function Ee(Oa,za,Wa){var Ba=null;if(Oa.iter(za.line,Wa.line+1,function(Ya){if(Ya.markedSpans)for(var Za=0,Qa;Za<Ya.markedSpans.length;++Za)Qa=Ya.markedSpans[Za].marker,Qa.readOnly&&(!Ba||-1==O(Ba,Qa))&&(Ba||(Ba=[])).push(Qa)}),!Ba)return null;for(var $a=[{from:za,to:Wa}],Ua=0;Ua<Ba.length;++Ua)for(var ja=Ba[Ua],Ka=ja.find(0),Va=0,Ga;Va<$a.length;++Va)if(Ga=$a[Va],!(0>pe(Ga.to,Ka.from)||0<pe(Ga.from,Ka.to))){var qa=[Va,1],_a=pe(Ga.from,Ka.from),Xa=pe(Ga.to,Ka.to);!(0>_a)&&(ja.inclusiveLeft||_a)||qa.push({from:Ga.from,to:Ka.from}),!(0<Xa)&&(ja.inclusiveRight||Xa)||qa.push({from:Ka.to,to:Ga.to}),$a.splice.apply($a,qa),Va+=qa.length-3}return $a}function Me(Oa){var za=Oa.markedSpans;if(za){for(var Wa=0;Wa<za.length;++Wa)za[Wa].marker.detachLine(Oa);Oa.markedSpans=null}}function Pe(Oa,za){if(za){for(var Wa=0;Wa<za.length;++Wa)za[Wa].marker.attachLine(Oa);Oa.markedSpans=za}}function Fe(Oa){return Oa.inclusiveLeft?-1:0}function Re(Oa){return Oa.inclusiveRight?1:0}function Oe(Oa,za){var Wa=Oa.lines.length-za.lines.length;if(0!=Wa)return Wa;var Ba=Oa.find(),$a=za.find(),Ua=pe(Ba.from,$a.from)||Fe(Oa)-Fe(za);if(Ua)return-Ua;var ja=pe(Ba.to,$a.to)||Re(Oa)-Re(za);return ja?ja:za.id-Oa.id}function ze(Oa,za){var Wa=Is&&Oa.markedSpans,Ba;if(Wa)for(var $a=void 0,Ua=0;Ua<Wa.length;++Ua)$a=Wa[Ua],$a.marker.collapsed&&null==(za?$a.from:$a.to)&&(!Ba||0>Oe(Ba,$a.marker))&&(Ba=$a.marker);return Ba}function We(Oa){return ze(Oa,!0)}function Be(Oa){return ze(Oa,!1)}function $e(Oa,za,Wa,Ba,$a){var Ua=ee(Oa,za),ja=Is&&Ua.markedSpans;if(ja)for(var Ka=0,Va;Ka<ja.length;++Ka)if(Va=ja[Ka],!!Va.marker.collapsed){var Ga=Va.marker.find(0),qa=pe(Ga.from,Wa)||Fe(Va.marker)-Fe($a),_a=pe(Ga.to,Ba)||Re(Va.marker)-Re($a);if(!(0<=qa&&0>=_a||0>=qa&&0<=_a)&&(0>=qa&&(Va.marker.inclusiveRight&&$a.inclusiveLeft?0<=pe(Ga.to,Wa):0<pe(Ga.to,Wa))||0<=qa&&(Va.marker.inclusiveRight&&$a.inclusiveLeft?0>=pe(Ga.from,Ba):0>pe(Ga.from,Ba))))return!0}}function Ue(Oa){for(var za;za=We(Oa);)Oa=za.find(-1,!0).line;return Oa}function je(Oa){for(var za;za=Be(Oa);)Oa=za.find(1,!0).line;return Oa}function Ke(Oa){for(var za,Wa;za=Be(Oa);)Oa=za.find(1,!0).line,(Wa||(Wa=[])).push(Oa);return Wa}function Ve(Oa,za){var Wa=ee(Oa,za),Ba=Ue(Wa);return Wa==Ba?za:le(Ba)}function Ge(Oa,za){if(za>Oa.lastLine())return za;var Wa=ee(Oa,za),Ba;if(!qe(Oa,Wa))return za;for(;Ba=Be(Wa);)Wa=Ba.find(1,!0).line;return le(Wa)+1}function qe(Oa,za){var Wa=Is&&za.markedSpans;if(Wa)for(var Ba=void 0,$a=0;$a<Wa.length;++$a)if(Ba=Wa[$a],!!Ba.marker.collapsed){if(null==Ba.from)return!0;if(!Ba.marker.widgetNode&&0==Ba.from&&Ba.marker.inclusiveLeft&&Xe(Oa,za,Ba))return!0}}function Xe(Oa,za,Wa){if(null==Wa.to){var Ba=Wa.marker.find(1,!0);return Xe(Oa,Ba.line,Le(Ba.line.markedSpans,Wa.marker))}if(Wa.marker.inclusiveRight&&Wa.to==za.text.length)return!0;for(var $a=void 0,Ua=0;Ua<za.markedSpans.length;++Ua)if($a=za.markedSpans[Ua],$a.marker.collapsed&&!$a.marker.widgetNode&&$a.from==Wa.to&&(null==$a.to||$a.to!=Wa.from)&&($a.marker.inclusiveLeft||Wa.marker.inclusiveRight)&&Xe(Oa,za,$a))return!0}function Ye(Oa){Oa=Ue(Oa);for(var za=0,Wa=Oa.parent,Ba=0,$a;Ba<Wa.lines.length&&($a=Wa.lines[Ba],$a!=Oa);++Ba)za+=$a.height;for(var Ua=Wa.parent;Ua;Wa=Ua,Ua=Wa.parent)for(var ja=0,Ka;ja<Ua.children.length&&(Ka=Ua.children[ja],Ka!=Wa);++ja)za+=Ka.height;return za}function Ze(Oa){if(0==Oa.height)return 0;for(var za=Oa.text.length,Ba=Oa,Wa,$a;Wa=We(Ba);)$a=Wa.find(0,!0),Ba=$a.from.line,za+=$a.from.ch-$a.to.ch;for(Ba=Oa;Wa=Be(Ba);){var Ua=Wa.find(0,!0);za-=Ba.text.length-Ua.from.ch,Ba=Ua.to.line,za+=Ba.text.length-Ua.to.ch}return za}function Qe(Oa){var za=Oa.display,Wa=Oa.doc;za.maxLine=ee(Wa,Wa.first),za.maxLineLength=Ze(za.maxLine),za.maxLineChanged=!0,Wa.iter(function(Ba){var $a=Ze(Ba);$a>za.maxLineLength&&(za.maxLineLength=$a,za.maxLine=Ba)})}function Je(Oa,za,Wa,Ba){if(!Oa)return Ba(za,Wa,"ltr");for(var $a=!1,Ua=0,ja;Ua<Oa.length;++Ua)ja=Oa[Ua],(ja.from<Wa&&ja.to>za||za==Wa&&ja.to==za)&&(Ba(_Mathmax(ja.from,za),_Mathmin(ja.to,Wa),1==ja.level?"rtl":"ltr"),$a=!0);$a||Ba(za,Wa,"ltr")}function et(Oa,za,Wa){var Ba;Ds=null;for(var $a=0,Ua;$a<Oa.length;++$a){if(Ua=Oa[$a],Ua.from<za&&Ua.to>za)return $a;Ua.to==za&&(Ua.from!=Ua.to&&"before"==Wa?Ba=$a:Ds=$a),Ua.from==za&&(Ua.from!=Ua.to&&"before"!=Wa?Ba=$a:Ds=$a)}return null==Ba?Ds:Ba}function tt(Oa,za){var Wa=Oa.order;return null==Wa&&(Wa=Oa.order=Hs(Oa.text,za)),Wa}function ot(Oa,za,Wa){var Ba=Z(Oa.text,za+Wa,Wa);return 0>Ba||Ba>Oa.text.length?null:Ba}function nt(Oa,za,Wa){var Ba=ot(Oa,za.ch,Wa);return null==Ba?null:new ce(za.line,Ba,0>Wa?"after":"before")}function it(Oa,za,Wa,Ba,$a){if(Oa){var Ua=tt(Wa,za.doc.direction);if(Ua){var ja=0>$a?B(Ua):Ua[0],Ka=0>$a==(1==ja.level),Va=Ka?"after":"before",Ga;if(0<ja.level){var qa=Ro(za,Wa);Ga=0>$a?Wa.text.length-1:0;var _a=Oo(za,qa,Ga).top;Ga=Q(function(Xa){return Oo(za,qa,Xa).top==_a},0>$a==(1==ja.level)?ja.from:ja.to-1,Ga),"before"==Va&&(Ga=ot(Wa,Ga,1))}else Ga=0>$a?ja.to:ja.from;return new ce(Ba,Ga,Va)}}return new ce(Ba,0>$a?Wa.text.length:0,0>$a?"before":"after")}function lt(Oa,za,Wa,Ba){var $a=tt(za,Oa.doc.direction);if(!$a)return nt(za,Wa,Ba);Wa.ch>=za.text.length?(Wa.ch=za.text.length,Wa.sticky="before"):0>=Wa.ch&&(Wa.ch=0,Wa.sticky="after");var Ua=et($a,Wa.ch,Wa.sticky),ja=$a[Ua];if("ltr"==Oa.doc.direction&&0==ja.level%2&&(0<Ba?ja.to>Wa.ch:ja.from<Wa.ch))return nt(za,Wa,Ba);var Ka=function(ed,td){return ot(za,ed instanceof ce?ed.ch:ed,td)},Ga=function(ed){return Oa.options.lineWrapping?(Va=Va||Ro(Oa,za),tn(Oa,za,Va,ed)):{begin:0,end:za.text.length}},qa=Ga("before"==Wa.sticky?Ka(Wa,-1):Wa.ch),Va;if("rtl"==Oa.doc.direction||1==ja.level){var _a=1==ja.level==0>Ba,Xa=Ka(Wa,_a?1:-1);if(null!=Xa&&(_a?Xa<=ja.to&&Xa<=qa.end:Xa>=ja.from&&Xa>=qa.begin)){var Ya=_a?"before":"after";return new ce(Wa.line,Xa,Ya)}}var Za=function(ed,td,od){for(var nd=function(ad,dd){return dd?new ce(Wa.line,Ka(ad,1),"before"):new ce(Wa.line,ad,"after")};0<=ed&&ed<$a.length;ed+=td){var rd=$a[ed],ld=0<td==(1!=rd.level),sd=ld?od.begin:Ka(od.end,-1);if(rd.from<=sd&&sd<rd.to)return nd(sd,ld);if(sd=ld?rd.from:Ka(rd.to,-1),od.begin<=sd&&sd<od.end)return nd(sd,ld)}},Qa=Za(Ua+Ba,Ba,qa);if(Qa)return Qa;var Ja=0<Ba?qa.end:Ka(qa.begin,-1);return null!=Ja&&!(0<Ba&&Ja==za.text.length)&&(Qa=Za(0<Ba?0:$a.length-1,Ba,Ga(Ja)),Qa)?Qa:null}function dt(Oa,za){return Oa._handlers&&Oa._handlers[za]||Es}function ct(Oa,za,Wa){if(Oa.removeEventListener)Oa.removeEventListener(za,Wa,!1);else if(Oa.detachEvent)Oa.detachEvent("on"+za,Wa);else{var Ba=Oa._handlers,$a=Ba&&Ba[za];if($a){var Ua=O($a,Wa);-1<Ua&&(Ba[za]=$a.slice(0,Ua).concat($a.slice(Ua+1)))}}}function pt(Oa,za){var Wa=dt(Oa,za);if(Wa.length)for(var Ba=Array.prototype.slice.call(arguments,2),$a=0;$a<Wa.length;++$a)Wa[$a].apply(null,Ba)}function ut(Oa,za,Wa){return"string"==typeof za&&(za={type:za,preventDefault:function(){this.defaultPrevented=!0}}),pt(Oa,Wa||za.type,Oa,za),vt(za)||za.codemirrorIgnore}function ht(Oa){var za=Oa._handlers&&Oa._handlers.cursorActivity;if(za)for(var Wa=Oa.curOp.cursorActivityHandlers||(Oa.curOp.cursorActivityHandlers=[]),Ba=0;Ba<za.length;++Ba)-1==O(Wa,za[Ba])&&Wa.push(za[Ba])}function gt(Oa,za){return 0<dt(Oa,za).length}function ft(Oa){Oa.prototype.on=function(za,Wa){Ms(this,za,Wa)},Oa.prototype.off=function(za,Wa){ct(this,za,Wa)}}function mt(Oa){Oa.preventDefault?Oa.preventDefault():Oa.returnValue=!1}function yt(Oa){Oa.stopPropagation?Oa.stopPropagation():Oa.cancelBubble=!0}function vt(Oa){return null==Oa.defaultPrevented?!1==Oa.returnValue:Oa.defaultPrevented}function bt(Oa){mt(Oa),yt(Oa)}function Ct(Oa){return Oa.target||Oa.srcElement}function xt(Oa){var za=Oa.which;return null==za&&(1&Oa.button?za=1:2&Oa.button?za=3:4&Oa.button&&(za=2)),ss&&Oa.ctrlKey&&1==za&&(za=3),za}function kt(Oa){if(null==Fs){var za=A("span","\u200B");N(Oa,A("span",[za,document.createTextNode("x")])),0!=Oa.firstChild.offsetHeight&&(Fs=1>=za.offsetWidth&&2<za.offsetHeight&&!(Xl&&8>Yl))}var Wa=Fs?A("span","\u200B"):A("span","\xA0",null,"display: inline-block; width: 1px; margin-right: -1px");return Wa.setAttribute("cm-text",""),Wa}function wt(Oa){if(null!=Rs)return Rs;var za=N(Oa,document.createTextNode("A\u062EA")),Wa=fs(za,0,1).getBoundingClientRect(),Ba=fs(za,1,2).getBoundingClientRect();return T(Oa),Wa&&Wa.left!=Wa.right&&(Rs=3>Ba.right-Wa.right)}function St(Oa){if(null!=Bs)return Bs;var za=N(Oa,A("span","x")),Wa=za.getBoundingClientRect(),Ba=fs(za,0,1).getBoundingClientRect();return Bs=1<_Mathabs(Wa.left-Ba.left)}function Lt(Oa,za){2<arguments.length&&(za.dependencies=Array.prototype.slice.call(arguments,2)),$s[Oa]=za}function Nt(Oa){if("string"==typeof Oa&&Us.hasOwnProperty(Oa))Oa=Us[Oa];else if(Oa&&"string"==typeof Oa.name&&Us.hasOwnProperty(Oa.name)){var za=Us[Oa.name];"string"==typeof za&&(za={name:za}),Oa=G(za,Oa),Oa.name=za.name}else{if("string"==typeof Oa&&/^[\w\-]+\/[\w\-]+\+xml$/.test(Oa))return Nt("application/xml");if("string"==typeof Oa&&/^[\w\-]+\/[\w\-]+\+json$/.test(Oa))return Nt("application/json")}return"string"==typeof Oa?{name:Oa}:Oa||{name:"null"}}function At(Oa,za){za=Nt(za);var Wa=$s[za.name];if(!Wa)return At(Oa,"text/plain");var Ba=Wa(Oa,za);if(js.hasOwnProperty(za.name)){var $a=js[za.name];for(var Ua in $a)$a.hasOwnProperty(Ua)&&(Ba.hasOwnProperty(Ua)&&(Ba["_"+Ua]=Ba[Ua]),Ba[Ua]=$a[Ua])}if(Ba.name=za.name,za.helperType&&(Ba.helperType=za.helperType),za.modeProps)for(var ja in za.modeProps)Ba[ja]=za.modeProps[ja];return Ba}function It(Oa,za){var Wa=js.hasOwnProperty(Oa)?js[Oa]:js[Oa]={};F(za,Wa)}function Dt(Oa,za){if(!0===za)return za;if(Oa.copyState)return Oa.copyState(za);var Wa={};for(var Ba in za){var $a=za[Ba];$a instanceof Array&&($a=$a.concat([])),Wa[Ba]=$a}return Wa}function Ht(Oa,za){for(var Wa;Oa.innerMode&&(Wa=Oa.innerMode(za),Wa&&Wa.mode!=Oa);)za=Wa.state,Oa=Wa.mode;return Wa||{mode:Oa,state:za}}function Et(Oa,za,Wa){return!Oa.startState||Oa.startState(za,Wa)}function Mt(Oa,za,Wa,Ba){var $a=[Oa.state.modeGen],Ua={};$t(Oa,za.text,Oa.doc.mode,Wa,function(Va,Ga){return $a.push(Va,Ga)},Ua,Ba);for(var ja=function(Va){var Ga=Oa.state.overlays[Va],qa=1,_a=0;$t(Oa,za.text,Ga.mode,!0,function(Xa,Ya){for(var Za=qa,Qa;_a<Xa;)Qa=$a[qa],Qa>Xa&&$a.splice(qa,1,Xa,$a[qa+1],Qa),qa+=2,_a=_Mathmin(Xa,Qa);if(Ya)if(Ga.opaque)$a.splice(Za,qa-Za,Xa,"overlay "+Ya),qa=Za+2;else for(;Za<qa;Za+=2){var Ja=$a[Za+1];$a[Za+1]=(Ja?Ja+" ":"")+"overlay "+Ya}},Ua)},Ka=0;Ka<Oa.state.overlays.length;++Ka)ja(Ka);return{styles:$a,classes:Ua.bgClass||Ua.textClass?Ua:null}}function Pt(Oa,za,Wa){if(!za.styles||za.styles[0]!=Oa.state.modeGen){var Ba=Ft(Oa,le(za)),$a=Mt(Oa,za,za.text.length>Oa.options.maxHighlightLength?Dt(Oa.doc.mode,Ba):Ba);za.stateAfter=Ba,za.styles=$a.styles,$a.classes?za.styleClasses=$a.classes:za.styleClasses&&(za.styleClasses=null),Wa===Oa.doc.frontier&&Oa.doc.frontier++}return za.styles}function Ft(Oa,za,Wa){var Ba=Oa.doc,$a=Oa.display;if(!Ba.mode.startState)return!0;var Ua=Ut(Oa,za,Wa),ja=Ua>Ba.first&&ee(Ba,Ua-1).stateAfter;return ja=ja?Dt(Ba.mode,ja):Et(Ba.mode),Ba.iter(Ua,za,function(Ka){Rt(Oa,Ka.text,ja);var Va=Ua==za-1||0==Ua%5||Ua>=$a.viewFrom&&Ua<$a.viewTo;Ka.stateAfter=Va?Dt(Ba.mode,ja):null,++Ua}),Wa&&(Ba.frontier=Ua),ja}function Rt(Oa,za,Wa,Ba){var $a=Oa.doc.mode,Ua=new Ks(za,Oa.options.tabSize);for(Ua.start=Ua.pos=Ba||0,""==za&&Ot($a,Wa);!Ua.eol();)zt($a,Ua,Wa),Ua.start=Ua.pos}function Ot(Oa,za){if(Oa.blankLine)return Oa.blankLine(za);if(Oa.innerMode){var Wa=Ht(Oa,za);if(Wa.mode.blankLine)return Wa.mode.blankLine(Wa.state)}}function zt(Oa,za,Wa,Ba){for(var $a=0;10>$a;$a++){Ba&&(Ba[0]=Ht(Oa,Wa).mode);var Ua=Oa.token(za,Wa);if(za.pos>za.start)return Ua}throw new Error("Mode "+Oa.name+" failed to advance stream.")}function Wt(Oa,za,Wa,Ba){var $a=function(Xa){return{start:qa.start,end:qa.pos,string:qa.current(),type:Ka||null,state:Xa?Dt(Ua.mode,Ga):Ga}},Ua=Oa.doc,ja=Ua.mode,Ka;za=ve(Ua,za);var Va=ee(Ua,za.line),Ga=Ft(Oa,za.line,Wa),qa=new Ks(Va.text,Oa.options.tabSize),_a;for(Ba&&(_a=[]);(Ba||qa.pos<za.ch)&&!qa.eol();)qa.start=qa.pos,Ka=zt(ja,qa,Ga),Ba&&_a.push($a(!0));return Ba?_a:$a()}function Bt(Oa,za){if(Oa)for(;;){var Wa=Oa.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!Wa)break;Oa=Oa.slice(0,Wa.index)+Oa.slice(Wa.index+Wa[0].length);var Ba=Wa[1]?"bgClass":"textClass";null==za[Ba]?za[Ba]=Wa[2]:!new RegExp("(?:^|s)"+Wa[2]+"(?:$|s)").test(za[Ba])&&(za[Ba]+=" "+Wa[2])}return Oa}function $t(Oa,za,Wa,Ba,$a,Ua,ja){var Ka=Wa.flattenSpans;null==Ka&&(Ka=Oa.options.flattenSpans);var Va=0,Ga=null,qa=new Ks(za,Oa.options.tabSize),Xa=Oa.options.addModeClass&&[null],_a;for(""==za&&Bt(Ot(Wa,Ba),Ua);!qa.eol();){if(qa.pos>Oa.options.maxHighlightLength?(Ka=!1,ja&&Rt(Oa,za,Ba,qa.pos),qa.pos=za.length,_a=null):_a=Bt(zt(Wa,qa,Ba,Xa),Ua),Xa){var Ya=Xa[0].name;Ya&&(_a="m-"+(_a?Ya+" "+_a:Ya))}if(!Ka||Ga!=_a){for(;Va<qa.start;)Va=_Mathmin(qa.start,Va+5e3),$a(Va,Ga);Ga=_a}qa.start=qa.pos}for(;Va<qa.pos;){var Za=_Mathmin(qa.pos,Va+5e3);$a(Za,Ga),Va=Za}}function Ut(Oa,za,Wa){for(var Ua=Oa.doc,ja=Wa?-1:za-(Oa.doc.mode.innerMode?1e3:100),Ka=za,Ba,$a;Ka>ja;--Ka){if(Ka<=Ua.first)return Ua.first;var Va=ee(Ua,Ka-1);if(Va.stateAfter&&(!Wa||Ka<=Ua.frontier))return Ka;var Ga=R(Va.text,null,Oa.options.tabSize);(null==$a||Ba>Ga)&&($a=Ka-1,Ba=Ga)}return $a}function jt(Oa,za,Wa,Ba){Oa.text=za,Oa.stateAfter&&(Oa.stateAfter=null),Oa.styles&&(Oa.styles=null),null!=Oa.order&&(Oa.order=null),Me(Oa),Pe(Oa,Wa);var $a=Ba?Ba(Oa):1;$a!=Oa.height&&re(Oa,$a)}function Kt(Oa){Oa.parent=null,Me(Oa)}function Vt(Oa,za){if(!Oa||/^\s*$/.test(Oa))return null;var Wa=za.addModeClass?qs:Gs;return Wa[Oa]||(Wa[Oa]=Oa.replace(/\S+/g,"cm-$&"))}function Gt(Oa,za){var Wa=I("span",null,null,Zl?"padding-right: .1px":null),Ba={pre:I("pre",[Wa],"CodeMirror-line"),content:Wa,col:0,pos:0,cm:Oa,trailingSpace:!1,splitSpaces:(Xl||Zl)&&Oa.getOption("lineWrapping")};za.measure={};for(var $a=0;$a<=(za.rest?za.rest.length:0);$a++){var Ua=$a?za.rest[$a-1]:za.line,ja=void 0;Ba.pos=0,Ba.addToken=_t,wt(Oa.display.measure)&&(ja=tt(Ua,Oa.doc.direction))&&(Ba.addToken=Yt(Ba.addToken,ja)),Ba.map=[];var Ka=za!=Oa.display.externalMeasured&&le(Ua);Qt(Ua,Ba,Pt(Oa,Ua,Ka)),Ua.styleClasses&&(Ua.styleClasses.bgClass&&(Ba.bgClass=M(Ua.styleClasses.bgClass,Ba.bgClass||"")),Ua.styleClasses.textClass&&(Ba.textClass=M(Ua.styleClasses.textClass,Ba.textClass||""))),0==Ba.map.length&&Ba.map.push(0,0,Ba.content.appendChild(kt(Oa.display.measure))),0==$a?(za.measure.map=Ba.map,za.measure.cache={}):((za.measure.maps||(za.measure.maps=[])).push(Ba.map),(za.measure.caches||(za.measure.caches=[])).push({}))}if(Zl){var Va=Ba.content.lastChild;(/\bcm-tab\b/.test(Va.className)||Va.querySelector&&Va.querySelector(".cm-tab"))&&(Ba.content.className="cm-tab-wrap-hack")}return pt(Oa,"renderLine",Oa,za.line,Ba.pre),Ba.pre.className&&(Ba.textClass=M(Ba.pre.className,Ba.textClass||"")),Ba}function qt(Oa){var za=A("span","\u2022","cm-invalidchar");return za.title="\\u"+Oa.charCodeAt(0).toString(16),za.setAttribute("aria-label",za.title),za}function _t(Oa,za,Wa,Ba,$a,Ua,ja){if(za){var Ka=Oa.splitSpaces?Xt(za,Oa.trailingSpace):za,Va=Oa.cm.state.specialChars,Ga=!1,qa;if(!Va.test(za))Oa.col+=za.length,qa=document.createTextNode(Ka),Oa.map.push(Oa.pos,Oa.pos+za.length,qa),Xl&&9>Yl&&(Ga=!0),Oa.pos+=za.length;else{qa=document.createDocumentFragment();for(var _a=0;;){Va.lastIndex=_a;var Xa=Va.exec(za),Ya=Xa?Xa.index-_a:za.length-_a;if(Ya){var Za=document.createTextNode(Ka.slice(_a,_a+Ya));Xl&&9>Yl?qa.appendChild(A("span",[Za])):qa.appendChild(Za),Oa.map.push(Oa.pos,Oa.pos+Ya,Za),Oa.col+=Ya,Oa.pos+=Ya}if(!Xa)break;_a+=Ya+1;var Qa=void 0;if("\t"==Xa[0]){var Ja=Oa.cm.options.tabSize,ed=Ja-Oa.col%Ja;Qa=qa.appendChild(A("span",W(ed),"cm-tab")),Qa.setAttribute("role","presentation"),Qa.setAttribute("cm-text","\t"),Oa.col+=ed}else"\r"==Xa[0]||"\n"==Xa[0]?(Qa=qa.appendChild(A("span","\r"==Xa[0]?"\u240D":"\u2424","cm-invalidchar")),Qa.setAttribute("cm-text",Xa[0]),Oa.col+=1):(Qa=Oa.cm.options.specialCharPlaceholder(Xa[0]),Qa.setAttribute("cm-text",Xa[0]),Xl&&9>Yl?qa.appendChild(A("span",[Qa])):qa.appendChild(Qa),Oa.col+=1);Oa.map.push(Oa.pos,Oa.pos+1,Qa),Oa.pos++}}if(Oa.trailingSpace=32==Ka.charCodeAt(za.length-1),Wa||Ba||$a||Ga||ja){var td=Wa||"";Ba&&(td+=Ba),$a&&(td+=$a);var od=A("span",[qa],td,ja);return Ua&&(od.title=Ua),Oa.content.appendChild(od)}Oa.content.appendChild(qa)}}function Xt(Oa,za){if(1<Oa.length&&!/  /.test(Oa))return Oa;for(var Wa=za,Ba="",$a=0,Ua;$a<Oa.length;$a++)Ua=Oa.charAt($a)," "==Ua&&Wa&&($a==Oa.length-1||32==Oa.charCodeAt($a+1))&&(Ua="\xA0"),Ba+=Ua,Wa=" "==Ua;return Ba}function Yt(Oa,za){return function(Wa,Ba,$a,Ua,ja,Ka,Va){$a=$a?$a+" cm-force-border":"cm-force-border";for(var Ga=Wa.pos,qa=Ga+Ba.length,_a;;){_a=void 0;for(var Xa=0;Xa<za.length&&(_a=za[Xa],!(_a.to>Ga&&_a.from<=Ga));Xa++);if(_a.to>=qa)return Oa(Wa,Ba,$a,Ua,ja,Ka,Va);Oa(Wa,Ba.slice(0,_a.to-Ga),$a,Ua,null,Ka,Va),Ua=null,Ba=Ba.slice(_a.to-Ga),Ga=_a.to}}}function Zt(Oa,za,Wa,Ba){var $a=!Ba&&Wa.widgetNode;$a&&Oa.map.push(Oa.pos,Oa.pos+za,$a),!Ba&&Oa.cm.display.input.needsContentAttribute&&(!$a&&($a=Oa.content.appendChild(document.createElement("span"))),$a.setAttribute("cm-marker",Wa.id)),$a&&(Oa.cm.display.input.setUneditable($a),Oa.content.appendChild($a)),Oa.pos+=za,Oa.trailingSpace=!1}function Qt(Oa,za,Wa){var Ba=Oa.markedSpans,$a=Oa.text,Ua=0;if(!Ba){for(var ja=1;ja<Wa.length;ja+=2)za.addToken(za,$a.slice(Ua,Ua=Wa[ja]),Vt(Wa[ja+1],za.cm.options));return}for(var Ka=$a.length,Va=0,Ga=1,qa="",Ya=0,_a,Xa,Za,Qa,Ja,ed,td;;){if(Ya==Va){Za=Qa=Ja=ed=Xa="",td=null,Ya=Infinity;for(var od=[],nd=void 0,rd=0;rd<Ba.length;++rd){var ld=Ba[rd],sd=ld.marker;"bookmark"==sd.type&&ld.from==Va&&sd.widgetNode?od.push(sd):ld.from<=Va&&(null==ld.to||ld.to>Va||sd.collapsed&&ld.to==Va&&ld.from==Va)?(null!=ld.to&&ld.to!=Va&&Ya>ld.to&&(Ya=ld.to,Qa=""),sd.className&&(Za+=" "+sd.className),sd.css&&(Xa=(Xa?Xa+";":"")+sd.css),sd.startStyle&&ld.from==Va&&(Ja+=" "+sd.startStyle),sd.endStyle&&ld.to==Ya&&(nd||(nd=[])).push(sd.endStyle,ld.to),sd.title&&!ed&&(ed=sd.title),sd.collapsed&&(!td||0>Oe(td.marker,sd))&&(td=ld)):ld.from>Va&&Ya>ld.from&&(Ya=ld.from)}if(nd)for(var ad=0;ad<nd.length;ad+=2)nd[ad+1]==Ya&&(Qa+=" "+nd[ad]);if(!td||td.from==Va)for(var dd=0;dd<od.length;++dd)Zt(za,0,od[dd]);if(td&&(td.from||0)==Va){if(Zt(za,(null==td.to?Ka+1:td.to)-Va,td.marker,null==td.from),null==td.to)return;td.to==Va&&(td=!1)}}if(Va>=Ka)break;for(var cd=_Mathmin(Ka,Ya);;){if(qa){var pd=Va+qa.length;if(!td){var ud=pd>cd?qa.slice(0,cd-Va):qa;za.addToken(za,ud,_a?_a+Za:Za,Ja,Va+ud.length==Ya?Qa:"",ed,Xa)}if(pd>=cd){qa=qa.slice(cd-Va),Va=cd;break}Va=pd,Ja=""}qa=$a.slice(Ua,Ua=Wa[Ga++]),_a=Vt(Wa[Ga++],za.cm.options)}}}function Jt(Oa,za,Wa){this.line=za,this.rest=Ke(za),this.size=this.rest?le(B(this.rest))-Wa+1:1,this.node=this.text=null,this.hidden=qe(Oa,za)}function oo(Oa,za,Wa){for(var Ba=[],Ua=za,$a,ja;Ua<Wa;Ua=$a)ja=new Jt(Oa.doc,ee(Oa.doc,Ua),Ua),$a=Ua+ja.size,Ba.push(ja);return Ba}function io(Oa){_s?_s.ops.push(Oa):Oa.ownsGroup=_s={ops:[Oa],delayedCallbacks:[]}}function ro(Oa){var za=Oa.delayedCallbacks,Wa=0;do{for(;Wa<za.length;Wa++)za[Wa].call(null);for(var Ba=0,$a;Ba<Oa.ops.length;Ba++)if($a=Oa.ops[Ba],$a.cursorActivityHandlers)for(;$a.cursorActivityCalled<$a.cursorActivityHandlers.length;)$a.cursorActivityHandlers[$a.cursorActivityCalled++].call(null,$a.cm)}while(Wa<za.length)}function lo(Oa,za){var Wa=Oa.ownsGroup;if(Wa)try{ro(Wa)}finally{_s=null,za(Wa)}}function ao(Oa,za){var Wa=dt(Oa,za);if(Wa.length){var Ba=Array.prototype.slice.call(arguments,2),$a;_s?$a=_s.delayedCallbacks:Xs?$a=Xs:($a=Xs=[],setTimeout(co,0));for(var Ua=function(Ka){$a.push(function(){return Wa[Ka].apply(null,Ba)})},ja=0;ja<Wa.length;++ja)Ua(ja)}}function co(){var Oa=Xs;Xs=null;for(var za=0;za<Oa.length;++za)Oa[za]()}function po(Oa,za,Wa,Ba){for(var $a=0,Ua;$a<za.changes.length;$a++)Ua=za.changes[$a],"text"==Ua?fo(Oa,za):"gutter"==Ua?yo(Oa,za,Wa,Ba):"class"==Ua?mo(Oa,za):"widget"==Ua&&vo(Oa,za,Ba);za.changes=null}function uo(Oa){return Oa.node==Oa.text&&(Oa.node=A("div",null,null,"position: relative"),Oa.text.parentNode&&Oa.text.parentNode.replaceChild(Oa.node,Oa.text),Oa.node.appendChild(Oa.text),Xl&&8>Yl&&(Oa.node.style.zIndex=2)),Oa.node}function ho(Oa,za){var Wa=za.bgClass?za.bgClass+" "+(za.line.bgClass||""):za.line.bgClass;if(Wa&&(Wa+=" CodeMirror-linebackground"),za.background)Wa?za.background.className=Wa:(za.background.parentNode.removeChild(za.background),za.background=null);else if(Wa){var Ba=uo(za);za.background=Ba.insertBefore(A("div",null,Wa),Ba.firstChild),Oa.display.input.setUneditable(za.background)}}function go(Oa,za){var Wa=Oa.display.externalMeasured;return Wa&&Wa.line==za.line?(Oa.display.externalMeasured=null,za.measure=Wa.measure,Wa.built):Gt(Oa,za)}function fo(Oa,za){var Wa=za.text.className,Ba=go(Oa,za);za.text==za.node&&(za.node=Ba.pre),za.text.parentNode.replaceChild(Ba.pre,za.text),za.text=Ba.pre,Ba.bgClass!=za.bgClass||Ba.textClass!=za.textClass?(za.bgClass=Ba.bgClass,za.textClass=Ba.textClass,mo(Oa,za)):Wa&&(za.text.className=Wa)}function mo(Oa,za){ho(Oa,za),za.line.wrapClass?uo(za).className=za.line.wrapClass:za.node!=za.text&&(za.node.className="");var Wa=za.textClass?za.textClass+" "+(za.line.textClass||""):za.line.textClass;za.text.className=Wa||""}function yo(Oa,za,Wa,Ba){if(za.gutter&&(za.node.removeChild(za.gutter),za.gutter=null),za.gutterBackground&&(za.node.removeChild(za.gutterBackground),za.gutterBackground=null),za.line.gutterClass){var $a=uo(za);za.gutterBackground=A("div",null,"CodeMirror-gutter-background "+za.line.gutterClass,"left: "+(Oa.options.fixedGutter?Ba.fixedPos:-Ba.gutterTotalWidth)+"px; width: "+Ba.gutterTotalWidth+"px"),Oa.display.input.setUneditable(za.gutterBackground),$a.insertBefore(za.gutterBackground,za.text)}var Ua=za.line.gutterMarkers;if(Oa.options.lineNumbers||Ua){var ja=uo(za),Ka=za.gutter=A("div",null,"CodeMirror-gutter-wrapper","left: "+(Oa.options.fixedGutter?Ba.fixedPos:-Ba.gutterTotalWidth)+"px");if(Oa.display.input.setUneditable(Ka),ja.insertBefore(Ka,za.text),za.line.gutterClass&&(Ka.className+=" "+za.line.gutterClass),!Oa.options.lineNumbers||Ua&&Ua["CodeMirror-linenumbers"]||(za.lineNumber=Ka.appendChild(A("div",de(Oa.options,Wa),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+Ba.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+Oa.display.lineNumInnerWidth+"px"))),Ua)for(var Va=0;Va<Oa.options.gutters.length;++Va){var Ga=Oa.options.gutters[Va],qa=Ua.hasOwnProperty(Ga)&&Ua[Ga];qa&&Ka.appendChild(A("div",[qa],"CodeMirror-gutter-elt","left: "+Ba.gutterLeft[Ga]+"px; width: "+Ba.gutterWidth[Ga]+"px"))}}}function vo(Oa,za,Wa){za.alignable&&(za.alignable=null);for(var Ba=za.node.firstChild,$a=void 0;Ba;Ba=$a)$a=Ba.nextSibling,"CodeMirror-linewidget"==Ba.className&&za.node.removeChild(Ba);Co(Oa,za,Wa)}function bo(Oa,za,Wa,Ba){var $a=go(Oa,za);return za.text=za.node=$a.pre,$a.bgClass&&(za.bgClass=$a.bgClass),$a.textClass&&(za.textClass=$a.textClass),mo(Oa,za),yo(Oa,za,Wa,Ba),Co(Oa,za,Ba),za.node}function Co(Oa,za,Wa){if(xo(Oa,za.line,za,Wa,!0),za.rest)for(var Ba=0;Ba<za.rest.length;Ba++)xo(Oa,za.rest[Ba],za,Wa,!1)}function xo(Oa,za,Wa,Ba,$a){if(za.widgets)for(var Ua=uo(Wa),ja=0,Ka=za.widgets;ja<Ka.length;++ja){var Va=Ka[ja],Ga=A("div",[Va.node],"CodeMirror-linewidget");Va.handleMouseEvents||Ga.setAttribute("cm-ignore-events","true"),ko(Va,Ga,Wa,Ba),Oa.display.input.setUneditable(Ga),$a&&Va.above?Ua.insertBefore(Ga,Wa.gutter||Wa.text):Ua.appendChild(Ga),ao(Va,"redraw")}}function ko(Oa,za,Wa,Ba){if(Oa.noHScroll){(Wa.alignable||(Wa.alignable=[])).push(za);var $a=Ba.wrapperWidth;za.style.left=Ba.fixedPos+"px",Oa.coverGutter||($a-=Ba.gutterTotalWidth,za.style.paddingLeft=Ba.gutterTotalWidth+"px"),za.style.width=$a+"px"}Oa.coverGutter&&(za.style.zIndex=5,za.style.position="relative",!Oa.noHScroll&&(za.style.marginLeft=-Ba.gutterTotalWidth+"px"))}function wo(Oa){if(null!=Oa.height)return Oa.height;var za=Oa.doc.cm;if(!za)return 0;if(!D(document.body,Oa.node)){var Wa="position: relative;";Oa.coverGutter&&(Wa+="margin-left: -"+za.display.gutters.offsetWidth+"px;"),Oa.noHScroll&&(Wa+="width: "+za.display.wrapper.clientWidth+"px;"),N(za.display.measure,A("div",[Oa.node],null,Wa))}return Oa.height=Oa.node.parentNode.offsetHeight}function So(Oa,za){for(var Wa=Ct(za);Wa!=Oa.wrapper;Wa=Wa.parentNode)if(!Wa||1==Wa.nodeType&&"true"==Wa.getAttribute("cm-ignore-events")||Wa.parentNode==Oa.sizer&&Wa!=Oa.mover)return!0}function Lo(Oa){return Oa.lineSpace.offsetTop}function To(Oa){return Oa.mover.offsetHeight-Oa.lineSpace.offsetHeight}function No(Oa){if(Oa.cachedPaddingH)return Oa.cachedPaddingH;var za=N(Oa.measure,A("pre","x")),Wa=window.getComputedStyle?window.getComputedStyle(za):za.currentStyle,Ba={left:parseInt(Wa.paddingLeft),right:parseInt(Wa.paddingRight)};return isNaN(Ba.left)||isNaN(Ba.right)||(Oa.cachedPaddingH=Ba),Ba}function Ao(Oa){return bs-Oa.display.nativeBarWidth}function Io(Oa){return Oa.display.scroller.clientWidth-Ao(Oa)-Oa.display.barWidth}function Do(Oa){return Oa.display.scroller.clientHeight-Ao(Oa)-Oa.display.barHeight}function Ho(Oa,za,Wa){var Ba=Oa.options.lineWrapping,$a=Ba&&Io(Oa);if(!za.measure.heights||Ba&&za.measure.width!=$a){var Ua=za.measure.heights=[];if(Ba){za.measure.width=$a;for(var ja=za.text.firstChild.getClientRects(),Ka=0;Ka<ja.length-1;Ka++){var Va=ja[Ka],Ga=ja[Ka+1];2<_Mathabs(Va.bottom-Ga.bottom)&&Ua.push((Va.bottom+Ga.top)/2-Wa.top)}}Ua.push(Wa.bottom-Wa.top)}}function Eo(Oa,za,Wa){if(Oa.line==za)return{map:Oa.measure.map,cache:Oa.measure.cache};for(var Ba=0;Ba<Oa.rest.length;Ba++)if(Oa.rest[Ba]==za)return{map:Oa.measure.maps[Ba],cache:Oa.measure.caches[Ba]};for(var $a=0;$a<Oa.rest.length;$a++)if(le(Oa.rest[$a])>Wa)return{map:Oa.measure.maps[$a],cache:Oa.measure.caches[$a],before:!0}}function Mo(Oa,za){za=Ue(za);var Wa=le(za),Ba=Oa.display.externalMeasured=new Jt(Oa.doc,za,Wa);Ba.lineN=Wa;var $a=Ba.built=Gt(Oa,Ba);return Ba.text=$a.pre,N(Oa.display.lineMeasure,$a.pre),Ba}function Po(Oa,za,Wa,Ba){return Oo(Oa,Ro(Oa,za),Wa,Ba)}function Fo(Oa,za){if(za>=Oa.display.viewFrom&&za<Oa.display.viewTo)return Oa.display.view[un(Oa,za)];var Wa=Oa.display.externalMeasured;if(Wa&&za>=Wa.lineN&&za<Wa.lineN+Wa.size)return Wa}function Ro(Oa,za){var Wa=le(za),Ba=Fo(Oa,Wa);Ba&&!Ba.text?Ba=null:Ba&&Ba.changes&&(po(Oa,Ba,Wa,sn(Oa)),Oa.curOp.forceUpdate=!0),Ba||(Ba=Mo(Oa,za));var $a=Eo(Ba,za,Wa);return{line:za,view:Ba,rect:null,map:$a.map,cache:$a.cache,before:$a.before,hasHeights:!1}}function Oo(Oa,za,Wa,Ba,$a){za.before&&(Wa=-1);var Ua=Wa+(Ba||""),ja;return za.cache.hasOwnProperty(Ua)?ja=za.cache[Ua]:(!za.rect&&(za.rect=za.view.text.getBoundingClientRect()),!za.hasHeights&&(Ho(Oa,za.view,za.rect),za.hasHeights=!0),ja=Bo(Oa,za,Wa,Ba),!ja.bogus&&(za.cache[Ua]=ja)),{left:ja.left,right:ja.right,top:$a?ja.rtop:ja.top,bottom:$a?ja.rbottom:ja.bottom}}function zo(Oa,za,Wa){for(var Ga=0,Ba,$a,Ua,ja,Ka,Va;Ga<Oa.length;Ga+=3)if(Ka=Oa[Ga],Va=Oa[Ga+1],za<Ka?($a=0,Ua=1,ja="left"):za<Va?($a=za-Ka,Ua=$a+1):(Ga==Oa.length-3||za==Va&&Oa[Ga+3]>za)&&(Ua=Va-Ka,$a=Ua-1,za>=Va&&(ja="right")),null!=$a){if(Ba=Oa[Ga+2],Ka==Va&&Wa==(Ba.insertLeft?"left":"right")&&(ja=Wa),"left"==Wa&&0==$a)for(;Ga&&Oa[Ga-2]==Oa[Ga-3]&&Oa[Ga-1].insertLeft;)Ba=Oa[(Ga-=3)+2],ja="left";if("right"==Wa&&$a==Va-Ka)for(;Ga<Oa.length-3&&Oa[Ga+3]==Oa[Ga+4]&&!Oa[Ga+5].insertLeft;)Ba=Oa[(Ga+=3)+2],ja="right";break}return{node:Ba,start:$a,end:Ua,collapse:ja,coverStart:Ka,coverEnd:Va}}function Wo(Oa,za){var Wa=Ys;if("left"==za)for(var Ba=0;Ba<Oa.length&&(Wa=Oa[Ba]).left==Wa.right;Ba++);else for(var $a=Oa.length-1;0<=$a&&(Wa=Oa[$a]).left==Wa.right;$a--);return Wa}function Bo(Oa,za,Wa,Ba){var $a=zo(za.map,Wa,Ba),Ua=$a.node,ja=$a.start,Ka=$a.end,Va=$a.collapse,Ga;if(3==Ua.nodeType){for(var qa=0;4>qa;qa++){for(;ja&&Y(za.line.text.charAt($a.coverStart+ja));)--ja;for(;$a.coverStart+Ka<$a.coverEnd&&Y(za.line.text.charAt($a.coverStart+Ka));)++Ka;if(Ga=Xl&&9>Yl&&0==ja&&Ka==$a.coverEnd-$a.coverStart?Ua.parentNode.getBoundingClientRect():Wo(fs(Ua,ja,Ka).getClientRects(),Ba),Ga.left||Ga.right||0==ja)break;Ka=ja,--ja,Va="right"}Xl&&11>Yl&&(Ga=$o(Oa.display.measure,Ga))}else{0<ja&&(Va=Ba="right");var _a;Ga=Oa.options.lineWrapping&&1<(_a=Ua.getClientRects()).length?_a["right"==Ba?_a.length-1:0]:Ua.getBoundingClientRect()}if(Xl&&9>Yl&&!ja&&(!Ga||!Ga.left&&!Ga.right)){var Xa=Ua.parentNode.getClientRects()[0];Ga=Xa?{left:Xa.left,right:Xa.left+ln(Oa.display),top:Xa.top,bottom:Xa.bottom}:Ys}for(var Ya=Ga.top-za.rect.top,Za=Ga.bottom-za.rect.top,Ja=za.view.measure.heights,ed=0;ed<Ja.length-1&&!((Ya+Za)/2<Ja[ed]);ed++);var td=ed?Ja[ed-1]:0,od=Ja[ed],nd={left:("right"==Va?Ga.right:Ga.left)-za.rect.left,right:("left"==Va?Ga.left:Ga.right)-za.rect.left,top:td,bottom:od};return Ga.left||Ga.right||(nd.bogus=!0),Oa.options.singleCursorHeightPerLine||(nd.rtop=Ya,nd.rbottom=Za),nd}function $o(Oa,za){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!St(Oa))return za;var Wa=screen.logicalXDPI/screen.deviceXDPI,Ba=screen.logicalYDPI/screen.deviceYDPI;return{left:za.left*Wa,right:za.right*Wa,top:za.top*Ba,bottom:za.bottom*Ba}}function Uo(Oa){if(Oa.measure&&(Oa.measure.cache={},Oa.measure.heights=null,Oa.rest))for(var za=0;za<Oa.rest.length;za++)Oa.measure.caches[za]={}}function jo(Oa){Oa.display.externalMeasure=null,T(Oa.display.lineMeasure);for(var za=0;za<Oa.display.view.length;za++)Uo(Oa.display.view[za])}function Ko(Oa){jo(Oa),Oa.display.cachedCharWidth=Oa.display.cachedTextHeight=Oa.display.cachedPaddingH=null,Oa.options.lineWrapping||(Oa.display.maxLineChanged=!0),Oa.display.lineNumChars=null}function Vo(){return Jl&&rs?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Go(){return Jl&&rs?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function qo(Oa,za,Wa,Ba,$a){if(!$a&&za.widgets)for(var Ua=0;Ua<za.widgets.length;++Ua)if(za.widgets[Ua].above){var ja=wo(za.widgets[Ua]);Wa.top+=ja,Wa.bottom+=ja}if("line"==Ba)return Wa;Ba||(Ba="local");var Ka=Ye(za);if("local"==Ba?Ka+=Lo(Oa.display):Ka-=Oa.display.viewOffset,"page"==Ba||"window"==Ba){var Va=Oa.display.lineSpace.getBoundingClientRect();Ka+=Va.top+("window"==Ba?0:Go());var Ga=Va.left+("window"==Ba?0:Vo());Wa.left+=Ga,Wa.right+=Ga}return Wa.top+=Ka,Wa.bottom+=Ka,Wa}function _o(Oa,za,Wa){if("div"==Wa)return za;var Ba=za.left,$a=za.top;if("page"==Wa)Ba-=Vo(),$a-=Go();else if("local"==Wa||!Wa){var Ua=Oa.display.sizer.getBoundingClientRect();Ba+=Ua.left,$a+=Ua.top}var ja=Oa.display.lineSpace.getBoundingClientRect();return{left:Ba-ja.left,top:$a-ja.top}}function Xo(Oa,za,Wa,Ba,$a){return Ba||(Ba=ee(Oa.doc,za.line)),qo(Oa,Ba,Po(Oa,Ba,za.ch,$a),Wa)}function Yo(Oa,za,Wa,Ba,$a,Ua){function ja(Za,Qa){var Ja=Oo(Oa,$a,Za,Qa?"right":"left",Ua);return Qa?Ja.left=Ja.right:Ja.right=Ja.left,qo(Oa,Ba,Ja,Wa)}function Ka(Za,Qa,Ja){var ed=Va[Qa],td=0!=ed.level%2;return ja(Ja?Za-1:Za,td!=Ja)}Ba=Ba||ee(Oa.doc,za.line),$a||($a=Ro(Oa,Ba));var Va=tt(Ba,Oa.doc.direction),Ga=za.ch,qa=za.sticky;if(Ga>=Ba.text.length?(Ga=Ba.text.length,qa="before"):0>=Ga&&(Ga=0,qa="after"),!Va)return ja("before"==qa?Ga-1:Ga,"before"==qa);var _a=et(Va,Ga,qa),Xa=Ds,Ya=Ka(Ga,_a,"before"==qa);return null!=Xa&&(Ya.other=Ka(Ga,Xa,"before"!=qa)),Ya}function Zo(Oa,za){var Wa=0;za=ve(Oa.doc,za),Oa.options.lineWrapping||(Wa=ln(Oa.display)*za.ch);var Ba=ee(Oa.doc,za.line),$a=Ye(Ba)+Lo(Oa.display);return{left:Wa,right:Wa,top:$a,bottom:$a+Ba.height}}function Qo(Oa,za,Wa,Ba,$a){var Ua=ce(Oa,za,Wa);return Ua.xRel=$a,Ba&&(Ua.outside=!0),Ua}function Jo(Oa,za,Wa){var Ba=Oa.doc;if(Wa+=Oa.display.viewOffset,0>Wa)return Qo(Ba.first,0,null,!0,-1);var $a=se(Ba,Wa),Ua=Ba.first+Ba.size-1;if($a>Ua)return Qo(Ba.first+Ba.size-1,ee(Ba,Ua).text.length,null,!0,1);0>za&&(za=0);for(var ja=ee(Ba,$a);;){var Ka=nn(Oa,ja,$a,za,Wa),Va=Be(ja),Ga=Va&&Va.find(0,!0);if(Va&&(Ka.ch>Ga.from.ch||Ka.ch==Ga.from.ch&&0<Ka.xRel))$a=le(ja=Ga.to.line);else return Ka}}function en(Oa,za,Wa,Ba){var $a=function(Ka){return qo(Oa,za,Oo(Oa,Wa,Ka),"line")},Ua=za.text.length,ja=Q(function(Ka){return $a(Ka-1).bottom<=Ba},Ua,0);return Ua=Q(function(Ka){return $a(Ka).top>Ba},ja,Ua),{begin:ja,end:Ua}}function tn(Oa,za,Wa,Ba){var $a=qo(Oa,za,Oo(Oa,Wa,Ba),"line").top;return en(Oa,za,Wa,$a)}function nn(Oa,za,Wa,Ba,$a){$a-=Ye(za);var Ua=0,ja=za.text.length,Ka=Ro(Oa,za),Ga=tt(za,Oa.doc.direction),Va;if(Ga){if(Oa.options.lineWrapping){var qa;qa=en(Oa,za,Ka,$a),Ua=qa.begin,ja=qa.end,qa}Va=new ce(Wa,Ua);var _a=Yo(Oa,Va,"line",za,Ka).left,Xa=_a<Ba?1:-1,Za=_a-Ba,Ya,Qa;do{if(Ya=Za,Qa=Va,Va=lt(Oa,za,Va,Xa),null==Va||Va.ch<Ua||ja<=("before"==Va.sticky?Va.ch-1:Va.ch)){Va=Qa;break}Za=Yo(Oa,Va,"line",za,Ka).left-Ba}while(0>Xa!=0>Za&&_Mathabs(Za)<=_Mathabs(Ya));if(_Mathabs(Za)>_Mathabs(Ya)){if(0>Za==0>Ya)throw new Error("Broke out of infinite loop in coordsCharInner");Va=Qa}}else{var Ja=Q(function(td){var od=qo(Oa,za,Oo(Oa,Ka,td),"line");return od.top>$a?(ja=_Mathmin(td,ja),!0):!(od.bottom<=$a)&&(!!(od.left>Ba)||!(od.right<Ba)&&Ba-od.left<od.right-Ba)},Ua,ja);Ja=Z(za.text,Ja,1),Va=new ce(Wa,Ja,Ja==ja?"before":"after")}var ed=Yo(Oa,Va,"line",za,Ka);return($a<ed.top||ed.bottom<$a)&&(Va.outside=!0),Va.xRel=Ba<ed.left?-1:Ba>ed.right?1:0,Va}function rn(Oa){if(null!=Oa.cachedTextHeight)return Oa.cachedTextHeight;if(null==Zs){Zs=A("pre");for(var za=0;49>za;++za)Zs.appendChild(document.createTextNode("x")),Zs.appendChild(A("br"));Zs.appendChild(document.createTextNode("x"))}N(Oa.measure,Zs);var Wa=Zs.offsetHeight/50;return 3<Wa&&(Oa.cachedTextHeight=Wa),T(Oa.measure),Wa||1}function ln(Oa){if(null!=Oa.cachedCharWidth)return Oa.cachedCharWidth;var za=A("span","xxxxxxxxxx"),Wa=A("pre",[za]);N(Oa.measure,Wa);var Ba=za.getBoundingClientRect(),$a=(Ba.right-Ba.left)/10;return 2<$a&&(Oa.cachedCharWidth=$a),$a||10}function sn(Oa){for(var za=Oa.display,Wa={},Ba={},$a=za.gutters.clientLeft,Ua=za.gutters.firstChild,ja=0;Ua;Ua=Ua.nextSibling,++ja)Wa[Oa.options.gutters[ja]]=Ua.offsetLeft+Ua.clientLeft+$a,Ba[Oa.options.gutters[ja]]=Ua.clientWidth;return{fixedPos:an(za),gutterTotalWidth:za.gutters.offsetWidth,gutterLeft:Wa,gutterWidth:Ba,wrapperWidth:za.wrapper.clientWidth}}function an(Oa){return Oa.scroller.getBoundingClientRect().left-Oa.sizer.getBoundingClientRect().left}function dn(Oa){var za=rn(Oa.display),Wa=Oa.options.lineWrapping,Ba=Wa&&_Mathmax(5,Oa.display.scroller.clientWidth/ln(Oa.display)-3);return function($a){if(qe(Oa.doc,$a))return 0;var Ua=0;if($a.widgets)for(var ja=0;ja<$a.widgets.length;ja++)$a.widgets[ja].height&&(Ua+=$a.widgets[ja].height);return Wa?Ua+(_Mathceil($a.text.length/Ba)||1)*za:Ua+za}}function cn(Oa){var za=Oa.doc,Wa=dn(Oa);za.iter(function(Ba){var $a=Wa(Ba);$a!=Ba.height&&re(Ba,$a)})}function pn(Oa,za,Wa,Ba){var $a=Oa.display;if(!Wa&&"true"==Ct(za).getAttribute("cm-not-content"))return null;var Ka=$a.lineSpace.getBoundingClientRect(),Ua,ja;try{Ua=za.clientX-Ka.left,ja=za.clientY-Ka.top}catch(_a){return null}var Va=Jo(Oa,Ua,ja),Ga;if(Ba&&1==Va.xRel&&(Ga=ee(Oa.doc,Va.line).text).length==Va.ch){var qa=R(Ga,Ga.length,Oa.options.tabSize)-Ga.length;Va=ce(Va.line,_Mathmax(0,_Mathround((Ua-No(Oa.display).left)/ln(Oa.display))-qa))}return Va}function un(Oa,za){if(za>=Oa.display.viewTo)return null;if(za-=Oa.display.viewFrom,0>za)return null;for(var Wa=Oa.display.view,Ba=0;Ba<Wa.length;Ba++)if(za-=Wa[Ba].size,0>za)return Ba}function hn(Oa){Oa.display.input.showSelection(Oa.display.input.prepareSelection())}function gn(Oa,za){for(var Wa=Oa.doc,Ba={},$a=Ba.cursors=document.createDocumentFragment(),Ua=Ba.selection=document.createDocumentFragment(),ja=0;ja<Wa.sel.ranges.length;ja++)if(!1!==za||ja!=Wa.sel.primIndex){var Ka=Wa.sel.ranges[ja];if(!(Ka.from().line>=Oa.display.viewTo||Ka.to().line<Oa.display.viewFrom)){var Va=Ka.empty();(Va||Oa.options.showCursorWhenSelecting)&&mn(Oa,Ka.head,$a),Va||yn(Oa,Ka,Ua)}}return Ba}function mn(Oa,za,Wa){var Ba=Yo(Oa,za,"div",null,null,!Oa.options.singleCursorHeightPerLine),$a=Wa.appendChild(A("div","\xA0","CodeMirror-cursor"));if($a.style.left=Ba.left+"px",$a.style.top=Ba.top+"px",$a.style.height=_Mathmax(0,Ba.bottom-Ba.top)*Oa.options.cursorHeight+"px",Ba.other){var Ua=Wa.appendChild(A("div","\xA0","CodeMirror-cursor CodeMirror-secondarycursor"));Ua.style.display="",Ua.style.left=Ba.other.left+"px",Ua.style.top=Ba.other.top+"px",Ua.style.height=.85*(Ba.other.bottom-Ba.other.top)+"px"}}function yn(Oa,za,Wa){function Ba(td,od,nd,rd){0>od&&(od=0),od=_Mathround(od),rd=_Mathround(rd),Ka.appendChild(A("div",null,"CodeMirror-selected","position: absolute; left: "+td+"px;\n                             top: "+od+"px; width: "+(null==nd?qa-td:nd)+"px;\n                             height: "+(rd-od)+"px"))}function $a(td,od,nd){function rd(cd,pd){return Xo(Oa,ce(td,cd),"div",ld,pd)}var ld=ee(ja,td),sd=ld.text.length,ad,dd;return Je(tt(ld,ja.direction),od||0,null==nd?sd:nd,function(cd,pd,ud){var hd=rd(cd,"left"),gd,fd,md;if(cd==pd)gd=hd,fd=md=hd.left;else{if(gd=rd(pd-1,"right"),"rtl"==ud){var yd=hd;hd=gd,gd=yd}fd=hd.left,md=gd.right}null==od&&0==cd&&(fd=Ga),3<gd.top-hd.top&&(Ba(fd,hd.top,null,hd.bottom),fd=Ga,hd.bottom<gd.top&&Ba(fd,hd.bottom,null,gd.top)),null==nd&&pd==sd&&(md=qa),(!ad||hd.top<ad.top||hd.top==ad.top&&hd.left<ad.left)&&(ad=hd),(!dd||gd.bottom>dd.bottom||gd.bottom==dd.bottom&&gd.right>dd.right)&&(dd=gd),fd<Ga+1&&(fd=Ga),Ba(fd,gd.top,md-fd,gd.bottom)}),{start:ad,end:dd}}var Ua=Oa.display,ja=Oa.doc,Ka=document.createDocumentFragment(),Va=No(Oa.display),Ga=Va.left,qa=_Mathmax(Ua.sizerWidth,Io(Oa)-Ua.sizer.offsetLeft)-Va.right,_a=za.from(),Xa=za.to();if(_a.line==Xa.line)$a(_a.line,_a.ch,Xa.ch);else{var Ya=ee(ja,_a.line),Za=ee(ja,Xa.line),Qa=Ue(Ya)==Ue(Za),Ja=$a(_a.line,_a.ch,Qa?Ya.text.length+1:null).end,ed=$a(Xa.line,Qa?0:null,Xa.ch).start;Qa&&(Ja.top<ed.top-2?(Ba(Ja.right,Ja.top,null,Ja.bottom),Ba(Ga,ed.top,ed.left,ed.bottom)):Ba(Ja.right,Ja.top,ed.left-Ja.right,Ja.bottom)),Ja.bottom<ed.top&&Ba(Ga,Ja.bottom,null,ed.top)}Wa.appendChild(Ka)}function vn(Oa){if(Oa.state.focused){var za=Oa.display;clearInterval(za.blinker);var Wa=!0;za.cursorDiv.style.visibility="",0<Oa.options.cursorBlinkRate?za.blinker=setInterval(function(){return za.cursorDiv.style.visibility=(Wa=!Wa)?"":"hidden"},Oa.options.cursorBlinkRate):0>Oa.options.cursorBlinkRate&&(za.cursorDiv.style.visibility="hidden")}}function bn(Oa){Oa.state.focused||(Oa.display.input.focus(),xn(Oa))}function Cn(Oa){Oa.state.delayingBlurEvent=!0,setTimeout(function(){Oa.state.delayingBlurEvent&&(Oa.state.delayingBlurEvent=!1,kn(Oa))},100)}function xn(Oa,za){Oa.state.delayingBlurEvent&&(Oa.state.delayingBlurEvent=!1),"nocursor"==Oa.options.readOnly||(!Oa.state.focused&&(pt(Oa,"focus",Oa,za),Oa.state.focused=!0,E(Oa.display.wrapper,"CodeMirror-focused"),!Oa.curOp&&Oa.display.selForContextMenu!=Oa.doc.sel&&(Oa.display.input.reset(),Zl&&setTimeout(function(){return Oa.display.input.reset(!0)},20)),Oa.display.input.receivedFocus()),vn(Oa))}function kn(Oa,za){Oa.state.delayingBlurEvent||(Oa.state.focused&&(pt(Oa,"blur",Oa,za),Oa.state.focused=!1,gs(Oa.display.wrapper,"CodeMirror-focused")),clearInterval(Oa.display.blinker),setTimeout(function(){Oa.state.focused||(Oa.display.shift=!1)},150))}function wn(Oa){for(var za=Oa.display,Wa=za.lineDiv.offsetTop,Ba=0;Ba<za.view.length;Ba++){var $a=za.view[Ba],Ua=void 0;if(!$a.hidden){if(Xl&&8>Yl){var ja=$a.node.offsetTop+$a.node.offsetHeight;Ua=ja-Wa,Wa=ja}else{var Ka=$a.node.getBoundingClientRect();Ua=Ka.bottom-Ka.top}var Va=$a.line.height-Ua;if(2>Ua&&(Ua=rn(za)),(.001<Va||-.001>Va)&&(re($a.line,Ua),Sn($a.line),$a.rest))for(var Ga=0;Ga<$a.rest.length;Ga++)Sn($a.rest[Ga])}}}function Sn(Oa){if(Oa.widgets)for(var za=0;za<Oa.widgets.length;++za)Oa.widgets[za].height=Oa.widgets[za].node.parentNode.offsetHeight}function Ln(Oa,za,Wa){var Ba=Wa&&null!=Wa.top?_Mathmax(0,Wa.top):Oa.scroller.scrollTop;Ba=_Mathfloor(Ba-Lo(Oa));var $a=Wa&&null!=Wa.bottom?Wa.bottom:Ba+Oa.wrapper.clientHeight,Ua=se(za,Ba),ja=se(za,$a);if(Wa&&Wa.ensure){var Ka=Wa.ensure.from.line,Va=Wa.ensure.to.line;Ka<Ua?(Ua=Ka,ja=se(za,Ye(ee(za,Ka))+Oa.wrapper.clientHeight)):_Mathmin(Va,za.lastLine())>=ja&&(Ua=se(za,Ye(ee(za,Va))-Oa.wrapper.clientHeight),ja=Va)}return{from:Ua,to:_Mathmax(ja,Ua+1)}}function Tn(Oa){var za=Oa.display,Wa=za.view;if(za.alignWidgets||za.gutters.firstChild&&Oa.options.fixedGutter){for(var Ba=an(za)-za.scroller.scrollLeft+Oa.doc.scrollLeft,$a=za.gutters.offsetWidth,Ua=Ba+"px",ja=0;ja<Wa.length;ja++)if(!Wa[ja].hidden){Oa.options.fixedGutter&&(Wa[ja].gutter&&(Wa[ja].gutter.style.left=Ua),Wa[ja].gutterBackground&&(Wa[ja].gutterBackground.style.left=Ua));var Ka=Wa[ja].alignable;if(Ka)for(var Va=0;Va<Ka.length;Va++)Ka[Va].style.left=Ua}Oa.options.fixedGutter&&(za.gutters.style.left=Ba+$a+"px")}}function Nn(Oa){if(!Oa.options.lineNumbers)return!1;var za=Oa.doc,Wa=de(Oa.options,za.first+za.size-1),Ba=Oa.display;if(Wa.length!=Ba.lineNumChars){var $a=Ba.measure.appendChild(A("div",[A("div",Wa)],"CodeMirror-linenumber CodeMirror-gutter-elt")),Ua=$a.firstChild.offsetWidth,ja=$a.offsetWidth-Ua;return Ba.lineGutter.style.width="",Ba.lineNumInnerWidth=_Mathmax(Ua,Ba.lineGutter.offsetWidth-ja)+1,Ba.lineNumWidth=Ba.lineNumInnerWidth+ja,Ba.lineNumChars=Ba.lineNumInnerWidth?Wa.length:-1,Ba.lineGutter.style.width=Ba.lineNumWidth+"px",bi(Oa),!0}return!1}function An(Oa,za){if(!ut(Oa,"scrollCursorIntoView")){var Wa=Oa.display,Ba=Wa.sizer.getBoundingClientRect(),$a=null;if(0>za.top+Ba.top?$a=!0:za.bottom+Ba.top>(window.innerHeight||document.documentElement.clientHeight)&&($a=!1),null!=$a&&!ns){var Ua=A("div","\u200B",null,"position: absolute;\n                         top: "+(za.top-Wa.viewOffset-Lo(Oa.display))+"px;\n                         height: "+(za.bottom-za.top+Ao(Oa)+Wa.barHeight)+"px;\n                         left: "+za.left+"px; width: "+_Mathmax(2,za.right-za.left)+"px;");Oa.display.lineSpace.appendChild(Ua),Ua.scrollIntoView($a),Oa.display.lineSpace.removeChild(Ua)}}}function In(Oa,za,Wa,Ba){null==Ba&&(Ba=0);for(var Ua=0,$a;5>Ua;Ua++){var ja=!1,Ka=Yo(Oa,za),Va=Wa&&Wa!=za?Yo(Oa,Wa):Ka;$a={left:_Mathmin(Ka.left,Va.left),top:_Mathmin(Ka.top,Va.top)-Ba,right:_Mathmax(Ka.left,Va.left),bottom:_Mathmax(Ka.bottom,Va.bottom)+Ba};var Ga=Hn(Oa,$a),qa=Oa.doc.scrollTop,_a=Oa.doc.scrollLeft;if(null!=Ga.scrollTop&&(zn(Oa,Ga.scrollTop),1<_Mathabs(Oa.doc.scrollTop-qa)&&(ja=!0)),null!=Ga.scrollLeft&&(Bn(Oa,Ga.scrollLeft),1<_Mathabs(Oa.doc.scrollLeft-_a)&&(ja=!0)),!ja)break}return $a}function Dn(Oa,za){var Wa=Hn(Oa,za);null!=Wa.scrollTop&&zn(Oa,Wa.scrollTop),null!=Wa.scrollLeft&&Bn(Oa,Wa.scrollLeft)}function Hn(Oa,za){var Wa=Oa.display,Ba=rn(Oa.display);0>za.top&&(za.top=0);var $a=Oa.curOp&&null!=Oa.curOp.scrollTop?Oa.curOp.scrollTop:Wa.scroller.scrollTop,Ua=Do(Oa),ja={};za.bottom-za.top>Ua&&(za.bottom=za.top+Ua);var Ka=Oa.doc.height+To(Wa),Va=za.top<Ba,Ga=za.bottom>Ka-Ba;if(za.top<$a)ja.scrollTop=Va?0:za.top;else if(za.bottom>$a+Ua){var qa=_Mathmin(za.top,(Ga?Ka:za.bottom)-Ua);qa!=$a&&(ja.scrollTop=qa)}var _a=Oa.curOp&&null!=Oa.curOp.scrollLeft?Oa.curOp.scrollLeft:Wa.scroller.scrollLeft,Xa=Io(Oa)-(Oa.options.fixedGutter?Wa.gutters.offsetWidth:0),Ya=za.right-za.left>Xa;return Ya&&(za.right=za.left+Xa),10>za.left?ja.scrollLeft=0:za.left<_a?ja.scrollLeft=_Mathmax(0,za.left-(Ya?0:10)):za.right>Xa+_a-3&&(ja.scrollLeft=za.right+(Ya?0:10)-Xa),ja}function En(Oa,za){null==za||(Rn(Oa),Oa.curOp.scrollTop=(null==Oa.curOp.scrollTop?Oa.doc.scrollTop:Oa.curOp.scrollTop)+za)}function Mn(Oa){Rn(Oa);var za=Oa.getCursor(),Wa=za,Ba=za;Oa.options.lineWrapping||(Wa=za.ch?ce(za.line,za.ch-1):za,Ba=ce(za.line,za.ch+1)),Oa.curOp.scrollToPos={from:Wa,to:Ba,margin:Oa.options.cursorScrollMargin}}function Pn(Oa,za,Wa){(null!=za||null!=Wa)&&Rn(Oa),null!=za&&(Oa.curOp.scrollLeft=za),null!=Wa&&(Oa.curOp.scrollTop=Wa)}function Fn(Oa,za){Rn(Oa),Oa.curOp.scrollToPos=za}function Rn(Oa){var za=Oa.curOp.scrollToPos;if(za){Oa.curOp.scrollToPos=null;var Wa=Zo(Oa,za.from),Ba=Zo(Oa,za.to);On(Oa,Wa,Ba,za.margin)}}function On(Oa,za,Wa,Ba){var $a=Hn(Oa,{left:_Mathmin(za.left,Wa.left),top:_Mathmin(za.top,Wa.top)-Ba,right:_Mathmax(za.right,Wa.right),bottom:_Mathmax(za.bottom,Wa.bottom)+Ba});Pn(Oa,$a.scrollLeft,$a.scrollTop)}function zn(Oa,za){2>_Mathabs(Oa.doc.scrollTop-za)||(!Vl&&yi(Oa,{top:za}),Wn(Oa,za,!0),Vl&&yi(Oa),di(Oa,100))}function Wn(Oa,za,Wa){za=_Mathmin(Oa.display.scroller.scrollHeight-Oa.display.scroller.clientHeight,za),(Oa.display.scroller.scrollTop!=za||Wa)&&(Oa.doc.scrollTop=za,Oa.display.scrollbars.setScrollTop(za),Oa.display.scroller.scrollTop!=za&&(Oa.display.scroller.scrollTop=za))}function Bn(Oa,za,Wa,Ba){za=_Mathmin(za,Oa.display.scroller.scrollWidth-Oa.display.scroller.clientWidth),(Wa?za==Oa.doc.scrollLeft:2>_Mathabs(Oa.doc.scrollLeft-za))&&!Ba||(Oa.doc.scrollLeft=za,Tn(Oa),Oa.display.scroller.scrollLeft!=za&&(Oa.display.scroller.scrollLeft=za),Oa.display.scrollbars.setScrollLeft(za))}function $n(Oa){var za=Oa.display,Wa=za.gutters.offsetWidth,Ba=_Mathround(Oa.doc.height+To(Oa.display));return{clientHeight:za.scroller.clientHeight,viewHeight:za.wrapper.clientHeight,scrollWidth:za.scroller.scrollWidth,clientWidth:za.scroller.clientWidth,viewWidth:za.wrapper.clientWidth,barLeft:Oa.options.fixedGutter?Wa:0,docHeight:Ba,scrollHeight:Ba+Ao(Oa)+za.barHeight,nativeBarWidth:za.nativeBarWidth,gutterWidth:Wa}}function Un(Oa,za){za||(za=$n(Oa));var Wa=Oa.display.barWidth,Ba=Oa.display.barHeight;jn(Oa,za);for(var $a=0;4>$a&&Wa!=Oa.display.barWidth||Ba!=Oa.display.barHeight;$a++)Wa!=Oa.display.barWidth&&Oa.options.lineWrapping&&wn(Oa),jn(Oa,$n(Oa)),Wa=Oa.display.barWidth,Ba=Oa.display.barHeight}function jn(Oa,za){var Wa=Oa.display,Ba=Wa.scrollbars.update(za);Wa.sizer.style.paddingRight=(Wa.barWidth=Ba.right)+"px",Wa.sizer.style.paddingBottom=(Wa.barHeight=Ba.bottom)+"px",Wa.heightForcer.style.borderBottom=Ba.bottom+"px solid transparent",Ba.right&&Ba.bottom?(Wa.scrollbarFiller.style.display="block",Wa.scrollbarFiller.style.height=Ba.bottom+"px",Wa.scrollbarFiller.style.width=Ba.right+"px"):Wa.scrollbarFiller.style.display="",Ba.bottom&&Oa.options.coverGutterNextToScrollbar&&Oa.options.fixedGutter?(Wa.gutterFiller.style.display="block",Wa.gutterFiller.style.height=Ba.bottom+"px",Wa.gutterFiller.style.width=za.gutterWidth+"px"):Wa.gutterFiller.style.display=""}function Kn(Oa){Oa.display.scrollbars&&(Oa.display.scrollbars.clear(),Oa.display.scrollbars.addClass&&gs(Oa.display.wrapper,Oa.display.scrollbars.addClass)),Oa.display.scrollbars=new ea[Oa.options.scrollbarStyle](function(za){Oa.display.wrapper.insertBefore(za,Oa.display.scrollbarFiller),Ms(za,"mousedown",function(){Oa.state.focused&&setTimeout(function(){return Oa.display.input.focus()},0)}),za.setAttribute("cm-not-content","true")},function(za,Wa){"horizontal"==Wa?Bn(Oa,za):zn(Oa,za)},Oa),Oa.display.scrollbars.addClass&&E(Oa.display.wrapper,Oa.display.scrollbars.addClass)}function Vn(Oa){Oa.curOp={cm:Oa,viewChanged:!1,startHeight:Oa.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++ta},io(Oa.curOp)}function Gn(Oa){var za=Oa.curOp;lo(za,function(Wa){for(var Ba=0;Ba<Wa.ops.length;Ba++)Wa.ops[Ba].cm.curOp=null;qn(Wa)})}function qn(Oa){for(var za=Oa.ops,Wa=0;Wa<za.length;Wa++)_n(za[Wa]);for(var Ba=0;Ba<za.length;Ba++)Xn(za[Ba]);for(var $a=0;$a<za.length;$a++)Yn(za[$a]);for(var Ua=0;Ua<za.length;Ua++)Zn(za[Ua]);for(var ja=0;ja<za.length;ja++)Qn(za[ja])}function _n(Oa){var za=Oa.cm,Wa=za.display;pi(za),Oa.updateMaxLine&&Qe(za),Oa.mustUpdate=Oa.viewChanged||Oa.forceUpdate||null!=Oa.scrollTop||Oa.scrollToPos&&(Oa.scrollToPos.from.line<Wa.viewFrom||Oa.scrollToPos.to.line>=Wa.viewTo)||Wa.maxLineChanged&&za.options.lineWrapping,Oa.update=Oa.mustUpdate&&new oa(za,Oa.mustUpdate&&{top:Oa.scrollTop,ensure:Oa.scrollToPos},Oa.forceUpdate)}function Xn(Oa){Oa.updatedDisplay=Oa.mustUpdate&&fi(Oa.cm,Oa.update)}function Yn(Oa){var za=Oa.cm,Wa=za.display;Oa.updatedDisplay&&wn(za),Oa.barMeasure=$n(za),Wa.maxLineChanged&&!za.options.lineWrapping&&(Oa.adjustWidthTo=Po(za,Wa.maxLine,Wa.maxLine.text.length).left+3,za.display.sizerWidth=Oa.adjustWidthTo,Oa.barMeasure.scrollWidth=_Mathmax(Wa.scroller.clientWidth,Wa.sizer.offsetLeft+Oa.adjustWidthTo+Ao(za)+za.display.barWidth),Oa.maxScrollLeft=_Mathmax(0,Wa.sizer.offsetLeft+Oa.adjustWidthTo-Io(za))),(Oa.updatedDisplay||Oa.selectionChanged)&&(Oa.preparedSelection=Wa.input.prepareSelection(Oa.focus))}function Zn(Oa){var za=Oa.cm;null!=Oa.adjustWidthTo&&(za.display.sizer.style.minWidth=Oa.adjustWidthTo+"px",Oa.maxScrollLeft<za.doc.scrollLeft&&Bn(za,_Mathmin(za.display.scroller.scrollLeft,Oa.maxScrollLeft),!0),za.display.maxLineChanged=!1);var Wa=Oa.focus&&Oa.focus==H()&&(!document.hasFocus||document.hasFocus());Oa.preparedSelection&&za.display.input.showSelection(Oa.preparedSelection,Wa),(Oa.updatedDisplay||Oa.startHeight!=za.doc.height)&&Un(za,Oa.barMeasure),Oa.updatedDisplay&&Ci(za,Oa.barMeasure),Oa.selectionChanged&&vn(za),za.state.focused&&Oa.updateInput&&za.display.input.reset(Oa.typing),Wa&&bn(Oa.cm)}function Qn(Oa){var za=Oa.cm,Wa=za.display,Ba=za.doc;if(Oa.updatedDisplay&&mi(za,Oa.update),null!=Wa.wheelStartX&&(null!=Oa.scrollTop||null!=Oa.scrollLeft||Oa.scrollToPos)&&(Wa.wheelStartX=Wa.wheelStartY=null),null!=Oa.scrollTop&&Wn(za,Oa.scrollTop,Oa.forceScroll),null!=Oa.scrollLeft&&Bn(za,Oa.scrollLeft,!0,!0),Oa.scrollToPos){var $a=In(za,ve(Ba,Oa.scrollToPos.from),ve(Ba,Oa.scrollToPos.to),Oa.scrollToPos.margin);An(za,$a)}var Ua=Oa.maybeHiddenMarkers,ja=Oa.maybeUnhiddenMarkers;if(Ua)for(var Ka=0;Ka<Ua.length;++Ka)Ua[Ka].lines.length||pt(Ua[Ka],"hide");if(ja)for(var Va=0;Va<ja.length;++Va)ja[Va].lines.length&&pt(ja[Va],"unhide");Wa.wrapper.offsetHeight&&(Ba.scrollTop=za.display.scroller.scrollTop),Oa.changeObjs&&pt(za,"changes",za,Oa.changeObjs),Oa.update&&Oa.update.finish()}function Jn(Oa,za){if(Oa.curOp)return za();Vn(Oa);try{return za()}finally{Gn(Oa)}}function ei(Oa,za){return function(){if(Oa.curOp)return za.apply(Oa,arguments);Vn(Oa);try{return za.apply(Oa,arguments)}finally{Gn(Oa)}}}function ti(Oa){return function(){if(this.curOp)return Oa.apply(this,arguments);Vn(this);try{return Oa.apply(this,arguments)}finally{Gn(this)}}}function oi(Oa){return function(){var za=this.cm;if(!za||za.curOp)return Oa.apply(this,arguments);Vn(za);try{return Oa.apply(this,arguments)}finally{Gn(za)}}}function ni(Oa,za,Wa,Ba){null==za&&(za=Oa.doc.first),null==Wa&&(Wa=Oa.doc.first+Oa.doc.size),Ba||(Ba=0);var $a=Oa.display;if(Ba&&Wa<$a.viewTo&&(null==$a.updateLineNumbers||$a.updateLineNumbers>za)&&($a.updateLineNumbers=za),Oa.curOp.viewChanged=!0,za>=$a.viewTo)Is&&Ve(Oa.doc,za)<$a.viewTo&&ri(Oa);else if(Wa<=$a.viewFrom)Is&&Ge(Oa.doc,Wa+Ba)>$a.viewFrom?ri(Oa):($a.viewFrom+=Ba,$a.viewTo+=Ba);else if(za<=$a.viewFrom&&Wa>=$a.viewTo)ri(Oa);else if(za<=$a.viewFrom){var Ua=li(Oa,Wa,Wa+Ba,1);Ua?($a.view=$a.view.slice(Ua.index),$a.viewFrom=Ua.lineN,$a.viewTo+=Ba):ri(Oa)}else if(Wa>=$a.viewTo){var ja=li(Oa,za,za,-1);ja?($a.view=$a.view.slice(0,ja.index),$a.viewTo=ja.lineN):ri(Oa)}else{var Ka=li(Oa,za,za,-1),Va=li(Oa,Wa,Wa+Ba,1);Ka&&Va?($a.view=$a.view.slice(0,Ka.index).concat(oo(Oa,Ka.lineN,Va.lineN)).concat($a.view.slice(Va.index)),$a.viewTo+=Ba):ri(Oa)}var Ga=$a.externalMeasured;Ga&&(Wa<Ga.lineN?Ga.lineN+=Ba:za<Ga.lineN+Ga.size&&($a.externalMeasured=null))}function ii(Oa,za,Wa){Oa.curOp.viewChanged=!0;var Ba=Oa.display,$a=Oa.display.externalMeasured;if($a&&za>=$a.lineN&&za<$a.lineN+$a.size&&(Ba.externalMeasured=null),!(za<Ba.viewFrom||za>=Ba.viewTo)){var Ua=Ba.view[un(Oa,za)];if(null!=Ua.node){var ja=Ua.changes||(Ua.changes=[]);-1==O(ja,Wa)&&ja.push(Wa)}}}function ri(Oa){Oa.display.viewFrom=Oa.display.viewTo=Oa.doc.first,Oa.display.view=[],Oa.display.viewOffset=0}function li(Oa,za,Wa,Ba){var $a=un(Oa,za),ja=Oa.display.view,Ua;if(!Is||Wa==Oa.doc.first+Oa.doc.size)return{index:$a,lineN:Wa};for(var Ka=Oa.display.viewFrom,Va=0;Va<$a;Va++)Ka+=ja[Va].size;if(Ka!=za){if(0<Ba){if($a==ja.length-1)return null;Ua=Ka+ja[$a].size-za,$a++}else Ua=Ka-za;za+=Ua,Wa+=Ua}for(;Ve(Oa.doc,Wa)!=Wa;){if($a==(0>Ba?0:ja.length-1))return null;Wa+=Ba*ja[$a-(0>Ba?1:0)].size,$a+=Ba}return{index:$a,lineN:Wa}}function si(Oa,za,Wa){var Ba=Oa.display,$a=Ba.view;0==$a.length||za>=Ba.viewTo||Wa<=Ba.viewFrom?(Ba.view=oo(Oa,za,Wa),Ba.viewFrom=za):(Ba.viewFrom>za?Ba.view=oo(Oa,za,Ba.viewFrom).concat(Ba.view):Ba.viewFrom<za&&(Ba.view=Ba.view.slice(un(Oa,za))),Ba.viewFrom=za,Ba.viewTo<Wa?Ba.view=Ba.view.concat(oo(Oa,Ba.viewTo,Wa)):Ba.viewTo>Wa&&(Ba.view=Ba.view.slice(0,un(Oa,Wa)))),Ba.viewTo=Wa}function ai(Oa){for(var za=Oa.display.view,Wa=0,Ba=0,$a;Ba<za.length;Ba++)$a=za[Ba],$a.hidden||$a.node&&!$a.changes||++Wa;return Wa}function di(Oa,za){Oa.doc.mode.startState&&Oa.doc.frontier<Oa.display.viewTo&&Oa.state.highlight.set(za,P(ci,Oa))}function ci(Oa){var za=Oa.doc;if(za.frontier<za.first&&(za.frontier=za.first),!(za.frontier>=Oa.display.viewTo)){var Wa=+new Date+Oa.options.workTime,Ba=Dt(za.mode,Ft(Oa,za.frontier)),$a=[];za.iter(za.frontier,_Mathmin(za.first+za.size,Oa.display.viewTo+500),function(Ua){if(za.frontier>=Oa.display.viewFrom){var ja=Ua.styles,Ka=Ua.text.length>Oa.options.maxHighlightLength,Va=Mt(Oa,Ua,Ka?Dt(za.mode,Ba):Ba,!0);Ua.styles=Va.styles;var Ga=Ua.styleClasses,qa=Va.classes;qa?Ua.styleClasses=qa:Ga&&(Ua.styleClasses=null);for(var _a=!ja||ja.length!=Ua.styles.length||Ga!=qa&&(!Ga||!qa||Ga.bgClass!=qa.bgClass||Ga.textClass!=qa.textClass),Xa=0;!_a&&Xa<ja.length;++Xa)_a=ja[Xa]!=Ua.styles[Xa];_a&&$a.push(za.frontier),Ua.stateAfter=Ka?Ba:Dt(za.mode,Ba)}else Ua.text.length<=Oa.options.maxHighlightLength&&Rt(Oa,Ua.text,Ba),Ua.stateAfter=0==za.frontier%5?Dt(za.mode,Ba):null;return(++za.frontier,+new Date>Wa)?(di(Oa,Oa.options.workDelay),!0):void 0}),$a.length&&Jn(Oa,function(){for(var Ua=0;Ua<$a.length;Ua++)ii(Oa,$a[Ua],"text")})}}function pi(Oa){var za=Oa.display;!za.scrollbarsClipped&&za.scroller.offsetWidth&&(za.nativeBarWidth=za.scroller.offsetWidth-za.scroller.clientWidth,za.heightForcer.style.height=Ao(Oa)+"px",za.sizer.style.marginBottom=-za.nativeBarWidth+"px",za.sizer.style.borderRightWidth=Ao(Oa)+"px",za.scrollbarsClipped=!0)}function hi(Oa){if(Oa.hasFocus())return null;var za=H();if(!za||!D(Oa.display.lineDiv,za))return null;var Wa={activeElt:za};if(window.getSelection){var Ba=window.getSelection();Ba.anchorNode&&Ba.extend&&D(Oa.display.lineDiv,Ba.anchorNode)&&(Wa.anchorNode=Ba.anchorNode,Wa.anchorOffset=Ba.anchorOffset,Wa.focusNode=Ba.focusNode,Wa.focusOffset=Ba.focusOffset)}return Wa}function gi(Oa){if(Oa&&Oa.activeElt&&Oa.activeElt!=H()&&(Oa.activeElt.focus(),Oa.anchorNode&&D(document.body,Oa.anchorNode)&&D(document.body,Oa.focusNode))){var za=window.getSelection(),Wa=document.createRange();Wa.setEnd(Oa.anchorNode,Oa.anchorOffset),Wa.collapse(!1),za.removeAllRanges(),za.addRange(Wa),za.extend(Oa.focusNode,Oa.focusOffset)}}function fi(Oa,za){var Wa=Oa.display,Ba=Oa.doc;if(za.editorIsHidden)return ri(Oa),!1;if(!za.force&&za.visible.from>=Wa.viewFrom&&za.visible.to<=Wa.viewTo&&(null==Wa.updateLineNumbers||Wa.updateLineNumbers>=Wa.viewTo)&&Wa.renderedView==Wa.view&&0==ai(Oa))return!1;Nn(Oa)&&(ri(Oa),za.dims=sn(Oa));var $a=Ba.first+Ba.size,Ua=_Mathmax(za.visible.from-Oa.options.viewportMargin,Ba.first),ja=_Mathmin($a,za.visible.to+Oa.options.viewportMargin);Wa.viewFrom<Ua&&20>Ua-Wa.viewFrom&&(Ua=_Mathmax(Ba.first,Wa.viewFrom)),Wa.viewTo>ja&&20>Wa.viewTo-ja&&(ja=_Mathmin($a,Wa.viewTo)),Is&&(Ua=Ve(Oa.doc,Ua),ja=Ge(Oa.doc,ja));var Ka=Ua!=Wa.viewFrom||ja!=Wa.viewTo||Wa.lastWrapHeight!=za.wrapperHeight||Wa.lastWrapWidth!=za.wrapperWidth;si(Oa,Ua,ja),Wa.viewOffset=Ye(ee(Oa.doc,Wa.viewFrom)),Oa.display.mover.style.top=Wa.viewOffset+"px";var Va=ai(Oa);if(!Ka&&0==Va&&!za.force&&Wa.renderedView==Wa.view&&(null==Wa.updateLineNumbers||Wa.updateLineNumbers>=Wa.viewTo))return!1;var Ga=hi(Oa);return 4<Va&&(Wa.lineDiv.style.display="none"),vi(Oa,Wa.updateLineNumbers,za.dims),4<Va&&(Wa.lineDiv.style.display=""),Wa.renderedView=Wa.view,gi(Ga),T(Wa.cursorDiv),T(Wa.selectionDiv),Wa.gutters.style.height=Wa.sizer.style.minHeight=0,Ka&&(Wa.lastWrapHeight=za.wrapperHeight,Wa.lastWrapWidth=za.wrapperWidth,di(Oa,400)),Wa.updateLineNumbers=null,!0}function mi(Oa,za){for(var Wa=za.viewport,Ba=!0;;Ba=!1){if((!Ba||!Oa.options.lineWrapping||za.oldDisplayWidth==Io(Oa))&&(Wa&&null!=Wa.top&&(Wa={top:_Mathmin(Oa.doc.height+To(Oa.display)-Do(Oa),Wa.top)}),za.visible=Ln(Oa.display,Oa.doc,Wa),za.visible.from>=Oa.display.viewFrom&&za.visible.to<=Oa.display.viewTo))break;if(!fi(Oa,za))break;wn(Oa);var $a=$n(Oa);hn(Oa),Un(Oa,$a),Ci(Oa,$a)}za.signal(Oa,"update",Oa),(Oa.display.viewFrom!=Oa.display.reportedViewFrom||Oa.display.viewTo!=Oa.display.reportedViewTo)&&(za.signal(Oa,"viewportChange",Oa,Oa.display.viewFrom,Oa.display.viewTo),Oa.display.reportedViewFrom=Oa.display.viewFrom,Oa.display.reportedViewTo=Oa.display.viewTo)}function yi(Oa,za){var Wa=new oa(Oa,za);if(fi(Oa,Wa)){wn(Oa),mi(Oa,Wa);var Ba=$n(Oa);hn(Oa),Un(Oa,Ba),Ci(Oa,Ba),Wa.finish()}}function vi(Oa,za,Wa){function Ba(Za){var Qa=Za.nextSibling;return Zl&&ss&&Oa.display.currentWheelTarget==Za?Za.style.display="none":Za.parentNode.removeChild(Za),Qa}for(var $a=Oa.display,Ua=Oa.options.lineNumbers,ja=$a.lineDiv,Ka=ja.firstChild,Va=$a.view,Ga=$a.viewFrom,qa=0,_a;qa<Va.length;qa++){if(_a=Va[qa],_a.hidden);else if(!_a.node||_a.node.parentNode!=ja){var Xa=bo(Oa,_a,Ga,Wa);ja.insertBefore(Xa,Ka)}else{for(;Ka!=_a.node;)Ka=Ba(Ka);var Ya=Ua&&null!=za&&za<=Ga&&_a.lineNumber;_a.changes&&(-1<O(_a.changes,"gutter")&&(Ya=!1),po(Oa,_a,Ga,Wa)),Ya&&(T(_a.lineNumber),_a.lineNumber.appendChild(document.createTextNode(de(Oa.options,Ga)))),Ka=_a.node.nextSibling}Ga+=_a.size}for(;Ka;)Ka=Ba(Ka)}function bi(Oa){var za=Oa.display.gutters.offsetWidth;Oa.display.sizer.style.marginLeft=za+"px"}function Ci(Oa,za){Oa.display.sizer.style.minHeight=za.docHeight+"px",Oa.display.heightForcer.style.top=za.docHeight+"px",Oa.display.gutters.style.height=za.docHeight+Oa.display.barHeight+Ao(Oa)+"px"}function xi(Oa){var za=Oa.display.gutters,Wa=Oa.options.gutters;T(za);for(var Ba=0;Ba<Wa.length;++Ba){var $a=Wa[Ba],Ua=za.appendChild(A("div",null,"CodeMirror-gutter "+$a));"CodeMirror-linenumbers"==$a&&(Oa.display.lineGutter=Ua,Ua.style.width=(Oa.display.lineNumWidth||1)+"px")}za.style.display=Ba?"":"none",bi(Oa)}function ki(Oa){var za=O(Oa.gutters,"CodeMirror-linenumbers");-1==za&&Oa.lineNumbers?Oa.gutters=Oa.gutters.concat(["CodeMirror-linenumbers"]):-1<za&&!Oa.lineNumbers&&(Oa.gutters=Oa.gutters.slice(0),Oa.gutters.splice(za,1))}function wi(Oa){var za=Oa.wheelDeltaX,Wa=Oa.wheelDeltaY;return null==za&&Oa.detail&&Oa.axis==Oa.HORIZONTAL_AXIS&&(za=Oa.detail),null==Wa&&Oa.detail&&Oa.axis==Oa.VERTICAL_AXIS?Wa=Oa.detail:null==Wa&&(Wa=Oa.wheelDelta),{x:za,y:Wa}}function Si(Oa){var za=wi(Oa);return za.x*=ia,za.y*=ia,za}function Li(Oa,za){var Wa=wi(za),Ba=Wa.x,$a=Wa.y,Ua=Oa.display,ja=Ua.scroller,Ka=ja.scrollWidth>ja.clientWidth,Va=ja.scrollHeight>ja.clientHeight;if(Ba&&Ka||$a&&Va){if($a&&ss&&Zl)outer:for(var Ga=za.target,qa=Ua.view;Ga!=ja;Ga=Ga.parentNode)for(var _a=0;_a<qa.length;_a++)if(qa[_a].node==Ga){Oa.display.currentWheelTarget=Ga;break outer}if(Ba&&!Vl&&!es&&null!=ia)return $a&&Va&&zn(Oa,_Mathmax(0,ja.scrollTop+$a*ia)),Bn(Oa,_Mathmax(0,ja.scrollLeft+Ba*ia)),(!$a||$a&&Va)&&mt(za),void(Ua.wheelStartX=null);if($a&&null!=ia){var Xa=$a*ia,Ya=Oa.doc.scrollTop,Za=Ya+Ua.wrapper.clientHeight;0>Xa?Ya=_Mathmax(0,Ya+Xa-50):Za=_Mathmin(Oa.doc.height,Za+Xa+50),yi(Oa,{top:Ya,bottom:Za})}20>na&&(null==Ua.wheelStartX?(Ua.wheelStartX=ja.scrollLeft,Ua.wheelStartY=ja.scrollTop,Ua.wheelDX=Ba,Ua.wheelDY=$a,setTimeout(function(){if(null!=Ua.wheelStartX){var Qa=ja.scrollLeft-Ua.wheelStartX,Ja=ja.scrollTop-Ua.wheelStartY,ed=Ja&&Ua.wheelDY&&Ja/Ua.wheelDY||Qa&&Ua.wheelDX&&Qa/Ua.wheelDX;Ua.wheelStartX=Ua.wheelStartY=null,ed&&(ia=(ia*na+ed)/(na+1),++na)}},200)):(Ua.wheelDX+=Ba,Ua.wheelDY+=$a))}}function Ti(Oa,za){var Wa=Oa[za];Oa.sort(function(Ga,qa){return pe(Ga.from(),qa.from())}),za=O(Oa,Wa);for(var Ba=1;Ba<Oa.length;Ba++){var $a=Oa[Ba],Ua=Oa[Ba-1];if(0<=pe(Ua.to(),$a.from())){var ja=fe(Ua.from(),$a.from()),Ka=ge(Ua.to(),$a.to()),Va=Ua.empty()?$a.from()==$a.head:Ua.from()==Ua.head;Ba<=za&&--za,Oa.splice(--Ba,2,new la(Va?Ka:ja,Va?ja:Ka))}}return new ra(Oa,za)}function Ni(Oa,za){return new ra([new la(Oa,za||Oa)],0)}function Ai(Oa){return Oa.text?ce(Oa.from.line+Oa.text.length-1,B(Oa.text).length+(1==Oa.text.length?Oa.from.ch:0)):Oa.to}function Ii(Oa,za){if(0>pe(Oa,za.from))return Oa;if(0>=pe(Oa,za.to))return Ai(za);var Wa=Oa.line+za.text.length-(za.to.line-za.from.line)-1,Ba=Oa.ch;return Oa.line==za.to.line&&(Ba+=Ai(za).ch-za.to.ch),ce(Wa,Ba)}function Di(Oa,za){for(var Wa=[],Ba=0,$a;Ba<Oa.sel.ranges.length;Ba++)$a=Oa.sel.ranges[Ba],Wa.push(new la(Ii($a.anchor,za),Ii($a.head,za)));return Ti(Wa,Oa.sel.primIndex)}function Hi(Oa,za,Wa){return Oa.line==za.line?ce(Wa.line,Oa.ch-za.ch+Wa.ch):ce(Wa.line+(Oa.line-za.line),Oa.ch)}function Ei(Oa,za,Wa){for(var Ba=[],$a=ce(Oa.first,0),Ua=$a,ja=0;ja<za.length;ja++){var Ka=za[ja],Va=Hi(Ka.from,$a,Ua),Ga=Hi(Ai(Ka),$a,Ua);if($a=Ka.to,Ua=Ga,"around"==Wa){var qa=Oa.sel.ranges[ja],_a=0>pe(qa.head,qa.anchor);Ba[ja]=new la(_a?Ga:Va,_a?Va:Ga)}else Ba[ja]=new la(Va,Va)}return new ra(Ba,Oa.sel.primIndex)}function Mi(Oa){Oa.doc.mode=At(Oa.options,Oa.doc.modeOption),Pi(Oa)}function Pi(Oa){Oa.doc.iter(function(za){za.stateAfter&&(za.stateAfter=null),za.styles&&(za.styles=null)}),Oa.doc.frontier=Oa.doc.first,di(Oa,100),Oa.state.modeGen++,Oa.curOp&&ni(Oa)}function Fi(Oa,za){return 0==za.from.ch&&0==za.to.ch&&""==B(za.text)&&(!Oa.cm||Oa.cm.options.wholeLineUpdateBefore)}function Ri(Oa,za,Wa,Ba){function $a(td){return Wa?Wa[td]:null}function Ua(td,od,nd){jt(td,od,nd,Ba),ao(td,"change",td,za)}function ja(td,od){for(var nd=[],rd=td;rd<od;++rd)nd.push(new Vs(Ga[rd],$a(rd),Ba));return nd}var Ka=za.from,Va=za.to,Ga=za.text,qa=ee(Oa,Ka.line),_a=ee(Oa,Va.line),Xa=B(Ga),Ya=$a(Ga.length-1),Za=Va.line-Ka.line;if(za.full)Oa.insert(0,ja(0,Ga.length)),Oa.remove(Ga.length,Oa.size-Ga.length);else if(Fi(Oa,za)){var Qa=ja(0,Ga.length-1);Ua(_a,_a.text,Ya),Za&&Oa.remove(Ka.line,Za),Qa.length&&Oa.insert(Ka.line,Qa)}else if(qa==_a){if(1==Ga.length)Ua(qa,qa.text.slice(0,Ka.ch)+Xa+qa.text.slice(Va.ch),Ya);else{var Ja=ja(1,Ga.length-1);Ja.push(new Vs(Xa+qa.text.slice(Va.ch),Ya,Ba)),Ua(qa,qa.text.slice(0,Ka.ch)+Ga[0],$a(0)),Oa.insert(Ka.line+1,Ja)}}else if(1==Ga.length)Ua(qa,qa.text.slice(0,Ka.ch)+Ga[0]+_a.text.slice(Va.ch),$a(0)),Oa.remove(Ka.line+1,Za);else{Ua(qa,qa.text.slice(0,Ka.ch)+Ga[0],$a(0)),Ua(_a,Xa+_a.text.slice(Va.ch),Ya);var ed=ja(1,Ga.length-1);1<Za&&Oa.remove(Ka.line+1,Za-1),Oa.insert(Ka.line+1,ed)}ao(Oa,"change",Oa,za)}function Oi(Oa,za,Wa){function Ba($a,Ua,ja){if($a.linked)for(var Ka=0,Va;Ka<$a.linked.length;++Ka)if(Va=$a.linked[Ka],Va.doc!=Ua){var Ga=ja&&Va.sharedHist;(!Wa||Ga)&&(za(Va.doc,Ga),Ba(Va.doc,$a,Ga))}}Ba(Oa,null,!0)}function zi(Oa,za){if(za.cm)throw new Error("This document is already in use.");Oa.doc=za,za.cm=Oa,cn(Oa),Mi(Oa),Wi(Oa),Oa.options.lineWrapping||Qe(Oa),Oa.options.mode=za.modeOption,ni(Oa)}function Wi(Oa){("rtl"==Oa.doc.direction?E:gs)(Oa.display.lineDiv,"CodeMirror-rtl")}function Bi(Oa){Jn(Oa,function(){Wi(Oa),ni(Oa)})}function $i(Oa){this.done=[],this.undone=[],this.undoDepth=Infinity,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=Oa||1}function Ui(Oa,za){var Wa={from:he(za.from),to:Ai(za),text:oe(Oa,za.from,za.to)};return Xi(Oa,Wa,za.from.line,za.to.line+1),Oi(Oa,function(Ba){return Xi(Ba,Wa,za.from.line,za.to.line+1)},!0),Wa}function ji(Oa){for(;Oa.length;){var za=B(Oa);if(za.ranges)Oa.pop();else break}}function Ki(Oa,za){return za?(ji(Oa.done),B(Oa.done)):Oa.done.length&&!B(Oa.done).ranges?B(Oa.done):1<Oa.done.length&&!Oa.done[Oa.done.length-2].ranges?(Oa.done.pop(),B(Oa.done)):void 0}function Vi(Oa,za,Wa,Ba){var $a=Oa.history;$a.undone.length=0;var Ua=+new Date,ja,Ka;if(($a.lastOp==Ba||$a.lastOrigin==za.origin&&za.origin&&("+"==za.origin.charAt(0)&&Oa.cm&&$a.lastModTime>Ua-Oa.cm.options.historyEventDelay||"*"==za.origin.charAt(0)))&&(ja=Ki($a,$a.lastOp==Ba)))Ka=B(ja.changes),0==pe(za.from,za.to)&&0==pe(za.from,Ka.to)?Ka.to=Ai(za):ja.changes.push(Ui(Oa,za));else{var Va=B($a.done);for(Va&&Va.ranges||_i(Oa.sel,$a.done),ja={changes:[Ui(Oa,za)],generation:$a.generation},$a.done.push(ja);$a.done.length>$a.undoDepth;)$a.done.shift(),$a.done[0].ranges||$a.done.shift()}$a.done.push(Wa),$a.generation=++$a.maxGeneration,$a.lastModTime=$a.lastSelTime=Ua,$a.lastOp=$a.lastSelOp=Ba,$a.lastOrigin=$a.lastSelOrigin=za.origin,Ka||pt(Oa,"historyAdded")}function Gi(Oa,za,Wa,Ba){var $a=za.charAt(0);return"*"==$a||"+"==$a&&Wa.ranges.length==Ba.ranges.length&&Wa.somethingSelected()==Ba.somethingSelected()&&new Date-Oa.history.lastSelTime<=(Oa.cm?Oa.cm.options.historyEventDelay:500)}function qi(Oa,za,Wa,Ba){var $a=Oa.history,Ua=Ba&&Ba.origin;Wa==$a.lastSelOp||Ua&&$a.lastSelOrigin==Ua&&($a.lastModTime==$a.lastSelTime&&$a.lastOrigin==Ua||Gi(Oa,Ua,B($a.done),za))?$a.done[$a.done.length-1]=za:_i(za,$a.done),$a.lastSelTime=+new Date,$a.lastSelOrigin=Ua,$a.lastSelOp=Wa,Ba&&!1!==Ba.clearRedo&&ji($a.undone)}function _i(Oa,za){var Wa=B(za);Wa&&Wa.ranges&&Wa.equals(Oa)||za.push(Oa)}function Xi(Oa,za,Wa,Ba){var $a=za["spans_"+Oa.id],Ua=0;Oa.iter(_Mathmax(Oa.first,Wa),_Mathmin(Oa.first+Oa.size,Ba),function(ja){ja.markedSpans&&(($a||($a=za["spans_"+Oa.id]={}))[Ua]=ja.markedSpans),++Ua})}function Yi(Oa){if(!Oa)return null;for(var Wa=0,za;Wa<Oa.length;++Wa)Oa[Wa].marker.explicitlyCleared?za||(za=Oa.slice(0,Wa)):za&&za.push(Oa[Wa]);return za?za.length?za:null:Oa}function Zi(Oa,za){var Wa=za["spans_"+Oa.id];if(!Wa)return null;for(var Ba=[],$a=0;$a<za.text.length;++$a)Ba.push(Yi(Wa[$a]));return Ba}function Qi(Oa,za){var Wa=Zi(Oa,za),Ba=De(Oa,za);if(!Wa)return Ba;if(!Ba)return Wa;for(var $a=0;$a<Wa.length;++$a){var Ua=Wa[$a],ja=Ba[$a];if(Ua&&ja)spans:for(var Ka=0,Va;Ka<ja.length;++Ka){Va=ja[Ka];for(var Ga=0;Ga<Ua.length;++Ga)if(Ua[Ga].marker==Va.marker)continue spans;Ua.push(Va)}else ja&&(Wa[$a]=ja)}return Wa}function Ji(Oa,za,Wa){for(var Ba=[],$a=0,Ua;$a<Oa.length;++$a){if(Ua=Oa[$a],Ua.ranges){Ba.push(Wa?ra.prototype.deepCopy.call(Ua):Ua);continue}var ja=Ua.changes,Ka=[];Ba.push({changes:Ka});for(var Va=0;Va<ja.length;++Va){var Ga=ja[Va],qa=void 0;if(Ka.push({from:Ga.from,to:Ga.to,text:Ga.text}),za)for(var _a in Ga)(qa=_a.match(/^spans_(\d+)$/))&&-1<O(za,+qa[1])&&(B(Ka)[_a]=Ga[_a],delete Ga[_a])}}return Ba}function er(Oa,za,Wa,Ba){if(Oa.cm&&Oa.cm.display.shift||Oa.extend){var $a=za.anchor;if(Ba){var Ua=0>pe(Wa,$a);Ua==0>pe(Ba,$a)?Ua!=0>pe(Wa,Ba)&&(Wa=Ba):($a=Wa,Wa=Ba)}return new la($a,Wa)}return new la(Ba||Wa,Wa)}function tr(Oa,za,Wa,Ba){sr(Oa,new ra([er(Oa,Oa.sel.primary(),za,Wa)],0),Ba)}function or(Oa,za,Wa){for(var Ba=[],$a=0;$a<Oa.sel.ranges.length;$a++)Ba[$a]=er(Oa,Oa.sel.ranges[$a],za[$a],null);var Ua=Ti(Ba,Oa.sel.primIndex);sr(Oa,Ua,Wa)}function nr(Oa,za,Wa,Ba){var $a=Oa.sel.ranges.slice(0);$a[za]=Wa,sr(Oa,Ti($a,Oa.sel.primIndex),Ba)}function ir(Oa,za,Wa,Ba){sr(Oa,Ni(za,Wa),Ba)}function rr(Oa,za,Wa){var Ba={ranges:za.ranges,update:function($a){var Ua=this;this.ranges=[];for(var ja=0;ja<$a.length;ja++)Ua.ranges[ja]=new la(ve(Oa,$a[ja].anchor),ve(Oa,$a[ja].head))},origin:Wa&&Wa.origin};return pt(Oa,"beforeSelectionChange",Oa,Ba),Oa.cm&&pt(Oa.cm,"beforeSelectionChange",Oa.cm,Ba),Ba.ranges==za.ranges?za:Ti(Ba.ranges,Ba.ranges.length-1)}function lr(Oa,za,Wa){var Ba=Oa.history.done,$a=B(Ba);$a&&$a.ranges?(Ba[Ba.length-1]=za,ar(Oa,za,Wa)):sr(Oa,za,Wa)}function sr(Oa,za,Wa){ar(Oa,za,Wa),qi(Oa,Oa.sel,Oa.cm?Oa.cm.curOp.id:NaN,Wa)}function ar(Oa,za,Wa){(gt(Oa,"beforeSelectionChange")||Oa.cm&&gt(Oa.cm,"beforeSelectionChange"))&&(za=rr(Oa,za,Wa));var Ba=Wa&&Wa.bias||(0>pe(za.primary().head,Oa.sel.primary().head)?-1:1);dr(Oa,pr(Oa,za,Ba,!0)),!(Wa&&!1===Wa.scroll)&&Oa.cm&&Mn(Oa.cm)}function dr(Oa,za){za.equals(Oa.sel)||(Oa.sel=za,Oa.cm&&(Oa.cm.curOp.updateInput=Oa.cm.curOp.selectionChanged=!0,ht(Oa.cm)),ao(Oa,"cursorActivity",Oa))}function cr(Oa){dr(Oa,pr(Oa,Oa.sel,null,!1))}function pr(Oa,za,Wa,Ba){for(var Ua=0,$a;Ua<za.ranges.length;Ua++){var ja=za.ranges[Ua],Ka=za.ranges.length==Oa.sel.ranges.length&&Oa.sel.ranges[Ua],Va=hr(Oa,ja.anchor,Ka&&Ka.anchor,Wa,Ba),Ga=hr(Oa,ja.head,Ka&&Ka.head,Wa,Ba);($a||Va!=ja.anchor||Ga!=ja.head)&&(!$a&&($a=za.ranges.slice(0,Ua)),$a[Ua]=new la(Va,Ga))}return $a?Ti($a,za.primIndex):za}function ur(Oa,za,Wa,Ba,$a){var Ua=ee(Oa,za.line);if(Ua.markedSpans)for(var ja=0;ja<Ua.markedSpans.length;++ja){var Ka=Ua.markedSpans[ja],Va=Ka.marker;if((null==Ka.from||(Va.inclusiveLeft?Ka.from<=za.ch:Ka.from<za.ch))&&(null==Ka.to||(Va.inclusiveRight?Ka.to>=za.ch:Ka.to>za.ch))){if($a&&(pt(Va,"beforeCursorEnter"),Va.explicitlyCleared))if(!Ua.markedSpans)break;else{--ja;continue}if(!Va.atomic)continue;if(Wa){var Ga=Va.find(0>Ba?1:-1),qa=void 0;if((0>Ba?Va.inclusiveRight:Va.inclusiveLeft)&&(Ga=gr(Oa,Ga,-Ba,Ga&&Ga.line==za.line?Ua:null)),Ga&&Ga.line==za.line&&(qa=pe(Ga,Wa))&&(0>Ba?0>qa:0<qa))return ur(Oa,Ga,za,Ba,$a)}var _a=Va.find(0>Ba?-1:1);return(0>Ba?Va.inclusiveLeft:Va.inclusiveRight)&&(_a=gr(Oa,_a,Ba,_a.line==za.line?Ua:null)),_a?ur(Oa,_a,za,Ba,$a):null}}return za}function hr(Oa,za,Wa,Ba,$a){var Ua=Ba||1,ja=ur(Oa,za,Wa,Ua,$a)||!$a&&ur(Oa,za,Wa,Ua,!0)||ur(Oa,za,Wa,-Ua,$a)||!$a&&ur(Oa,za,Wa,-Ua,!0);return ja?ja:(Oa.cantEdit=!0,ce(Oa.first,0))}function gr(Oa,za,Wa,Ba){return 0>Wa&&0==za.ch?za.line>Oa.first?ve(Oa,ce(za.line-1)):null:0<Wa&&za.ch==(Ba||ee(Oa,za.line)).text.length?za.line<Oa.first+Oa.size-1?ce(za.line+1,0):null:new ce(za.line,za.ch+Wa)}function fr(Oa){Oa.setSelection(ce(Oa.firstLine(),0),ce(Oa.lastLine()),xs)}function mr(Oa,za,Wa){var Ba={canceled:!1,from:za.from,to:za.to,text:za.text,origin:za.origin,cancel:function(){return Ba.canceled=!0}};return Wa&&(Ba.update=function($a,Ua,ja,Ka){$a&&(Ba.from=ve(Oa,$a)),Ua&&(Ba.to=ve(Oa,Ua)),ja&&(Ba.text=ja),void 0!==Ka&&(Ba.origin=Ka)}),pt(Oa,"beforeChange",Oa,Ba),Oa.cm&&pt(Oa.cm,"beforeChange",Oa.cm,Ba),Ba.canceled?null:{from:Ba.from,to:Ba.to,text:Ba.text,origin:Ba.origin}}function yr(Oa,za,Wa){if(Oa.cm){if(!Oa.cm.curOp)return ei(Oa.cm,yr)(Oa,za,Wa);if(Oa.cm.state.suppressEdits)return}if(!((gt(Oa,"beforeChange")||Oa.cm&&gt(Oa.cm,"beforeChange"))&&(za=mr(Oa,za,!0),!za))){var Ba=As&&!Wa&&Ee(Oa,za.from,za.to);if(Ba)for(var $a=Ba.length-1;0<=$a;--$a)vr(Oa,{from:Ba[$a].from,to:Ba[$a].to,text:$a?[""]:za.text});else vr(Oa,za)}}function vr(Oa,za){if(1!=za.text.length||""!=za.text[0]||0!=pe(za.from,za.to)){var Wa=Di(Oa,za);Vi(Oa,za,Wa,Oa.cm?Oa.cm.curOp.id:NaN),xr(Oa,za,Wa,De(Oa,za));var Ba=[];Oi(Oa,function($a,Ua){Ua||-1!=O(Ba,$a.history)||(Tr($a.history,za),Ba.push($a.history)),xr($a,za,null,De($a,za))})}}function br(Oa,za,Wa){if(!(Oa.cm&&Oa.cm.state.suppressEdits&&!Wa)){for(var Ba=Oa.history,Ua=Oa.sel,ja="undo"==za?Ba.done:Ba.undone,Ka="undo"==za?Ba.undone:Ba.done,Va=0,$a;Va<ja.length&&($a=ja[Va],Wa?!$a.ranges||$a.equals(Oa.sel):!!$a.ranges);Va++);if(Va!=ja.length){for(Ba.lastOrigin=Ba.lastSelOrigin=null;;)if($a=ja.pop(),$a.ranges){if(_i($a,Ka),Wa&&!$a.equals(Oa.sel))return void sr(Oa,$a,{clearRedo:!1});Ua=$a}else break;var Ga=[];_i(Ua,Ka),Ka.push({changes:Ga,generation:Ba.generation}),Ba.generation=$a.generation||++Ba.maxGeneration;for(var qa=gt(Oa,"beforeChange")||Oa.cm&&gt(Oa.cm,"beforeChange"),_a=function(Za){var Qa=$a.changes[Za];if(Qa.origin=za,qa&&!mr(Oa,Qa,!1))return ja.length=0,{};Ga.push(Ui(Oa,Qa));var Ja=Za?Di(Oa,Qa):B(ja);xr(Oa,Qa,Ja,Qi(Oa,Qa)),!Za&&Oa.cm&&Oa.cm.scrollIntoView({from:Qa.from,to:Ai(Qa)});var ed=[];Oi(Oa,function(td,od){od||-1!=O(ed,td.history)||(Tr(td.history,Qa),ed.push(td.history)),xr(td,Qa,null,Qi(td,Qa))})},Xa=$a.changes.length-1,Ya;0<=Xa;--Xa)if(Ya=_a(Xa),Ya)return Ya.v}}}function Cr(Oa,za){if(0!=za&&(Oa.first+=za,Oa.sel=new ra(U(Oa.sel.ranges,function($a){return new la(ce($a.anchor.line+za,$a.anchor.ch),ce($a.head.line+za,$a.head.ch))}),Oa.sel.primIndex),Oa.cm)){ni(Oa.cm,Oa.first,Oa.first-za,za);for(var Wa=Oa.cm.display,Ba=Wa.viewFrom;Ba<Wa.viewTo;Ba++)ii(Oa.cm,Ba,"gutter")}}function xr(Oa,za,Wa,Ba){if(Oa.cm&&!Oa.cm.curOp)return ei(Oa.cm,xr)(Oa,za,Wa,Ba);if(za.to.line<Oa.first)return void Cr(Oa,za.text.length-1-(za.to.line-za.from.line));if(!(za.from.line>Oa.lastLine())){if(za.from.line<Oa.first){var $a=za.text.length-1-(Oa.first-za.from.line);Cr(Oa,$a),za={from:ce(Oa.first,0),to:ce(za.to.line+$a,za.to.ch),text:[B(za.text)],origin:za.origin}}var Ua=Oa.lastLine();za.to.line>Ua&&(za={from:za.from,to:ce(Ua,ee(Oa,Ua).text.length),text:[za.text[0]],origin:za.origin}),za.removed=oe(Oa,za.from,za.to),Wa||(Wa=Di(Oa,za)),Oa.cm?kr(Oa.cm,za,Ba):Ri(Oa,za,Ba),ar(Oa,Wa,xs)}}function kr(Oa,za,Wa){var Ba=Oa.doc,$a=Oa.display,Ua=za.from,ja=za.to,Ka=!1,Va=Ua.line;Oa.options.lineWrapping||(Va=le(Ue(ee(Ba,Ua.line))),Ba.iter(Va,ja.line+1,function(Ya){if(Ya==$a.maxLine)return Ka=!0,!0})),-1<Ba.sel.contains(za.from,za.to)&&ht(Oa),Ri(Ba,za,Wa,dn(Oa)),Oa.options.lineWrapping||(Ba.iter(Va,Ua.line+za.text.length,function(Ya){var Za=Ze(Ya);Za>$a.maxLineLength&&($a.maxLine=Ya,$a.maxLineLength=Za,$a.maxLineChanged=!0,Ka=!1)}),Ka&&(Oa.curOp.updateMaxLine=!0)),Ba.frontier=_Mathmin(Ba.frontier,Ua.line),di(Oa,400);var Ga=za.text.length-(ja.line-Ua.line)-1;za.full?ni(Oa):Ua.line!=ja.line||1!=za.text.length||Fi(Oa.doc,za)?ni(Oa,Ua.line,ja.line+1,Ga):ii(Oa,Ua.line,"text");var qa=gt(Oa,"changes"),_a=gt(Oa,"change");if(_a||qa){var Xa={from:Ua,to:ja,text:za.text,removed:za.removed,origin:za.origin};_a&&ao(Oa,"change",Oa,Xa),qa&&(Oa.curOp.changeObjs||(Oa.curOp.changeObjs=[])).push(Xa)}Oa.display.selForContextMenu=null}function wr(Oa,za,Wa,Ba,$a){if(Ba||(Ba=Wa),0>pe(Ba,Wa)){var Ua=Ba;Ba=Wa,Wa=Ua}"string"==typeof za&&(za=Oa.splitLines(za)),yr(Oa,{from:Wa,to:Ba,text:za,origin:$a})}function Sr(Oa,za,Wa,Ba){Wa<Oa.line?Oa.line+=Ba:za<Oa.line&&(Oa.line=za,Oa.ch=0)}function Lr(Oa,za,Wa,Ba){for(var $a=0;$a<Oa.length;++$a){var Ua=Oa[$a],ja=!0;if(Ua.ranges){Ua.copied||(Ua=Oa[$a]=Ua.deepCopy(),Ua.copied=!0);for(var Ka=0;Ka<Ua.ranges.length;Ka++)Sr(Ua.ranges[Ka].anchor,za,Wa,Ba),Sr(Ua.ranges[Ka].head,za,Wa,Ba);continue}for(var Va=0,Ga;Va<Ua.changes.length;++Va)if(Ga=Ua.changes[Va],Wa<Ga.from.line)Ga.from=ce(Ga.from.line+Ba,Ga.from.ch),Ga.to=ce(Ga.to.line+Ba,Ga.to.ch);else if(za<=Ga.to.line){ja=!1;break}ja||(Oa.splice(0,$a+1),$a=0)}}function Tr(Oa,za){var Wa=za.from.line,Ba=za.to.line,$a=za.text.length-(Ba-Wa)-1;Lr(Oa.done,Wa,Ba,$a),Lr(Oa.undone,Wa,Ba,$a)}function Nr(Oa,za,Wa,Ba){var $a=za,Ua=za;return("number"==typeof za?Ua=ee(Oa,ye(Oa,za)):$a=le(za),null==$a)?null:(Ba(Ua,$a)&&Oa.cm&&ii(Oa.cm,$a,Wa),Ua)}function Ar(Oa,za,Wa){Ye(za)<(Oa.curOp&&Oa.curOp.scrollTop||Oa.doc.scrollTop)&&En(Oa,Wa)}function Ir(Oa,za,Wa,Ba){var $a=new da(Oa,Wa,Ba),Ua=Oa.cm;return Ua&&$a.noHScroll&&(Ua.display.alignWidgets=!0),Nr(Oa,za,"widget",function(ja){var Ka=ja.widgets||(ja.widgets=[]);if(null==$a.insertAt?Ka.push($a):Ka.splice(_Mathmin(Ka.length-1,_Mathmax(0,$a.insertAt)),0,$a),$a.line=ja,Ua&&!qe(Oa,ja)){var Va=Ye(ja)<Oa.scrollTop;re(ja,ja.height+wo($a)),Va&&En(Ua,$a.height),Ua.curOp.forceUpdate=!0}return!0}),ao(Ua,"lineWidgetAdded",Ua,$a,"number"==typeof za?za:le(za)),$a}function Dr(Oa,za,Wa,Ba,$a){if(Ba&&Ba.shared)return Hr(Oa,za,Wa,Ba,$a);if(Oa.cm&&!Oa.cm.curOp)return ei(Oa.cm,Dr)(Oa,za,Wa,Ba,$a);var Ua=new pa(Oa,$a),ja=pe(za,Wa);if(Ba&&F(Ba,Ua,!1),0<ja||0==ja&&!1!==Ua.clearWhenEmpty)return Ua;if(Ua.replacedWith&&(Ua.collapsed=!0,Ua.widgetNode=I("span",[Ua.replacedWith],"CodeMirror-widget"),!Ba.handleMouseEvents&&Ua.widgetNode.setAttribute("cm-ignore-events","true"),Ba.insertLeft&&(Ua.widgetNode.insertLeft=!0)),Ua.collapsed){if($e(Oa,za.line,za,Wa,Ua)||za.line!=Wa.line&&$e(Oa,Wa.line,za,Wa,Ua))throw new Error("Inserting collapsed marker partially overlapping an existing one");ke()}Ua.addToHistory&&Vi(Oa,{from:za,to:Wa,origin:"markText"},Oa.sel,NaN);var Ka=za.line,Va=Oa.cm,Ga;if(Oa.iter(Ka,Wa.line+1,function(_a){Va&&Ua.collapsed&&!Va.options.lineWrapping&&Ue(_a)==Va.display.maxLine&&(Ga=!0),Ua.collapsed&&Ka!=za.line&&re(_a,0),Ne(_a,new Se(Ua,Ka==za.line?za.ch:null,Ka==Wa.line?Wa.ch:null)),++Ka}),Ua.collapsed&&Oa.iter(za.line,Wa.line+1,function(_a){qe(Oa,_a)&&re(_a,0)}),Ua.clearOnEnter&&Ms(Ua,"beforeCursorEnter",function(){return Ua.clear()}),Ua.readOnly&&(xe(),(Oa.history.done.length||Oa.history.undone.length)&&Oa.clearHistory()),Ua.collapsed&&(Ua.id=++ca,Ua.atomic=!0),Va){if(Ga&&(Va.curOp.updateMaxLine=!0),Ua.collapsed)ni(Va,za.line,Wa.line+1);else if(Ua.className||Ua.title||Ua.startStyle||Ua.endStyle||Ua.css)for(var qa=za.line;qa<=Wa.line;qa++)ii(Va,qa,"text");Ua.atomic&&cr(Va.doc),ao(Va,"markerAdded",Va,Ua)}return Ua}function Hr(Oa,za,Wa,Ba,$a){Ba=F(Ba),Ba.shared=!1;var Ua=[Dr(Oa,za,Wa,Ba,$a)],ja=Ua[0],Ka=Ba.widgetNode;return Oi(Oa,function(Va){Ka&&(Ba.widgetNode=Ka.cloneNode(!0)),Ua.push(Dr(Va,ve(Va,za),ve(Va,Wa),Ba,$a));for(var Ga=0;Ga<Va.linked.length;++Ga)if(Va.linked[Ga].isParent)return;ja=B(Ua)}),new ua(Ua,ja)}function Er(Oa){return Oa.findMarks(ce(Oa.first,0),Oa.clipPos(ce(Oa.lastLine())),function(za){return za.parent})}function Mr(Oa,za){for(var Wa=0;Wa<za.length;Wa++){var Ba=za[Wa],$a=Ba.find(),Ua=Oa.clipPos($a.from),ja=Oa.clipPos($a.to);if(pe(Ua,ja)){var Ka=Dr(Oa,Ua,ja,Ba.primary,Ba.primary.type);Ba.markers.push(Ka),Ka.parent=Ba}}}function Pr(Oa){for(var za=function(Ba){var $a=Oa[Ba],Ua=[$a.primary.doc];Oi($a.primary.doc,function(Va){return Ua.push(Va)});for(var ja=0,Ka;ja<$a.markers.length;ja++)Ka=$a.markers[ja],-1==O(Ua,Ka.doc)&&(Ka.parent=null,$a.markers.splice(ja--,1))},Wa=0;Wa<Oa.length;Wa++)za(Wa)}function Fr(Oa){var za=this;if(zr(za),!(ut(za,Oa)||So(za.display,Oa))){mt(Oa),Xl&&(fa=+new Date);var Wa=pn(za,Oa,!0),Ba=Oa.dataTransfer.files;if(Wa&&!za.isReadOnly())if(Ba&&Ba.length&&window.FileReader&&window.File)for(var $a=Ba.length,Ua=Array($a),ja=0,Ka=function(Xa,Ya){if(!(za.options.allowDropFileTypes&&-1==O(za.options.allowDropFileTypes,Xa.type))){var Za=new FileReader;Za.onload=ei(za,function(){var Qa=Za.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(Qa)&&(Qa=""),Ua[Ya]=Qa,++ja==$a){Wa=ve(za.doc,Wa);var Ja={from:Wa,to:Wa,text:za.doc.splitLines(Ua.join(za.doc.lineSeparator())),origin:"paste"};yr(za.doc,Ja),lr(za.doc,Ni(Wa,Ai(Ja)))}}),Za.readAsText(Xa)}},Va=0;Va<$a;++Va)Ka(Ba[Va],Va);else{if(za.state.draggingText&&-1<za.doc.sel.contains(Wa))return za.state.draggingText(Oa),void setTimeout(function(){return za.display.input.focus()},20);try{var Ga=Oa.dataTransfer.getData("Text");if(Ga){var qa;if(za.state.draggingText&&!za.state.draggingText.copy&&(qa=za.listSelections()),ar(za.doc,Ni(Wa,Wa)),qa)for(var _a=0;_a<qa.length;++_a)wr(za.doc,"",qa[_a].anchor,qa[_a].head,"drag");za.replaceSelection(Ga,"around","paste"),za.display.input.focus()}}catch(Xa){}}}}function Rr(Oa,za){if(Xl&&(!Oa.state.draggingText||100>+new Date-fa))return void bt(za);if(!(ut(Oa,za)||So(Oa.display,za))&&(za.dataTransfer.setData("Text",Oa.getSelection()),za.dataTransfer.effectAllowed="copyMove",za.dataTransfer.setDragImage&&!ts)){var Wa=A("img",null,null,"position: fixed; left: 0; top: 0;");Wa.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",es&&(Wa.width=Wa.height=1,Oa.display.wrapper.appendChild(Wa),Wa._top=Wa.offsetTop),za.dataTransfer.setDragImage(Wa,0,0),es&&Wa.parentNode.removeChild(Wa)}}function Or(Oa,za){var Wa=pn(Oa,za);if(Wa){var Ba=document.createDocumentFragment();mn(Oa,Wa,Ba),Oa.display.dragCursor||(Oa.display.dragCursor=A("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),Oa.display.lineSpace.insertBefore(Oa.display.dragCursor,Oa.display.cursorDiv)),N(Oa.display.dragCursor,Ba)}}function zr(Oa){Oa.display.dragCursor&&(Oa.display.lineSpace.removeChild(Oa.display.dragCursor),Oa.display.dragCursor=null)}function Wr(Oa){if(document.body.getElementsByClassName)for(var za=document.body.getElementsByClassName("CodeMirror"),Wa=0,Ba;Wa<za.length;Wa++)Ba=za[Wa].CodeMirror,Ba&&Oa(Ba)}function Br(){ma||($r(),ma=!0)}function $r(){var Oa;Ms(window,"resize",function(){null==Oa&&(Oa=setTimeout(function(){Oa=null,Wr(Ur)},100))}),Ms(window,"blur",function(){return Wr(kn)})}function Ur(Oa){var za=Oa.display;za.lastWrapHeight==za.wrapper.clientHeight&&za.lastWrapWidth==za.wrapper.clientWidth||(za.cachedCharWidth=za.cachedTextHeight=za.cachedPaddingH=null,za.scrollbarsClipped=!1,Oa.setSize())}function jr(Oa){var za=Oa.split(/-(?!$)/);Oa=za[za.length-1];for(var ja=0,Wa,Ba,$a,Ua,Ka;ja<za.length-1;ja++)if(Ka=za[ja],/^(cmd|meta|m)$/i.test(Ka))Ua=!0;else if(/^a(lt)?$/i.test(Ka))Wa=!0;else if(/^(c|ctrl|control)$/i.test(Ka))Ba=!0;else if(/^s(hift)?$/i.test(Ka))$a=!0;else throw new Error("Unrecognized modifier name: "+Ka);return Wa&&(Oa="Alt-"+Oa),Ba&&(Oa="Ctrl-"+Oa),Ua&&(Oa="Cmd-"+Oa),$a&&(Oa="Shift-"+Oa),Oa}function Kr(Oa){var za={};for(var Wa in Oa)if(Oa.hasOwnProperty(Wa)){var Ba=Oa[Wa];if(/^(name|fallthrough|(de|at)tach)$/.test(Wa))continue;if("..."==Ba){delete Oa[Wa];continue}for(var $a=U(Wa.split(" "),jr),Ua=0;Ua<$a.length;Ua++){var ja=void 0,Ka=void 0;Ua==$a.length-1?(Ka=$a.join(" "),ja=Ba):(Ka=$a.slice(0,Ua+1).join(" "),ja="...");var Va=za[Ka];if(!Va)za[Ka]=ja;else if(Va!=ja)throw new Error("Inconsistent bindings for "+Ka)}delete Oa[Wa]}for(var Ga in za)Oa[Ga]=za[Ga];return Oa}function Vr(Oa,za,Wa,Ba){za=_r(za);var $a=za.call?za.call(Oa,Ba):za[Oa];if(!1===$a)return"nothing";if("..."===$a)return"multi";if(null!=$a&&Wa($a))return"handled";if(za.fallthrough){if("[object Array]"!=Object.prototype.toString.call(za.fallthrough))return Vr(Oa,za.fallthrough,Wa,Ba);for(var Ua=0,ja;Ua<za.fallthrough.length;Ua++)if(ja=Vr(Oa,za.fallthrough[Ua],Wa,Ba),ja)return ja}}function Gr(Oa){var za="string"==typeof Oa?Oa:ya[Oa.keyCode];return"Ctrl"==za||"Alt"==za||"Shift"==za||"Mod"==za}function qr(Oa,za){if(es&&34==Oa.keyCode&&Oa.char)return!1;var Wa=ya[Oa.keyCode],Ba=Wa;return null==Ba||Oa.altGraphKey?!1:(Oa.altKey&&"Alt"!=Wa&&(Ba="Alt-"+Ba),(us?Oa.metaKey:Oa.ctrlKey)&&"Ctrl"!=Wa&&(Ba="Ctrl-"+Ba),(us?Oa.ctrlKey:Oa.metaKey)&&"Cmd"!=Wa&&(Ba="Cmd-"+Ba),!za&&Oa.shiftKey&&"Shift"!=Wa&&(Ba="Shift-"+Ba),Ba)}function _r(Oa){return"string"==typeof Oa?xa[Oa]:Oa}function Xr(Oa,za){for(var Wa=Oa.doc.sel.ranges,Ba=[],$a=0,Ua;$a<Wa.length;$a++){for(Ua=za(Wa[$a]);Ba.length&&0>=pe(Ua.from,B(Ba).to);){var ja=Ba.pop();if(0>pe(ja.from,Ua.from)){Ua.from=ja.from;break}}Ba.push(Ua)}Jn(Oa,function(){for(var Ka=Ba.length-1;0<=Ka;Ka--)wr(Oa.doc,"",Ba[Ka].from,Ba[Ka].to,"+delete");Mn(Oa)})}function Yr(Oa,za){var Wa=ee(Oa.doc,za),Ba=Ue(Wa);return Ba!=Wa&&(za=le(Ba)),it(!0,Oa,Ba,za,1)}function Zr(Oa,za){var Wa=ee(Oa.doc,za),Ba=je(Wa);return Ba!=Wa&&(za=le(Ba)),it(!0,Oa,Wa,za,-1)}function Qr(Oa,za){var Wa=Yr(Oa,za.line),Ba=ee(Oa.doc,Wa.line),$a=tt(Ba,Oa.doc.direction);if(!$a||0==$a[0].level){var Ua=_Mathmax(0,Ba.text.search(/\S/)),ja=za.line==Wa.line&&za.ch<=Ua&&za.ch;return ce(Wa.line,ja?0:Ua,Wa.sticky)}return Wa}function Jr(Oa,za,Wa){if("string"==typeof za&&(za=ka[za],!za))return!1;Oa.display.input.ensurePolled();var Ba=Oa.display.shift,$a=!1;try{Oa.isReadOnly()&&(Oa.state.suppressEdits=!0),Wa&&(Oa.display.shift=!1),$a=za(Oa)!=Cs}finally{Oa.display.shift=Ba,Oa.state.suppressEdits=!1}return $a}function tl(Oa,za,Wa){for(var Ba=0,$a;Ba<Oa.state.keyMaps.length;Ba++)if($a=Vr(za,Oa.state.keyMaps[Ba],Wa,Oa),$a)return $a;return Oa.options.extraKeys&&Vr(za,Oa.options.extraKeys,Wa,Oa)||Vr(za,Oa.options.keyMap,Wa,Oa)}function ol(Oa,za,Wa,Ba){var $a=Oa.state.keySeq;if($a){if(Gr(za))return"handled";wa.set(50,function(){Oa.state.keySeq==$a&&(Oa.state.keySeq=null,Oa.display.input.reset())}),za=$a+" "+za}var Ua=tl(Oa,za,Ba);return"multi"==Ua&&(Oa.state.keySeq=za),"handled"==Ua&&ao(Oa,"keyHandled",Oa,za,Wa),("handled"==Ua||"multi"==Ua)&&(mt(Wa),vn(Oa)),$a&&!Ua&&/\'$/.test(za)?(mt(Wa),!0):!!Ua}function il(Oa,za){var Wa=qr(za,!0);return!!Wa&&(za.shiftKey&&!Oa.state.keySeq?ol(Oa,"Shift-"+Wa,za,function(Ba){return Jr(Oa,Ba,!0)})||ol(Oa,Wa,za,function(Ba){if("string"==typeof Ba?/^go[A-Z]/.test(Ba):Ba.motion)return Jr(Oa,Ba)}):ol(Oa,Wa,za,function(Ba){return Jr(Oa,Ba)}))}function rl(Oa,za,Wa){return ol(Oa,"'"+Wa+"'",za,function(Ba){return Jr(Oa,Ba,!0)})}function ll(Oa){var za=this;if(za.curOp.focus=H(),!ut(za,Oa)){Xl&&11>Yl&&27==Oa.keyCode&&(Oa.returnValue=!1);var Wa=Oa.keyCode;za.display.shift=16==Wa||Oa.shiftKey;var Ba=il(za,Oa);es&&(Sa=Ba?Wa:null,!Ba&&88==Wa&&!Ws&&(ss?Oa.metaKey:Oa.ctrlKey)&&za.replaceSelection("",null,"cut")),18!=Wa||/\bCodeMirror-crosshair\b/.test(za.display.lineDiv.className)||sl(za)}}function sl(Oa){function za(Ba){18!=Ba.keyCode&&Ba.altKey||(gs(Wa,"CodeMirror-crosshair"),ct(document,"keyup",za),ct(document,"mouseover",za))}var Wa=Oa.display.lineDiv;E(Wa,"CodeMirror-crosshair"),Ms(document,"keyup",za),Ms(document,"mouseover",za)}function al(Oa){16==Oa.keyCode&&(this.doc.sel.shift=!1),ut(this,Oa)}function dl(Oa){var za=this;if(!(So(za.display,Oa)||ut(za,Oa)||Oa.ctrlKey&&!Oa.altKey||ss&&Oa.metaKey)){var Wa=Oa.keyCode,Ba=Oa.charCode;if(es&&Wa==Sa)return Sa=null,void mt(Oa);if(!(es&&(!Oa.which||10>Oa.which)&&il(za,Oa))){var $a=_StringfromCharCode(null==Ba?Wa:Ba);"\b"==$a||rl(za,Oa,$a)||za.display.input.onKeyPress(Oa)}}}function cl(Oa){var za=this,Wa=za.display;if(!(ut(za,Oa)||Wa.activeTouch&&Wa.input.supportsTouch())){if(Wa.input.ensurePolled(),Wa.shift=Oa.shiftKey,So(Wa,Oa))return void(Zl||(Wa.scroller.draggable=!1,setTimeout(function(){return Wa.scroller.draggable=!0},100)));if(!fl(za,Oa)){var Ba=pn(za,Oa);switch(window.focus(),xt(Oa)){case 1:za.state.selectingText?za.state.selectingText(Oa):Ba?pl(za,Oa,Ba):Ct(Oa)==Wa.scroller&&mt(Oa);break;case 2:Zl&&(za.state.lastMiddleDown=+new Date),Ba&&tr(za.doc,Ba),setTimeout(function(){return Wa.input.focus()},20),mt(Oa);break;case 3:hs?ml(za,Oa):Cn(za);}}}}function pl(Oa,za,Wa){Xl?setTimeout(P(bn,Oa),0):Oa.curOp.focus=H();var Ba=+new Date,$a;Ta&&Ta.time>Ba-400&&0==pe(Ta.pos,Wa)?$a="triple":La&&La.time>Ba-400&&0==pe(La.pos,Wa)?($a="double",Ta={time:Ba,pos:Wa}):($a="single",La={time:Ba,pos:Wa});var Ua=Oa.doc.sel,ja=ss?za.metaKey:za.ctrlKey,Ka;Oa.options.dragDrop&&Ps&&!Oa.isReadOnly()&&"single"==$a&&-1<(Ka=Ua.contains(Wa))&&(0>pe((Ka=Ua.ranges[Ka]).from(),Wa)||0<Wa.xRel)&&(0<pe(Ka.to(),Wa)||0>Wa.xRel)?ul(Oa,za,Wa,ja):hl(Oa,za,Wa,$a,ja)}function ul(Oa,za,Wa,Ba){var $a=Oa.display,Ua=!1,ja=ei(Oa,function(Ga){Zl&&($a.scroller.draggable=!1),Oa.state.draggingText=!1,ct(document,"mouseup",ja),ct(document,"mousemove",Ka),ct($a.scroller,"dragstart",Va),ct($a.scroller,"drop",ja),Ua||(mt(Ga),!Ba&&tr(Oa.doc,Wa),Zl||Xl&&9==Yl?setTimeout(function(){document.body.focus(),$a.input.focus()},20):$a.input.focus())}),Ka=function(Ga){Ua=Ua||10<=_Mathabs(za.clientX-Ga.clientX)+_Mathabs(za.clientY-Ga.clientY)},Va=function(){return Ua=!0};Zl&&($a.scroller.draggable=!0),Oa.state.draggingText=ja,ja.copy=ss?za.altKey:za.ctrlKey,$a.scroller.dragDrop&&$a.scroller.dragDrop(),Ms(document,"mouseup",ja),Ms(document,"mousemove",Ka),Ms($a.scroller,"dragstart",Va),Ms($a.scroller,"drop",ja),Cn(Oa),setTimeout(function(){return $a.input.focus()},20)}function hl(Oa,za,Wa,Ba,$a){function Ua(rd){if(0!=pe(Ja,rd))if(Ja=rd,"rect"==Ba){for(var ld=[],sd=Oa.options.tabSize,ad=R(ee(Ga,Wa.line).text,Wa.ch,sd),dd=R(ee(Ga,rd.line).text,rd.ch,sd),cd=_Mathmin(ad,dd),pd=_Mathmax(ad,dd),ud=_Mathmin(Wa.line,rd.line),hd=_Mathmin(Oa.lastLine(),_Mathmax(Wa.line,rd.line));ud<=hd;ud++){var gd=ee(Ga,ud).text,fd=z(gd,cd,sd);cd==pd?ld.push(new la(ce(ud,fd),ce(ud,fd))):gd.length>fd&&ld.push(new la(ce(ud,fd),ce(ud,z(gd,pd,sd))))}ld.length||ld.push(new la(Wa,Wa)),sr(Ga,Ti(Xa.ranges.slice(0,_a).concat(ld),_a),{origin:"*mouse",scroll:!1}),Oa.scrollIntoView(rd)}else{var md=qa,yd=md.anchor,vd=rd;if("single"!=Ba){var bd;bd="double"==Ba?Oa.findWordAt(rd):new la(ce(rd.line,0),ve(Ga,ce(rd.line+1,0))),0<pe(bd.anchor,yd)?(vd=bd.head,yd=fe(md.from(),bd.anchor)):(vd=bd.anchor,yd=ge(md.to(),bd.head))}var Cd=Xa.ranges.slice(0);Cd[_a]=new la(ve(Ga,yd),vd),sr(Ga,Ti(Cd,_a),ks)}}function ja(rd){var ld=++td,sd=pn(Oa,rd,!0,"rect"==Ba);if(sd)if(0!=pe(sd,Ja)){Oa.curOp.focus=H(),Ua(sd);var ad=Ln(Va,Ga);(sd.line>=ad.to||sd.line<ad.from)&&setTimeout(ei(Oa,function(){td==ld&&ja(rd)}),150)}else{var dd=rd.clientY<ed.top?-20:rd.clientY>ed.bottom?20:0;dd&&setTimeout(ei(Oa,function(){td!=ld||(Va.scroller.scrollTop+=dd,ja(rd))}),50)}}function Ka(rd){Oa.state.selectingText=!1,td=Infinity,mt(rd),Va.input.focus(),ct(document,"mousemove",od),ct(document,"mouseup",nd),Ga.history.lastSelOrigin=null}var Va=Oa.display,Ga=Oa.doc;mt(za);var Xa=Ga.sel,Ya=Xa.ranges,qa,_a;if($a&&!za.shiftKey?(_a=Ga.sel.contains(Wa),qa=-1<_a?Ya[_a]:new la(Wa,Wa)):(qa=Ga.sel.primary(),_a=Ga.sel.primIndex),ds?za.shiftKey&&za.metaKey:za.altKey)Ba="rect",$a||(qa=new la(Wa,Wa)),Wa=pn(Oa,za,!0,!0),_a=-1;else if("double"==Ba){var Za=Oa.findWordAt(Wa);qa=Oa.display.shift||Ga.extend?er(Ga,qa,Za.anchor,Za.head):Za}else if("triple"==Ba){var Qa=new la(ce(Wa.line,0),ve(Ga,ce(Wa.line+1,0)));qa=Oa.display.shift||Ga.extend?er(Ga,qa,Qa.anchor,Qa.head):Qa}else qa=er(Ga,qa,Wa);$a?-1==_a?(_a=Ya.length,sr(Ga,Ti(Ya.concat([qa]),_a),{scroll:!1,origin:"*mouse"})):1<Ya.length&&Ya[_a].empty()&&"single"==Ba&&!za.shiftKey?(sr(Ga,Ti(Ya.slice(0,_a).concat(Ya.slice(_a+1)),0),{scroll:!1,origin:"*mouse"}),Xa=Ga.sel):nr(Ga,_a,qa,ks):(_a=0,sr(Ga,new ra([qa],0),ks),Xa=Ga.sel);var Ja=Wa,ed=Va.wrapper.getBoundingClientRect(),td=0,od=ei(Oa,function(rd){xt(rd)?ja(rd):Ka(rd)}),nd=ei(Oa,Ka);Oa.state.selectingText=nd,Ms(document,"mousemove",od),Ms(document,"mouseup",nd)}function gl(Oa,za,Wa,Ba){var $a,Ua;try{$a=za.clientX,Ua=za.clientY}catch(Xa){return!1}if($a>=_Mathfloor(Oa.display.gutters.getBoundingClientRect().right))return!1;Ba&&mt(za);var ja=Oa.display,Ka=ja.lineDiv.getBoundingClientRect();if(Ua>Ka.bottom||!gt(Oa,Wa))return vt(za);Ua-=Ka.top-ja.viewOffset;for(var Va=0,Ga;Va<Oa.options.gutters.length;++Va)if(Ga=ja.gutters.childNodes[Va],Ga&&Ga.getBoundingClientRect().right>=$a){var qa=se(Oa.doc,Ua),_a=Oa.options.gutters[Va];return pt(Oa,Wa,Oa,qa,_a,za),vt(za)}}function fl(Oa,za){return gl(Oa,za,"gutterClick",!0)}function ml(Oa,za){So(Oa.display,za)||yl(Oa,za)||ut(Oa,za,"contextmenu")||Oa.display.input.onContextMenu(za)}function yl(Oa,za){return!!gt(Oa,"gutterContextMenu")&&gl(Oa,za,"gutterContextMenu",!1)}function vl(Oa){Oa.display.wrapper.className=Oa.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+Oa.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Ko(Oa)}function Cl(Oa){xi(Oa),ni(Oa),Tn(Oa)}function xl(Oa,za,Wa){if(!za!=!(Wa&&Wa!=Na)){var $a=Oa.display.dragFunctions,Ua=za?Ms:ct;Ua(Oa.display.scroller,"dragstart",$a.start),Ua(Oa.display.scroller,"dragenter",$a.enter),Ua(Oa.display.scroller,"dragover",$a.over),Ua(Oa.display.scroller,"dragleave",$a.leave),Ua(Oa.display.scroller,"drop",$a.drop)}}function kl(Oa){Oa.options.lineWrapping?(E(Oa.display.wrapper,"CodeMirror-wrap"),Oa.display.sizer.style.minWidth="",Oa.display.sizerWidth=null):(gs(Oa.display.wrapper,"CodeMirror-wrap"),Qe(Oa)),cn(Oa),ni(Oa),Ko(Oa),setTimeout(function(){return Un(Oa)},100)}function wl(Oa,za){var Wa=this;if(!(this instanceof wl))return new wl(Oa,za);this.options=za=za?F(za):{},F(Aa,za,!1),ki(za);var Ba=za.value;"string"==typeof Ba&&(Ba=new ga(Ba,za.mode,null,za.lineSeparator,za.direction)),this.doc=Ba;var $a=new wl.inputStyles[za.inputStyle](this),Ua=this.display=new J(Oa,Ba,$a);for(var ja in Ua.wrapper.CodeMirror=this,xi(this),vl(this),za.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Kn(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new vs,keySeq:null,specialChars:null},za.autofocus&&!ls&&Ua.input.focus(),Xl&&11>Yl&&setTimeout(function(){return Wa.display.input.reset(!0)},20),Sl(this),Br(),Vn(this),this.curOp.forceUpdate=!0,zi(this,Ba),za.autofocus&&!ls||this.hasFocus()?setTimeout(P(xn,this),20):kn(this),Ia)Ia.hasOwnProperty(ja)&&Ia[ja](Wa,za[ja],Na);Nn(this),za.finishInit&&za.finishInit(this);for(var Ka=0;Ka<Da.length;++Ka)Da[Ka](Wa);Gn(this),Zl&&za.lineWrapping&&"optimizelegibility"==getComputedStyle(Ua.lineDiv).textRendering&&(Ua.lineDiv.style.textRendering="auto")}function Sl(Oa){function za(){$a.activeTouch&&(Ua=setTimeout(function(){return $a.activeTouch=null},1e3),ja=$a.activeTouch,ja.end=+new Date)}function Wa(Va){if(1!=Va.touches.length)return!1;var Ga=Va.touches[0];return 1>=Ga.radiusX&&1>=Ga.radiusY}function Ba(Va,Ga){if(null==Ga.left)return!0;var qa=Ga.left-Va.left,_a=Ga.top-Va.top;return 400<qa*qa+_a*_a}var $a=Oa.display;Ms($a.scroller,"mousedown",ei(Oa,cl)),Xl&&11>Yl?Ms($a.scroller,"dblclick",ei(Oa,function(Va){if(!ut(Oa,Va)){var Ga=pn(Oa,Va);if(!(!Ga||fl(Oa,Va)||So(Oa.display,Va))){mt(Va);var qa=Oa.findWordAt(Ga);tr(Oa.doc,qa.anchor,qa.head)}}})):Ms($a.scroller,"dblclick",function(Va){return ut(Oa,Va)||mt(Va)}),hs||Ms($a.scroller,"contextmenu",function(Va){return ml(Oa,Va)});var ja={end:0},Ua;Ms($a.scroller,"touchstart",function(Va){if(!ut(Oa,Va)&&!Wa(Va)){$a.input.ensurePolled(),clearTimeout(Ua);var Ga=+new Date;$a.activeTouch={start:Ga,moved:!1,prev:300>=Ga-ja.end?ja:null},1==Va.touches.length&&($a.activeTouch.left=Va.touches[0].pageX,$a.activeTouch.top=Va.touches[0].pageY)}}),Ms($a.scroller,"touchmove",function(){$a.activeTouch&&($a.activeTouch.moved=!0)}),Ms($a.scroller,"touchend",function(Va){var Ga=$a.activeTouch;if(Ga&&!So($a,Va)&&null!=Ga.left&&!Ga.moved&&300>new Date-Ga.start){var qa=Oa.coordsChar($a.activeTouch,"page"),_a;_a=!Ga.prev||Ba(Ga,Ga.prev)?new la(qa,qa):!Ga.prev.prev||Ba(Ga,Ga.prev.prev)?Oa.findWordAt(qa):new la(ce(qa.line,0),ve(Oa.doc,ce(qa.line+1,0))),Oa.setSelection(_a.anchor,_a.head),Oa.focus(),mt(Va)}za()}),Ms($a.scroller,"touchcancel",za),Ms($a.scroller,"scroll",function(){$a.scroller.clientHeight&&(zn(Oa,$a.scroller.scrollTop),Bn(Oa,$a.scroller.scrollLeft,!0),pt(Oa,"scroll",Oa))}),Ms($a.scroller,"mousewheel",function(Va){return Li(Oa,Va)}),Ms($a.scroller,"DOMMouseScroll",function(Va){return Li(Oa,Va)}),Ms($a.wrapper,"scroll",function(){return $a.wrapper.scrollTop=$a.wrapper.scrollLeft=0}),$a.dragFunctions={enter:function(Va){ut(Oa,Va)||bt(Va)},over:function(Va){ut(Oa,Va)||(Or(Oa,Va),bt(Va))},start:function(Va){return Rr(Oa,Va)},drop:ei(Oa,Fr),leave:function(Va){ut(Oa,Va)||zr(Oa)}};var Ka=$a.input.getField();Ms(Ka,"keyup",function(Va){return al.call(Oa,Va)}),Ms(Ka,"keydown",ei(Oa,ll)),Ms(Ka,"keypress",ei(Oa,dl)),Ms(Ka,"focus",function(Va){return xn(Oa,Va)}),Ms(Ka,"blur",function(Va){return kn(Oa,Va)})}function Ll(Oa,za,Wa,Ba){var $a=Oa.doc,Ua;null==Wa&&(Wa="add"),"smart"==Wa&&($a.mode.indent?Ua=Ft(Oa,za):Wa="prev");var ja=Oa.options.tabSize,Ka=ee($a,za),Va=R(Ka.text,null,ja);Ka.stateAfter&&(Ka.stateAfter=null);var Ga=Ka.text.match(/^\s*/)[0],qa;if(!Ba&&!/\S/.test(Ka.text))qa=0,Wa="not";else if("smart"==Wa&&(qa=$a.mode.indent(Ua,Ka.text.slice(Ga.length),Ka.text),qa==Cs||150<qa)){if(!Ba)return;Wa="prev"}"prev"==Wa?za>$a.first?qa=R(ee($a,za-1).text,null,ja):qa=0:"add"==Wa?qa=Va+Oa.options.indentUnit:"subtract"==Wa?qa=Va-Oa.options.indentUnit:"number"==typeof Wa&&(qa=Va+Wa),qa=_Mathmax(0,qa);var _a="",Xa=0;if(Oa.options.indentWithTabs)for(var Ya=_Mathfloor(qa/ja);Ya;--Ya)Xa+=ja,_a+="\t";if(Xa<qa&&(_a+=W(qa-Xa)),_a!=Ga)return wr($a,_a,ce(za,0),ce(za,Ga.length),"+input"),Ka.stateAfter=null,!0;for(var Za=0,Qa;Za<$a.sel.ranges.length;Za++)if(Qa=$a.sel.ranges[Za],Qa.head.line==za&&Qa.head.ch<Ga.length){var Ja=ce(za,Ga.length);nr($a,Za,new la(Ja,Ja));break}}function Tl(Oa){Ha=Oa}function Nl(Oa,za,Wa,Ba,$a){var Ua=Oa.doc;Oa.display.shift=!1,Ba||(Ba=Ua.sel);var ja=Oa.state.pasteIncoming||"paste"==$a,Ka=Os(za),Va=null;if(ja&&1<Ba.ranges.length)if(!(Ha&&Ha.text.join("\n")==za))Ka.length==Ba.ranges.length&&(Va=U(Ka,function(Ja){return[Ja]}));else if(0==Ba.ranges.length%Ha.text.length){Va=[];for(var Ga=0;Ga<Ha.text.length;Ga++)Va.push(Ua.splitLines(Ha.text[Ga]))}for(var _a=Ba.ranges.length-1,qa;0<=_a;_a--){var Xa=Ba.ranges[_a],Ya=Xa.from(),Za=Xa.to();Xa.empty()&&(Wa&&0<Wa?Ya=ce(Ya.line,Ya.ch-Wa):Oa.state.overwrite&&!ja?Za=ce(Za.line,_Mathmin(ee(Ua,Za.line).text.length,Za.ch+B(Ka).length)):Ha&&Ha.lineWise&&Ha.text.join("\n")==za&&(Ya=Za=ce(Ya.line,0))),qa=Oa.curOp.updateInput;var Qa={from:Ya,to:Za,text:Va?Va[_a%Va.length]:Ka,origin:$a||(ja?"paste":Oa.state.cutIncoming?"cut":"+input")};yr(Oa.doc,Qa),ao(Oa,"inputRead",Oa,Qa)}za&&!ja&&Il(Oa,za),Mn(Oa),Oa.curOp.updateInput=qa,Oa.curOp.typing=!0,Oa.state.pasteIncoming=Oa.state.cutIncoming=!1}function Al(Oa,za){var Wa=Oa.clipboardData&&Oa.clipboardData.getData("Text");if(Wa)return Oa.preventDefault(),za.isReadOnly()||za.options.disableInput||Jn(za,function(){return Nl(za,Wa,0,null,"paste")}),!0}function Il(Oa,za){if(Oa.options.electricChars&&Oa.options.smartIndent)for(var Wa=Oa.doc.sel,Ba=Wa.ranges.length-1,$a;0<=Ba;Ba--)if($a=Wa.ranges[Ba],!(100<$a.head.ch||Ba&&Wa.ranges[Ba-1].head.line==$a.head.line)){var Ua=Oa.getModeAt($a.head),ja=!1;if(Ua.electricChars){for(var Ka=0;Ka<Ua.electricChars.length;Ka++)if(-1<za.indexOf(Ua.electricChars.charAt(Ka))){ja=Ll(Oa,$a.head.line,"smart");break}}else Ua.electricInput&&Ua.electricInput.test(ee(Oa.doc,$a.head.line).text.slice(0,$a.head.ch))&&(ja=Ll(Oa,$a.head.line,"smart"));ja&&ao(Oa,"electricInput",Oa,$a.head.line)}}function Dl(Oa){for(var za=[],Wa=[],Ba=0;Ba<Oa.doc.sel.ranges.length;Ba++){var $a=Oa.doc.sel.ranges[Ba].head.line,Ua={anchor:ce($a,0),head:ce($a+1,0)};Wa.push(Ua),za.push(Oa.getRange(Ua.anchor,Ua.head))}return{text:za,ranges:Wa}}function Hl(Oa,za){Oa.setAttribute("autocorrect","off"),Oa.setAttribute("autocapitalize","off"),Oa.setAttribute("spellcheck",!!za)}function El(){var Oa=A("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),za=A("div",[Oa],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return Zl?Oa.style.width="1000px":Oa.setAttribute("wrap","off"),is&&(Oa.style.border="1px solid black"),Hl(Oa),za}function Ml(Oa,za,Wa,Ba,$a){function Ua(){var ed=za.line+Wa;return ed<Oa.first||ed>=Oa.first+Oa.size?!1:(za=new ce(ed,za.ch,za.sticky),Ga=ee(Oa,ed))}function ja(ed){var td;if(td=$a?lt(Oa.cm,Ga,za,Wa):nt(Ga,za,Wa),null!=td)za=td;else if(!ed&&Ua())za=it($a,Oa.cm,Ga,za.line,Wa);else return!1;return!0}var Ka=za,Va=Wa,Ga=ee(Oa,za.line);if("char"==Ba)ja();else if("column"==Ba)ja(!0);else if("word"==Ba||"group"==Ba)for(var qa=null,_a="group"==Ba,Xa=Oa.cm&&Oa.cm.getHelper(za,"wordChars"),Ya=!0;;Ya=!1){if(0>Wa&&!ja(!Ya))break;var Za=Ga.text.charAt(za.ch)||"\n",Qa=_(Za,Xa)?"w":_a&&"\n"==Za?"n":!_a||/\s/.test(Za)?null:"p";if(!_a||Ya||Qa||(Qa="s"),qa&&qa!=Qa){0>Wa&&(Wa=1,ja(),za.sticky="after");break}if(Qa&&(qa=Qa),0<Wa&&!ja(!Ya))break}var Ja=hr(Oa,za,Ka,Va,!0);return ue(Ka,Ja)&&(Ja.hitSide=!0),Ja}function Pl(Oa,za,Wa,Ba){var $a=Oa.doc,Ua=za.left,ja;if("page"==Ba){var Ka=_Mathmin(Oa.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),Va=_Mathmax(Ka-.5*rn(Oa.display),3);ja=(0<Wa?za.bottom:za.top)+Wa*Va}else"line"==Ba&&(ja=0<Wa?za.bottom+3:za.top-3);for(var Ga;;){if(Ga=Jo(Oa,Ua,ja),!Ga.outside)break;if(0>Wa?0>=ja:ja>=$a.height){Ga.hitSide=!0;break}ja+=5*Wa}return Ga}function Fl(Oa,za){var Wa=Fo(Oa,za.line);if(!Wa||Wa.hidden)return null;var Ba=ee(Oa.doc,za.line),$a=Eo(Wa,Ba,za.line),Ua=tt(Ba,Oa.doc.direction),ja="left";if(Ua){var Ka=et(Ua,za.ch);ja=Ka%2?"right":"left"}var Va=zo($a.map,za.ch,ja);return Va.offset="right"==Va.collapse?Va.end:Va.start,Va}function Rl(Oa){for(var za=Oa;za;za=za.parentNode)if(/CodeMirror-gutter-wrapper/.test(za.className))return!0;return!1}function Ol(Oa,za){return za&&(Oa.bad=!0),Oa}function zl(Oa,za,Wa,Ba,$a){function Ua(Xa){return function(Ya){return Ya.id==Xa}}function ja(){qa&&(Ga+=_a,qa=!1)}function Ka(Xa){Xa&&(ja(),Ga+=Xa)}function Va(Xa){if(1==Xa.nodeType){var Ya=Xa.getAttribute("cm-text");if(null!=Ya)return void Ka(Ya||Xa.textContent.replace(/\u200b/g,""));var Za=Xa.getAttribute("cm-marker"),Qa;if(Za){var Ja=Oa.findMarks(ce(Ba,0),ce($a+1,0),Ua(+Za));return void(Ja.length&&(Qa=Ja[0].find())&&Ka(oe(Oa.doc,Qa.from,Qa.to).join(_a)))}if("false"==Xa.getAttribute("contenteditable"))return;var ed=/^(pre|div|p)$/i.test(Xa.nodeName);ed&&ja();for(var td=0;td<Xa.childNodes.length;td++)Va(Xa.childNodes[td]);ed&&(qa=!0)}else 3==Xa.nodeType&&Ka(Xa.nodeValue)}for(var Ga="",qa=!1,_a=Oa.doc.lineSeparator();;){if(Va(za),za==Wa)break;za=za.nextSibling}return Ga}function Wl(Oa,za,Wa){var Ba;if(za==Oa.display.lineDiv){if(Ba=Oa.display.lineDiv.childNodes[Wa],!Ba)return Ol(Oa.clipPos(ce(Oa.display.viewTo-1)),!0);za=null,Wa=0}else for(Ba=za;;Ba=Ba.parentNode){if(!Ba||Ba==Oa.display.lineDiv)return null;if(Ba.parentNode&&Ba.parentNode==Oa.display.lineDiv)break}for(var $a=0,Ua;$a<Oa.display.view.length;$a++)if(Ua=Oa.display.view[$a],Ua.node==Ba)return Bl(Ua,za,Wa)}function Bl(Oa,za,Wa){function Ba(Ja,ed,td){for(var od=-1,nd;od<(qa?qa.length:0);od++){nd=0>od?Ga.map:qa[od];for(var rd=0,ld;rd<nd.length;rd+=3)if(ld=nd[rd+2],ld==Ja||ld==ed){var sd=le(0>od?Oa.line:Oa.rest[od]),ad=nd[rd]+td;return(0>td||ld!=Ja)&&(ad=nd[rd+(td?1:0)]),ce(sd,ad)}}}var $a=Oa.text.firstChild,Ua=!1;if(!za||!D($a,za))return Ol(ce(le(Oa.line),0),!0);if(za==$a&&(Ua=!0,za=$a.childNodes[Wa],Wa=0,!za)){var ja=Oa.rest?B(Oa.rest):Oa.line;return Ol(ce(le(ja),ja.text.length),Ua)}var Ka=3==za.nodeType?za:null,Va=za;for(Ka||1!=za.childNodes.length||3!=za.firstChild.nodeType||(Ka=za.firstChild,Wa&&(Wa=Ka.nodeValue.length));Va.parentNode!=$a;)Va=Va.parentNode;var Ga=Oa.measure,qa=Ga.maps,_a=Ba(Ka,Va,Wa);if(_a)return Ol(_a,Ua);for(var Xa=Va.nextSibling,Ya=Ka?Ka.nodeValue.length-Wa:0;Xa;Xa=Xa.nextSibling){if(_a=Ba(Xa,Xa.firstChild,0),_a)return Ol(ce(_a.line,_a.ch-Ya),Ua);Ya+=Xa.textContent.length}for(var Za=Va.previousSibling,Qa=Wa;Za;Za=Za.previousSibling){if(_a=Ba(Za,Za.firstChild,-1),_a)return Ol(ce(_a.line,_a.ch+Qa),Ua);Qa+=Za.textContent.length}}var jl=navigator.userAgent,Kl=navigator.platform,Vl=/gecko\/\d/i.test(jl),Gl=/MSIE \d/.test(jl),ql=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(jl),_l=/Edge\/(\d+)/.exec(jl),Xl=Gl||ql||_l,Yl=Xl&&(Gl?document.documentMode||6:+(_l||ql)[1]),Zl=!_l&&/WebKit\//.test(jl),Ql=Zl&&/Qt\/\d+\.\d+/.test(jl),Jl=!_l&&/Chrome\//.test(jl),es=/Opera\//.test(jl),ts=/Apple Computer/.test(navigator.vendor),os=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(jl),ns=/PhantomJS/.test(jl),is=!_l&&/AppleWebKit/.test(jl)&&/Mobile\/\w+/.test(jl),rs=/Android/.test(jl),ls=is||rs||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(jl),ss=is||/Mac/.test(Kl),ds=/\bCrOS\b/.test(jl),cs=/win/i.test(Kl),ps=es&&jl.match(/Version\/(\d*\.\d*)/);ps&&(ps=+ps[1]),ps&&15<=ps&&(es=!1,Zl=!0);var us=ss&&(Ql||es&&(null==ps||12.11>ps)),hs=Vl||Xl&&9<=Yl,gs=function(Oa,za){var Wa=Oa.className,Ba=L(za).exec(Wa);if(Ba){var $a=Wa.slice(Ba.index+Ba[0].length);Oa.className=Wa.slice(0,Ba.index)+($a?Ba[1]+$a:"")}},fs;fs=document.createRange?function(Oa,za,Wa,Ba){var $a=document.createRange();return $a.setEnd(Ba||Oa,Wa),$a.setStart(Oa,za),$a}:function(Oa,za,Wa){var Ba=document.body.createTextRange();try{Ba.moveToElementText(Oa.parentNode)}catch($a){return Ba}return Ba.collapse(!0),Ba.moveEnd("character",Wa),Ba.moveStart("character",za),Ba};var ys=function(Oa){Oa.select()};is?ys=function(Oa){Oa.selectionStart=0,Oa.selectionEnd=Oa.value.length}:Xl&&(ys=function(Oa){try{Oa.select()}catch(za){}});var vs=function(){this.id=null};vs.prototype.set=function(Oa,za){clearTimeout(this.id),this.id=setTimeout(za,Oa)};var bs=30,Cs={toString:function(){return"CodeMirror.Pass"}},xs={scroll:!1},ks={origin:"*mouse"},Ss={origin:"+move"},Ls=[""],Ts=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Ns=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,As=!1,Is=!1,Ds=null,Hs=function(){function Oa(Ga){return 247>=Ga?Wa.charAt(Ga):1424<=Ga&&1524>=Ga?"R":1536<=Ga&&1785>=Ga?Ba.charAt(Ga-1536):1774<=Ga&&2220>=Ga?"r":8192<=Ga&&8203>=Ga?"w":8204==Ga?"b":"L"}function za(Ga,qa,_a){this.level=Ga,this.from=qa,this.to=_a}var Wa="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",Ba="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111",$a=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,Ua=/[stwN]/,ja=/[LRr]/,Ka=/[Lb1n]/,Va=/[1n]/;return function(Ga,qa){var _a="ltr"==qa?"L":"R";if(0==Ga.length||"ltr"==qa&&!$a.test(Ga))return!1;for(var Xa=Ga.length,Ya=[],Za=0;Za<Xa;++Za)Ya.push(Oa(Ga.charCodeAt(Za)));for(var Qa=0,Ja=_a,ed;Qa<Xa;++Qa)ed=Ya[Qa],"m"==ed?Ya[Qa]=Ja:Ja=ed;for(var td=0,od=_a,nd;td<Xa;++td)nd=Ya[td],"1"==nd&&"r"==od?Ya[td]="n":ja.test(nd)&&(od=nd,"r"==nd&&(Ya[td]="R"));for(var rd=1,ld=Ya[0],sd;rd<Xa-1;++rd)sd=Ya[rd],"+"==sd&&"1"==ld&&"1"==Ya[rd+1]?Ya[rd]="1":","==sd&&ld==Ya[rd+1]&&("1"==ld||"n"==ld)&&(Ya[rd]=ld),ld=sd;for(var ad=0,dd;ad<Xa;++ad)if(dd=Ya[ad],","==dd)Ya[ad]="N";else if("%"==dd){var cd=void 0;for(cd=ad+1;cd<Xa&&"%"==Ya[cd];++cd);for(var pd=ad&&"!"==Ya[ad-1]||cd<Xa&&"1"==Ya[cd]?"1":"N",ud=ad;ud<cd;++ud)Ya[ud]=pd;ad=cd-1}for(var hd=0,gd=_a,fd;hd<Xa;++hd)fd=Ya[hd],"L"==gd&&"1"==fd?Ya[hd]="L":ja.test(fd)&&(gd=fd);for(var md=0;md<Xa;++md)if(Ua.test(Ya[md])){var yd=void 0;for(yd=md+1;yd<Xa&&Ua.test(Ya[yd]);++yd);for(var vd="L"==(md?Ya[md-1]:_a),bd="L"==(yd<Xa?Ya[yd]:_a),Cd=vd==bd?vd?"L":"R":_a,xd=md;xd<yd;++xd)Ya[xd]=Cd;md=yd-1}for(var kd=[],Sd=0,wd;Sd<Xa;)if(Ka.test(Ya[Sd])){var Ld=Sd;for(++Sd;Sd<Xa&&Ka.test(Ya[Sd]);++Sd);kd.push(new za(0,Ld,Sd))}else{var Td=Sd,Nd=kd.length;for(++Sd;Sd<Xa&&"L"!=Ya[Sd];++Sd);for(var Ad=Td;Ad<Sd;)if(Va.test(Ya[Ad])){Td<Ad&&kd.splice(Nd,0,new za(1,Td,Ad));var Id=Ad;for(++Ad;Ad<Sd&&Va.test(Ya[Ad]);++Ad);kd.splice(Nd,0,new za(2,Id,Ad)),Td=Ad}else++Ad;Td<Sd&&kd.splice(Nd,0,new za(1,Td,Sd))}return 1==kd[0].level&&(wd=Ga.match(/^\s+/))&&(kd[0].from=wd[0].length,kd.unshift(new za(0,0,wd[0].length))),1==B(kd).level&&(wd=Ga.match(/\s+$/))&&(B(kd).to-=wd[0].length,kd.push(new za(0,Xa-wd[0].length,Xa))),"rtl"==qa?kd.reverse():kd}}(),Es=[],Ms=function(Oa,za,Wa){if(Oa.addEventListener)Oa.addEventListener(za,Wa,!1);else if(Oa.attachEvent)Oa.attachEvent("on"+za,Wa);else{var Ba=Oa._handlers||(Oa._handlers={});Ba[za]=(Ba[za]||Es).concat(Wa)}},Ps=function(){if(Xl&&9>Yl)return!1;var Oa=A("div");return"draggable"in Oa||"dragDrop"in Oa}(),Os=3=="\n\nb".split(/\n/).length?function(Oa){return Oa.split(/\r\n?|\n/)}:function(Oa){for(var za=0,Wa=[],Ba=Oa.length,$a;za<=Ba;){$a=Oa.indexOf("\n",za),-1==$a&&($a=Oa.length);var Ua=Oa.slice(za,"\r"==Oa.charAt($a-1)?$a-1:$a),ja=Ua.indexOf("\r");-1==ja?(Wa.push(Ua),za=$a+1):(Wa.push(Ua.slice(0,ja)),za+=ja+1)}return Wa},zs=window.getSelection?function(Oa){try{return Oa.selectionStart!=Oa.selectionEnd}catch(za){return!1}}:function(Oa){var za;try{za=Oa.ownerDocument.selection.createRange()}catch(Wa){}return za&&za.parentElement()==Oa&&0!=za.compareEndPoints("StartToEnd",za)},Ws=function(){var Oa=A("div");return!!("oncopy"in Oa)||(Oa.setAttribute("oncopy","return;"),"function"==typeof Oa.oncopy)}(),Bs=null,$s={},Us={},js={},Ks=function(Oa,za){this.pos=this.start=0,this.string=Oa,this.tabSize=za||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0},Fs,Rs;Ks.prototype.eol=function(){return this.pos>=this.string.length},Ks.prototype.sol=function(){return this.pos==this.lineStart},Ks.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Ks.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Ks.prototype.eat=function(Oa){var za=this.string.charAt(this.pos),Wa;if(Wa="string"==typeof Oa?za==Oa:za&&(Oa.test?Oa.test(za):Oa(za)),Wa)return++this.pos,za},Ks.prototype.eatWhile=function(Oa){for(var za=this.pos;this.eat(Oa););return this.pos>za},Ks.prototype.eatSpace=function(){for(var Oa=this,za=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++Oa.pos;return this.pos>za},Ks.prototype.skipToEnd=function(){this.pos=this.string.length},Ks.prototype.skipTo=function(Oa){var za=this.string.indexOf(Oa,this.pos);if(-1<za)return this.pos=za,!0},Ks.prototype.backUp=function(Oa){this.pos-=Oa},Ks.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=R(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?R(this.string,this.lineStart,this.tabSize):0)},Ks.prototype.indentation=function(){return R(this.string,null,this.tabSize)-(this.lineStart?R(this.string,this.lineStart,this.tabSize):0)},Ks.prototype.match=function(Oa,za,Wa){if("string"==typeof Oa){var Ba=function(ja){return Wa?ja.toLowerCase():ja},$a=this.string.substr(this.pos,Oa.length);if(Ba($a)==Ba(Oa))return!1!==za&&(this.pos+=Oa.length),!0}else{var Ua=this.string.slice(this.pos).match(Oa);return Ua&&0<Ua.index?null:(Ua&&!1!==za&&(this.pos+=Ua[0].length),Ua)}},Ks.prototype.current=function(){return this.string.slice(this.start,this.pos)},Ks.prototype.hideFirstChars=function(Oa,za){this.lineStart+=Oa;try{return za()}finally{this.lineStart-=Oa}};var Vs=function(Oa,za,Wa){this.text=Oa,Pe(this,za),this.height=Wa?Wa(this):1};Vs.prototype.lineNo=function(){return le(this)},ft(Vs);var Gs={},qs={},_s=null,Xs=null,Ys={left:0,right:0,top:0,bottom:0},Qs=function(Oa,za,Wa){this.cm=Wa;var Ba=this.vert=A("div",[A("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),$a=this.horiz=A("div",[A("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");Oa(Ba),Oa($a),Ms(Ba,"scroll",function(){Ba.clientHeight&&za(Ba.scrollTop,"vertical")}),Ms($a,"scroll",function(){$a.clientWidth&&za($a.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,Xl&&8>Yl&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")},Zs;Qs.prototype.update=function(Oa){var za=Oa.scrollWidth>Oa.clientWidth+1,Wa=Oa.scrollHeight>Oa.clientHeight+1,Ba=Oa.nativeBarWidth;if(Wa){this.vert.style.display="block",this.vert.style.bottom=za?Ba+"px":"0";var $a=Oa.viewHeight-(za?Ba:0);this.vert.firstChild.style.height=_Mathmax(0,Oa.scrollHeight-Oa.clientHeight+$a)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(za){this.horiz.style.display="block",this.horiz.style.right=Wa?Ba+"px":"0",this.horiz.style.left=Oa.barLeft+"px";var Ua=Oa.viewWidth-Oa.barLeft-(Wa?Ba:0);this.horiz.firstChild.style.width=_Mathmax(0,Oa.scrollWidth-Oa.clientWidth+Ua)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&0<Oa.clientHeight&&(0==Ba&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:Wa?Ba:0,bottom:za?Ba:0}},Qs.prototype.setScrollLeft=function(Oa){this.horiz.scrollLeft!=Oa&&(this.horiz.scrollLeft=Oa),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Qs.prototype.setScrollTop=function(Oa){this.vert.scrollTop!=Oa&&(this.vert.scrollTop=Oa),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Qs.prototype.zeroWidthHack=function(){var Oa=ss&&!os?"12px":"18px";this.horiz.style.height=this.vert.style.width=Oa,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new vs,this.disableVert=new vs},Qs.prototype.enableZeroWidthBar=function(Oa,za,Wa){function Ba(){var $a=Oa.getBoundingClientRect(),Ua="vert"==Wa?document.elementFromPoint($a.right-1,($a.top+$a.bottom)/2):document.elementFromPoint(($a.right+$a.left)/2,$a.bottom-1);Ua==Oa?za.set(1e3,Ba):Oa.style.pointerEvents="none"}Oa.style.pointerEvents="auto",za.set(1e3,Ba)},Qs.prototype.clear=function(){var Oa=this.horiz.parentNode;Oa.removeChild(this.horiz),Oa.removeChild(this.vert)};var Js=function(){};Js.prototype.update=function(){return{bottom:0,right:0}},Js.prototype.setScrollLeft=function(){},Js.prototype.setScrollTop=function(){},Js.prototype.clear=function(){};var ea={native:Qs,"null":Js},ta=0,oa=function(Oa,za,Wa){var Ba=Oa.display;this.viewport=za,this.visible=Ln(Ba,Oa.doc,za),this.editorIsHidden=!Ba.wrapper.offsetWidth,this.wrapperHeight=Ba.wrapper.clientHeight,this.wrapperWidth=Ba.wrapper.clientWidth,this.oldDisplayWidth=Io(Oa),this.force=Wa,this.dims=sn(Oa),this.events=[]};oa.prototype.signal=function(Oa,za){gt(Oa,za)&&this.events.push(arguments)},oa.prototype.finish=function(){for(var Oa=this,za=0;za<this.events.length;za++)pt.apply(null,Oa.events[za])};var na=0,ia=null;Xl?ia=-.53:Vl?ia=15:Jl?ia=-.7:ts&&(ia=-1/3);var ra=function(Oa,za){this.ranges=Oa,this.primIndex=za};ra.prototype.primary=function(){return this.ranges[this.primIndex]},ra.prototype.equals=function(Oa){var za=this;if(Oa==this)return!0;if(Oa.primIndex!=this.primIndex||Oa.ranges.length!=this.ranges.length)return!1;for(var Wa=0;Wa<this.ranges.length;Wa++){var Ba=za.ranges[Wa],$a=Oa.ranges[Wa];if(!ue(Ba.anchor,$a.anchor)||!ue(Ba.head,$a.head))return!1}return!0},ra.prototype.deepCopy=function(){for(var Oa=this,za=[],Wa=0;Wa<this.ranges.length;Wa++)za[Wa]=new la(he(Oa.ranges[Wa].anchor),he(Oa.ranges[Wa].head));return new ra(za,this.primIndex)},ra.prototype.somethingSelected=function(){for(var Oa=this,za=0;za<this.ranges.length;za++)if(!Oa.ranges[za].empty())return!0;return!1},ra.prototype.contains=function(Oa,za){var Wa=this;za||(za=Oa);for(var Ba=0,$a;Ba<this.ranges.length;Ba++)if($a=Wa.ranges[Ba],0<=pe(za,$a.from())&&0>=pe(Oa,$a.to()))return Ba;return-1};var la=function(Oa,za){this.anchor=Oa,this.head=za};la.prototype.from=function(){return fe(this.anchor,this.head)},la.prototype.to=function(){return ge(this.anchor,this.head)},la.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};var sa=function(Oa){var za=this;this.lines=Oa,this.parent=null;for(var Wa=0,Ba=0;Ba<Oa.length;++Ba)Oa[Ba].parent=za,Wa+=Oa[Ba].height;this.height=Wa};sa.prototype.chunkSize=function(){return this.lines.length},sa.prototype.removeInner=function(Oa,za){for(var Wa=this,Ba=Oa,Ua;Ba<Oa+za;++Ba)Ua=Wa.lines[Ba],Wa.height-=Ua.height,Kt(Ua),ao(Ua,"delete");this.lines.splice(Oa,za)},sa.prototype.collapse=function(Oa){Oa.push.apply(Oa,this.lines)},sa.prototype.insertInner=function(Oa,za,Wa){var Ba=this;this.height+=Wa,this.lines=this.lines.slice(0,Oa).concat(za).concat(this.lines.slice(Oa));for(var $a=0;$a<za.length;++$a)za[$a].parent=Ba},sa.prototype.iterN=function(Oa,za,Wa){for(var Ba=this,$a=Oa+za;Oa<$a;++Oa)if(Wa(Ba.lines[Oa]))return!0};var aa=function(Oa){var za=this;this.children=Oa;for(var Wa=0,Ba=0,$a=0,Ua;$a<Oa.length;++$a)Ua=Oa[$a],Wa+=Ua.chunkSize(),Ba+=Ua.height,Ua.parent=za;this.size=Wa,this.height=Ba,this.parent=null};aa.prototype.chunkSize=function(){return this.size},aa.prototype.removeInner=function(Oa,za){var Wa=this;this.size-=za;for(var Ba=0;Ba<this.children.length;++Ba){var $a=Wa.children[Ba],Ua=$a.chunkSize();if(Oa<Ua){var ja=_Mathmin(za,Ua-Oa),Ka=$a.height;if($a.removeInner(Oa,ja),Wa.height-=Ka-$a.height,Ua==ja&&(Wa.children.splice(Ba--,1),$a.parent=null),0==(za-=ja))break;Oa=0}else Oa-=Ua}if(25>this.size-za&&(1<this.children.length||!(this.children[0]instanceof sa))){var Va=[];this.collapse(Va),this.children=[new sa(Va)],this.children[0].parent=this}},aa.prototype.collapse=function(Oa){for(var za=this,Wa=0;Wa<this.children.length;++Wa)za.children[Wa].collapse(Oa)},aa.prototype.insertInner=function(Oa,za,Wa){var Ba=this;this.size+=za.length,this.height+=Wa;for(var $a=0;$a<this.children.length;++$a){var Ua=Ba.children[$a],ja=Ua.chunkSize();if(Oa<=ja){if(Ua.insertInner(Oa,za,Wa),Ua.lines&&50<Ua.lines.length){for(var Ka=Ua.lines.length%25+25,Va=Ka,Ga;Va<Ua.lines.length;)Ga=new sa(Ua.lines.slice(Va,Va+=25)),Ua.height-=Ga.height,Ba.children.splice(++$a,0,Ga),Ga.parent=Ba;Ua.lines=Ua.lines.slice(0,Ka),Ba.maybeSpill()}break}Oa-=ja}},aa.prototype.maybeSpill=function(){if(!(10>=this.children.length)){var Oa=this;do{var za=Oa.children.splice(Oa.children.length-5,5),Wa=new aa(za);if(!Oa.parent){var Ba=new aa(Oa.children);Ba.parent=Oa,Oa.children=[Ba,Wa],Oa=Ba}else{Oa.size-=Wa.size,Oa.height-=Wa.height;var $a=O(Oa.parent.children,Oa);Oa.parent.children.splice($a+1,0,Wa)}Wa.parent=Oa.parent}while(10<Oa.children.length);Oa.parent.maybeSpill()}},aa.prototype.iterN=function(Oa,za,Wa){for(var Ba=this,$a=0;$a<this.children.length;++$a){var Ua=Ba.children[$a],ja=Ua.chunkSize();if(Oa<ja){var Ka=_Mathmin(za,ja-Oa);if(Ua.iterN(Oa,Ka,Wa))return!0;if(0==(za-=Ka))break;Oa=0}else Oa-=ja}};var da=function(Oa,za,Wa){var Ba=this;if(Wa)for(var $a in Wa)Wa.hasOwnProperty($a)&&(Ba[$a]=Wa[$a]);this.doc=Oa,this.node=za};da.prototype.clear=function(){var Oa=this,za=this.doc.cm,Wa=this.line.widgets,Ba=this.line,$a=le(Ba);if(null!=$a&&Wa){for(var Ua=0;Ua<Wa.length;++Ua)Wa[Ua]==Oa&&Wa.splice(Ua--,1);Wa.length||(Ba.widgets=null);var ja=wo(this);re(Ba,_Mathmax(0,Ba.height-ja)),za&&(Jn(za,function(){Ar(za,Ba,-ja),ii(za,$a,"widget")}),ao(za,"lineWidgetCleared",za,this,$a))}},da.prototype.changed=function(){var Oa=this,za=this.height,Wa=this.doc.cm,Ba=this.line;this.height=null;var $a=wo(this)-za;$a&&(re(Ba,Ba.height+$a),Wa&&Jn(Wa,function(){Wa.curOp.forceUpdate=!0,Ar(Wa,Ba,$a),ao(Wa,"lineWidgetChanged",Wa,Oa,le(Ba))}))},ft(da);var ca=0,pa=function(Oa,za){this.lines=[],this.type=za,this.doc=Oa,this.id=++ca};pa.prototype.clear=function(){var Oa=this;if(!this.explicitlyCleared){var za=this.doc.cm,Wa=za&&!za.curOp;if(Wa&&Vn(za),gt(this,"clear")){var Ba=this.find();Ba&&ao(this,"clear",Ba.from,Ba.to)}for(var $a=null,Ua=null,ja=0;ja<this.lines.length;++ja){var Ka=Oa.lines[ja],Va=Le(Ka.markedSpans,Oa);za&&!Oa.collapsed?ii(za,le(Ka),"text"):za&&(null!=Va.to&&(Ua=le(Ka)),null!=Va.from&&($a=le(Ka))),Ka.markedSpans=Te(Ka.markedSpans,Va),null==Va.from&&Oa.collapsed&&!qe(Oa.doc,Ka)&&za&&re(Ka,rn(za.display))}if(za&&this.collapsed&&!za.options.lineWrapping)for(var Ga=0;Ga<this.lines.length;++Ga){var qa=Ue(Oa.lines[Ga]),_a=Ze(qa);_a>za.display.maxLineLength&&(za.display.maxLine=qa,za.display.maxLineLength=_a,za.display.maxLineChanged=!0)}null!=$a&&za&&this.collapsed&&ni(za,$a,Ua+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,za&&cr(za.doc)),za&&ao(za,"markerCleared",za,this,$a,Ua),Wa&&Gn(za),this.parent&&this.parent.clear()}},pa.prototype.find=function(Oa,za){var Wa=this;null==Oa&&"bookmark"==this.type&&(Oa=1);for(var Ua=0,Ba,$a;Ua<this.lines.length;++Ua){var ja=Wa.lines[Ua],Ka=Le(ja.markedSpans,Wa);if(null!=Ka.from&&(Ba=ce(za?ja:le(ja),Ka.from),-1==Oa))return Ba;if(null!=Ka.to&&($a=ce(za?ja:le(ja),Ka.to),1==Oa))return $a}return Ba&&{from:Ba,to:$a}},pa.prototype.changed=function(){var Oa=this,za=this.find(-1,!0),Wa=this,Ba=this.doc.cm;za&&Ba&&Jn(Ba,function(){var $a=za.line,Ua=le(za.line),ja=Fo(Ba,Ua);if(ja&&(Uo(ja),Ba.curOp.selectionChanged=Ba.curOp.forceUpdate=!0),Ba.curOp.updateMaxLine=!0,!qe(Wa.doc,$a)&&null!=Wa.height){var Ka=Wa.height;Wa.height=null;var Va=wo(Wa)-Ka;Va&&re($a,$a.height+Va)}ao(Ba,"markerChanged",Ba,Oa)})},pa.prototype.attachLine=function(Oa){if(!this.lines.length&&this.doc.cm){var za=this.doc.cm.curOp;za.maybeHiddenMarkers&&-1!=O(za.maybeHiddenMarkers,this)||(za.maybeUnhiddenMarkers||(za.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(Oa)},pa.prototype.detachLine=function(Oa){if(this.lines.splice(O(this.lines,Oa),1),!this.lines.length&&this.doc.cm){var za=this.doc.cm.curOp;(za.maybeHiddenMarkers||(za.maybeHiddenMarkers=[])).push(this)}},ft(pa);var ua=function(Oa,za){var Wa=this;this.markers=Oa,this.primary=za;for(var Ba=0;Ba<Oa.length;++Ba)Oa[Ba].parent=Wa};ua.prototype.clear=function(){var Oa=this;if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var za=0;za<this.markers.length;++za)Oa.markers[za].clear();ao(this,"clear")}},ua.prototype.find=function(Oa,za){return this.primary.find(Oa,za)},ft(ua);var ha=0,ga=function(Oa,za,Wa,Ba,$a){if(!(this instanceof ga))return new ga(Oa,za,Wa,Ba,$a);null==Wa&&(Wa=0),aa.call(this,[new sa([new Vs("",null)])]),this.first=Wa,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=Wa;var Ua=ce(Wa,0);this.sel=Ni(Ua),this.history=new $i(null),this.id=++ha,this.modeOption=za,this.lineSep=Ba,this.direction="rtl"==$a?"rtl":"ltr",this.extend=!1,"string"==typeof Oa&&(Oa=this.splitLines(Oa)),Ri(this,{from:Ua,to:Ua,text:Oa}),sr(this,Ni(Ua),xs)};ga.prototype=G(aa.prototype,{constructor:ga,iter:function(Oa,za,Wa){Wa?this.iterN(Oa-this.first,za-Oa,Wa):this.iterN(this.first,this.first+this.size,Oa)},insert:function(Oa,za){for(var Wa=0,Ba=0;Ba<za.length;++Ba)Wa+=za[Ba].height;this.insertInner(Oa-this.first,za,Wa)},remove:function(Oa,za){this.removeInner(Oa-this.first,za)},getValue:function(Oa){var za=ne(this,this.first,this.first+this.size);return!1===Oa?za:za.join(Oa||this.lineSeparator())},setValue:oi(function(Oa){var za=ce(this.first,0),Wa=this.first+this.size-1;yr(this,{from:za,to:ce(Wa,ee(this,Wa).text.length),text:this.splitLines(Oa),origin:"setValue",full:!0},!0),this.cm&&Pn(this.cm,0,0),sr(this,Ni(za),xs)}),replaceRange:function(Oa,za,Wa,Ba){za=ve(this,za),Wa=Wa?ve(this,Wa):za,wr(this,Oa,za,Wa,Ba)},getRange:function(Oa,za,Wa){var Ba=oe(this,ve(this,Oa),ve(this,za));return!1===Wa?Ba:Ba.join(Wa||this.lineSeparator())},getLine:function(Oa){var za=this.getLineHandle(Oa);return za&&za.text},getLineHandle:function(Oa){if(ae(this,Oa))return ee(this,Oa)},getLineNumber:function(Oa){return le(Oa)},getLineHandleVisualStart:function(Oa){return"number"==typeof Oa&&(Oa=ee(this,Oa)),Ue(Oa)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(Oa){return ve(this,Oa)},getCursor:function(Oa){var za=this.sel.primary(),Wa;return Wa=null==Oa||"head"==Oa?za.head:"anchor"==Oa?za.anchor:"end"==Oa||"to"==Oa||!1===Oa?za.to():za.from(),Wa},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:oi(function(Oa,za,Wa){ir(this,ve(this,"number"==typeof Oa?ce(Oa,za||0):Oa),null,Wa)}),setSelection:oi(function(Oa,za,Wa){ir(this,ve(this,Oa),ve(this,za||Oa),Wa)}),extendSelection:oi(function(Oa,za,Wa){tr(this,ve(this,Oa),za&&ve(this,za),Wa)}),extendSelections:oi(function(Oa,za){or(this,Ce(this,Oa),za)}),extendSelectionsBy:oi(function(Oa,za){var Wa=U(this.sel.ranges,Oa);or(this,Ce(this,Wa),za)}),setSelections:oi(function(Oa,za,Wa){var Ba=this;if(Oa.length){for(var $a=[],Ua=0;Ua<Oa.length;Ua++)$a[Ua]=new la(ve(Ba,Oa[Ua].anchor),ve(Ba,Oa[Ua].head));null==za&&(za=_Mathmin(Oa.length-1,this.sel.primIndex)),sr(this,Ti($a,za),Wa)}}),addSelection:oi(function(Oa,za,Wa){var Ba=this.sel.ranges.slice(0);Ba.push(new la(ve(this,Oa),ve(this,za||Oa))),sr(this,Ti(Ba,Ba.length-1),Wa)}),getSelection:function(Oa){for(var za=this,Wa=this.sel.ranges,$a=0,Ba,Ua;$a<Wa.length;$a++)Ua=oe(za,Wa[$a].from(),Wa[$a].to()),Ba=Ba?Ba.concat(Ua):Ua;return!1===Oa?Ba:Ba.join(Oa||this.lineSeparator())},getSelections:function(Oa){for(var za=this,Wa=[],Ba=this.sel.ranges,$a=0,Ua;$a<Ba.length;$a++)Ua=oe(za,Ba[$a].from(),Ba[$a].to()),!1!==Oa&&(Ua=Ua.join(Oa||za.lineSeparator())),Wa[$a]=Ua;return Wa},replaceSelection:function(Oa,za,Wa){for(var Ba=[],$a=0;$a<this.sel.ranges.length;$a++)Ba[$a]=Oa;this.replaceSelections(Ba,za,Wa||"+input")},replaceSelections:oi(function(Oa,za,Wa){for(var Ba=this,$a=[],Ua=this.sel,ja=0,Ka;ja<Ua.ranges.length;ja++)Ka=Ua.ranges[ja],$a[ja]={from:Ka.from(),to:Ka.to(),text:Ba.splitLines(Oa[ja]),origin:Wa};for(var Va=za&&"end"!=za&&Ei(this,$a,za),Ga=$a.length-1;0<=Ga;Ga--)yr(Ba,$a[Ga]);Va?lr(this,Va):this.cm&&Mn(this.cm)}),undo:oi(function(){br(this,"undo")}),redo:oi(function(){br(this,"redo")}),undoSelection:oi(function(){br(this,"undo",!0)}),redoSelection:oi(function(){br(this,"redo",!0)}),setExtending:function(Oa){this.extend=Oa},getExtending:function(){return this.extend},historySize:function(){for(var Oa=this.history,za=0,Wa=0,Ba=0;Ba<Oa.done.length;Ba++)Oa.done[Ba].ranges||++za;for(var $a=0;$a<Oa.undone.length;$a++)Oa.undone[$a].ranges||++Wa;return{undo:za,redo:Wa}},clearHistory:function(){this.history=new $i(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(Oa){return Oa&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(Oa){return this.history.generation==(Oa||this.cleanGeneration)},getHistory:function(){return{done:Ji(this.history.done),undone:Ji(this.history.undone)}},setHistory:function(Oa){var za=this.history=new $i(this.history.maxGeneration);za.done=Ji(Oa.done.slice(0),null,!0),za.undone=Ji(Oa.undone.slice(0),null,!0)},setGutterMarker:oi(function(Oa,za,Wa){return Nr(this,Oa,"gutter",function(Ba){var $a=Ba.gutterMarkers||(Ba.gutterMarkers={});return $a[za]=Wa,!Wa&&X($a)&&(Ba.gutterMarkers=null),!0})}),clearGutter:oi(function(Oa){var za=this;this.iter(function(Wa){Wa.gutterMarkers&&Wa.gutterMarkers[Oa]&&Nr(za,Wa,"gutter",function(){return Wa.gutterMarkers[Oa]=null,X(Wa.gutterMarkers)&&(Wa.gutterMarkers=null),!0})})}),lineInfo:function(Oa){var za;if("number"==typeof Oa){if(!ae(this,Oa))return null;if(za=Oa,Oa=ee(this,Oa),!Oa)return null}else if(za=le(Oa),null==za)return null;return{line:za,handle:Oa,text:Oa.text,gutterMarkers:Oa.gutterMarkers,textClass:Oa.textClass,bgClass:Oa.bgClass,wrapClass:Oa.wrapClass,widgets:Oa.widgets}},addLineClass:oi(function(Oa,za,Wa){return Nr(this,Oa,"gutter"==za?"gutter":"class",function(Ba){var $a="text"==za?"textClass":"background"==za?"bgClass":"gutter"==za?"gutterClass":"wrapClass";if(!Ba[$a])Ba[$a]=Wa;else{if(L(Wa).test(Ba[$a]))return!1;Ba[$a]+=" "+Wa}return!0})}),removeLineClass:oi(function(Oa,za,Wa){return Nr(this,Oa,"gutter"==za?"gutter":"class",function(Ba){var $a="text"==za?"textClass":"background"==za?"bgClass":"gutter"==za?"gutterClass":"wrapClass",Ua=Ba[$a];if(!Ua)return!1;if(null==Wa)Ba[$a]=null;else{var ja=Ua.match(L(Wa));if(!ja)return!1;var Ka=ja.index+ja[0].length;Ba[$a]=Ua.slice(0,ja.index)+(ja.index&&Ka!=Ua.length?" ":"")+Ua.slice(Ka)||null}return!0})}),addLineWidget:oi(function(Oa,za,Wa){return Ir(this,Oa,za,Wa)}),removeLineWidget:function(Oa){Oa.clear()},markText:function(Oa,za,Wa){return Dr(this,ve(this,Oa),ve(this,za),Wa,Wa&&Wa.type||"range")},setBookmark:function(Oa,za){var Wa={replacedWith:za&&(null==za.nodeType?za.widget:za),insertLeft:za&&za.insertLeft,clearWhenEmpty:!1,shared:za&&za.shared,handleMouseEvents:za&&za.handleMouseEvents};return Oa=ve(this,Oa),Dr(this,Oa,Oa,Wa,"bookmark")},findMarksAt:function(Oa){Oa=ve(this,Oa);var za=[],Wa=ee(this,Oa.line).markedSpans;if(Wa)for(var Ba=0,$a;Ba<Wa.length;++Ba)$a=Wa[Ba],(null==$a.from||$a.from<=Oa.ch)&&(null==$a.to||$a.to>=Oa.ch)&&za.push($a.marker.parent||$a.marker);return za},findMarks:function(Oa,za,Wa){Oa=ve(this,Oa),za=ve(this,za);var Ba=[],$a=Oa.line;return this.iter(Oa.line,za.line+1,function(Ua){var ja=Ua.markedSpans;if(ja)for(var Ka=0,Va;Ka<ja.length;Ka++)Va=ja[Ka],null!=Va.to&&$a==Oa.line&&Oa.ch>=Va.to||null==Va.from&&$a!=Oa.line||null!=Va.from&&$a==za.line&&Va.from>=za.ch||Wa&&!Wa(Va.marker)||Ba.push(Va.marker.parent||Va.marker);++$a}),Ba},getAllMarks:function(){var Oa=[];return this.iter(function(za){var Wa=za.markedSpans;if(Wa)for(var Ba=0;Ba<Wa.length;++Ba)null!=Wa[Ba].from&&Oa.push(Wa[Ba].marker)}),Oa},posFromIndex:function(Oa){var Wa=this.first,Ba=this.lineSeparator().length,za;return this.iter(function($a){var Ua=$a.text.length+Ba;return Ua>Oa?(za=Oa,!0):void(Oa-=Ua,++Wa)}),ve(this,ce(Wa,za))},indexFromPos:function(Oa){Oa=ve(this,Oa);var za=Oa.ch;if(Oa.line<this.first||0>Oa.ch)return 0;var Wa=this.lineSeparator().length;return this.iter(this.first,Oa.line,function(Ba){za+=Ba.text.length+Wa}),za},copy:function(Oa){var za=new ga(ne(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return za.scrollTop=this.scrollTop,za.scrollLeft=this.scrollLeft,za.sel=this.sel,za.extend=!1,Oa&&(za.history.undoDepth=this.history.undoDepth,za.setHistory(this.getHistory())),za},linkedDoc:function(Oa){Oa||(Oa={});var za=this.first,Wa=this.first+this.size;null!=Oa.from&&Oa.from>za&&(za=Oa.from),null!=Oa.to&&Oa.to<Wa&&(Wa=Oa.to);var Ba=new ga(ne(this,za,Wa),Oa.mode||this.modeOption,za,this.lineSep,this.direction);return Oa.sharedHist&&(Ba.history=this.history),(this.linked||(this.linked=[])).push({doc:Ba,sharedHist:Oa.sharedHist}),Ba.linked=[{doc:this,isParent:!0,sharedHist:Oa.sharedHist}],Mr(Ba,Er(this)),Ba},unlinkDoc:function(Oa){var za=this;if(Oa instanceof wl&&(Oa=Oa.doc),this.linked)for(var Wa=0,Ba;Wa<this.linked.length;++Wa)if(Ba=za.linked[Wa],Ba.doc==Oa){za.linked.splice(Wa,1),Oa.unlinkDoc(za),Pr(Er(za));break}if(Oa.history==this.history){var $a=[Oa.id];Oi(Oa,function(Ua){return $a.push(Ua.id)},!0),Oa.history=new $i(null),Oa.history.done=Ji(this.history.done,$a),Oa.history.undone=Ji(this.history.undone,$a)}},iterLinkedDocs:function(Oa){Oi(this,Oa)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(Oa){return this.lineSep?Oa.split(this.lineSep):Os(Oa)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:oi(function(Oa){"rtl"!=Oa&&(Oa="ltr"),Oa==this.direction||(this.direction=Oa,this.iter(function(za){return za.order=null}),this.cm&&Bi(this.cm))})}),ga.prototype.eachLine=ga.prototype.iter;for(var fa=0,ma=!1,ya={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},va=0;10>va;va++)ya[va+48]=ya[va+96]=va+"";for(var ba=65;90>=ba;ba++)ya[ba]=_StringfromCharCode(ba);for(var Ca=1;12>=Ca;Ca++)ya[Ca+111]=ya[Ca+63235]="F"+Ca;var xa={};xa.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},xa.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},xa.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},xa.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},xa["default"]=ss?xa.macDefault:xa.pcDefault;var ka={selectAll:fr,singleSelection:function(Oa){return Oa.setSelection(Oa.getCursor("anchor"),Oa.getCursor("head"),xs)},killLine:function(Oa){return Xr(Oa,function(za){if(za.empty()){var Wa=ee(Oa.doc,za.head.line).text.length;return za.head.ch==Wa&&za.head.line<Oa.lastLine()?{from:za.head,to:ce(za.head.line+1,0)}:{from:za.head,to:ce(za.head.line,Wa)}}return{from:za.from(),to:za.to()}})},deleteLine:function(Oa){return Xr(Oa,function(za){return{from:ce(za.from().line,0),to:ve(Oa.doc,ce(za.to().line+1,0))}})},delLineLeft:function(Oa){return Xr(Oa,function(za){return{from:ce(za.from().line,0),to:za.from()}})},delWrappedLineLeft:function(Oa){return Xr(Oa,function(za){var Wa=Oa.charCoords(za.head,"div").top+5,Ba=Oa.coordsChar({left:0,top:Wa},"div");return{from:Ba,to:za.from()}})},delWrappedLineRight:function(Oa){return Xr(Oa,function(za){var Wa=Oa.charCoords(za.head,"div").top+5,Ba=Oa.coordsChar({left:Oa.display.lineDiv.offsetWidth+100,top:Wa},"div");return{from:za.from(),to:Ba}})},undo:function(Oa){return Oa.undo()},redo:function(Oa){return Oa.redo()},undoSelection:function(Oa){return Oa.undoSelection()},redoSelection:function(Oa){return Oa.redoSelection()},goDocStart:function(Oa){return Oa.extendSelection(ce(Oa.firstLine(),0))},goDocEnd:function(Oa){return Oa.extendSelection(ce(Oa.lastLine()))},goLineStart:function(Oa){return Oa.extendSelectionsBy(function(za){return Yr(Oa,za.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(Oa){return Oa.extendSelectionsBy(function(za){return Qr(Oa,za.head)},{origin:"+move",bias:1})},goLineEnd:function(Oa){return Oa.extendSelectionsBy(function(za){return Zr(Oa,za.head.line)},{origin:"+move",bias:-1})},goLineRight:function(Oa){return Oa.extendSelectionsBy(function(za){var Wa=Oa.charCoords(za.head,"div").top+5;return Oa.coordsChar({left:Oa.display.lineDiv.offsetWidth+100,top:Wa},"div")},Ss)},goLineLeft:function(Oa){return Oa.extendSelectionsBy(function(za){var Wa=Oa.charCoords(za.head,"div").top+5;return Oa.coordsChar({left:0,top:Wa},"div")},Ss)},goLineLeftSmart:function(Oa){return Oa.extendSelectionsBy(function(za){var Wa=Oa.charCoords(za.head,"div").top+5,Ba=Oa.coordsChar({left:0,top:Wa},"div");return Ba.ch<Oa.getLine(Ba.line).search(/\S/)?Qr(Oa,za.head):Ba},Ss)},goLineUp:function(Oa){return Oa.moveV(-1,"line")},goLineDown:function(Oa){return Oa.moveV(1,"line")},goPageUp:function(Oa){return Oa.moveV(-1,"page")},goPageDown:function(Oa){return Oa.moveV(1,"page")},goCharLeft:function(Oa){return Oa.moveH(-1,"char")},goCharRight:function(Oa){return Oa.moveH(1,"char")},goColumnLeft:function(Oa){return Oa.moveH(-1,"column")},goColumnRight:function(Oa){return Oa.moveH(1,"column")},goWordLeft:function(Oa){return Oa.moveH(-1,"word")},goGroupRight:function(Oa){return Oa.moveH(1,"group")},goGroupLeft:function(Oa){return Oa.moveH(-1,"group")},goWordRight:function(Oa){return Oa.moveH(1,"word")},delCharBefore:function(Oa){return Oa.deleteH(-1,"char")},delCharAfter:function(Oa){return Oa.deleteH(1,"char")},delWordBefore:function(Oa){return Oa.deleteH(-1,"word")},delWordAfter:function(Oa){return Oa.deleteH(1,"word")},delGroupBefore:function(Oa){return Oa.deleteH(-1,"group")},delGroupAfter:function(Oa){return Oa.deleteH(1,"group")},indentAuto:function(Oa){return Oa.indentSelection("smart")},indentMore:function(Oa){return Oa.indentSelection("add")},indentLess:function(Oa){return Oa.indentSelection("subtract")},insertTab:function(Oa){return Oa.replaceSelection("\t")},insertSoftTab:function(Oa){for(var za=[],Wa=Oa.listSelections(),Ba=Oa.options.tabSize,$a=0;$a<Wa.length;$a++){var Ua=Wa[$a].from(),ja=R(Oa.getLine(Ua.line),Ua.ch,Ba);za.push(W(Ba-ja%Ba))}Oa.replaceSelections(za)},defaultTab:function(Oa){Oa.somethingSelected()?Oa.indentSelection("add"):Oa.execCommand("insertTab")},transposeChars:function(Oa){return Jn(Oa,function(){for(var za=Oa.listSelections(),Wa=[],Ba=0;Ba<za.length;Ba++)if(za[Ba].empty()){var $a=za[Ba].head,Ua=ee(Oa.doc,$a.line).text;if(Ua)if($a.ch==Ua.length&&($a=new ce($a.line,$a.ch-1)),0<$a.ch)$a=new ce($a.line,$a.ch+1),Oa.replaceRange(Ua.charAt($a.ch-1)+Ua.charAt($a.ch-2),ce($a.line,$a.ch-2),$a,"+transpose");else if($a.line>Oa.doc.first){var ja=ee(Oa.doc,$a.line-1).text;ja&&($a=new ce($a.line,1),Oa.replaceRange(Ua.charAt(0)+Oa.doc.lineSeparator()+ja.charAt(ja.length-1),ce($a.line-1,ja.length-1),$a,"+transpose"))}Wa.push(new la($a,$a))}Oa.setSelections(Wa)})},newlineAndIndent:function(Oa){return Jn(Oa,function(){for(var za=Oa.listSelections(),Wa=za.length-1;0<=Wa;Wa--)Oa.replaceRange(Oa.doc.lineSeparator(),za[Wa].anchor,za[Wa].head,"+input");za=Oa.listSelections();for(var Ba=0;Ba<za.length;Ba++)Oa.indentLine(za[Ba].from().line,null,!0);Mn(Oa)})},openLine:function(Oa){return Oa.replaceSelection("\n","start")},toggleOverwrite:function(Oa){return Oa.toggleOverwrite()}},wa=new vs,Sa=null,Na={toString:function(){return"CodeMirror.Init"}},Aa={},Ia={},La,Ta;wl.defaults=Aa,wl.optionHandlers=Ia;var Da=[];wl.defineInitHook=function(Oa){return Da.push(Oa)};var Ha=null,Ma=function(Oa){this.cm=Oa,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new vs,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Ma.prototype.init=function(Oa){function za(ja){if(!ut($a,ja)){if($a.somethingSelected())Tl({lineWise:!1,text:$a.getSelections()}),"cut"==ja.type&&$a.replaceSelection("",null,"cut");else{if(!$a.options.lineWiseCopyCut)return;var Ka=Dl($a);Tl({lineWise:!0,text:Ka.text}),"cut"==ja.type&&$a.operation(function(){$a.setSelections(Ka.ranges,0,xs),$a.replaceSelection("",null,"cut")})}if(ja.clipboardData){ja.clipboardData.clearData();var Va=Ha.text.join("\n");if(ja.clipboardData.setData("Text",Va),ja.clipboardData.getData("Text")==Va)return void ja.preventDefault()}var Ga=El(),qa=Ga.firstChild;$a.display.lineSpace.insertBefore(Ga,$a.display.lineSpace.firstChild),qa.value=Ha.text.join("\n");var _a=document.activeElement;ys(qa),setTimeout(function(){$a.display.lineSpace.removeChild(Ga),_a.focus(),_a==Ua&&Ba.showPrimarySelection()},50)}}var Wa=this,Ba=this,$a=Ba.cm,Ua=Ba.div=Oa.lineDiv;Hl(Ua,$a.options.spellcheck),Ms(Ua,"paste",function(ja){ut($a,ja)||Al(ja,$a)||11>=Yl&&setTimeout(ei($a,function(){return Wa.updateFromDOM()}),20)}),Ms(Ua,"compositionstart",function(ja){Wa.composing={data:ja.data,done:!1}}),Ms(Ua,"compositionupdate",function(ja){Wa.composing||(Wa.composing={data:ja.data,done:!1})}),Ms(Ua,"compositionend",function(ja){Wa.composing&&(ja.data!=Wa.composing.data&&Wa.readFromDOMSoon(),Wa.composing.done=!0)}),Ms(Ua,"touchstart",function(){return Ba.forceCompositionEnd()}),Ms(Ua,"input",function(){Wa.composing||Wa.readFromDOMSoon()}),Ms(Ua,"copy",za),Ms(Ua,"cut",za)},Ma.prototype.prepareSelection=function(){var Oa=gn(this.cm,!1);return Oa.focus=this.cm.state.focused,Oa},Ma.prototype.showSelection=function(Oa,za){Oa&&this.cm.display.view.length&&((Oa.focus||za)&&this.showPrimarySelection(),this.showMultipleSelections(Oa))},Ma.prototype.showPrimarySelection=function(){var Oa=window.getSelection(),za=this.cm,Wa=za.doc.sel.primary(),Ba=Wa.from(),$a=Wa.to();if(za.display.viewTo==za.display.viewFrom||Ba.line>=za.display.viewTo||$a.line<za.display.viewFrom)return void Oa.removeAllRanges();var Ua=Wl(za,Oa.anchorNode,Oa.anchorOffset),ja=Wl(za,Oa.focusNode,Oa.focusOffset);if(!Ua||Ua.bad||!ja||ja.bad||0!=pe(fe(Ua,ja),Ba)||0!=pe(ge(Ua,ja),$a)){var Ka=za.display.view,Va=Ba.line>=za.display.viewFrom&&Fl(za,Ba)||{node:Ka[0].measure.map[2],offset:0},Ga=$a.line<za.display.viewTo&&Fl(za,$a);if(!Ga){var qa=Ka[Ka.length-1].measure,_a=qa.maps?qa.maps[qa.maps.length-1]:qa.map;Ga={node:_a[_a.length-1],offset:_a[_a.length-2]-_a[_a.length-3]}}if(!Va||!Ga)return void Oa.removeAllRanges();var Xa=Oa.rangeCount&&Oa.getRangeAt(0),Ya;try{Ya=fs(Va.node,Va.offset,Ga.offset,Ga.node)}catch(Za){}Ya&&(!Vl&&za.state.focused?(Oa.collapse(Va.node,Va.offset),!Ya.collapsed&&(Oa.removeAllRanges(),Oa.addRange(Ya))):(Oa.removeAllRanges(),Oa.addRange(Ya)),Xa&&null==Oa.anchorNode?Oa.addRange(Xa):Vl&&this.startGracePeriod()),this.rememberSelection()}},Ma.prototype.startGracePeriod=function(){var Oa=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){Oa.gracePeriod=!1,Oa.selectionChanged()&&Oa.cm.operation(function(){return Oa.cm.curOp.selectionChanged=!0})},20)},Ma.prototype.showMultipleSelections=function(Oa){N(this.cm.display.cursorDiv,Oa.cursors),N(this.cm.display.selectionDiv,Oa.selection)},Ma.prototype.rememberSelection=function(){var Oa=window.getSelection();this.lastAnchorNode=Oa.anchorNode,this.lastAnchorOffset=Oa.anchorOffset,this.lastFocusNode=Oa.focusNode,this.lastFocusOffset=Oa.focusOffset},Ma.prototype.selectionInEditor=function(){var Oa=window.getSelection();if(!Oa.rangeCount)return!1;var za=Oa.getRangeAt(0).commonAncestorContainer;return D(this.div,za)},Ma.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(!this.selectionInEditor()&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Ma.prototype.blur=function(){this.div.blur()},Ma.prototype.getField=function(){return this.div},Ma.prototype.supportsTouch=function(){return!0},Ma.prototype.receivedFocus=function(){function Oa(){za.cm.state.focused&&(za.pollSelection(),za.polling.set(za.cm.options.pollInterval,Oa))}var za=this;this.selectionInEditor()?this.pollSelection():Jn(this.cm,function(){return za.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,Oa)},Ma.prototype.selectionChanged=function(){var Oa=window.getSelection();return Oa.anchorNode!=this.lastAnchorNode||Oa.anchorOffset!=this.lastAnchorOffset||Oa.focusNode!=this.lastFocusNode||Oa.focusOffset!=this.lastFocusOffset},Ma.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var Oa=window.getSelection(),za=this.cm;if(rs&&Jl&&this.cm.options.gutters.length&&Rl(Oa.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:_Mathabs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var Wa=Wl(za,Oa.anchorNode,Oa.anchorOffset),Ba=Wl(za,Oa.focusNode,Oa.focusOffset);Wa&&Ba&&Jn(za,function(){sr(za.doc,Ni(Wa,Ba),xs),(Wa.bad||Ba.bad)&&(za.curOp.selectionChanged=!0)})}}},Ma.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var Oa=this.cm,za=Oa.display,Wa=Oa.doc.sel.primary(),Ba=Wa.from(),$a=Wa.to();if(0==Ba.ch&&Ba.line>Oa.firstLine()&&(Ba=ce(Ba.line-1,ee(Oa.doc,Ba.line-1).length)),$a.ch==ee(Oa.doc,$a.line).text.length&&$a.line<Oa.lastLine()&&($a=ce($a.line+1,0)),Ba.line<za.viewFrom||$a.line>za.viewTo-1)return!1;var Ua,ja,Ka;Ba.line==za.viewFrom||0==(Ua=un(Oa,Ba.line))?(ja=le(za.view[0].line),Ka=za.view[0].node):(ja=le(za.view[Ua].line),Ka=za.view[Ua-1].node.nextSibling);var Va=un(Oa,$a.line),Ga,qa;if(Va==za.view.length-1?(Ga=za.viewTo-1,qa=za.lineDiv.lastChild):(Ga=le(za.view[Va+1].line)-1,qa=za.view[Va+1].node.previousSibling),!Ka)return!1;for(var _a=Oa.doc.splitLines(zl(Oa,Ka,qa,ja,Ga)),Xa=oe(Oa.doc,ce(ja,0),ce(Ga,ee(Oa.doc,Ga).text.length));1<_a.length&&1<Xa.length;)if(B(_a)==B(Xa))_a.pop(),Xa.pop(),Ga--;else if(_a[0]==Xa[0])_a.shift(),Xa.shift(),ja++;else break;for(var Ya=0,Za=0,Qa=_a[0],Ja=Xa[0],ed=_Mathmin(Qa.length,Ja.length);Ya<ed&&Qa.charCodeAt(Ya)==Ja.charCodeAt(Ya);)++Ya;for(var td=B(_a),od=B(Xa),nd=_Mathmin(td.length-(1==_a.length?Ya:0),od.length-(1==Xa.length?Ya:0));Za<nd&&td.charCodeAt(td.length-Za-1)==od.charCodeAt(od.length-Za-1);)++Za;if(1==_a.length&&1==Xa.length&&ja==Ba.line)for(;Ya&&Ya>Ba.ch&&td.charCodeAt(td.length-Za-1)==od.charCodeAt(od.length-Za-1);)Ya--,Za++;_a[_a.length-1]=td.slice(0,td.length-Za).replace(/^\u200b+/,""),_a[0]=_a[0].slice(Ya).replace(/\u200b+$/,"");var rd=ce(ja,Ya),ld=ce(Ga,Xa.length?B(Xa).length-Za:0);if(1<_a.length||_a[0]||pe(rd,ld))return wr(Oa.doc,_a,rd,ld,"+input"),!0},Ma.prototype.ensurePolled=function(){this.forceCompositionEnd()},Ma.prototype.reset=function(){this.forceCompositionEnd()},Ma.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Ma.prototype.readFromDOMSoon=function(){var Oa=this;null!=this.readDOMTimeout||(this.readDOMTimeout=setTimeout(function(){if(Oa.readDOMTimeout=null,Oa.composing)if(Oa.composing.done)Oa.composing=null;else return;Oa.updateFromDOM()},80))},Ma.prototype.updateFromDOM=function(){var Oa=this;(this.cm.isReadOnly()||!this.pollContent())&&Jn(this.cm,function(){return ni(Oa.cm)})},Ma.prototype.setUneditable=function(Oa){Oa.contentEditable="false"},Ma.prototype.onKeyPress=function(Oa){0==Oa.charCode||(Oa.preventDefault(),!this.cm.isReadOnly()&&ei(this.cm,Nl)(this.cm,_StringfromCharCode(null==Oa.charCode?Oa.keyCode:Oa.charCode),0))},Ma.prototype.readOnlyChanged=function(Oa){this.div.contentEditable=("nocursor"!=Oa)+""},Ma.prototype.onContextMenu=function(){},Ma.prototype.resetPosition=function(){},Ma.prototype.needsContentAttribute=!0;var Pa=function(Oa){this.cm=Oa,this.prevInput="",this.pollingFast=!1,this.polling=new vs,this.inaccurateSelection=!1,this.hasSelection=!1,this.composing=null};Pa.prototype.init=function(Oa){function za(Ka){if(!ut($a,Ka)){if($a.somethingSelected())Tl({lineWise:!1,text:$a.getSelections()}),Ba.inaccurateSelection&&(Ba.prevInput="",Ba.inaccurateSelection=!1,ja.value=Ha.text.join("\n"),ys(ja));else{if(!$a.options.lineWiseCopyCut)return;var Va=Dl($a);Tl({lineWise:!0,text:Va.text}),"cut"==Ka.type?$a.setSelections(Va.ranges,null,xs):(Ba.prevInput="",ja.value=Va.text.join("\n"),ys(ja))}"cut"==Ka.type&&($a.state.cutIncoming=!0)}}var Wa=this,Ba=this,$a=this.cm,Ua=this.wrapper=El(),ja=this.textarea=Ua.firstChild;Oa.wrapper.insertBefore(Ua,Oa.wrapper.firstChild),is&&(ja.style.width="0px"),Ms(ja,"input",function(){Xl&&9<=Yl&&Wa.hasSelection&&(Wa.hasSelection=null),Ba.poll()}),Ms(ja,"paste",function(Ka){ut($a,Ka)||Al(Ka,$a)||($a.state.pasteIncoming=!0,Ba.fastPoll())}),Ms(ja,"cut",za),Ms(ja,"copy",za),Ms(Oa.scroller,"paste",function(Ka){So(Oa,Ka)||ut($a,Ka)||($a.state.pasteIncoming=!0,Ba.focus())}),Ms(Oa.lineSpace,"selectstart",function(Ka){So(Oa,Ka)||mt(Ka)}),Ms(ja,"compositionstart",function(){var Ka=$a.getCursor("from");Ba.composing&&Ba.composing.range.clear(),Ba.composing={start:Ka,range:$a.markText(Ka,$a.getCursor("to"),{className:"CodeMirror-composing"})}}),Ms(ja,"compositionend",function(){Ba.composing&&(Ba.poll(),Ba.composing.range.clear(),Ba.composing=null)})},Pa.prototype.prepareSelection=function(){var Oa=this.cm,za=Oa.display,Wa=Oa.doc,Ba=gn(Oa);if(Oa.options.moveInputWithCursor){var $a=Yo(Oa,Wa.sel.primary().head,"div"),Ua=za.wrapper.getBoundingClientRect(),ja=za.lineDiv.getBoundingClientRect();Ba.teTop=_Mathmax(0,_Mathmin(za.wrapper.clientHeight-10,$a.top+ja.top-Ua.top)),Ba.teLeft=_Mathmax(0,_Mathmin(za.wrapper.clientWidth-10,$a.left+ja.left-Ua.left))}return Ba},Pa.prototype.showSelection=function(Oa){var za=this.cm,Wa=za.display;N(Wa.cursorDiv,Oa.cursors),N(Wa.selectionDiv,Oa.selection),null!=Oa.teTop&&(this.wrapper.style.top=Oa.teTop+"px",this.wrapper.style.left=Oa.teLeft+"px")},Pa.prototype.reset=function(Oa){if(!(this.contextMenuPending||this.composing)){var Ba=this.cm,$a=Ba.doc,za,Wa;if(Ba.somethingSelected()){this.prevInput="";var Ua=$a.sel.primary();za=Ws&&(100<Ua.to().line-Ua.from().line||1e3<(Wa=Ba.getSelection()).length);var ja=za?"-":Wa||Ba.getSelection();this.textarea.value=ja,Ba.state.focused&&ys(this.textarea),Xl&&9<=Yl&&(this.hasSelection=ja)}else Oa||(this.prevInput=this.textarea.value="",Xl&&9<=Yl&&(this.hasSelection=null));this.inaccurateSelection=za}},Pa.prototype.getField=function(){return this.textarea},Pa.prototype.supportsTouch=function(){return!1},Pa.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!ls||H()!=this.textarea))try{this.textarea.focus()}catch(Oa){}},Pa.prototype.blur=function(){this.textarea.blur()},Pa.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Pa.prototype.receivedFocus=function(){this.slowPoll()},Pa.prototype.slowPoll=function(){var Oa=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){Oa.poll(),Oa.cm.state.focused&&Oa.slowPoll()})},Pa.prototype.fastPoll=function(){function Oa(){var Ba=Wa.poll();Ba||za?(Wa.pollingFast=!1,Wa.slowPoll()):(za=!0,Wa.polling.set(60,Oa))}var za=!1,Wa=this;Wa.pollingFast=!0,Wa.polling.set(20,Oa)},Pa.prototype.poll=function(){var Oa=this,za=this.cm,Wa=this.textarea,Ba=this.prevInput;if(this.contextMenuPending||!za.state.focused||zs(Wa)&&!Ba&&!this.composing||za.isReadOnly()||za.options.disableInput||za.state.keySeq)return!1;var $a=Wa.value;if($a==Ba&&!za.somethingSelected())return!1;if(Xl&&9<=Yl&&this.hasSelection===$a||ss&&/[\uf700-\uf7ff]/.test($a))return za.display.input.reset(),!1;if(za.doc.sel==za.display.selForContextMenu){var Ua=$a.charCodeAt(0);if(8203!=Ua||Ba||(Ba="\u200B"),8666==Ua)return this.reset(),this.cm.execCommand("undo")}for(var ja=0,Ka=_Mathmin(Ba.length,$a.length);ja<Ka&&Ba.charCodeAt(ja)==$a.charCodeAt(ja);)++ja;return Jn(za,function(){Nl(za,$a.slice(ja),Ba.length-ja,null,Oa.composing?"*compose":null),1e3<$a.length||-1<$a.indexOf("\n")?Wa.value=Oa.prevInput="":Oa.prevInput=$a,Oa.composing&&(Oa.composing.range.clear(),Oa.composing.range=za.markText(Oa.composing.start,za.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Pa.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Pa.prototype.onKeyPress=function(){Xl&&9<=Yl&&(this.hasSelection=null),this.fastPoll()},Pa.prototype.onContextMenu=function(Oa){function za(){if(null!=ja.selectionStart){var Qa=$a.somethingSelected(),Ja="\u200B"+(Qa?ja.value:"");ja.value="\u21DA",ja.value=Ja,Ba.prevInput=Qa?"":"\u200B",ja.selectionStart=1,ja.selectionEnd=Ja.length,Ua.selForContextMenu=$a.doc.sel}}function Wa(){if(Ba.contextMenuPending=!1,Ba.wrapper.style.cssText=_a,ja.style.cssText=qa,Xl&&9>Yl&&Ua.scrollbars.setScrollTop(Ua.scroller.scrollTop=Va),null!=ja.selectionStart){(!Xl||Xl&&9>Yl)&&za();var Qa=0,Ja=function(){Ua.selForContextMenu==$a.doc.sel&&0==ja.selectionStart&&0<ja.selectionEnd&&"\u200B"==Ba.prevInput?ei($a,fr)($a):10>Qa++?Ua.detectingSelectAll=setTimeout(Ja,500):(Ua.selForContextMenu=null,Ua.input.reset())};Ua.detectingSelectAll=setTimeout(Ja,200)}}var Ba=this,$a=Ba.cm,Ua=$a.display,ja=Ba.textarea,Ka=pn($a,Oa),Va=Ua.scroller.scrollTop;if(Ka&&!es){var Ga=$a.options.resetSelectionOnContextMenu;Ga&&-1==$a.doc.sel.contains(Ka)&&ei($a,sr)($a.doc,Ni(Ka),xs);var qa=ja.style.cssText,_a=Ba.wrapper.style.cssText;Ba.wrapper.style.cssText="position: absolute";var Xa=Ba.wrapper.getBoundingClientRect();ja.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(Oa.clientY-Xa.top-5)+"px; left: "+(Oa.clientX-Xa.left-5)+"px;\n      z-index: 1000; background: "+(Xl?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var Ya;if(Zl&&(Ya=window.scrollY),Ua.input.focus(),Zl&&window.scrollTo(null,Ya),Ua.input.reset(),$a.somethingSelected()||(ja.value=Ba.prevInput=" "),Ba.contextMenuPending=!0,Ua.selForContextMenu=$a.doc.sel,clearTimeout(Ua.detectingSelectAll),Xl&&9<=Yl&&za(),hs){bt(Oa);var Za=function(){ct(window,"mouseup",Za),setTimeout(Wa,20)};Ms(window,"mouseup",Za)}else setTimeout(Wa,50)}},Pa.prototype.readOnlyChanged=function(Oa){Oa||this.reset()},Pa.prototype.setUneditable=function(){},Pa.prototype.needsContentAttribute=!1,function(Oa){function za(Ba,$a,Ua,ja){Oa.defaults[Ba]=$a,Ua&&(Wa[Ba]=ja?function(Ka,Va,Ga){Ga!=Na&&Ua(Ka,Va,Ga)}:Ua)}var Wa=Oa.optionHandlers;Oa.defineOption=za,Oa.Init=Na,za("value","",function(Ba,$a){return Ba.setValue($a)},!0),za("mode",null,function(Ba,$a){Ba.doc.modeOption=$a,Mi(Ba)},!0),za("indentUnit",2,Mi,!0),za("indentWithTabs",!1),za("smartIndent",!0),za("tabSize",4,function(Ba){Pi(Ba),Ko(Ba),ni(Ba)},!0),za("lineSeparator",null,function(Ba,$a){if(Ba.doc.lineSep=$a,!!$a){var Ua=[],ja=Ba.doc.first;Ba.doc.iter(function(Va){for(var Ga=0,qa;;){if(qa=Va.text.indexOf($a,Ga),-1==qa)break;Ga=qa+$a.length,Ua.push(ce(ja,qa))}ja++});for(var Ka=Ua.length-1;0<=Ka;Ka--)wr(Ba.doc,$a,Ua[Ka],ce(Ua[Ka].line,Ua[Ka].ch+$a.length))}}),za("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(Ba,$a,Ua){Ba.state.specialChars=new RegExp($a.source+($a.test("\t")?"":"|\t"),"g"),Ua!=Na&&Ba.refresh()}),za("specialCharPlaceholder",qt,function(Ba){return Ba.refresh()},!0),za("electricChars",!0),za("inputStyle",ls?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),za("spellcheck",!1,function(Ba,$a){return Ba.getInputField().spellcheck=$a},!0),za("rtlMoveVisually",!cs),za("wholeLineUpdateBefore",!0),za("theme","default",function(Ba){vl(Ba),Cl(Ba)},!0),za("keyMap","default",function(Ba,$a,Ua){var ja=_r($a),Ka=Ua!=Na&&_r(Ua);Ka&&Ka.detach&&Ka.detach(Ba,ja),ja.attach&&ja.attach(Ba,Ka||null)}),za("extraKeys",null),za("lineWrapping",!1,kl,!0),za("gutters",[],function(Ba){ki(Ba.options),Cl(Ba)},!0),za("fixedGutter",!0,function(Ba,$a){Ba.display.gutters.style.left=$a?an(Ba.display)+"px":"0",Ba.refresh()},!0),za("coverGutterNextToScrollbar",!1,function(Ba){return Un(Ba)},!0),za("scrollbarStyle","native",function(Ba){Kn(Ba),Un(Ba),Ba.display.scrollbars.setScrollTop(Ba.doc.scrollTop),Ba.display.scrollbars.setScrollLeft(Ba.doc.scrollLeft)},!0),za("lineNumbers",!1,function(Ba){ki(Ba.options),Cl(Ba)},!0),za("firstLineNumber",1,Cl,!0),za("lineNumberFormatter",function(Ba){return Ba},Cl,!0),za("showCursorWhenSelecting",!1,hn,!0),za("resetSelectionOnContextMenu",!0),za("lineWiseCopyCut",!0),za("readOnly",!1,function(Ba,$a){"nocursor"==$a?(kn(Ba),Ba.display.input.blur(),Ba.display.disabled=!0):Ba.display.disabled=!1,Ba.display.input.readOnlyChanged($a)}),za("disableInput",!1,function(Ba,$a){$a||Ba.display.input.reset()},!0),za("dragDrop",!0,xl),za("allowDropFileTypes",null),za("cursorBlinkRate",530),za("cursorScrollMargin",0),za("cursorHeight",1,hn,!0),za("singleCursorHeightPerLine",!0,hn,!0),za("workTime",100),za("workDelay",100),za("flattenSpans",!0,Pi,!0),za("addModeClass",!1,Pi,!0),za("pollInterval",100),za("undoDepth",200,function(Ba,$a){return Ba.doc.history.undoDepth=$a}),za("historyEventDelay",1250),za("viewportMargin",10,function(Ba){return Ba.refresh()},!0),za("maxHighlightLength",1e4,Pi,!0),za("moveInputWithCursor",!0,function(Ba,$a){$a||Ba.display.input.resetPosition()}),za("tabindex",null,function(Ba,$a){return Ba.display.input.getField().tabIndex=$a||""}),za("autofocus",null),za("direction","ltr",function(Ba,$a){return Ba.doc.setDirection($a)},!0)}(wl),function(Oa){var za=Oa.optionHandlers,Wa=Oa.helpers={};Oa.prototype={constructor:Oa,focus:function(){window.focus(),this.display.input.focus()},setOption:function(Ba,$a){var Ua=this.options,ja=Ua[Ba];Ua[Ba]==$a&&"mode"!=Ba||(Ua[Ba]=$a,za.hasOwnProperty(Ba)&&ei(this,za[Ba])(this,$a,ja),pt(this,"optionChange",this,Ba))},getOption:function(Ba){return this.options[Ba]},getDoc:function(){return this.doc},addKeyMap:function(Ba,$a){this.state.keyMaps[$a?"push":"unshift"](_r(Ba))},removeKeyMap:function(Ba){for(var $a=this.state.keyMaps,Ua=0;Ua<$a.length;++Ua)if($a[Ua]==Ba||$a[Ua].name==Ba)return $a.splice(Ua,1),!0},addOverlay:ti(function(Ba,$a){var Ua=Ba.token?Ba:Oa.getMode(this.options,Ba);if(Ua.startState)throw new Error("Overlays may not be stateful.");K(this.state.overlays,{mode:Ua,modeSpec:Ba,opaque:$a&&$a.opaque,priority:$a&&$a.priority||0},function(ja){return ja.priority}),this.state.modeGen++,ni(this)}),removeOverlay:ti(function(Ba){for(var $a=this,Ua=this.state.overlays,ja=0,Ka;ja<Ua.length;++ja)if(Ka=Ua[ja].modeSpec,Ka==Ba||"string"==typeof Ba&&Ka.name==Ba)return Ua.splice(ja,1),$a.state.modeGen++,void ni($a)}),indentLine:ti(function(Ba,$a,Ua){"string"!=typeof $a&&"number"!=typeof $a&&(null==$a?$a=this.options.smartIndent?"smart":"prev":$a=$a?"add":"subtract"),ae(this.doc,Ba)&&Ll(this,Ba,$a,Ua)}),indentSelection:ti(function(Ba){for(var $a=this,Ua=this.doc.sel.ranges,ja=-1,Ka=0,Va;Ka<Ua.length;Ka++)if(Va=Ua[Ka],!Va.empty()){var Ga=Va.from(),qa=Va.to(),_a=_Mathmax(ja,Ga.line);ja=_Mathmin($a.lastLine(),qa.line-(qa.ch?0:1))+1;for(var Xa=_a;Xa<ja;++Xa)Ll($a,Xa,Ba);var Ya=$a.doc.sel.ranges;0==Ga.ch&&Ua.length==Ya.length&&0<Ya[Ka].from().ch&&nr($a.doc,Ka,new la(Ga,Ya[Ka].to()),xs)}else Va.head.line>ja&&(Ll($a,Va.head.line,Ba,!0),ja=Va.head.line,Ka==$a.doc.sel.primIndex&&Mn($a))}),getTokenAt:function(Ba,$a){return Wt(this,Ba,$a)},getLineTokens:function(Ba,$a){return Wt(this,ce(Ba),$a,!0)},getTokenTypeAt:function(Ba){Ba=ve(this.doc,Ba);var $a=Pt(this,ee(this.doc,Ba.line)),Ua=0,ja=($a.length-1)/2,Ka=Ba.ch,Va;if(0==Ka)Va=$a[2];else for(;;){var Ga=Ua+ja>>1;if((Ga?$a[2*Ga-1]:0)>=Ka)ja=Ga;else if($a[2*Ga+1]<Ka)Ua=Ga+1;else{Va=$a[2*Ga+2];break}}var qa=Va?Va.indexOf("overlay "):-1;return 0>qa?Va:0==qa?null:Va.slice(0,qa-1)},getModeAt:function(Ba){var $a=this.doc.mode;return $a.innerMode?Oa.innerMode($a,this.getTokenAt(Ba).state).mode:$a},getHelper:function(Ba,$a){return this.getHelpers(Ba,$a)[0]},getHelpers:function(Ba,$a){var Ua=this,ja=[];if(!Wa.hasOwnProperty($a))return ja;var Ka=Wa[$a],Va=this.getModeAt(Ba);if("string"==typeof Va[$a])Ka[Va[$a]]&&ja.push(Ka[Va[$a]]);else if(Va[$a])for(var Ga=0,qa;Ga<Va[$a].length;Ga++)qa=Ka[Va[$a][Ga]],qa&&ja.push(qa);else Va.helperType&&Ka[Va.helperType]?ja.push(Ka[Va.helperType]):Ka[Va.name]&&ja.push(Ka[Va.name]);for(var _a=0,Xa;_a<Ka._global.length;_a++)Xa=Ka._global[_a],Xa.pred(Va,Ua)&&-1==O(ja,Xa.val)&&ja.push(Xa.val);return ja},getStateAfter:function(Ba,$a){var Ua=this.doc;return Ba=ye(Ua,null==Ba?Ua.first+Ua.size-1:Ba),Ft(this,Ba+1,$a)},cursorCoords:function(Ba,$a){var ja=this.doc.sel.primary(),Ua;return Ua=null==Ba?ja.head:"object"==typeof Ba?ve(this.doc,Ba):Ba?ja.from():ja.to(),Yo(this,Ua,$a||"page")},charCoords:function(Ba,$a){return Xo(this,ve(this.doc,Ba),$a||"page")},coordsChar:function(Ba,$a){return Ba=_o(this,Ba,$a||"page"),Jo(this,Ba.left,Ba.top)},lineAtHeight:function(Ba,$a){return Ba=_o(this,{top:Ba,left:0},$a||"page").top,se(this.doc,Ba+this.display.viewOffset)},heightAtLine:function(Ba,$a,Ua){var ja=!1,Ka;if("number"==typeof Ba){var Va=this.doc.first+this.doc.size-1;Ba<this.doc.first?Ba=this.doc.first:Ba>Va&&(Ba=Va,ja=!0),Ka=ee(this.doc,Ba)}else Ka=Ba;return qo(this,Ka,{top:0,left:0},$a||"page",Ua||ja).top+(ja?this.doc.height-Ye(Ka):0)},defaultTextHeight:function(){return rn(this.display)},defaultCharWidth:function(){return ln(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(Ba,$a,Ua,ja,Ka){var Va=this.display;Ba=Yo(this,ve(this.doc,Ba));var Ga=Ba.bottom,qa=Ba.left;if($a.style.position="absolute",$a.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable($a),Va.sizer.appendChild($a),"over"==ja)Ga=Ba.top;else if("above"==ja||"near"==ja){var _a=_Mathmax(Va.wrapper.clientHeight,this.doc.height),Xa=_Mathmax(Va.sizer.clientWidth,Va.lineSpace.clientWidth);("above"==ja||Ba.bottom+$a.offsetHeight>_a)&&Ba.top>$a.offsetHeight?Ga=Ba.top-$a.offsetHeight:Ba.bottom+$a.offsetHeight<=_a&&(Ga=Ba.bottom),qa+$a.offsetWidth>Xa&&(qa=Xa-$a.offsetWidth)}$a.style.top=Ga+"px",$a.style.left=$a.style.right="","right"==Ka?(qa=Va.sizer.clientWidth-$a.offsetWidth,$a.style.right="0px"):("left"==Ka?qa=0:"middle"==Ka&&(qa=(Va.sizer.clientWidth-$a.offsetWidth)/2),$a.style.left=qa+"px"),Ua&&Dn(this,{left:qa,top:Ga,right:qa+$a.offsetWidth,bottom:Ga+$a.offsetHeight})},triggerOnKeyDown:ti(ll),triggerOnKeyPress:ti(dl),triggerOnKeyUp:al,execCommand:function(Ba){if(ka.hasOwnProperty(Ba))return ka[Ba].call(null,this)},triggerElectric:ti(function(Ba){Il(this,Ba)}),findPosH:function(Ba,$a,Ua,ja){var Ka=this,Va=1;0>$a&&(Va=-1,$a=-$a);for(var Ga=ve(this.doc,Ba),qa=0;qa<$a&&(Ga=Ml(Ka.doc,Ga,Va,Ua,ja),!Ga.hitSide);++qa);return Ga},moveH:ti(function(Ba,$a){var Ua=this;this.extendSelectionsBy(function(ja){return Ua.display.shift||Ua.doc.extend||ja.empty()?Ml(Ua.doc,ja.head,Ba,$a,Ua.options.rtlMoveVisually):0>Ba?ja.from():ja.to()},Ss)}),deleteH:ti(function(Ba,$a){var Ua=this.doc.sel,ja=this.doc;Ua.somethingSelected()?ja.replaceSelection("",null,"+delete"):Xr(this,function(Ka){var Va=Ml(ja,Ka.head,Ba,$a,!1);return 0>Ba?{from:Va,to:Ka.head}:{from:Ka.head,to:Va}})}),findPosV:function(Ba,$a,Ua,ja){var Ka=this,Va=1,Ga=ja;0>$a&&(Va=-1,$a=-$a);for(var qa=ve(this.doc,Ba),_a=0,Xa;_a<$a&&(Xa=Yo(Ka,qa,"div"),null==Ga?Ga=Xa.left:Xa.left=Ga,qa=Pl(Ka,Xa,Va,Ua),!qa.hitSide);++_a);return qa},moveV:ti(function(Ba,$a){var Ua=this,ja=this.doc,Ka=[],Va=!this.display.shift&&!ja.extend&&ja.sel.somethingSelected();if(ja.extendSelectionsBy(function(qa){if(Va)return 0>Ba?qa.from():qa.to();var _a=Yo(Ua,qa.head,"div");null!=qa.goalColumn&&(_a.left=qa.goalColumn),Ka.push(_a.left);var Xa=Pl(Ua,_a,Ba,$a);return"page"==$a&&qa==ja.sel.primary()&&En(Ua,Xo(Ua,Xa,"div").top-_a.top),Xa},Ss),Ka.length)for(var Ga=0;Ga<ja.sel.ranges.length;Ga++)ja.sel.ranges[Ga].goalColumn=Ka[Ga]}),findWordAt:function(Ba){var $a=this.doc,Ua=ee($a,Ba.line).text,ja=Ba.ch,Ka=Ba.ch;if(Ua){var Va=this.getHelper(Ba,"wordChars");("before"==Ba.sticky||Ka==Ua.length)&&ja?--ja:++Ka;for(var Ga=Ua.charAt(ja),qa=_(Ga,Va)?function(_a){return _(_a,Va)}:/\s/.test(Ga)?function(_a){return /\s/.test(_a)}:function(_a){return!/\s/.test(_a)&&!_(_a)};0<ja&&qa(Ua.charAt(ja-1));)--ja;for(;Ka<Ua.length&&qa(Ua.charAt(Ka));)++Ka}return new la(ce(Ba.line,ja),ce(Ba.line,Ka))},toggleOverwrite:function(Ba){null!=Ba&&Ba==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?E(this.display.cursorDiv,"CodeMirror-overwrite"):gs(this.display.cursorDiv,"CodeMirror-overwrite"),pt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==H()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:ti(function(Ba,$a){Pn(this,Ba,$a)}),getScrollInfo:function(){var Ba=this.display.scroller;return{left:Ba.scrollLeft,top:Ba.scrollTop,height:Ba.scrollHeight-Ao(this)-this.display.barHeight,width:Ba.scrollWidth-Ao(this)-this.display.barWidth,clientHeight:Do(this),clientWidth:Io(this)}},scrollIntoView:ti(function(Ba,$a){null==Ba?(Ba={from:this.doc.sel.primary().head,to:null},null==$a&&($a=this.options.cursorScrollMargin)):"number"==typeof Ba?Ba={from:ce(Ba,0),to:null}:null==Ba.from&&(Ba={from:Ba,to:null}),Ba.to||(Ba.to=Ba.from),Ba.margin=$a||0,null==Ba.from.line?On(this,Ba.from,Ba.to,Ba.margin):Fn(this,Ba)}),setSize:ti(function(Ba,$a){var Ua=this,ja=function(Va){return"number"==typeof Va||/^\d+$/.test(Va+"")?Va+"px":Va};null!=Ba&&(this.display.wrapper.style.width=ja(Ba)),null!=$a&&(this.display.wrapper.style.height=ja($a)),this.options.lineWrapping&&jo(this);var Ka=this.display.viewFrom;this.doc.iter(Ka,this.display.viewTo,function(Va){if(Va.widgets)for(var Ga=0;Ga<Va.widgets.length;Ga++)if(Va.widgets[Ga].noHScroll){ii(Ua,Ka,"widget");break}++Ka}),this.curOp.forceUpdate=!0,pt(this,"refresh",this)}),operation:function(Ba){return Jn(this,Ba)},refresh:ti(function(){var Ba=this.display.cachedTextHeight;ni(this),this.curOp.forceUpdate=!0,Ko(this),Pn(this,this.doc.scrollLeft,this.doc.scrollTop),bi(this),(null==Ba||.5<_Mathabs(Ba-rn(this.display)))&&cn(this),pt(this,"refresh",this)}),swapDoc:ti(function(Ba){var $a=this.doc;return $a.cm=null,zi(this,Ba),Ko(this),this.display.input.reset(),Pn(this,Ba.scrollLeft,Ba.scrollTop),this.curOp.forceScroll=!0,ao(this,"swapDoc",this,$a),$a}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},ft(Oa),Oa.registerHelper=function(Ba,$a,Ua){Wa.hasOwnProperty(Ba)||(Wa[Ba]=Oa[Ba]={_global:[]}),Wa[Ba][$a]=Ua},Oa.registerGlobalHelper=function(Ba,$a,Ua,ja){Oa.registerHelper(Ba,$a,ja),Wa[Ba]._global.push({pred:Ua,val:ja})}}(wl);var Fa="iter insert remove copy getEditor constructor".split(" ");for(var Ra in ga.prototype)ga.prototype.hasOwnProperty(Ra)&&0>O(Fa,Ra)&&(wl.prototype[Ra]=function(Oa){return function(){return Oa.apply(this.doc,arguments)}}(ga.prototype[Ra]));return ft(ga),wl.inputStyles={textarea:Pa,contenteditable:Ma},wl.defineMode=function(Oa){wl.defaults.mode||"null"==Oa||(wl.defaults.mode=Oa),Lt.apply(this,arguments)},wl.defineMIME=function(Oa,za){Us[Oa]=za},wl.defineMode("null",function(){return{token:function(Oa){return Oa.skipToEnd()}}}),wl.defineMIME("text/plain","null"),wl.defineExtension=function(Oa,za){wl.prototype[Oa]=za},wl.defineDocExtension=function(Oa,za){ga.prototype[Oa]=za},wl.fromTextArea=function(Oa,za){function Wa(){Oa.value=Ka.getValue()}if(za=za?F(za):{},za.value=Oa.value,!za.tabindex&&Oa.tabIndex&&(za.tabindex=Oa.tabIndex),!za.placeholder&&Oa.placeholder&&(za.placeholder=Oa.placeholder),null==za.autofocus){var Ba=H();za.autofocus=Ba==Oa||null!=Oa.getAttribute("autofocus")&&Ba==document.body}var $a;if(Oa.form&&(Ms(Oa.form,"submit",Wa),!za.leaveSubmitMethodAlone)){var Ua=Oa.form;$a=Ua.submit;try{var ja=Ua.submit=function(){Wa(),Ua.submit=$a,Ua.submit(),Ua.submit=ja}}catch(Va){}}za.finishInit=function(Va){Va.save=Wa,Va.getTextArea=function(){return Oa},Va.toTextArea=function(){Va.toTextArea=isNaN,Wa(),Oa.parentNode.removeChild(Va.getWrapperElement()),Oa.style.display="",Oa.form&&(ct(Oa.form,"submit",Wa),"function"==typeof Oa.form.submit&&(Oa.form.submit=$a))}},Oa.style.display="none";var Ka=wl(function(Va){return Oa.parentNode.insertBefore(Va,Oa.nextSibling)},za);return Ka},function(Oa){Oa.off=ct,Oa.on=Ms,Oa.wheelEventPixels=Si,Oa.Doc=ga,Oa.splitLines=Os,Oa.countColumn=R,Oa.findColumn=z,Oa.isWordChar=q,Oa.Pass=Cs,Oa.signal=pt,Oa.Line=Vs,Oa.changeEnd=Ai,Oa.scrollbarModel=ea,Oa.Pos=ce,Oa.cmpPos=pe,Oa.modes=$s,Oa.mimeModes=Us,Oa.resolveMode=Nt,Oa.getMode=At,Oa.modeExtensions=js,Oa.extendMode=It,Oa.copyState=Dt,Oa.startState=Et,Oa.innerMode=Ht,Oa.commands=ka,Oa.keyMap=xa,Oa.keyName=qr,Oa.isModifierKey=Gr,Oa.lookupKey=Vr,Oa.normalizeKeyMap=Kr,Oa.StringStream=Ks,Oa.SharedTextMarker=ua,Oa.TextMarker=pa,Oa.LineWidget=da,Oa.e_preventDefault=mt,Oa.e_stopPropagation=yt,Oa.e_stop=bt,Oa.addClass=E,Oa.contains=D,Oa.rmClass=gs,Oa.keyNames=ya}(wl),wl.version="5.26.0",wl})},{}],2:[function(c){"use strict";var L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(T){return typeof T}:function(T){return T&&"function"==typeof Symbol&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T};(function(T){T(window.jQuery)})(function(T){"use strict";var N=function(){var et=0;return{eq:function(ct){return function(pt){return ct===pt}},eq2:function(ct,pt){return ct===pt},peq2:function(ct){return function(pt,ut){return pt[ct]===ut[ct]}},ok:function(){return!0},fail:function(){return!1},self:function(ct){return ct},not:function(ct){return function(){return!ct.apply(ct,arguments)}},and:function(ct,pt){return function(ut){return ct(ut)&&pt(ut)}},invoke:function(ct,pt){return function(){return ct[pt].apply(ct,arguments)}},uniqueId:function(ct){var pt=++et+"";return ct?ct+pt:pt},rect2bnd:function(ct){var pt=T(document);return{top:ct.top+pt.scrollTop(),left:ct.left+pt.scrollLeft(),width:ct.right-ct.left,height:ct.bottom-ct.top}},invertObject:function(ct){var pt={};for(var ut in ct)ct.hasOwnProperty(ut)&&(pt[ct[ut]]=ut);return pt},namespaceToCamel:function(ct,pt){return pt=pt||"",pt+ct.split(".").map(function(ut){return ut.substring(0,1).toUpperCase()+ut.substring(1)}).join("")},debounce:function(ct,pt,ut){var ht;return function(){var gt=this,ft=arguments,yt=ut&&!ht;clearTimeout(ht),ht=setTimeout(function(){ht=null,ut||ct.apply(gt,ft)},pt),yt&&ct.apply(gt,ft)}}}}(),A=function(){var Ke=function(pt){return pt[0]},Ve=function(pt){return pt[pt.length-1]},qe=function(pt){return pt.slice(1)},Ze=function(pt,ut){return T.inArray(ut,pt)},Qe=function(pt,ut){return-1!==Ze(pt,ut)};return{head:Ke,last:Ve,initial:function(pt){return pt.slice(0,pt.length-1)},tail:qe,prev:function(pt,ut){var ht=Ze(pt,ut);return-1===ht?null:pt[ht-1]},next:function(pt,ut){var ht=Ze(pt,ut);return-1===ht?null:pt[ht+1]},find:function(pt,ut){for(var ht=0,gt=pt.length,ft;ht<gt;ht++)if(ft=pt[ht],ut(ft))return ft},contains:Qe,all:function(pt,ut){for(var ht=0,gt=pt.length;ht<gt;ht++)if(!ut(pt[ht]))return!1;return!0},sum:function(pt,ut){return ut=ut||N.self,pt.reduce(function(ht,gt){return ht+ut(gt)},0)},from:function(pt){for(var ut=[],ht=-1,gt=pt.length;++ht<gt;)ut[ht]=pt[ht];return ut},isEmpty:function(pt){return!pt||!pt.length},clusterBy:function(pt,ut){if(!pt.length)return[];var ht=qe(pt);return ht.reduce(function(gt,ft){var mt=Ve(gt);return ut(Ve(mt),ft)?mt[mt.length]=ft:gt[gt.length]=[ft],gt},[[Ke(pt)]])},compact:function(pt){for(var ut=[],ht=0,gt=pt.length;ht<gt;ht++)pt[ht]&&ut.push(pt[ht]);return ut},unique:function(pt){for(var ut=[],ht=0,gt=pt.length;ht<gt;ht++)Qe(ut,pt[ht])||ut.push(pt[ht]);return ut}}}(),I="function"==typeof define&&define.amd,H=navigator.userAgent,E=/MSIE|Trident/i.test(H),M;if(E){var P=/MSIE (\d+[.]\d+)/.exec(H);P&&(M=parseFloat(P[1])),P=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(H),P&&(M=parseFloat(P[1]))}var F=/Edge\/\d+/.test(H),R=!!window.CodeMirror;!R&&I&&(c("codemirror"),R=!0);var O={isMac:-1<navigator.appVersion.indexOf("Mac"),isMSIE:E,isEdge:F,isFF:!F&&/firefox/i.test(H),isPhantom:/PhantomJS/i.test(H),isWebkit:!F&&/webkit/i.test(H),isChrome:!F&&/chrome/i.test(H),isSafari:!F&&/safari/i.test(H),browserVersion:M,jqueryVersion:parseFloat(T.fn.jquery),isSupportAmd:I,hasCodeMirror:R,isFontInstalled:function(Ve){var Ge="Comic Sans MS"===Ve?"Courier New":"Comic Sans MS",qe=T("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),Xe=qe.css("fontFamily",Ge).width(),Ye=qe.css("fontFamily",Ve+","+Ge).width();return qe.remove(),Xe!==Ye},isW3CRangeSupport:!!document.createRange},z="\xA0",B=function(){var Ke=function(bo){return bo&&T(bo).hasClass("note-editable")},Ge=function(bo){return bo=bo.toUpperCase(),function(Co){return Co&&Co.nodeName.toUpperCase()===bo}},qe=function(bo){return bo&&3===bo.nodeType},Ye=function(bo){return bo&&/^BR|^IMG|^HR|^IFRAME|^BUTTON/.test(bo.nodeName.toUpperCase())},Ze=function(bo){return!Ke(bo)&&bo&&/^DIV|^P|^LI|^H[1-7]/.test(bo.nodeName.toUpperCase())},Je=Ge("PRE"),et=Ge("LI"),ot=Ge("TABLE"),nt=Ge("DATA"),it=function(bo){return!ut(bo)&&!lt(bo)&&!dt(bo)&&!Ze(bo)&&!ot(bo)&&!pt(bo)&&!nt(bo)},lt=function(bo){return bo&&/^UL|^OL/.test(bo.nodeName.toUpperCase())},dt=Ge("HR"),ct=function(bo){return bo&&/^TD|^TH/.test(bo.nodeName.toUpperCase())},pt=Ge("BLOCKQUOTE"),ut=function(bo){return ct(bo)||pt(bo)||Ke(bo)},ht=Ge("A"),mt=Ge("BODY"),bt=O.isMSIE&&11>O.browserVersion?"&nbsp;":"<br>",Ct=function(bo){return qe(bo)?bo.nodeValue.length:bo?bo.childNodes.length:0},xt=function(bo){var Co=Ct(bo);if(0===Co)return!0;return qe(bo)||1!==Co||bo.innerHTML!==bt?A.all(bo.childNodes,qe)&&""===bo.innerHTML:!0},kt=function(bo){Ye(bo)||Ct(bo)||(bo.innerHTML=bt)},wt=function(bo,Co){for(;bo;){if(Co(bo))return bo;if(Ke(bo))break;bo=bo.parentNode}return null},Lt=function(bo,Co){Co=Co||N.fail;var xo=[];return wt(bo,function(ko){return Ke(ko)||xo.push(ko),Co(ko)}),xo},It=function(bo,Co){Co=Co||N.fail;for(var xo=[];bo&&!Co(bo);)xo.push(bo),bo=bo.nextSibling;return xo},Et=function(bo,Co){var xo=Co.nextSibling,ko=Co.parentNode;return xo?ko.insertBefore(bo,xo):ko.appendChild(bo),bo},Mt=function(bo,Co){return T.each(Co,function(xo,ko){bo.appendChild(ko)}),bo},Pt=function(bo){return 0===bo.offset},Ft=function(bo){return bo.offset===Ct(bo.node)},Rt=function(bo){return Pt(bo)||Ft(bo)},Ot=function(bo,Co){for(;bo&&bo!==Co;){if(0!==$t(bo))return!1;bo=bo.parentNode}return!0},zt=function(bo,Co){if(!Co)return!1;for(;bo&&bo!==Co;){if($t(bo)!==Ct(bo.parentNode)-1)return!1;bo=bo.parentNode}return!0},$t=function(bo){for(var Co=0;bo=bo.previousSibling;)Co+=1;return Co},Ut=function(bo){return!!(bo&&bo.childNodes&&bo.childNodes.length)},jt=function(bo,Co){var xo,ko;if(0===bo.offset){if(Ke(bo.node))return null;xo=bo.node.parentNode,ko=$t(bo.node)}else Ut(bo.node)?(xo=bo.node.childNodes[bo.offset-1],ko=Ct(xo)):(xo=bo.node,ko=Co?0:bo.offset-1);return{node:xo,offset:ko}},Kt=function(bo,Co){var xo,ko;if(Ct(bo.node)===bo.offset){if(Ke(bo.node))return null;xo=bo.node.parentNode,ko=$t(bo.node)+1}else Ut(bo.node)?(xo=bo.node.childNodes[bo.offset],ko=0):(xo=bo.node,ko=Co?Ct(bo.node):bo.offset+1);return{node:xo,offset:ko}},Vt=function(bo,Co){return bo.node===Co.node&&bo.offset===Co.offset},Jt=function(bo,Co){var xo=Co&&Co.isSkipPaddingBlankHTML,ko=Co&&Co.isNotSplitEdgePoint;if(Rt(bo)&&(qe(bo.node)||ko)){if(Pt(bo))return bo.node;if(Ft(bo))return bo.node.nextSibling}if(qe(bo.node))return bo.node.splitText(bo.offset);var wo=bo.node.childNodes[bo.offset],So=Et(bo.node.cloneNode(!1),bo.node);return Mt(So,It(wo)),xo||(kt(bo.node),kt(So)),So},oo=function(bo,Co,xo){var ko=Lt(Co.node,N.eq(bo));if(!ko.length)return null;return 1===ko.length?Jt(Co,xo):ko.reduce(function(wo,So){return wo===Co.node&&(wo=Jt(Co,xo)),Jt({node:So,offset:wo?B.position(wo):Ct(So)},xo)})},ro=function(bo){return document.createElement(bo)},ao=function(bo,Co){if(bo&&bo.parentNode){if(bo.removeNode)return bo.removeNode(Co);var xo=bo.parentNode;if(!Co){var ko=[],wo,So;for(wo=0,So=bo.childNodes.length;wo<So;wo++)ko.push(bo.childNodes[wo]);for(wo=0,So=ko.length;wo<So;wo++)xo.insertBefore(ko[wo],bo)}xo.removeChild(bo)}},uo=Ge("TEXTAREA"),ho=function(bo,Co){var xo=uo(bo[0])?bo.val():bo.html();return Co?xo.replace(/[\n\r]/g,""):xo};return{NBSP_CHAR:z,ZERO_WIDTH_NBSP_CHAR:"\uFEFF",blank:bt,emptyPara:"<p>"+bt+"</p>",makePredByNodeName:Ge,isEditable:Ke,isControlSizing:function(bo){return bo&&T(bo).hasClass("note-control-sizing")},isText:qe,isElement:function(bo){return bo&&1===bo.nodeType},isVoid:Ye,isPara:Ze,isPurePara:function(bo){return Ze(bo)&&!et(bo)},isHeading:function(bo){return bo&&/^H[1-7]/.test(bo.nodeName.toUpperCase())},isInline:it,isBlock:N.not(it),isBodyInline:function(bo){return it(bo)&&!wt(bo,Ze)},isBody:mt,isParaInline:function(bo){return it(bo)&&!!wt(bo,Ze)},isPre:Je,isList:lt,isTable:ot,isData:nt,isCell:ct,isBlockquote:pt,isBodyContainer:ut,isAnchor:ht,isDiv:Ge("DIV"),isLi:et,isBR:Ge("BR"),isSpan:Ge("SPAN"),isB:Ge("B"),isU:Ge("U"),isS:Ge("S"),isI:Ge("I"),isImg:Ge("IMG"),isTextarea:uo,isEmpty:xt,isEmptyAnchor:N.and(ht,xt),isClosestSibling:function(bo,Co){return bo.nextSibling===Co||bo.previousSibling===Co},withClosestSiblings:function(bo,Co){Co=Co||N.ok;var xo=[];return bo.previousSibling&&Co(bo.previousSibling)&&xo.push(bo.previousSibling),xo.push(bo),bo.nextSibling&&Co(bo.nextSibling)&&xo.push(bo.nextSibling),xo},nodeLength:Ct,isLeftEdgePoint:Pt,isRightEdgePoint:Ft,isEdgePoint:Rt,isLeftEdgeOf:Ot,isRightEdgeOf:zt,isLeftEdgePointOf:function(bo,Co){return Pt(bo)&&Ot(bo.node,Co)},isRightEdgePointOf:function(bo,Co){return Ft(bo)&&zt(bo.node,Co)},prevPoint:jt,nextPoint:Kt,isSamePoint:Vt,isVisiblePoint:function(bo){if(qe(bo.node)||!Ut(bo.node)||xt(bo.node))return!0;var Co=bo.node.childNodes[bo.offset-1],xo=bo.node.childNodes[bo.offset];return(!Co||Ye(Co))&&(!xo||Ye(xo))},prevPointUntil:function(bo,Co){for(;bo;){if(Co(bo))return bo;bo=jt(bo)}return null},nextPointUntil:function(bo,Co){for(;bo;){if(Co(bo))return bo;bo=Kt(bo)}return null},isCharPoint:function(bo){if(!qe(bo.node))return!1;var Co=bo.node.nodeValue.charAt(bo.offset-1);return Co&&" "!==Co&&Co!==z},walkPoint:function(bo,Co,xo,ko){for(var wo=bo,So;wo&&(xo(wo),!Vt(wo,Co));)So=ko&&bo.node!==wo.node&&Co.node!==wo.node,wo=Kt(wo,So)},ancestor:wt,singleChildAncestor:function(bo,Co){for(bo=bo.parentNode;bo&&!(1!==Ct(bo));){if(Co(bo))return bo;if(Ke(bo))break;bo=bo.parentNode}return null},listAncestor:Lt,lastAncestor:function(bo,Co){var xo=Lt(bo);return A.last(xo.filter(Co))},listNext:It,listPrev:function(bo,Co){Co=Co||N.fail;for(var xo=[];bo&&!Co(bo);)xo.push(bo),bo=bo.previousSibling;return xo},listDescendant:function(bo,Co){var xo=[];return Co=Co||N.ok,function ko(wo){bo!==wo&&Co(wo)&&xo.push(wo);for(var So=0,Lo=wo.childNodes.length;So<Lo;So++)ko(wo.childNodes[So])}(bo),xo},commonAncestor:function(bo,Co){for(var xo=Lt(bo),ko=Co;ko;ko=ko.parentNode)if(-1<T.inArray(ko,xo))return ko;return null},wrap:function(bo,Co){var xo=bo.parentNode,ko=T("<"+Co+">")[0];return xo.insertBefore(ko,bo),ko.appendChild(bo),ko},insertAfter:Et,appendChildNodes:Mt,position:$t,hasChildren:Ut,makeOffsetPath:function(bo,Co){var xo=Lt(Co,N.eq(bo));return xo.map($t).reverse()},fromOffsetPath:function(bo,Co){for(var xo=bo,ko=0,wo=Co.length;ko<wo;ko++)xo=xo.childNodes.length<=Co[ko]?xo.childNodes[xo.childNodes.length-1]:xo.childNodes[Co[ko]];return xo},splitTree:oo,splitPoint:function(bo,Co){var xo=Co?Ze:ut,ko=Lt(bo.node,xo),wo=A.last(ko)||bo.node,So,Lo;xo(wo)?(So=ko[ko.length-2],Lo=wo):(So=wo,Lo=So.parentNode);var To=So&&oo(So,bo,{isSkipPaddingBlankHTML:Co,isNotSplitEdgePoint:Co});return To||Lo!==bo.node||(To=bo.node.childNodes[bo.offset]),{rightNode:To,container:Lo}},create:ro,createText:function(bo){return document.createTextNode(bo)},remove:ao,removeWhile:function(bo,Co){for(;bo&&!(Ke(bo)||!Co(bo));){var xo=bo.parentNode;ao(bo),bo=xo}},replace:function(bo,Co){if(bo.nodeName.toUpperCase()===Co.toUpperCase())return bo;var xo=ro(Co);return bo.style.cssText&&(xo.style.cssText=bo.style.cssText),Mt(xo,A.from(bo.childNodes)),Et(xo,bo),ao(bo),xo},html:function(bo,Co){var xo=ho(bo);if(Co){var ko=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;xo=xo.replace(ko,function(wo,So,Lo){Lo=Lo.toUpperCase();var To=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(Lo)&&!!So,No=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(Lo);return wo+(To||No?"\n":"")}),xo=T.trim(xo)}return xo},value:ho,posFromPlaceholder:function(bo){var Co=T(bo),xo=Co.offset(),ko=Co.outerHeight(!0);return{left:xo.left,top:xo.top+ko}},attachEvents:function(bo,Co){Object.keys(Co).forEach(function(xo){bo.on(xo,Co[xo])})},detachEvents:function(bo,Co){Object.keys(Co).forEach(function(xo){bo.off(xo,Co[xo])})}}}(),U=function(Ve,Ge){var qe=this,Xe=T.summernote.ui;return this.memos={},this.modules={},this.layoutInfo={},this.options=Ge,this.initialize=function(){return this.layoutInfo=Xe.createLayout(Ve,Ge),this._initialize(),Ve.hide(),this},this.destroy=function(){this._destroy(),Ve.removeData("summernote"),Xe.removeLayout(Ve,this.layoutInfo)},this.reset=function(){var Ye=qe.isDisabled();this.code(B.emptyPara),this._destroy(),this._initialize(),Ye&&qe.disable()},this._initialize=function(){var Ye=T.extend({},this.options.buttons);Object.keys(Ye).forEach(function(Qe){qe.memo("button."+Qe,Ye[Qe])});var Ze=T.extend({},this.options.modules,T.summernote.plugins||{});Object.keys(Ze).forEach(function(Qe){qe.module(Qe,Ze[Qe],!0)}),Object.keys(this.modules).forEach(function(Qe){qe.initializeModule(Qe)})},this._destroy=function(){Object.keys(this.modules).reverse().forEach(function(Ye){qe.removeModule(Ye)}),Object.keys(this.memos).forEach(function(Ye){qe.removeMemo(Ye)})},this.code=function(Ye){var Ze=this.invoke("codeview.isActivated");return void 0===Ye?(this.invoke("codeview.sync"),Ze?this.layoutInfo.codable.val():this.layoutInfo.editable.html()):void(Ze?this.layoutInfo.codable.val(Ye):this.layoutInfo.editable.html(Ye),Ve.val(Ye),this.triggerEvent("change",Ye))},this.isDisabled=function(){return"false"===this.layoutInfo.editable.attr("contenteditable")},this.enable=function(){this.layoutInfo.editable.attr("contenteditable",!0),this.invoke("toolbar.activate",!0)},this.disable=function(){this.invoke("codeview.isActivated")&&this.invoke("codeview.deactivate"),this.layoutInfo.editable.attr("contenteditable",!1),this.invoke("toolbar.deactivate",!0)},this.triggerEvent=function(){var Ye=A.head(arguments),Ze=A.tail(A.from(arguments)),Qe=this.options.callbacks[N.namespaceToCamel(Ye,"on")];Qe&&Qe.apply(Ve[0],Ze),Ve.trigger("summernote."+Ye,Ze)},this.initializeModule=function(Ye){var Ze=this.modules[Ye];Ze.shouldInitialize=Ze.shouldInitialize||N.ok,Ze.shouldInitialize()&&(Ze.initialize&&Ze.initialize(),Ze.events&&B.attachEvents(Ve,Ze.events))},this.module=function(Ye,Ze,Qe){return 1===arguments.length?this.modules[Ye]:void(this.modules[Ye]=new Ze(this),!Qe&&this.initializeModule(Ye))},this.removeModule=function(Ye){var Ze=this.modules[Ye];Ze.shouldInitialize()&&(Ze.events&&B.detachEvents(Ve,Ze.events),Ze.destroy&&Ze.destroy()),delete this.modules[Ye]},this.memo=function(Ye,Ze){return 1===arguments.length?this.memos[Ye]:void(this.memos[Ye]=Ze)},this.removeMemo=function(Ye){this.memos[Ye]&&this.memos[Ye].destroy&&this.memos[Ye].destroy(),delete this.memos[Ye]},this.createInvokeHandler=function(Ye,Ze){return function(Qe){Qe.preventDefault(),qe.invoke(Ye,Ze||T(Qe.target).closest("[data-value]").data("value"))}},this.invoke=function(){var Ye=A.head(arguments),Ze=A.tail(A.from(arguments)),Qe=Ye.split("."),Je=1<Qe.length,et=Je&&A.head(Qe),tt=Je?A.last(Qe):A.head(Qe),ot=this.modules[et||"editor"];return!et&&this[tt]?this[tt].apply(this,Ze):ot&&ot[tt]&&ot.shouldInitialize()?ot[tt].apply(ot,Ze):void 0},this.initialize()};T.fn.extend({summernote:function(){var Ve=T.type(A.head(arguments)),Xe="object"===Ve?A.head(arguments):{};Xe=T.extend({},T.summernote.options,Xe),Xe.langInfo=T.extend(!0,{},T.summernote.lang["en-US"],T.summernote.lang[Xe.lang]),Xe.icons=T.extend(!0,{},T.summernote.options.icons,Xe.icons),this.each(function(Qe,Je){var et=T(Je);if(!et.data("summernote")){var tt=new U(et,Xe);et.data("summernote",tt),et.data("summernote").triggerEvent("init",tt.layoutInfo)}});var Ye=this.first();if(Ye.length){var Ze=Ye.data("summernote");if("string"===Ve)return Ze.invoke.apply(Ze,A.from(arguments));Xe.focus&&Ze.invoke("editor.focus")}return this}});var K=function(Ve,Ge,qe,Xe){this.render=function(Ye){var Ze=T(Ve);if(qe&&qe.contents&&Ze.html(qe.contents),qe&&qe.className&&Ze.addClass(qe.className),qe&&qe.data&&T.each(qe.data,function(Je,et){Ze.attr("data-"+Je,et)}),qe&&qe.click&&Ze.on("click",qe.click),Ge){var Qe=Ze.find(".note-children-container");Ge.forEach(function(Je){Je.render(Qe.length?Qe:Ze)})}return Xe&&Xe(Ze,qe),qe&&qe.callback&&qe.callback(Ze),Ye&&Ye.append(Ze),Ze}},V={create:function(Ve,Ge){return function(){var qe=T.isArray(arguments[0])?arguments[0]:[],Xe="object"===L(arguments[1])?arguments[1]:arguments[0];return Xe&&Xe.children&&(qe=Xe.children),new K(Ve,qe,Xe,Ge)}}},G=V.create("<div class=\"note-editor note-frame\"/>"),q=V.create("<div class=\"note-toolbar\"/>"),_=V.create("<div class=\"note-editing-area\"/>"),X=V.create("<textarea class=\"note-codable\"/>"),Y=V.create("<div class=\"note-editable\" contentEditable=\"true\"/>"),Z=V.create(["<div class=\"note-statusbar\">","  <div class=\"note-resizebar\">","    <div class=\"note-icon-bar\"/>","    <div class=\"note-icon-bar\"/>","    <div class=\"note-icon-bar\"/>","  </div>","</div>"].join("")),Q=V.create("<div class=\"note-editor\"/>"),J=V.create("<div class=\"note-editable\" contentEditable=\"true\"/>"),ee=V.create("<div class=\"note-btn-group btn-group\">"),oe=V.create("<button type=\"button\" class=\"note-btn btn -dark btn-sm\" tabindex=\"-1\">",function(Ke,Ve){Ve&&Ve.tooltip&&Ke.attr({title:Ve.tooltip}).tooltip({container:"body",trigger:"hover",placement:"bottom"})}),ne=V.create("<div class=\"dropdown-menu -dark\">",function(Ke,Ve){var Ge=T.isArray(Ve.items)?Ve.items.map(function(qe){var Xe="string"==typeof qe?qe:qe.value||"",Ye=Ve.template?Ve.template(qe):qe;return"<li><a href=\"#\" data-value=\""+Xe+"\">"+Ye+"</a></li>"}).join(""):Ve.items;Ke.html(Ge)}),re=V.create("<div class=\"dropdown-menu -dark note-check\">",function(Ke,Ve){var Ge=T.isArray(Ve.items)?Ve.items.map(function(qe){var Xe="string"==typeof qe?qe:qe.value||"",Ye=Ve.template?Ve.template(qe):qe;return"<li><a href=\"#\" data-value=\""+Xe+"\">"+de(Ve.checkClassName)+" "+Ye+"</a></li>"}).join(""):Ve.items;Ke.html(Ge)}),le=V.create("<div class=\"note-color-palette\"/>",function(Ke,Ve){for(var Ge=[],qe=0,Xe=Ve.colors.length;qe<Xe;qe++){for(var Ye=Ve.eventName,Ze=Ve.colors[qe],Qe=[],Je=0,et=Ze.length,tt;Je<et;Je++)tt=Ze[Je],Qe.push(["<button type=\"button\" class=\"note-color-btn\"","style=\"background-color:",tt,"\" ","data-event=\"",Ye,"\" ","data-value=\"",tt,"\" ","title=\"",tt,"\" ","data-toggle=\"button\" tabindex=\"-1\"></button>"].join(""));Ge.push("<div class=\"note-color-row\">"+Qe.join("")+"</div>")}Ke.html(Ge.join("")),Ke.find(".note-color-btn").tooltip({container:"body",trigger:"hover",placement:"bottom"})}),se=V.create("<div class=\"modal -primary\" aria-hidden=\"false\" tabindex=\"-1\"/>",function(Ke,Ve){Ve.fade&&Ke.addClass("fade"),Ke.html(["<div class=\"modal-dialog\">","  <div class=\"modal-content\">",Ve.title?"    <div class=\"modal-header\">      <button type=\"button\" class=\"close _text-white\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>      <h4 class=\"modal-title\">"+Ve.title+"</h4>    </div>":"","    <div class=\"modal-body\">"+Ve.body+"</div>",Ve.footer?"    <div class=\"modal-footer\">"+Ve.footer+"</div>":"","  </div>","</div>"].join(""))}),ae=V.create(["<div class=\"note-popover popover in\">","  <div class=\"arrow\"/>","  <div class=\"popover-content note-children-container\"/>","</div>"].join(""),function(Ke,Ve){var Ge="undefined"==typeof Ve.direction?"bottom":Ve.direction;Ke.addClass(Ge),Ve.hideArrow&&Ke.find(".arrow").hide()}),de=function(Ve,Ge){return Ge=Ge||"i","<"+Ge+" class=\""+Ve+"\"/>"},ce={editor:G,toolbar:q,editingArea:_,codable:X,editable:Y,statusbar:Z,airEditor:Q,airEditable:J,buttonGroup:ee,button:oe,dropdown:ne,dropdownCheck:re,palette:le,dialog:se,popover:ae,icon:de,toggleBtn:function(Ve,Ge){Ve.toggleClass("disabled",!Ge),Ve.attr("disabled",!Ge)},toggleBtnActive:function(Ve,Ge){Ve.toggleClass("active",Ge)},onDialogShown:function(Ve,Ge){Ve.one("shown.bs.modal",Ge)},onDialogHidden:function(Ve,Ge){Ve.one("hidden.bs.modal",Ge)},showDialog:function(Ve){Ve.modal("show")},hideDialog:function(Ve){Ve.modal("hide")},createLayout:function(Ve,Ge){var qe=(Ge.airMode?ce.airEditor([ce.editingArea([ce.airEditable()])]):ce.editor([ce.toolbar(),ce.editingArea([ce.codable(),ce.editable()]),ce.statusbar()])).render();return qe.insertAfter(Ve),{note:Ve,editor:qe,toolbar:qe.find(".note-toolbar"),editingArea:qe.find(".note-editing-area"),editable:qe.find(".note-editable"),codable:qe.find(".note-codable"),statusbar:qe.find(".note-statusbar")}},removeLayout:function(Ve,Ge){Ve.html(Ge.editable.html()),Ge.editor.remove(),Ve.show()}};T.summernote=T.summernote||{lang:{}},T.extend(T.summernote.lang,{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},help:{insertParagraph:"Insert Paragraph",undo:"Undoes the last command",redo:"Redoes the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Undo",redo:"Redo"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"}}});var pe=function(){var Ke={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221};return{isEdit:function(Ge){return A.contains([Ke.BACKSPACE,Ke.TAB,Ke.ENTER,Ke.SPACE],Ge)},isMove:function(Ge){return A.contains([Ke.LEFT,Ke.UP,Ke.RIGHT,Ke.DOWN],Ge)},nameFromCode:N.invertObject(Ke),code:Ke}}(),ue=function(){var Ke=function(Xe,Ye){var Ze=Xe.parentElement(),Qe,Je=document.body.createTextRange(),et,tt=A.from(Ze.childNodes);for(Qe=0;Qe<tt.length;Qe++)if(!B.isText(tt[Qe])){if(Je.moveToElementText(tt[Qe]),0<=Je.compareEndPoints("StartToStart",Xe))break;et=tt[Qe]}if(0!==Qe&&B.isText(tt[Qe-1])){var ot=document.body.createTextRange(),nt=null;ot.moveToElementText(et||Ze),ot.collapse(!et),nt=et?et.nextSibling:Ze.firstChild;var it=Xe.duplicate();it.setEndPoint("StartToStart",ot);for(var lt=it.text.replace(/[\r\n]/g,"").length;lt>nt.nodeValue.length&&nt.nextSibling;)lt-=nt.nodeValue.length,nt=nt.nextSibling;nt.nodeValue;Ye&&nt.nextSibling&&B.isText(nt.nextSibling)&&lt===nt.nodeValue.length&&(lt-=nt.nodeValue.length,nt=nt.nextSibling),Ze=nt,Qe=lt}return{cont:Ze,offset:Qe}},Ve=function(Xe){var Ze=document.body.createTextRange(),Qe=function Je(et,tt){var ot,nt;if(B.isText(et)){var it=B.listPrev(et,N.not(B.isText)),lt=A.last(it).previousSibling;ot=lt||et.parentNode,tt+=A.sum(A.tail(it),B.nodeLength),nt=!lt}else{if(ot=et.childNodes[tt]||et,B.isText(ot))return Je(ot,0);tt=0,nt=!1}return{node:ot,collapseToStart:nt,offset:tt}}(Xe.node,Xe.offset);return Ze.moveToElementText(Qe.node),Ze.collapse(Qe.collapseToStart),Ze.moveStart("character",Qe.offset),Ze},Ge=function qe(Xe,Ye,Ze,Qe){this.sc=Xe,this.so=Ye,this.ec=Ze,this.eo=Qe;var Je=function(){if(O.isW3CRangeSupport){var ot=document.createRange();return ot.setStart(Xe,Ye),ot.setEnd(Ze,Qe),ot}var nt=Ve({node:Xe,offset:Ye});return nt.setEndPoint("EndToEnd",Ve({node:Ze,offset:Qe})),nt};this.getPoints=function(){return{sc:Xe,so:Ye,ec:Ze,eo:Qe}},this.getStartPoint=function(){return{node:Xe,offset:Ye}},this.getEndPoint=function(){return{node:Ze,offset:Qe}},this.select=function(){var tt=Je();if(O.isW3CRangeSupport){var ot=document.getSelection();0<ot.rangeCount&&ot.removeAllRanges(),ot.addRange(tt)}else tt.select();return this},this.scrollIntoView=function(tt){var ot=T(tt).height();return tt.scrollTop+ot<this.sc.offsetTop&&(tt.scrollTop+=_Mathabs(tt.scrollTop+ot-this.sc.offsetTop)),this},this.normalize=function(){var tt=function(lt,dt){if(B.isVisiblePoint(lt)&&!B.isEdgePoint(lt)||B.isVisiblePoint(lt)&&B.isRightEdgePoint(lt)&&!dt||B.isVisiblePoint(lt)&&B.isLeftEdgePoint(lt)&&dt||B.isVisiblePoint(lt)&&B.isBlock(lt.node)&&B.isEmpty(lt.node))return lt;var ct=B.ancestor(lt.node,B.isBlock);if((B.isLeftEdgePointOf(lt,ct)||B.isVoid(B.prevPoint(lt).node))&&!dt||(B.isRightEdgePointOf(lt,ct)||B.isVoid(B.nextPoint(lt).node))&&dt){if(B.isVisiblePoint(lt))return lt;dt=!dt}var pt=dt?B.nextPointUntil(B.nextPoint(lt),B.isVisiblePoint):B.prevPointUntil(B.prevPoint(lt),B.isVisiblePoint);return pt||lt},ot=tt(this.getEndPoint(),!1),nt=this.isCollapsed()?ot:tt(this.getStartPoint(),!0);return new qe(nt.node,nt.offset,ot.node,ot.offset)},this.nodes=function(tt,ot){tt=tt||N.ok;var nt=ot&&ot.includeAncestor,it=ot&&ot.fullyContains,lt=this.getStartPoint(),dt=this.getEndPoint(),ct=[],pt=[];return B.walkPoint(lt,dt,function(ut){if(!B.isEditable(ut.node)){var ht;it?(B.isLeftEdgePoint(ut)&&pt.push(ut.node),B.isRightEdgePoint(ut)&&A.contains(pt,ut.node)&&(ht=ut.node)):nt?ht=B.ancestor(ut.node,tt):ht=ut.node,ht&&tt(ht)&&ct.push(ht)}},!0),A.unique(ct)},this.commonAncestor=function(){return B.commonAncestor(Xe,Ze)},this.expand=function(tt){var ot=B.ancestor(Xe,tt),nt=B.ancestor(Ze,tt);if(!ot&&!nt)return new qe(Xe,Ye,Ze,Qe);var it=this.getPoints();return ot&&(it.sc=ot,it.so=0),nt&&(it.ec=nt,it.eo=B.nodeLength(nt)),new qe(it.sc,it.so,it.ec,it.eo)},this.collapse=function(tt){return tt?new qe(Xe,Ye,Xe,Ye):new qe(Ze,Qe,Ze,Qe)},this.splitText=function(){var ot=this.getPoints();return B.isText(Ze)&&!B.isEdgePoint(this.getEndPoint())&&Ze.splitText(Qe),B.isText(Xe)&&!B.isEdgePoint(this.getStartPoint())&&(ot.sc=Xe.splitText(Ye),ot.so=0,Xe===Ze&&(ot.ec=ot.sc,ot.eo=Qe-Ye)),new qe(ot.sc,ot.so,ot.ec,ot.eo)},this.deleteContents=function(){if(this.isCollapsed())return this;var tt=this.splitText(),ot=tt.nodes(null,{fullyContains:!0}),nt=B.prevPointUntil(tt.getStartPoint(),function(lt){return!A.contains(ot,lt.node)}),it=[];return T.each(ot,function(lt,dt){var ct=dt.parentNode;nt.node!==ct&&1===B.nodeLength(ct)&&it.push(ct),B.remove(dt,!1)}),T.each(it,function(lt,dt){B.remove(dt,!1)}),new qe(nt.node,nt.offset,nt.node,nt.offset).normalize()};var et=function(ot){return function(){var nt=B.ancestor(Xe,ot);return!!nt&&nt===B.ancestor(Ze,ot)}};this.isOnEditable=et(B.isEditable),this.isOnList=et(B.isList),this.isOnAnchor=et(B.isAnchor),this.isOnCell=et(B.isCell),this.isOnData=et(B.isData),this.isLeftEdgeOf=function(tt){if(!B.isLeftEdgePoint(this.getStartPoint()))return!1;var ot=B.ancestor(this.sc,tt);return ot&&B.isLeftEdgeOf(this.sc,ot)},this.isCollapsed=function(){return Xe===Ze&&Ye===Qe},this.wrapBodyInlineWithPara=function(){if(B.isBodyContainer(Xe)&&B.isEmpty(Xe))return Xe.innerHTML=B.emptyPara,new qe(Xe.firstChild,0,Xe.firstChild,0);var tt=this.normalize();if(B.isParaInline(Xe)||B.isPara(Xe))return tt;var ot;if(B.isInline(tt.sc)){var nt=B.listAncestor(tt.sc,N.not(B.isInline));ot=A.last(nt),B.isInline(ot)||(ot=nt[nt.length-2]||tt.sc.childNodes[tt.so])}else ot=tt.sc.childNodes[0<tt.so?tt.so-1:0];var it=B.listPrev(ot,B.isParaInline).reverse();if(it=it.concat(B.listNext(ot.nextSibling,B.isParaInline)),it.length){var lt=B.wrap(A.head(it),"p");B.appendChildNodes(lt,A.tail(it))}return this.normalize()},this.insertNode=function(tt){var ot=this.wrapBodyInlineWithPara().deleteContents(),nt=B.splitPoint(ot.getStartPoint(),B.isInline(tt));return nt.rightNode?nt.rightNode.parentNode.insertBefore(tt,nt.rightNode):nt.container.appendChild(tt),tt},this.pasteHTML=function(tt){var ot=T("<div></div>").html(tt)[0],nt=A.from(ot.childNodes),it=this.wrapBodyInlineWithPara().deleteContents();return nt.reverse().map(function(lt){return it.insertNode(lt)}).reverse()},this.toString=function(){var tt=Je();return O.isW3CRangeSupport?tt.toString():tt.text},this.getWordRange=function(tt){var ot=this.getEndPoint();if(!B.isCharPoint(ot))return this;var nt=B.prevPointUntil(ot,function(it){return!B.isCharPoint(it)});return tt&&(ot=B.nextPointUntil(ot,function(it){return!B.isCharPoint(it)})),new qe(nt.node,nt.offset,ot.node,ot.offset)},this.bookmark=function(tt){return{s:{path:B.makeOffsetPath(tt,Xe),offset:Ye},e:{path:B.makeOffsetPath(tt,Ze),offset:Qe}}},this.paraBookmark=function(tt){return{s:{path:A.tail(B.makeOffsetPath(A.head(tt),Xe)),offset:Ye},e:{path:A.tail(B.makeOffsetPath(A.last(tt),Ze)),offset:Qe}}},this.getClientRects=function(){var tt=Je();return tt.getClientRects()}};return{create:function(Xe,Ye,Ze,Qe){if(4===arguments.length)return new Ge(Xe,Ye,Ze,Qe);if(2===arguments.length)return Ze=Xe,Qe=Ye,new Ge(Xe,Ye,Ze,Qe);var Je=this.createFromSelection();return Je||1!==arguments.length?Je:(Je=this.createFromNode(arguments[0]),Je.collapse(B.emptyPara===arguments[0].innerHTML))},createFromSelection:function(){var Xe,Ye,Ze,Qe;if(O.isW3CRangeSupport){var Je=document.getSelection();if(!Je||0===Je.rangeCount)return null;if(B.isBody(Je.anchorNode))return null;var et=Je.getRangeAt(0);Xe=et.startContainer,Ye=et.startOffset,Ze=et.endContainer,Qe=et.endOffset}else{var tt=document.selection.createRange(),ot=tt.duplicate();ot.collapse(!1);var nt=tt;nt.collapse(!0);var it=Ke(nt,!0),lt=Ke(ot,!1);B.isText(it.node)&&B.isLeftEdgePoint(it)&&B.isTextNode(lt.node)&&B.isRightEdgePoint(lt)&&lt.node.nextSibling===it.node&&(it=lt),Xe=it.cont,Ye=it.offset,Ze=lt.cont,Qe=lt.offset}return new Ge(Xe,Ye,Ze,Qe)},createFromNode:function(Xe){var Ye=Xe,Ze=0,Qe=Xe,Je=B.nodeLength(Qe);return B.isVoid(Ye)&&(Ze=B.listPrev(Ye).length-1,Ye=Ye.parentNode),B.isBR(Qe)?(Je=B.listPrev(Qe).length-1,Qe=Qe.parentNode):B.isVoid(Qe)&&(Je=B.listPrev(Qe).length,Qe=Qe.parentNode),this.create(Ye,Ze,Qe,Je)},createFromNodeBefore:function(Xe){return this.createFromNode(Xe).collapse(!0)},createFromNodeAfter:function(Xe){return this.createFromNode(Xe).collapse()},createFromBookmark:function(Xe,Ye){var Ze=B.fromOffsetPath(Xe,Ye.s.path),Qe=Ye.s.offset,Je=B.fromOffsetPath(Xe,Ye.e.path),et=Ye.e.offset;return new Ge(Ze,Qe,Je,et)},createFromParaBookmark:function(Xe,Ye){var Ze=Xe.s.offset,Qe=Xe.e.offset,Je=B.fromOffsetPath(A.head(Ye),Xe.s.path),et=B.fromOffsetPath(A.last(Ye),Xe.e.path);return new Ge(Je,Ze,et,Qe)}}}(),he=function(){return{readFileAsDataURL:function(qe){return T.Deferred(function(Xe){T.extend(new FileReader,{onload:function(Ze){var Qe=Ze.target.result;Xe.resolve(Qe)},onerror:function(){Xe.reject(this)}}).readAsDataURL(qe)}).promise()},createImage:function(qe){return T.Deferred(function(Xe){var Ye=T("<img>");Ye.one("load",function(){Ye.off("error abort"),Xe.resolve(Ye)}).one("error abort",function(){Ye.off("load").detach(),Xe.reject(Ye)}).css({display:"none"}).appendTo(document.body).attr("src",qe)}).promise()}}}(),ge=function(Ve){var Ge=[],qe=-1,Xe=Ve[0],Ye=function(){var Je=ue.create(Xe);return{contents:Ve.html(),bookmark:Je?Je.bookmark(Xe):{s:{path:[],offset:0},e:{path:[],offset:0}}}},Ze=function(Je){null!==Je.contents&&Ve.html(Je.contents),null!==Je.bookmark&&ue.createFromBookmark(Xe,Je.bookmark).select()};this.rewind=function(){Ve.html()!==Ge[qe].contents&&this.recordUndo(),qe=0,Ze(Ge[qe])},this.reset=function(){Ge=[],qe=-1,Ve.html(""),this.recordUndo()},this.undo=function(){Ve.html()!==Ge[qe].contents&&this.recordUndo(),0<qe&&(qe--,Ze(Ge[qe]))},this.redo=function(){Ge.length-1>qe&&(qe++,Ze(Ge[qe]))},this.recordUndo=function(){qe++,Ge.length>qe&&(Ge=Ge.slice(0,qe)),Ge.push(Ye())}},fe=function(){var Ve=function(qe,Xe){if(1.9>O.jqueryVersion){var Ye={};return T.each(Xe,function(Ze,Qe){Ye[Qe]=qe.css(Qe)}),Ye}return qe.css.call(qe,Xe)};this.fromNode=function(Ge){var Xe=Ve(Ge,["font-family","font-size","text-align","list-style-type","line-height"])||{};return Xe["font-size"]=parseInt(Xe["font-size"],10),Xe},this.stylePara=function(Ge,qe){T.each(Ge.nodes(B.isPara,{includeAncestor:!0}),function(Xe,Ye){T(Ye).css(qe)})},this.styleNodes=function(Ge,qe){Ge=Ge.splitText();var Xe=qe&&qe.nodeName||"SPAN",Ye=!!(qe&&qe.expandClosestSibling),Ze=!!(qe&&qe.onlyPartialContains);if(Ge.isCollapsed())return[Ge.insertNode(B.create(Xe))];var Qe=B.makePredByNodeName(Xe),Je=Ge.nodes(B.isText,{fullyContains:!0}).map(function(tt){return B.singleChildAncestor(tt,Qe)||B.wrap(tt,Xe)});if(Ye){if(Ze){var et=Ge.nodes();Qe=N.and(Qe,function(tt){return A.contains(et,tt)})}return Je.map(function(tt){var ot=B.withClosestSiblings(tt,Qe),nt=A.head(ot),it=A.tail(ot);return T.each(it,function(lt,dt){B.appendChildNodes(nt,dt.childNodes),B.remove(dt)}),A.head(ot)})}return Je},this.current=function(Ge){var qe=T(B.isElement(Ge.sc)?Ge.sc:Ge.sc.parentNode),Xe=this.fromNode(qe);try{Xe=T.extend(Xe,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikethrough")?"strikethrough":"normal"})}catch(et){}if(!Ge.isOnList())Xe["list-style"]="none";else{var Ze=-1<T.inArray(Xe["list-style-type"],["circle","disc","disc-leading-zero","square"]);Xe["list-style"]=Ze?"unordered":"ordered"}var Qe=B.ancestor(Ge.sc,B.isPara);if(Qe&&Qe.style["line-height"])Xe["line-height"]=Qe.style.lineHeight;else{var Je=parseInt(Xe["line-height"],10)/parseInt(Xe["font-size"],10);Xe["line-height"]=Je.toFixed(1)}return Xe.anchor=Ge.isOnAnchor()&&B.ancestor(Ge.sc,B.isAnchor),Xe.ancestors=B.listAncestor(Ge.sc,B.isEditable),Xe.range=Ge,Xe}},ye=function(){var Ve=this;this.insertOrderedList=function(Ge){this.toggleList("OL",Ge)},this.insertUnorderedList=function(Ge){this.toggleList("UL",Ge)},this.indent=function(Ge){var qe=this,Xe=ue.create(Ge).wrapBodyInlineWithPara(),Ye=Xe.nodes(B.isPara,{includeAncestor:!0}),Ze=A.clusterBy(Ye,N.peq2("parentNode"));T.each(Ze,function(Qe,Je){var et=A.head(Je);B.isLi(et)?qe.wrapList(Je,et.parentNode.nodeName):T.each(Je,function(tt,ot){T(ot).css("marginLeft",function(nt,it){return(parseInt(it,10)||0)+25})})}),Xe.select()},this.outdent=function(Ge){var qe=this,Xe=ue.create(Ge).wrapBodyInlineWithPara(),Ye=Xe.nodes(B.isPara,{includeAncestor:!0}),Ze=A.clusterBy(Ye,N.peq2("parentNode"));T.each(Ze,function(Qe,Je){var et=A.head(Je);B.isLi(et)?qe.releaseList([Je]):T.each(Je,function(tt,ot){T(ot).css("marginLeft",function(nt,it){return it=parseInt(it,10)||0,25<it?it-25:""})})}),Xe.select()},this.toggleList=function(Ge,qe){var Xe=ue.create(qe).wrapBodyInlineWithPara(),Ye=Xe.nodes(B.isPara,{includeAncestor:!0}),Ze=Xe.paraBookmark(Ye),Qe=A.clusterBy(Ye,N.peq2("parentNode"));if(A.find(Ye,B.isPurePara)){var Je=[];T.each(Qe,function(tt,ot){Je=Je.concat(Ve.wrapList(ot,Ge))}),Ye=Je}else{var et=Xe.nodes(B.isList,{includeAncestor:!0}).filter(function(tt){return!T.nodeName(tt,Ge)});et.length?T.each(et,function(tt,ot){B.replace(ot,Ge)}):Ye=this.releaseList(Qe,!0)}ue.createFromParaBookmark(Ze,Ye).select()},this.wrapList=function(Ge,qe){var Xe=A.head(Ge),Ye=A.last(Ge),Ze=B.isList(Xe.previousSibling)&&Xe.previousSibling,Qe=B.isList(Ye.nextSibling)&&Ye.nextSibling,Je=Ze||B.insertAfter(B.create(qe||"UL"),Ye);return Ge=Ge.map(function(et){return B.isPurePara(et)?B.replace(et,"LI"):et}),B.appendChildNodes(Je,Ge),Qe&&(B.appendChildNodes(Je,A.from(Qe.childNodes)),B.remove(Qe)),Ge},this.releaseList=function(Ge,qe){var Xe=[];return T.each(Ge,function(Ye,Ze){var Qe=A.head(Ze),Je=A.last(Ze),et=qe?B.lastAncestor(Qe,B.isList):Qe.parentNode,tt=1<et.childNodes.length?B.splitTree(et,{node:Je.parentNode,offset:B.position(Je)+1},{isSkipPaddingBlankHTML:!0}):null,ot=B.splitTree(et,{node:Qe.parentNode,offset:B.position(Qe)},{isSkipPaddingBlankHTML:!0});Ze=qe?B.listDescendant(ot,B.isLi):A.from(ot.childNodes).filter(B.isLi),(qe||!B.isList(et.parentNode))&&(Ze=Ze.map(function(it){return B.replace(it,"P")})),T.each(A.from(Ze).reverse(),function(it,lt){B.insertAfter(lt,et)});var nt=A.compact([et,ot,tt]);T.each(nt,function(it,lt){var dt=[lt].concat(B.listDescendant(lt,B.isList));T.each(dt.reverse(),function(ct,pt){B.nodeLength(pt)||B.remove(pt,!0)})}),Xe=Xe.concat(Ze)}),Xe}},ve=function(){var Ve=new ye;this.insertTab=function(Ge,qe){var Xe=B.createText(Array(qe+1).join(B.NBSP_CHAR));Ge=Ge.deleteContents(),Ge.insertNode(Xe,!0),Ge=ue.create(Xe,qe),Ge.select()},this.insertParagraph=function(Ge){var qe=ue.create(Ge);qe=qe.deleteContents(),qe=qe.wrapBodyInlineWithPara();var Xe=B.ancestor(qe.sc,B.isPara),Ye;if(Xe){if(B.isEmpty(Xe)&&B.isLi(Xe))return void Ve.toggleList(Xe.parentNode.nodeName);if(B.isEmpty(Xe)&&B.isPara(Xe)&&B.isBlockquote(Xe.parentNode))B.insertAfter(Xe,Xe.parentNode),Ye=Xe;else{Ye=B.splitTree(Xe,qe.getStartPoint());var Ze=B.listDescendant(Xe,B.isEmptyAnchor);Ze=Ze.concat(B.listDescendant(Ye,B.isEmptyAnchor)),T.each(Ze,function(Je,et){B.remove(et)}),(B.isHeading(Ye)||B.isPre(Ye))&&B.isEmpty(Ye)&&(Ye=B.replace(Ye,"p"))}}else{var Qe=qe.sc.childNodes[qe.so];Ye=T(B.emptyPara)[0],Qe?qe.sc.insertBefore(Ye,Qe):qe.sc.appendChild(Ye)}ue.create(Ye,0).normalize().select().scrollIntoView(Ge)}},be=function(){this.tab=function(Ve,Ge){var qe=B.ancestor(Ve.commonAncestor(),B.isCell),Xe=B.ancestor(qe,B.isTable),Ye=B.listDescendant(Xe,B.isCell),Ze=A[Ge?"prev":"next"](Ye,qe);Ze&&ue.create(Ze,0).select()},this.createTable=function(Ve,Ge,qe){for(var Xe=[],Ze=0,Ye;Ze<Ve;Ze++)Xe.push("<td>"+B.blank+"</td>");Ye=Xe.join("");for(var Qe=[],et=0,Je;et<Ge;et++)Qe.push("<tr>"+Ye+"</tr>");Je=Qe.join("");var tt=T("<table>"+Je+"</table>");return qe&&qe.tableClassName&&tt.addClass(qe.tableClassName),tt[0]}},Ce="bogus",Le;O.hasCodeMirror&&(O.isSupportAmd?c(["codemirror"],function(Ke){Le=Ke}):Le=window.CodeMirror);T.summernote=T.extend(T.summernote,{version:"0.8.2",ui:ce,dom:B,plugins:{},options:{modules:{editor:function(Ve){var Ge=this,qe=Ve.layoutInfo.note,Xe=Ve.layoutInfo.editor,Ye=Ve.layoutInfo.editable,Ze=Ve.options,Qe=Ze.langInfo,Je=Ye[0],et=null,tt=new fe,ot=new be,nt=new ve,it=new ye,lt=new ge(Ye);this.initialize=function(){Ye.on("keydown",function(ft){ft.keyCode===pe.code.ENTER&&Ve.triggerEvent("enter",ft),Ve.triggerEvent("keydown",ft),ft.isDefaultPrevented()||(Ze.shortcuts?Ge.handleKeyMap(ft):Ge.preventDefaultEditableShortCuts(ft))}).on("keyup",function(ft){Ve.triggerEvent("keyup",ft)}).on("focus",function(ft){Ve.triggerEvent("focus",ft)}).on("blur",function(ft){Ve.triggerEvent("blur",ft)}).on("mousedown",function(ft){Ve.triggerEvent("mousedown",ft)}).on("mouseup",function(ft){Ve.triggerEvent("mouseup",ft)}).on("scroll",function(ft){Ve.triggerEvent("scroll",ft)}).on("paste",function(ft){Ve.triggerEvent("paste",ft)}),Ye.html(B.html(qe)||B.emptyPara);var gt=O.isMSIE?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input";Ye.on(gt,N.debounce(function(){Ve.triggerEvent("change",Ye.html())},250)),Xe.on("focusin",function(ft){Ve.triggerEvent("focusin",ft)}).on("focusout",function(ft){Ve.triggerEvent("focusout",ft)}),Ze.airMode||(Ze.width&&Xe.outerWidth(Ze.width),Ze.height&&Ye.outerHeight(Ze.height),Ze.maxHeight&&Ye.css("max-height",Ze.maxHeight),Ze.minHeight&&Ye.css("min-height",Ze.minHeight)),lt.recordUndo()},this.destroy=function(){Ye.off()},this.handleKeyMap=function(gt){var ft=Ze.keyMap[O.isMac?"mac":"pc"],mt=[];gt.metaKey&&mt.push("CMD"),gt.ctrlKey&&!gt.altKey&&mt.push("CTRL"),gt.shiftKey&&mt.push("SHIFT");var yt=pe.nameFromCode[gt.keyCode];yt&&mt.push(yt);var vt=ft[mt.join("+")];vt?(gt.preventDefault(),Ve.invoke(vt)):pe.isEdit(gt.keyCode)&&this.afterCommand()},this.preventDefaultEditableShortCuts=function(gt){(gt.ctrlKey||gt.metaKey)&&A.contains([66,73,85],gt.keyCode)&&gt.preventDefault()},this.createRange=function(){return this.focus(),ue.create(Je)},this.saveRange=function(gt){et=this.createRange(),gt&&et.collapse().select()},this.restoreRange=function(){et&&(et.select(),this.focus())},this.saveTarget=function(gt){Ye.data("target",gt)},this.clearTarget=function(){Ye.removeData("target")},this.restoreTarget=function(){return Ye.data("target")},this.currentStyle=function(){var gt=ue.create();return gt&&(gt=gt.normalize()),gt?tt.current(gt):tt.fromNode(Ye)},this.styleFromNode=function(gt){return tt.fromNode(gt)},this.undo=function(){Ve.triggerEvent("before.command",Ye.html()),lt.undo(),Ve.triggerEvent("change",Ye.html())},Ve.memo("help.undo",Qe.help.undo),this.redo=function(){Ve.triggerEvent("before.command",Ye.html()),lt.redo(),Ve.triggerEvent("change",Ye.html())},Ve.memo("help.redo",Qe.help.redo);for(var dt=this.beforeCommand=function(){Ve.triggerEvent("before.command",Ye.html()),Ge.focus()},ct=this.afterCommand=function(gt){lt.recordUndo(),gt||Ve.triggerEvent("change",Ye.html())},pt=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor","foreColor","fontName"],ut=0,ht=pt.length;ut<ht;ut++)this[pt[ut]]=function(gt){return function(ft){dt(),document.execCommand(gt,!1,ft),ct(!0)}}(pt[ut]),Ve.memo("help."+pt[ut],Qe.help[pt[ut]]);this.tab=function(){var gt=this.createRange();gt.isCollapsed()&&gt.isOnCell()?ot.tab(gt):(dt(),nt.insertTab(gt,Ze.tabSize),ct())},Ve.memo("help.tab",Qe.help.tab),this.untab=function(){var gt=this.createRange();gt.isCollapsed()&&gt.isOnCell()&&ot.tab(gt,!0)},Ve.memo("help.untab",Qe.help.untab),this.wrapCommand=function(gt){return function(){dt(),gt.apply(Ge,arguments),ct()}},this.insertParagraph=this.wrapCommand(function(){nt.insertParagraph(Je)}),Ve.memo("help.insertParagraph",Qe.help.insertParagraph),this.insertOrderedList=this.wrapCommand(function(){it.insertOrderedList(Je)}),Ve.memo("help.insertOrderedList",Qe.help.insertOrderedList),this.insertUnorderedList=this.wrapCommand(function(){it.insertUnorderedList(Je)}),Ve.memo("help.insertUnorderedList",Qe.help.insertUnorderedList),this.indent=this.wrapCommand(function(){it.indent(Je)}),Ve.memo("help.indent",Qe.help.indent),this.outdent=this.wrapCommand(function(){it.outdent(Je)}),Ve.memo("help.outdent",Qe.help.outdent),this.insertImage=function(gt,ft){return he.createImage(gt,ft).then(function(mt){dt(),"function"==typeof ft?ft(mt):("string"==typeof ft&&mt.attr("data-filename",ft),mt.css("width",_Mathmin(Ye.width(),mt.width()))),mt.show(),ue.create(Je).insertNode(mt[0]),ue.createFromNodeAfter(mt[0]).select(),ct()}).fail(function(mt){Ve.triggerEvent("image.upload.error",mt)})},this.insertImages=function(gt){T.each(gt,function(ft,mt){var yt=mt.name;Ze.maximumImageFileSize&&Ze.maximumImageFileSize<mt.size?Ve.triggerEvent("image.upload.error",Qe.image.maximumFileSizeError):he.readFileAsDataURL(mt).then(function(vt){return Ge.insertImage(vt,yt)}).fail(function(){Ve.triggerEvent("image.upload.error")})})},this.insertImagesOrCallback=function(gt){var ft=Ze.callbacks;ft.onImageUpload?Ve.triggerEvent("image.upload",gt):this.insertImages(gt)},this.insertNode=this.wrapCommand(function(gt){var ft=this.createRange();ft.insertNode(gt),ue.createFromNodeAfter(gt).select()}),this.insertText=this.wrapCommand(function(gt){var ft=this.createRange(),mt=ft.insertNode(B.createText(gt));ue.create(mt,B.nodeLength(mt)).select()}),this.getSelectedText=function(){var gt=this.createRange();return gt.isOnAnchor()&&(gt=ue.createFromNode(B.ancestor(gt.sc,B.isAnchor))),gt.toString()},this.pasteHTML=this.wrapCommand(function(gt){var ft=this.createRange().pasteHTML(gt);ue.createFromNodeAfter(A.last(ft)).select()}),this.formatBlock=this.wrapCommand(function(gt){gt=O.isMSIE?"<"+gt+">":gt,document.execCommand("FormatBlock",!1,gt)}),this.formatPara=function(){this.formatBlock("P")},Ve.memo("help.formatPara",Qe.help.formatPara);for(var ut=1;6>=ut;ut++)this["formatH"+ut]=function(gt){return function(){this.formatBlock("H"+gt)}}(ut),Ve.memo("help.formatH"+ut,Qe.help["formatH"+ut]);this.fontSize=function(gt){var ft=this.createRange();if(ft&&ft.isCollapsed()){var mt=tt.styleNodes(ft),yt=A.head(mt);T(mt).css({"font-size":gt+"px"}),yt&&!B.nodeLength(yt)&&(yt.innerHTML=B.ZERO_WIDTH_NBSP_CHAR,ue.createFromNodeAfter(yt.firstChild).select(),Ye.data(Ce,yt))}else dt(),T(tt.styleNodes(ft)).css({"font-size":gt+"px"}),ct()},this.insertHorizontalRule=this.wrapCommand(function(){var gt=this.createRange().insertNode(B.create("HR"));gt.nextSibling&&ue.create(gt.nextSibling,0).normalize().select()}),Ve.memo("help.insertHorizontalRule",Qe.help.insertHorizontalRule),this.removeBogus=function(){var gt=Ye.data(Ce);if(gt){var ft=A.find(A.from(gt.childNodes),B.isText),mt=ft.nodeValue.indexOf(B.ZERO_WIDTH_NBSP_CHAR);-1!==mt&&ft.deleteData(mt,1),B.isEmpty(gt)&&B.remove(gt),Ye.removeData(Ce)}},this.lineHeight=this.wrapCommand(function(gt){tt.stylePara(this.createRange(),{lineHeight:gt})}),this.unlink=function(){var gt=this.createRange();if(gt.isOnAnchor()){var ft=B.ancestor(gt.sc,B.isAnchor);gt=ue.createFromNode(ft),gt.select(),dt(),document.execCommand("unlink"),ct()}},this.createLink=this.wrapCommand(function(gt){var ft=gt.url,mt=gt.text,yt=gt.isNewWindow,vt=gt.range||this.createRange(),bt=vt.toString()!==mt;"string"==typeof ft&&(ft=ft.trim()),Ze.onCreateLink&&(ft=Ze.onCreateLink(ft));var Ct=[];if(bt){vt=vt.deleteContents();var xt=vt.insertNode(T("<A>"+mt+"</A>")[0]);Ct.push(xt)}else Ct=tt.styleNodes(vt,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});T.each(Ct,function(Tt,Nt){ft=/^[A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?/.test(ft)?ft:"http://"+ft,T(Nt).attr("href",ft),yt?T(Nt).attr("target","_blank"):T(Nt).removeAttr("target")});var kt=ue.createFromNodeBefore(A.head(Ct)),wt=kt.getStartPoint(),St=ue.createFromNodeAfter(A.last(Ct)),Lt=St.getEndPoint();ue.create(wt.node,wt.offset,Lt.node,Lt.offset).select()}),this.getLinkInfo=function(){var gt=this.createRange().expand(B.isAnchor),ft=T(A.head(gt.nodes(B.isAnchor)));return{range:gt,text:gt.toString(),isNewWindow:!!ft.length&&"_blank"===ft.attr("target"),url:ft.length?ft.attr("href"):""}},this.color=this.wrapCommand(function(gt){var ft=gt.foreColor,mt=gt.backColor;ft&&document.execCommand("foreColor",!1,ft),mt&&document.execCommand("backColor",!1,mt)}),this.insertTable=this.wrapCommand(function(gt){var ft=gt.split("x"),mt=this.createRange().deleteContents();mt.insertNode(ot.createTable(ft[0],ft[1],Ze))}),this.floatMe=this.wrapCommand(function(gt){var ft=T(this.restoreTarget());ft.css("float",gt)}),this.resize=this.wrapCommand(function(gt){var ft=T(this.restoreTarget());ft.css({width:100*gt+"%",height:""})}),this.resizeTo=function(gt,ft,mt){var yt;if(mt){var vt=gt.y/gt.x,bt=ft.data("ratio");yt={width:bt>vt?gt.x:gt.y/bt,height:bt>vt?gt.x*bt:gt.y}}else yt={width:gt.x,height:gt.y};ft.css(yt)},this.removeMedia=this.wrapCommand(function(){var gt=T(this.restoreTarget()).detach();Ve.triggerEvent("media.delete",gt,Ye)}),this.hasFocus=function(){return Ye.is(":focus")},this.focus=function(){this.hasFocus()||Ye.focus()},this.isEmpty=function(){return B.isEmpty(Ye[0])||B.emptyPara===Ye.html()},this.empty=function(){Ve.invoke("code",B.emptyPara)}},clipboard:function(Ve){var Ge=this,qe=Ve.layoutInfo.editable;this.events={"summernote.keydown":function(Ye,Ze){Ge.needKeydownHook()&&(Ze.ctrlKey||Ze.metaKey)&&Ze.keyCode===pe.code.V&&(Ve.invoke("editor.saveRange"),Ge.$paste.focus(),setTimeout(function(){Ge.pasteByHook()},0))}},this.needKeydownHook=function(){return O.isMSIE&&10<O.browserVersion||O.isFF},this.initialize=function(){this.needKeydownHook()?(this.$paste=T("<div tabindex=\"-1\" />").attr("contenteditable",!0).css({position:"absolute",left:-1e5,opacity:0}),qe.before(this.$paste),this.$paste.on("paste",function(Xe){Ve.triggerEvent("paste",Xe)})):qe.on("paste",this.pasteByEvent)},this.destroy=function(){this.needKeydownHook()&&(this.$paste.remove(),this.$paste=null)},this.pasteByHook=function(){var Xe=this.$paste[0].firstChild;if(B.isImg(Xe)){for(var Ye=Xe.src,Ze=atob(Ye.split(",")[1]),Qe=new Uint8Array(Ze.length),Je=0;Je<Ze.length;Je++)Qe[Je]=Ze.charCodeAt(Je);var et=new Blob([Qe],{type:"image/png"});et.name="clipboard.png",Ve.invoke("editor.restoreRange"),Ve.invoke("editor.focus"),Ve.invoke("editor.insertImagesOrCallback",[et])}else{var tt=T("<div />").html(this.$paste.html()).html();Ve.invoke("editor.restoreRange"),Ve.invoke("editor.focus"),tt&&Ve.invoke("editor.pasteHTML",tt)}this.$paste.empty()},this.pasteByEvent=function(Xe){var Ye=Xe.originalEvent.clipboardData;if(Ye&&Ye.items&&Ye.items.length){var Ze=A.head(Ye.items);"file"===Ze.kind&&-1!==Ze.type.indexOf("image/")&&Ve.invoke("editor.insertImagesOrCallback",[Ze.getAsFile()]),Ve.invoke("editor.afterCommand")}}},dropzone:function(Ve){var Ge=T(document),qe=Ve.layoutInfo.editor,Xe=Ve.layoutInfo.editable,Ye=Ve.options,Ze=Ye.langInfo,Qe={},Je=T(["<div class=\"note-dropzone\">","  <div class=\"note-dropzone-message\"/>","</div>"].join("")).prependTo(qe),et=function(){Object.keys(Qe).forEach(function(ot){Ge.off(ot.substr(2).toLowerCase(),Qe[ot])}),Qe={}};this.initialize=function(){Ye.disableDragAndDrop?(Qe.onDrop=function(tt){tt.preventDefault()},Ge.on("drop",Qe.onDrop)):this.attachDragAndDropEvent()},this.attachDragAndDropEvent=function(){var tt=T(),ot=Je.find(".note-dropzone-message");Qe.onDragenter=function(nt){var it=Ve.invoke("codeview.isActivated"),lt=0<qe.width()&&0<qe.height();it||tt.length||!lt||(qe.addClass("dragover"),Je.width(qe.width()),Je.height(qe.height()),ot.text(Ze.image.dragImageHere)),tt=tt.add(nt.target)},Qe.onDragleave=function(nt){tt=tt.not(nt.target),tt.length||qe.removeClass("dragover")},Qe.onDrop=function(){tt=T(),qe.removeClass("dragover")},Ge.on("dragenter",Qe.onDragenter).on("dragleave",Qe.onDragleave).on("drop",Qe.onDrop),Je.on("dragenter",function(){Je.addClass("hover"),ot.text(Ze.image.dropImage)}).on("dragleave",function(){Je.removeClass("hover"),ot.text(Ze.image.dragImageHere)}),Je.on("drop",function(nt){var it=nt.originalEvent.dataTransfer;it&&it.files&&it.files.length?(nt.preventDefault(),Xe.focus(),Ve.invoke("editor.insertImagesOrCallback",it.files)):T.each(it.types,function(lt,dt){var ct=it.getData(dt);-1<dt.toLowerCase().indexOf("text")?Ve.invoke("editor.pasteHTML",ct):T(ct).each(function(){Ve.invoke("editor.insertNode",this)})})}).on("dragover",!1)},this.destroy=function(){et()}},codeview:function(Ve){var Ge=Ve.layoutInfo.editor,qe=Ve.layoutInfo.editable,Xe=Ve.layoutInfo.codable,Ye=Ve.options;this.sync=function(){var Ze=this.isActivated();Ze&&O.hasCodeMirror&&Xe.data("cmEditor").save()},this.isActivated=function(){return Ge.hasClass("codeview")},this.toggle=function(){this.isActivated()?this.deactivate():this.activate(),Ve.triggerEvent("codeview.toggled")},this.activate=function(){if(Xe.val(B.html(qe,Ye.prettifyHtml)),Xe.height(qe.height()),Ve.invoke("toolbar.updateCodeview",!0),Ge.addClass("codeview"),Xe.focus(),O.hasCodeMirror){var Ze=Le.fromTextArea(Xe[0],Ye.codemirror);if(Ye.codemirror.tern){var Qe=new Le.TernServer(Ye.codemirror.tern);Ze.ternServer=Qe,Ze.on("cursorActivity",function(Je){Qe.updateArgHints(Je)})}Ze.setSize(null,qe.outerHeight()),Xe.data("cmEditor",Ze)}},this.deactivate=function(){if(O.hasCodeMirror){var Ze=Xe.data("cmEditor");Xe.val(Ze.getValue()),Ze.toTextArea()}var Qe=B.value(Xe,Ye.prettifyHtml)||B.emptyPara,Je=qe.html()!==Qe;qe.html(Qe),qe.height(Ye.height?Xe.height():"auto"),Ge.removeClass("codeview"),Je&&Ve.triggerEvent("change",qe.html(),qe),qe.focus(),Ve.invoke("toolbar.updateCodeview",!1)},this.destroy=function(){this.isActivated()&&this.deactivate()}},statusbar:function(Ve){var Ge=T(document),qe=Ve.layoutInfo.statusbar,Xe=Ve.layoutInfo.editable,Ye=Ve.options;this.initialize=function(){Ye.airMode||Ye.disableResizeEditor||qe.on("mousedown",function(Ze){Ze.preventDefault(),Ze.stopPropagation();var Qe=Xe.offset().top-Ge.scrollTop();Ge.on("mousemove",function(Je){var et=Je.clientY-(Qe+24);et=0<Ye.minheight?_Mathmax(et,Ye.minheight):et,et=0<Ye.maxHeight?_Mathmin(et,Ye.maxHeight):et,Xe.height(et)}).one("mouseup",function(){Ge.off("mousemove")})})},this.destroy=function(){qe.off(),qe.remove()}},fullscreen:function(Ve){var Ge=Ve.layoutInfo.editor,qe=Ve.layoutInfo.toolbar,Xe=Ve.layoutInfo.editable,Ye=Ve.layoutInfo.codable,Ze=T(window),Qe=T("html, body");this.toggle=function(){var Je=function(tt){Xe.css("height",tt.h),Ye.css("height",tt.h),Ye.data("cmeditor")&&Ye.data("cmeditor").setsize(null,tt.h)};Ge.toggleClass("fullscreen"),this.isFullscreen()?(Xe.data("orgHeight",Xe.css("height")),Ze.on("resize",function(){Je({h:Ze.height()-qe.outerHeight()})}).trigger("resize"),Qe.css("overflow","hidden")):(Ze.off("resize"),Je({h:Xe.data("orgHeight")}),Qe.css("overflow","visible")),Ve.invoke("toolbar.updateFullscreen",this.isFullscreen())},this.isFullscreen=function(){return Ge.hasClass("fullscreen")}},handle:function(Ve){var Ge=this,qe=T(document),Xe=Ve.layoutInfo.editingArea,Ye=Ve.options;this.events={"summernote.mousedown":function(Qe,Je){Ge.update(Je.target)&&Je.preventDefault()},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){Ge.update()}},this.initialize=function(){this.$handle=T(["<div class=\"note-handle\">","<div class=\"note-control-selection\">","<div class=\"note-control-selection-bg\"></div>","<div class=\"note-control-holder note-control-nw\"></div>","<div class=\"note-control-holder note-control-ne\"></div>","<div class=\"note-control-holder note-control-sw\"></div>","<div class=\"",Ye.disableResizeImage?"note-control-holder":"note-control-sizing"," note-control-se\"></div>",Ye.disableResizeImage?"":"<div class=\"note-control-selection-info\"></div>","</div>","</div>"].join("")).prependTo(Xe),this.$handle.on("mousedown",function(Ze){if(B.isControlSizing(Ze.target)){Ze.preventDefault(),Ze.stopPropagation();var Qe=Ge.$handle.find(".note-control-selection").data("target"),Je=Qe.offset(),et=qe.scrollTop();qe.on("mousemove",function(tt){Ve.invoke("editor.resizeTo",{x:tt.clientX-Je.left,y:tt.clientY-(Je.top-et)},Qe,!tt.shiftKey),Ge.update(Qe[0])}).one("mouseup",function(tt){tt.preventDefault(),qe.off("mousemove"),Ve.invoke("editor.afterCommand")}),Qe.data("ratio")||Qe.data("ratio",Qe.height()/Qe.width())}})},this.destroy=function(){this.$handle.remove()},this.update=function(Ze){var Qe=B.isImg(Ze),Je=this.$handle.find(".note-control-selection");if(Ve.invoke("imagePopover.update",Ze),Qe){var et=T(Ze),tt=et.position(),ot={w:et.outerWidth(!0),h:et.outerHeight(!0)};Je.css({display:"block",left:tt.left,top:tt.top,width:ot.w,height:ot.h}).data("target",et);var nt=ot.w+"x"+ot.h;Je.find(".note-control-selection-info").text(nt),Ve.invoke("editor.saveTarget",Ze)}else this.hide();return Qe},this.hide=function(){Ve.invoke("editor.clearTarget"),this.$handle.children().hide()}},hintPopover:function(Ve){var Ge=this,qe=T.summernote.ui,Xe=5,Ye=Ve.options.hint||[],Ze=Ve.options.hintDirection||"bottom",Qe=T.isArray(Ye)?Ye:[Ye];this.events={"summernote.keyup":function(et,tt){tt.isDefaultPrevented()||Ge.handleKeyup(tt)},"summernote.keydown":function(et,tt){Ge.handleKeydown(tt)},"summernote.dialog.shown":function(){Ge.hide()}},this.shouldInitialize=function(){return 0<Qe.length},this.initialize=function(){this.lastWordRange=null,this.$popover=qe.popover({className:"note-hint-popover",hideArrow:!0,direction:""}).render().appendTo("body"),this.$popover.hide(),this.$content=this.$popover.find(".popover-content"),this.$content.on("click",".note-hint-item",function(){Ge.$content.find(".active").removeClass("active"),T(this).addClass("active"),Ge.replace()})},this.destroy=function(){this.$popover.remove()},this.selectItem=function(Je){this.$content.find(".active").removeClass("active"),Je.addClass("active"),this.$content[0].scrollTop=Je[0].offsetTop-this.$content.innerHeight()/2},this.moveDown=function(){var Je=this.$content.find(".note-hint-item.active"),et=Je.next();if(et.length)this.selectItem(et);else{var tt=Je.parent().next();tt.length||(tt=this.$content.find(".note-hint-group").first()),this.selectItem(tt.find(".note-hint-item").first())}},this.moveUp=function(){var Je=this.$content.find(".note-hint-item.active"),et=Je.prev();if(et.length)this.selectItem(et);else{var tt=Je.parent().prev();tt.length||(tt=this.$content.find(".note-hint-group").last()),this.selectItem(tt.find(".note-hint-item").last())}},this.replace=function(){var Je=this.$content.find(".note-hint-item.active");if(Je.length){var et=this.nodeFromItem(Je);this.lastWordRange.insertNode(et),ue.createFromNode(et).collapse().select(),this.lastWordRange=null,this.hide(),Ve.invoke("editor.focus")}},this.nodeFromItem=function(Je){var et=Qe[Je.data("index")],tt=Je.data("item"),ot=et.content?et.content(tt):tt;return"string"==typeof ot&&(ot=B.createText(ot)),ot},this.createItemTemplates=function(Je,et){var tt=Qe[Je];return et.map(function(ot,nt){var it=T("<div class=\"note-hint-item\"/>");return it.append(tt.template?tt.template(ot):ot+""),it.data({index:Je,item:ot}),0===Je&&0===nt&&it.addClass("active"),it})},this.handleKeydown=function(Je){this.$popover.is(":visible")&&(Je.keyCode===pe.code.ENTER?(Je.preventDefault(),this.replace()):Je.keyCode===pe.code.UP?(Je.preventDefault(),this.moveUp()):Je.keyCode===pe.code.DOWN&&(Je.preventDefault(),this.moveDown()))},this.searchKeyword=function(Je,et,tt){var ot=Qe[Je];if(ot&&ot.match.test(et)&&ot.search){var nt=ot.match.exec(et);ot.search(nt[1],tt)}else tt()},this.createGroup=function(Je,et){var tt=T("<div class=\"note-hint-group note-hint-group-"+Je+"\"/>");return this.searchKeyword(Je,et,function(ot){ot=ot||[],ot.length&&(tt.html(Ge.createItemTemplates(Je,ot)),Ge.show())}),tt},this.handleKeyup=function(Je){if(!A.contains([pe.code.ENTER,pe.code.UP,pe.code.DOWN],Je.keyCode)){var et=Ve.invoke("editor.createRange").getWordRange(),tt=et.toString();if(Qe.length&&tt){this.$content.empty();var ot=N.rect2bnd(A.last(et.getClientRects()));ot&&(this.$popover.hide(),this.lastWordRange=et,Qe.forEach(function(nt,it){nt.match.test(tt)&&Ge.createGroup(it,tt).appendTo(Ge.$content)}),"top"===Ze?this.$popover.css({left:ot.left,top:ot.top-this.$popover.outerHeight()-Xe}):this.$popover.css({left:ot.left,top:ot.top+ot.height+Xe}))}else this.hide()}else if(Je.keyCode===pe.code.ENTER&&this.$popover.is(":visible"))return},this.show=function(){this.$popover.show()},this.hide=function(){this.$popover.hide()}},autoLink:function(Ve){var Ge=this,Xe=/^([A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?|mailto:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i;this.events={"summernote.keyup":function(Ze,Qe){Qe.isDefaultPrevented()||Ge.handleKeyup(Qe)},"summernote.keydown":function(Ze,Qe){Ge.handleKeydown(Qe)}},this.initialize=function(){this.lastWordRange=null},this.destroy=function(){this.lastWordRange=null},this.replace=function(){if(this.lastWordRange){var Ye=this.lastWordRange.toString(),Ze=Ye.match(Xe);if(Ze&&(Ze[1]||Ze[2])){var Qe=Ze[1]?Ye:"http://"+Ye,Je=T("<a />").html(Ye).attr("href",Qe)[0];this.lastWordRange.insertNode(Je),this.lastWordRange=null,Ve.invoke("editor.focus")}}},this.handleKeydown=function(Ye){if(A.contains([pe.code.ENTER,pe.code.SPACE],Ye.keyCode)){var Ze=Ve.invoke("editor.createRange").getWordRange();this.lastWordRange=Ze}},this.handleKeyup=function(Ye){A.contains([pe.code.ENTER,pe.code.SPACE],Ye.keyCode)&&this.replace()}},autoSync:function(Ve){var Ge=Ve.layoutInfo.note;this.events={"summernote.change":function(){Ge.val(Ve.invoke("code"))}},this.shouldInitialize=function(){return B.isTextarea(Ge[0])}},placeholder:function(Ve){var Ge=this,qe=Ve.layoutInfo.editingArea,Xe=Ve.options;this.events={"summernote.init summernote.change":function(){Ge.update()},"summernote.codeview.toggled":function(){Ge.update()}},this.shouldInitialize=function(){return!!Xe.placeholder},this.initialize=function(){this.$placeholder=T("<div class=\"note-placeholder\">"),this.$placeholder.on("click",function(){Ve.invoke("focus")}).text(Xe.placeholder).prependTo(qe)},this.destroy=function(){this.$placeholder.remove()},this.update=function(){var Ye=!Ve.invoke("codeview.isActivated")&&Ve.invoke("editor.isEmpty");this.$placeholder.toggle(Ye)}},buttons:function(Ve){var Ge=this,qe=T.summernote.ui,Xe=Ve.layoutInfo.toolbar,Ye=Ve.options,Ze=Ye.langInfo,Qe=N.invertObject(Ye.keyMap[O.isMac?"mac":"pc"]),Je=this.representShortcut=function(et){var tt=Qe[et];return Ye.shortcuts&&tt?(O.isMac&&(tt=tt.replace("CMD","\u2318").replace("SHIFT","\u21E7")),tt=tt.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]")," ("+tt+")"):""};this.initialize=function(){this.addToolbarButtons(),this.addImagePopoverButtons(),this.addLinkPopoverButtons(),this.fontInstalledMap={}},this.destroy=function(){delete this.fontInstalledMap},this.isFontInstalled=function(et){return Ge.fontInstalledMap.hasOwnProperty(et)||(Ge.fontInstalledMap[et]=O.isFontInstalled(et)||A.contains(Ye.fontNamesIgnoreCheck,et)),Ge.fontInstalledMap[et]},this.addToolbarButtons=function(){Ve.memo("button.style",function(){return qe.buttonGroup([qe.button({className:"dropdown-toggle",contents:qe.icon(Ye.icons.magic)+" "+qe.icon(Ye.icons.caret,"span"),tooltip:Ze.style.style,data:{toggle:"dropdown"}}),qe.dropdown({className:"dropdown-style",items:Ve.options.styleTags,template:function(ct){"string"==typeof ct&&(ct={tag:ct,title:Ze.style.hasOwnProperty(ct)?Ze.style[ct]:ct});var pt=ct.tag,ut=ct.title,ht=ct.style?" style=\""+ct.style+"\" ":"",gt=ct.className?" class=\""+ct.className+"\"":"";return"<"+pt+ht+gt+">"+ut+"</"+pt+">"},click:Ve.createInvokeHandler("editor.formatBlock")})]).render()}),Ve.memo("button.bold",function(){return qe.button({className:"note-btn-bold",contents:qe.icon(Ye.icons.bold),tooltip:Ze.font.bold+Je("bold"),click:Ve.createInvokeHandler("editor.bold")}).render()}),Ve.memo("button.italic",function(){return qe.button({className:"note-btn-italic",contents:qe.icon(Ye.icons.italic),tooltip:Ze.font.italic+Je("italic"),click:Ve.createInvokeHandler("editor.italic")}).render()}),Ve.memo("button.underline",function(){return qe.button({className:"note-btn-underline",contents:qe.icon(Ye.icons.underline),tooltip:Ze.font.underline+Je("underline"),click:Ve.createInvokeHandler("editor.underline")}).render()}),Ve.memo("button.clear",function(){return qe.button({contents:qe.icon(Ye.icons.eraser),tooltip:Ze.font.clear+Je("removeFormat"),click:Ve.createInvokeHandler("editor.removeFormat")}).render()}),Ve.memo("button.strikethrough",function(){return qe.button({className:"note-btn-strikethrough",contents:qe.icon(Ye.icons.strikethrough),tooltip:Ze.font.strikethrough+Je("strikethrough"),click:Ve.createInvokeHandler("editor.strikethrough")}).render()}),Ve.memo("button.superscript",function(){return qe.button({className:"note-btn-superscript",contents:qe.icon(Ye.icons.superscript),tooltip:Ze.font.superscript,click:Ve.createInvokeHandler("editor.superscript")}).render()}),Ve.memo("button.subscript",function(){return qe.button({className:"note-btn-subscript",contents:qe.icon(Ye.icons.subscript),tooltip:Ze.font.subscript,click:Ve.createInvokeHandler("editor.subscript")}).render()}),Ve.memo("button.fontname",function(){return qe.buttonGroup([qe.button({className:"dropdown-toggle",contents:"<span class=\"note-current-fontname\"/> "+qe.icon(Ye.icons.caret,"span"),tooltip:Ze.font.name,data:{toggle:"dropdown"}}),qe.dropdownCheck({className:"dropdown-fontname",checkClassName:Ye.icons.menuCheck,items:Ye.fontNames.filter(Ge.isFontInstalled),template:function(ct){return"<span style=\"font-family:"+ct+"\">"+ct+"</span>"},click:Ve.createInvokeHandler("editor.fontName")})]).render()}),Ve.memo("button.fontsize",function(){return qe.buttonGroup([qe.button({className:"dropdown-toggle",contents:"<span class=\"note-current-fontsize\"/>"+qe.icon(Ye.icons.caret,"span"),tooltip:Ze.font.size,data:{toggle:"dropdown"}}),qe.dropdownCheck({className:"dropdown-fontsize",checkClassName:Ye.icons.menuCheck,items:Ye.fontSizes,click:Ve.createInvokeHandler("editor.fontSize")})]).render()}),Ve.memo("button.color",function(){return qe.buttonGroup({className:"note-color",children:[qe.button({className:"note-current-color-button",contents:qe.icon(Ye.icons.font+" note-recent-color"),tooltip:Ze.color.recent,click:function(ct){var pt=T(ct.currentTarget);Ve.invoke("editor.color",{backColor:pt.attr("data-backColor"),foreColor:pt.attr("data-foreColor")})},callback:function(ct){var pt=ct.find(".note-recent-color");pt.css("background-color","#FFFF00"),ct.attr("data-backColor","#FFFF00")}}),qe.button({className:"dropdown-toggle",contents:qe.icon(Ye.icons.caret,"span"),tooltip:Ze.color.more,data:{toggle:"dropdown"}}),qe.dropdown({items:["<li>","<div class=\"btn-group\">","  <div class=\"note-palette-title\">"+Ze.color.background+"</div>","  <div>","    <button type=\"button\" class=\"note-color-reset btn btn-default\" data-event=\"backColor\" data-value=\"inherit\">",Ze.color.transparent,"    </button>","  </div>","  <div class=\"note-holder\" data-event=\"backColor\"/>","</div>","<div class=\"btn-group\">","  <div class=\"note-palette-title\">"+Ze.color.foreground+"</div>","  <div>","    <button type=\"button\" class=\"note-color-reset btn btn-default\" data-event=\"removeFormat\" data-value=\"foreColor\">",Ze.color.resetToDefault,"    </button>","  </div>","  <div class=\"note-holder\" data-event=\"foreColor\"/>","</div>","</li>"].join(""),callback:function(ct){ct.find(".note-holder").each(function(){var pt=T(this);pt.append(qe.palette({colors:Ye.colors,eventName:pt.data("event")}).render())})},click:function(ct){var pt=T(ct.target),ut=pt.data("event"),ht=pt.data("value");if(ut&&ht){var gt="backColor"===ut?"background-color":"color",ft=pt.closest(".note-color").find(".note-recent-color"),mt=pt.closest(".note-color").find(".note-current-color-button");ft.css(gt,ht),mt.attr("data-"+ut,ht),Ve.invoke("editor."+ut,ht)}}})]}).render()}),Ve.memo("button.ul",function(){return qe.button({contents:qe.icon(Ye.icons.unorderedlist),tooltip:Ze.lists.unordered+Je("insertUnorderedList"),click:Ve.createInvokeHandler("editor.insertUnorderedList")}).render()}),Ve.memo("button.ol",function(){return qe.button({contents:qe.icon(Ye.icons.orderedlist),tooltip:Ze.lists.ordered+Je("insertOrderedList"),click:Ve.createInvokeHandler("editor.insertOrderedList")}).render()});var et=qe.button({contents:qe.icon(Ye.icons.alignLeft),tooltip:Ze.paragraph.left+Je("justifyLeft"),click:Ve.createInvokeHandler("editor.justifyLeft")}),tt=qe.button({contents:qe.icon(Ye.icons.alignCenter),tooltip:Ze.paragraph.center+Je("justifyCenter"),click:Ve.createInvokeHandler("editor.justifyCenter")}),ot=qe.button({contents:qe.icon(Ye.icons.alignRight),tooltip:Ze.paragraph.right+Je("justifyRight"),click:Ve.createInvokeHandler("editor.justifyRight")}),nt=qe.button({contents:qe.icon(Ye.icons.alignJustify),tooltip:Ze.paragraph.justify+Je("justifyFull"),click:Ve.createInvokeHandler("editor.justifyFull")}),it=qe.button({contents:qe.icon(Ye.icons.outdent),tooltip:Ze.paragraph.outdent+Je("outdent"),click:Ve.createInvokeHandler("editor.outdent")}),lt=qe.button({contents:qe.icon(Ye.icons.indent),tooltip:Ze.paragraph.indent+Je("indent"),click:Ve.createInvokeHandler("editor.indent")});Ve.memo("button.justifyLeft",N.invoke(et,"render")),Ve.memo("button.justifyCenter",N.invoke(tt,"render")),Ve.memo("button.justifyRight",N.invoke(ot,"render")),Ve.memo("button.justifyFull",N.invoke(nt,"render")),Ve.memo("button.outdent",N.invoke(it,"render")),Ve.memo("button.indent",N.invoke(lt,"render")),Ve.memo("button.paragraph",function(){return qe.buttonGroup([qe.button({className:"dropdown-toggle",contents:qe.icon(Ye.icons.alignLeft)+" "+qe.icon(Ye.icons.caret,"span"),tooltip:Ze.paragraph.paragraph,data:{toggle:"dropdown"}}),qe.dropdown([qe.buttonGroup({className:"note-align",children:[et,tt,ot,nt]}),qe.buttonGroup({className:"note-list",children:[it,lt]})])]).render()}),Ve.memo("button.height",function(){return qe.buttonGroup([qe.button({className:"dropdown-toggle",contents:qe.icon(Ye.icons.textHeight)+" "+qe.icon(Ye.icons.caret,"span"),tooltip:Ze.font.height,data:{toggle:"dropdown"}}),qe.dropdownCheck({items:Ye.lineHeights,checkClassName:Ye.icons.menuCheck,className:"dropdown-line-height",click:Ve.createInvokeHandler("editor.lineHeight")})]).render()}),Ve.memo("button.table",function(){return qe.buttonGroup([qe.button({className:"dropdown-toggle",contents:qe.icon(Ye.icons.table)+" "+qe.icon(Ye.icons.caret,"span"),tooltip:Ze.table.table,data:{toggle:"dropdown"}}),qe.dropdown({className:"note-table",items:["<div class=\"note-dimension-picker\">","  <div class=\"note-dimension-picker-mousecatcher\" data-event=\"insertTable\" data-value=\"1x1\"/>","  <div class=\"note-dimension-picker-highlighted\"/>","  <div class=\"note-dimension-picker-unhighlighted\"/>","</div>","<div class=\"note-dimension-display\">1 x 1</div>"].join("")})],{callback:function(ct){var pt=ct.find(".note-dimension-picker-mousecatcher");pt.css({width:Ye.insertTableMaxSize.col+"em",height:Ye.insertTableMaxSize.row+"em"}).mousedown(Ve.createInvokeHandler("editor.insertTable")).on("mousemove",Ge.tableMoveHandler)}}).render()}),Ve.memo("button.link",function(){return qe.button({contents:qe.icon(Ye.icons.link),tooltip:Ze.link.link+Je("linkDialog.show"),click:Ve.createInvokeHandler("linkDialog.show")}).render()}),Ve.memo("button.picture",function(){return qe.button({contents:qe.icon(Ye.icons.picture),tooltip:Ze.image.image,click:Ve.createInvokeHandler("imageDialog.show")}).render()}),Ve.memo("button.video",function(){return qe.button({contents:qe.icon(Ye.icons.video),tooltip:Ze.video.video,click:Ve.createInvokeHandler("videoDialog.show")}).render()}),Ve.memo("button.hr",function(){return qe.button({contents:qe.icon(Ye.icons.minus),tooltip:Ze.hr.insert+Je("insertHorizontalRule"),click:Ve.createInvokeHandler("editor.insertHorizontalRule")}).render()}),Ve.memo("button.fullscreen",function(){return qe.button({className:"btn-fullscreen",contents:qe.icon(Ye.icons.arrowsAlt),tooltip:Ze.options.fullscreen,click:Ve.createInvokeHandler("fullscreen.toggle")}).render()}),Ve.memo("button.codeview",function(){return qe.button({className:"btn-codeview",contents:qe.icon(Ye.icons.code),tooltip:Ze.options.codeview,click:Ve.createInvokeHandler("codeview.toggle")}).render()}),Ve.memo("button.redo",function(){return qe.button({contents:qe.icon(Ye.icons.redo),tooltip:Ze.history.redo+Je("redo"),click:Ve.createInvokeHandler("editor.redo")}).render()}),Ve.memo("button.undo",function(){return qe.button({contents:qe.icon(Ye.icons.undo),tooltip:Ze.history.undo+Je("undo"),click:Ve.createInvokeHandler("editor.undo")}).render()}),Ve.memo("button.help",function(){return qe.button({contents:qe.icon(Ye.icons.question),tooltip:Ze.options.help,click:Ve.createInvokeHandler("helpDialog.show")}).render()})},this.addImagePopoverButtons=function(){Ve.memo("button.imageSize100",function(){return qe.button({contents:"<span class=\"note-fontsize-10\">100%</span>",tooltip:Ze.image.resizeFull,click:Ve.createInvokeHandler("editor.resize","1")}).render()}),Ve.memo("button.imageSize50",function(){return qe.button({contents:"<span class=\"note-fontsize-10\">50%</span>",tooltip:Ze.image.resizeHalf,click:Ve.createInvokeHandler("editor.resize","0.5")}).render()}),Ve.memo("button.imageSize25",function(){return qe.button({contents:"<span class=\"note-fontsize-10\">25%</span>",tooltip:Ze.image.resizeQuarter,click:Ve.createInvokeHandler("editor.resize","0.25")}).render()}),Ve.memo("button.floatLeft",function(){return qe.button({contents:qe.icon(Ye.icons.alignLeft),tooltip:Ze.image.floatLeft,click:Ve.createInvokeHandler("editor.floatMe","left")}).render()}),Ve.memo("button.floatRight",function(){return qe.button({contents:qe.icon(Ye.icons.alignRight),tooltip:Ze.image.floatRight,click:Ve.createInvokeHandler("editor.floatMe","right")}).render()}),Ve.memo("button.floatNone",function(){return qe.button({contents:qe.icon(Ye.icons.alignJustify),tooltip:Ze.image.floatNone,click:Ve.createInvokeHandler("editor.floatMe","none")}).render()}),Ve.memo("button.removeMedia",function(){return qe.button({contents:qe.icon(Ye.icons.trash),tooltip:Ze.image.remove,click:Ve.createInvokeHandler("editor.removeMedia")}).render()})},this.addLinkPopoverButtons=function(){Ve.memo("button.linkDialogShow",function(){return qe.button({contents:qe.icon(Ye.icons.link),tooltip:Ze.link.edit,click:Ve.createInvokeHandler("linkDialog.show")}).render()}),Ve.memo("button.unlink",function(){return qe.button({contents:qe.icon(Ye.icons.unlink),tooltip:Ze.link.unlink,click:Ve.createInvokeHandler("editor.unlink")}).render()})},this.build=function(et,tt){for(var ot=0,nt=tt.length;ot<nt;ot++){for(var it=tt[ot],lt=it[0],dt=it[1],ct=qe.buttonGroup({className:"note-"+lt}).render(),pt=0,ut=dt.length,ht;pt<ut;pt++)ht=Ve.memo("button."+dt[pt]),ht&&ct.append("function"==typeof ht?ht(Ve):ht);ct.appendTo(et)}},this.updateCurrentStyle=function(){var et=Ve.invoke("editor.currentStyle");if(this.updateBtnStates({".note-btn-bold":function(){return"bold"===et["font-bold"]},".note-btn-italic":function(){return"italic"===et["font-italic"]},".note-btn-underline":function(){return"underline"===et["font-underline"]},".note-btn-subscript":function(){return"subscript"===et["font-subscript"]},".note-btn-superscript":function(){return"superscript"===et["font-superscript"]},".note-btn-strikethrough":function(){return"strikethrough"===et["font-strikethrough"]}}),et["font-family"]){var tt=et["font-family"].split(",").map(function(lt){return lt.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")}),ot=A.find(tt,Ge.isFontInstalled);Xe.find(".dropdown-fontname li a").each(function(){var lt=T(this).data("value")+""==ot+"";this.className=lt?"checked":""}),Xe.find(".note-current-fontname").text(ot)}if(et["font-size"]){var nt=et["font-size"];Xe.find(".dropdown-fontsize li a").each(function(){var lt=T(this).data("value")+""==nt+"";this.className=lt?"checked":""}),Xe.find(".note-current-fontsize").text(nt)}if(et["line-height"]){var it=et["line-height"];Xe.find(".dropdown-line-height li a").each(function(){var lt=T(this).data("value")+""==it+"";this.className=lt?"checked":""})}},this.updateBtnStates=function(et){T.each(et,function(tt,ot){qe.toggleBtnActive(Xe.find(tt),ot())})},this.tableMoveHandler=function(et){var tt=18,ot=T(et.target.parentNode),nt=ot.next(),it=ot.find(".note-dimension-picker-mousecatcher"),lt=ot.find(".note-dimension-picker-highlighted"),dt=ot.find(".note-dimension-picker-unhighlighted"),ct;if(et.offsetX===void 0){var pt=T(et.target).offset();ct={x:et.pageX-pt.left,y:et.pageY-pt.top}}else ct={x:et.offsetX,y:et.offsetY};var ut={c:_Mathceil(ct.x/tt)||1,r:_Mathceil(ct.y/tt)||1};lt.css({width:ut.c+"em",height:ut.r+"em"}),it.data("value",ut.c+"x"+ut.r),3<ut.c&&ut.c<Ye.insertTableMaxSize.col&&dt.css({width:ut.c+1+"em"}),3<ut.r&&ut.r<Ye.insertTableMaxSize.row&&dt.css({height:ut.r+1+"em"}),nt.html(ut.c+" x "+ut.r)}},toolbar:function(Ve){var Ge=T.summernote.ui,qe=Ve.layoutInfo.note,Xe=Ve.layoutInfo.toolbar,Ye=Ve.options;this.shouldInitialize=function(){return!Ye.airMode},this.initialize=function(){Ye.toolbar=Ye.toolbar||[],Ye.toolbar.length?Ve.invoke("buttons.build",Xe,Ye.toolbar):Xe.hide(),Ye.toolbarContainer&&Xe.appendTo(Ye.toolbarContainer),qe.on("summernote.keyup summernote.mouseup summernote.change",function(){Ve.invoke("buttons.updateCurrentStyle")}),Ve.invoke("buttons.updateCurrentStyle")},this.destroy=function(){Xe.children().remove()},this.updateFullscreen=function(Ze){Ge.toggleBtnActive(Xe.find(".btn-fullscreen"),Ze)},this.updateCodeview=function(Ze){Ge.toggleBtnActive(Xe.find(".btn-codeview"),Ze),Ze?this.deactivate():this.activate()},this.activate=function(Ze){var Qe=Xe.find("button");Ze||(Qe=Qe.not(".btn-codeview")),Ge.toggleBtn(Qe,!0)},this.deactivate=function(Ze){var Qe=Xe.find("button");Ze||(Qe=Qe.not(".btn-codeview")),Ge.toggleBtn(Qe,!1)}},linkDialog:function(Ve){var Ge=this,qe=T.summernote.ui,Xe=Ve.layoutInfo.editor,Ye=Ve.options,Ze=Ye.langInfo;this.initialize=function(){var Qe=Ye.dialogsInBody?T(document.body):Xe,Je="<div class=\"form-group\"><label>"+Ze.link.textToDisplay+"</label><input class=\"note-link-text form-control\" type=\"text\" /></div><div class=\"form-group\"><label>"+Ze.link.url+"</label><input class=\"note-link-url form-control\" type=\"text\" value=\"http://\" /></div>"+(Ye.disableLinkTarget?"":"<div class=\"checkbox\"><label><input type=\"checkbox\" checked> "+Ze.link.openInNewWindow+"</label></div>"),et="<button href=\"#\" class=\"btn -dark note-link-btn disabled\" disabled>"+Ze.link.insert+"</button>";this.$dialog=qe.dialog({className:"link-dialog",title:Ze.link.insert,fade:Ye.dialogsFade,body:Je,footer:et}).render().appendTo(Qe)},this.destroy=function(){qe.hideDialog(this.$dialog),this.$dialog.remove()},this.bindEnterKey=function(Qe,Je){Qe.on("keypress",function(et){et.keyCode===pe.code.ENTER&&Je.trigger("click")})},this.toggleLinkBtn=function(Qe,Je,et){qe.toggleBtn(Qe,Je.val()&&et.val())},this.showLinkDialog=function(Qe){return T.Deferred(function(Je){var et=Ge.$dialog.find(".note-link-text"),tt=Ge.$dialog.find(".note-link-url"),ot=Ge.$dialog.find(".note-link-btn"),nt=Ge.$dialog.find("input[type=checkbox]");qe.onDialogShown(Ge.$dialog,function(){Ve.triggerEvent("dialog.shown"),Qe.url||(Qe.url=Qe.text),et.val(Qe.text);var it=function(){Ge.toggleLinkBtn(ot,et,tt),Qe.text=et.val()};et.on("input",it).on("paste",function(){setTimeout(it,0)});var lt=function(){Ge.toggleLinkBtn(ot,et,tt),Qe.text||et.val(tt.val())};tt.on("input",lt).on("paste",function(){setTimeout(lt,0)}).val(Qe.url).trigger("focus"),Ge.toggleLinkBtn(ot,et,tt),Ge.bindEnterKey(tt,ot),Ge.bindEnterKey(et,ot),nt.prop("checked",Qe.isNewWindow),ot.one("click",function(dt){dt.preventDefault(),Je.resolve({range:Qe.range,url:tt.val(),text:et.val(),isNewWindow:nt.is(":checked")}),Ge.$dialog.modal("hide")})}),qe.onDialogHidden(Ge.$dialog,function(){et.off("input paste keypress"),tt.off("input paste keypress"),ot.off("click"),"pending"===Je.state()&&Je.reject()}),qe.showDialog(Ge.$dialog)}).promise()},this.show=function(){var Qe=Ve.invoke("editor.getLinkInfo");Ve.invoke("editor.saveRange"),this.showLinkDialog(Qe).then(function(Je){Ve.invoke("editor.restoreRange"),Ve.invoke("editor.createLink",Je)}).fail(function(){Ve.invoke("editor.restoreRange")})},Ve.memo("help.linkDialog.show",Ye.langInfo.help["linkDialog.show"])},linkPopover:function(Ve){var Ge=this,qe=T.summernote.ui,Xe=Ve.options;this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){Ge.update()},"summernote.dialog.shown":function(){Ge.hide()}},this.shouldInitialize=function(){return!A.isEmpty(Xe.popover.link)},this.initialize=function(){this.$popover=qe.popover({className:"note-link-popover",callback:function(Qe){var Je=Qe.find(".popover-content");Je.prepend("<span><a target=\"_blank\"></a>&nbsp;</span>")}}).render().appendTo("body");var Ye=this.$popover.find(".popover-content");Ve.invoke("buttons.build",Ye,Xe.popover.link)},this.destroy=function(){this.$popover.remove()},this.update=function(){if(!Ve.invoke("editor.hasFocus"))return void this.hide();var Ye=Ve.invoke("editor.createRange");if(Ye.isCollapsed()&&Ye.isOnAnchor()){var Ze=B.ancestor(Ye.sc,B.isAnchor),Qe=T(Ze).attr("href");this.$popover.find("a").attr("href",Qe).html(Qe);var Je=B.posFromPlaceholder(Ze);this.$popover.css({display:"block",left:Je.left,top:Je.top})}else this.hide()},this.hide=function(){this.$popover.hide()}},imageDialog:function(Ve){var Ge=this,qe=T.summernote.ui,Xe=Ve.layoutInfo.editor,Ye=Ve.options,Ze=Ye.langInfo;this.initialize=function(){var Qe=Ye.dialogsInBody?T(document.body):Xe,Je="";if(Ye.maximumImageFileSize){var et=_Mathfloor(Math.log(Ye.maximumImageFileSize)/6.931471805599453),tt=1*(Ye.maximumImageFileSize/Math.pow(1024,et)).toFixed(2)+" "+" KMGTP"[et]+"B";Je="<small>"+Ze.image.maximumFileSize+" : "+tt+"</small>"}var ot="<div class=\"form-group note-group-select-from-files\"><label>"+Ze.image.selectFromFiles+"</label><input class=\"note-image-input form-control\" type=\"file\" name=\"files\" accept=\"image/*\" multiple=\"multiple\" />"+Je+"</div><div class=\"form-group note-group-image-url\" style=\"overflow:auto;\"><label>"+Ze.image.url+"</label><input class=\"note-image-url form-control col-md-12\" type=\"text\" /></div>",nt="<button href=\"#\" class=\"btn -dark note-image-btn disabled\" disabled>"+Ze.image.insert+"</button>";this.$dialog=qe.dialog({title:Ze.image.insert,fade:Ye.dialogsFade,body:ot,footer:nt}).render().appendTo(Qe)},this.destroy=function(){qe.hideDialog(this.$dialog),this.$dialog.remove()},this.bindEnterKey=function(Qe,Je){Qe.on("keypress",function(et){et.keyCode===pe.code.ENTER&&Je.trigger("click")})},this.show=function(){Ve.invoke("editor.saveRange"),this.showImageDialog().then(function(Qe){qe.hideDialog(Ge.$dialog),Ve.invoke("editor.restoreRange"),"string"==typeof Qe?Ve.invoke("editor.insertImage",Qe):Ve.invoke("editor.insertImagesOrCallback",Qe)}).fail(function(){Ve.invoke("editor.restoreRange")})},this.showImageDialog=function(){return T.Deferred(function(Qe){var Je=Ge.$dialog.find(".note-image-input"),et=Ge.$dialog.find(".note-image-url"),tt=Ge.$dialog.find(".note-image-btn");qe.onDialogShown(Ge.$dialog,function(){Ve.triggerEvent("dialog.shown"),Je.replaceWith(Je.clone().on("change",function(){Qe.resolve(this.files||this.value)}).val("")),tt.click(function(ot){ot.preventDefault(),Qe.resolve(et.val())}),et.on("keyup paste",function(){var ot=et.val();qe.toggleBtn(tt,ot)}).val("").trigger("focus"),Ge.bindEnterKey(et,tt)}),qe.onDialogHidden(Ge.$dialog,function(){Je.off("change"),et.off("keyup paste keypress"),tt.off("click"),"pending"===Qe.state()&&Qe.reject()}),qe.showDialog(Ge.$dialog)})}},imagePopover:function(Ve){var Ge=T.summernote.ui,qe=Ve.options;this.shouldInitialize=function(){return!A.isEmpty(qe.popover.image)},this.initialize=function(){this.$popover=Ge.popover({className:"note-image-popover"}).render().appendTo("body");var Xe=this.$popover.find(".popover-content");Ve.invoke("buttons.build",Xe,qe.popover.image)},this.destroy=function(){this.$popover.remove()},this.update=function(Xe){if(B.isImg(Xe)){var Ye=B.posFromPlaceholder(Xe);this.$popover.css({display:"block",left:Ye.left,top:Ye.top})}else this.hide()},this.hide=function(){this.$popover.hide()}},videoDialog:function(Ve){var Ge=this,qe=T.summernote.ui,Xe=Ve.layoutInfo.editor,Ye=Ve.options,Ze=Ye.langInfo;this.initialize=function(){var Qe=Ye.dialogsInBody?T(document.body):Xe,Je="<div class=\"form-group row-fluid\"><label>"+Ze.video.url+" <small class=\"text-muted\">"+Ze.video.providers+"</small></label><input class=\"note-video-url form-control span12\" type=\"text\" /></div>",et="<button href=\"#\" class=\"btn -dark note-video-btn disabled\" disabled>"+Ze.video.insert+"</button>";this.$dialog=qe.dialog({title:Ze.video.insert,fade:Ye.dialogsFade,body:Je,footer:et}).render().appendTo(Qe)},this.destroy=function(){qe.hideDialog(this.$dialog),this.$dialog.remove()},this.bindEnterKey=function(Qe,Je){Qe.on("keypress",function(et){et.keyCode===pe.code.ENTER&&Je.trigger("click")})},this.createVideoNode=function(Qe){var Je=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,et=Qe.match(Je),tt=/(?:www\.|\/\/)instagram\.com\/p\/(.[a-zA-Z0-9_-]*)/,ot=Qe.match(tt),nt=/\/\/vine\.co\/v\/([a-zA-Z0-9]+)/,it=Qe.match(nt),lt=/\/\/(player\.)?vimeo\.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/,dt=Qe.match(lt),ct=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/,pt=Qe.match(ct),ut=/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/,ht=Qe.match(ut),gt=/^.+.(mp4|m4v)$/,ft=Qe.match(gt),mt=/^.+.(ogg|ogv)$/,yt=Qe.match(mt),vt=/^.+.(webm)$/,bt=Qe.match(vt),Ct;if(et&&11===et[1].length){var xt=et[1];Ct=T("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+xt).attr("width","640").attr("height","360")}else if(ot&&ot[0].length)Ct=T("<iframe>").attr("frameborder",0).attr("src","https://instagram.com/p/"+ot[1]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true");else if(it&&it[0].length)Ct=T("<iframe>").attr("frameborder",0).attr("src",it[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed");else if(dt&&dt[3].length)Ct=T("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+dt[3]).attr("width","640").attr("height","360");else if(pt&&pt[2].length)Ct=T("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+pt[2]).attr("width","640").attr("height","360");else if(ht&&ht[1].length)Ct=T("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+ht[1]);else if(ft||yt||bt)Ct=T("<video controls>").attr("src",Qe).attr("width","640").attr("height","360");else return!1;return Ct.addClass("note-video-clip"),Ct[0]},this.show=function(){var Qe=Ve.invoke("editor.getSelectedText");Ve.invoke("editor.saveRange"),this.showVideoDialog(Qe).then(function(Je){qe.hideDialog(Ge.$dialog),Ve.invoke("editor.restoreRange");var et=Ge.createVideoNode(Je);et&&Ve.invoke("editor.insertNode",et)}).fail(function(){Ve.invoke("editor.restoreRange")})},this.showVideoDialog=function(Qe){return T.Deferred(function(Je){var et=Ge.$dialog.find(".note-video-url"),tt=Ge.$dialog.find(".note-video-btn");qe.onDialogShown(Ge.$dialog,function(){Ve.triggerEvent("dialog.shown"),et.val(Qe).on("input",function(){qe.toggleBtn(tt,et.val())}).trigger("focus"),tt.click(function(ot){ot.preventDefault(),Je.resolve(et.val())}),Ge.bindEnterKey(et,tt)}),qe.onDialogHidden(Ge.$dialog,function(){et.off("input"),tt.off("click"),"pending"===Je.state()&&Je.reject()}),qe.showDialog(Ge.$dialog)})}},helpDialog:function(Ve){var Ge=this,qe=T.summernote.ui,Xe=Ve.layoutInfo.editor,Ye=Ve.options,Ze=Ye.langInfo;this.createShortCutList=function(){var Qe=Ye.keyMap[O.isMac?"mac":"pc"];return Object.keys(Qe).map(function(Je){var et=Qe[Je],tt=T("<div><div class=\"help-list-item\"/></div>");return tt.append(T("<label><kbd>"+Je+"</kdb></label>").css({width:180,"margin-right":10})).append(T("<span/>").html(Ve.memo("help."+et)||et)),tt.html()}).join("")},this.initialize=function(){var Qe=Ye.dialogsInBody?T(document.body):Xe,Je=["<p class=\"text-center\">","<a href=\"http://summernote.org/\" target=\"_blank\">Summernote 0.8.2</a> \xB7 ","<a href=\"https://github.com/summernote/summernote\" target=\"_blank\">Project</a> \xB7 ","<a href=\"https://github.com/summernote/summernote/issues\" target=\"_blank\">Issues</a>","</p>"].join("");this.$dialog=qe.dialog({title:Ze.options.help,fade:Ye.dialogsFade,body:this.createShortCutList(),footer:Je,callback:function(tt){tt.find(".modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo(Qe)},this.destroy=function(){qe.hideDialog(this.$dialog),this.$dialog.remove()},this.showHelpDialog=function(){return T.Deferred(function(Qe){qe.onDialogShown(Ge.$dialog,function(){Ve.triggerEvent("dialog.shown"),Qe.resolve()}),qe.showDialog(Ge.$dialog)}).promise()},this.show=function(){Ve.invoke("editor.saveRange"),this.showHelpDialog().then(function(){Ve.invoke("editor.restoreRange")})}},airPopover:function(Ve){var Ge=this,qe=T.summernote.ui,Xe=Ve.options;this.events={"summernote.keyup summernote.mouseup summernote.scroll":function(){Ge.update()},"summernote.change summernote.dialog.shown":function(){Ge.hide()},"summernote.focusout":function(Qe,Je){!O.isFF&&(Je.relatedTarget&&B.ancestor(Je.relatedTarget,N.eq(Ge.$popover[0]))||Ge.hide())}},this.shouldInitialize=function(){return Xe.airMode&&!A.isEmpty(Xe.popover.air)},this.initialize=function(){this.$popover=qe.popover({className:"note-air-popover"}).render().appendTo("body");var Ze=this.$popover.find(".popover-content");Ve.invoke("buttons.build",Ze,Xe.popover.air)},this.destroy=function(){this.$popover.remove()},this.update=function(){var Ze=Ve.invoke("editor.currentStyle");if(Ze.range&&!Ze.range.isCollapsed()){var Qe=A.last(Ze.range.getClientRects());if(Qe){var Je=N.rect2bnd(Qe);this.$popover.css({display:"block",left:_Mathmax(Je.left+Je.width/2,0)-20,top:Je.top+Je.height})}}else this.hide()},this.hide=function(){this.$popover.hide()}}},buttons:{},lang:"en-US",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popover:{image:[["imagesize",["imageSize100","imageSize50","imageSize25"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]},airMode:!1,width:null,height:null,focus:!1,tabSize:4,styleWithSpan:!0,shortcuts:!0,textareaAutoSync:!0,direction:null,styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table -bordered -dark",insertTableMaxSize:{col:10,row:10},dialogsInBody:!1,dialogsFade:!1,maximumImageFileSize:null,callbacks:{onInit:null,onFocus:null,onBlur:null,onEnter:null,onKeyup:null,onKeydown:null,onImageUpload:null,onImageUploadError:null},codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"note-icon-align",alignCenter:"note-icon-align-center",alignJustify:"note-icon-align-justify",alignLeft:"note-icon-align-left",alignRight:"note-icon-align-right",indent:"note-icon-align-indent",outdent:"note-icon-align-outdent",arrowsAlt:"note-icon-arrows-alt",bold:"note-icon-bold",caret:"note-icon-caret",circle:"note-icon-circle",close:"note-icon-close",code:"note-icon-code",eraser:"note-icon-eraser",font:"note-icon-font",frame:"note-icon-frame",italic:"note-icon-italic",link:"note-icon-link",unlink:"note-icon-chain-broken",magic:"note-icon-magic",menuCheck:"note-icon-check",minus:"note-icon-minus",orderedlist:"note-icon-orderedlist",pencil:"note-icon-pencil",picture:"note-icon-picture",question:"note-icon-question",redo:"note-icon-redo",square:"note-icon-square",strikethrough:"note-icon-strikethrough",subscript:"note-icon-subscript",superscript:"note-icon-superscript",table:"note-icon-table",textHeight:"note-icon-text-height",trash:"note-icon-trash",underline:"note-icon-underline",undo:"note-icon-undo",unorderedlist:"note-icon-unorderedlist",video:"note-icon-video"}}})})},{codemirror:1}]},{},[2]);